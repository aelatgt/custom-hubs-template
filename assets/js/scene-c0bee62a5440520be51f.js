!function(e){function t(t){for(var i,s,r=t[0],c=t[1],l=t[2],u=0,h=[];u<r.length;u++)s=r[u],o[s]&&h.push(o[s][0]),o[s]=0;for(i in c)Object.prototype.hasOwnProperty.call(c,i)&&(e[i]=c[i]);for(d&&d(t);h.length;)h.shift()();return a.push.apply(a,l||[]),n()}function n(){for(var e,t=0;t<a.length;t++){for(var n=a[t],i=!0,r=1;r<n.length;r++){var c=n[r];0!==o[c]&&(i=!1)}i&&(a.splice(t--,1),e=s(s.s=n[0]))}return e}var i={},o={8:0},a=[];function s(t){if(i[t])return i[t].exports;var n=i[t]={i:t,l:!1,exports:{}};return e[t].call(n.exports,n,n.exports,s),n.l=!0,n.exports}s.e=function(){return Promise.resolve()},s.m=e,s.c=i,s.d=function(e,t,n){s.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:n})},s.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},s.t=function(e,t){if(1&t&&(e=s(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(s.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var i in e)s.d(n,i,function(t){return e[t]}.bind(null,i));return n},s.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return s.d(t,"a",t),t},s.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},s.p="/custom-hubs-template/",s.oe=function(e){throw console.error(e),e};var r=window.webpackJsonp=window.webpackJsonp||[],c=r.push.bind(r);r.push=t,r=r.slice();for(var l=0;l<r.length;l++)t(r[l]);var d=c;a.push([1415,1,0]),n()}({1:function(e,t,n){"use strict";function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},i=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),i.forEach(function(t){o(e,t,n[t])})}return e}function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n.d(t,"a",function(){return a});const a={noop:"/noop",actions:{}};a.actions.log="/actions/log",a.actions.toggleScreenShare="/actions/toggleScreenShare",a.actions.snapRotateLeft="/actions/snapRotateLeft",a.actions.snapRotateRight="/actions/snapRotateRight",a.actions.angularVelocity="/actions/angularVelocity",a.actions.logDebugFrame="/actions/logDebugFrame",a.actions.logInteractionState="/actions/logInteractionState",a.actions.debugUserInput={},a.actions.debugUserInput.describeCurrentMasks="/actions/debugUserInput/describeCurrentMasks",a.actions.cameraDelta="/actions/cameraDelta",a.actions.lobbyCameraDelta="/actions/lobbyCameraDelta",a.actions.characterAcceleration="/actions/characterAcceleration",a.actions.dCharSpeed="/actions/dCharSpeed",a.actions.boost="/actions/boost",a.actions.startGazeTeleport="/actions/startTeleport",a.actions.stopGazeTeleport="/actions/stopTeleport",a.actions.spawnPen="/actions/spawnPen",a.actions.ensureFrozen="/actions/ensureFrozen",a.actions.toggleFreeze="/actions/toggleFreeze",a.actions.thaw="/actions/thaw",a.actions.muteMic="/actions/muteMic",a.actions.toggleFly="/actions/toggleFly",a.actions.toggleUI="/actions/toggleUI",a.actions.waypointDeltaDistance="/actions/waypointDeltaDistance",a.actions.focusChat="/actions/focusChat",a.actions.focusChatCommand="/actions/focusChatCommand",a.actions.toggleCamera="/actions/toggleCamera",a.actions.takeSnapshot="/actions/takeSnapshot",a.actions.mediaExit="/actions/mediaExit",a.actions.mediaSearch1="/actions/mediaSearch1",a.actions.mediaSearch2="/actions/mediaSearch2",a.actions.mediaSearch3="/actions/mediaSearch3",a.actions.mediaSearch4="/actions/mediaSearch4",a.actions.mediaSearch5="/actions/mediaSearch5",a.actions.mediaSearch6="/actions/mediaSearch6",a.actions.mediaSearch7="/actions/mediaSearch7",a.actions.mediaSearch8="/actions/mediaSearch8",a.actions.transformModifier="/actions/transformModifier",a.actions.rayObjectRotation="/actions/rayObjectRotation",a.actions.cursor={},a.actions.cursor.right={},a.actions.cursor.right.pose="/actions/cursor/right/Pose",a.actions.cursor.right.hideLine="/actions/cursor/right/HideLine",a.actions.cursor.right.grab="/actions/cursor/right/Grab",a.actions.cursor.right.drop="/actions/cursor/right/Drop",a.actions.cursor.right.modDelta="/actions/cursor/right/ModDelta",a.actions.cursor.right.startDrawing="/actions/cursor/right/StartDrawing",a.actions.cursor.right.stopDrawing="/actions/cursor/right/StopDrawing",a.actions.cursor.right.undoDrawing="/actions/cursor/right/UndoDrawing",a.actions.cursor.right.penNextColor="/actions/cursor/right/PenNextColor",a.actions.cursor.right.penPrevColor="/actions/cursor/right/PenPrevColor",a.actions.cursor.right.scalePenTip="/actions/cursor/right/ScalePenTip",a.actions.cursor.right.scaleGrabbedGrabbable="/actions/cursor/right/ScaleGrabbedGrabbable",a.actions.cursor.right.mediaVolumeMod="/actions/cursor/right//mediaVolumeMod",a.actions.cursor.right.takeSnapshot="/actions/cursor/right/TakeSnapshot",a.actions.cursor.right.wake="/actions/cursor/right/wake",a.actions.cursor.left={},a.actions.cursor.left.pose="/actions/cursor/left/Pose",a.actions.cursor.left.hideLine="/actions/cursor/left/HideLine",a.actions.cursor.left.grab="/actions/cursor/left/Grab",a.actions.cursor.left.drop="/actions/cursor/left/Drop",a.actions.cursor.left.modDelta="/actions/cursor/left/ModDelta",a.actions.cursor.left.startDrawing="/actions/cursor/left/StartDrawing",a.actions.cursor.left.stopDrawing="/actions/cursor/left/StopDrawing",a.actions.cursor.left.undoDrawing="/actions/cursor/left/UndoDrawing",a.actions.cursor.left.penNextColor="/actions/cursor/left/PenNextColor",a.actions.cursor.left.penPrevColor="/actions/cursor/left/PenPrevColor",a.actions.cursor.left.scalePenTip="/actions/cursor/left/ScalePenTip",a.actions.cursor.left.scaleGrabbedGrabbable="/actions/cursor/left/ScaleGrabbedGrabbable",a.actions.cursor.left.mediaVolumeMod="/actions/cursor/left//mediaVolumeMod",a.actions.cursor.left.takeSnapshot="/actions/cursor/left/TakeSnapshot",a.actions.cursor.left.wake="/actions/cursor/left/wake",a.actions.pen={},a.actions.pen.remove="/actions/pen/remove",a.actions.rightHand={},a.actions.rightHand.matrix="/actions/rightHand/matrix",a.actions.rightHand.pose="/actions/rightHandPose",a.actions.rightHand.grab="/actions/rightHandGrab",a.actions.rightHand.drop="/actions/rightHandDrop",a.actions.rightHand.modDelta="/actions/rightHandModDelta",a.actions.rightHand.startDrawing="/actions/rightHandStartDrawing",a.actions.rightHand.stopDrawing="/actions/rightHandStopDrawing",a.actions.rightHand.undoDrawing="/actions/rightHandUndoDrawing",a.actions.rightHand.switchDrawMode="/actions/rightHandSwitchDrawMode",a.actions.rightHand.penNextColor="/actions/rightHandPenNextColor",a.actions.rightHand.penPrevColor="/actions/rightHandPenPrevColor",a.actions.rightHand.scalePenTip="/actions/rightHandScalePenTip",a.actions.rightHand.startTeleport="/actions/rightHand/startTeleport",a.actions.rightHand.stopTeleport="/actions/rightHand/stopTeleport",a.actions.rightHand.takeSnapshot="/actions/rightHandTakeSnapshot",a.actions.rightHand.thumb="/actions/rightHand/thumbDown",a.actions.rightHand.index="/actions/rightHand/indexDown",a.actions.rightHand.middleRingPinky="/actions/rightHand/middleRingPinkyDown",a.actions.leftHand={},a.actions.leftHand.matrix="/actions/leftHand/matrix",a.actions.leftHand.pose="/actions/leftHandPose",a.actions.leftHand.grab="/actions/leftHandGrab",a.actions.leftHand.drop="/actions/leftHandDrop",a.actions.leftHand.modDelta="/actions/leftHandModDelta",a.actions.leftHand.startDrawing="/actions/leftHandStartDrawing",a.actions.leftHand.stopDrawing="/actions/leftHandStopDrawing",a.actions.leftHand.undoDrawing="/actions/leftHandUndoDrawing",a.actions.leftHand.switchDrawMode="/actions/leftHandSwitchDrawMode",a.actions.leftHand.penNextColor="/actions/leftHandPenNextColor",a.actions.leftHand.penPrevColor="/actions/leftHandPenPrevColor",a.actions.leftHand.scalePenTip="/actions/leftHandScalePenTip",a.actions.leftHand.startTeleport="/actions/leftHand/startTeleport",a.actions.leftHand.stopTeleport="/actions/leftHand/stopTeleport",a.actions.leftHand.takeSnapshot="/actions/leftHandTakeSnapshot",a.actions.leftHand.thumb="/actions/leftHand/thumbDown",a.actions.leftHand.index="/actions/leftHand/indexDown",a.actions.leftHand.middleRingPinky="/actions/leftHand/middleRingPinkyDown",a.actions.camera={},a.actions.camera.exitMirror="/actions/cameraExitMirror",a.actions.startInspecting="/actions/startInspecting",a.actions.stopInspecting="/actions/stopInspecting",a.actions.inspectZoom="/actions/inspectZoom",a.actions.inspectPanY="/actions/inspectPanY",a.actions.resetInspectView="/actions/resetInspectView",a.actions.nextCameraMode="/actions/nextCameraMode",a.haptics={},a.haptics.actuators={},a.haptics.actuators.left="/haptics/actuators/left",a.haptics.actuators.right="/haptics/actuators/right",a.device={},a.device.mouse={},a.device.mouse.coords="/device/mouse/coords",a.device.mouse.movementXY="/device/mouse/movementXY",a.device.mouse.buttonLeft="/device/mouse/buttonLeft",a.device.mouse.buttonRight="/device/mouse/buttonRight",a.device.mouse.buttonMiddle="/device/mouse/buttonMiddle",a.device.mouse.wheel="/device/mouse/wheel",a.device.smartMouse={},a.device.smartMouse.cursorPose="/device/smartMouse/cursorPose",a.device.smartMouse.cameraDelta="/device/smartMouse/cameraDelta",a.device.smartMouse.shouldMoveCamera="/device/smartMouse/shouldMoveCamera",a.device.touchscreen={},a.device.touchscreen.cursorPose="/device/touchscreen/cursorPose",a.device.touchscreen.touchCameraDelta="/device/touchscreen/touchCameraDelta",a.device.touchscreen.gyroCameraDelta="/device/touchscreen/gyroCameraDelta",a.device.touchscreen.cameraDelta="/device/touchscreen/cameraDelta",a.device.touchscreen.pinch={},a.device.touchscreen.pinch.delta="/device/touchscreen/pinch/delta",a.device.touchscreen.pinch.initialDistance="/device/touchscreen/pinch/initialDistance",a.device.touchscreen.pinch.currentDistance="/device/touchscreen/pinch/currentDistance",a.device.touchscreen.isTouching="/device/touchscreen/isTouching",a.device.touchscreen.isTouchingGrabbable="/device/touchscreen/isTouchingGrabbable",a.device.touchscreen.tap1="/device/touchscreen/tap1",a.device.touchscreen.tap2="/device/touchscreen/tap2",a.device.touchscreen.tap3="/device/touchscreen/tap3",a.device.touchscreen.tap4="/device/touchscreen/tap4",a.device.touchscreen.tap5="/device/touchscreen/tap5",a.device.touchscreen.anything="/device/touchscreen/anything",a.device.gyro={},a.device.gyro.averageDeltaX="/device/gyro/averageDeltaX",a.device.gyro.averageDeltaY="/device/gyro/averageDeltaY",a.device.hud={},a.device.hud.penButton="/device/hud/penButton",a.device.keyboard={map:new Map,key:function(e){let t=this.map.get(e);return t||(t=`/device/keyboard/${" "===e?"space":e.toLowerCase()}`,this.map.set(e,t),t)}},a.device.gamepad=e=>({button:t=>({pressed:`/device/gamepad/${e}/button/${t}/pressed`,touched:`/device/gamepad/${e}/button/${t}/touched`,value:`/device/gamepad/${e}/button/${t}/value`}),axis:t=>`/device/gamepad/${e}/axis/${t}`});const s="/device/xbox/";a.device.xbox={v:e=>`/vars/xbox/${e}`,button:e=>({pressed:`${s}button/${e}/pressed`,touched:`${s}button/${e}/touched`,value:`${s}button/${e}/value`}),axis:e=>`${s}axis/${e}`,axesSum:`${s}axis/sum`},a.device.oculusgo={button:e=>({pressed:`/device/oculusgo/button/${e}/pressed`,touched:`/device/oculusgo/button/${e}/touched`,value:`/device/oculusgo/button/${e}/value`}),axis:e=>`/device/oculusgo/axis/${e}`,trigger:{pressed:"/device/oculusgo/button/trigger/pressed",touched:"/device/oculusgo/button/trigger/touched",value:"/device/oculusgo/button/trigger/value"},touchpad:{pressed:"/device/oculusgo/button/touchpad/pressed",touched:"/device/oculusgo/button/touchpad/touched",value:"/device/oculusgo/button/touchpad/value",axisX:"/device/oculusgo/axis/touchpadX",axisY:"/device/oculusgo/axis/touchpadY"},pose:"/device/oculusgo/pose",matrix:"/device/oculusgo/matrix",v:e=>`/vars/oculusgo/${e}`};const r="/device/gearVRController/";a.device.gearVRController={button:e=>({pressed:`${r}button/${e}/pressed`,touched:`${r}button/${e}/touched`,value:`${r}button/${e}/value`}),axis:e=>`${r}axis/${e}`,pose:`${r}pose`,matrix:`${r}matrix`,v:e=>`/vars/gearVRController/${e}`};const c="/device/daydream/";a.device.daydream={button:e=>({pressed:`${c}button/${e}/pressed`,touched:`${c}button/${e}/touched`,value:`${c}button/${e}/value`}),axis:e=>`${c}axis/${e}`,pose:`${c}pose`,matrix:`${c}matrix`};const l="/device/rightOculusTouch/";a.device.rightOculusTouch={button:e=>({pressed:`${l}button/${e}/pressed`,touched:`${l}button/${e}/touched`,value:`${l}button/${e}/value`}),axis:e=>`${l}axis/${e}`,axesSum:`${l}axis/sum`,pose:`${l}pose`,matrix:`${l}matrix`};const d="/device/leftOculusTouch/";function u(e,t,n){return{pressed:`${e}${t}/button/${n}/pressed`,touched:`${e}${t}/button/${n}/touched`,value:`${e}${t}/button/${n}/value`}}function h(e,t,n){return{axisX:`${e}${t}/axis/${n}X`,axisY:`${e}${t}/axis/${n}Y`}}function p(e){const t="/device/wmr/";return{touchpad:i({},u(t,e,"touchpad"),h(t,e,"touchpad")),trigger:u(t,e,"trigger"),grip:u(t,e,"grip"),menu:u(t,e,"menu"),joystick:h(t,e,"joystick"),pose:`${t}${e}/pose`,matrix:`${t}${e}/matrix`}}a.device.leftOculusTouch={button:e=>({pressed:`${d}button/${e}/pressed`,touched:`${d}button/${e}/touched`,value:`${d}button/${e}/value`}),axis:e=>`${d}axis/${e}`,axesSum:`${d}axis/sum`,pose:`${d}pose`,matrix:`${d}matrix`},a.device.vive={},a.device.vive.left={button:e=>({pressed:`/device/vive/left/button/${e}/pressed`,touched:`/device/vive/left/button/${e}/touched`,value:`/device/vive/left/button/${e}/value`}),axis:e=>`/device/vive/left/axis/${e}`,axesSum:"/device/vive/left/axis/sum",pose:"/device/vive/left/pose",matrix:"/device/vive/left/matrix"},a.device.vive.right={button:e=>({pressed:`/device/vive/right/button/${e}/pressed`,touched:`/device/vive/right/button/${e}/touched`,value:`/device/vive/right/button/${e}/value`}),axis:e=>`/device/vive/right/axis/${e}`,axesSum:"/device/vive/right/axis/sum",pose:"/device/vive/right/pose",matrix:"/device/vive/right/matrix"},a.device.wmr={},a.device.wmr.v=e=>`/vars/wmr/${e}`,a.device.wmr.k=e=>`/vars/wmr/keyboard/${e}`,a.device.wmr.left=p("left"),a.device.wmr.right=p("right")},112:function(e,t){e.exports={COLLISION_LAYERS:{ALL:-1,NONE:0,INTERACTABLES:1,ENVIRONMENT:2,AVATAR:4,HANDS:8,DEFAULT_INTERACTABLE:15,UNOWNED_INTERACTABLE:9,DEFAULT_SPAWNER:9}}},114:function(e,t,n){"use strict";function i(e){let t=0;const n={};return e.onmessage=t=>{const{id:i,result:o,err:a}=t.data,s=n[i];null==s?console.error(`Unknown message with ID ${i} received from ${e}.`):(delete n[i],null!=a?s.reject(new Error(a)):s.resolve(o))},function(i,o,a={}){const s=t++,r=new Promise((e,t)=>{n[s]={resolve:e,reject:t}});return e.postMessage(Object.assign(a,{id:s,payload:i}),o),r}}n.d(t,"a",function(){return i})},115:function(e,t,n){"use strict";n.d(t,"a",function(){return p}),n.d(t,"b",function(){return g});var i=n(77),o=n(4),a=n(9),s=n(17);function r(e,t,n,i,o,a,s){try{var r=e[a](s),c=r.value}catch(e){return void n(e)}r.done?t(c):Promise.resolve(c).then(i,o)}function c(e){return function(){var t=this,n=arguments;return new Promise(function(i,o){var a=e.apply(t,n);function s(e){r(a,i,o,s,c,"next",e)}function c(e){r(a,i,o,s,c,"throw",e)}s(void 0)})}}function l(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const d={entries:[],meta:{}},u={scenes:"scene_listings",images:"bing_images",videos:"bing_videos",youtube:"youtube_videos",gifs:"tenor",sketchfab:"sketchfab",poly:"poly",twitch:"twitch",favorites:"favorites"},h=o.a.AVAILABLE_INTEGRATIONS,p=["poly","sketchfab","videos","scenes","avatars","gifs","images"].filter(e=>{const t=u[e];return!h.hasOwnProperty(t)||h[t]}),m={gifs:"trending",sketchfab:"featured",scenes:"featured",favorites:"my-favorites"},f=["q","filter","cursor","similar_to"];class g extends i.a{constructor(){var e;super(),e=this,l(this,"_update",function(){var t=c(function*(t){e.result=null,e.dispatchEvent(new CustomEvent("statechanged"));const n=e.getUrlMediaSource(t);if(!n)return;e.previousSource&&e.previousSource===n||(e.dispatchEvent(new CustomEvent("sourcechanged")),e.previousSource=n);const i=new URLSearchParams(t.search);e.requestIndex++;const o=e.requestIndex,s=new URLSearchParams,r=new URLSearchParams(t.search),c=r.get("filter")&&r.get("filter").startsWith("my-");for(const e of f)i.get(e)&&s.set(e,i.get(e));let l;if(s.get("locale",navigator.languages[0]),"avatars"===n||"scenes"===n){const e="avatars"===n?"avatar":"scene";l=c?`${e}s`:`${e}_listings`}else l=u[n];s.set("source",l);let h=!0;"avatars"!==l&&"scenes"!==l&&"favorites"!==l||c&&(window.APP.store.credentialsAccountId?s.set("user",window.APP.store.credentialsAccountId):h=!1);const p=`/api/v1/media/search?${s.toString()}`,m=Object(a.h)(p);if(e.lastSavedUrl===m)return;e.isFetching=!0,e.dispatchEvent(new CustomEvent("statechanged"));const g=h?yield Object(a.d)(p):d;e.requestIndex==o&&(e.result=g,e.nextCursor=e.result&&e.result.meta&&e.result.meta.next_cursor,e.lastFetchedUrl=m,e.isFetching=!1,e.dispatchEvent(new CustomEvent("statechanged")))});return function(e){return t.apply(this,arguments)}}()),l(this,"pageNavigate",e=>{if(-1===e)this.history.goBack();else{const e=this.history.location,t=new URLSearchParams(e.search);t.set("cursor",this.nextCursor),Object(s.d)(this.history,e.pathname,t.toString())}}),l(this,"filterQueryNavigate",(e,t)=>{const n=this.history.location,i=new URLSearchParams(n.search);i.delete("similar_to"),i.delete("similar_name"),t?i.set("q",t):i.delete("q"),e?i.set("filter",e):i.delete("filter"),e?i.set("cursor",e):i.delete("cursor"),Object(s.d)(this.history,n.pathname,i.toString())}),l(this,"getSearchClearedSearchParams",(e,t,n,i)=>{const o=new URLSearchParams(e.search);return o.delete("q"),o.delete("filter"),o.delete("cursor"),o.delete("similar_to"),o.delete("similar_name"),n||o.delete("media_nav"),t||o.delete("media_source"),i||o.delete("selectAction"),o}),l(this,"_stashLastSearchParams",e=>{const t=new URLSearchParams(e.search);this._stashedParams={},this._stashedSource=null;const n=this.getUrlMediaSource(e);if("favorites"!==n){this._stashedSource=n;for(const e of f){const n=t.get(e);n&&(this._stashedParams[e]=n)}}}),l(this,"clearStashedQuery",()=>{this._stashedParams&&delete this._stashedParams.q}),l(this,"sourceNavigate",e=>{this._sourceNavigate(e,!1,!0)}),l(this,"sourceNavigateToDefaultSource",()=>{this._sourceNavigate(this._stashedSource?this._stashedSource:p[0],!1,!0)}),l(this,"sourceNavigateWithNoNav",(e,t)=>{this._sourceNavigate(e,!0,!1,t)}),l(this,"_sourceNavigate",function(){var t=c(function*(t,n,i,r){const c=new URLSearchParams(e.history.location.search).get("q"),l=e.getSearchClearedSearchParams(e.history.location);if(c)l.set("q",c);else if(i&&e._stashedParams)for(const n of f){const i=e._stashedParams[n],o="q"===n||e._stashedSource===t;i&&o&&l.set(n,i)}else if("avatars"===t){const t=yield e._hasAccountWithAvatars();l.set("filter",t?"my-avatars":"featured")}else m[t]&&l.set("filter",m[t]);e._stashedParams=null,e._stashedSource=null,n&&l.set("media_nav","false"),r&&l.set("selectAction",r),Object(a.j)()&&document.location.host!==o.a.RETICULUM_SERVER?(l.set("media_source",t),Object(s.d)(e.history,e.history.location.pathname,l.toString())):Object(s.d)(e.history,Object(s.h)(e.history.location,`/media/${t}`),l.toString())});return function(e,n,i,o){return t.apply(this,arguments)}}()),l(this,"_hasAccountWithAvatars",c(function*(){const{credentialsAccountId:e}=window.APP.store;if(!e)return!1;const t=new URLSearchParams;t.set("source","avatars"),t.set("user",e);const n=yield Object(a.d)(`/api/v1/media/search?${t.toString()}`);return!(!n||!n.entries)&&n.entries.length>0})),l(this,"getUrlMediaSource",e=>{const{search:t}=e,n=new URLSearchParams(t),i=Object(s.g)(e);return i.startsWith("/media")||n.get("media_source")?n.get("media_source")||i.substring(7):null}),l(this,"pushExitMediaBrowserHistory",(e,t=!0)=>{e||(e=this.history),t&&this._stashLastSearchParams(e.location);const{pathname:n}=e.location,i=Object(s.g)(e.location).startsWith("/media");Object(s.d)(e,i?Object(s.h)(e.location,"/"):n,this.getSearchClearedSearchParams(e.location).toString()),this.dispatchEvent(new CustomEvent("media-exit"))}),this.requestIndex=0}setHistory(e){this.history=e,this._update(this.history.location),this.history.listen(e=>{this._update(e)})}}},12:function(e,t,n){"use strict";n.d(t,"j",function(){return f}),n.d(t,"h",function(){return g}),n.d(t,"i",function(){return b}),n.d(t,"a",function(){return v}),n.d(t,"b",function(){return y}),n.d(t,"c",function(){return E}),n.d(t,"g",function(){return T}),n.d(t,"f",function(){return O}),n.d(t,"e",function(){return D}),n.d(t,"d",function(){return j});var i=n(9),o=n(4);function a(e,t){a=function(e,t){return new r(e,t)};var n=s(RegExp),i=RegExp.prototype,o=new WeakMap;function r(e,t){var i=n.call(this,e);return o.set(i,t),i}function l(e,n){var i=o.get(n);return Object.keys(t).reduce(function(t,n){return t[n]=e[i[n]],t},Object.create(null))}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&c(e,t)}(r,n),r.prototype.exec=function(e){var t=i.exec.call(this,e);return t&&(t.groups=l(t,this)),t},r.prototype[Symbol.replace]=function(e,t){if("string"==typeof t){var n=o.get(this);return i[Symbol.replace].call(this,e,t.replace(/\$<([^>]+)>/g,function(e,t){return"$"+n[t]}))}if("function"==typeof t){var a=this;return i[Symbol.replace].call(this,e,function(){var e=[];return e.push.apply(e,arguments),"object"!=typeof e[e.length-1]&&e.push(l(e,a)),t.apply(this,e)})}return i[Symbol.replace].call(this,e,t)},a.apply(this,arguments)}function s(e){var t="function"==typeof Map?new Map:void 0;return(s=function(e){if(null===e||(n=e,-1===Function.toString.call(n).indexOf("[native code]")))return e;var n;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,i)}function i(){return r(e,arguments,l(this).constructor)}return i.prototype=Object.create(e.prototype,{constructor:{value:i,enumerable:!1,writable:!0,configurable:!0}}),c(i,e)})(e)}function r(e,t,n){return(r=function(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],function(){})),!0}catch(e){return!1}}()?Reflect.construct:function(e,t,n){var i=[null];i.push.apply(i,t);var o=new(Function.bind.apply(e,i));return n&&c(o,n.prototype),o}).apply(null,arguments)}function c(e,t){return(c=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function l(e){return(l=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function d(e,t,n,i,o,a,s){try{var r=e[a](s),c=r.value}catch(e){return void n(e)}r.done?t(c):Promise.resolve(c).then(i,o)}function u(e){return function(){var t=this,n=arguments;return new Promise(function(i,o){var a=e.apply(t,n);function s(e){d(a,i,o,s,r,"next",e)}function r(e){d(a,i,o,s,r,"throw",e)}s(void 0)})}}const h=(o.a.NON_CORS_PROXY_DOMAINS||"").split(",");o.a.CORS_PROXY_SERVER&&h.push(o.a.CORS_PROXY_SERVER),h.push(document.location.hostname);const p={gltf:"model/gltf",glb:"model/gltf-binary",png:"image/png",jpg:"image/jpeg",jpeg:"image/jpeg",pdf:"application/pdf",mp4:"video/mp4",mp3:"audio/mpeg"};const m=e=>(function(e){return btoa(encodeURIComponent(e).replace(/%([0-9A-F]{2})/g,(e,t)=>String.fromCharCode("0x"+t)))})(e).replace(/=+$/g,"").replace(/\+/g,"-").replace(/\//g,"_"),f=(e,t,n)=>{let a="";try{const t=new URL(e).pathname.split(".");if(t.length>1){const e=t.pop();p[e]&&(a=`.${e}`)}}catch(e){a=".png"}const s=`https://${o.a.THUMBNAIL_SERVER}/thumbnail/${m(e)}${a}?w=${t}&h=${n}`;try{const t=new URL(e).hostname;if(Object(i.j)()){if(new URL(`https://${o.a.RETICULUM_SERVER}`).hostname===t)return e}}catch(e){return s}return s},g=e=>h.find(t=>e.endsWith(t)),b=e=>{if(!e.startsWith("http:")&&!e.startsWith("https:"))return e;try{const t=new URL(e);if(g(t.hostname))return e}catch(e){}return`https://${o.a.CORS_PROXY_SERVER}/${e}`};function v(e,t){return function(e,t){return new URL(t,e)}(e,t).href}const y=e=>t=>{if("string"!=typeof t||""===t)return"";if(/^(https?:)?\/\//i.test(t))return t;if(/^data:.*,.*$/i.test(t))return t;if(/^blob:.*$/i.test(t))return t;if(o.a.CORS_PROXY_SERVER){const n=`https://${o.a.CORS_PROXY_SERVER}/`;if(e.startsWith(n)){const i=decodeURIComponent(e.substring(n.length)).split("/"),o=new URL(t).pathname;return n+(i.slice(0,i.length-1).join("/")+"/"+o)}}return t},w=/data:([a-zA-Z0-9]+\/[a-zA-Z0-9-.+]+).*,.*/,E=e=>{if(!e)return;if(e.startsWith("hubs://")&&e.endsWith("/video"))return"video/vnd.hubs-webrtc";if(e.startsWith("data:")){const t=w.exec(e);t.length>0&&t[1]}const t=new URL(e,window.location).pathname.split(".").pop();return p[t]},_=new Map;function x(e){return A.apply(this,arguments)}function A(){return(A=u(function*(e){if(!e)return!1;e.startsWith("http")||(e="https://"+e);const{origin:t}=new URL(e);if(_.has(t))return _.get(t);let n;try{n=(yield fetch(b(t),{method:"HEAD"})).headers.has("hub-name")}catch(e){n=!1}return _.set(t,n),n})).apply(this,arguments)}const S=/https?:\/\/[^\/]+\/scenes\/(\w+)\/?\S*/,R=a(/https?:\/\/[^\/]+\/avatars\/(\w+)\/?\S*/,{id:1}),M=/(https?:\/\/)?[^\/]+\/([a-zA-Z0-9]{7})\/?\S*/,P=function(){var e=u(function*(e){return(yield x(e))&&new URL(e).origin===document.location.origin});return function(t){return e.apply(this,arguments)}}(),C=function(){var e=u(function*(e){return(yield x(e))&&S.test(e)});return function(t){return e.apply(this,arguments)}}(),T=function(){var e=u(function*(e){return(yield C(e))&&(yield P(e))});return function(t){return e.apply(this,arguments)}}(),k=function(){var e=u(function*(e){return(yield x(e))&&R.test(e)});return function(t){return e.apply(this,arguments)}}(),O=function(){var e=u(function*(e){return(yield k(e))&&(yield P(e))});return function(t){return e.apply(this,arguments)}}(),D=function(){var e=u(function*(e){return(yield x(e))&&!(yield k(e))&&!(yield C(e))&&M.test(e)});return function(t){return e.apply(this,arguments)}}(),j=e=>{const t=e.match(R);return t?t.groups.id:null}},126:function(e,t,n){"use strict";n.d(t,"a",function(){return o});var i=n(106);function o(){if("iOS"!==Object(i.detectOS)(navigator.userAgent))return;let e=0;document.addEventListener("touchmove",e=>{1!==e.scale&&e.preventDefault()}),document.addEventListener("touchend",t=>{const n=(new Date).getTime(),i=n-e<=300;e=n,i&&t.preventDefault()})}},127:function(e,t,n){"use strict";function i(e,t){window.APP.componentRegistry=window.APP.componentRegistry||{},window.APP.componentRegistry[t]=window.APP.componentRegistry[t]||[],window.APP.componentRegistry[t].push(e)}function o(e,t){window.APP.componentRegistry&&window.APP.componentRegistry[t]&&window.APP.componentRegistry[t].splice(window.APP.componentRegistry[t].indexOf(e),1)}function a(){if(!(window.APP&&window.APP.componentRegistry&&window.APP.hubChannel&&window.APP.hubChannel.presence))return null;const e=window.APP.componentRegistry["player-info"]||[],t=window.APP.hubChannel.presence.state;for(let n=0;n<e.length;n++){const i=e[n],o=t[i.playerSessionId];if(o&&o.metas[0]&&o.metas[0].streaming)return i}return null}n.d(t,"c",function(){return i}),n.d(t,"a",function(){return o}),n.d(t,"b",function(){return a})},13:function(e,t,n){"use strict";n.d(t,"h",function(){return o}),n.d(t,"i",function(){return a}),n.d(t,"f",function(){return r}),n.d(t,"l",function(){return l}),n.d(t,"e",function(){return u}),n.d(t,"g",function(){return h}),n.d(t,"j",function(){return p}),n.d(t,"m",function(){return m}),n.d(t,"a",function(){return f}),n.d(t,"b",function(){return g}),n.d(t,"c",function(){return b}),n.d(t,"k",function(){return v}),n.d(t,"d",function(){return y});const i=new THREE.Vector3;new THREE.Quaternion;function o(e,t){return e.updateMatrices(),t.setFromMatrixPosition(e.matrixWorld),t}function a(e,t){return e.updateMatrices(),e.matrixWorld.decompose(i,t,i),t}function s(e){e.map&&e.map.dispose(),e.lightMap&&e.lightMap.dispose(),e.bumpMap&&e.bumpMap.dispose(),e.normalMap&&e.normalMap.dispose(),e.specularMap&&e.specularMap.dispose(),e.envMap&&e.envMap.dispose(),e.dispose()}function r(e){if(e instanceof THREE.Mesh&&(e.geometry&&e.geometry.dispose(),e.material)){let t;e.material instanceof THREE.MeshFaceMaterial||e.material instanceof THREE.MultiMaterial?t=e.material.materials:e.material instanceof Array&&(t=e.material),t?t.forEach(s):s(e.material)}}const c=(new THREE.Matrix4).identity();function l(e,t){e.matrixIsModified||e.applyMatrix(c),e.matrixWorld.copy(t),e.parent?e.matrix=e.matrix.getInverse(e.parent.matrixWorld).multiply(e.matrixWorld):e.matrix.copy(e.matrixWorld),e.matrix.decompose(e.position,e.quaternion,e.scale),e.childrenNeedMatrixWorldUpdate=!0}function d(e,t){const n=e.tracks.map(e=>(function(e,t){const{nodeName:n,objectName:i,objectIndex:o,propertyName:a,propertyIndex:s}=THREE.PropertyBinding.parseTrackName(e.name);let r="";if(void 0!==n){const e=t.get(n);void 0===e&&console.warn(`Could not find KeyframeTrack target with uuid: "${n}"`),r+=e}void 0!==i&&(r+="."+i),void 0!==o&&(r+="["+o+"]"),void 0!==a&&(r+="."+a),void 0!==s&&(r+="["+s+"]");const c=e.clone();return c.name=r,c})(e,t));return new THREE.AnimationClip(e.name,e.duration,n)}function u(e,t){const n=new Map,i=new Map,o=e.clone();return function e(t,n,i){i(t,n);for(let o=0;o<t.children.length;o++)e(t.children[o],n.children[o],i)}(e,o,(e,t)=>{n.set(e,t)}),e.traverse(e=>{const o=n.get(e);t&&(o.uuid=e.uuid),i.set(e.uuid,o.uuid)}),e.traverse(e=>{const t=n.get(e);if(!t)return;if(e.animations&&(t.animations=e.animations.map(e=>d(e,i))),e.isMesh&&e.geometry.boundsTree&&(t.geometry.boundsTree=e.geometry.boundsTree),!e.isSkinnedMesh)return;const o=e.skeleton.bones;t.skeleton=e.skeleton.clone(),t.skeleton.bones=o.map(e=>{if(!n.has(e))throw new Error("Required bones are not descendants of the given object.");return n.get(e)}),t.bind(t.skeleton,e.bindMatrix)}),o}function h(e,t){let n=[e];for(;n.length;){const e=n.shift();if(t(e))return e;e.children&&(n=n.concat(e.children))}return null}const p=function(){const e=new THREE.Matrix4,t={position:new THREE.Vector3,quaternion:new THREE.Quaternion,scale:new THREE.Vector3},n={position:new THREE.Vector3,quaternion:new THREE.Quaternion,scale:new THREE.Vector3},i={position:new THREE.Vector3,quaternion:new THREE.Quaternion,scale:new THREE.Vector3};return function(o,a,s,r){return n.quaternion.setFromRotationMatrix(e.extractRotation(o)),t.quaternion.setFromRotationMatrix(e.extractRotation(a)),THREE.Quaternion.slerp(n.quaternion,t.quaternion,i.quaternion,s),i.position.lerpVectors(n.position.setFromMatrixColumn(o,3),t.position.setFromMatrixColumn(a,3),s),i.scale.lerpVectors(n.scale.setFromMatrixScale(o),t.scale.setFromMatrixScale(a),s),r.compose(i.position,i.quaternion,i.scale)}}(),m=function(){const e=new THREE.Vector3,t=new THREE.Vector3;return function(n,i){return n.updateMatrices(),i.updateMatrices(),e.setFromMatrixColumn(n.matrixWorld,3),t.setFromMatrixColumn(i.matrixWorld,3),e.distanceToSquared(t)}}();const f=function(){const e=new THREE.Matrix4,t=new THREE.Vector3,n=new THREE.Vector3,i=new THREE.Vector3,o=new THREE.Vector3,a=new THREE.Vector3,s=new THREE.Matrix4;return function(r,c){return e.identity().extractRotation(s.copy(r)),t.setFromMatrixColumn(e,2).multiplyScalar(-1),n.copy(t).sub(a.copy(t).projectOnVector(o.set(0,1,0))).normalize(),i.crossVectors(n,o),c.makeBasis(i,o,n.multiplyScalar(-1)),c.scale(a.setFromMatrixScale(s)),c.setPosition(a.setFromMatrixColumn(s,3)),c}}(),g=function(){const e=new THREE.Matrix4,t=new THREE.Matrix4,n=new THREE.Matrix4;return function(i,o,a){f(i,e),n.getInverse(e).multiply(i),f(o,t),a.copy(t).multiply(n)}}(),b=function(e,t,n,i,o,a){const s=Math.max(Math.abs(i.max.y-o.y),Math.abs(o.y-i.min.y)),r=Math.max(Math.abs(i.max.x-o.x),Math.abs(o.x-i.min.x)),c=THREE.Math.degToRad(e/2),l=Math.atan(Math.tan(c)*t)*(a?.5:1),d=Math.abs(1.05*s/Math.tan(c)),u=Math.abs(1.05*r/Math.tan(l)),h=Math.abs(i.max.z-o.z)+Math.max(d,u);return(a?Math.max(.25,h):h)||1.25},v=function(){const e=new THREE.Matrix4,t=new THREE.Matrix4,n=new THREE.Matrix4,i=new THREE.Vector3;return function(o,a,s){return e.copy(o),s.copy(n.makeRotationY(a).multiply(t.extractRotation(e))).scale(i.setFromMatrixScale(e)).setPosition(i.setFromMatrixPosition(e))}}(),y=function(){const e=new THREE.Matrix4,t=new THREE.Matrix4;return function(n,i,o){i.updateMatrices(),e.getInverse(i.matrix),t.multiplyMatrices(o,e),l(n,t)}}()},1354:function(e,t,n){e.exports={"loading-text":"scene__loading-text__2zWvK",loadingText:"scene__loading-text__2zWvK"}},1415:function(e,t,n){"use strict";n.r(t);n(182),n(96);var i=n(4),o=(n(1354),n(281),n(237),n(344),n(246)),a=(n(340),n(377),n(359),n(373),n(9)),s=n(53),r=n.n(s),c=n(0),l=n.n(c),d=n(66),u=n.n(d),h=n(722),p=n.n(h),m=n(2),f=n.n(m),g=n(5),b=n.n(g),v=n(3),y=n(84),w=n.n(y),E=n(20),_=n(63),x=n.n(_),A=n(24),S=n(21);function R(){return(R=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e}).apply(this,arguments)}function M(e,t){if(null==e)return{};var n,i,o=function(e,t){if(null==e)return{};var n,i,o={},a=Object.keys(e);for(i=0;i<a.length;i++)n=a[i],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(i=0;i<a.length;i++)n=a[i],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}function P(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const C="^.{1,64}$";class T extends c.Component{constructor(...e){super(...e),P(this,"state",{customRoomName:"",customSceneUrl:""})}render(){const e=this.props,{onCustomScene:t,onClose:n}=e,i=M(e,["onCustomScene","onClose"]);return l.a.createElement(S.a,R({title:"Create a Room",onClose:n},i),l.a.createElement("div",null,this.props.includeScenePrompt?l.a.createElement("div",null,"Choose a name and GLTF URL for your room's scene:"):l.a.createElement("div",null,"Choose a name for your room:"),l.a.createElement("form",{onSubmit:()=>{t(this.state.customRoomName,this.state.customSceneUrl),n()}},l.a.createElement("div",{className:"custom-scene-form"},l.a.createElement("input",{type:"text",placeholder:"Room name",className:"custom-scene-form__link_field",value:this.state.customRoomName,pattern:C,title:"Names must be at most 64 characters.",onChange:e=>this.setState({customRoomName:e.target.value}),required:!0}),this.props.includeScenePrompt&&l.a.createElement("input",{type:"url",placeholder:"URL to Scene GLTF or GLB (Optional)",className:"custom-scene-form__link_field",value:this.state.customSceneUrl,onChange:e=>this.setState({customSceneUrl:e.target.value})}),l.a.createElement("div",{className:"custom-scene-form__buttons"},l.a.createElement(A.b,null,l.a.createElement("button",{className:"custom-scene-form__action-button"},l.a.createElement("span",null,"Create Room"))))))))}}P(T,"propTypes",{includeScenePrompt:f.a.bool,onCustomScene:f.a.func,onClose:f.a.func});var k=n(8),O=n(723),D=n(724),j=n(101),L=n(16);function H(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}Object(v.c)([...w.a]);class F extends c.Component{constructor(e){super(e),H(this,"state",{showScreenshot:!1,showCustomRoomDialog:!1}),H(this,"createRoom",()=>{Object(a.b)(this.state.customRoomName,this.props.sceneId)}),setTimeout(()=>{this.props.sceneLoaded||this.setState({showScreenshot:!0})},5e3)}componentDidMount(){this.props.scene.addEventListener("loaded",this.onSceneLoaded)}componentWillUnmount(){this.props.scene.removeEventListener("loaded",this.onSceneLoaded)}render(){if(this.props.unavailable)return l.a.createElement(v.b,{locale:L.a,messages:L.b},l.a.createElement("div",{className:x.a.ui},l.a.createElement("div",{className:x.a.unavailable},l.a.createElement("div",null,l.a.createElement(v.a,{id:"scene.unavailable"})))));const{sceneAllowRemixing:e,isOwner:t,sceneProjectId:n,parentScene:o,sceneId:s}=this.props,r=[location.protocol,"//",location.host,location.pathname].join(""),c=`${this.props.sceneName} in ${L.b["share-hashtag"]}`,d=`https://twitter.com/share?url=${encodeURIComponent(r)}&text=${encodeURIComponent(c)}`;let u;const h=e=>{if(e.url){const t=e.url.includes("sketchfab.com")?"on Sketchfab":e.url.includes("poly.google.com")?"on Google Poly":"";return l.a.createElement("span",{key:e.url},l.a.createElement("a",{href:e.url,target:"_blank",rel:"noopener noreferrer"},e.name," by ",e.author," ",t)," ")}return l.a.createElement("span",{key:`${e.name} ${e.author}`},e.name," by ",e.author," ")};return this.props.sceneAttributions&&(u=this.props.sceneAttributions.extras?l.a.createElement("span",null,this.props.sceneAttributions.extras):l.a.createElement("span",null,l.a.createElement("span",null,this.props.sceneAttributions.creator?`by ${this.props.sceneAttributions.creator}`:""),o&&o.attributions&&o.attributions.creator&&l.a.createElement("span",{className:"remix"}," (Remixed fron ",h({name:o.name,url:o.url,author:o.attributions.creator}),")"),l.a.createElement("br",null),this.props.sceneAttributions.content&&this.props.sceneAttributions.content.map(h))),l.a.createElement(v.b,{locale:L.a,messages:L.b},l.a.createElement("div",{className:x.a.ui},l.a.createElement("div",{className:b()({[x.a.screenshot]:!0,[x.a.screenshotHidden]:this.props.sceneLoaded})},this.state.showScreenshot&&l.a.createElement("img",{src:this.props.sceneScreenshotURL})),l.a.createElement("div",{className:x.a.whiteOverlay}),l.a.createElement("div",{className:x.a.grid},l.a.createElement("div",{className:x.a.mainPanel},l.a.createElement(A.b,null,l.a.createElement("a",{href:"/",className:x.a.logo},l.a.createElement("img",{src:i.a.image("logo")}))),l.a.createElement("div",{className:x.a.logoTagline},l.a.createElement(v.a,{id:"app-tagline"})),this.props.showCreateRoom&&l.a.createElement("div",{className:x.a.createButtons},l.a.createElement(A.b,null,l.a.createElement("button",{className:x.a.createButton,onClick:this.createRoom},l.a.createElement(v.a,{id:"scene.create_button"}))),l.a.createElement(A.b,null,l.a.createElement("button",{className:x.a.optionsButton,onClick:()=>this.setState({showCustomRoomDialog:!0})},l.a.createElement(k.a,{icon:O.faEllipsisH})))),l.a.createElement(E.a,{name:"enable_spoke"},t&&n?l.a.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:Object(a.h)(`/spoke/projects/${n}`),className:x.a.spokeButton},l.a.createElement(k.a,{icon:j.faPencilAlt}),l.a.createElement(v.a,{id:"scene.edit_button"})):e&&l.a.createElement("a",{target:"_blank",rel:"noopener noreferrer",href:Object(a.h)(`/spoke/projects/new?sceneId=${s}`),className:x.a.spokeButton},l.a.createElement(k.a,{icon:D.faCodeBranch}),l.a.createElement(v.a,{id:"scene.remix_button"}))),l.a.createElement(A.b,null,l.a.createElement("a",{href:d,rel:"noopener noreferrer",target:"_blank",className:x.a.tweetButton},l.a.createElement("img",{src:p.a}),l.a.createElement("div",null,l.a.createElement(v.a,{id:"scene.tweet_button"})))))),l.a.createElement("div",{className:x.a.info},l.a.createElement("div",{className:x.a.name},this.props.sceneName),l.a.createElement("div",{className:x.a.attribution},u)),l.a.createElement(E.a,{name:"enable_spoke"},l.a.createElement("div",{className:x.a.spoke},l.a.createElement("div",{className:x.a.madeWith},"made with"),l.a.createElement("a",{href:"/spoke"},l.a.createElement("img",{src:i.a.image("editor_logo")})))),this.state.showCustomRoomDialog&&l.a.createElement(T,{includeScenePrompt:!1,onClose:()=>this.setState({showCustomRoomDialog:!1}),onCustomScene:e=>{this.setState({showCustomRoomDialog:!1,customRoomName:e},()=>this.createRoom())}})))}}H(F,"propTypes",{scene:f.a.object,sceneLoaded:f.a.bool,sceneId:f.a.string,sceneName:f.a.string,sceneDescription:f.a.string,sceneAttributions:f.a.object,sceneScreenshotURL:f.a.string,sceneProjectId:f.a.string,sceneAllowRemixing:f.a.bool,showCreateRoom:f.a.bool,unavailable:f.a.bool,isOwner:f.a.bool,parentScene:f.a.object});var I=F,N=n(126),U=n(262),z=n(15);AFRAME.registerSystem("scene-systems",{init(){Object(z.a)().then(()=>{this.DOMContentDidLoad=!0}),this.scenePreviewCameraSystem=new U.a},tick(){this.DOMContentDidLoad&&this.scenePreviewCameraSystem.tick()}});n(378);var V=n(174),W=(n(374),n(65));function B(e,t,n,i,o,a,s){try{var r=e[a](s),c=r.value}catch(e){return void n(e)}r.done?t(c):Promise.resolve(c).then(i,o)}function $(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},i=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),i.forEach(function(t){G(e,t,n[t])})}return e}function G(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}console.log(`Hubs version: ${{NODE_ENV:"production",SHORTLINK_DOMAIN:"hub.link",RETICULUM_SERVER:"dev.reticulum.io",THUMBNAIL_SERVER:"nearspark-dev.reticulum.io",CORS_PROXY_SERVER:"cors-proxy-dev.reticulum.io",NON_CORS_PROXY_DOMAINS:"hubs.local,dev.reticulum.io",BASE_ASSETS_PATH:"/custom-hubs-template/"}.BUILD_VERSION||"?"}`),Object(o.a)(),window.APP=new V.a;const q=new URLSearchParams(location.search),Y=AFRAME.utils.device.isMobile()||AFRAME.utils.device.isMobileVR();function Q(e,t={}){r.a.render(l.a.createElement(I,$({scene:e},t)),document.getElementById("ui-root"))}window.APP.quality=window.APP.store.state.preferences.materialQualitySetting||Y?"low":"high",Object(N.a)();const Z=function(){var e,t=(e=function*(){const e=document.querySelector("a-scene");window.APP.scene=e;const t=q.get("scene_id")||document.location.pathname.substring(1).split("/")[1];console.log(`Scene ID: ${t}`),e.setAttribute("shadow",{enabled:"low"!==window.APP.quality});let n={sceneId:t};Q(e);const i=t=>{n=$({},n,t),Q(e,n)},o=document.querySelector("#scene-root"),s=document.createElement("a-entity"),r=document.createElement("a-entity"),c=document.getElementById("camera");Object(a.a)().then(e=>{const t={hub_id:"scene"};window.APP.store.state.credentials&&window.APP.store.state.credentials.token&&(t.token=window.APP.store.state.credentials.token);const n=e.channel("ret",t);n.join().receive("ok",()=>{n.push("refresh_perms_token").receive("ok",({perms_token:t})=>{const o=u()(t);i({showCreateRoom:!!o.create_hub}),n.leave(),e.disconnect()})})}),s.addEventListener("scene-loaded",()=>{i({sceneLoaded:!0});const e=r.object3D.getObjectByName("scene-preview-camera");e&&(c.object3D.position.copy(e.position),c.object3D.rotation.copy(e.rotation),c.object3D.matrixNeedsUpdate=!0),c.setAttribute("scene-preview-camera","")});const l=(yield Object(a.d)(`/api/v1/scenes/${t}`)).scenes[0];if(!l)return void i({unavailable:!0});l.allow_promotion?Object(W.a)(`/scene/${t}`,`Hubs Scene: ${l.title}`):Object(W.a)("/scene","Hubs Non-Promotable Scene Page");const d=l.model_url;console.log(`Scene Model URL: ${d}`),r.setAttribute("gltf-model-plus",{src:d,useCache:!1,inflate:!0}),r.addEventListener("model-loaded",()=>s.emit("scene-loaded")),s.appendChild(r),o.appendChild(s);const h=l.parent_scene_id&&(yield Object(a.d)(`/api/v1/scenes/${l.parent_scene_id}`)).scenes[0];i({sceneName:l.name,sceneDescription:l.description,sceneAttributions:l.attributions,sceneScreenshotURL:l.screenshot_url,sceneId:l.scene_id,sceneProjectId:l.project_id,sceneAllowRemixing:l.allow_remixing,isOwner:l.account_id&&l.account_id===window.APP.store.credentialsAccountId,parentScene:h})},function(){var t=this,n=arguments;return new Promise(function(i,o){var a=e.apply(t,n);function s(e){B(a,i,o,s,r,"next",e)}function r(e){B(a,i,o,s,r,"throw",e)}s(void 0)})});return function(){return t.apply(this,arguments)}}();document.addEventListener("DOMContentLoaded",Z)},15:function(e,t,n){"use strict";n.d(t,"b",function(){return i}),n.d(t,"a",function(){return o});const i=function(e,t){return new Promise(n=>{t.addEventListener(e,n,{once:!0})})},o=function(){return"complete"===document.readyState||"loaded"===document.readyState||"interactive"===document.readyState?Promise.resolve(null):i("DOMContentLoaded",window)}},150:function(e,t,n){"use strict";n.d(t,"a",function(){return r});var i=n(49),o=n(57);const a=[],s=[],r=["MeshStandardMaterial","MeshBasicMaterial","MobileStandardMaterial"];AFRAME.registerComponent("hoverable-visuals",{schema:{enableSweepingEffect:{type:"boolean",default:!0}},init(){this.uniforms=null,this.geometryRadius=0,this.sweepParams=[0,0]},remove(){this.uniforms=null,this.boundingBox=null;const e=this.el.sceneEl.systems["hubs-systems"].batchManagerSystem;this.el.object3D.traverse(t=>{t.material&&Object(i.a)(t,n=>{!r.includes(n.type)||t.el.classList.contains("ui")||t.el.classList.contains("hud")||t.el.getAttribute("text-button")||e.meshToEl.delete(t)})});const t=AFRAME.utils.device.isMobile(),n=AFRAME.utils.device.isMobileVR();this.isTouchscreen=t&&!n},tick(e){if(!this.uniforms||!this.uniforms.length)return;const t=this.el.sceneEl.is("frozen"),n=Object(o.d)(this.el),i=this.el.sceneEl.systems["hubs-systems"].cursorTogglingSystem;let r,c;const l=this.el.sceneEl.systems.interaction;if(l.ready){if(l.state.leftHand.hovered!==this.el||l.state.leftHand.held||(r=l.options.leftHand.entity.object3D),l.state.leftRemote.hovered!==this.el||l.state.leftRemote.held||i.leftToggledOff||(r=l.options.leftRemote.entity.object3D),l.state.rightRemote.hovered!==this.el||l.state.rightRemote.held||i.rightToggledOff||(c=l.options.rightRemote.entity.object3D),l.state.rightHand.hovered!==this.el||l.state.rightHand.held||(c=l.options.rightHand.entity.object3D),r&&r.matrixWorld.toArray(a),c&&c.matrixWorld.toArray(s),r||c||t){const e=this.el.object3D.matrixWorld.elements[13],t=this.el.object3D.matrixWorld.elements[4],n=this.el.object3D.matrixWorld.elements[5],i=this.el.object3D.matrixWorld.elements[6],o=Math.sqrt(t*t+n*n+i*i)*this.geometryRadius;this.sweepParams[0]=e-o,this.sweepParams[1]=e+o}for(let i=0,o=this.uniforms.length;i<o;i++){const o=this.uniforms[i];o.hubs_EnableSweepingEffect.value=this.data.enableSweepingEffect&&n,o.hubs_IsFrozen.value=t,o.hubs_SweepParams.value=this.sweepParams,o.hubs_HighlightInteractorOne.value=!!r&&n&&!this.isTouchscreen,o.hubs_InteractorOnePos.value[0]=a[12],o.hubs_InteractorOnePos.value[1]=a[13],o.hubs_InteractorOnePos.value[2]=a[14],o.hubs_HighlightInteractorTwo.value=!!c&&n&&!this.isTouchscreen,o.hubs_InteractorTwoPos.value[0]=s[12],o.hubs_InteractorTwoPos.value[1]=s[13],o.hubs_InteractorTwoPos.value[2]=s[14],(r||c||t)&&(o.hubs_Time.value=e)}}}})},153:function(e,t,n){e.exports=n.p+"assets/waternormals-4418dde3f6abc21dc32506acf5f5b093.jpg"},157:function(e,t){},158:function(e,t){},159:function(e,t){},16:function(e,t,n){"use strict";n.d(t,"a",function(){return s}),n.d(t,"b",function(){return c});var i=n(4),o=n(36);const a=(navigator.languages&&navigator.languages[0]||navigator.language||navigator.userLanguage).toLowerCase().split(/[_-]+/)[0],s=o[a]&&a||"en",r=o[s]||o.en;if(i.a.APP_CONFIG&&i.a.APP_CONFIG.translations&&i.a.APP_CONFIG.translations[s]){const e=i.a.APP_CONFIG.translations[s];for(const t in e)e.hasOwnProperty(t)&&e[t]&&(r[t]=e[t])}const c=Object.entries(r).map(([e,t])=>[e,t.replace(/%([\w-.]+)%/i,(e,t)=>r[t])]).reduce((e,t)=>(e[t[0]]=t[1],e),{})},160:function(e,t){},165:function(e,t){},166:function(e,t,n){"use strict";n.d(t,"a",function(){return b});var i=n(49),o=n(168),a=n.n(o),s=n(169),r=n.n(s),c=n(170),l=n.n(c),d=n(171),u=n.n(d),h=n(172),p=n.n(h),m=n(173),f=n.n(m);function g(e,t,n,i,o,a,s){try{var r=e[a](s),c=r.value}catch(e){return void n(e)}r.done?t(c):Promise.resolve(c).then(i,o)}function b(){return v.apply(this,arguments)}function v(){var e;return e=function*(){const e=[a.a,r.a,l.a,u.a,p.a,f.a],t=yield new Promise((t,n)=>(new THREE.CubeTextureLoader).load(e,t,void 0,n));return t.format=THREE.RGBFormat,t},(v=function(){var t=this,n=arguments;return new Promise(function(i,o){var a=e.apply(t,n);function s(e){g(a,i,o,s,r,"next",e)}function r(e){g(a,i,o,s,r,"throw",e)}s(void 0)})}).apply(this,arguments)}AFRAME.registerComponent("environment-map",{init(){this.environmentMap=null,this.updateEnvironmentMap=this.updateEnvironmentMap.bind(this)},updateEnvironmentMap(e){this.environmentMap=e,this.applyEnvironmentMap(this.el.object3D)},applyEnvironmentMap(e){e.traverse(e=>{Object(i.a)(e,e=>{e.isMeshStandardMaterial&&(e.envMap=this.environmentMap,e.needsUpdate=!0)})})}})},167:function(e,t){e.exports="if (hubs_HighlightInteractorOne || hubs_HighlightInteractorTwo || hubs_IsFrozen) {\n  float ratio = 0.0;\n  float size = hubs_SweepParams.t - hubs_SweepParams.s;\n\n  if (hubs_EnableSweepingEffect) {\n    float line = mod(hubs_Time / 500.0 * size, size * 3.0) + hubs_SweepParams.s - size / 3.0;\n\n    if (hubs_WorldPosition.y < line) {\n      // Highlight with a sweeping gradient.\n      ratio = max(0.0, 1.0 - (line - hubs_WorldPosition.y) / (size * 1.5));\n    }\n  }\n\n  // Highlight with a gradient falling off with distance.\n  float pulse = 1.0 / (size + 0.2) * 8.0 + 1.0 / (size + 0.3) * 3.0 * (sin(hubs_Time / 1000.0) + 1.0);\n\n  if (hubs_HighlightInteractorOne) {\n    float dist1 = distance(hubs_WorldPosition, hubs_InteractorOnePos);\n    ratio += -min(1.0, pow(dist1 * pulse, 3.0)) + 1.0;\n  } \n\n  if (hubs_HighlightInteractorTwo) {\n    float dist2 = distance(hubs_WorldPosition, hubs_InteractorTwoPos);\n    ratio += -min(1.0, pow(dist2 * pulse, 3.0)) + 1.0;\n  }\n\n  ratio = min(1.0, ratio);\n\n  // Gamma corrected highlight color\n  vec3 highlightColor = vec3(0.184, 0.499, 0.933);\n\n  gl_FragColor.rgb = (gl_FragColor.rgb * (1.0 - ratio)) + (highlightColor * ratio);\n}\n"},168:function(e,t,n){e.exports=n.p+"assets/images/cubemap/posx-d235fb97df77b607be04b84125f40e7c.jpg"},169:function(e,t,n){e.exports=n.p+"assets/images/cubemap/negx-35034574e114423babdea92b6a2eb97a.jpg"},17:function(e,t,n){"use strict";function i(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function o(e,t,n,o,a,s,r){let c={};const l=(e.location.state&&e.location.state.__historyLength||0)+(t?0:1);(n||s||r)&&(delete(c=e.location.state?function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},o=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(o=o.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),o.forEach(function(t){i(e,t,n[t])})}return e}({},e.location.state):{}).__duplicate,n&&(c[n]=o,c.key=n,c.value=o,c.detail=a));const d=void 0!==s?s:"/"===e.location.pathname?"":e.location.pathname,u=void 0!==r?r:e.location.search,h=e.location.state&&e.location.state.__duplicate,p=t||h?e.replace:e.push;c.__historyLength=l,p({pathname:d,search:u,state:c})}function a(e,t,n,i){o(e,!1,t,n,i)}function s(e,t,n,i){o(e,!0,t,n,i)}function r(e,t,n){o(e,!1,null,null,null,t,n)}function c(e){o(e,!1)}function l(e,t){if(!e.location.state||void 0===e.location.state.__historyLength)return;const n=e.location.state.__historyLength;return 0!==n?new Promise(i=>{const o=e.listen(()=>{o(),e.push({pathname:e.location.pathname,search:e.location.search,state:{__historyLength:0,__duplicate:!0}}),t&&e.go(-2),i()});e.go(-n)}):void 0}function d(e){l(e,!0)}function u(e){return`/${e.pathname.split("/").slice(2).join("/")}`}function h(e,t){return`/${e.pathname.split("/")[1]}${t}`}n.d(t,"e",function(){return a}),n.d(t,"f",function(){return s}),n.d(t,"d",function(){return r}),n.d(t,"a",function(){return c}),n.d(t,"c",function(){return l}),n.d(t,"b",function(){return d}),n.d(t,"g",function(){return u}),n.d(t,"h",function(){return h})},170:function(e,t,n){e.exports=n.p+"assets/images/cubemap/posy-d0c4e1e7979d75923d4d8b49c191bc6e.jpg"},171:function(e,t,n){e.exports=n.p+"assets/images/cubemap/negy-35808d21d1d17ac1b84d3184e365093b.jpg"},172:function(e,t,n){e.exports=n.p+"assets/images/cubemap/posz-de29aa8396196e4b040cd5305e351dbe.jpg"},173:function(e,t,n){e.exports=n.p+"assets/images/cubemap/negz-d73d18a8b7994524dc39a6ea3fcf43fc.jpg"},174:function(e,t,n){"use strict";n.d(t,"a",function(){return a});var i=n(51),o=n(115);class a{constructor(){this.scene=null,this.quality="low",this.store=new i.b,this.mediaSearchStore=new o.b}setQuality(e){return this.quality!==e&&(this.quality=e,this.scene&&this.scene.dispatchEvent(new CustomEvent("quality-changed",{detail:e})),!0)}}},18:function(e,t,n){"use strict";var i,o,a,s=n(35),r=n(9),c=n(167),l=n.n(c),d=n(49);function u(e,t,n,i,o,a,s){try{var r=e[a](s),c=r.value}catch(e){return void n(e)}r.done?t(c):Promise.resolve(c).then(i,o)}class h{constructor(e=THREE.DefaultLoadingManager){this.manager=e}load(e,t,n,i){const o=new THREE.Texture;return this.loadTextureAsync(o,e,n).then(t).catch(i),o}loadTextureAsync(e,t,n){var i,o=this;return(i=function*(){let i;void 0!==window.createImageBitmap?(i=new THREE.ImageBitmapLoader(o.manager),e.flipY=!1):i=new THREE.ImageLoader(o.manager),i.setCrossOrigin(o.crossOrigin),i.setPath(o.path);const a=o.manager.resolveURL(t);return e.image=yield function(e,t,n){return new Promise((i,o)=>e.load(t,i,n,o))}(i,t,n),THREE.Cache.remove(a),e.needsUpdate=!0,e.onUpdate=function(){e.image.close&&e.image.close(),delete e.image},e},function(){var e=this,t=arguments;return new Promise(function(n,o){var a=i.apply(e,t);function s(e){u(a,n,o,s,r,"next",e)}function r(e){u(a,n,o,s,r,"throw",e)}s(void 0)})})()}setCrossOrigin(e){return this.crossOrigin=e,this}setPath(e){return this.path=e,this}}a="anonymous",(o="crossOrigin")in(i=h)?Object.defineProperty(i,o,{value:a,enumerable:!0,configurable:!0,writable:!0}):i[o]=a;var p=n(150),m=n(12),f=n(138),g=n.n(f),b=n(151),v=n.n(b),y=n(125);function w(e,t,n,i,o,a,s){try{var r=e[a](s),c=r.value}catch(e){return void n(e)}r.done?t(c):Promise.resolve(c).then(i,o)}function E(e){return function(){var t=this,n=arguments;return new Promise(function(i,o){var a=e.apply(t,n);function s(e){w(a,i,o,s,r,"next",e)}function r(e){w(a,i,o,s,r,"throw",e)}s(void 0)})}}n.d(t,"h",function(){return M}),n.d(t,"k",function(){return P}),n.d(t,"m",function(){return C}),n.d(t,"f",function(){return T}),n.d(t,"b",function(){return k}),n.d(t,"d",function(){return O}),n.d(t,"j",function(){return D}),n.d(t,"i",function(){return j}),n.d(t,"a",function(){return H}),n.d(t,"l",function(){return F}),n.d(t,"g",function(){return I}),n.d(t,"c",function(){return U}),n.d(t,"e",function(){return z});const _=g()();_.tlds(v.a);const x=Object(r.h)("/api/v1/media"),A=AFRAME.utils.device.isMobile(),S=AFRAME.utils.device.isMobile(),R=new Map,M=(e=!1)=>{const t=A||S;return e?t?"low_360":"high_360":t?"low":"high"},P=function(){var e=E(function*(e,t=null,n=1){const i=`${e}_${n}`;if(R.has(i))return R.get(i);const o=fetch(x,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({media:{url:e,quality:t||M()},version:n})}).then(function(){var t=E(function*(t){if(!t.ok){const n=`Error resolving url "${e}":`;try{const e=yield t.text();throw new Error(n+" "+e)}catch(e){throw new Error(n+" "+t.statusText)}}return t.json()});return function(e){return t.apply(this,arguments)}}());return R.set(i,o),o});return function(t){return e.apply(this,arguments)}}(),C=(e,t)=>{const n=new FormData;return n.append("media",e),n.append("promotion_mode","with_token"),t&&n.append("desired_content_type",t),fetch(x,{method:"POST",body:n}).then(e=>e.json())};function T(e){return _.test(e)?e.indexOf("://")>=0?e:`https://${e}`:e}const k=(e,t,n,i=null,o=!1,a=!1,r=!0,c={},l=!0,d=null,u=null)=>{const h=AFRAME.scenes[0],p=document.createElement("a-entity");if(l)p.setAttribute("networked",{template:t});else{const e=document.importNode(document.body.querySelector(t).content,!0).firstElementChild.cloneNode(!0),n=e.attributes;for(let e=0;e<n.length;e++)p.setAttribute(n[e].name,n[e].value);for(;e.firstElementChild;)p.appendChild(e.firstElementChild)}const f=e instanceof File,g=function(e){const t=document.querySelectorAll("[media-loader]");let n=1;for(const i of t){const t=i.components["media-loader"];t.data&&t.data.src===e&&(n=Math.max(n,t.data.version))}return n}(e);p.setAttribute("media-loader",{fitToBox:a,resolve:o,animate:r,src:"string"==typeof e?T(e)||e:"",version:g,contentSubtype:i,fileIsOwned:!f,linkedEl:u,mediaOptions:c}),p.object3D.matrixNeedsUpdate=!0,(d||h).appendChild(p);const b=new Promise(function(t){f?function(e,t){const n=new FileReader;n.onload=function(e){const n=new DataView(e.target.result);if(65496!=n.getUint16(0,!1))return t(-2);const i=n.byteLength;let o=2;for(;o<i;){if(n.getUint16(o+2,!1)<=8)return t(-1);const e=n.getUint16(o,!1);if(o+=2,65505==e){if(1165519206!=n.getUint32(o+=2,!1))return t(-1);const e=18761==n.getUint16(o+=6,!1);o+=n.getUint32(o+4,e);const i=n.getUint16(o,e);o+=2;for(let a=0;a<i;a++)if(274==n.getUint16(o+12*a,e))return t(n.getUint16(o+12*a+8,e))}else{if(65280!=(65280&e))break;o+=n.getUint16(o,!1)}}return t(-1)},n.readAsArrayBuffer(e)}(e,e=>{t(e)}):t(1)});if(f){C(e,"video-camera"===i?"video/mp4":null).then(e=>{const t=new URL(Object(m.i)(e.origin));t.searchParams.set("token",e.meta.access_token),p.setAttribute("media-loader",{resolve:!1,src:t.href,fileId:e.file_id}),window.APP.store.update({uploadPromotionTokens:[{fileId:e.file_id,promotionToken:e.meta.promotion_token}]})}).catch(e=>{console.error("Media upload failed",e),p.setAttribute("media-loader",{src:"error"})})}else e instanceof MediaStream&&p.setAttribute("media-loader",{src:`hubs://clients/${NAF.clientId}/video`});return n&&p.addEventListener("media_resolved",({detail:e})=>{const t=Object(s.c)(n,e.contentType,e.src);h.emit("object_spawned",{objectType:t})}),{entity:p,orientation:b}},O=(e,t,n=null,i=!0,o=!1,a=null)=>{n||({src:n}=e.components["media-loader"].data);const{contentSubtype:r,fitToBox:c,mediaOptions:l}=e.components["media-loader"].data;return k(n,t,s.a.URL,r,!0,c,!1,l,i,a,o?e:null)};function D(e){const t=/\bskinning_vertex\b/,n=/\bgl_FragColor\b/,i=[],o=AFRAME.scenes[0].systems["hubs-systems"].batchManagerSystem;return e.traverse(a=>{a.material&&(a.material=Object(d.b)(a,s=>{if(s.hubs_InjectedCustomShaderChunks)return s;if(!p.a.includes(s.type))return s;if(a.el.classList.contains("ui")||a.el.classList.contains("hud")||a.el.getAttribute("text-button"))return s;o.meshToEl.set(a,e.el);const r=s.clone();return r.onBeforeCompile=e=>{if(!t.test(e.vertexShader))return;e.uniforms.hubs_IsFrozen={value:!1},e.uniforms.hubs_EnableSweepingEffect={value:!1},e.uniforms.hubs_SweepParams={value:[0,0]},e.uniforms.hubs_InteractorOnePos={value:[0,0,0]},e.uniforms.hubs_InteractorTwoPos={value:[0,0,0]},e.uniforms.hubs_HighlightInteractorOne={value:!1},e.uniforms.hubs_HighlightInteractorTwo={value:!1},e.uniforms.hubs_Time={value:0};const o=e.vertexShader.split("\n"),a=o.findIndex(e=>t.test(e));o.splice(a+1,0,"\n        if (hubs_HighlightInteractorOne || hubs_HighlightInteractorTwo || hubs_IsFrozen) {\n          vec4 wt = modelMatrix * vec4(transformed, 1);\n\n          // Used in the fragment shader below.\n          hubs_WorldPosition = wt.xyz;\n        }\n        "),o.unshift("varying vec3 hubs_WorldPosition;"),o.unshift("uniform bool hubs_IsFrozen;"),o.unshift("uniform bool hubs_HighlightInteractorOne;"),o.unshift("uniform bool hubs_HighlightInteractorTwo;"),e.vertexShader=o.join("\n");const s=e.fragmentShader.split("\n"),r=s.findIndex(e=>n.test(e));s.splice(r+1,0,l.a),s.unshift("varying vec3 hubs_WorldPosition;"),s.unshift("uniform bool hubs_IsFrozen;"),s.unshift("uniform bool hubs_EnableSweepingEffect;"),s.unshift("uniform vec2 hubs_SweepParams;"),s.unshift("uniform bool hubs_HighlightInteractorOne;"),s.unshift("uniform vec3 hubs_InteractorOnePos;"),s.unshift("uniform bool hubs_HighlightInteractorTwo;"),s.unshift("uniform vec3 hubs_InteractorTwoPos;"),s.unshift("uniform float hubs_Time;"),e.fragmentShader=s.join("\n"),i.push(e.uniforms)},r.needsUpdate=!0,r.hubs_InjectedCustomShaderChunks=!0,r}))}),i}function j(e){return window.APP.store.state.uploadPromotionTokens.find(t=>t.fileId===e)}const L=new THREE.Vector3;function H(e,t,n,i,o=!1,a=.75){const{entity:s,orientation:r}=k(t,"#interactable-media",void 0,n,!1),c=e.object3D.position;s.object3D.position.set(c.x,c.y,c.z),s.object3D.rotation.copy(e.object3D.rotation),o&&s.object3D.rotateY(Math.PI);const l=i%6+3;L.set(Math.cos(2*Math.PI*(l/6))*a,Math.sin(2*Math.PI*(l/6))*a,.001*l-.05),e.object3D.localToWorld(L),s.object3D.visible=!1;const d=()=>{s.object3D.visible=!0,s.setAttribute("animation__photo_pos",{property:"position",dur:800,from:{x:c.x,y:c.y,z:c.z},to:{x:L.x,y:L.y,z:L.z},easing:"easeOutElastic"})};let u=null;if(n.startsWith("photo"))s.addEventListener("image-loaded",d,{once:!0}),u="photo";else{if(!n.startsWith("video"))return void console.error("invalid type "+n);s.addEventListener("video-loaded",d,{once:!0}),u="video"}return s.object3D.matrixNeedsUpdate=!0,s.addEventListener("media_resolved",()=>{e.emit(`${u}_taken`,s.components["media-loader"].data.src)},{once:!0}),{entity:s,orientation:r}}const F=(new h).setCrossOrigin("anonymous");function I(e,t){return N.apply(this,arguments)}function N(){return(N=E(function*(e,t){let n;if(t){const i=new Image;i.crossOrigin="anonymous";const o=new Promise(e=>i.addEventListener("load",e,{once:!0}));i.src=e,yield o;const a=document.createElement("canvas");a.width=i.width,a.height=i.height;const s=a.getContext("2d");s.drawImage(i,0,0),yield t(s,i.width,i.height),n=new THREE.CanvasTexture(a)}else{n=new THREE.Texture;try{yield F.loadTextureAsync(n,e)}catch(t){throw new Error(`'${e}' could not be fetched (Error code: ${t.status}; Response: ${t.statusText})`)}}return n.encoding=THREE.sRGBEncoding,n.anisotropy=4,n})).apply(this,arguments)}function U(e,t,n){const i=function(){const t={};return function(n){const i=n.animatables[0].target;i.x=Math.max(Number.MIN_VALUE,i.x),i.y=Math.max(Number.MIN_VALUE,i.y),i.z=Math.max(Number.MIN_VALUE,i.z),i.x===t.x&&i.y===t.y&&i.z===t.z||(t.x=i.x,t.y=i.y,t.z=i.z,e.scale.set(i.x,i.y,i.z),e.matrixNeedsUpdate=!0)}}(),o={duration:400,easing:"easeOutElastic",elasticity:400,loop:0,round:!1,x:e.scale.x,y:e.scale.y,z:e.scale.z,targets:[t],update:e=>i(e),complete:e=>{i(e),n&&n()}};return e.scale.copy(t),e.matrixNeedsUpdate=!0,Object(y.default)(o)}function z(){const e=document.querySelector("#media-mirror-target");if(e.firstChild)return e.firstChild.setAttribute("animation__remove",{property:"scale",dur:200,to:{x:.01,y:.01,z:.01},easing:"easeInQuad"}),new Promise(t=>{e.firstChild.addEventListener("animationcomplete",()=>{e.removeChild(e.firstChild),e.parentEl.object3D.visible=!1,t()})})}},180:function(e,t){},181:function(e,t){},182:function(e,t){/Oculus/.test(navigator.userAgent)||!navigator.xr||navigator.xr.requestDevice||(navigator.xr.requestDevice=()=>Promise.reject({message:"Hubs: requestDevice not supported."})),/Oculus/.test(navigator.userAgent)&&navigator.getVRDisplays()},19:function(e,t,n){"use strict";n.d(t,"f",function(){return F}),n.d(t,"v",function(){return I}),n.d(t,"k",function(){return N}),n.d(t,"l",function(){return U}),n.d(t,"i",function(){return z}),n.d(t,"w",function(){return V}),n.d(t,"u",function(){return W}),n.d(t,"t",function(){return B}),n.d(t,"y",function(){return $}),n.d(t,"x",function(){return G}),n.d(t,"p",function(){return q}),n.d(t,"r",function(){return Y}),n.d(t,"j",function(){return Q}),n.d(t,"b",function(){return Z}),n.d(t,"d",function(){return X}),n.d(t,"o",function(){return J}),n.d(t,"s",function(){return K}),n.d(t,"c",function(){return ee}),n.d(t,"e",function(){return te}),n.d(t,"m",function(){return ne}),n.d(t,"h",function(){return ie}),n.d(t,"g",function(){return oe}),n.d(t,"a",function(){return ae}),n.d(t,"n",function(){return re}),n.d(t,"q",function(){return ce}),n.d(t,"z",function(){return le});var i=n(67),o=n.n(i),a=n(248),s=n.n(a),r=n(203),c=n.n(r),l=n(249),d=n.n(l),u=n(250),h=n.n(u),p=n(251),m=n.n(p),f=n(252),g=n.n(f),b=n(253),v=n.n(b),y=n(254),w=n.n(y),E=n(255),_=n.n(E),x=n(256),A=n.n(x),S=n(204),R=n.n(S),M=n(257),P=n.n(M),C=n(258),T=n.n(C),k=n(259),O=n.n(k),D=n(260),j=n.n(D),L=n(13);let H=0;const F=H++,I=H++,N=H++,U=H++,z=H++,V=H++,W=H++,B=H++,$=H++,G=H++,q=H++,Y=H++,Q=H++,Z=H++,X=H++,J=H++,K=H++,ee=H++,te=H++,ne=H++,ie=H++,oe=H++,ae=H++,se=H++,re=H++,ce=H++;class le{constructor(e){this.pendingAudioSourceNodes=[],this.pendingPositionalAudios=[],this.positionalAudiosStationary=[],this.positionalAudiosFollowingObject3Ds=[],this.audioContext=THREE.AudioContext.getContext(),this.scene=e,this.scene.audioListener=this.scene.audioListener||new THREE.AudioListener,this.scene.camera&&this.scene.camera.add(this.scene.audioListener),this.scene.addEventListener("camera-set-active",e=>{e.detail.cameraEl.getObject3D("camera").add(this.scene.audioListener)});const t=[[F,o.a],[I,o.a],[N,o.a],[U,o.a],[z,o.a],[V,o.a],[ae,o.a],[W,s.a],[B,c.a],[$,c.a],[G,o.a],[q,d.a],[Y,h.a],[Q,m.a],[Z,g.a],[X,v.a],[J,w.a],[K,_.a],[ee,A.a],[te,R.a],[ne,P.a],[ie,O.a],[oe,T.a],[se,R.a],[re,o.a],[ce,j.a]],n=new Map,i=e=>{let t=n.get(e);return t||(t=fetch(e).then(e=>e.arrayBuffer()).then(e=>(function(e,t){return new Promise((n,i)=>{e.decodeAudioData(t,n,i)})})(this.audioContext,e)),n.set(e,t)),t};this.sounds=new Map,t.map(([e,t])=>{i(t).then(t=>{this.sounds.set(e,t)})})}enqueueSound(e,t){const n=this.sounds.get(e);if(!n)return null;const i=this.audioContext.createBufferSource();return i.buffer=n,i.connect(this.audioContext.destination),i.loop=t,this.pendingAudioSourceNodes.push(i),i}enqueuePositionalSound(e,t){const n=this.sounds.get(e);if(!n)return null;const i=new THREE.PositionalAudio(this.scene.audioListener).setBuffer(n);return i.loop=t,this.pendingPositionalAudios.push(i),i}playPositionalSoundAt(e,t,n){const i=this.enqueuePositionalSound(e,n);if(!i)return null;i.position.copy(t),i.matrixWorldNeedsUpdate=!0,this.positionalAudiosStationary.push(i)}playPositionalSoundFollowing(e,t,n){const i=this.enqueuePositionalSound(e,n);return i?(this.positionalAudiosFollowingObject3Ds.push({positionalAudio:i,object3D:t}),i):null}playSoundOneShot(e){return this.enqueueSound(e,!1)}playSoundLooped(e){return this.enqueueSound(e,!0)}playSoundLoopedWithGain(e){const t=this.sounds.get(e);if(!t)return null;const n=this.audioContext.createBufferSource(),i=this.audioContext.createGain();return n.buffer=t,n.connect(i),i.connect(this.audioContext.destination),n.loop=!0,this.pendingAudioSourceNodes.push(n),{gain:i,source:n}}stopSoundNode(e){const t=this.pendingAudioSourceNodes.indexOf(e);-1!==t?this.pendingAudioSourceNodes.splice(t,1):e.stop()}stopPositionalAudio(e){const t=this.pendingPositionalAudios.indexOf(e);-1!==t?this.pendingPositionalAudios.splice(t,1):(e.isPlaying&&e.stop(),e.parent&&e.parent.remove(e)),this.positionalAudiosStationary=this.positionalAudiosStationary.filter(t=>t!==e),this.positionalAudiosFollowingObject3Ds=this.positionalAudiosFollowingObject3Ds.filter(({positionalAudio:t})=>t!==e)}tick(){for(let e=0;e<this.pendingAudioSourceNodes.length;e++)this.pendingAudioSourceNodes[e].start();this.pendingAudioSourceNodes.length=0;for(let e=0;e<this.pendingPositionalAudios.length;e++){const t=this.pendingPositionalAudios[e];this.scene.object3D.add(t),t.play()}this.pendingPositionalAudios.length=0;for(let e=this.positionalAudiosStationary.length-1;e>=0;e--){const t=this.positionalAudiosStationary[e];t.isPlaying||this.stopPositionalAudio(t)}for(let e=this.positionalAudiosFollowingObject3Ds.length-1;e>=0;e--){const t=this.positionalAudiosFollowingObject3Ds[e],n=t.positionalAudio,i=t.object3D;n.isPlaying&&i.parent?(i.updateMatrices(),Object(L.l)(n,i.matrixWorld)):this.stopPositionalAudio(n)}}}},197:function(e,t,n){"use strict";n.d(t,"a",function(){return h}),n.d(t,"b",function(){return g});var i=n(89),o=n(15),a=n(201);function s(e,t,n,i,o,a,s){try{var r=e[a](s),c=r.value}catch(e){return void n(e)}r.done?t(c):Promise.resolve(c).then(i,o)}function r(e){return function(){var t=this,n=arguments;return new Promise(function(i,o){var a=e.apply(t,n);function r(e){s(a,i,o,r,c,"next",e)}function c(e){s(a,i,o,r,c,"throw",e)}r(void 0)})}}const c=.08,l=(e,t)=>{e.getByteTimeDomainData(t);let n=0;for(let e=0;e<t.length;e++){const i=(t[e]-128)/128;n+=i*i}return Math.sqrt(n/t.length)},d=new THREE.Vector3,u=new THREE.Vector3;function h(e,t,n,i,o){u.setFromMatrixPosition(t.matrixWorld),d.setFromMatrixPosition(e.matrixWorld);const a=d.distanceTo(u)/10;return Math.min(i,n+(i-n)*o*8*a)}function p(e){const t=l(e.analyser,e.levels),n=Math.log(THREE.Math.mapLinear(t,0,1,1,Math.E));e.volume=n<c?0:n;const i=e.volume>e.prevVolume?.35:.3;e.volume=i*e.volume+(1-i)*e.prevVolume,e.prevVolume=e.volume}function m(e){const t=Object(i.a)(e,"ik-root");if(t&&"avatar-rig"===t.id)return e.sceneEl.systems["local-audio-analyser"];{const t=Object(i.a)(e,"networked-audio-analyser");return t?t.components["networked-audio-analyser"]:null}}AFRAME.registerComponent("networked-audio-analyser",{init(){var e=this;return r(function*(){e.volume=0,e.prevVolume=0,e.loudest=0,e._updateAnalysis=e._updateAnalysis.bind(e),e._runScheduledWork=e._runScheduledWork.bind(e),e.el.sceneEl.systems["frame-scheduler"].schedule(e._updateAnalysis,"audio-analyser"),e.el.addEventListener("sound-source-set",t=>{const n=THREE.AudioContext.getContext();e.analyser=n.createAnalyser(),e.analyser.fftSize=32,e.levels=new Uint8Array(e.analyser.fftSize),t.detail.soundSource.connect(e.analyser)})})()},remove:function(){this.el.sceneEl.systems["frame-scheduler"].unschedule(this._runScheduledWork,"audio-analyser")},tick:function(e){this.avatarIsQuiet||this._updateAnalysis(e)},_runScheduledWork:function(){this.avatarIsQuiet&&this._updateAnalysis()},_updateAnalysis:function(e){this.analyser&&(p(this),this.volume<1e-5?e&&this.lastSeenVolume&&this.lastSeenVolume<e-1e4&&(this.avatarIsQuiet=!0):(e&&(this.lastSeenVolume=e),this.avatarIsQuiet=!1))}}),AFRAME.registerSystem("local-audio-analyser",{init(){this.volume=0,this.loudest=0,this.prevVolume=0,this.el.addEventListener("local-media-stream-created",e=>{const t=e.detail.mediaStream;this.stream&&console.warn("media stream changed",this.stream,t),this.stream=t;const{analyser:n,levels:i}=function(e){const t=THREE.AudioContext.getContext(),n=t.createMediaStreamSource(e),i=t.createAnalyser();i.fftSize=32;const o=new Uint8Array(i.fftSize);return n.connect(i),{analyser:i,levels:o}}(t);this.analyser=n,this.levels=i})},tick:function(){this.analyser&&p(this)}}),AFRAME.registerComponent("scale-audio-feedback",{schema:{minScale:{default:1},maxScale:{default:1.5}},init(){var e=this;return r(function*(){yield Object(o.a)(),e.camera=document.getElementById("viewing-camera").object3D})()},tick(){if(!this.el.object3D.visible)return;if(!this.camera)return;this.analyser||(this.analyser=m(this.el));const{minScale:e,maxScale:t}=this.data,{object3D:n}=this.el,i=h(this.el.object3D,this.camera,e,t,this.analyser?this.analyser.volume:0);n.scale.setScalar(i),n.matrixNeedsUpdate=!0}}),AFRAME.registerComponent("morph-audio-feedback",{schema:{name:{default:""},minValue:{default:0},maxValue:{default:2}},init(){this.mesh=this.el.object3DMap.skinnedmesh,this.morphNumber=this.mesh.morphTargetDictionary[this.data.name]},tick(){if(!this.mesh)return;this.analyser||(this.analyser=m(this.el));const{minValue:e,maxValue:t}=this.data;this.mesh.morphTargetInfluences[this.morphNumber]=THREE.Math.mapLinear(Object(a.a)(this.analyser?this.analyser.volume:0),0,1,e,t)}});const f={MIC:["mic-0.png","mic-1.png","mic-2.png","mic-3.png","mic-4.png","mic-5.png","mic-6.png","mic-7.png"],MIC_HOVER:["mic-0_hover.png","mic-1_hover.png","mic-2_hover.png","mic-3_hover.png","mic-4_hover.png","mic-5_hover.png","mic-6_hover.png","mic-7_hover.png"],MIC_OFF:["mic-off-0.png","mic-off-1.png","mic-off-2.png","mic-off-3.png","mic-off-4.png","mic-off-5.png","mic-off-6.png","mic-off-7.png"],MIC_OFF_HOVER:["mic-off-0_hover.png","mic-off-1_hover.png","mic-off-2_hover.png","mic-off-3_hover.png","mic-off-4_hover.png","mic-off-5_hover.png","mic-off-6_hover.png","mic-off-7_hover.png"]};function g(e){return THREE.Math.clamp(Math.ceil(THREE.Math.mapLinear(e-.05,0,1,0,7)),0,7)}AFRAME.registerComponent("mic-button",{schema:{active:{type:"boolean"},tooltip:{type:"selector"},tooltipText:{type:"string"},activeTooltipText:{type:"string"}},init(){this.prevSpriteName="",this.el.object3D.matrixNeedsUpdate=!0,this.hovering=!1,this.onHover=()=>{this.hovering=!0,this.data.tooltip.setAttribute("visible",!0)},this.onHoverOut=()=>{this.hovering=!1,this.data.tooltip.setAttribute("visible",!1)}},play(){this.el.object3D.addEventListener("hovered",this.onHover),this.el.object3D.addEventListener("unhovered",this.onHoverOut)},pause(){this.el.object3D.removeEventListener("hovered",this.onHover),this.el.object3D.removeEventListener("unhovered",this.onHoverOut)},update(){this.data.tooltip&&(this.textEl=this.data.tooltip.querySelector("[text]"))},tick(){const e=this.el.sceneEl.systems["local-audio-analyser"],t=this.data.active,n=this.hovering,i=f[t?n?"MIC_OFF_HOVER":"MIC_OFF":n?"MIC_HOVER":"MIC"][g(e.volume)];i!==this.prevSpriteName&&(this.prevSpriteName=i,this.el.setAttribute("sprite","name",i)),this.data.tooltip&&n&&(this.textEl=this.textEl||this.data.tooltip.querySelector("[text]"),this.textEl.setAttribute("text","value",t?this.data.activeTooltipText:this.data.tooltipText))}})},20:function(e,t,n){"use strict";n.d(t,"a",function(){return o});var i=n(4);function o(e){return i.a.feature(e.name)&&e.children||null}},200:function(e,t,n){"use strict";function i(e){e.components["animation-mixer"]&&(e.querySelector("[loop-animation]")||e.setAttribute("loop-animation",""))}n.d(t,"a",function(){return i})},201:function(e,t,n){"use strict";function i(e){return e*(2-e)}n.d(t,"a",function(){return i})},203:function(e,t,n){e.exports=n.p+"assets/sfx/quickTurn-cda89edb1a7a32e4442cac70cd2694be.mp3"},204:function(e,t,n){e.exports=n.p+"assets/sfx/Eb_blip-8d7302990e83d6798400a6027dce3936.mp3"},21:function(e,t,n){"use strict";n.d(t,"a",function(){return h});var i=n(0),o=n.n(i),a=n(2),s=n.n(a),r=n(5),c=n.n(r),l=n(34),d=n(8);function u(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}class h extends i.Component{constructor(e){super(e),u(this,"onContainerClicked",e=>{this.props.closable&&e.currentTarget===e.target&&this.props.onClose()}),this.onKeyDown=this.onKeyDown.bind(this),this.onContainerClicked=this.onContainerClicked.bind(this)}componentDidMount(){window.addEventListener("keydown",this.onKeyDown)}componentWillUnmount(){window.removeEventListener("keydown",this.onKeyDown)}onKeyDown(e){this.props.closable&&"Escape"===e.key&&this.props.onClose()}render(){return o.a.createElement("div",{className:c()("dialog-overlay",this.props.noOverlay?"dialog-overlay__no-pointer-events":"",this.props.className)},o.a.createElement("div",{className:c()("dialog",this.props.noOverlay?"dialog__no-pointer-events":"dialog__dark-background",this.props.noOverlay?"dialog__align-end":""),onClick:this.onContainerClicked},o.a.createElement("div",{className:`dialog__box ${this.props.wide?"dialog__wide":""} `},o.a.createElement("div",{className:c()("dialog__box__contents",this.props.allowOverflow?"dialog__box__contents-overflow":null,this.props.additionalClass)},this.props.closable&&this.props.onClose&&!this.props.noOverlay&&o.a.createElement("button",{className:"dialog__box__contents__close",onClick:()=>this.props.onClose()},o.a.createElement("i",null,o.a.createElement(d.a,{icon:l.faTimes}))),this.props.title&&o.a.createElement("div",{className:"dialog__box__contents__title"},this.props.title),o.a.createElement("div",{className:"dialog__box__contents__body"},this.props.children),o.a.createElement("div",{className:"dialog__box__contents__button-container"})))))}}u(h,"propTypes",{title:s.a.node,children:s.a.node.isRequired,onClose:s.a.func,closable:s.a.bool,wide:s.a.bool,noOverlay:s.a.bool,className:s.a.string,allowOverflow:s.a.bool,additionalClass:s.a.string}),u(h,"defaultProps",{closable:!0})},22:function(e,t,n){"use strict";n.d(t,"a",function(){return o});const i=new URLSearchParams(location.search);function o(e){const t=i.get(e);return""===t||/1|on|true|yes/i.test(t)}},237:function(e,t,n){"use strict";var i=n(222),o=n.n(i),a=n(22);const s=new URLSearchParams(location.search),r=Object(a.a)("debug"),c=s.get("log_filter")||r&&"naf-janus-adapter:*";c&&o.a.enable(c)},24:function(e,t,n){"use strict";n.d(t,"a",function(){return r}),n.d(t,"b",function(){return c});var i=n(0),o=n.n(i),a=n(2),s=n.n(a);const r=o.a.createContext({}),c=({sound:e,children:t})=>o.a.createElement(r.Consumer,null,n=>o.a.cloneElement(t,{onMouseEnter:i=>{n&&n.playSound&&n.playSound(e||"play_sound-hud_hover_start"),t.props.onMouseEnter&&t.props.onMouseEnter(i)}}));c.propTypes={children:s.a.object,sound:s.a.string}},246:function(e,t,n){"use strict";n.d(t,"a",function(){return o});const i=AFRAME.THREE;function o(){if(/Android.+Firefox/.test(navigator.userAgent)){const e=WebGLRenderingContext.prototype.getExtension,t=function(){const e=new i.WebGLRenderer,t=new i.Scene,n=new Float32Array(16),o=new i.DataTexture(n,2,2,i.RGBAFormat,i.FloatType),a=new i.Mesh(new i.PlaneBufferGeometry(1,1),new i.MeshBasicMaterial({map:o}));a.material.map.needsUpdate=!0,t.add(a),e.render(t,new i.Camera);const s=0===e.context.getError();return e.dispose(),s}();WebGLRenderingContext.prototype.getExtension=function(n){return"OES_texture_float"!==n||t?e.call(this,n):null}}}},247:function(e,t,n){e.exports=n.p+"assets/models/LoadingObject_Atom-7dcc3b81897e68b740c1cf12b6cf4c3f.glb"},248:function(e,t,n){e.exports=n.p+"assets/sfx/teleport-loop-84e2caa4f62e5c6d6ce339b0c715c06d.mp3"},249:function(e,t,n){e.exports=n.p+"assets/sfx/tap_mellow-673398d6e97818ec4b675708d460bd0f.mp3"},250:function(e,t,n){e.exports=n.p+"assets/sfx/PenSpawn-aac1f534773040f0fafa41e9db76017b.mp3"},251:function(e,t,n){e.exports=n.p+"assets/sfx/PenDraw1-ddbdc17a6beefecbca2685c8c9d0d2d5.mp3"},252:function(e,t,n){e.exports=n.p+"assets/sfx/PicSnapHey-0228ddd197e5a6d88f7bcd2ceb340f8e.mp3"},253:function(e,t,n){e.exports=n.p+"assets/sfx/welcome-0083300978d5dd05eaa376f65761da47.mp3"},254:function(e,t,n){e.exports=n.p+"assets/sfx/quack-1f18502834f8f1db43990b769c2ab193.mp3"},255:function(e,t,n){e.exports=n.p+"assets/sfx/specialquack-6d1a192a6092e8dfed5d3de063755ee2.mp3"},256:function(e,t,n){e.exports=n.p+"assets/sfx/pop-5784f3bcfaf98637147737448d6df8df.mp3"},257:function(e,t,n){e.exports=n.p+"assets/sfx/tack-0d55b064794faaa1733fcf6bc89cad0c.mp3"},258:function(e,t,n){e.exports=n.p+"assets/sfx/A_bendUp-de32e556413bb2a527fb514984738c70.mp3"},259:function(e,t,n){e.exports=n.p+"assets/sfx/suspense-f27c64840e5ede36ec694c22a030615c.mp3"},260:function(e,t,n){e.exports=n.p+"assets/sfx/emoji-27673179a22e6f42e8187ccba07e4dce.mp3"},262:function(e,t,n){"use strict";n.d(t,"a",function(){return o});var i=n(48);class o{constructor(){this.entities=[]}register(e){this.entities.push(e)}unregister(e){this.entities.splice(this.entities.indexOf(e,1))}tick(){for(const e of this.entities){const t=AFRAME.scenes[0].systems["hubs-systems"];!e||t&&t.cameraSystem.mode===i.c||e.components["scene-preview-camera"].tick2()}}}},344:function(e,t){const n=new THREE.Vector3(0,0,0),i=new THREE.Quaternion,o=new THREE.Vector3(1,1,1),a=new THREE.Matrix4;a.identity();const s=THREE.PropertyBinding.prototype.SetterByBindingTypeAndVersioning,r=THREE.PropertyBinding.prototype.Versioning;for(let e=0;e<s.length;e++){const t=s[e][r.MatrixWorldNeedsUpdate];t&&(s[e][r.MatrixWorldNeedsUpdate]=function(){const e=t.apply(this,arguments);return this.targetObject.matrixNeedsUpdate=!0,e})}THREE.Object3D.prototype.getWorldPosition=function(e){return void 0===e&&(console.warn("THREE.Object3D: .getWorldPosition() target is now required"),e=new THREE.Vector3),this.updateMatrices(),e.setFromMatrixPosition(this.matrixWorld)},THREE.Object3D.prototype.getWorldQuaternion=function(){const e=new THREE.Vector3,t=new THREE.Vector3;return function(n){return void 0===n&&(console.warn("THREE.Object3D: .getWorldQuaternion() target is now required"),n=new THREE.Quaternion),this.updateMatrices(),this.matrixWorld.decompose(e,n,t),n}}(),THREE.Object3D.getWorldScale=function(){const e=new THREE.Vector3,t=new THREE.Quaternion;return function(n){return void 0===n&&(console.warn("THREE.Object3D: .getWorldScale() target is now required"),n=new THREE.Vector3),this.updateMatrices(),this.matrixWorld.decompose(e,t,n),n}}();const c=e=>{e.matrixIsModified||(e.matrixIsModified=!0,e.cachedMatrixWorld&&(e.cachedMatrixWorld.copy(e.matrixWorld),e.matrixWorld=e.cachedMatrixWorld))},l=THREE.Object3D.prototype.updateMatrix;THREE.Object3D.prototype.updateMatrix=function(){l.apply(this,arguments),c(this)};const d=THREE.Object3D.prototype.applyMatrix;THREE.Object3D.prototype.applyMatrix=function(){d.apply(this,arguments),c(this)},THREE.Object3D.prototype.updateMatrices=function(e,t,s){this.hasHadFirstMatrixUpdate?(this.matrixNeedsUpdate||this.matrixAutoUpdate||e)&&(this.updateMatrix(),this.matrixNeedsUpdate&&(this.matrixNeedsUpdate=!1)):(this.position.equals(n)&&this.quaternion.equals(i)&&this.scale.equals(o)&&this.matrix.equals(a)||this.updateMatrix(),this.hasHadFirstMatrixUpdate=!0,this.matrixWorldNeedsUpdate=!0,this.cachedMatrixWorld=this.matrixWorld),!s&&this.parent&&(this.parent.updateMatrices(!1,t,!1),this.matrixWorldNeedsUpdate=this.matrixWorldNeedsUpdate||this.parent.childrenNeedMatrixWorldUpdate),(this.matrixWorldNeedsUpdate||t)&&(null===this.parent?this.matrixWorld.copy(this.matrix):this.matrixIsModified?this.matrixWorld.multiplyMatrices(this.parent.matrixWorld,this.matrix):this.matrixWorld=this.parent.matrixWorld,this.childrenNeedMatrixWorldUpdate=!0,this.matrixWorldNeedsUpdate=!1)},THREE.Object3D.prototype.updateMatrixWorld=function(e,t){if(!this.visible&&!t)return;this.updateMatrices(!1,e,!0);const n=this.children,i=this.childrenNeedMatrixWorldUpdate||e;for(let e=0,o=n.length;e<o;e++)n[e].updateMatrixWorld(i,t);this.childrenNeedMatrixWorldUpdate&&(this.childrenNeedMatrixWorldUpdate=!1)},THREE.Object3D.prototype.lookAt=function(){const e=new THREE.Quaternion,t=new THREE.Matrix4,n=new THREE.Vector3,i=new THREE.Vector3;return function(o,a,s){o.isVector3?n.copy(o):n.set(o,a,s);const r=this.parent;r&&r.updateMatrices(),this.updateMatrices(),i.setFromMatrixPosition(this.matrixWorld),this.isCamera||this.isLight?t.lookAt(i,n,this.up):t.lookAt(n,i,this.up),this.quaternion.setFromRotationMatrix(t),r&&(t.extractRotation(r.matrixWorld),e.setFromRotationMatrix(t),this.quaternion.premultiply(e.inverse())),this.matrixNeedsUpdate=!0}}()},345:function(e,t,n){var i=n(125).default,o=AFRAME.components,a=AFRAME.registerComponent,s=AFRAME.utils;delete AFRAME.components.animation;var r=new THREE.Color,c=new THREE.Color,l=s.entity.getComponentProperty,d=s.entity.setComponentProperty,u={},h="color",p="components",m="object3D";function f(e){e.x=THREE.Math.degToRad(e.x),e.y=THREE.Math.degToRad(e.y),e.z=THREE.Math.degToRad(e.z)}function g(e,t,n){var i;for(i=0;i<t.length;i++)e.addEventListener(t[i],n)}function b(e,t,n){var i;for(i=0;i<t.length;i++)e.removeEventListener(t[i],n)}function v(e,t){var n,i,o;for(i=w(t),o=e,n=0;n<i.length;n++)o=o[i[n]];return o}function y(e,t,n,i){var o,a,s,r;for(t.startsWith("object3D.rotation")&&(n=THREE.Math.degToRad(n)),a=w(t),r=e,o=0;o<a.length-1;o++)r=r[a[o]];s=a[a.length-1],i!==h?r[s]=n:"r"in r[s]?(r[s].r=n.r,r[s].g=n.g,r[s].b=n.b):(r[s].x=n.r,r[s].y=n.g,r[s].z=n.b)}function w(e){return e in u?u[e]:(u[e]=e.split("."),u[e])}function E(e){return e.isRawProperty||e.property.startsWith(p)||e.property.startsWith(m)}e.exports.Component=a("animation",{schema:{autoplay:{default:!0},delay:{default:0},dir:{default:""},dur:{default:1e3},easing:{default:"easeInQuad"},elasticity:{default:400},enabled:{default:!0},from:{default:""},loop:{default:0,parse:function(e){return!0===e||"true"===e||!1!==e&&"false"!==e&&parseInt(e,10)}},property:{default:""},startEvents:{type:"array"},pauseEvents:{type:"array"},resumeEvents:{type:"array"},round:{default:!1},to:{default:""},type:{default:""},isRawProperty:{default:!1}},multiple:!0,init:function(){var e=this;this.eventDetail={name:this.attrName},this.time=0,this.animation=null,this.animationIsPlaying=!1,this.onStartEvent=this.onStartEvent.bind(this),this.beginAnimation=this.beginAnimation.bind(this),this.pauseAnimation=this.pauseAnimation.bind(this),this.resumeAnimation=this.resumeAnimation.bind(this),this.fromColor={},this.toColor={},this.targets={},this.targetsArray=[],this.updateConfigForDefault=this.updateConfigForDefault.bind(this),this.updateConfigForRawColor=this.updateConfigForRawColor.bind(this),this.config={complete:function(){e.animationIsPlaying=!1,e.el.emit("animationcomplete",e.eventDetail,!1),e.id&&e.el.emit("animationcomplete__"+e.id,e.eventDetail,!1)}}},update:function(e){var t=this.config,n=this.data;this.animationIsPlaying=!1,this.data.enabled&&n.property&&(t.autoplay=!1,t.direction=n.dir,t.duration=n.dur,t.easing=n.easing,t.elasticity=n.elasticity,t.loop=n.loop,t.round=n.round,this.createAndStartAnimation())},tick:function(e,t){this.animationIsPlaying&&(this.time+=t,this.animation.tick(this.time))},remove:function(){this.pauseAnimation(),this.removeEventListeners(),this.cancelDelayedStart()},pause:function(){this.paused=!0,this.pausedWasPlaying=this.animationIsPlaying,this.pauseAnimation(),this.removeEventListeners(),this.cancelDelayedStart()},play:function(){this.paused&&(this.paused=!1,this.addEventListeners(),this.pausedWasPlaying&&(this.resumeAnimation(),this.pausedWasPlaying=!1))},createAndStartAnimation:function(){var e=this.data;this.updateConfig(),this.animationIsPlaying=!1,this.animation=i(this.config),this.removeEventListeners(),this.cancelDelayedStart(),this.addEventListeners(),!e.autoplay||e.startEvents&&e.startEvents.length||(e.delay?this.delayTimeout=setTimeout(this.beginAnimation,e.delay):this.beginAnimation())},beginAnimation:function(){this.updateConfig(),this.time=0,this.animationIsPlaying=!0,this.stopRelatedAnimations(),this.el.emit("animationbegin",this.eventDetail,!1)},pauseAnimation:function(){this.animationIsPlaying=!1},resumeAnimation:function(){this.animationIsPlaying=!0},onStartEvent:function(){this.data.enabled&&(this.updateConfig(),this.animation&&this.animation.pause(),this.animation=i(this.config),this.data.delay?setTimeout(this.beginAnimation,this.data.delay):this.beginAnimation())},updateConfigForRawColor:function(){var e,t,n,i=this.config,o=this.data,a=this.el;if(!this.waitComponentInitRawProperty(this.updateConfigForRawColor)){for(t in e=""===o.from?v(a,o.property):o.from,n=o.to,this.setColorConfig(e,n),e=this.fromColor,n=this.toColor,this.targetsArray.length=0,this.targetsArray.push(e),i.targets=this.targetsArray,n)i[t]=n[t];var s;i.update=(s={},function(e){var t;(t=e.animatables[0].target).r===s.r&&t.g===s.g&&t.b===s.b||y(a,o.property,t,o.type)})}},updateConfigForDefault:function(){var e,t,n,i,o=this.config,a=this.data,s=this.el;this.waitComponentInitRawProperty(this.updateConfigForDefault)||(e=""===a.from?E(a)?v(s,a.property):l(s,a.property):a.from,n=a.to,!isNaN(e||n)?(e=parseFloat(e),n=parseFloat(n)):(e=e?e.toString():e,n=n?n.toString():n),(t="true"===a.to||"false"===a.to||!0===a.to||!1===a.to)&&(e="true"===a.from||!0===a.from?1:0,n="true"===a.to||!0===a.to?1:0),this.targets.aframeProperty=e,o.targets=this.targets,o.aframeProperty=n,o.update=function(e){var n;(n=e.animatables[0].target.aframeProperty)!==i&&(i=n,t&&(n=n>=1),E(a)?y(s,a.property,n,a.type):d(s,a.property,n))})},updateConfigForVector:function(){var e,t,n,i,o=this.config,a=this.data,r=this.el;for(e in t=""!==a.from?s.coordinates.parse(a.from):l(r,a.property),n=s.coordinates.parse(a.to),"rotation"===a.property&&(f(t),f(n)),this.targetsArray.length=0,this.targetsArray.push(t),o.targets=this.targetsArray,n)o[e]=n[e];"position"!==a.property&&"rotation"!==a.property&&"scale"!==a.property?o.update=function(){var e={};return function(t){var n=t.animations[0].target;n.x===e.x&&n.y===e.y&&n.z===e.z||(e.x=n.x,e.y=n.y,e.z=n.z,d(r,a.property,n))}}():o.update=(i={},function(e){var t=e.animatables[0].target;"scale"===a.property&&(t.x=Math.max(1e-4,t.x),t.y=Math.max(1e-4,t.y),t.z=Math.max(1e-4,t.z)),t.x===i.x&&t.y===i.y&&t.z===i.z||(i.x=t.x,i.y=t.y,i.z=t.z,r.object3D[a.property].set(t.x,t.y,t.z),r.object3D.matrixNeedsUpdate=!0)})},updateConfig:function(){var e;e=function(e,t){var n,i,a,s;if(a=t.split("."),i=a[0],s=a[1],!(n=e.components[i]||o[i]))return null;if(s&&!n.schema[s])return null;if(s)return n.schema[s].type;return n.schema.type}(this.el,this.data.property),E(this.data)&&this.data.type===h?this.updateConfigForRawColor():"vec2"===e||"vec3"===e||"vec4"===e?this.updateConfigForVector():this.updateConfigForDefault()},waitComponentInitRawProperty:function(e){var t,n=this.data,o=this.el,a=this;return""===n.from&&(!!n.property.startsWith(p)&&(t=w(n.property)[1],!o.components[t]&&(o.addEventListener("componentinitialized",function n(s){s.detail.name===t&&(e(),a.animation=i(a.config),o.removeEventListener("componentinitialized",n))}),!0)))},stopRelatedAnimations:function(){var e,t;for(t in this.el.components)e=this.el.components[t],t!==this.attrName&&"animation"===e.name&&e.animationIsPlaying&&e.data.property===this.data.property&&(e.animationIsPlaying=!1)},addEventListeners:function(){var e=this.data,t=this.el;g(t,e.startEvents,this.onStartEvent),g(t,e.pauseEvents,this.pauseAnimation),g(t,e.resumeEvents,this.resumeAnimation)},removeEventListeners:function(){var e=this.data,t=this.el;b(t,e.startEvents,this.onStartEvent),b(t,e.pauseEvents,this.pauseAnimation),b(t,e.resumeEvents,this.resumeAnimation)},cancelDelayedStart:function(){this.delayTimeout&&(clearTimeout(this.delayTimeout),this.delayTimeout=null)},setColorConfig:function(e,t){r.set(e),c.set(t),e=this.fromColor,t=this.toColor,e.r=r.r,e.g=r.g,e.b=r.b,t.r=c.r,t.g=c.g,t.b=c.b}})},346:function(e,t){AFRAME.registerComponent("ambient-light",{schema:{color:{type:"color"},intensity:{default:1}},init(){const e=this.el;this.light=new THREE.AmbientLight,this.el.setObject3D("ambient-light",this.light),this.el.sceneEl.systems.light.registerLight(e),this.rendererSystem=this.el.sceneEl.systems.renderer},update(e){this.data.color!==e.color&&(this.light.color.set(this.data.color),this.rendererSystem.applyColorCorrection(this.light.color)),this.data.intensity!==e.intensity&&(this.light.intensity=this.data.intensity)},remove:function(){this.el.removeObject3D("ambient-light")}})},347:function(e,t){AFRAME.registerComponent("animation-mixer",{initMixer(e){this.mixer=new THREE.AnimationMixer(this.el.object3D),this.el.object3D.animations=e,this.animations=e},tick:function(e,t){this.mixer&&this.mixer.update(t/1e3)}})},348:function(e,t){AFRAME.registerComponent("css-class",{schema:{type:"string"},multiple:!0,init(){this.el.classList.add(this.data)},update(e){this.data!==e&&(this.el.classList.remove(e),this.el.classList.add(this.data))},remove(){this.el.classList.remove(this.data)}})},349:function(e,t){AFRAME.registerComponent("duck",{schema:{initialForce:{default:0},maxForce:{default:6.5},maxScale:{default:5}},init:function(){this.physicsSystem=this.el.sceneEl.systems.physics,this.hasBody=!1,this.position=new CANNON.Vec3,this.force=new CANNON.Vec3(0,this.data.initialForce,0),this.initialScale=this.el.object3D.scale.x,this.maxScale=this.data.maxScale*this.initialScale},play:function(){this.physicsSystem.addComponent(this)},pause:function(){this.physicsSystem.removeComponent(this)},beforeStep:function(){if(this.el.body&&NAF.utils.isMine(this.el)){const e=this.el.object3D.scale.x,t=Math.min(1,(e-this.initialScale)/(this.maxScale-this.initialScale))*this.data.maxForce;if(t>0){const e=Math.random()*Math.PI*2,n=Math.cos(e),i=Math.sin(e);this.force.set(n,t,i),this.position.set(.01*n,0,.01*i),this.el.object3D.matrixNeedsUpdate=!0,this.el.body.applyForce(this.force,this.position)}}}})},35:function(e,t,n){"use strict";n.d(t,"a",function(){return i}),n.d(t,"b",function(){return o}),n.d(t,"c",function(){return c});const i={URL:1,FILE:2,CLIPBOARD:3,SPAWNER:4},o={URL_IMAGE:0,URL_VIDEO:1,URL_MODEL:2,URL_PDF:3,URL_AUDIO:4,FILE_IMAGE:8,FILE_VIDEO:9,FILE_MODEL:10,FILE_PDF:11,FILE_AUDIO:12,CLIPBOARD_IMAGE:16,CLIPBOARD_VIDEO:17,CLIPBOARD_MODEL:18,CLIPBOARD_PDF:19,CLIPBOARD_AUDIO:20,SPAWNER_IMAGE:24,SPAWNER_VIDEO:25,SPAWNER_MODEL:26,SPAWNER_PDF:27,SPAWNER_AUDIO:28,CAMERA:30,UNKNOWN:31};function a(e,t,n,o,a){return e===i.URL?t:e===i.FILE?n:e===i.CLIPBOARD?o:a}const s={"image/":[o.URL_IMAGE,o.FILE_IMAGE,o.CLIPBOARD_IMAGE,o.SPAWNER_IMAGE],"model/":[o.URL_MODEL,o.FILE_MODEL,o.CLIPBOARD_MODEL,o.SPAWNER_MODEL],"application/x-zip-compressed":[o.URL_MODEL,o.FILE_MODEL,o.CLIPBOARD_MODEL,o.SPAWNER_MODEL],"video/":[o.URL_VIDEO,o.FILE_VIDEO,o.CLIPBOARD_VIDEO,o.SPAWNER_VIDEO],"application/vnd.apple.mpegurl":[o.URL_VIDEO,o.FILE_VIDEO,o.CLIPBOARD_VIDEO,o.SPAWNER_VIDEO],"application/x-mpegurl":[o.URL_VIDEO,o.FILE_VIDEO,o.CLIPBOARD_VIDEO,o.SPAWNER_VIDEO],"audio/":[o.URL_AUDIO,o.FILE_AUDIO,o.CLIPBOARD_AUDIO,o.SPAWNER_AUDIO],"application/pdf":[o.URL_PDF,o.FILE_PDF,o.CLIPBOARD_PDF,o.SPAWNER_PDF]},r={".m3u8":[o.URL_VIDEO,o.FILE_VIDEO,o.CLIPBOARD_VIDEO,o.SPAWNER_VIDEO]};function c(e,t,n){for(const n in s)if(t.toLowerCase().startsWith(n)){return a(e,...s[n])}if(n)for(const t in r)if(n.toLowerCase().endsWith(t)){return a(e,...r[t])}return o.UNKNOWN}},351:function(e,t){AFRAME.registerComponent("heightfield",{init(){this.el.addEventListener("componentinitialized",e=>{"static-body"===e.detail.name&&this.generateAndAddHeightfield(this.el.components["static-body"])}),this.el.setAttribute("static-body",{shape:"none",mass:0})},generateAndAddHeightfield(e){const{offset:t,distance:n,data:i}=this.data,o=new CANNON.Quaternion;o.setFromAxisAngle(new CANNON.Vec3(1,0,0),-Math.PI/2);const a=new CANNON.Quaternion;a.setFromAxisAngle(new CANNON.Vec3(0,1,0),-Math.PI/2),a.mult(o,o);const s=new CANNON.Vec3(t.x,t.y,t.z),r=new CANNON.Heightfield(i,{elementSize:n});e.addShape(r,s,o)}})},352:function(e,t){AFRAME.registerComponent("hemisphere-light",{schema:{skyColor:{type:"color"},groundColor:{type:"color"},intensity:{default:1}},init(){const e=this.el;this.light=new THREE.HemisphereLight,this.light.position.set(0,0,0),this.light.matrixNeedsUpdate=!0,this.el.setObject3D("hemisphere-light",this.light),this.el.sceneEl.systems.light.registerLight(e)},update(e){this.data.skyColor!==e.skyColor&&this.light.color.set(this.data.skyColor),this.data.groundColor!==e.groundColor&&this.light.groundColor.set(this.data.groundColor),this.data.intensity!==e.intensity&&(this.light.intensity=this.data.intensity)},remove:function(){this.el.removeObject3D("hemisphere-light")}})},353:function(e,t){AFRAME.registerComponent("hide-when-quality",{schema:{type:"string",default:"low"},init(){this.onQualityChanged=this.onQualityChanged.bind(this),this.el.sceneEl.addEventListener("quality-changed",this.onQualityChanged)},onQualityChanged(e){this.updateComponentState(e.detail)},update(e){this.data!==e&&this.updateComponentState(window.APP.quality)},updateComponentState(e){this.el.setAttribute("visible",e!==this.data)}})},354:function(e,t){AFRAME.registerComponent("point-light",{schema:{color:{type:"color"},intensity:{default:1},range:{default:0},decay:{default:2},castShadow:{default:!0},shadowMapResolution:{default:[512,512]},shadowBias:{default:0},shadowRadius:{default:1}},init(){const e=this.el;this.light=new THREE.PointLight,this.light.shadow.camera.matrixAutoUpdate=!0,this.el.setObject3D("point-light",this.light),this.el.sceneEl.systems.light.registerLight(e),this.rendererSystem=this.el.sceneEl.systems.renderer},update(e){const t=this.light;if(this.data.color!==e.color){const e=new THREE.Color(this.data.color);this.rendererSystem.applyColorCorrection(e),t.color.copy(e)}this.data.intensity!==e.intensity&&(t.intensity=this.data.intensity),this.data.range!==e.range&&(t.distance=this.data.range),this.data.decay!==e.decay&&(t.decay=this.data.decay),this.data.castShadow!==e.castShadow&&(t.castShadow=this.data.castShadow),this.data.shadowBias!==e.shadowBias&&(t.shadow.bias=this.data.shadowBias),this.data.shadowRadius!==e.shadowRadius&&(t.shadow.radius=this.data.shadowRadius);const[n,i]=this.data.shadowMapResolution,[o,a]=e.shadowMapResolution?e.shadowMapResolution:[512,512];n===o&&i===a||(t.shadow.mapSize.set(n,i),t.shadow.map&&(t.shadow.map.dispose(),t.shadow.map=null))},remove:function(){this.el.removeObject3D("point-light")}})},355:function(e,t){AFRAME.registerComponent("spot-light",{schema:{color:{type:"color"},intensity:{default:1},range:{default:0},decay:{default:2},innerConeAngle:{default:0},outerConeAngle:{default:Math.PI/4},castShadow:{default:!0},shadowMapResolution:{default:[512,512]},shadowBias:{default:0},shadowRadius:{default:1}},init(){const e=this.el;this.light=new THREE.SpotLight,this.light.position.set(0,0,0),this.light.target.position.set(0,0,1),this.light.add(this.light.target),this.light.matrixNeedsUpdate=!0,this.light.target.matrixNeedsUpdate=!0,this.el.setObject3D("spot-light",this.light),this.el.sceneEl.systems.light.registerLight(e)},update(e){const t=this.light;this.data.color!==e.color&&t.color.set(this.data.color),this.data.intensity!==e.intensity&&(t.intensity=this.data.intensity),this.data.range!==e.range&&(t.distance=this.data.range),this.data.decay!==e.decay&&(t.decay=this.data.decay),this.data.innerConeAngle===e.innerConeAngle&&this.data.outerConeAngle===e.outerConeAngle||(t.angle=this.data.outerConeAngle,t.penumbra=1-this.data.innerConeAngle/this.data.outerConeAngle),this.data.castShadow!==e.castShadow&&(t.castShadow=this.data.castShadow),this.data.shadowBias!==e.shadowBias&&(t.shadow.bias=this.data.shadowBias),this.data.shadowRadius!==e.shadowRadius&&(t.shadow.radius=this.data.shadowRadius);const[n,i]=this.data.shadowMapResolution,[o,a]=e.shadowMapResolution?e.shadowMapResolution:[512,512];n===o&&i===a||(t.shadow.mapSize.set(n,i),t.shadow.map&&(t.shadow.map.dispose(),t.shadow.map=null))},remove:function(){this.el.removeObject3D("spot-light")}})},356:function(e,t,n){const i=n(112).COLLISION_LAYERS;AFRAME.registerComponent("floaty-object",{schema:{autoLockOnLoad:{default:!1},autoLockOnRelease:{default:!1},modifyGravityOnRelease:{default:!1},releaseGravity:{default:-2},reduceAngularFloat:{default:!1},gravitySpeedLimit:{default:1.85}},init(){this.onGrab=this.onGrab.bind(this),this.onRelease=this.onRelease.bind(this)},tick(){this.bodyHelper||(this.bodyHelper=this.el.components["body-helper"]);const e=AFRAME.scenes[0].systems.interaction,t=e&&e.isHeld(this.el);if(t&&!this.wasHeld&&this.onGrab(),this.wasHeld&&!t&&this.onRelease(),!t&&this._makeStaticWhenAtRest){const e=this.el.components.networked&&NAF.utils.isMine(this.el),t=this.bodyHelper.data.linearSleepingThreshold,n=this.bodyHelper.data.angularSleepingThreshold,i=this.bodyHelper.body&&this.bodyHelper.body.physicsBody.getLinearVelocity().length2()<t*t&&this.bodyHelper.body.physicsBody.getAngularVelocity().length2()<n*n;i&&e&&this.el.setAttribute("body-helper",{type:"kinematic"}),!i&&e||(this._makeStaticWhenAtRest=!1)}this.wasHeld=t},play(){this.hasBeenHereBefore||(this.hasBeenHereBefore=!0,this.data.autoLockOnLoad&&(this.el.setAttribute("body-helper",{gravity:{x:0,y:0,z:0}}),this.setLocked(!0)))},setLocked(e){this.el.components.networked&&!NAF.utils.isMine(this.el)||(this.locked=e,this.el.setAttribute("body-helper",{type:e?"kinematic":"dynamic"}))},onRelease(){this.data.modifyGravityOnRelease?0===this.data.gravitySpeedLimit||this.bodyHelper.body&&this.bodyHelper.body.getVelocity().length2()<this.data.gravitySpeedLimit*this.data.gravitySpeedLimit?(this.el.setAttribute("body-helper",{gravity:{x:0,y:0,z:0},angularDamping:this.data.reduceAngularFloat?.98:.5,linearDamping:.95,linearSleepingThreshold:.1,angularSleepingThreshold:.1,collisionFilterMask:i.HANDS}),this._makeStaticWhenAtRest=!0):this.el.setAttribute("body-helper",{gravity:{x:0,y:this.data.releaseGravity,z:0},angularDamping:.01,linearDamping:.01,linearSleepingThreshold:1.6,angularSleepingThreshold:2.5,collisionFilterMask:i.DEFAULT_INTERACTABLE}):this.el.setAttribute("body-helper",{collisionFilterMask:i.DEFAULT_INTERACTABLE,gravity:{x:0,y:-9.8,z:0}}),this.data.autoLockOnRelease&&this.setLocked(!0)},onGrab(){this.el.setAttribute("body-helper",{gravity:{x:0,y:0,z:0},collisionFilterMask:i.HANDS}),this.setLocked(!1)},remove(){if(this.stuckTo){const e=this.stuckTo;delete this.stuckTo,e._unstickObject()}}})},357:function(e,t){const n=new THREE.Vector3,i=new THREE.Vector3,o=new THREE.Vector3;AFRAME.registerComponent("trigger-volume",{schema:{colliders:{type:"selectorAll"},size:{type:"vec3",default:{x:1,y:1,z:1}},target:{type:"selector"},enterComponent:{type:"string"},enterProperty:{type:"string"},enterValue:{default:"",parse:e=>"object"==typeof e?e:JSON.parse(e),stringify:JSON.stringify},leaveComponent:{type:"string"},leaveProperty:{type:"string"},leaveValue:{default:"",parse:e=>"object"==typeof e?e:JSON.parse(e),stringify:JSON.stringify}},init(){this.boundingBox=new THREE.Box3,this.collidingLastFrame={}},update(){this.el.object3D.getWorldPosition(i),n.copy(this.data.size),this.boundingBox.setFromCenterAndSize(i,n)},tick(){if(!this.data.target)return;const e=this.data.colliders;for(let t=0;t<e.length;t++){const n=e[t].object3D;n.getWorldPosition(o);const i=this.boundingBox.containsPoint(o),a=this.collidingLastFrame[n.id];i&&!a?this.data.target.setAttribute(this.data.enterComponent,this.data.enterProperty,this.data.enterValue):!i&&a&&this.data.target.setAttribute(this.data.leaveComponent,this.data.leaveProperty,this.data.leaveValue),this.collidingLastFrame[n.id]=i}}})},358:function(e,t){AFRAME.registerComponent("video-pause-state",{schema:{paused:{default:!1}},init(){this.onPauseStateChange=this.onPauseStateChange.bind(this),this.videoComponent=this.el.components["media-video"],this.videoComponent?this.onVideoLoaded():(this.onVideoLoaded=this.onVideoLoaded.bind(this),this.el.addEventListener("video-loaded",this.onVideoLoaded))},onVideoLoaded(){this.videoComponent=this.el.components["media-video"],this.video=this.videoComponent.video,this.video.addEventListener("pause",this.onPauseStateChange)},onPauseStateChange(){this.el.setAttribute("paused",this.video.paused)},update(){this.video&&this.data.paused!==this.video.paused&&this.videoComponent.togglePlaying()},remove(){this.video&&this.video.removeEventListener("pause",this.onPauseStateChange),this.el.removeEventListener("video-loaded",this.onVideoLoaded)}})},359:function(e,t){AFRAME.registerComponent("log-events",{init:function(){const e=this.el,t=this.log.bind(this),n=this.el.dispatchEvent;this.el.dispatchEvent=function(){return t(Array.from(arguments)),n.apply(e,arguments)}},log:function([e]){if(["componentchanged"].includes(e.type))return;let t=!0;console.info(`log-events: ${this.el.id} ${e.type} ${JSON.stringify(e.detail,(e,n)=>n&&"object"==typeof n&&void 0===n.length?t?(t=!1,n):"[object]":n)}`)}}),AFRAME.registerComponent("lifecycle-checker",{schema:{name:{type:"string"},tick:{default:!1}},init:function(){this.log("init")},update:function(){this.log("update")},tick:function(){this.data.tick&&this.log("tick")},remove:function(){this.log("remove")},pause:function(){this.log("pause")},play:function(){this.log("play")},log:function(e){console.info(`lifecycle-checker:${this.data.name} ${e}`)}})},36:function(e){e.exports={en:{"app-name":"App","editor-name":"Scene Editor","contact-email":"app@company.com","company-name":"Company","share-hashtag":"#app","app-description":"Share a virtual room with friends.\nWatch videos, play with 3D objects, or just hang out.","app-tagline":"Private social VR in your web browser","auth.verified-title":"Email Verified!","auth.verify-failed":"Unable to sign in with this link. It may have already been used or has expired.","auth.verified":"Your email has been verified!\nYou can now close this browser tab and return to %app-name%.","auth.spoke-verified":"Your email has been verified!\nYou can now close this browser tab and return to %editor-name%.","sign-in.prompt":"Sign in to pin objects in rooms.","sign-in.admin":"Check your email for a verification email. Once verified, enter your email to create your account or sign in.","sign-in.admin-no-permission":"You don't have access to admin tools. Sign into another account or ask an administrator to grant you permission.","sign-in.hub":"An account is required to join rooms.\n\nEnter your email to create your account or sign in.","sign-in.auth-started":"Email sent!\n\nTo continue, click on the link in the email using your phone, tablet, or PC.\n\nNo email? You may not be able to create an account.","sign-in.pin":"You'll need to sign in to pin objects.","sign-in.pin-complete":"You are now signed in.","sign-in.unpin":"You'll need to sign in to un-pin objects.","sign-in.unpin-complete":"You are now signed in.","sign-in.change-scene":"You'll need to sign in to change the scene.","sign-in.change-scene-complete":"You are now signed in.","sign-in.room-settings":"You'll need to sign in to change the room's settings.","sign-in.room-settings-complete":"You are now signed in.","sign-in.close-room":"You'll need to sign in to close the room.","sign-in.close-room-complete":"You are now signed in.","sign-in.mute-user":"You'll need to sign in to mute other users.","sign-in.mute-user-complete":"You are now signed in.","sign-in.kick-user":"You'll need to sign in to kick other users.","sign-in.kick-user-complete":"You are now signed in.","sign-in.add-owner":"You'll need to sign in to assign moderators.","sign-in.add-owner-complete":"You are now signed in.","sign-in.remove-owner":"You'll need to sign in to assign moderators.","sign-in.remove-owner-complete":"You are now signed in.","sign-in.create-avatar":"You'll need to sign in to create avatars.","sign-in.create-avatar-complete":"You are now signed in.","sign-in.favorite-room":"You'll need to sign in to add this room to your favorites.","sign-in.favorite-rooms":"You'll need to sign in to add favorite rooms.","sign-in.favorite-room-complete":"You are now signed in.","sign-in.favorite-rooms-complete":"You are now signed in.","sign-in.tweet":"You'll need to sign in to send tweets.","sign-in.tweet-complete":"You are now signed in.","sign-in.as":"Signed in as","sign-in.in":"Sign In","sign-in.out":"Sign Out","room-settings.apply":"Apply","room-settings.name-subtitle":"Room Name","room-settings.description-subtitle":"Room Description","room-settings.room-access-subtitle":"Room Access","room-settings.permissions-subtitle":"Room Member Permissions","room-settings.spawn_and_move_media":"Create and move objects","room-settings.spawn_camera":"Create cameras","room-settings.spawn_drawing":"Create drawings","room-settings.pin_objects":"Pin objects","room-settings.access-private":"Private","room-settings.access-private-subtitle":"Only those with the link can join","room-settings.access-public":"Public","room-settings.access-public-subtitle":"Listed on the homepage","room-info.title":"Room & Scene Info","room-info.scene-info":"Scene Info","close-room.message":"Closing this room will remove yourself and others from the room, shutting it down permanently.\n\nAre you sure? This action cannot be undone.","close-room.confirm":"Yes, Close Room","close-room.cancel":"Cancel","promote.message":"Promoting a user will grant full access to room settings and moderation tools.\n\nAre you sure?","promote.confirm-prefix":"Yes, Promote ","promote.cancel":"Cancel","entry.room":"lobby","entry.enter-room-title":"Lobby","entry.enter-room":"Enter Room","entry.leave-room":"Leave Room","entry.change-scene":"Choose Scene","entry.in-lobby-notice":"You are viewing this room from the lobby.","entry.screen-prefix":"Enter on ","entry.desktop-screen":"Screen","entry.mobile-screen":"Phone","entry.mobile-safari":"Safari","entry.generic-prefix":" ","entry.generic-medium":"Connected VR Headset","entry.generic-subtitle-desktop":"Oculus or SteamVR","entry.gearvr-prefix":"Enter on ","entry.gearvr-medium":"Gear VR","entry.choose-device":"Choose Device","entry.device-medium":"Enter on Standalone VR","entry.device-subtitle-desktop":"Wireless VR Headsets","entry.device-subtitle-mobile":"Wireless VR Headsets","entry.device-subtitle-vr":"Phone or PC","entry.entry-disallowed":"Watch from Lobby","entry.entry-disallowed-subtitle":"Room is Full","entry.cardboard":"Enter on Google Cardboard","entry.daydream-prefix":"Enter on ","entry.daydream-medium":"Daydream","entry.daydream-via-chrome":"Using Google Chrome","entry.invite-others":"invite others","entry.share-button":"Share","entry.desktop.invite-tip":"Nobody is here yet. Share this room to get together.","entry.mobile.invite-tip":"Share to get together.","entry.return-to-vr":"Return to VR","entry.open-in-window":"Open in Tab","entry.lobby":"Lobby","entry.back":"Back","entry.notify_me":"Notify me when others arrive","entry.mute-on-entry":"Mute my microphone","profile.save":"Accept","profile.display_name.validation_warning":"Alphanumerics and hyphens. At least 3 characters, no more than 32","profile.header":"Name & Avatar","profile.terms_of_use":"Terms of Use","profile.privacy_notice":"Privacy Notice","profile.choose_avatar":"Browse Avatars","profile.tabs.legacy":"Default","profile.tabs.skinnable":"Custom Skin","profile.tabs.url":"Custom Model","avatar-editor.info":"Find more custom avatar resources","avatar-editor.info-link":"here","avatar-editor.external-editor-info":"Create a custom skin for this avatar: ","avatar-preview.loading-failed":"Loading failed\nPlease choose another avatar","media-browser.search-placeholder.scenes":"Search Scenes...","media-browser.search-placeholder.avatars":"Search Avatars...","media-browser.search-placeholder.videos":"Search for Videos...","media-browser.search-placeholder.images":"Search for Images...","media-browser.search-placeholder.youtube":"Search for Youtube videos...","media-browser.search-placeholder.gifs":"Search for GIFs...","media-browser.search-placeholder.twitch":"Search for Twitch streams...","media-browser.search-placeholder.sketchfab":"Search Sketchfab Models...","media-browser.search-placeholder.poly":"Search Google Poly Models...","media-browser.search-placeholder.base":"Search...","media-browser.favorites-header":"Favorite Rooms","media-browser.add_custom_object":"Custom URL or File","media-browser.add_custom_scene":"Custom Scene","media-browser.add_custom_avatar":"Avatar GLB URL","media-browser.privacy_policy":"Privacy Policy","media-browser.report_issue":"Report Issue","media-browser.powered_by.images":"Search by Bing | ","media-browser.powered_by.videos":"Search by Bing | ","media-browser.powered_by.youtube":"Search by Google | ","media-browser.powered_by.gifs":"Search by Tenor | ","media-browser.powered_by.sketchfab":"Search by Sketchfab | ","media-browser.powered_by.poly":"Search by Google | ","media-browser.powered_by.twitch":"Search by Twitch | ","media-browser.powered_by.scenes":"Made with ","media-browser.powered_by.avatars":" ","media-browser.empty.images":"No results. Try entering a new search above.","media-browser.empty.videos":"No results. Try entering a new search above.","media-browser.empty.youtube":"No results. Try entering a new search above.","media-browser.empty.gifs":"No result. Try entering a new search above.","media-browser.empty.sketchfab":"No results. Try entering a new search above.","media-browser.empty.poly":"No results. Try entering a new search above.","media-browser.empty.twitch":"No results. Try entering a new search above.","media-browser.empty.favorites":"You don't have any favorites. Click a ⭐ to add to your favorites.","media-browser.nav_title.youtube":"YouTube","media-browser.nav_title.videos":"Videos","media-browser.nav_title.images":"Images","media-browser.nav_title.gifs":"GIFs","media-browser.nav_title.scenes":"Scenes","media-browser.nav_title.avatars":"Avatars","media-browser.nav_title.sketchfab":"Sketchfab","media-browser.nav_title.poly":"Google Poly","media-browser.nav_title.twitch":"Twitch","media-browser.create-avatar":"Create Avatar","media-browser.create-scene":"Create Scene with %editor-name%","media-browser.hub.joined-prefix":"Visited ","media-browser.similar-to-facet":'Similar to: "{name}"',"audio.title":"Audio Setup","audio.talk_to_test":"talk","audio.click_to_test":"click","audio.subtitle-desktop":"Confirm HMD speaker output","audio.subtitle-mobile":"Earphones are recommended","audio.enter-now":"Enter Now","audio.hmd-mic-warning":"Your HMD mic is not chosen","audio.grant-title":"Grant mic permissions","audio.grant-subtitle":"Mic access needed to be heard by others","audio.granted-title":"Mic permissions granted","audio.granted-subtitle":"You can still mute yourself in-game","audio.granted-next":"Next","exit.subtitle.exited":"Your session has ended. Refresh your browser to start a new one.","exit.subtitle.closed":"This room is no longer available.","exit.subtitle.denied":"You are not permitted to join this room. Please request permission from the room creator.","exit.subtitle.disconnected":"You have disconnected from the room. Refresh the page to try to reconnect.","exit.subtitle.left":"You have left the room.","exit.subtitle.full":"This room is full, please try again later.","exit.subtitle.scene_error":"The scene failed to load.","exit.subtitle.connect_error":"Unable to connect to this room, please try again later.","exit.subtitle.version_mismatch":"The version you deployed is not available yet. Your browser will refresh in 5 seconds.","autoexit.title":"Auto-ending session in ","autoexit.title_units":" seconds","autoexit.concurrent_subtitle":"You have started another session.","autoexit.idle_subtitle":"You have been idle for too long.","autoexit.cancel":"CANCEL","presence.entered_room":"entered the room.","presence.entered_lobby":"entered the lobby.","presence.join_lobby":"joined the lobby.","presence.join_room":"joined the room.","presence.leave":"left.","presence.name_change":"is now known as","presence.scene_change":"changed the scene to","presence.hub_name_change":"changed the name of the room to","presence.in_lobby":"Lobby","presence.in_room":"In Room","home.create_a_room":"Create a Room","home.desktop.add_pwa":"Install Desktop App","home.mobile.add_pwa":"Add to Home Screen","home.take_a_tour":"Take a Tour","home.room_create_options":"options","home.room_create_button":"Create Room","home.create_name.validation_warning":"Invalid name, limited to 4 to 64 characters and limited symbols.","home.powered_by_prefix":"Powered by","home.powered_by_link":"Hubs Cloud","home.join_us":"Join the Conversation","home.have_code":"Have a room code?","home.add_to_discord_1":"Add the","home.add_to_discord_2":"%app-name% Bot","home.add_to_discord_3":"to Discord","home.create_with_spoke":"Create a Scene","home.report_issue":"Report Issues","home.source_link":"Source","home.whats_new_link":"What's New","home.about_link":"About","home.community_link":"Community","home.cloud_link":"Hubs Cloud","home.admin":"Admin","home.privacy_notice":"Privacy Notice","home.terms_of_use":"Terms of Use","home.made_with_love":"made with 🦆 by ","home.environment_author_by":" by ","dialog.close":"close","link.link_page_header_entry":"Enter your code:","link.link_page_header_headset":"Enter code:","link.linking_a_headset":"Have a letter code?","link.create_a_room":"Create a new room","link.try_again":"We couldn't find that code.\nPlease try again.","help.report_issue":"Report an Issue","scene.create_button":"Create a room with this scene","scene.tweet_button":"Share on Twitter","scene.unavailable":"This scene is no longer available.","scene.remix_button":"Remix in %editor-name%","scene.edit_button":"Edit in %editor-name%","link.in_your_browser":"In your device's web browser, go to:","link.enter_code":"Then, enter this one-time letter code:","link.do_not_close":"Your account and avatar will be transferred to the device.\nKeep this page open to use this code.","link.connect_headset":"Enter on Device","link.cancel":"cancel","invite.enter_via":"Or use expiring ","invite.enter_via_modal":"Others may enter via ","invite.tweet":"tweet","invite.and_enter_code":" code:","invite.duration_of_code":"new code every 72 hours","invite.or_visit":"Share room link:","invite.or_visit_modal":"or by visiting permalink","invite.embed":"or embed on a page","invite.embed-tip":"Please be mindful of where you embed a %app-name% room.\nGo to Room Settings to lock down permissions for this room.","commands.fly":"Toggle fly mode.","commands.grow":"Increase your avatar's size.","commands.shrink":"Decrease your avatar's size.","commands.scene":"Change the scene.","commands.rename":"Rename the room.","commands.help":"Show help.","commands.leave":"Disconnect from the room.","commands.duck":"The duck tested well. Quack.","commands.capture":"Capture a 15 second video.","commands.debug":"Toggle physics debug rendering.","commands.vrstats":"Toggle stats in VR.","preferences.muteMicOnEntry":"Mute microphone on entry","preferences.enableOnScreenJoystickLeft":"Enable left on-screen joystick for moving around","preferences.enableOnScreenJoystickRight":"Enable right on-screen joystick for looking around","preferences.onlyShowNametagsInFreeze":"Only show nametags while frozen","preferences.maxResolution":"Max Resolution (width x height in pixels)","preferences.globalVoiceVolume":"Incoming Voice Volume","preferences.globalMediaVolume":"Media Volume","preferences.materialQualitySetting":"Material quality (requires restart)","preferences.snapRotationDegrees":"Rotation per snap (in degrees)","preferences.allowMultipleHubsInstances":"Disable check for multiple hubs instances","preferences.baseMovementSpeed":"Base movement speed","preferences.disableMovement":"Disable movement","preferences.disableBackwardsMovement":"Disable backwards movement","preferences.disableStrafing":"Disable strafing","preferences.disableTeleporter":"Disable teleporter","settings.return-to-vr":"Return to VR","settings.change-avatar":"Set Name & Avatar","settings.change-scene":"Choose a Scene","settings.favorites":"Favorite Rooms","settings.preferences":"Preferences","settings.room-settings":"Room Settings","settings.close-room":"Close Room...","settings.room-info":"Room & Scene Info","settings.create-room":"New Room","settings.enable-streamer-mode":"Camera Mode","settings.disable-streamer-mode":"Exit Camera Mode","settings.send-feedback":"Send Feedback","settings.whats-new":"What's New","settings.features":"Help","settings.controls":"Controls","settings.community":"Join Discord","settings.tips":"Start Tour","settings.report":"Report Issue","settings.terms":"Terms of Use","settings.privacy":"Privacy Notice","settings.help":"Help","settings.row-profile":"You","settings.row-room":"Room","settings.row-tools":"Tools","tips.mobile.video_share_mode":"Tap to stop sharing video.","tips.mobile.pen_mode":"Tap icon again to end drawing.","tips.mobile.mute_mode":"You are muted. Tap to unmute.","tips.mobile.freeze_mode":"Two-finger tap to hide menus.","tips.mobile.look":"Welcome! 👋 Tap and drag to look around.","tips.mobile.locomotion":"Great! To move, pinch with two fingers.","tips.mobile.spawn_menu-pre":"Use the ","tips.mobile.spawn_menu-post":"at the top to create objects.","tips.mobile.freeze_gesture":"Two-finger tap to show menus.","tips.mobile.object_grab":"Drag an object to move or throw it.","tips.mobile.object_rotate_button-pre":"Tap and drag ","tips.mobile.object_rotate_button-post":" to rotate.","tips.mobile.object_scale_button-pre":"Tap and drag ","tips.mobile.object_scale_button-post":" to scale.","tips.mobile.object_recenter_button-pre":"Tap ","tips.mobile.object_recenter_button-post":" to have the object face you.","tips.mobile.object_pin":"Pin an object to save it to the room.","tips.mobile.video_share_failed":"No permission granted.","tips.mobile.invite":"Use the Share button to share this room.","tips.mobile.feedback":"🦆 Quack! Want to help Hubs?","tips.mobile.feedback-link":"Tell the Duck.","tips.desktop.video_share_mode":"You're streaming. Select again to stop sharing video.","tips.desktop.pen_mode":"Press ESC or right click to drop pen. Ctrl-Z to undo.","tips.desktop.mute_mode":"You are muted. Click or press M to un-mute.","tips.desktop.look":"Welcome to %app-name%! Let's take a quick tour. 👋 Click and drag to look around.","tips.desktop.locomotion":"Use the W A S D keys to move. Hold shift to boost.","tips.desktop.turning":"Perfect. Use the Q and E keys to rotate.","tips.desktop.spawn_menu-pre":"To create objects, click the ","tips.desktop.spawn_menu-post":"button at the top of the screen, or press Ctrl 1 through 7.","tips.desktop.freeze_gesture":"Press and hold spacebar to show object menus.","tips.desktop.menu_hover":"Now, point the cursor at an object to show the menu.","tips.desktop.object_grab":"Click and drag an object to move it. Or, flick to throw it!","tips.desktop.object_pin":"Pin an object to save it to the room.","tips.desktop.object_zoom":"Scroll to move this object towards and away from you.","tips.desktop.object_rotate_button-pre":"Click and drag ","tips.desktop.object_rotate_button-post":" to rotate the object.","tips.desktop.object_scale_button-pre":"Click and drag ","tips.desktop.object_scale_button-post":" to scale the object.","tips.desktop.object_recenter_button-pre":"Click ","tips.desktop.object_recenter_button-post":" to rotate the object to face you. Helpful if you drop it!","tips.desktop.object_scale":"Hold shift and scroll to scale it bigger and smaller.","tips.desktop.pen_color":"Use Shift-Q and Shift-E to change the pen color.","tips.desktop.pen_size":"Hold Shift and scroll to change the pen size.","tips.desktop.invite":"Nobody else is here. Use the Share button at the top to share this room.","tips.desktop.video_share_failed":"You need to grant permissions to stream video.","tips.streaming":"Now broadcasting to the lobby. Click to exit.","tips.desktop.watching":"You're in the lobby. Others cannot see or hear you.","tips.desktop.feedback":"🦆 Quack! Want to help us make Hubs better?","tips.desktop.feedback-link":"Talk to the Feedback Duck.","tips.watching.back":"Enter Room","tips.mobile.watching":"You're in the lobby.","tips.watching-exit":"Back","lobby.watching":"Watching ","loader.entering_lobby":"Entering lobby...","loader.loading":"Loading ","loader.connecting":"Connecting...","loader.connected":"Connected.","loader.object":"object","loader.objects":"objects","change-scene-dialog.change-scene":"Change Scene","change-scene-dialog.create-in-spoke":"Or, create a new scene using %editor-name%.","change-scene-dialog.new-spoke-project":"Launch %editor-name%","invalid-scene-url":"This URL does not point to a scene or valid GLB.","avatar-url-dialog.apply":"Apply","interstitial.prompt":"Continue","feedback.prompt":"🦆 Feedback ","help.prompt":"Help","help.docs_url":"https://github.com/mozilla/hubs/wiki/Hubs-Features","hide-ui.prompt":"Hide All","discord.primary_tagline":"Share a virtual room with your community.\nWatch videos, play with 3D objects, or just hang out.","discord.secondary_tagline":"No downloads or sign up. Full VR support too.","discord.contact_us":"Invite Bot to Server","discord.community_link":"Hubs Discord","discord.splash_tag":"Designed for serious businessing.","client-info.kick-button":"Kick","client-info.hide-button":"Hide","client-info.unhide-button":"Un-hide ","client-info.mute-button":"Mute","client-info.cancel":"Cancel","client-info.add-owner":"Promote","client-info.remove-owner":"Demote","object-info.remove-button":"Remove","object-info.open-link":"Open Link","object-info.waypoint":"Go To","object-info.pin-button":"Pin","object-info.raise-lights":"Show Background","object-info.lower-lights":"Hide Background","object-info.unpin-button":"Unpin","avatar-landing.select":"Select","avatar-landing.selected":"This is your current avatar","leave-room-dialog.join-room.message":"Joining a new room will leave this one. Are you sure?","leave-room-dialog.join-room.confirm":"Join Room","leave-room-dialog.create-room.message":"Creating a new room will leave this one. Are you sure?","leave-room-dialog.create-room.confirm":"Leave Room","embed.load-button":"Load Room","embed.presence-warning":"This room is embedded, so may be visible to visitors on other websites.","tweet-dialog.tweet":"Tweet","tweet-dialog.posted":"Your tweet has been posted.","tweet-dialog.close":"close","oauth-dialog.sign-in.twitter":"Connect to Twitter","oauth-dialog.sign-in.discord":"Sign in to Discord","oauth-dialog.message.twitter":"Connect to Twitter to send tweets from %app-name%.","cloud.primary_tagline":"Hubs Cloud deploys server infrastructure for private,\ncollaborative 3D rooms that can be accessed on your\ndesktop, mobile phone, or VR headset.","cloud.secondary_tagline":"Get it today on the AWS Marketplace","cloud.call_to_action":"View AWS Marketplace Listing","cloud.splash_tag":"Configurable infrastructure for your own Hubs stack"}}},373:function(e,t,n){const{Pathfinding:i}=n(604);AFRAME.registerSystem("nav",{init:function(){this.pathfinder=new i},loadMesh:function(e,t){this.el.object3D.updateMatrixWorld(),this.mesh&&this.mesh.geometry&&this.mesh.geometry.dispose&&this.mesh.geometry.dispose(),this.mesh=e;const n=(new THREE.Geometry).fromBufferGeometry(e.geometry);n.applyMatrix(e.matrixWorld),this.pathfinder.setZoneData(t,i.createZone(n)),this.el.sceneEl.emit("nav-mesh-loaded")}})},374:function(e,t){AFRAME.registerComponent("event-repeater",{schema:{eventSource:{type:"selector"},events:{type:"array"}},play:function(){this.data.eventListeners=[];const e=this.data.events;for(let t=0;t<e.length;t++){const n=e[t];this.data.eventListeners[n]=this._handleEvent.bind(this,n),this.data.eventSource.addEventListener(n,this.data.eventListeners[n])}},pause:function(){const e=this.data.events;for(let t=0;t<e.length;t++){const n=e[t];this.data.eventSource.removeEventListener(n,this.data.eventListeners[n])}this.data.eventListeners=[]},_handleEvent:function(e,t){this.el.emit(e,t.detail)}})},377:function(e,t,n){"use strict";n(345),n(346),n(347),n(197),n(348);const i=new THREE.Box3,o=new THREE.Box3,a=new THREE.Matrix4,s=new THREE.Box3,r=1,c=-500,l=500,d=[new THREE.Vector3,new THREE.Vector3,new THREE.Vector3,new THREE.Vector3,new THREE.Vector3,new THREE.Vector3,new THREE.Vector3,new THREE.Vector3];AFRAME.registerComponent("directional-light",{schema:{color:{type:"color"},intensity:{default:1},castShadow:{default:!0},shadowMapResolution:{default:[512,512]},shadowBias:{default:0},shadowRadius:{default:1}},init(){const e=this.el;this.light=new THREE.DirectionalLight,this.light.position.set(0,0,0),this.light.target.position.set(0,0,1),this.light.add(this.light.target),this.el.setObject3D("directional-light",this.light),this.el.sceneEl.systems.light.registerLight(e),this.rendererSystem=this.el.sceneEl.systems.renderer},update(e){const t=this.light;if(this.data.color!==e.color){const e=new THREE.Color(this.data.color);this.rendererSystem.applyColorCorrection(e),t.color.copy(e)}this.data.intensity!==e.intensity&&(t.intensity=this.data.intensity),this.data.castShadow!==e.castShadow&&(t.castShadow=this.data.castShadow),this.data.shadowBias!==e.shadowBias&&(t.shadow.bias=this.data.shadowBias),this.data.shadowRadius!==e.shadowRadius&&(t.shadow.radius=this.data.shadowRadius);const[n,i]=this.data.shadowMapResolution,[o,a]=e.shadowMapResolution?e.shadowMapResolution:[512,512];n===o&&i===a||(t.shadow.mapSize.set(n,i),t.shadow.map&&(t.shadow.map.dispose(),t.shadow.map=null)),this.light.shadow.camera.matrixNeedsUpdate=!0},tick(){window.APP&&"low"===window.APP.quality||function(e,t){o.makeEmpty(),i.makeEmpty(),t.traverse(e=>{const t=e.geometry;t&&e.castShadow&&(t.boundingBox||t.computeBoundingBox(),s.copy(t.boundingBox),s.applyMatrix4(e.matrixWorld),i.union(s))});const n=i.min,u=i.max;d[0].set(n.x,n.y,n.z),d[1].set(n.x,n.y,u.z),d[2].set(n.x,u.y,n.z),d[3].set(n.x,u.y,u.z),d[4].set(u.x,n.y,n.z),d[5].set(u.x,n.y,u.z),d[6].set(u.x,u.y,n.z),d[7].set(u.x,u.y,u.z),a.getInverse(e.shadow.camera.matrixWorld);for(let e=0;e<d.length;e++)d[e].applyMatrix4(a),o.expandByPoint(d[e]);const h=e.shadow.camera;h.left=o.min.x-r,h.right=o.max.x+r,h.bottom=o.min.y-r,h.top=o.max.y+r,h.near=o.min.z+c,h.far=o.max.z+l,h.updateProjectionMatrix()}(this.light,this.el.sceneEl.object3D)},remove:function(){this.el.removeObject3D("directional-light")}});n(349);var u=n(82);n(351),n(352),n(353);const h={reflection:3};AFRAME.registerComponent("layers",{schema:{reflection:{type:"boolean",default:!1},inWorldHud:{type:"boolean",default:!1},exclusive:{type:"boolean",default:!1}},init(){this.update=this.update.bind(this),this.el.addEventListener("model-loaded",this.update)},update(e){const t=this.el.object3D;this.data.exclusive&&t.traverse(e=>e.layers.mask=0);for(const[n,i]of Object.entries(h)){const o=e[n],a=this.data[n];o!==a&&(a?t.traverse(e=>e.layers.enable(i)):t.traverse(e=>e.layers.disable(i)))}},remove(){this.el.removeEventListener("model-loaded",this.update)}});var p=n(89);AFRAME.registerComponent("loop-animation",{schema:{paused:{type:"boolean",default:!1},clip:{type:"string",default:""},activeClipIndex:{type:"int",default:0}},init(){this.mixerEl=Object(p.a)(this.el,"animation-mixer"),this.mixerEl?this.updateClip():console.warn("loop-animation component could not find an animation-mixer in its ancestors.")},update(e){this.mixerEl&&(e.clip===this.data.clip&&e.activeClipIndex===this.data.activeClipIndex||this.updateClip(),e.paused!==this.data.paused&&this.currentAction&&(this.currentAction.paused=this.data.paused))},updateClip(){const{mixer:e,animations:t}=this.mixerEl.components["animation-mixer"],{clip:n,activeClipIndex:i}=this.data;if(0===t.length)return;let o;if(!(o=""!==n?t.find(({name:e})=>e===n):t[i]))return;const a=e.clipAction(o,this.el.object3D);a.enabled=!0,a.setLoop(THREE.LoopRepeat,1/0).play(),this.currentAction=a},destroy(){this.currentAction&&(this.currentAction.enabled=!1,this.currentAction.stop())}});var m=n(73),f=n(18),g=n(12),b=n(200),v=n(22),y=n(247),w=n.n(y),E=n(19),_=n(13),x=n(15),A=n(14);function S(e,t,n,i,o,a,s){try{var r=e[a](s),c=r.value}catch(e){return void n(e)}r.done?t(c):Promise.resolve(c).then(i,o)}function R(e){return function(){var t=this,n=arguments;return new Promise(function(i,o){var a=e.apply(t,n);function s(e){S(a,i,o,s,r,"next",e)}function r(e){S(a,i,o,s,r,"throw",e)}s(void 0)})}}let M,P;Object(x.a)().then(()=>{Object(u.b)(w.a).then(e=>{P=e})});const C=Object(v.a)("batchMeshes"),T=Object(v.a)("disableBatching");AFRAME.registerComponent("media-loader",{schema:{playSoundEffect:{default:!0},fileId:{type:"string"},fileIsOwned:{type:"boolean"},src:{type:"string"},version:{type:"number",default:1},fitToBox:{default:!1},resolve:{default:!1},contentType:{default:null},contentSubtype:{default:null},animate:{default:!0},linkedEl:{default:null},mediaOptions:{default:{},parse:e=>"object"==typeof e?e:JSON.parse(e),stringify:JSON.stringify}},init(){this.onError=this.onError.bind(this),this.showLoader=this.showLoader.bind(this),this.clearLoadingTimeout=this.clearLoadingTimeout.bind(this),this.onMediaLoaded=this.onMediaLoaded.bind(this),this.handleLinkedElRemoved=this.handleLinkedElRemoved.bind(this),this.refresh=this.refresh.bind(this),this.animating=!1;try{NAF.utils.getNetworkedEntity(this.el).then(e=>{this.networkedEl=e}).catch(()=>{})}catch(e){}},updateScale:function(){const e=new THREE.Vector3;return function(t){const n=this.el.getObject3D("mesh"),i=Object(m.a)(this.el,n),o=t?Object(m.b)(.5,i):1;n.scale.multiplyScalar(o);const{min:a,max:s}=i;e.addVectors(a,s).multiplyScalar(.5*o),n.position.sub(e),n.matrixNeedsUpdate=!0}}(),removeShape(e){this.el.getAttribute("shape-helper__"+e)&&this.el.removeAttribute("shape-helper__"+e)},tick(e,t){this.loaderMixer&&this.loaderMixer.update(t/1e3)},handleLinkedElRemoved(e){"media-loader"===e.detail.name&&(this.data.linkedEl.removeEventListener("componentremoved",this.handleLinkedElRemoved),Object(f.e)())},remove(){this.data.linkedEl&&this.data.linkedEl.removeEventListener("componentremoved",this.handleLinkedElRemoved);const e=this.el.sceneEl.systems["hubs-systems"].soundEffectsSystem;this.loadingSoundEffect&&(e.stopPositionalAudio(this.loadingSoundEffect),this.loadingSoundEffect=null),this.loadedSoundEffect&&(e.stopPositionalAudio(this.loadedSoundEffect),this.loadedSoundEffect=null)},onError(){this.el.removeAttribute("gltf-model-plus"),this.el.removeAttribute("media-pager"),this.el.removeAttribute("media-video"),this.el.removeAttribute("media-pdf"),this.el.setAttribute("media-image",{src:"error"}),this.clearLoadingTimeout()},showLoader(){if(this.el.object3DMap.mesh)return void this.clearLoadingTimeout();const e=!!P,t=e?Object(_.e)(P.scene):new THREE.Mesh(new THREE.BoxGeometry,new THREE.MeshBasicMaterial);if(this.el.setObject3D("mesh",t),this.updateScale(!0),e){const e=this.el.sceneEl.components["environment-map"];if(e){const n=e.environmentMap;M!==n&&(e.applyEnvironmentMap(t),M=n)}this.loaderMixer=new THREE.AnimationMixer(t),this.loadingClip=this.loaderMixer.clipAction(t.animations[0]),this.loadingScaleClip=this.loaderMixer.clipAction(new THREE.AnimationClip(null,1e3,[new THREE.VectorKeyframeTrack(".scale",[0,.2],[0,0,0,t.scale.x,t.scale.y,t.scale.z])])),setTimeout(()=>{this.loaderMixer&&this.el.setAttribute("shape-helper__loader",{type:A.SHAPE.BOX})},200),this.loadingClip.play(),this.loadingScaleClip.play()}this.el.sceneEl.is("entered")&&(!this.networkedEl||NAF.utils.isMine(this.networkedEl))&&this.data.playSoundEffect&&(this.loadingSoundEffect=this.el.sceneEl.systems["hubs-systems"].soundEffectsSystem.playPositionalSoundFollowing(E.h,this.el.object3D,!0)),delete this.showLoaderTimeout},clearLoadingTimeout(){clearTimeout(this.showLoaderTimeout),this.loadingSoundEffect&&(this.el.sceneEl.systems["hubs-systems"].soundEffectsSystem.stopPositionalAudio(this.loadingSoundEffect),this.loadingSoundEffect=null),this.loaderMixer&&(this.loadingClip.stop(),this.loadingScaleClip.stop(),delete this.loaderMixer,delete this.loadingScaleClip,delete this.loadingClip),delete this.showLoaderTimeout,this.removeShape("loader")},updateHoverableVisuals:function(){const e=new THREE.Box3,t=new THREE.Sphere;return function(){const n=this.el.components["hoverable-visuals"];n&&(this.injectedCustomShaderChunks||(this.injectedCustomShaderChunks=!0,n.uniforms=Object(f.j)(this.el.object3D)),e.setFromObject(this.el.object3DMap.mesh),e.getBoundingSphere(t),n.geometryRadius=t.radius/this.el.object3D.scale.y)}}(),onMediaLoaded(e=null,t){const n=this.el;this.clearLoadingTimeout(),this.el.sceneEl.is("entered")&&this.data.playSoundEffect&&(this.loadedSoundEffect=this.el.sceneEl.systems["hubs-systems"].soundEffectsSystem.playPositionalSoundFollowing(E.g,this.el.object3D,!1));const i=()=>{this.animating=!1,e&&n.setAttribute("shape-helper",{type:e,minHalfExtent:.04}),this.updateHoverableVisuals(),this.data.linkedEl&&(this.el.sceneEl.systems["linked-media"].registerLinkage(this.data.linkedEl,this.el),this.data.linkedEl.addEventListener("componentremoved",this.handleLinkedElRemoved)),n.emit("media-loaded")};if(this.data.animate){if(!this.animating){this.animating=!0,t&&this.updateScale(this.data.fitToBox);const e=this.el.getObject3D("mesh"),n={x:.001,y:.001,z:.001};n.x=e.scale.x<n.x?.001*e.scale.x:n.x,n.y=e.scale.y<n.y?.001*e.scale.x:n.y,n.z=e.scale.z<n.z?.001*e.scale.x:n.z,Object(f.c)(e,n,i)}}else t&&this.updateScale(this.data.fitToBox),i()},refresh(){(!this.networkedEl||NAF.utils.isMine(this.networkedEl)||NAF.utils.takeOwnership(this.networkedEl))&&this.el.setAttribute("media-loader",{version:Math.floor(Date.now()/1e3)})},update(e){var t=this;return R(function*(){const{src:n,version:i,contentSubtype:o}=t.data;if(!n)return;const a=e.src!==n;!(!e.version||e.version===i)&&(t.el.emit("media_refreshing"),t.data.animate=!1,t.data.playSoundEffect=NAF.utils.isMine(t.networkedEl));try{a&&!t.showLoaderTimeout&&(t.showLoaderTimeout=setTimeout(t.showLoader,100));let e,s=n,r=n,c=n,l=t.data.contentType;const d=new URL(n),u=Object(g.h)(d.hostname)&&(Object(g.c)(n)||"").startsWith("model/gltf");if(t.data.resolve&&!n.startsWith("data:")&&!n.startsWith("hubs:")&&!u){const o=!(!t.data.mediaOptions.projection||!t.data.mediaOptions.projection.startsWith("360")),a=Object(f.h)(o),c=yield Object(f.k)(n,a,i);(s=c.origin).startsWith("//")&&(s=location.protocol+s),(r=c.origin_audio)&&r.startsWith("//")&&(r=location.protocol+r),l=c.meta&&c.meta.expected_content_type||l,e=c.meta&&c.meta.thumbnail&&Object(g.i)(c.meta.thumbnail)}if(c=Object(g.i)(s),l=l||Object(g.c)(s)||(yield(e=>fetch(e,{method:"HEAD"}).then(e=>e.headers.get("content-type")))(c)),a?t.el.emit("media_resolved",{src:n,raw:c,contentType:l}):t.el.emit("media_refreshed",{src:n,raw:c,contentType:l}),l.startsWith("video/")||l.startsWith("audio/")||AFRAME.utils.material.isHLS(s,l)){let e,n,i;if(t.data.linkedEl){const o=t.data.linkedEl.components["media-video"];e=o.videoTexture,n=o.audioSource,i=o.mediaElementAudioSource}const o=parseInt(d.searchParams.get("t")),a=parseInt(new URLSearchParams(d.hash.substring(1)).get("t"))||o||0;t.el.removeAttribute("gltf-model-plus"),t.el.removeAttribute("media-image"),t.el.removeAttribute("media-pdf"),t.el.setAttribute("floaty-object",{reduceAngularFloat:!0,releaseGravity:-1}),t.el.addEventListener("video-loaded",e=>{t.onMediaLoaded("flat"===e.detail.projection?A.SHAPE.BOX:null)},{once:!0}),t.el.setAttribute("media-video",Object.assign({},t.data.mediaOptions,{src:c,audioSrc:r?Object(g.i)(r):null,time:a,contentType:l,linkedVideoTexture:e,linkedAudioSource:n,linkedMediaElementAudioSource:i})),t.el.components["position-at-box-shape-border__freeze"]&&t.el.setAttribute("position-at-box-shape-border__freeze",{dirs:["forward","back"]})}else if(l.startsWith("image/")){t.el.removeAttribute("gltf-model-plus"),t.el.removeAttribute("media-video"),t.el.removeAttribute("media-pdf"),t.el.removeAttribute("media-pager"),t.el.addEventListener("image-loaded",e=>{t.onMediaLoaded("flat"===e.detail.projection?A.SHAPE.BOX:null),"photo-camera"===o&&t.el.setAttribute("hover-menu__photo",{template:"#photo-hover-menu",dirs:["forward","back"]})},{once:!0}),t.el.setAttribute("floaty-object",{reduceAngularFloat:!0,releaseGravity:-1});let e=!T;t.data.mediaOptions.hasOwnProperty("batch")&&!t.data.mediaOptions.batch&&(e=!1),t.el.setAttribute("media-image",Object.assign({},t.data.mediaOptions,{src:c,version:i,contentType:l,batch:e})),t.el.components["position-at-box-shape-border__freeze"]&&t.el.setAttribute("position-at-box-shape-border__freeze",{dirs:["forward","back"]})}else if(l.startsWith("application/pdf"))t.el.removeAttribute("gltf-model-plus"),t.el.removeAttribute("media-video"),t.el.removeAttribute("media-image"),t.el.setAttribute("media-pdf",Object.assign({},t.data.mediaOptions,{src:c,contentType:l,batch:!1})),t.el.setAttribute("media-pager",{}),t.el.setAttribute("floaty-object",{reduceAngularFloat:!0,releaseGravity:-1}),t.el.addEventListener("pdf-loaded",()=>{t.clearLoadingTimeout(),t.onMediaLoaded(A.SHAPE.BOX)},{once:!0}),t.el.components["position-at-box-shape-border__freeze"]&&t.el.setAttribute("position-at-box-shape-border__freeze",{dirs:["forward","back"]});else if(l.includes("application/octet-stream")||l.includes("x-zip-compressed")||l.startsWith("model/gltf")){t.el.removeAttribute("media-image"),t.el.removeAttribute("media-video"),t.el.removeAttribute("media-pdf"),t.el.removeAttribute("media-pager"),t.el.addEventListener("model-loaded",()=>{t.onMediaLoaded(A.SHAPE.HULL,!0),Object(b.a)(t.el)},{once:!0}),t.el.addEventListener("model-error",t.onError,{once:!0});let e=!T&&(C||AFRAME.utils.device.isMobile()&&window.APP&&"low"===window.APP.quality);t.data.mediaOptions.hasOwnProperty("batch")&&!t.data.mediaOptions.batch&&(e=!1),t.el.setAttribute("gltf-model-plus",Object.assign({},t.data.mediaOptions,{src:c,contentType:l,inflate:!0,batch:e,modelToWorldScale:t.data.fitToBox?1e-4:1}))}else{if(!l.startsWith("text/html"))throw new Error(`Unsupported content type: ${l}`);{t.el.removeAttribute("gltf-model-plus"),t.el.removeAttribute("media-video"),t.el.removeAttribute("media-pdf"),t.el.removeAttribute("media-pager"),t.el.addEventListener("image-loaded",R(function*(){const e=t.el.sceneEl.systems.permissions.can("update_hub");(yield Object(g.f)(n))?t.el.setAttribute("hover-menu__hubs-item",{template:"#avatar-link-hover-menu",dirs:["forward","back"]}):(yield Object(g.e)(n))||(yield Object(g.g)(n))&&e?t.el.setAttribute("hover-menu__hubs-item",{template:"#hubs-destination-hover-menu",dirs:["forward","back"]}):t.el.setAttribute("hover-menu__link",{template:"#link-hover-menu",dirs:["forward","back"]}),t.onMediaLoaded(A.SHAPE.BOX)}),{once:!0}),t.el.setAttribute("floaty-object",{reduceAngularFloat:!0,releaseGravity:-1});let o=!T;t.data.mediaOptions.hasOwnProperty("batch")&&!t.data.mediaOptions.batch&&(o=!1),t.el.setAttribute("media-image",Object.assign({},t.data.mediaOptions,{src:e,version:i,contentType:Object(g.c)(e)||"image/png",batch:o})),t.el.components["position-at-box-shape-border__freeze"]&&t.el.setAttribute("position-at-box-shape-border__freeze",{dirs:["forward","back"]})}}}catch(e){console.error("Error adding media",e),t.onError()}})()}}),AFRAME.registerComponent("media-pager",{schema:{index:{default:0},maxIndex:{default:0}},init(){var e=this;this.onNext=this.onNext.bind(this),this.onPrev=this.onPrev.bind(this),this.onSnap=this.onSnap.bind(this),this.update=this.update.bind(this),this.el.setAttribute("hover-menu__pager",{template:"#pager-hover-menu",dirs:["forward","back"]}),this.el.components["hover-menu__pager"].getHoverMenu().then(e=>{this.el.parentNode&&(this.hoverMenu=e,this.nextButton=this.el.querySelector(".next-button [text-button]"),this.prevButton=this.el.querySelector(".prev-button [text-button]"),this.snapButton=this.el.querySelector(".snap-button [text-button]"),this.pageLabel=this.el.querySelector(".page-label"),this.nextButton.object3D.addEventListener("interact",this.onNext),this.prevButton.object3D.addEventListener("interact",this.onPrev),this.snapButton.object3D.addEventListener("interact",this.onSnap),this.update(),this.el.emit("pager-loaded"))}),NAF.utils.getNetworkedEntity(this.el).then(e=>{this.networkedEl=e,this.networkedEl.addEventListener("pinned",this.update),this.networkedEl.addEventListener("unpinned",this.update),window.APP.hubChannel.addEventListener("permissions_updated",this.update)}).catch(()=>{}),this.el.addEventListener("pdf-loaded",R(function*(){e.update()}))},update(e){var t=this;return R(function*(){if(t.networkedEl&&NAF.utils.isMine(t.networkedEl)&&e&&"number"==typeof e.index&&e.index!==t.data.index&&t.el.emit("owned-pager-page-changed"),t.pageLabel&&t.pageLabel.setAttribute("text","value",`${t.data.index+1}/${t.data.maxIndex+1}`),t.prevButton&&t.nextButton){const e=t.el.components["media-loader"].data.linkedEl||t.el,n=e.components.pinnable&&e.components.pinnable.data.pinned;t.prevButton.object3D.visible=t.nextButton.object3D.visible=!n||window.APP.hubChannel.can("pin_objects")}})()},onNext(){if(this.networkedEl&&!NAF.utils.isMine(this.networkedEl)&&!NAF.utils.takeOwnership(this.networkedEl))return;const e=Math.min(this.data.index+1,this.data.maxIndex);this.el.setAttribute("media-pdf","index",e),this.el.setAttribute("media-pager","index",e)},onPrev(){if(this.networkedEl&&!NAF.utils.isMine(this.networkedEl)&&!NAF.utils.takeOwnership(this.networkedEl))return;const e=Math.max(this.data.index-1,0);this.el.setAttribute("media-pdf","index",e),this.el.setAttribute("media-pager","index",e)},onSnap(){this.el.emit("pager-snap-clicked")},remove(){this.networkedEl&&(this.networkedEl.removeEventListener("pinned",this.update),this.networkedEl.removeEventListener("unpinned",this.update)),window.APP.hubChannel.removeEventListener("permissions_updated",this.update)}});n(354);AFRAME.registerComponent("quack",{schema:{quackPercentage:{default:1},specialQuackPercentage:{default:.01}},init:function(){this._handleGrabStart=this._handleGrabStart.bind(this)},play:function(){this.el.object3D.addEventListener("interact",this._handleGrabStart)},pause:function(){this.el.object3D.removeEventListener("interact",this._handleGrabStart)},_handleGrabStart:function(){const e=Math.random();e<this.data.specialQuackPercentage?this.el.sceneEl.systems["hubs-systems"].soundEffectsSystem.playSoundOneShot(E.s):e<this.data.quackPercentage&&this.el.sceneEl.systems["hubs-systems"].soundEffectsSystem.playSoundOneShot(E.o)}});var k=n(127),O=n(48);function D(e,t,n){return(1-n)*e+n*t}const j=new THREE.Quaternion;AFRAME.registerComponent("scene-preview-camera",{schema:{duration:{default:90,type:"number"},positionOnly:{default:!1,type:"boolean"}},init:function(){const e=AFRAME.scenes[0].systems["hubs-systems"]||AFRAME.scenes[0].systems["scene-systems"];e&&e.scenePreviewCameraSystem.register(this.el),this.startPoint=this.el.object3D.position.clone(),this.startRotation=this.el.object3D.quaternion.clone(),this.targetPoint=this.el.object3D.position.clone(),this.targetPoint.y=Math.max(this.targetPoint.y-1.5,1),this.targetPoint.add(new THREE.Vector3(2,0,-2));const t=new THREE.Euler(-.15,0,.15);this.targetRotation=new THREE.Quaternion,this.targetRotation.setFromEuler(t),this.targetRotation.premultiply(this.startRotation),this.startTime=performance.now(),this.backwards=!1,this.ranOnePass=!1},tick2:function(){const e=this.el.sceneEl.systems["hubs-systems"];let t;if(e&&(e.cameraSystem.mode=O.d,t=function(){const e=Object(k.b)();return e?e.el.querySelector(".camera").object3D:null}()),t)Object(_.l)(this.el.object3D,t.matrixWorld),this.el.object3D.translateZ(-.1),this.el.object3D.matrixNeedsUpdate=!0;else{let e=(performance.now()-this.startTime)/(1e3*this.data.duration);e=Math.min(1,Math.max(0,e)),this.ranOnePass?e=e<.5?2*e*e:(4-2*e)*e-1:e*=2-e;const t=this.backwards?this.targetPoint:this.startPoint,n=this.backwards?this.startPoint:this.targetPoint,i=this.backwards?this.targetRotation:this.startRotation,o=this.backwards?this.startRotation:this.targetRotation;THREE.Quaternion.slerp(i,o,j,e),this.el.object3D.position.set(D(t.x,n.x,e),D(t.y,n.y,e),D(t.z,n.z,e)),this.data.positionOnly||this.el.object3D.rotation.setFromQuaternion(j),this.el.object3D.matrixNeedsUpdate=!0,e>=.9999&&(this.ranOnePass=!0,this.backwards=!this.backwards,this.startTime=performance.now())}},remove:function(){const e=AFRAME.scenes[0].systems["hubs-systems"]||AFRAME.scenes[0].systems["scene-systems"];e&&e.scenePreviewCameraSystem.unregister(this.el)}});n(560),n(561);function L(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}const H=Object(v.a)("bot"),{Scene:F,CubeCamera:I,Object3D:N,Vector3:U,BoxBufferGeometry:z,ShaderMaterial:V,UniformsUtils:W,BackSide:B,Mesh:$,UniformsLib:G,PMREMGenerator:q,PMREMCubeUVPacker:Y}=THREE;class Q extends N{constructor(){super();const e=new V({fragmentShader:Q.shader.fragmentShader,vertexShader:Q.shader.vertexShader,uniforms:W.clone(Q.shader.uniforms),side:B,fog:!0});this.skyScene=new F,this.cubeCamera=new I(1,1e5,512),this.skyScene.add(this.cubeCamera),this.sky=new $(Q._geometry,e),this.sky.name="Sky",this.add(this.sky),this._inclination=0,this._azimuth=.15,this._distance=8e3,this.updateSunPosition()}get turbidity(){return this.sky.material.uniforms.turbidity.value}set turbidity(e){this.sky.material.uniforms.turbidity.value=e}get rayleigh(){return this.sky.material.uniforms.rayleigh.value}set rayleigh(e){this.sky.material.uniforms.rayleigh.value=e}get luminance(){return this.sky.material.uniforms.luminance.value}set luminance(e){this.sky.material.uniforms.luminance.value=e}get mieCoefficient(){return this.sky.material.uniforms.mieCoefficient.value}set mieCoefficient(e){this.sky.material.uniforms.mieCoefficient.value=e}get mieDirectionalG(){return this.sky.material.uniforms.mieDirectionalG.value}set mieDirectionalG(e){this.sky.material.uniforms.mieDirectionalG.value=e}get inclination(){return this._inclination}set inclination(e){this._inclination=e,this.updateSunPosition()}get azimuth(){return this._azimuth}set azimuth(e){this._azimuth=e,this.updateSunPosition()}get distance(){return this._distance}set distance(e){this._distance=e,this.updateSunPosition()}updateSunPosition(){const e=Math.PI*(this._inclination-.5),t=2*Math.PI*(this._azimuth-.5),n=this._distance,i=n*Math.cos(t),o=n*Math.sin(t)*Math.sin(e),a=n*Math.sin(t)*Math.cos(e);this.sky.material.uniforms.sunPosition.value.set(i,o,a).normalize(),this.sky.scale.set(n,n,n)}generateEnvironmentMap(e){this.skyScene.add(this.sky),this.cubeCamera.update(e,this.skyScene),this.add(this.sky);const t=e.vr.enabled;e.vr.enabled=!1;const n=new q(this.cubeCamera.renderTarget.texture);n.update(e);const i=new Y(n.cubeLods);return i.update(e),e.vr.enabled=t,n.dispose(),i.dispose(),i.CubeUVRenderTarget.texture}copy(e,t=!0){if(t&&this.remove(this.sky),super.copy(e,t),t){const t=e.children.indexOf(e.sky);-1!==t&&(this.sky=this.children[t])}return this.turbidity=e.turbidity,this.rayleigh=e.rayleigh,this.luminance=e.luminance,this.mieCoefficient=e.mieCoefficient,this.mieDirectionalG=e.mieDirectionalG,this.inclination=e.inclination,this.azimuth=e.azimuth,this.distance=e.distance,this}}L(Q,"shader",{uniforms:W.merge([G.fog,{luminance:{value:1},turbidity:{value:10},rayleigh:{value:2},mieCoefficient:{value:.005},mieDirectionalG:{value:.8},sunPosition:{value:new U}}]),vertexShader:"\n#include <common>\n#include <fog_pars_vertex>\n\nuniform vec3 sunPosition;\nuniform float rayleigh;\nuniform float turbidity;\nuniform float mieCoefficient;\n\nvarying vec3 vWorldPosition;\nvarying vec3 vSunDirection;\nvarying float vSunfade;\nvarying vec3 vBetaR;\nvarying vec3 vBetaM;\nvarying float vSunE;\n\nconst vec3 up = vec3( 0.0, 1.0, 0.0 );\n\n// constants for atmospheric scattering\nconst float e = 2.71828182845904523536028747135266249775724709369995957;\nconst float pi = 3.141592653589793238462643383279502884197169;\n\n// wavelength of used primaries, according to preetham\nconst vec3 lambda = vec3( 680E-9, 550E-9, 450E-9 );\n// this pre-calcuation replaces older TotalRayleigh(vec3 lambda) function:\n// (8.0 * pow(pi, 3.0) * pow(pow(n, 2.0) - 1.0, 2.0) * (6.0 + 3.0 * pn)) / (3.0 * N * pow(lambda, vec3(4.0)) * (6.0 - 7.0 * pn))\nconst vec3 totalRayleigh = vec3( 5.804542996261093E-6, 1.3562911419845635E-5, 3.0265902468824876E-5 );\n\n// mie stuff\n// K coefficient for the primaries\nconst float v = 4.0;\nconst vec3 K = vec3( 0.686, 0.678, 0.666 );\n// MieConst = pi * pow( ( 2.0 * pi ) / lambda, vec3( v - 2.0 ) ) * K\nconst vec3 MieConst = vec3( 1.8399918514433978E14, 2.7798023919660528E14, 4.0790479543861094E14 );\n\n// earth shadow hack\n// cutoffAngle = pi / 1.95;\nconst float cutoffAngle = 1.6110731556870734;\nconst float steepness = 1.5;\nconst float EE = 1000.0;\n\nfloat sunIntensity( float zenithAngleCos ) {\n  zenithAngleCos = clamp( zenithAngleCos, -1.0, 1.0 );\n  return EE * max( 0.0, 1.0 - pow( e, -( ( cutoffAngle - acos( zenithAngleCos ) ) / steepness ) ) );\n}\n\nvec3 totalMie( float T ) {\n  float c = ( 0.2 * T ) * 10E-18;\n  return 0.434 * c * MieConst;\n}\n\nvoid main() {\n  #include <begin_vertex>\n\n  vec4 worldPosition = modelMatrix * vec4( position, 1.0 );\n  vWorldPosition = worldPosition.xyz;\n\n  #include <project_vertex>\n\n  vSunDirection = normalize( sunPosition );\n\n  vSunE = sunIntensity( dot( vSunDirection, up ) );\n\n  vSunfade = 1.0 - clamp( 1.0 - exp( ( sunPosition.y / 450000.0 ) ), 0.0, 1.0 );\n\n  float rayleighCoefficient = rayleigh - ( 1.0 * ( 1.0 - vSunfade ) );\n\n  // extinction (absorbtion + out scattering)\n  // rayleigh coefficients\n  vBetaR = totalRayleigh * rayleighCoefficient;\n\n  // mie coefficients\n  vBetaM = totalMie( turbidity ) * mieCoefficient;\n\n  #include <fog_vertex>\n}\n",fragmentShader:"\n#include <common>\n#include <fog_pars_fragment>\n\nvarying vec3 vWorldPosition;\nvarying vec3 vSunDirection;\nvarying float vSunfade;\nvarying vec3 vBetaR;\nvarying vec3 vBetaM;\nvarying float vSunE;\n\nuniform float luminance;\nuniform float mieDirectionalG;\n\nconst vec3 cameraPos = vec3( 0.0, 0.0, 0.0 );\n\n// constants for atmospheric scattering\nconst float pi = 3.141592653589793238462643383279502884197169;\n\nconst float n = 1.0003; // refractive index of air\nconst float N = 2.545E25; // number of molecules per unit volume for air at\n// 288.15K and 1013mb (sea level -45 celsius)\n\n// optical length at zenith for molecules\nconst float rayleighZenithLength = 8.4E3;\nconst float mieZenithLength = 1.25E3;\nconst vec3 up = vec3( 0.0, 1.0, 0.0 );\n// 66 arc seconds -> degrees, and the cosine of that\nconst float sunAngularDiameterCos = 0.999956676946448443553574619906976478926848692873900859324;\n\n// 3.0 / ( 16.0 * pi )\nconst float THREE_OVER_SIXTEENPI = 0.05968310365946075;\n// 1.0 / ( 4.0 * pi )\nconst float ONE_OVER_FOURPI = 0.07957747154594767;\n\nfloat rayleighPhase( float cosTheta ) {\n  return THREE_OVER_SIXTEENPI * ( 1.0 + pow( cosTheta, 2.0 ) );\n}\n\nfloat hgPhase( float cosTheta, float g ) {\n  float g2 = pow( g, 2.0 );\n  float inverse = 1.0 / pow( 1.0 - 2.0 * g * cosTheta + g2, 1.5 );\n  return ONE_OVER_FOURPI * ( ( 1.0 - g2 ) * inverse );\n}\n\n// Filmic ToneMapping http://filmicgames.com/archives/75\nconst float A = 0.15;\nconst float B = 0.50;\nconst float C = 0.10;\nconst float D = 0.20;\nconst float E = 0.02;\nconst float F = 0.30;\n\nconst float whiteScale = 1.0748724675633854; // 1.0 / Uncharted2Tonemap(1000.0)\n\nvec3 Uncharted2Tonemap( vec3 x ) {\n  return ( ( x * ( A * x + C * B ) + D * E ) / ( x * ( A * x + B ) + D * F ) ) - E / F;\n}\n\nvoid main() {\n  // optical length\n  // cutoff angle at 90 to avoid singularity in next formula.\n  float zenithAngle = acos( max( 0.0, dot( up, normalize( vWorldPosition - cameraPos ) ) ) );\n  float inverse = 1.0 / ( cos( zenithAngle ) + 0.15 * pow( 93.885 - ( ( zenithAngle * 180.0 ) / pi ), -1.253 ) );\n  float sR = rayleighZenithLength * inverse;\n  float sM = mieZenithLength * inverse;\n\n  // combined extinction factor\n  vec3 Fex = exp( -( vBetaR * sR + vBetaM * sM ) );\n\n  // in scattering\n  float cosTheta = dot( normalize( vWorldPosition - cameraPos ), vSunDirection );\n\n  float rPhase = rayleighPhase( cosTheta * 0.5 + 0.5 );\n  vec3 betaRTheta = vBetaR * rPhase;\n\n  float mPhase = hgPhase( cosTheta, mieDirectionalG );\n  vec3 betaMTheta = vBetaM * mPhase;\n\n  vec3 Lin = pow( vSunE * ( ( betaRTheta + betaMTheta ) / ( vBetaR + vBetaM ) ) * ( 1.0 - Fex ), vec3( 1.5 ) );\n  Lin *= mix( vec3( 1.0 ), pow( vSunE * ( ( betaRTheta + betaMTheta ) / ( vBetaR + vBetaM ) ) * Fex, vec3( 1.0 / 2.0 ) ), clamp( pow( 1.0 - dot( up, vSunDirection ), 5.0 ), 0.0, 1.0 ) );\n\n  // nightsky\n  vec3 direction = normalize( vWorldPosition - cameraPos );\n  float theta = acos( direction.y ); // elevation --\x3e y-axis, [-pi/2, pi/2]\n  float phi = atan( direction.z, direction.x ); // azimuth --\x3e x-axis [-pi/2, pi/2]\n  vec2 uv = vec2( phi, theta ) / vec2( 2.0 * pi, pi ) + vec2( 0.5, 0.0 );\n  vec3 L0 = vec3( 0.1 ) * Fex;\n\n  // composition + solar disc\n  float sundisk = smoothstep( sunAngularDiameterCos, sunAngularDiameterCos + 0.00002, cosTheta );\n  L0 += ( vSunE * 19000.0 * Fex ) * sundisk;\n\n  vec3 texColor = ( Lin + L0 ) * 0.04 + vec3( 0.0, 0.0003, 0.00075 );\n\n  vec3 curr = Uncharted2Tonemap( ( log2( 2.0 / pow( luminance, 4.0 ) ) ) * texColor );\n  vec3 color = curr * whiteScale;\n\n  vec3 retColor = pow( color, vec3( 1.0 / ( 1.2 + ( 1.2 * vSunfade ) ) ) );\n\n  gl_FragColor = vec4( retColor, 1.0 );\n\n  #include <fog_fragment>\n}\n"}),L(Q,"_geometry",new z(1,1,1)),AFRAME.registerComponent("skybox",{schema:{turbidity:{type:"number",default:10},rayleigh:{type:"number",default:2},luminance:{type:"number",default:1},mieCoefficient:{type:"number",default:.005},mieDirectionalG:{type:"number",default:.8},inclination:{type:"number",default:0},azimuth:{type:"number",default:.15},distance:{type:"number",default:8e3}},init(){this.sky=new Q,this.sky.cubeCamera.children.forEach(e=>e.matrixNeedsUpdate=!0),this.el.setObject3D("mesh",this.sky),this.updateEnvironmentMap=this.updateEnvironmentMap.bind(this),requestAnimationFrame(()=>setTimeout(this.updateEnvironmentMap))},update(e){if(this.data.turbidity!==e.turbidity&&(this.sky.turbidity=this.data.turbidity),this.data.rayleigh!==e.rayleigh&&(this.sky.rayleigh=this.data.rayleigh),this.data.luminance!==e.luminance&&(this.sky.luminance=this.data.luminance),this.data.mieCoefficient!==e.mieCoefficient&&(this.sky.mieCoefficient=this.data.mieCoefficient),this.data.mieDirectionalG!==e.mieDirectionalG&&(this.sky.mieDirectionalG=this.data.mieDirectionalG),this.data.inclination!==e.inclination&&(this.sky.inclination=this.data.inclination,this.el.object3D.matrixNeedsUpdate=!0),this.data.azimuth!==e.azimuth&&(this.sky.azimuth=this.data.azimuth,this.el.object3D.matrixNeedsUpdate=!0),this.data.distance!==e.distance){const e=this.data.distance;this.sky.distance=1===this.el.object3D.scale.x?e:1,this.sky.matrixNeedsUpdate=!0}this.updateEnvironmentMap()},updateEnvironmentMap(){const e=this.el.sceneEl.components["environment-map"];if(e&&!H){const t=this.el.sceneEl.renderer,n=this.sky.generateEnvironmentMap(t);e.updateEnvironmentMap(n)}},remove(){this.el.removeObject3D("mesh")}}),AFRAME.registerComponent("spawn-controller",{schema:{target:{type:"selector"},camera:{type:"selector",default:"#avatar-pov-node"},playerHeight:{default:1.6},loadedEvent:{type:"string"}},init(){this.moveToSpawnPoint=this.moveToSpawnPoint.bind(this),Object(x.a)().then(()=>{this.data.target.addEventListener(this.data.loadedEvent,this.moveToSpawnPoint)})},moveToSpawnPoint(){const e=document.querySelectorAll("[spawn-point]");if(0===e.length)return;const t=this.data.camera,n=e[Math.round((e.length-1)*Math.random())];Object(_.h)(n.object3D,this.el.object3D.position),this.el.object3D.rotation.copy(n.object3D.rotation),this.el.sceneEl.is("vr-mode")?this.el.object3D.rotation.y-=this.data.camera.object3D.rotation.y:(t.object3D.position.set(0,this.data.playerHeight,0),t.object3D.rotation.set(0,0,0),t.object3D.matrixNeedsUpdate=!0),this.el.object3D.rotation.y+=Math.PI,this.el.object3D.matrixNeedsUpdate=!0}}),AFRAME.registerComponent("spawn-point",{init(){this.el.object3D.visible=!1}});n(355),n(356);var Z=n(35),X=n(1);function J(e,t,n,i,o,a,s){try{var r=e[a](s),c=r.value}catch(e){return void n(e)}r.done?t(c):Promise.resolve(c).then(i,o)}const K=n(112).COLLISION_LAYERS;AFRAME.registerComponent("super-spawner",{schema:{src:{default:""},resolve:{default:!1},template:{default:""},spawnScale:{type:"vec3",default:{x:NaN,y:NaN,z:NaN}},spawnCooldown:{default:1},spawnEvent:{type:"string"},animateFromCursor:{type:"boolean"},mediaOptions:{default:{},parse:e=>"object"==typeof e?e:JSON.parse(e),stringify:JSON.stringify}},init(){this.cooldownTimeout=null,this.handPosition=new THREE.Vector3,this.onSpawnEvent=this.onSpawnEvent.bind(this),this.sceneEl=this.el.sceneEl,this.tempSpawnHandPosition=new THREE.Vector3,this.handleMediaLoaded=this.handleMediaLoaded.bind(this),this.spawnedMediaScale=null},play(){this.el.addEventListener("media-loaded",this.handleMediaLoaded),this.data.spawnEvent&&this.el.sceneEl.addEventListener(this.data.spawnEvent,this.onSpawnEvent)},pause(){this.el.removeEventListener("media-loaded",this.handleMediaLoaded),this.data.spawnEvent&&this.el.sceneEl.removeEventListener(this.data.spawnEvent,this.onSpawnEvent),this.cooldownTimeout&&(clearTimeout(this.cooldownTimeout),this.cooldownTimeout=null,this.el.setAttribute("visible",!0),this.el.classList.add("interactable"))},handleMediaLoaded(e){const t=e.target;var n,i;this.spawnedMediaScale=t.object3D.scale.clone(),n=this.spawnedMediaScale,i=this.data.spawnScale,n.set(null===i.x?n.x:i.x,null===i.y?n.y:i.y,null===i.z?n.z:i.z);const o=t.components["media-image"]||t.components["media-video"]||t.components["media-pdf"]?1:.5,a=Object(m.b)(o,Object(m.a)(t,t.object3D));this.spawnedMediaScale.divideScalar(a)},onSpawnEvent(e){var t,n=this;return(t=function*(){if(n.cooldownTimeout||!n.el.sceneEl.is("entered"))return;const t=Object(f.b)(n.data.src,n.data.template,Z.a.SPAWNER,null,n.data.resolve,!1,{x:null===n.data.spawnScale.x?1:n.data.spawnScale.x,y:null===n.data.spawnScale.y?1:n.data.spawnScale.y,z:null===n.data.spawnScale.z?1:n.data.spawnScale.z}).entity,i=n.el.sceneEl.systems.interaction;if(!i.ready)return;const o=e.detail&&e.detail.object3D||i.options.rightRemote.entity.object3D,a=-1===o.el.id.indexOf("right"),s=a?i.options.leftHand.entity.object3D:i.options.rightHand.entity.object3D;o.getWorldPosition(t.object3D.position),o.getWorldQuaternion(t.object3D.quaternion),t.object3D.matrixNeedsUpdate=!0,n.el.emit("spawned-entity-created",{target:t});const r=AFRAME.scenes[0].systems.userinput,c=n.data.animateFromCursor&&(r.get(X.a.actions.rightHand.matrix)||r.get(X.a.actions.leftHand.matrix));c||(a?(i.state.leftRemote.held=t,i.state.leftRemote.spawning=!0):(i.state.rightRemote.held=t,i.state.rightRemote.spawning=!0)),n.activateCooldown(),yield Object(x.b)("model-loaded",t),o.getWorldPosition(t.object3D.position),o.getWorldQuaternion(t.object3D.quaternion),t.object3D.matrixNeedsUpdate=!0,c?(s.getWorldPosition(n.handPosition),t.setAttribute("animation__spawn-at-cursor",{property:"position",delay:500,dur:1500,from:{x:t.object3D.position.x,y:t.object3D.position.y,z:t.object3D.position.z},to:{x:n.handPosition.x,y:n.handPosition.y,z:n.handPosition.z},easing:"easeInOutBack"})):a?i.state.leftRemote.spawning=!1:i.state.rightRemote.spawning=!1,t.components["body-helper"].body&&t.components["body-helper"].body.syncToPhysics(!0),t.addEventListener("media-loaded",()=>{n.el.emit("spawned-entity-loaded",{target:t})},{once:!0})},function(){var e=this,n=arguments;return new Promise(function(i,o){var a=t.apply(e,n);function s(e){J(a,i,o,s,r,"next",e)}function r(e){J(a,i,o,s,r,"throw",e)}s(void 0)})})()},activateCooldown(){if(this.data.spawnCooldown>0){const[e,t,n]=[this.el.object3D.scale.x,this.el.object3D.scale.y,this.el.object3D.scale.z];this.el.setAttribute("visible",!1),this.el.object3D.scale.set(.001,.001,.001),this.el.object3D.matrixNeedsUpdate=!0,this.el.classList.remove("interactable"),this.el.setAttribute("body-helper",{collisionFilterMask:K.NONE}),this.cooldownTimeout=setTimeout(()=>{this.el.setAttribute("visible",!0),this.el.classList.add("interactable"),this.el.setAttribute("body-helper",{collisionFilterMask:K.DEFAULT_SPAWNER}),this.el.removeAttribute("animation__spawner-cooldown"),this.el.setAttribute("animation__spawner-cooldown",{property:"scale",delay:50,dur:350,from:{x:.001,y:.001,z:.001},to:{x:e,y:t,z:n},easing:"easeOutElastic"}),this.cooldownTimeout=null},1e3*this.data.spawnCooldown)}}});n(562);var ee=n(153),te=n.n(ee);function ne(e,t,n,i,o,a,s){try{var r=e[a](s),c=r.value}catch(e){return void n(e)}r.done?t(c):Promise.resolve(c).then(i,o)}function ie(e,t){THREE.Mesh.call(this,e);const n=void 0!==(t=t||{}).time?t.time:0,i=void 0!==t.waterNormals?t.waterNormals:null,o=void 0!==t.sunDirection?t.sunDirection:new THREE.Vector3(.70707,.70707,0),a=new THREE.Color(void 0!==t.sunColor?t.sunColor:16777215),s=new THREE.Color(void 0!==t.waterColor?t.waterColor:8355711),r=void 0!==t.eye?t.eye:new THREE.Vector3(0,0,0),c=void 0!==t.distortionScale?t.distortionScale:20,l=void 0!==t.side?t.side:THREE.FrontSide,d=void 0!==t.fog&&t.fog,u={uniforms:THREE.UniformsUtils.merge([THREE.UniformsLib.lights,{normalSampler:{value:null},time:{value:0},size:{value:1},distortionScale:{value:20},sunColor:{value:new THREE.Color(8355711)},sunDirection:{value:new THREE.Vector3(.70707,.70707,0)},eye:{value:new THREE.Vector3},waterColor:{value:new THREE.Color(5592405)}}]),vertexShader:"\n      uniform float time;\n      varying vec4 worldPosition;\n\n      void main() {\n      \tworldPosition = modelMatrix * vec4( position, 1.0 );\n      \tvec4 mvPosition =  modelViewMatrix * vec4( position, 1.0 );\n      \tgl_Position = projectionMatrix * mvPosition;\n\n      }\n    ",fragmentShader:`\n      uniform float time;\n      uniform float size;\n      uniform float distortionScale;\n      uniform sampler2D normalSampler;\n      uniform vec3 sunColor;\n      uniform vec3 sunDirection;\n      uniform vec3 eye;\n      uniform vec3 waterColor;\n\n      varying vec4 worldPosition;\n\n      vec4 getNoise( vec2 uv ) {\n      \tvec2 uv0 = ( uv / 103.0 ) + vec2(time / 17.0, time / 29.0);\n      \tvec2 uv1 = uv / 107.0-vec2( time / -19.0, time / 31.0 );\n      \tvec2 uv2 = uv / vec2( 8907.0, 9803.0 ) + vec2( time / 101.0, time / 97.0 );\n      \tvec2 uv3 = uv / vec2( 1091.0, 1027.0 ) - vec2( time / 109.0, time / -113.0 );\n      \tvec4 noise = texture2D( normalSampler, uv0 ) +\n      \t\ttexture2D( normalSampler, uv1 ) +\n      \t\ttexture2D( normalSampler, uv2 ) +\n      \t\ttexture2D( normalSampler, uv3 );\n      \treturn noise * 0.5 - 1.0;\n      }\n\n      void sunLight( const vec3 surfaceNormal, const vec3 eyeDirection, float shiny, float spec, float diffuse, inout vec3 diffuseColor, inout vec3 specularColor ) {\n      \tvec3 reflection = normalize( reflect( -sunDirection, surfaceNormal ) );\n      \tfloat direction = max( 0.0, dot( eyeDirection, reflection ) );\n      \tspecularColor += pow( direction, shiny ) * sunColor * spec;\n      \tdiffuseColor += max( dot( sunDirection, surfaceNormal ), 0.0 ) * sunColor * diffuse;\n      }\n\n      ${THREE.ShaderChunk.common}\n      ${THREE.ShaderChunk.packing}\n      ${THREE.ShaderChunk.bsdfs}\n      ${THREE.ShaderChunk.lights_pars_begin}\n\n      void main() {\n      \tvec4 noise = getNoise( worldPosition.xz * size );\n      \tvec3 surfaceNormal = normalize( noise.xzy * vec3( 1.5, 1.0, 1.5 ) );\n\n      \tvec3 diffuseLight = vec3(0.0);\n      \tvec3 specularLight = vec3(0.0);\n\n      \tvec3 worldToEye = eye-worldPosition.xyz;\n      \tvec3 eyeDirection = normalize( worldToEye );\n      \tsunLight( surfaceNormal, eyeDirection, 100.0, 2.0, 0.5, diffuseLight, specularLight );\n\n      \tfloat theta = max( dot( eyeDirection, surfaceNormal ), 0.0 );\n      \tfloat rf0 = 0.3;\n      \tfloat reflectance = rf0 + ( 1.0 - rf0 ) * pow( ( 1.0 - theta ), 5.0 );\n      \tvec3 scatter = max( 0.0, dot( surfaceNormal, eyeDirection ) ) * waterColor;\n      \tvec3 albedo = mix( ( sunColor * diffuseLight * 0.3 + scatter ), ( 0.5 + specularLight ), reflectance);\n      \tvec3 outgoingLight = albedo;\n      \tgl_FragColor = vec4( outgoingLight, 1 );\n      }\n    `},h=new THREE.ShaderMaterial({fragmentShader:u.fragmentShader,vertexShader:u.vertexShader,uniforms:THREE.UniformsUtils.clone(u.uniforms),transparent:!1,lights:!0,side:l,fog:d});h.uniforms.time.value=n,h.uniforms.normalSampler.value=i,h.uniforms.sunColor.value=a,h.uniforms.waterColor.value=s,h.uniforms.sunDirection.value=o,h.uniforms.distortionScale.value=c,h.uniforms.eye.value=r,this.material=h}function oe(){var e;return e=function*(e){const t=yield new Promise((t,n)=>(new THREE.TextureLoader).load(e,t,void 0,n));return t.wrapS=t.wrapT=THREE.RepeatWrapping,t.needsUpdate=!0,t},(oe=function(){var t=this,n=arguments;return new Promise(function(i,o){var a=e.apply(t,n);function s(e){ne(a,i,o,s,r,"next",e)}function r(e){ne(a,i,o,s,r,"throw",e)}s(void 0)})}).apply(this,arguments)}ie.prototype=Object.create(THREE.Mesh.prototype),ie.prototype.constructor=THREE.Water,AFRAME.registerComponent("water",{schema:{waterColor:{type:"color",default:"#001e0f"},distortionScale:{type:"number",default:3.7},sunColor:{type:"color",default:"#ffffff"},inclination:{type:"number",default:0},azimuth:{type:"number",default:0},distance:{type:"number",default:1},speed:{type:"number",default:.1},forceMobile:{type:"boolean",default:!1}},init(){const e=this.el.getObject3D("mesh"),t=e.geometry;e.visible=!1,function(e){return oe.apply(this,arguments)}(te.a).then(e=>{const n={textureWidth:512,textureHeight:512,waterNormals:e,sunDirection:this.data.sunDirection,sunColor:new THREE.Color(this.data.sunColor),waterColor:new THREE.Color(this.data.waterColor),distortionScale:this.data.distortionScale,fog:!1};AFRAME.utils.device.isMobile()||AFRAME.utils.device.isMobileVR()||this.data.forceMobile?this.water=new ie(t,n):(this.water=new THREE.Water(t,n),this.water.mirrorCamera.layers.set(h.reflection)),this.el.setObject3D("water",this.water)})},update(e){if(this.data.forceMobile!==e.forceMobile)return this.el.removeObject3D("water"),void this.init();if(!this.water)return;const t=this.water.material.uniforms;if(this.data.waterColor!==e.waterColor&&t.waterColor.value.setStyle(this.data.waterColor),this.data.distortionScale!==e.distortionScale&&(t.distortionScale.value=this.data.distortionScale),this.data.sunColor!==e.sunColor&&t.sunColor.value.setStyle(this.data.sunColor),this.data.inclination!==e.inclination||this.data.azimuth!==e.azimuth||this.data.distance!==e.distance){const e=Math.PI*(this.data.inclination-.5),n=2*Math.PI*(this.data.azimuth-.5),i=this.data.distance,o=i*Math.cos(n),a=i*Math.sin(n)*Math.sin(e),s=i*Math.sin(n)*Math.cos(e);t.sunDirection.value.set(o,a,s)}},tick(e){this.water&&(this.water.material.uniforms.time.value=e/1e3*this.data.speed)},remove(){this.el.removeObject3D("water"),this.el.getObject3D("mesh").visible=!0}});var ae=n(294);const{Mesh:se,PlaneBufferGeometry:re,MeshStandardMaterial:ce,MeshPhongMaterial:le,Vector2:de,TextureLoader:ue,RepeatWrapping:he}=THREE;class pe{constructor(e=new de(1,1),t=new de(1,1),n=.0025,i=!0){this.speed=e,this.scale=t,this.height=n,this.alternate=i}}class me extends se{constructor(e,t=24,n=!1){const i=new re(10,10,t,t);i.rotateX(-Math.PI/2);const o={ripplesSpeed:{value:.25},ripplesScale:{value:1},time:{value:0}},a=n?le:ce;e.wrapS=e.wrapT=he;const s=new a({color:21727,normalMap:e});s.name="SimpleWaterMaterial",s.onBeforeCompile=e=>{Object.assign(e.uniforms,o),e.vertexShader=e.vertexShader.replace("#include <fog_pars_vertex>","\n        #include <fog_pars_vertex>\n        varying vec3 vWPosition;\n      "),e.vertexShader=e.vertexShader.replace("#include <fog_vertex>","\n        #include <fog_vertex>\n        vWPosition = ( modelMatrix * vec4( transformed, 1.0 ) ).xyz;\n      "),e.fragmentShader=e.fragmentShader.replace("#include <normalmap_pars_fragment>","\n        #include <normalmap_pars_fragment>\n\n        uniform float time;\n        uniform float ripplesSpeed;\n        uniform float ripplesScale;\n      \n        varying vec3 vWPosition;\n      \n        vec4 getNoise(vec2 uv){\n          float timeOffset = time * ripplesSpeed;\n          uv = (uv - 0.5) * (1.0 / ripplesScale);\n          vec2 uv0 = (uv/103.0)+vec2(timeOffset/17.0, timeOffset/29.0);\n          vec2 uv1 = uv/107.0-vec2(timeOffset/-19.0, timeOffset/31.0);\n          vec2 uv2 = uv/vec2(897.0, 983.0)+vec2(timeOffset/101.0, timeOffset/97.0);\n          vec2 uv3 = uv/vec2(991.0, 877.0)-vec2(timeOffset/109.0, timeOffset/-113.0);\n          vec4 noise = (texture2D(normalMap, uv0)) +\n                       (texture2D(normalMap, uv1)) +\n                       (texture2D(normalMap, uv2)) +\n                       (texture2D(normalMap, uv3));\n          return noise / 4.0;\n        }\n      "),e.fragmentShader=e.fragmentShader.replace("#include <normal_fragment_maps>","\n          // Workaround for Adreno 3XX dFd*( vec3 ) bug. See #9988\n\n          vec3 eye_pos = -vViewPosition;\n          vec3 q0 = vec3( dFdx( eye_pos.x ), dFdx( eye_pos.y ), dFdx( eye_pos.z ) );\n          vec3 q1 = vec3( dFdy( eye_pos.x ), dFdy( eye_pos.y ), dFdy( eye_pos.z ) );\n          vec2 st0 = dFdx( vUv.st );\n          vec2 st1 = dFdy( vUv.st );\n\n          float scale = sign( st1.t * st0.s - st0.t * st1.s ); // we do not care about the magnitude\n\n          vec3 S = normalize( ( q0 * st1.t - q1 * st0.t ) * scale );\n          vec3 T = normalize( ( - q0 * st1.s + q1 * st0.s ) * scale );\n          vec3 N = normalize( normal );\n          mat3 tsn = mat3( S, T, N );\n\n          vec3 mapN = getNoise(vWPosition.xz).xyz * 2.0 - 1.0;\n\n          mapN.xy *= normalScale;\n          mapN.xy *= ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\n          normal = normalize( tsn * mapN );\n        ")},super(i,s),this.lowQuality=n,this.waterUniforms=o,n?this.material.specular.set(16777215):this.receiveShadow=!0,this.geometry.attributes.position.dynamic=!0,this.resolution=t,this.octaves=[new pe(new de(.5,.5),new de(1,1),.01,!0),new pe(new de(.05,6),new de(1,20),.1,!1)],this.simplex=new ae.a}get opacity(){return this.material.opacity}set opacity(e){this.material.opacity=e,1!==e&&(this.material.transparent=!0)}get color(){return this.material.color}get tideHeight(){return this.octaves[0].height}get tideScale(){return this.octaves[0].scale}get tideSpeed(){return this.octaves[0].speed}set tideHeight(e){this.octaves[0].height=e}get waveHeight(){return this.octaves[1].height}set waveHeight(e){this.octaves[1].height=e}get waveScale(){return this.octaves[1].scale}get waveSpeed(){return this.octaves[1].speed}set ripplesSpeed(e){this.waterUniforms.ripplesSpeed.value=e}get ripplesSpeed(){return this.waterUniforms.ripplesSpeed.value}set ripplesScale(e){this.waterUniforms.ripplesScale.value=e}get ripplesScale(){return this.waterUniforms.ripplesScale.value}update(e){const t=this.geometry.attributes.position;for(let n=0;n<=this.resolution;n++)for(let i=0;i<=this.resolution;i++){let o=0;for(let t=0;t<this.octaves.length;t++){const a=this.octaves[t];if(a.alternate){const t=this.simplex.noise(n*a.scale.x/this.resolution,i*a.scale.y/this.resolution);o+=Math.cos(t+a.speed.length()*e)*a.height}else{o+=(this.simplex.noise((n*a.scale.x+e*a.speed.x)/this.resolution,(i*a.scale.y+e*a.speed.y)/this.resolution)-.5)*a.height}}t.setY(n*(this.resolution+1)+i,o)}this.geometry.computeVertexNormals(),t.needsUpdate=!0,this.waterUniforms.time.value=e}clone(e){return new me(this.material.normalMap,this.resolution,this.lowQuality).copy(this,e)}copy(e,t=!0){return super.copy(e,t),this.opacity=e.opacity,this.color.copy(e.color),this.tideHeight=e.tideHeight,this.tideScale.copy(e.tideScale),this.tideSpeed.copy(e.tideSpeed),this.waveHeight=e.waveHeight,this.waveScale.copy(e.waveScale),this.waveSpeed.copy(e.waveSpeed),this.ripplesSpeed=e.ripplesSpeed,this.ripplesScale=e.ripplesScale,this}}function fe(e,t){return e&&t&&e.x===t.x&&e.y===t.y}let ge=null;AFRAME.registerComponent("simple-water",{schema:{opacity:{type:"number",default:1},color:{type:"color"},tideHeight:{type:"number",default:.01},tideScale:{type:"vec2",default:{x:1,y:1}},tideSpeed:{type:"vec2",default:{x:.5,y:.5}},waveHeight:{type:"number",default:.1},waveScale:{type:"vec2",default:{x:1,y:20}},waveSpeed:{type:"vec2",default:{x:.05,y:6}},ripplesScale:{type:"number",default:1},ripplesSpeed:{type:"number",default:.25}},init(){ge||(ge=(new ue).load(te.a)),this.water=new me(ge,void 0,window.APP&&"low"===window.APP.quality),this.el.setObject3D("mesh",this.water)},update(e){this.data.opacity!==e.opacity&&(this.water.opacity=this.data.opacity),this.data.color!==e.color&&this.water.color.set(this.data.color),this.data.tideHeight!==e.tideHeight&&(this.water.tideHeight=this.data.tideHeight),fe(this.data.tideScale,e.tideScale)||this.water.tideScale.copy(this.data.tideScale),fe(this.data.tideSpeed,e.tideSpeed)||this.water.tideSpeed.copy(this.data.tideSpeed),this.data.waveHeight!==e.waveHeight&&(this.water.waveHeight=this.data.waveHeight),fe(this.data.waveScale,e.waveScale)||this.water.waveScale.copy(this.data.waveScale),fe(this.data.waveSpeed,e.waveSpeed)||this.water.waveSpeed.copy(this.data.waveSpeed),this.data.ripplesScale!==e.ripplesScale&&(this.water.ripplesScale=this.data.ripplesScale),this.data.ripplesSpeed!==e.ripplesSpeed&&(this.water.ripplesSpeed=this.data.ripplesSpeed)},tick(e){this.water.update(e/1e3)},remove(){this.el.removeObject3D("mesh")}});n(166),n(357),n(358);var be=n(301),ve=n(97);function ye(e,t,n,i,o,a,s){try{var r=e[a](s),c=r.value}catch(e){return void n(e)}r.done?t(c):Promise.resolve(c).then(i,o)}const we=new URL(n.n(ve).a,window.location.href).href;AFRAME.registerComponent("particle-emitter",{schema:{resolve:{type:"boolean",default:!0},src:{type:"string",default:we},startColor:{type:"color"},middleColor:{type:"color"},endColor:{type:"color"},startOpacity:{type:"number",default:1},middleOpacity:{type:"number",default:1},endOpacity:{type:"number",default:1},colorCurve:{type:"string",default:"linear"},sizeCurve:{type:"string",default:"linear"},startSize:{type:"number",default:1},endSize:{type:"number",default:1},sizeRandomness:{type:"number"},ageRandomness:{type:"number"},lifetime:{type:"number",default:1},lifetimeRandomness:{type:"number"},particleCount:{type:"number",default:10},startVelocity:{type:"vec3",default:{x:0,y:0,z:1}},endVelocity:{type:"vec3",default:{x:0,y:0,z:1}},velocityCurve:{type:"string",default:"linear"},angularVelocity:{type:"number"}},init(){this.particleEmitter=new be.a(null),this.particleEmitter.visible=!1,this.el.setObject3D("particle-emitter",this.particleEmitter),this.updateParticles=!1,this.data.src===we&&(this.data.resolve=!1)},setTexture(e,t){var n,i=this;return(n=function*(){let n=e;if(t){let t=(yield Object(f.k)(e)).origin;t.startsWith("//")&&(t=location.protocol+t),n=Object(g.i)(t)}const o=new THREE.Texture;yield f.l.loadTextureAsync(o,n),i.data.src===e&&(i.particleEmitter.material.uniforms.map.value=o,i.particleEmitter.visible=!0,i.updateParticles=!0)},function(){var e=this,t=arguments;return new Promise(function(i,o){var a=n.apply(e,t);function s(e){ye(a,i,o,s,r,"next",e)}function r(e){ye(a,i,o,s,r,"throw",e)}s(void 0)})})()},update(e){const t=this.data,n=this.particleEmitter;e.src!==t.src&&this.setTexture(t.src,t.resolve).catch(console.error),e.startColor===t.startColor&&e.startSize===t.startSize&&e.sizeRandomness===t.sizeRandomness&&e.ageRandomness===t.ageRandomness&&e.lifetime===t.lifetime&&e.lifetimeRandomness===t.lifetimeRandomness&&e.particleCount===t.particleCount||(this.updateParticles=!0),n.startColor.set(t.startColor),n.middleColor.set(t.middleColor),n.endColor.set(t.endColor),n.startOpacity=t.startOpacity,n.middleOpacity=t.middleOpacity,n.endOpacity=t.endOpacity,n.colorCurve=t.colorCurve,n.sizeCurve=t.sizeCurve,n.startSize=t.startSize,n.endSize=t.endSize,n.sizeRandomness=t.sizeRandomness,n.ageRandomness=t.ageRandomness,n.lifetime=t.lifetime,n.lifetimeRandomness=t.lifetimeRandomness,n.particleCount=t.particleCount,n.startVelocity.copy(t.startVelocity),n.endVelocity.copy(t.endVelocity),n.velocityCurve=t.velocityCurve,n.angularVelocity=t.angularVelocity},tick(e,t){this.updateParticles&&(this.particleEmitter.updateParticles(),this.updateParticles=!1),this.particleEmitter.visible&&this.particleEmitter.update(t/1e3)}})},378:function(e,t,n){"use strict";n(82);function i(e,t,n){const i=n[e];if(!i)throw new Error(`Component "${e}" is not public.`);const o=i.publicProperties[t];if(!o)throw new Error(`Component "${e}"'s property "${t}" is not public.`);return{mappedComponent:i.mappedComponent,mappedProperty:o.mappedProperty,getMappedValue:o.getMappedValue}}var o=n(14);function a(e,t,n,i,o,a,s){try{var r=e[a](s),c=r.value}catch(e){return void n(e)}r.done?t(c):Promise.resolve(c).then(i,o)}const s=n(112).COLLISION_LAYERS;function r(e){AFRAME.GLTFModelPlus.registerComponent(e,e,(e,t,n)=>{const i=AFRAME.scenes[0];i.setAttribute(t,n),i.addEventListener("reset_scene",()=>{i.removeAttribute(t)},{once:!0})})}function c(e,t,n,i){return l.apply(this,arguments)}function l(){var e;return e=function*(e,t,n,i){let o=!0;if(i.networked){const a="video"===t||"audio"===t,s=(o=n.controls||"link"===t)||a?"#static-controlled-media":"#static-media";e.setAttribute("networked",{template:s,owner:"scene",persistent:!0,networkId:i.networked.id})}const a={};"video"!==t&&"image"!==t||(a.projection=n.projection),"video"!==t&&"audio"!==t||(a.videoPaused=!n.autoPlay,a.volume=n.volume,a.loop=n.loop,a.audioType=n.audioType,a.hidePlaybackControls=!o,"pannernode"===n.audioType&&(a.distanceModel=n.distanceModel,a.rolloffFactor=n.rolloffFactor,a.refDistance=n.refDistance,a.maxDistance=n.maxDistance,a.coneInnerAngle=n.coneInnerAngle,a.coneOuterAngle=n.coneOuterAngle,a.coneOuterGain=n.coneOuterGain),e.setAttribute("video-pause-state",{paused:a.videoPaused}));const s="link"===t?n.href:n.src;e.setAttribute("media-loader",{src:s,fitToBox:!0,resolve:!0,fileIsOwned:!0,animate:!1,mediaOptions:a})},(l=function(){var t=this,n=arguments;return new Promise(function(i,o){var s=e.apply(t,n);function r(e){a(s,i,o,r,c,"next",e)}function c(e){a(s,i,o,r,c,"throw",e)}r(void 0)})}).apply(this,arguments)}r("fog"),r("background"),AFRAME.GLTFModelPlus.registerComponent("duck","duck"),AFRAME.GLTFModelPlus.registerComponent("quack","quack"),AFRAME.GLTFModelPlus.registerComponent("sound","sound"),AFRAME.GLTFModelPlus.registerComponent("css-class","css-class"),AFRAME.GLTFModelPlus.registerComponent("interactable","css-class",(e,t)=>{e.setAttribute(t,"interactable")}),AFRAME.GLTFModelPlus.registerComponent("super-spawner","super-spawner",(e,t,n)=>{e.setAttribute("is-remote-hover-target",""),e.setAttribute("tags",{isHandCollisionTarget:!0}),e.setAttribute("hoverable-visuals",""),e.setAttribute(t,n)}),AFRAME.GLTFModelPlus.registerComponent("gltf-model-plus","gltf-model-plus"),AFRAME.GLTFModelPlus.registerComponent("media-loader","media-loader"),AFRAME.GLTFModelPlus.registerComponent("body","body-helper",e=>{e.setAttribute("body-helper",{mass:0,type:o.TYPE.STATIC,collisionFilterGroup:s.INTERACTABLES,collisionFilterMask:s.DEFAULT_SPAWNER})}),AFRAME.GLTFModelPlus.registerComponent("ammo-shape","shape-helper"),AFRAME.GLTFModelPlus.registerComponent("hide-when-quality","hide-when-quality"),AFRAME.GLTFModelPlus.registerComponent("light","light",(e,t,n)=>{0===n.distance&&(n.decay=0),e.setAttribute(t,n),n.castShadow&&setTimeout(()=>{e.components.light.light.shadow.camera.matrixNeedsUpdate=!0},0)}),AFRAME.GLTFModelPlus.registerComponent("ambient-light","ambient-light"),AFRAME.GLTFModelPlus.registerComponent("directional-light","directional-light"),AFRAME.GLTFModelPlus.registerComponent("hemisphere-light","hemisphere-light"),AFRAME.GLTFModelPlus.registerComponent("point-light","point-light"),AFRAME.GLTFModelPlus.registerComponent("spot-light","spot-light"),AFRAME.GLTFModelPlus.registerComponent("simple-water","simple-water"),AFRAME.GLTFModelPlus.registerComponent("skybox","skybox"),AFRAME.GLTFModelPlus.registerComponent("layers","layers"),AFRAME.GLTFModelPlus.registerComponent("shadow","shadow"),AFRAME.GLTFModelPlus.registerComponent("water","water"),AFRAME.GLTFModelPlus.registerComponent("scale-audio-feedback","scale-audio-feedback"),AFRAME.GLTFModelPlus.registerComponent("morph-audio-feedback","morph-audio-feedback"),AFRAME.GLTFModelPlus.registerComponent("animation-mixer","animation-mixer"),AFRAME.GLTFModelPlus.registerComponent("loop-animation","loop-animation"),AFRAME.GLTFModelPlus.registerComponent("box-collider","shape-helper",(()=>{const e=new THREE.Euler;return(t,n,i)=>{const{scale:a,rotation:s}=i;e.set(s.x,s.y,s.z);const r=(new THREE.Quaternion).setFromEuler(e);t.setAttribute(n,{type:o.SHAPE.BOX,fit:o.FIT.MANUAL,offset:i.position,halfExtents:{x:a.x/2,y:a.y/2,z:a.z/2},orientation:r})}})()),AFRAME.GLTFModelPlus.registerComponent("visible","visible",(e,t,n)=>{"object"==typeof n?e.setAttribute(t,n.visible):e.setAttribute(t,n)}),AFRAME.GLTFModelPlus.registerComponent("spawn-point","spawn-point",e=>{e.setAttribute("waypoint",{canBeSpawnPoint:!0,canBeOccupied:!1,canBeClicked:!1,willDisableMotion:!1,willDisableTeleporting:!1,willMaintainWorldUp:!0})}),AFRAME.GLTFModelPlus.registerComponent("sticky-zone","sticky-zone"),AFRAME.GLTFModelPlus.registerComponent("nav-mesh","nav-mesh",(e,t,n)=>{const i=AFRAME.scenes[0].systems.nav,o=n.zone||"character";let a=!1;e.object3D.traverse(e=>{e.isMesh&&!a&&(a=!0,i.loadMesh(e,o))}),e.setAttribute("nav-mesh")}),AFRAME.GLTFModelPlus.registerComponent("pinnable","pinnable"),AFRAME.GLTFModelPlus.registerComponent("waypoint","waypoint",(e,t,n,i)=>{n.canBeOccupied&&e.setAttribute("networked",{template:"#template-waypoint-avatar",attachTemplateToLocal:!1,owner:"scene",persistent:!0,networkId:i.networked.id}),e.setAttribute("waypoint",n)}),AFRAME.GLTFModelPlus.registerComponent("media","media",(e,t,n)=>{n.id&&e.setAttribute("networked",{template:"#interactable-media",owner:"scene",persistent:!0,networkId:n.id});const i={src:n.src,fitToBox:!n.contentSubtype,resolve:!0,fileIsOwned:!0,animate:!1,contentSubtype:n.contentSubtype};n.version&&(i.version=n.version),e.setAttribute("media-loader",i),n.pageIndex&&(e.setAttribute("media-pdf",{index:n.pageIndex}),e.setAttribute("media-pager",{index:n.pageIndex})),void 0!==n.paused&&e.setAttribute("media-video",{videoPaused:n.paused}),n.time&&e.setAttribute("media-video",{time:n.time})}),AFRAME.GLTFModelPlus.registerComponent("image","image",c),AFRAME.GLTFModelPlus.registerComponent("audio","audio",c,(e,t,n)=>"paused"===t?{name:"video-pause-state",property:t,value:n}:null),AFRAME.GLTFModelPlus.registerComponent("video","video",c,(e,t,n)=>"paused"===t?{name:"video-pause-state",property:t,value:n}:null),AFRAME.GLTFModelPlus.registerComponent("link","link",c),AFRAME.GLTFModelPlus.registerComponent("hoverable","is-remote-hover-target",e=>{e.setAttribute("is-remote-hover-target",""),e.setAttribute("tags",{isHandCollisionTarget:!0})}),AFRAME.GLTFModelPlus.registerComponent("spawner","spawner",(e,t,n)=>{e.setAttribute("media-loader",{src:n.src,resolve:!0,fileIsOwned:!0,animate:!1}),e.setAttribute("css-class","interactable"),e.setAttribute("super-spawner",{src:n.src,resolve:!0,template:"#interactable-media"}),e.setAttribute("hoverable-visuals",""),e.setAttribute("body-helper",{mass:0,type:o.TYPE.STATIC,collisionFilterGroup:s.INTERACTABLES,collisionFilterMask:s.DEFAULT_SPAWNER}),e.setAttribute("is-remote-hover-target",""),e.setAttribute("tags",{isHandCollisionTarget:!0})});const d={video:{mappedComponent:"video-pause-state",publicProperties:{paused:{mappedProperty:"paused",getMappedValue:e=>!!e}}},"loop-animation":{mappedComponent:"loop-animation",publicProperties:{paused:{mappedProperty:"paused",getMappedValue:e=>!!e}}}};AFRAME.GLTFModelPlus.registerComponent("trigger-volume","trigger-volume",(e,t,n,o,a)=>{const{size:s,target:r,enterComponent:c,enterProperty:l,enterValue:u,leaveComponent:h,leaveProperty:p,leaveValue:m}=n;let f,g,b;try{if(f=i(c,l,d),g=i(h,p,d),!(b=a[r]))throw new Error(`Couldn't find target entity with index: ${r}.`)}catch(e){return void console.warn(`Error inflating gltf component "trigger-volume": ${e.message}`)}e.setAttribute("trigger-volume",{colliders:"#avatar-pov-node",size:s,target:b,enterComponent:f.mappedComponent,enterProperty:f.mappedProperty,enterValue:f.getMappedValue(u),leaveComponent:g.mappedComponent,leaveProperty:g.mappedProperty,leaveValue:g.getMappedValue(m)})}),AFRAME.GLTFModelPlus.registerComponent("heightfield","heightfield",(e,t,n)=>{e.setAttribute("shape-helper__heightfield",{type:o.SHAPE.HEIGHTFIELD,margin:.01,fit:o.FIT.MANUAL,heightfieldDistance:n.distance,offset:n.offset,heightfieldData:n.data})}),AFRAME.GLTFModelPlus.registerComponent("trimesh","trimesh",e=>{e.setAttribute("shape-helper__trimesh",{type:o.SHAPE.MESH,margin:.01,fit:o.FIT.ALL,includeInvisible:!0})}),AFRAME.GLTFModelPlus.registerComponent("particle-emitter","particle-emitter"),AFRAME.GLTFModelPlus.registerComponent("networked-drawing-buffer","networked-drawing-buffer"),AFRAME.GLTFModelPlus.registerComponent("audio-settings","audio-settings",(e,t,n)=>{e.sceneEl.systems["hubs-systems"].audioSettingsSystem.updateAudioSettings(n)})},4:function(e,t,n){"use strict";n(54),n(55),n(56);var i=n(70),o=n.n(i);const a={};let s=!1;if(["RETICULUM_SERVER","THUMBNAIL_SERVER","CORS_PROXY_SERVER","NON_CORS_PROXY_DOMAINS","SENTRY_DSN","GA_TRACKING_ID","SHORTLINK_DOMAIN","BASE_ASSETS_PATH"].forEach(e=>{const t=document.querySelector(`meta[name='env:${e.toLowerCase()}']`);a[e]=t?t.getAttribute("content"):{NODE_ENV:"production",SHORTLINK_DOMAIN:"hub.link",RETICULUM_SERVER:"dev.reticulum.io",THUMBNAIL_SERVER:"nearspark-dev.reticulum.io",CORS_PROXY_SERVER:"cors-proxy-dev.reticulum.io",NON_CORS_PROXY_DOMAINS:"hubs.local,dev.reticulum.io",BASE_ASSETS_PATH:"/custom-hubs-template/"}[e],"BASE_ASSETS_PATH"===e&&a[e]&&(n.p=a[e],o.a.GlobalWorkerOptions.workerSrc=`${a[e]}../assets/js/pdfjs-dist@2.1.266/build/pdf.worker.js`)}),a.AVAILABLE_INTEGRATIONS=window.AVAILABLE_INTEGRATIONS||{},window.APP_CONFIG){a.APP_CONFIG=window.APP_CONFIG;const{theme:e}=a.APP_CONFIG;if(e){const t=[];for(const n in e)e.hasOwnProperty(n)&&t.push(`--${n}: ${e[n]};`);const n=document.createElement("style");n.innerHTML=`:root{${t.join("\n")}}`,document.head.prepend(n)}a.APP_CONFIG.features||(a.APP_CONFIG.features={})}else a.APP_CONFIG={features:{}};a.feature=e=>{const t=a.APP_CONFIG.features[e];if("boolean"==typeof t){const n=!1;return"enable_spoke"===e&&s||n||t}return t};let r={};a.image=(e,t)=>{const n=a.APP_CONFIG&&a.APP_CONFIG.images&&a.APP_CONFIG.images[e]||r[e];return n&&t?`url(${n})`:n},a.link=(e,t)=>a.APP_CONFIG&&a.APP_CONFIG.links&&a.APP_CONFIG.links[e]||t,a.setIsAdmin=e=>{s=e},a.isAdmin=()=>s,t.a=a},48:function(e,t,n){"use strict";n.d(t,"f",function(){return l}),n.d(t,"b",function(){return m}),n.d(t,"c",function(){return b}),n.d(t,"d",function(){return v}),n.d(t,"a",function(){return E}),n.d(t,"e",function(){return R});var i=n(15),o=n(13),a=n(1),s=n(73),r=n(22);const c=Object(r.a)("thirdPerson");function l(e){let t=e;for(;t;){if(t.components&&t.components.tags&&t.components.tags.data.inspectable)return t;t=t.parentNode}return null}const d=function(){const e=new THREE.Vector3;return function(t,n,i){t.decompose(n,i,e)}}(),u=(new THREE.Matrix4).identity(),h=function(){const e=new THREE.Quaternion,t=new THREE.Vector3,n=new THREE.Quaternion,i=new THREE.Vector3,a=new THREE.Quaternion,s=new THREE.Vector3,r=new THREE.Vector3,c=new THREE.Object3D,l=new THREE.Quaternion,h=new THREE.Quaternion;return function(p,m,f,g,b,v,y,w){c.parent||(AFRAME.scenes[0].object3D.add(c),c.applyMatrix(u)),p.updateMatrices(),d(p.matrixWorld,t,e),d(f.matrixWorld,i,n),m.getWorldQuaternion(a),l.setFromAxisAngle(s.set(0,1,0).applyQuaternion(e),.1*g*y),c.quaternion.copy(n).premultiply(l);const E=(new THREE.Vector3).subVectors(i,t),_=1-v*y,x=E.length()*_;x>.1&&x<100&&E.multiplyScalar(_),h.setFromAxisAngle(r.set(1,0,0).applyQuaternion(c.quaternion),.1*b*y),c.quaternion.premultiply(h),c.position.addVectors(t,E.applyQuaternion(l).applyQuaternion(h)).add(s.set(0,1,0).multiplyScalar(w*x).applyQuaternion(c.quaternion)),c.matrixNeedsUpdate=!0,c.updateMatrices(),Object(o.d)(m,f,c.matrixWorld)}}(),p=function(){const e=new THREE.Quaternion,t=new THREE.Vector3,n=new THREE.Quaternion,i=new THREE.Vector3,a=new THREE.Vector3,r=new THREE.Vector3,c=new THREE.Object3D;return function(l,h,p,m){c.parent||(AFRAME.scenes[0].object3D.add(c),c.applyMatrix(u)),p.updateMatrices(),d(p.matrixWorld,t,e),d(h.matrixWorld,i,n),l.getWorldQuaternion(n);const f=Object(s.a)(p.el,p.el.getObject3D("mesh")||p,!0);f.getCenter(r);const g=p.el.sceneEl.is("vr-mode"),b=Object(o.c)(p.el.sceneEl.camera.fov,p.el.sceneEl.camera.aspect,p,f,r,g)*m;c.position.addVectors(t,a.set(0,0,1).multiplyScalar(b).applyQuaternion(e)),c.quaternion.copy(e),c.matrixNeedsUpdate=!0,c.updateMatrices(),Object(o.d)(l,h,c.matrixWorld)}}(),m=0,f=1,g=2,b=3,v=4,y={[m]:f,[f]:g,[g]:m},w=4,E=5,_=function(e){e.isLight&&e.layers.enable(w)},x=function(e){const t=AFRAME.scenes[0].systems["hubs-systems"].batchManagerSystem.batchManager.batchForMesh.get(e);t?(t.layers.enable(w),e.layers.enable(E)):e.layers.enable(w)},A=function(e){const t=AFRAME.scenes[0].systems["hubs-systems"].batchManagerSystem.batchManager.batchForMesh.get(e);t?(t.layers.disable(w),e.layers.disable(E)):e.layers.disable(w)};const S=.9;class R{constructor(e){var t,n,s;t=this,n="tick",s=function(){const e=new THREE.Matrix4;return function(t,n){if(!this.enteredScene&&t.is("entered")&&(this.enteredScene=!0,this.mode=m),this.avatarPOVRotator=this.avatarPOVRotator||this.avatarPOV.components["pitch-yaw-rotator"],this.viewingCameraRotator=this.viewingCameraRotator||this.viewingCamera.components["pitch-yaw-rotator"],this.avatarPOVRotator.on=!0,this.viewingCameraRotator.on=!0,this.userinput=this.userinput||t.systems.userinput,this.interaction=this.interaction||t.systems.interaction,this.userinput.get(a.a.actions.startInspecting)&&this.mode!==b){const e=this.interaction.state.rightRemote.hovered||this.interaction.state.leftRemote.hovered;if(e){const t=l(e);t&&this.inspect(t.object3D)}}else!this.temporarilyDisableRegularExit&&this.mode===b&&this.userinput.get(a.a.actions.stopInspecting)&&(t.emit("uninspect"),this.uninspect());this.userinput.get(a.a.actions.nextCameraMode)&&this.nextMode();const i=this.mode!==m;if(this.playerHead=this.playerHead||document.getElementById("avatar-head"),this.playerHead&&i!==this.playerHead.object3D.visible)this.playerHead.object3D.visible=i;else{if(this.mode===m)this.viewingCameraRotator.on=!1,this.avatarRig.object3D.updateMatrices(),Object(o.l)(this.viewingRig.object3D,this.avatarRig.object3D.matrixWorld),t.is("vr-mode")?(this.viewingCamera.object3D.updateMatrices(),Object(o.l)(this.avatarPOV.object3D,this.viewingCamera.object3D.matrixWorld)):(this.avatarPOV.object3D.updateMatrices(),Object(o.l)(this.viewingCamera.object3D,this.avatarPOV.object3D.matrixWorld));else if(this.mode===f||this.mode===g)this.mode===f?e.makeTranslation(0,1,3):e.makeTranslation(0,2,8),this.avatarRig.object3D.updateMatrices(),this.viewingRig.object3D.matrixWorld.copy(this.avatarRig.object3D.matrixWorld).multiply(e),Object(o.l)(this.viewingRig.object3D,this.viewingRig.object3D.matrixWorld),this.avatarPOV.object3D.quaternion.copy(this.viewingCamera.object3D.quaternion),this.avatarPOV.object3D.matrixNeedsUpdate=!0;else if(this.mode===b){this.avatarPOVRotator.on=!1,this.viewingCameraRotator.on=!1;const e=this.userinput.get(t.is("entered")?a.a.actions.cameraDelta:a.a.actions.lobbyCameraDelta);if(e){const t=(AFRAME.utils.device.isMobile()?-.6:1)*e[0]||0,n=(AFRAME.utils.device.isMobile()?-1.2:1)*e[1]||0;this.horizontalDelta=(this.horizontalDelta+t)/2,this.verticalDelta=(this.verticalDelta+n)/2}else(Math.abs(this.verticalDelta)>1e-4||Math.abs(this.horizontalDelta)>1e-4)&&(this.verticalDelta=S*this.verticalDelta,this.horizontalDelta=S*this.horizontalDelta);const i=.001*this.userinput.get(a.a.actions.inspectZoom);i?this.inspectZoom=i+5*this.inspectZoom/6:Math.abs(this.inspectZoom)>1e-4&&(this.inspectZoom=S*this.inspectZoom);const o=this.userinput.get(a.a.actions.inspectPanY)||0;this.userinput.get(a.a.actions.resetInspectView)&&p(this.viewingRig.object3D,this.viewingCamera.object3D,this.inspected,1),(Math.abs(this.verticalDelta)>.001||Math.abs(this.horizontalDelta)>.001||Math.abs(this.inspectZoom)>.001||Math.abs(o)>1e-4)&&h(this.inspected,this.viewingRig.object3D,this.viewingCamera.object3D,this.horizontalDelta,this.verticalDelta,this.inspectZoom,n,o)}t.audioListener&&this.avatarPOV&&(this.mode!==m&&this.mode!==b||t.audioListener.parent===this.avatarPOV.object3D?this.mode!==f&&this.mode!==g||t.audioListener.parent===this.viewingCamera.object3D||this.viewingCamera.object3D.add(t.audioListener):this.avatarPOV.object3D.add(t.audioListener))}}}(),n in t?Object.defineProperty(t,n,{value:s,enumerable:!0,configurable:!0,writable:!0}):t[n]=s,this.enableLights="true"===localStorage.getItem("show-background-while-inspecting"),this.verticalDelta=0,this.horizontalDelta=0,this.inspectZoom=0,this.batchManagerSystem=e,this.mode=v,this.snapshot={audioTransform:new THREE.Matrix4,matrixWorld:new THREE.Matrix4},this.audioListenerTargetTransform=new THREE.Matrix4,Object(i.a)().then(()=>{this.avatarPOV=document.getElementById("avatar-pov-node"),this.avatarRig=document.getElementById("avatar-rig"),this.viewingCamera=document.getElementById("viewing-camera"),this.viewingRig=document.getElementById("viewing-rig");const e=new THREE.Mesh(new THREE.BoxGeometry(100,100,100),new THREE.MeshBasicMaterial({color:131586,side:THREE.BackSide}));e.layers.set(w),this.viewingRig.object3D.add(e)})}nextMode(){this.mode!==b?c&&this.mode!==v&&(this.mode=y[this.mode]||0,this.mode===m?AFRAME.scenes[0].renderer.vr.setPoseTarget(this.avatarPOV.object3D):this.mode!==f&&this.mode!==g||AFRAME.scenes[0].renderer.vr.setPoseTarget(this.viewingCamera.object3D)):this.uninspect()}inspect(e,t,n){if(this.verticalDelta=0,this.horizontalDelta=0,this.inspectZoom=0,this.temporarilyDisableRegularExit=n,this.mode===b)return;const i=AFRAME.scenes[0];i.object3D.traverse(_),i.classList.add("hand-cursor"),i.classList.remove("no-cursor"),this.snapshot.mode=this.mode,this.mode=b,this.inspected=e;const a=i.is("vr-mode"),s=a?i.renderer.vr.getCamera(i.camera):i.camera;this.snapshot.mask=s.layers.mask,a&&(this.snapshot.mask0=s.cameras[0].layers.mask,this.snapshot.mask1=s.cameras[1].layers.mask),this.enableLights||this.hideEverythingButThisObject(e),this.viewingCamera.object3D.updateMatrices(),this.snapshot.matrixWorld.copy(this.viewingRig.object3D.matrixWorld),p(this.viewingRig.object3D,this.viewingCamera.object3D,this.inspected,t||1),this.snapshot.audio=function(e){let t;return e.traverse(e=>{t||"Audio"!==e.type||(t=e)}),t}(e),this.snapshot.audio&&(this.snapshot.audio.updateMatrices(),this.snapshot.audioTransform.copy(this.snapshot.audio.matrixWorld),i.audioListener.updateMatrices(),this.audioListenerTargetTransform.makeTranslation(0,0,1).premultiply(i.audioListener.matrixWorld),Object(o.l)(this.snapshot.audio,this.audioListenerTargetTransform))}uninspect(){if(this.temporarilyDisableRegularExit=!1,this.mode!==b)return;const e=AFRAME.scenes[0];e.is("entered")&&(e.classList.remove("hand-cursor"),e.classList.add("no-cursor")),this.showEverythingAsNormal(),this.inspected=null,this.snapshot.audio&&(Object(o.l)(this.snapshot.audio,this.snapshot.audioTransform),this.snapshot.audio=null),this.mode=this.snapshot.mode,this.snapshot.mode===v&&Object(o.l)(this.viewingRig.object3D,this.snapshot.matrixWorld),this.snapshot.mode=null,this.tick(AFRAME.scenes[0])}hideEverythingButThisObject(e){e.traverse(x);const t=AFRAME.scenes[0],n=t.is("vr-mode"),i=n?t.renderer.vr.getCamera(t.camera):t.camera;i.layers.set(w),n&&(i.cameras[0].layers.set(w),i.cameras[1].layers.set(w))}showEverythingAsNormal(){this.inspected&&this.inspected.traverse(A);const e=AFRAME.scenes[0],t=e.is("vr-mode"),n=t?e.renderer.vr.getCamera(e.camera):e.camera;n.layers.mask=this.snapshot.mask,t&&(n.cameras[0].layers.mask=this.snapshot.mask0,n.cameras[1].layers.mask=this.snapshot.mask1)}}},49:function(e,t,n){"use strict";function i(e,t){e.material&&(Array.isArray(e.material)?e.material.forEach(t):t(e.material))}function o(e,t){if(e.material)return Array.isArray(e.material)?e.material.map(t):t(e.material)}n.d(t,"a",function(){return i}),n.d(t,"b",function(){return o})},51:function(e,t,n){"use strict";var i=n(139),o=n(140),a=n(79),s=n.n(a),r=n(66),c=n.n(r),l=n(77),d=n(9),u=n(76),h=n.n(u);function p(e,t,n,i,o,a,s){try{var r=e[a](s),c=r.value}catch(e){return void n(e)}r.done?t(c):Promise.resolve(c).then(i,o)}const m=["Baers-Pochard","Baikal-Teal","Barrows-Goldeneye","Blue-Billed","Blue-Duck","Blue-Winged","Brown-Teal","Bufflehead","Canvasback","Cape-Shoveler","Chestnut-Teal","Chiloe-Wigeon","Cinnamon-Teal","Comb-Duck","Common-Eider","Common-Goldeneye","Common-Merganser","Common-Pochard","Common-Scoter","Common-Shelduck","Cotton-Pygmy","Crested-Duck","Crested-Shelduck","Eatons-Pintail","Falcated","Ferruginous","Freckled-Duck","Gadwall","Garganey","Greater-Scaup","Green-Pygmy","Grey-Teal","Hardhead","Harlequin","Hartlaubs","Hooded-Merganser","Hottentot-Teal","Kelp-Goose","King-Eider","Lake-Duck","Laysan-Duck","Lesser-Scaup","Long-Tailed","Maccoa-Duck","Mallard","Mandarin","Marbled-Teal","Mellers-Duck","Merganser","Northern-Pintail","Orinoco-Goose","Paradise-Shelduck","Plumed-Whistler","Puna-Teal","Pygmy-Goose","Radjah-Shelduck","Red-Billed","Red-Crested","Red-Shoveler","Ring-Necked","Ringed-Teal","Rosy-Billed","Ruddy-Shelduck","Salvadoris-Teal","Scaly-Sided","Shelduck","Shoveler","Silver-Teal","Smew","Spectacled-Eider","Spot-Billed","Spotted-Whistler","Steamerduck","Stellers-Eider","Sunda-Teal","Surf-Scoter","Tufted-Duck","Velvet-Scoter","Wandering-Whistler","Whistling-duck","White-Backed","White-Cheeked","White-Winged","Wigeon","Wood-Duck","Yellow-Billed"];function f(e){return e[Math.floor(Math.random()*e.length)]}function g(){return b.apply(this,arguments)}function b(){var e;return e=function*(){const e=(yield Object(d.d)("/api/v1/media/search?filter=default&source=avatar_listings")).entries;return 0===e.length?new URL(h.a,location.href).href:f(e.map(e=>e.id))},(b=function(){var t=this,n=arguments;return new Promise(function(i,o){var a=e.apply(t,n);function s(e){p(a,i,o,s,r,"next",e)}function r(e){p(a,i,o,s,r,"throw",e)}s(void 0)})}).apply(this,arguments)}function v(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},i=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),i.forEach(function(t){E(e,t,n[t])})}return e}function y(e,t,n,i,o,a,s){try{var r=e[a](s),c=r.value}catch(e){return void n(e)}r.done?t(c):Promise.resolve(c).then(i,o)}function w(e){return function(){var t=this,n=arguments;return new Promise(function(i,o){var a=e.apply(t,n);function s(e){y(a,i,o,s,r,"next",e)}function r(e){y(a,i,o,s,r,"throw",e)}s(void 0)})}}function E(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n.d(t,"a",function(){return R}),n.d(t,"b",function(){return M});const _="___hubs_store",x=Symbol(),A="ret-oauth-flow-account-credentials",S=new i.Validator,R={id:"/HubsStore",definitions:{profile:{type:"object",additionalProperties:!1,properties:{displayName:{type:"string",pattern:"^[A-Za-z0-9 -]{3,32}$"},avatarId:{type:"string"},personalAvatarId:{type:"string"}}},credentials:{type:"object",additionalProperties:!1,properties:{token:{type:["null","string"]},email:{type:["null","string"]}}},activity:{type:"object",additionalProperties:!1,properties:{hasFoundFreeze:{type:"boolean"},hasChangedName:{type:"boolean"},hasAcceptedProfile:{type:"boolean"},lastEnteredAt:{type:"string"},hasPinned:{type:"boolean"},hasRotated:{type:"boolean"},hasRecentered:{type:"boolean"},hasScaled:{type:"boolean"},hasHoveredInWorldHud:{type:"boolean"},hasOpenedShare:{type:"boolean"},entryCount:{type:"number"}}},settings:{type:"object",additionalProperties:!1,properties:{lastUsedMicDeviceId:{type:"string"}}},preferences:{type:"object",additionalProperties:!1,properties:{muteMicOnEntry:{type:"bool"},enableOnScreenJoystickLeft:{type:"bool"},enableOnScreenJoystickRight:{type:"bool"},onlyShowNametagsInFreeze:{type:"bool"},allowMultipleHubsInstances:{type:"bool"},maxResolutionWidth:{type:"number"},maxResolutionHeight:{type:"number"},globalVoiceVolume:{type:"number"},globalMediaVolume:{type:"number"},snapRotationDegrees:{type:"number"},materialQualitySetting:{type:"string"},disableMovement:{type:"bool"},disableBackwardsMovement:{type:"bool"},disableStrafing:{type:"bool"},disableTeleporter:{type:"bool"}}},confirmedDiscordRooms:{type:"array",items:{type:"string"}},confirmedBroadcastedRooms:{type:"array",items:{type:"string"}},uploadPromotionTokens:{type:"array",items:{type:"object",additionalProperties:!1,properties:{fileId:{type:"string"},promotionToken:{type:"string"}}}},creatorAssignmentTokens:{type:"array",items:{type:"object",additionalProperties:!1,properties:{hubId:{type:"string"},creatorAssignmentToken:{type:"string"}}}},embedTokens:{type:"array",items:{type:"object",additionalProperties:!1,properties:{hubId:{type:"string"},embedToken:{type:"string"}}}},onLoadActions:{type:"array",items:{type:"object",additionalProperties:!1,properties:{action:{type:"string"},args:{type:"object"}}}}},type:"object",properties:{profile:{$ref:"#/definitions/profile"},credentials:{$ref:"#/definitions/credentials"},activity:{$ref:"#/definitions/activity"},settings:{$ref:"#/definitions/settings"},preferences:{$ref:"#/definitions/preferences"},confirmedDiscordRooms:{$ref:"#/definitions/confirmedDiscordRooms"},confirmedBroadcastedRooms:{$ref:"#/definitions/confirmedBroadcastedRooms"},uploadPromotionTokens:{$ref:"#/definitions/uploadPromotionTokens"},creatorAssignmentTokens:{$ref:"#/definitions/creatorAssignmentTokens"},embedTokens:{$ref:"#/definitions/embedTokens"},onLoadActions:{$ref:"#/definitions/onLoadActions"}},additionalProperties:!1};class M extends l.a{constructor(){var e;super(),e=this,E(this,"_signOutOnExpiredAuthToken",()=>{if(!this.state.credentials.token)return;1e3*c()(this.state.credentials.token).exp<=Date.now()&&this.update({credentials:{token:null,email:null}})}),E(this,"initProfile",w(function*(){e._shouldResetAvatarOnInit?yield e.resetToRandomDefaultAvatar():e.update({profile:v({avatarId:yield g()},e.state.profile||{})}),e.state.activity.hasChangedName||e.update({profile:{displayName:`${f(m)}-${Math.floor(1e4+1e4*Math.random())}`}})})),E(this,"resetToRandomDefaultAvatar",w(function*(){e.update({profile:v({},e.state.profile||{},{avatarId:yield g()})})})),null===localStorage.getItem(_)&&localStorage.setItem(_,JSON.stringify({})),window.addEventListener("storage",e=>{e.key===_&&(delete this[x],this.dispatchEvent(new CustomEvent("statechanged")))}),this.update({activity:{},settings:{},credentials:{},profile:{},confirmedDiscordRooms:[],confirmedBroadcastedRooms:[],uploadPromotionTokens:[],creatorAssignmentTokens:[],embedTokens:[],onLoadActions:[],preferences:{}}),this._shouldResetAvatarOnInit=!1;const t=s.a.getJSON(A);t&&(this.update({credentials:t}),this._shouldResetAvatarOnInit=!0,s.a.remove(A)),this._signOutOnExpiredAuthToken()}get state(){return this.hasOwnProperty(x)||(this[x]=JSON.parse(localStorage.getItem(_))),this[x]}get credentialsAccountId(){return this.state.credentials.token?c()(this.state.credentials.token).sub:null}resetConfirmedBroadcastedRooms(){this.clearStoredArray("confirmedBroadcastedRooms")}resetTipActivityFlags(){this.update({activity:{hasRotated:!1,hasPinned:!1,hasRecentered:!1,hasScaled:!1,entryCount:0}})}bumpEntryCount(){const e=this.state.activity.entryCount||0;this.update({activity:{entryCount:e+1}})}enqueueOnLoadAction(e,t){this.update({onLoadActions:[{action:e,args:t}]})}executeOnLoadActions(e){for(let t=0;t<this.state.onLoadActions.length;t++){const{action:n,args:i}=this.state.onLoadActions[t];"emit_scene_event"===n&&e.emit(i.event,i.detail)}this.clearOnLoadActions()}clearOnLoadActions(){this.clearStoredArray("onLoadActions")}clearStoredArray(e){const t={};t[e]=[],this.update(t,{arrayMerge:(e,t)=>t})}update(e,t){const n=Object(o.a)(this.state,e,t),{valid:i}=S.validate(n,R);if(!i)throw new Error("Write to store failed schema validation.");return localStorage.setItem(_,JSON.stringify(n)),delete this[x],void 0!==e.profile&&this.dispatchEvent(new CustomEvent("profilechanged")),this.dispatchEvent(new CustomEvent("statechanged")),n}}},54:function(e,t,n){e.exports=n.p+"assets/images/app-logo-157c06cff6c80227eb577f35c79e58b6.png"},55:function(e,t,n){e.exports=n.p+"assets/images/company-logo-8f6f7c3b303004256295b45c2eee5117.png"},56:function(e,t,n){e.exports=n.p+"assets/images/editor-logo-6f885a1543496ebc23a21b7fea82b255.png"},57:function(e,t,n){"use strict";function i(e){const t=e.sceneEl.is("frozen"),n=e.components.pinnable&&e.components.pinnable.data.pinned,i=!!e.components["super-spawner"],o=window.APP.hubChannel.can("spawn_and_move_media")&&(!n||window.APP.hubChannel.can("pin_objects"));return(i||!n||t)&&o}function o(e){const t=e.components.pinnable&&e.components.pinnable.data.pinned,n=e&&e.components.networked&&e.components.networked.data.template,i="#interactable-camera"===n,o="#interactable-pen"===n;return e.components.tags&&e.components.tags.data.holdableButton||window.APP.hubChannel.can("spawn_and_move_media")&&(!t||window.APP.hubChannel.can("pin_objects"))&&(!i||window.APP.hubChannel.can("spawn_camera"))&&(!o||window.APP.hubChannel.can("spawn_drawing"))}function a(e,t){const n="string"==typeof e,i=n?e:e.component;return n?t.components.findIndex(e=>e===i):t.components.findIndex(t=>t.component===i&&t.property===e.property)}n.d(t,"d",function(){return i}),n.d(t,"c",function(){return o}),n.d(t,"b",function(){return m}),n.d(t,"a",function(){return g});let s=null;function r(e,t){null===s&&function(){s={};const{schemaDict:e}=NAF.schemas;for(const t in e){if(!e.hasOwnProperty(t))continue;const n=e[t];s[t]=(n.nonAuthorizedComponents||[]).map(e=>a(e,n)).map(e=>e.toString())}}();const n=s[e];for(const e in t.components)t.components.hasOwnProperty(e)&&(n.includes(e)||(t.components[e]=null));return t}function c(e,t,n){const{template:i,creator:o,isPinned:a}=e,s=t===o;return!!i.endsWith("-waypoint-avatar")||(i.endsWith("-avatar")?s:i.endsWith("-media")?(!a||n.pin_objects)&&(s||n.spawn_and_move_media):i.endsWith("-camera")?s||n.spawn_camera:!(!i.endsWith("-pen")&&!i.endsWith("-drawing"))&&(s||n.spawn_drawing))}function l(e){const t=NAF.connection.adapter.getPendingDataForNetworkId(e);if(t){const{template:e,creator:n}=t,i=NAF.schemas.schemaDict[e],o=t.components[a("pinnable",i)];return{template:e,creator:n,isPinned:o&&o.pinned}}const n=NAF.entities.getEntity(e);if(!n)return null;const{template:i,creator:o}=n.components.networked.data;return{template:i,creator:o,isPinned:n.components.pinnable&&n.components.pinnable.data.pinned}}function d(e,t,n){const i=l(e.networkId);if(!i)return!1;if(c(i,t,n))return!0;{const{template:t}=i;return r(t,e),!0}}const u={};function h(e,t){if(u[t.networkId]){const e=u[t.networkId].data,n=e.components;Object.assign(e,t),e.components=Object.assign(n,t.components)}else u[t.networkId]={dataType:"u",data:t,clientId:e.clientId,from_session_id:e.from_session_id}}const p={};function m(e){const{dataType:t,from_session_id:n}=e;if("u"===t&&e.data.isFirstSync&&!e.data.persistent)return e;const i=window.APP.hubChannel.presence.state[n];if(!i)return p;const o=i.metas[0].permissions;if("um"===t){let t=!1,i=!1;for(const a in e.data.d){if(!e.data.d.hasOwnProperty(a))continue;const s=e.data.d[a];if(s.persistent&&!NAF.entities.getEntity(s.networkId))h(e,s),e.data.d[a]=null,i=!0;else{d(s,n,o)||(e.data.d[a]=null,t=!0)}}return(t||i)&&(e.data.d=e.data.d.filter(e=>null!=e)),e}if("u"===t){if(e.data.persistent&&!NAF.entities.getEntity(e.data.networkId))return u[e.data.networkId]=e,p;return d(e.data,n,o)?e:p}if("r"===t){const t=l(e.data.networkId);return t&&c(t,n,o)?e:p}return e}const f="phx-reliable";function g(e){u[e]&&(NAF.connection.adapter.onData(m(u[e]),f),delete u[e])}},63:function(e,t,n){e.exports={spokeButton:"scene-ui__spokeButton__3S8NT",tweetButton:"scene-ui__tweetButton__NAR59",createButton:"scene-ui__createButton__1DQtQ",optionsButton:"scene-ui__optionsButton__lzUHO",ui:"scene-ui__ui__3JHPz",logoTagline:"scene-ui__logoTagline___LR3I",whiteOverlay:"scene-ui__whiteOverlay__1Pz3I",grid:"scene-ui__grid__34j9h",mainPanel:"scene-ui__mainPanel__IuYxi",logo:"scene-ui__logo__26JnS",info:"scene-ui__info__3Nznh",name:"scene-ui__name__2-7V_",attribution:"scene-ui__attribution__3nlIi",screenshot:"scene-ui__screenshot__279rF",screenshotHidden:"scene-ui__screenshotHidden__3nHWx",spoke:"scene-ui__spoke___KrWT",madeWith:"scene-ui__madeWith__A5stW",createButtons:"scene-ui__createButtons__1COLQ",unavailable:"scene-ui__unavailable__21hgO"}},65:function(e,t,n){"use strict";n.d(t,"a",function(){return r});var i=n(99),o=n.n(i),a=n(4);const s=window.ga;function r(e,t){const n=a.a.SENTRY_DSN,i=a.a.GA_TRACKING_ID;n&&(console.log("Tracking: Sentry DSN: "+n),o.a.config(n).install()),s&&i&&(console.log("Tracking: Google Analytics ID: "+i),s("create",i,"auto"),e&&s("set","page",e),t&&s("set","title",t),s("send","pageview"))}},67:function(e,t,n){e.exports=n.p+"assets/sfx/tick-b0fcbf1d9b6f92a24bec12f9bae1e42a.mp3"},722:function(e,t,n){e.exports=n.p+"assets/images/twitter-b2e343d39bc8d3294292e506c7173f71.svg"},73:function(e,t,n){"use strict";n.d(t,"a",function(){return a}),n.d(t,"b",function(){return s});const i=function(){const e=new THREE.Box3;return function(t,n){return n.makeEmpty(),t.traverse(t=>{const i=t.geometry;null!=i&&(null==i.boundingBox&&i.computeBoundingBox(),n.union(e.copy(i.boundingBox).applyMatrix4(t.matrixWorld)))}),n}}(),o=new THREE.Euler;function a(e,t,n){const a=new THREE.Box3;return o.copy(e.object3D.rotation),e.object3D.rotation.set(0,0,0),e.object3D.updateMatrices(!0,!0),t.updateMatrices(!0,!0),t.updateMatrixWorld(!0),i(t,a),a.isEmpty()||(n||(e.object3D.worldToLocal(a.min),e.object3D.worldToLocal(a.max)),e.object3D.rotation.copy(o),e.object3D.matrixNeedsUpdate=!0),t.matrixWorldNeedsUpdate=!0,t.updateMatrices(),a}function s(e,t){if(t.isEmpty())return 1;const{max:n,min:i}=t,o=Math.abs(n.x-i.x),a=Math.abs(n.y-i.y),s=Math.abs(n.z-i.z);return e/Math.max(o,a,s)}},76:function(e,t,n){e.exports=n.p+"assets/models/DuckyMesh-04f978955fb12d48f7ff8c59a05de439.glb"},81:function(e,t,n){"use strict";function i(){return new Promise(e=>{setTimeout(e,0)})}n.d(t,"a",function(){return i})},82:function(e,t,n){"use strict";n.d(t,"a",function(){return S}),n.d(t,"b",function(){return M});var i=n(81),o=n(49),a=n(223),s=n.n(a),r=n(98),c=n(18),l=n(12),d=n(114),u=n(154),h=n(13);function p(e,t,n,i,o,a,s){try{var r=e[a](s),c=r.value}catch(e){return void n(e)}r.done?t(c):Promise.resolve(c).then(i,o)}function m(e){return function(){var t=this,n=arguments;return new Promise(function(i,o){var a=e.apply(t,n);function s(e){p(a,i,o,s,r,"next",e)}function r(e){p(a,i,o,s,r,"throw",e)}s(void 0)})}}THREE.Mesh.prototype.raycast=u.b;const f=new class{constructor(){var e,t,n;e=this,t="cache",n=new Map,t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n}set(e,t){return this.cache.set(e,{gltf:t,count:0}),this.retain(e)}has(e){return this.cache.has(e)}get(e){return this.cache.get(e)}retain(e){const t=this.cache.get(e);return t.count++,t}release(e){const t=this.cache.get(e);t?(t.count--,t.count<=0&&(t.gltf.scene.traverse(h.f),this.cache.delete(e))):console.error(`Releasing uncached gltf ${e}`)}},g=new Map,b=Object(d.a)(new s.a);function v(e,t,n){if(!AFRAME.components[t])throw new Error(`Inflator failed. "${t}" component does not exist.`);if(AFRAME.components[t].multiple&&Array.isArray(n))for(let i=0;i<n.length;i++)e.setAttribute(t+"__"+i,n[i]);else e.setAttribute(t,n)}function y(e){return{animations:e.scene.animations,scene:Object(h.e)(e.scene)}}function w(e){const t=e.userData.gltfExtensions&&(e.userData.gltfExtensions.MOZ_hubs_components||e.userData.gltfExtensions.HUBS_components),n=e.userData.components;return t||n}AFRAME.GLTFModelPlus={components:{},registerComponent(e,t,n){n=n||v,AFRAME.GLTFModelPlus.components[e]={inflator:n,componentName:t}}};const E=function(e,t,n,i,o=1){"Chest"===t.name?t.name="Spine":"Root Scene"===t.name?t.name="AvatarRoot":"Bot_Skinned"===t.name&&(t.name="AvatarMesh");const a=[],s=t.children.slice(0);for(const t of s){const i=E(e,t,n);i&&a.push(i)}const r=w(t);if(!(!!r||t.name in n)&&!a.length&&!i)return null;const c=document.createElement("a-entity");c.append.apply(c,a);const l=(t.name||t.uuid).replace(/[^\w-]/g,"");c.classList.add(l),"YXZ"!==t.rotation.order&&t.rotation.setFromQuaternion(t.quaternion,"YXZ"),c.object3D.position.copy(t.position),c.object3D.rotation.copy(t.rotation),c.object3D.scale.copy(t.scale).multiplyScalar(o),c.object3D.matrixNeedsUpdate=!0,t.matrixAutoUpdate=!1,t.matrix.identity(),t.matrix.decompose(t.position,t.rotation,t.scale),c.setObject3D(t.type.toLowerCase(),t),r&&"nav-mesh"in r&&c.setObject3D("mesh",t),c.object3D.name=t.name,c.object3D.uuid=t.uuid,t.uuid=THREE.Math.generateUUID(),t.animations&&(t.parent.animations=t.animations);const d=t.userData.gltfIndex;return void 0!==d&&(e[d]=c),c};function _(){return(_=m(function*(e,t){let n=!0;const i=[];e.object3D.traverse(function(){var e=m(function*(e){const o={};o.promise=new Promise(e=>o.resolve=e),i.push(o),n||(yield i.shift().promise),n=!1;const a=w(e),s=e.el;if(a&&s)for(const e in a)if(a.hasOwnProperty(e)&&AFRAME.GLTFModelPlus.components.hasOwnProperty(e)){const{componentName:n,inflator:i}=AFRAME.GLTFModelPlus.components[e];yield i(s,n,a[e],a,t)}o.resolve()});return function(t){return e.apply(this,arguments)}}()),yield i.shift().promise})).apply(this,arguments)}function x(e,t,n){const i=e.querySelectorAll("."+t);for(const e of i){const t=n.cloneNode(!0);for(const n of t.attributes){const{name:t,value:i}=n;e.setAttribute(t,i)}for(;t.children.length>0;)e.appendChild(t.children[0])}}function A(e){return e.extensions&&e.extensions.MOZ_hubs_components?e.extensions.MOZ_hubs_components:e.extensions&&e.extensions.HUBS_components?e.extensions.HUBS_components:e.extras&&e.extras.gltfExtensions&&e.extras.gltfExtensions.MOZ_hubs_components?e.extras.gltfExtensions.MOZ_hubs_components:void 0}function S(e,t,n,i,o){return R.apply(this,arguments)}function R(){return(R=m(function*(e,t,n,i,a){let s,d=e;t&&(t.includes("model/gltf+zip")||t.includes("application/x-zip-compressed"))&&(s=yield b(d),d=s["scene.gtlf"]);const u=new THREE.LoadingManager;u.setURLModifier(Object(l.b)(d));const h=new THREE.GLTFLoader(u),p=yield new Promise((e,t)=>h.createParser(d,e,i,t));p.textureLoader=c.l,a&&(p.json=a(p.json));let m=0;p.json.extensions&&p.json.extensions.MOZ_hubs_components&&p.json.extensions.MOZ_hubs_components.hasOwnProperty("version")&&(m=p.json.extensions.MOZ_hubs_components.version),function(e,t){if(e<2){const e=t.nodes.find(e=>{const t=A(e);return t&&t.heightfield&&t["nav-mesh"]});e&&(e.extensions&&e.extensions.MOZ_hubs_components?delete e.extensions.MOZ_hubs_components.heightfield:e.extensions&&e.extensions.HUBS_components?delete e.extensions.HUBS_components.heightfield:e.extras&&e.extras.gltfExtensions&&e.extras.gltfExtensions.MOZ_hubs_components&&delete e.extras.gltfExtensions.MOZ_hubs_components)}if(e<4&&t.nodes)for(const e of t.nodes){const t=A(e);if(!t)continue;const n=t["spot-light"]||t["point-light"];n&&0===n.range&&(n.decay=0)}}(m,p.json);const f=p.json.materials;if(f)for(let e=0;e<f.length;e++){const t=f[e];if(t.extensions&&t.extensions.MOZ_alt_materials&&void 0!==t.extensions.MOZ_alt_materials[n]){const i=t.extensions.MOZ_alt_materials[n];f[e]=f[i]}}const g=p.json.nodes;if(g)for(let e=0;e<g.length;e++){const t=g[e];t.extras||(t.extras={}),t.extras.gltfIndex=e}const v=yield new Promise(p.parse.bind(p));return v.scene.traverse(e=>{e.matrixAutoUpdate=THREE.Object3D.DefaultMatrixAutoUpdate,e.material=Object(o.b)(e,e=>e.isMeshStandardMaterial&&"KHR_materials_unlit"===n?r.a.fromStandardMaterial(e):e)}),s&&Object.keys(s).forEach(URL.revokeObjectURL),v.scene.animations=v.animations,v})).apply(this,arguments)}function M(e){return P.apply(this,arguments)}function P(){return(P=m(function*(e,t=null,n=!1,i=null){const o=window.APP&&"low"===window.APP.quality?"KHR_materials_unlit":"pbrMetallicRoughness";if(n){if(f.has(e))return f.retain(e),y(f.get(e).gltf);if(g.has(e)){const t=yield g.get(e);return f.retain(e),y(t)}{const n=S(e,t,o,null,i);g.set(e,n);const a=yield n;return g.delete(e),f.set(e,a),y(a)}}return S(e,t,o,null,i)})).apply(this,arguments)}function C(e){if(e&&"#"===e.charAt(0)){const t=document.getElementById(e.substring(1));if(t)return t.getAttribute("src")}return e}AFRAME.registerComponent("gltf-model-plus",{schema:{src:{type:"string"},contentType:{type:"string"},useCache:{default:!0},inflate:{default:!1},batch:{default:!1},modelToWorldScale:{type:"number",default:1}},init(){this.jsonPreprocessor=null,this.loadTemplates()},update(){this.applySrc(C(this.data.src),this.data.contentType)},remove(){this.data.batch&&this.model&&this.el.sceneEl.systems["hubs-systems"].batchManagerSystem.removeObject(this.el.object3DMap.mesh);const e=C(this.data.src);e&&f.release(e)},loadTemplates(){this.templates={},this.el.querySelectorAll(":scope > template").forEach(e=>{const t=document.importNode(e.firstElementChild||e.content.firstElementChild,!0);this.templates[e.getAttribute("data-name")]=t})},applySrc(e,t){var n=this;return m(function*(){try{if(e===n.lastSrc)return;const o=n.lastSrc;if(n.lastSrc=e,!e)return void(n.inflatedEl&&(console.warn("gltf-model-plus set to an empty source, unloading inflated model."),n.disposeLastInflatedEl()));n.el.emit("model-loading");const a=yield M(e,t,n.data.useCache,n.jsonPreprocessor);if(e!=n.lastSrc)return;n.disposeLastInflatedEl(),n.model=a.scene||a.scenes[0],n.data.batch&&n.el.sceneEl.systems["hubs-systems"].batchManagerSystem.addObject(n.model),a.animations.length>0?(n.el.setAttribute("animation-mixer",{}),n.el.components["animation-mixer"].initMixer(n.model.animations)):n.model.traverse(e=>{const t=e.isMesh&&e.geometry.isBufferGeometry,n=t&&e.geometry.boundsTree;if(t&&!n&&e.geometry.attributes.position){const t=e.geometry,n=t.index?t.index.count/3:t.attributes.position.count/3;n>1e3&&n<1e6&&(t.boundsTree=new u.a(e.geometry,{strategy:0,maxDepth:30}))}});const s={};let r=n.model;if(n.data.inflate&&(n.inflatedEl=E(s,n.model,n.templates,!0,n.data.modelToWorldScale))){if(n.el.appendChild(n.inflatedEl),(r=n.inflatedEl.object3D).visible=!1,yield Object(i.a)(),e!=n.lastSrc)return;yield function(e,t){return _.apply(this,arguments)}(n.inflatedEl,s);for(const e in n.templates)x(n.el,e,n.templates[e])}const c=[];r.traverse(e=>{const t=e.el;t&&c.push(()=>e.el=t)});const l=n.el.sceneEl.components["environment-map"];l&&l.applyEnvironmentMap(r),o&&f.release(o),n.el.setObject3D("mesh",r),c.forEach(e=>e()),r.visible=!0,n.el.emit("model-loaded",{format:"gltf",model:n.model})}catch(t){f.release(e),console.error("Failed to load glTF model",t,n),n.el.emit("model-error",{format:"gltf",src:e})}})()},disposeLastInflatedEl(){this.inflatedEl&&(this.inflatedEl.parentNode.removeChild(this.inflatedEl),this.inflatedEl.object3D.traverse(e=>{e.material&&e.material.dispose&&e.material.dispose(),e.geometry&&(e.geometry.dispose&&e.geometry.dispose(),e.geometry.boundsTree=null)}),delete this.inflatedEl,this.el.removeAttribute("animation-mixer"))}})},89:function(e,t,n){"use strict";function i(e,t){for(;e&&(!e.components||!e.components[t]);)e=e.parentNode;return e}n.d(t,"a",function(){return i})},9:function(e,t,n){"use strict";var i=n(107);const o=["able","absolute","acceptable","acclaimed","accomplished","accurate","aching","acrobatic","adorable","adventurous","basic","belated","beloved","calm","candid","capital","carefree","caring","cautious","celebrated","charming","daring","darling","dearest","each","eager","early","earnest","easy","easygoing","ecstatic","edible","fabulous","fair","faithful","familiar","famous","fancy","fantastic","far","generous","gentle","genuine","giant","handmade","handsome","handy","happy","icy","ideal","identical","keen","lasting","lavish","magnificent","majestic","mammoth","marvelous","natural","obedient","palatable","parched","passionate","pastel","peaceful","perfect","perfumed","quaint","qualified","radiant","rapid","rare","safe","sandy","satisfied","scaly","scarce","scared","scary","scented","scientific","secret","sentimental","talkative","tangible","tart","tasty","tattered","teeming","ultimate","uncommon","unconscious","understated","warm","active","adept","admirable","admired","adorable","adored","advanced","affectionate","beneficial","best","better","big","cheerful","cheery","chief","chilly","classic","clean","clear","clever","decent","decisive","deep","defiant","definitive","delectable","delicious","elaborate","elastic","elated","elegant","elementary","elliptical","fast","favorable","favorite","fearless","gifted","glamorous","gleaming","glittering","harmonious","imaginative","immense","jealous","kind","leafy","legal","mature","mean","nautical","neat","necessary","needy","oddball","offbeat","periodic","perky","personal","pertinent","petty","quarterly","ready","real","realistic","reasonable","regal","serene","shabby","sharp","shiny","showy","shy","silky","tempting","tense","terrific","testy","thankful","uniform","unique","vast","weary","wee","welcome","agile","alarmed","alert","alive","bleak","blissful","blushing","coarse","colorful","colossal","comfortable","compassionate","complete","delightful","dense","dependable","dependent","descriptive","detailed","determined","devoted","different","eminent","emotional","enchanted","enchanting","energetic","enormous","fine","finished","firm","firsthand","fixed","flashy","flawless","glorious","glossy","golden","good","gorgeous","graceful","healthy","heartfelt","hearty","helpful","impartial","impressive","jolly","jovial","lighthearted","likable","lined","mellow","melodic","memorable","mild","new","opulent","playful","pleasant","pleasing","plump","plush","polished","polite","reliable","relieved","remarkable","remote","respectful","responsible","simple","simplistic","sizzling","sleepy","slight","slim","smart","smooth","snappy","snoopy","thirsty","this","thorough","those","thoughtful","united","vibrant","vicious","wellmade","whimsical","whirlwind","zesty","amazing","ambitious","ample","amused","amusing","ancient","angelic","antique","bold","bossy","both","bouncy","bountiful","complex","conscious","considerate","constant","content","conventional","cooked","cool","cooperative","diligent","dimwitted","direct","discrete","envious","essential","ethical","euphoric","flippant","fluffy","flustered","focused","fond","gracious","grand","grandiose","granular","grateful","grave","great","hidden","high","hilarious","homely","incomparable","incredible","infamous","joyful","lively","loathsome","lonely","long","mindless","miniature","minor","misty","next","nice","nifty","nimble","orderly","organic","ornate","popular","posh","positive","potable","powerful","powerless","precious","present","prestigious","quick","rewarding","rich","right","sociable","soft","solid","some","sophisticated","soulful","sparkling","spectacular","speedy","spicy","spiffy","spirited","spiteful","splendid","spotless","spry","thrifty","tidy","tight","timely","tinted","unruly","untimely","violet","wicked","wide","wild","willing","winding","windy","zigzag","apprehensive","appropriate","artistic","assured","astonishing","bright","brilliant","bronze","coordinated","courageous","courteous","crafty","crazy","creamy","creative","crisp","distant","distinct","downright","evergreen","everlasting","every","evil","excellent","excitable","exemplary","exhausted","forthright","fortunate","fragrant","frank","free","frequent","fresh","friendly","frightened","frigid","gripping","grounded","honest","honorable","honored","hopeful","hospitable","hot","huge","infatuated","infinite","informal","insistent","instructive","juicy","jumbo","knowing","knowledgeable","longterm","loud","lovable","loving","modern","modest","monumental","normal","notable","outgoing","precious","pretty","prickly","primary","pristine","private","prize","productive","profitable","quiet","quintessential","roasted","robust","square","squiggly","stable","staid","starry","steel","stimulating","striking","striped","strong","studious","stunning","tough","trained","treasured","tremendous","triangular","tricky","unused","unusual","upbeat","virtual","witty","wonderful","wooden","worldly","youthful","attached","attentive","attractive","austere","authentic","automatic","aware","awesome","bubbly","bustling","busy","buttery","cuddly","cultured","curly","curvy","cute","cylindrical","downright","dramatic","excited","exciting","exotic","experienced","expert","frosty","fruitful","full","fumbling","funny","fussy","growing","grown","gummy","humble","humongous","hungry","intelligent","interesting","known","kooky","loyal","lucky","luminous","lustrous","luxurious","multicolored","mysterious","noteworthy","numb","nutritious","outstanding","overjoyed","proper","proud","prudent","punctual","puny","pure","puzzled","puzzling","quirky","stupendous","sturdy","stylish","subdued","subtle","sunny","super","superb","supportive","surprised","sweet","swift","sympathetic","trivial","trusting","trustworthy","trusty","truthful","twin","usable","used","useful","utilized","vital","vivid","worried","worthwhile","worthy","writhing","wry","yummy","chocolate","crimson","cyan","fuchsia","gold","honeydew","lime","linen","magenta","olive","peru","salmon","seashell","sienna","snow","thistle","tomato","transparent","turquoise","violet"],a=["space","land","world","universe","plane","room","nation","plaza","gathering","meetup","get together","conclave","party","domain","dominion","realm","square","commons","park","cosmos","sphere","terrain","spot","zone","area","tract","turf","place","territory","volume","camp","picnic","outing","vacation","adventure","exploration","outing","walkabout","safari","venture","roundtable","barbecue","celebration","festivity","gala","shindig","social","convention","assembly","congregation","rendezvous","huddle","meet","soiree"];function s(){const e=e=>{const t=e[Math.floor(Math.random()*e.length)];return t.charAt(0).toUpperCase()+t.slice(1)};return`${e(o)} ${e(o)} ${e(a)}`}var r=n(4),c=n(51);function l(e,t,n,i,o,a,s){try{var r=e[a](s),c=r.value}catch(e){return void n(e)}r.done?t(c):Promise.resolve(c).then(i,o)}function d(e){return function(){var t=this,n=arguments;return new Promise(function(i,o){var a=e.apply(t,n);function s(e){l(a,i,o,s,r,"next",e)}function r(e){l(a,i,o,s,r,"throw",e)}s(void 0)})}}function u(){return!!r.a.RETICULUM_SERVER}function h(){return u()&&document.location.host!==r.a.RETICULUM_SERVER}n.d(t,"j",function(){return u}),n.d(t,"l",function(){return h}),n.d(t,"h",function(){return m}),n.d(t,"k",function(){return b}),n.d(t,"i",function(){return y}),n.d(t,"a",function(){return E}),n.d(t,"e",function(){return x}),n.d(t,"d",function(){return A}),n.d(t,"b",function(){return S}),n.d(t,"f",function(){return P}),n.d(t,"g",function(){return C}),n.d(t,"m",function(){return T}),n.d(t,"c",function(){return k});const p=document.createElement("a");function m(e,t=!1){return u()?`https://${r.a.RETICULUM_SERVER}${e}`:t?(p.href=e,p.href):e}let f=null,g=!1;function b(){return v.apply(this,arguments)}function v(){return(v=d(function*(){g=!0,f=null})).apply(this,arguments)}function y(){return w.apply(this,arguments)}function w(){return(w=d(function*(){f||(!g&&document.querySelector("meta[name='ret:version']")?f={version:document.querySelector("meta[name='ret:version']").getAttribute("value"),pool:document.querySelector("meta[name='ret:pool']").getAttribute("value"),phx_host:document.querySelector("meta[name='ret:phx_host']").getAttribute("value")}:yield fetch(m("/api/v1/meta")).then(function(){var e=d(function*(e){f=yield e.json()});return function(t){return e.apply(this,arguments)}}()));const e=new URLSearchParams(location.search).get("phx_host");return e&&(f.phx_host=e),f})).apply(this,arguments)}function E(){return _.apply(this,arguments)}function _(){return(_=d(function*(e=!1,t=null,n=i.b){const o=new URLSearchParams(location.search),a=function(){var e=d(function*(){const e=o.get("phx_protocol")||r.a.RETICULUM_SOCKET_PROTOCOL||("https:"===document.location.protocol?"wss:":"ws:");let t=o.get("phx_host"),n=o.get("phx_port");const i=yield y();return`${e}//${t=t||r.a.RETICULUM_SOCKET_SERVER||i.phx_host}${(n=n||(u()?new URL(`${e}//${r.a.RETICULUM_SERVER}`).port:"443"))?`:${n}`:""}`});return function(){return e.apply(this,arguments)}}(),s=yield a();console.log(`Phoenix Socket URL: ${s}`);const c={};e&&(c.logger=(e,t,n)=>{console.log(`${e}: ${t}`,n)}),t&&(c.params=t);const l=new n(`${s}/socket`,c);return l.connect(),l.onError(d(function*(){b();const e=new URL(l.endPoint).pathname,t=`${yield a()}${e}`;console.log(`Socket error, changed endpoint to ${t}`),l.endPoint=t})),l})).apply(this,arguments)}function x(e){const t=new URL(e);return m(t.pathname.replace(".png",".html")+t.search,!0)}function A(e,t="GET",n){const{token:i}=window.APP.store.state.credentials,o=m(e),a={headers:{"content-type":"application/json"},method:t};return i&&(a.headers.authorization=`bearer ${i}`),n&&(a.body=JSON.stringify(n)),fetch(o,a).then(function(){var e=d(function*(e){const t=yield e.text();try{return JSON.parse(t)}catch(e){return t}});return function(t){return e.apply(this,arguments)}}())}function S(e,t,n){return R.apply(this,arguments)}function R(){return(R=d(function*(e,t,n){const i=m("/api/v1/hubs"),o={hub:{name:e||s()}};t&&(o.hub.scene_id=t);const a={"content-type":"application/json"},r=new c.b;r.state&&r.state.credentials.token&&(a.authorization=`bearer ${r.state.credentials.token}`);let l=yield fetch(i,{body:JSON.stringify(o),headers:a,method:"POST"}).then(e=>e.json());"invalid_token"===l.error&&(r.update({credentials:{token:null,email:null}}),delete a.authorization,l=yield fetch(i,{body:JSON.stringify(o),headers:a,method:"POST"}).then(e=>e.json()));const d=l;let u=d.url;const p=d.creator_assignment_token;if(p){r.update({creatorAssignmentTokens:[{hubId:d.hub_id,creatorAssignmentToken:p}]});const e=d.embed_token;e&&r.update({embedTokens:[{hubId:d.hub_id,embedToken:e}]})}h()&&(u="/custom-hubs-template/"+`hub.html?hub_id=${d.hub_id}`),n?document.location.replace(u):document.location=u})).apply(this,arguments)}function M(e,t){const n=(Object.entries(e||{}).find(([e])=>e===t)||[])[1];return n&&n.metas&&n.metas[0]||{}}function P(e,t){return(M(e,t)||{}).context||{}}function C(e,t){return(M(e,t)||{}).profile||{}}function T(e,t,n){const i=t.channel(e.topic,n||e.params);for(let t=0,n=e.bindings.length;t<n;t++){const n=e.bindings[t];i.on(n.event,n.callback)}for(let t=0,n=e.pushBuffer.length;t<n;t++){const n=e.pushBuffer[t];i.push(n.event,n.payload,n.timeout)}const o=e.joinPush,a=i.join();for(let e=0,t=o.recHooks.length;e<t;e++){const t=o.recHooks[e];a.receive(t.status,t.callback)}return new Promise(t=>{a.receive("ok",()=>{e.bindings=[],t(i)})})}function k(e){const t=[];for(const n of Object.values(e))for(const e of n.metas)e.profile&&e.profile.discordBridges&&Array.prototype.push.apply(t,e.profile.discordBridges.map(e=>e.channel.name));return t}},96:function(e,t,n){"use strict";n.d(t,"a",function(){return s}),n.d(t,"b",function(){return a});var i=n(15);n(4);const o={"action-color":"#FF3464","action-label-color":"#FF3464","action-color-disabled":"#FF74A4","action-color-highlight":"#FF74A4","action-text-color":"#FFFFFF","action-subtitle-color":"#F0F0F0","notice-background-color":"#2F80ED","notice-text-color":"#FFFFFF","favorited-color":"#FFC000"};function a(e){return window.APP_CONFIG&&window.APP_CONFIG.theme&&window.APP_CONFIG.theme[e]?window.APP_CONFIG.theme[e]:o[e]}function s(e,t){e.setAttribute("text-button","backgroundColor",a(t?"action-color-highlight":"action-color")),e.setAttribute("text-button","backgroundHoverColor",t?"#aaa":a("action-color-highlight"))}Object(i.a)().then(()=>{window.APP_CONFIG&&window.APP_CONFIG.theme&&window.APP_CONFIG.theme["dark-theme"]?document.body.classList.add("dark-theme"):document.body.classList.add("light-theme");const e=a("action-color"),t=a("action-color-highlight");document.querySelector("#rounded-text-button")&&(document.querySelector("#rounded-text-button").setAttribute("text-button",`textHoverColor: ${t}; textColor: ${e}; backgroundColor: #fff; backgroundHoverColor: #aaa;`),document.querySelector("#rounded-button").setAttribute("text-button",`textHoverColor: ${t}; textColor: ${e}; backgroundColor: #fff; backgroundHoverColor: #aaa;`),document.querySelector("#rounded-text-action-button").setAttribute("text-button",`textHoverColor: #fff; textColor: #fff; backgroundColor: ${e}; backgroundHoverColor: ${t}`),document.querySelector("#rounded-action-button").setAttribute("text-button",`textHoverColor: #fff; textColor: #fff; backgroundColor: ${e}; backgroundHoverColor: ${t}`))})},97:function(e,t,n){e.exports=n.p+"assets/images/warning_icon-739d2a2ea906737505bcbc2cb51123a8.png"},98:function(e,t,n){"use strict";function i(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},i=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(i=i.concat(Object.getOwnPropertySymbols(n).filter(function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable}))),i.forEach(function(t){o(e,t,n[t])})}return e}function o(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n.d(t,"a",function(){return r});const a="\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\n\nvoid main() {\n  #include <uv_vertex>\n  #include <uv2_vertex>\n  #include <color_vertex>\n  #include <skinbase_vertex>\n\n  #include <begin_vertex>\n  #include <morphtarget_vertex>\n  #include <skinning_vertex>\n  #include <project_vertex>\n  #include <logdepthbuf_vertex>\n\n  #include <worldpos_vertex>\n  #include <clipping_planes_vertex>\n  #include <fog_vertex>\n}\n",s="\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\n\n#include <common>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <aomap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\n\nvoid main() {\n  #include <clipping_planes_fragment>\n\n  vec4 diffuseColor = vec4(diffuse, opacity);\n  ReflectedLight reflectedLight = ReflectedLight(vec3(0.0), vec3(0.0), vec3(0.0), vec3(0.0));\n  vec3 totalEmissiveRadiance = emissive;\n\n  #include <logdepthbuf_fragment>\n  #include <map_fragment>\n  #include <color_fragment>\n  #include <alphatest_fragment>\n  #include <emissivemap_fragment>\n\n  reflectedLight.indirectDiffuse += vec3(1.0);\n\n  #include <aomap_fragment>\n\n  reflectedLight.indirectDiffuse *= diffuseColor.rgb;\n\n  vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\n  gl_FragColor = vec4(outgoingLight, diffuseColor.a);\n\n  #include <premultiplied_alpha_fragment>\n  #include <tonemapping_fragment>\n  #include <encodings_fragment>\n  #include <fog_fragment>\n}\n";class r extends THREE.ShaderMaterial{constructor(...e){super(...e),o(this,"type","MobileStandardMaterial"),o(this,"isMobileStandardMaterial",!0)}static fromStandardMaterial(e){const t={vertexShader:a,fragmentShader:s,uniforms:i({},THREE.UniformsUtils.clone(THREE.UniformsLib.fog),{uvTransform:{value:new THREE.Matrix3},diffuse:{value:e.color},opacity:{value:e.opacity},map:{value:e.map},aoMapIntensity:{value:e.aoMapIntensity},aoMap:{value:e.aoMap},emissive:{value:e.emissive},emissiveMap:{value:e.emissiveMap}}),fog:!0,lights:!1,opacity:e.opacity,transparent:e.transparent,alphaTest:e.alphaTest,skinning:e.skinning,morphTargets:e.morphTargets,vertexColors:e.vertexColors,name:e.name},n=new r(t);return n.color=e.color,n.map=e.map,n.aoMap=e.aoMap,n.aoMapIntensity=e.aoMapIntensity,n.emissive=e.emissive,n.emissiveIntensity=e.emissiveIntensity,n.emissiveMap=e.emissiveMap,n.refreshUniforms(),n}refreshUniforms(){this.uniforms.opacity.value=this.opacity,this.color&&this.uniforms.diffuse.value.copy(this.color),this.emissive&&this.uniforms.emissive.value.copy(this.emissive).multiplyScalar(this.emissiveIntensity),this.map&&(this.uniforms.map.value=this.map),this.aoMap&&(this.uniforms.aoMap.value=this.aoMap,this.uniforms.aoMapIntensity.value=this.aoMapIntensity);const e=this.map||this.emissiveMap;e&&!0===e.matrixAutoUpdate&&(e.updateMatrix(),this.uniforms.uvTransform.value.copy(e.matrix))}clone(){return r.fromStandardMaterial(this)}}}});
//# sourceMappingURL=scene-c0bee62a5440520be51f.js.map