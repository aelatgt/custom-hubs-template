{"version":3,"sources":["webpack:///webpack/bootstrap","webpack:///./src/systems/userinput/paths.js","webpack:///./src/utils/configs.js","webpack:///./src/utils/name-generation.js","webpack:///./src/utils/phoenix-utils.js","webpack:///./src/assets/stylesheets/media-browser.scss?0be5","webpack:///./src/utils/media-url-utils.js","webpack:///./src/utils/three-utils.js","webpack:///./src/utils/async-utils.js","webpack:///./src/utils/i18n.js","webpack:///./src/utils/history.js","webpack:///./src/loaders/HubsTextureLoader.js","webpack:///./src/utils/media-utils.js","webpack:///./src/systems/sound-effects-system.js","webpack:///./src/react-components/if-feature.js","webpack:///./src/react-components/dialog-container.js","webpack:///./src/utils/qs_truthy.js","webpack:///./src/react-components/wrap-with-audio.js","webpack:///./src/assets/stylesheets/settings-menu.scss?dfca","webpack:///./src/assets/stylesheets/entry.scss?b35b","webpack:///./src/assets/stylesheets/ui-root.scss?bfe5","webpack:///./src/assets/stylesheets/room-info-dialog.scss?711f","webpack:///./src/assets/stylesheets/presence-log.scss?bad0","webpack:///./src/object-types.js","webpack:///./src/assets/stylesheets/2d-hud.scss?803e","webpack:///./src/utils/focus-utils.js","webpack:///./src/assets/stylesheets/preferences-screen.scss?19f0","webpack:///./src/assets/stylesheets/invite-dialog.scss?d073","webpack:///./src/utils/avatar-utils.js","webpack:///./src/systems/camera-system.js","webpack:///./src/utils/material-utils.js","webpack:///./src/utils/identity.js","webpack:///./src/storage/store.js","webpack:///./src/assets/images/app-logo.png","webpack:///./src/assets/images/company-logo.png","webpack:///./src/assets/images/editor-logo.png","webpack:///./src/utils/permissions-utils.js","webpack:///./src/assets/stylesheets/client-info-dialog.scss?2a21","webpack:///./src/telemetry.js","webpack:///./src/assets/sfx/tick.mp3","webpack:///./src/assets/stylesheets/presence-list.scss?0256","webpack:///./src/utils/auto-box-collider.js","webpack:///./src/assets/stylesheets/message-entry.scss?0102","webpack:///./src/assets/models/DuckyMesh.glb","webpack:///./src/utils/fullscreen.js","webpack:///./src/utils/next-tick.js","webpack:///./src/components/gltf-model-plus.js","webpack:///./src/assets/stylesheets/profile.scss?02af","webpack:///./src/assets/stylesheets/tweet-dialog.scss?1649","webpack:///./src/utils/scene-graph.js","webpack:///./src/utils/image-bitmap-utils.js","webpack:///./src/assets/stylesheets/sign-in-dialog.scss?f596","webpack:///./src/utils/theme.js","webpack:///./src/assets/images/warning_icon.png","webpack:///./src/materials/MobileStandardMaterial.js","webpack:///./src/assets/stylesheets/room-settings-dialog.scss?5fe3","webpack:///./src/assets/stylesheets/tip.scss?ea93","webpack:///./src/constants.js","webpack:///./src/utils/promisify-worker.js","webpack:///./src/storage/media-search-store.js","webpack:///./src/react-components/state-link.js","webpack:///./src/components/virtual-gamepad-controls.css?9949","webpack:///./src/assets/stylesheets/create-object-dialog.scss?63e4","webpack:///./src/assets/stylesheets/link-dialog.scss?7296","webpack:///./src/utils/disable-ios-zoom.js","webpack:///./src/utils/component-utils.js","webpack:///./src/utils/detect-touchscreen.js","webpack:///./src/react-components/sign-in-dialog.js","webpack:///./src/components/hoverable-visuals.js","webpack:///./src/utils/scene-url-utils.js","webpack:///./src/assets/waternormals.jpg","webpack:///./src/assets/stylesheets/preload-overlay.scss?4ec6","webpack:///./src/components/environment-map.js","webpack:///./src/utils/media-highlight-frag.glsl","webpack:///./src/assets/images/cubemap/posx.jpg","webpack:///./src/assets/images/cubemap/negx.jpg","webpack:///./src/assets/images/cubemap/posy.jpg","webpack:///./src/assets/images/cubemap/negy.jpg","webpack:///./src/assets/images/cubemap/posz.jpg","webpack:///./src/assets/images/cubemap/negz.jpg","webpack:///./src/App.js","webpack:///./src/react-components/avatar-preview.js","webpack:///./src/assets/stylesheets/change-scene-dialog.scss?0c1a","webpack:///./src/assets/stylesheets/oauth-dialog.scss?c704","webpack:///./src/webxr-bypass-hacks.js","webpack:///./src/components/audio-feedback.js","webpack:///./src/react-components/unless-feature.js","webpack:///./src/utils/auth-channel.js","webpack:///./src/utils/animation.js","webpack:///./src/utils/easing.js","webpack:///./src/assets/images/warning_icon@2x.png","webpack:///./src/assets/sfx/quickTurn.mp3","webpack:///./src/assets/sfx/Eb_blip.mp3","webpack:///./src/assets/images/dropdown_arrow.png","webpack:///./src/assets/images/dropdown_arrow@2x.png","webpack:///./src/utils/logging.js","webpack:///./src/utils/mask-email.js","webpack:///./src/react-components/room-info-dialog.js","webpack:///./src/react-components/media-tiles.js","webpack:///./src/utils/webgl.js","webpack:///./src/assets/models/LoadingObject_Atom.glb","webpack:///./src/assets/sfx/teleport-loop.mp3","webpack:///./src/assets/sfx/tap_mellow.mp3","webpack:///./src/assets/sfx/PenSpawn.mp3","webpack:///./src/assets/sfx/PenDraw1.mp3","webpack:///./src/assets/sfx/PicSnapHey.mp3","webpack:///./src/assets/sfx/welcome.mp3","webpack:///./src/assets/sfx/quack.mp3","webpack:///./src/assets/sfx/specialquack.mp3","webpack:///./src/assets/sfx/pop.mp3","webpack:///./src/assets/sfx/tack.mp3","webpack:///./src/assets/sfx/A_bendUp.mp3","webpack:///./src/assets/sfx/suspense.mp3","webpack:///./src/assets/sfx/emoji.mp3","webpack:///./src/assets/stylesheets/avatar-preview.scss?c714","webpack:///./src/systems/scene-preview-camera-system.js","webpack:///./src/utils/crypto.js","webpack:///./src/utils/link-channel.js","webpack:///./src/assets/stylesheets/chat-command-help.scss?592c","webpack:///./src/assets/images/mic_denied.png","webpack:///./src/assets/images/mic_denied@2x.png","webpack:///./src/assets/images/send_message.svgi","webpack:///./src/assets/models/LoadingEnvironment.glb","webpack:///./src/assets/stylesheets/promote-client-dialog.scss?a2eb","webpack:///./src/assets/stylesheets/close-room-dialog.scss?83fa","webpack:///./src/assets/stylesheets/help-dialog.scss?21ba","webpack:///./src/utils/threejs-world-update.js","webpack:///./src/components/animation.js","webpack:///./src/components/ambient-light.js","webpack:///./src/components/animation-mixer.js","webpack:///./src/components/css-class.js","webpack:///./src/components/duck.js","webpack:///./src/components/heightfield.js","webpack:///./src/components/hemisphere-light.js","webpack:///./src/components/hide-when-quality.js","webpack:///./src/components/point-light.js","webpack:///./src/components/spot-light.js","webpack:///./src/components/floaty-object.js","webpack:///./src/components/trigger-volume.js","webpack:///./src/components/video-pause-state.js","webpack:///./src/components/debug.js","webpack:///./src/systems/nav.js","webpack:///./src/components/event-repeater.js","webpack:///./src/utils/resizeShadowCameraFrustum.js","webpack:///./src/components/directional-light.js","webpack:///./src/components/layers.js","webpack:///./src/components/loop-animation.js","webpack:///./src/components/media-loader.js","webpack:///./src/components/quack.js","webpack:///./src/components/scene-preview-camera.js","webpack:///./src/components/skybox.js","webpack:///./src/components/spawn-controller.js","webpack:///./src/components/super-spawner.js","webpack:///./src/components/water.js","webpack:///./src/components/simple-water.js","webpack:///./src/components/particle-emitter.js","webpack:///./src/utils/component-mappings.js","webpack:///./src/gltf-component-mappings.js","webpack:///./src/assets/stylesheets/loader.scss?288f","webpack:///./src/assets/images/giphy_logo.png","webpack:///./src/assets/images/emojis/emoji_0.png","webpack:///./src/assets/images/emojis/emoji_1.png","webpack:///./src/assets/images/emojis/emoji_2.png","webpack:///./src/assets/images/emojis/emoji_3.png","webpack:///./src/assets/images/emojis/emoji_4.png","webpack:///./src/assets/images/emojis/emoji_5.png","webpack:///./src/assets/images/emojis/emoji_6.png","webpack:///./src/assets/models/emojis/emoji_0.glb","webpack:///./src/assets/models/emojis/emoji_1.glb","webpack:///./src/assets/models/emojis/emoji_2.glb","webpack:///./src/assets/models/emojis/emoji_3.glb","webpack:///./src/assets/models/emojis/emoji_4.glb","webpack:///./src/assets/models/emojis/emoji_5.glb","webpack:///./src/assets/models/emojis/emoji_6.glb","webpack:///./src/assets/images/media-error.gif","webpack:///./src/assets/images/audio.png","webpack:///./src/assets/camera_tool.glb","webpack:///./src/assets/images/mic_granted.png","webpack:///./src/assets/images/mic_granted@2x.png","webpack:///./src/assets/images/mic_small.png","webpack:///./src/assets/images/mic_small@2x.png","webpack:///./src/assets/images/add-owner.png","webpack:///./src/assets/images/remove-owner.png","webpack:///./src/assets/images/mobile_screen_entry.svgi","webpack:///./src/assets/images/desktop_screen_entry.svgi","webpack:///./src/assets/images/generic_vr_entry.svgi","webpack:///./src/assets/images/gearvr_entry.svgi","webpack:///./src/assets/images/daydream_entry.svgi","webpack:///./src/assets/stylesheets/avatar-url-dialog.scss?3a38","webpack:///./src/assets/images/link_dialog_header.svg","webpack:///./src/assets/stylesheets/feedback-dialog.scss?48e3","webpack:///./src/assets/stylesheets/leave-room-dialog.scss?9cfa","webpack:///./src/assets/images/spawn_message.svgi","webpack:///./src/assets/images/discord.svgi","webpack:///./src/assets/images/hmd-icon.svgi","webpack:///./src/assets/stylesheets/avatar-editor.scss?b806","webpack:///./src/assets/images/mic_level.png","webpack:///./src/assets/images/mic_level@2x.png","webpack:///./src/assets/images/speaker_level.png","webpack:///./src/assets/images/speaker_level@2x.png","webpack:///./src/assets/sfx/tone.webm","webpack:///./src/assets/sfx/tone.mp3","webpack:///./src/assets/sfx/tone.ogg","webpack:///./src/assets/sfx/tone.wav","webpack:///./src/assets/images/spawn.svgi","webpack:///./src/assets/images/share_screen_active.svgi","webpack:///./src/assets/images/share_screen.svgi","webpack:///./src/assets/images/share_camera_active.svgi","webpack:///./src/assets/images/share_camera.svgi","webpack:///./src/assets/images/pen.svgi","webpack:///./src/assets/images/pen_active.svgi","webpack:///./src/assets/images/camera.svgi","webpack:///./src/assets/images/camera_active.svgi","webpack:///./src/assets/images/mic-0.svgi","webpack:///./src/assets/images/mic-1.svgi","webpack:///./src/assets/images/mic-2.svgi","webpack:///./src/assets/images/mic-3.svgi","webpack:///./src/assets/images/mic-4.svgi","webpack:///./src/assets/images/mic-5.svgi","webpack:///./src/assets/images/mic-6.svgi","webpack:///./src/assets/images/mic-7.svgi","webpack:///./src/assets/images/mic-off-0.svgi","webpack:///./src/assets/images/mic-off-1.svgi","webpack:///./src/assets/images/mic-off-2.svgi","webpack:///./src/assets/images/mic-off-3.svgi","webpack:///./src/assets/images/mic-off-4.svgi","webpack:///./src/assets/images/mic-off-5.svgi","webpack:///./src/assets/images/mic-off-6.svgi","webpack:///./src/assets/images/mic-off-7.svgi","webpack:///./src/assets/stylesheets/spectating-label.scss?4b63","webpack:///./src/systems/render-manager/unlit-batch.vert","webpack:///./src/systems/render-manager/unlit-batch.frag","webpack:///./src/assets/images/spritesheets/sprite-system-action-spritesheet.png","webpack:///./src/assets/images/spritesheets/sprite-system-notice-spritesheet.png","webpack:///./src/systems/sprites/sprite.vert","webpack:///./src/systems/sprites/sprite.frag","webpack:///./src/utils/debug-log.js","webpack:///./src/assets/stylesheets/hub.scss?ad84","webpack:///../hub.inject.js","webpack:///./src/utils/audio-context-fix.js","webpack:///./src/utils/threejs-positional-audio-updatematrixworld.js","webpack:///./src/components/scale-in-screen-space.js","webpack:///./src/components/bone-mute-state-indicator.js","webpack:///./src/components/bone-visibility.js","webpack:///./src/components/fader.js","webpack:///./src/components/icon-button.js","webpack:///./src/components/text-button.js","webpack:///./src/components/block-button.js","webpack:///./src/components/mute-button.js","webpack:///./src/components/kick-button.js","webpack:///./src/components/close-vr-notice-button.js","webpack:///./src/components/leave-room-button.js","webpack:///./src/components/visible-if-permitted.js","webpack:///./src/components/visibility-on-content-types.js","webpack:///./src/components/hide-when-pinned-and-forbidden.js","webpack:///./src/components/networked-avatar.js","webpack:///./src/components/pinnable.js","webpack:///./src/components/drop-object-button.js","webpack:///./src/components/remove-networked-object-button.js","webpack:///./src/components/camera-focus-button.js","webpack:///./src/components/visible-to-owner.js","webpack:///./src/components/emit-state-change.js","webpack:///./src/components/action-to-event.js","webpack:///./src/components/action-to-remove.js","webpack:///./src/components/emit-scene-event-on-remove.js","webpack:///./src/components/follow-in-fov.js","webpack:///./src/components/matrix-auto-update.js","webpack:///./src/components/hover-menu.js","webpack:///./src/components/disable-frustum-culling.js","webpack:///./src/components/set-active-camera.js","webpack:///./src/components/track-pose.js","webpack:///./src/components/replay.js","webpack:///./src/components/visibility-by-path.js","webpack:///./src/components/billboard.js","webpack:///./src/components/periodic-full-syncs.js","webpack:///./src/components/set-max-resolution.js","webpack:///./src/systems/frame-scheduler.js","webpack:///./src/systems/app-mode.js","webpack:///./src/systems/permissions.js","webpack:///./src/systems/exit-on-blur.js","webpack:///./src/systems/auto-pixel-ratio.js","webpack:///./src/systems/listed-media.js","webpack:///./src/systems/linked-media.js","webpack:///./src/components/owned-object-limiter.js","webpack:///./src/components/owned-object-cleanup-timeout.js","webpack:///./src/components/set-unowned-body-kinematic.js","webpack:///./src/components/networked-counter.js","webpack:///./src/components/set-yxz-order.js","webpack:///./src/components/nav-mesh-helper.js","webpack:///./src/components/tools/drawing-manager.js","webpack:///./src/components/mute-mic.js","webpack:///./src/components/in-world-hud.js","webpack:///./src/components/emoji.js","webpack:///./src/components/emoji-hud.js","webpack:///./src/components/virtual-gamepad-controls.js","webpack:///./src/components/ik-controller.js","webpack:///./src/components/hand-controls2.js","webpack:///./src/components/hover-visuals.js","webpack:///./src/components/offset-relative-to.js","webpack:///./src/components/player-info.js","webpack:///./src/components/hand-poses.js","webpack:///./src/components/hud-controller.js","webpack:///./src/components/freeze-controller.js","webpack:///./src/components/visibility-while-frozen.js","webpack:///./src/components/stats-plus.js","webpack:///./src/components/media-views.js","webpack:///./src/components/avatar-volume-controls.js","webpack:///./src/components/pinch-to-move.js","webpack:///./src/components/pitch-yaw-rotator.js","webpack:///./src/components/position-at-box-shape-border.js","webpack:///./src/components/pin-networked-object-button.js","webpack:///./src/components/mirror-media-button.js","webpack:///./src/components/close-mirrored-media-button.js","webpack:///./src/components/unmute-video-button.js","webpack:///./src/components/destroy-at-extreme-distances.js","webpack:///./src/components/camera-tool.js","webpack:///./src/components/clone-media-button.js","webpack:///./src/utils/vr-interstitial.js","webpack:///./src/components/open-media-button.js","webpack:///./src/components/refresh-media-button.js","webpack:///./src/components/tweet-media-button.js","webpack:///./src/components/remix-avatar-button.js","webpack:///./src/components/transform-object-button.js","webpack:///./src/components/scale-button.js","webpack:///./src/components/teleporter.js","webpack:///./src/components/cylinder-texture.js","webpack:///./src/components/tags.js","webpack:///./src/components/hubs-text.js","webpack:///./src/components/inspect-button.js","webpack:///./src/systems/userinput/sets.js","webpack:///./src/utils/vr-caps-detect.js","webpack:///./src/utils/share.js","webpack:///./src/react-components/state-route.js","webpack:///./src/react-components/promote-client-dialog.js","webpack:///./src/react-components/client-info-dialog.js","webpack:///./src/react-components/loader.js","webpack:///./src/react-components/auto-exit-warning.js","webpack:///./src/react-components/svgi.js","webpack:///./src/react-components/entry-buttons.js","webpack:///./src/react-components/profile-entry-panel.js","webpack:///./src/react-components/media-browser.js","webpack:///./src/react-components/create-object-dialog.js","webpack:///./src/react-components/change-scene-dialog.js","webpack:///./src/react-components/avatar-url-dialog.js","webpack:///./src/react-components/invite-dialog.js","webpack:///./src/react-components/invite-team-dialog.js","webpack:///./src/react-components/link-dialog.js","webpack:///./src/react-components/safari-dialog.js","webpack:///./src/react-components/room-settings-dialog.js","webpack:///./src/react-components/close-room-dialog.js","webpack:///./src/systems/tips.js","webpack:///./src/react-components/tip.js","webpack:///./src/react-components/webrtc-screenshare-unsupported-dialog.js","webpack:///./src/react-components/webassembly-unsupported-dialog.js","webpack:///./src/react-components/webvr-recommend-dialog.js","webpack:///./src/react-components/feedback-dialog.js","webpack:///./src/react-components/help-dialog.js","webpack:///./src/react-components/leave-room-dialog.js","webpack:///./src/utils/media-sorting.js","webpack:///./src/react-components/object-info-dialog.js","webpack:///./src/react-components/oauth-dialog.js","webpack:///./src/react-components/tweet-dialog.js","webpack:///./src/react-components/lobby-chat-box.js","webpack:///./src/react-components/chat-command-help.js","webpack:///./src/utils/serialize-element.js","webpack:///./src/react-components/presence-list.js","webpack:///./src/react-components/chat-message.js","webpack:///./src/react-components/in-world-chat-box.js","webpack:///./src/react-components/avatar-editor.js","webpack:///./src/react-components/mic-level-widget.js","webpack:///./src/react-components/number-range-selector.js","webpack:///./src/react-components/preference-list-item.js","webpack:///./src/react-components/preferences-screen.js","webpack:///./src/react-components/output-level-widget.js","webpack:///./src/react-components/photo-message.js","webpack:///./src/react-components/video-message.js","webpack:///./src/react-components/image-message.js","webpack:///./src/react-components/presence-log.js","webpack:///./src/react-components/object-list.js","webpack:///./src/react-components/settings-menu.js","webpack:///./src/react-components/preload-overlay.js","webpack:///./src/react-components/2d-hud.js","webpack:///./src/react-components/spectating-label.js","webpack:///./src/react-components/ui-root.js","webpack:///./src/utils/hub-channel.js","webpack:///./src/utils/physics-utils.js","webpack:///./src/message-dispatch.js","webpack:///./src/scene-entry-manager.js","webpack:///./src/utils/pinned-entity-to-gltf.js","webpack:///./src/subscriptions.js","webpack:///./src/systems/personal-space-bubble.js","webpack:///./src/systems/idle-detector.js","webpack:///./src/systems/camera-tools.js","webpack:///./src/systems/userinput/devices/mouse.js","webpack:///./src/systems/userinput/array-backed-set.js","webpack:///./src/systems/userinput/devices/keyboard.js","webpack:///./src/systems/userinput/devices/hud.js","webpack:///./src/systems/userinput/devices/xbox-controller.js","webpack:///./src/systems/userinput/pose.js","webpack:///./src/systems/userinput/arm-model.js","webpack:///./src/systems/userinput/devices/copy-sitting-to-standing-transform.js","webpack:///./src/systems/userinput/devices/oculus-go-controller.js","webpack:///./src/systems/userinput/devices/gear-vr-controller.js","webpack:///./src/systems/userinput/devices/oculus-touch-controller.js","webpack:///./src/systems/userinput/devices/daydream-controller.js","webpack:///./src/systems/userinput/devices/vive-controller.js","webpack:///./src/systems/userinput/devices/windows-mixed-reality-controller.js","webpack:///./src/systems/userinput/devices/gyro.js","webpack:///./src/systems/interactions.js","webpack:///./src/systems/userinput/devices/app-aware-mouse.js","webpack:///./src/systems/userinput/devices/touchscreen/assignments.js","webpack:///./src/systems/userinput/devices/app-aware-touchscreen.js","webpack:///./src/systems/userinput/bindings/xforms.js","webpack:///./src/utils/dpad.js","webpack:///./src/systems/userinput/bindings/utils.js","webpack:///./src/systems/userinput/bindings/keyboard-mouse-user.js","webpack:///./src/systems/userinput/bindings/touchscreen-user.js","webpack:///./src/systems/userinput/bindings/keyboard-debugging.js","webpack:///./src/systems/userinput/bindings/oculus-touch-user.js","webpack:///./src/systems/userinput/bindings/vive-user.js","webpack:///./src/systems/userinput/bindings/windows-mixed-reality-user.js","webpack:///./src/systems/userinput/bindings/xbox-controller-user.js","webpack:///./src/systems/userinput/bindings/daydream-user.js","webpack:///./src/systems/userinput/bindings/cardboard-user.js","webpack:///./src/systems/userinput/bindings/oculus-go-user.js","webpack:///./src/systems/userinput/resolve-action-sets.js","webpack:///./src/systems/userinput/devices/gamepad.js","webpack:///./src/systems/userinput/bindings/generic-gamepad.js","webpack:///./src/systems/userinput/userinput.js","webpack:///./src/systems/userinput/userinput-debug.js","webpack:///./src/systems/ui-hotkeys.js","webpack:///./src/systems/cursor-targetting-system.js","webpack:///./src/systems/cursor-toggling-system.js","webpack:///./src/systems/physics-system.js","webpack:///./src/systems/constraints-system.js","webpack:///./src/systems/two-point-stretching-system.js","webpack:///./src/systems/button-systems.js","webpack:///./src/systems/drawing-menu-system.js","webpack:///./src/systems/hover-menu-system.js","webpack:///./src/systems/super-spawner-system.js","webpack:///./src/systems/haptic-feedback-system.js","webpack:///./src/systems/render-manager/hubs-batch-raw-uniform-group.js","webpack:///./src/systems/render-manager-system.js","webpack:///./src/systems/interaction-sfx-system.js","webpack:///./src/utils/theme-sprites.js","webpack:///./src/systems/sprites.js","webpack:///./src/systems/waypoint-system.js","webpack:///./src/utils/mat4-pool.js","webpack:///./src/utils/get-current-player-height.js","webpack:///./src/systems/character-controller-system.js","webpack:///./src/systems/cursor-pose-tracking.js","webpack:///./src/systems/scale-in-screen-space.js","webpack:///./src/systems/audio-settings-system.js","webpack:///./src/systems/hubs-systems.js","webpack:///./src/systems/capture-system.js","webpack:///./src/components/scalable-when-grabbed.js","webpack:///./src/components/cursor-controller.js","webpack:///./src/components/tools/pen.js","webpack:///./src/components/tools/pen-laser.js","webpack:///./src/utils/sharedbuffergeometry.js","webpack:///./src/utils/sharedbuffergeometrymanager.js","webpack:///./src/components/tools/networked-drawing.js","webpack:///./src/components/body-helper.js","webpack:///./src/components/shape-helper.js","webpack:///./src/network-schemas.js","webpack:///./src/hub.js","webpack:///./src/utils/concurrent-load-detector.js","webpack:///./src/utils/threejs-allocation-patches.js"],"names":["webpackJsonpCallback","data","moduleId","chunkId","chunkIds","moreModules","executeModules","i","resolves","length","installedChunks","push","Object","prototype","hasOwnProperty","call","modules","parentJsonpFunction","shift","deferredModules","apply","checkDeferredModules","result","deferredModule","fulfilled","j","depId","splice","__webpack_require__","s","installedModules","5","exports","module","l","e","Promise","resolve","m","c","d","name","getter","o","defineProperty","enumerable","get","r","Symbol","toStringTag","value","t","mode","__esModule","ns","create","key","bind","n","object","property","p","oe","err","console","error","jsonpArray","window","oldJsonpFunction","slice","paths","actions","log","toggleScreenShare","snapRotateLeft","snapRotateRight","angularVelocity","logDebugFrame","logInteractionState","debugUserInput","describeCurrentMasks","cameraDelta","lobbyCameraDelta","characterAcceleration","dCharSpeed","boost","startGazeTeleport","stopGazeTeleport","spawnPen","ensureFrozen","toggleFreeze","thaw","muteMic","toggleFly","toggleUI","waypointDeltaDistance","focusChat","focusChatCommand","toggleCamera","takeSnapshot","mediaExit","mediaSearch1","mediaSearch2","mediaSearch3","mediaSearch4","mediaSearch5","mediaSearch6","mediaSearch7","mediaSearch8","transformModifier","rayObjectRotation","cursor","right","pose","hideLine","grab","drop","modDelta","startDrawing","stopDrawing","undoDrawing","penNextColor","penPrevColor","scalePenTip","scaleGrabbedGrabbable","mediaVolumeMod","wake","left","pen","remove","rightHand","matrix","switchDrawMode","startTeleport","stopTeleport","thumb","index","middleRingPinky","leftHand","camera","exitMirror","startInspecting","stopInspecting","inspectZoom","inspectPanY","resetInspectView","nextCameraMode","haptics","actuators","device","mouse","coords","movementXY","buttonLeft","buttonRight","buttonMiddle","wheel","smartMouse","cursorPose","shouldMoveCamera","touchscreen","touchCameraDelta","gyroCameraDelta","pinch","delta","initialDistance","currentDistance","isTouching","isTouchingGrabbable","tap1","tap2","tap3","tap4","tap5","anything","gyro","averageDeltaX","averageDeltaY","hud","penButton","keyboard","map","Map","k","path","this","toLowerCase","set","gamepad","gamepadIndex","button","buttonIndex","pressed","touched","axis","axisIndex","xbox","v","buttonName","axisName","axesSum","oculusgo","trigger","touchpad","axisX","axisY","gearVRController","daydream","rightOculusTouch","leftOculusTouch","side","axes","wmrController","wmr","_objectSpread","grip","menu","joystick","vive","pdfjs_dist__WEBPACK_IMPORTED_MODULE_3__","pdfjs_dist__WEBPACK_IMPORTED_MODULE_3___default","configs","isAdmin","forEach","x","el","document","querySelector","getAttribute","process","__webpack_public_path__","pdfjs","GlobalWorkerOptions","workerSrc","AVAILABLE_INTEGRATIONS","APP_CONFIG","theme","colorVars","style","createElement","innerHTML","join","head","prepend","features","feature","featureName","enableAll","localDevImages","image","imageName","cssUrl","url","images","link","linkName","defaultValue","links","setIsAdmin","_isAdmin","adjectives","nouns","generateHubName","randItem","Math","floor","random","charAt","toUpperCase","hasReticulumServer","RETICULUM_SERVER","isLocalClient","location","host","resolverLink","getReticulumFetchUrl","absolute","href","reticulumMeta","invalidatedReticulumMetaThisSession","invalidateReticulumMeta","_invalidateReticulumMeta","arguments","getReticulumMeta","_getReticulumMeta","version","pool","phx_host","fetch","then","_ref2","_asyncToGenerator","res","json","_x5","phxHostOverride","URLSearchParams","search","connectToReticulum","_connectToReticulum","debug","params","socketClass","Socket","qs","getNewSocketUrl","_ref3","socketProtocol","RETICULUM_SOCKET_PROTOCOL","protocol","socketHost","socketPort","RETICULUM_SOCKET_SERVER","URL","port","socketUrl","socketSettings","logger","kind","msg","socket","connect","onError","endPointPath","endPoint","pathname","newEndPoint","getLandingPageForPhoto","photoUrl","parsedUrl","replace","fetchReticulumAuthenticated","method","payload","token","APP","store","state","credentials","retUrl","headers","content-type","authorization","body","JSON","stringify","_ref","text","parse","_x","createAndRedirectToNewHub","_x2","_x3","_x4","_createAndRedirectToNewHub","sceneId","createUrl","hub","scene_id","Store","update","email","creatorAssignmentToken","creator_assignment_token","creatorAssignmentTokens","hubId","hub_id","embedToken","embed_token","embedTokens","getPresenceEntryForSession","presences","sessionId","presence","entries","find","metas","getPresenceContextForSession","context","getPresenceProfileForSession","profile","migrateChannelToSocket","oldChannel","channel","topic","bindings","item","on","event","callback","pushBuffer","timeout","oldJoinPush","joinPush","recHooks","receive","status","discordBridgesForPresences","channels","values","discordBridges","Array","b","media-browser","mediaBrowser","facets","facet","pager","header-center","headerCenter","header-left","headerLeft","engine-attribution","engineAttribution","engine-attribution-contents","engineAttributionContents","favorites-header","favoritesHeader","search-clear","searchClear","search-icon","searchIcon","box","header","no-search","noSearch","nav","nav-right-pad","navRightPad","nav-source","navSource","nav-source-selected","navSourceSelected","nav-scroll-arrow","navScrollArrow","tiles","tile","info","attribution","creator","publisher","last-joined","lastJoined","tile-link","tileLink","tile-content","tileContent","avatar-tile","avatarTile","favorite","tile-actions","tileActions","create-tile","createTile","create-avatar-tile","createAvatarTile","tiles-variable","tilesVariable","page-number","pageNumber","pager-button-disabled","pagerButtonDisabled","header-right","headerRight","create-button","createButton","create-link","createLink","empty-string","emptyString","media-browser-inline","mediaBrowserInline","nonCorsProxyDomains","NON_CORS_PROXY_DOMAINS","split","CORS_PROXY_SERVER","hostname","commonKnownContentTypes","gltf","glb","png","jpg","jpeg","pdf","mp4","mp3","farsparkEncodeUrl","str","btoa","encodeURIComponent","_","p1","String","fromCharCode","b64EncodeUnicode","scaledThumbnailUrlFor","width","height","extension","pathParts","extensionCandidate","pop","thumbnailUrl","THUMBNAIL_SERVER","urlHostname","isNonCorsProxyDomain","domain","endsWith","proxiedUrlFor","startsWith","getAbsoluteHref","baseUrl","relativeUrl","getAbsoluteUrl","getCustomGLTFParserURLResolver","gltfUrl","test","corsProxyPrefix","originalUrlParts","decodeURIComponent","substring","dataUrlRegex","guessContentType","matches","exec","originIsHubsServer","isHubsServer","origin","has","hubsSceneRegex","hubsAvatarRegex","_wrapRegExp","id","hubsRoomRegex","isLocalHubsUrl","isHubsSceneUrl","isLocalHubsSceneUrl","isHubsAvatarUrl","_ref4","isLocalHubsAvatarUrl","_ref5","_x6","isHubsRoomUrl","_ref6","_x7","idForAvatarUrl","match","groups","__webpack_exports__","getLastWorldPosition","getLastWorldQuaternion","disposeNode","setMatrixWorld","cloneObject3D","findNode","interpolateAffine","squareDistanceBetween","affixToWorldUp","calculateCameraTransformForWaypoint","calculateViewingDistance","rotateInPlaceAroundWorldUp","childMatch","tempVector3","THREE","Vector3","Quaternion","src","target","updateMatrices","setFromMatrixPosition","matrixWorld","decompose","disposeMaterial","mtrl","dispose","lightMap","bumpMap","normalMap","specularMap","envMap","node","Mesh","geometry","material","materialArray","MeshFaceMaterial","MultiMaterial","materials","IDENTITY","Matrix4","identity","object3D","matrixIsModified","applyMatrix","copy","parent","getInverse","multiply","position","quaternion","scale","childrenNeedMatrixWorldUpdate","cloneAnimationClip","sourceAnimationClip","cloneUUIDLookup","clonedTracks","tracks","keyframeTrack","sourceKeyframeTrack","nodeName","uuid","objectName","objectIndex","propertyName","propertyIndex","PropertyBinding","parseTrackName","undefined","clonedUUID","warn","clonedKeyframeTrack","clone","cloneKeyframeTrack","AnimationClip","duration","source","preserveUUIDs","cloneLookup","parallelTraverse","a","children","sourceNode","clonedNode","traverse","animations","animationClip","isMesh","boundsTree","isSkinnedMesh","sourceBones","skeleton","bones","sourceBone","Error","bindMatrix","root","pred","nodes","concat","mat4","end","start","interpolated","startMat4","endMat4","progress","outMat4","setFromRotationMatrix","extractRotation","slerp","lerpVectors","setFromMatrixColumn","setFromMatrixScale","compose","posA","posB","objA","objB","distanceToSquared","inRotationMat4","inForward","outForward","outSide","worldUp","inMat4Copy","inMat4","multiplyScalar","sub","projectOnVector","normalize","crossVectors","makeBasis","setPosition","upAffixedCameraTransform","upAffixedWaypointTransform","detachFromWorldUp","cameraTransform","waypointTransform","fov","aspect","center","vrMode","halfYExtents","max","abs","y","min","halfXExtents","halfVertFOV","degToRad","halfHorFOV","atan","tan","length1","length2","length3","z","startRotation","endRotation","theta","makeRotationY","childInverse","newParentMatrix","child","multiplyMatrices","waitForEvent","waitForDOMContentLoaded","eventName","eventObj","addEventListener","once","readyState","lang","messages","_configs__WEBPACK_IMPORTED_MODULE_0__","_assets_translations_data_json__WEBPACK_IMPORTED_MODULE_1__","navigatorLang","navigator","languages","language","userLanguage","localeData","_messages","en","translations","configTranslations","messageKey","message","_match","subkey","reduce","acc","entry","pushOrUpdateHistory","history","detail","newPathname","newSearch","newLength","__historyLength","__duplicate","isDuplicate","pushHistoryState","replaceHistoryState","pushHistoryPath","clearHistoryState","popToBeginningOfHubHistory","navigateToPriorPage","len","unsubscribe","listen","go","sluglessPath","withSlug","HubsTextureLoader","constructor","manager","DefaultLoadingManager","load","onLoad","onProgress","texture","Texture","loadTextureAsync","catch","_this","imageLoader","createImageBitmap","ImageBitmapLoader","flipY","ImageLoader","setCrossOrigin","crossOrigin","setPath","cacheKey","resolveURL","loader","reject","loadAsync","Cache","needsUpdate","onUpdate","close","linkify","Linkify","tlds","mediaAPIEndpoint","isMobile","AFRAME","utils","isMobileVR","resolveUrlCache","getDefaultResolveQuality","is360","useLowerQuality","resolveUrl","media_utils_asyncToGenerator","quality","resultPromise","Content-Type","media","response","ok","statusText","upload","file","desiredContentType","formData","FormData","append","coerceToUrl","urlOrText","indexOf","addMedia","template","contentOrigin","contentSubtype","fitToBox","animate","mediaOptions","networked","parentEl","linkedEl","scene","scenes","entity","setAttribute","templateBody","importNode","content","firstElementChild","cloneNode","elAttrs","attributes","attrIdx","appendChild","needsToBeUploaded","File","els","querySelectorAll","components","getLatestMediaVersionOfSrc","fileIsOwned","matrixNeedsUpdate","orientation","reader","FileReader","onload","view","DataView","getUint16","byteLength","offset","marker","getUint32","little","tags","readAsArrayBuffer","getOrientation","srcUrl","searchParams","meta","access_token","fileId","file_id","uploadPromotionTokens","promotionToken","promotion_token","MediaStream","NAF","clientId","objectType","objectTypeForOriginAndContentType","contentType","emit","cloneMedia","sourceEl","ObjectContentOrigins","injectCustomShaderChunks","obj","vertexRegex","fragRegex","shaderUniforms","batchManagerSystem","systems","mapMaterials","hubs_InjectedCustomShaderChunks","validMaterials","includes","type","classList","contains","meshToEl","newMaterial","onBeforeCompile","shader","vertexShader","uniforms","hubs_IsFrozen","hubs_EnableSweepingEffect","hubs_SweepParams","hubs_InteractorOnePos","hubs_InteractorTwoPos","hubs_HighlightInteractorOne","hubs_HighlightInteractorTwo","hubs_Time","vlines","vindex","findIndex","line","unshift","flines","fragmentShader","findex","mediaHighlightFrag","getPromotionTokenForFile","mediaPos","addAndArrangeMedia","snapCount","mirrorOrientation","distance","pos","rotation","rotateY","PI","idx","cos","sin","localToWorld","visible","handler","dur","from","to","easing","eventType","textureLoader","createImageTexture","_createImageTexture","filter","Image","canvas","ctx","getContext","drawImage","CanvasTexture","encoding","sRGBEncoding","anisotropy","addMeshScaleAnimation","mesh","initialScale","onComplete","step","lastValue","anim","animatables","Number","MIN_VALUE","config","elasticity","loop","round","targets","complete","anime","closeExistingMediaMirror","mirrorTarget","firstChild","removeChild","SOUND_HOVER_OR_GRAB","SOUND_THAW","SOUND_PEN_STOP_DRAW","SOUND_PEN_UNDO_DRAW","SOUND_PEN_CHANGE_COLOR","SOUND_TOGGLE_MIC","SOUND_TELEPORT_START","SOUND_TELEPORT_END","SOUND_WAYPOINT_START","SOUND_WAYPOINT_END","SOUND_SNAP_ROTATE","SOUND_SPAWN_PEN","SOUND_PEN_START_DRAW","SOUND_CAMERA_TOOL_TOOK_SNAPSHOT","SOUND_ENTER_SCENE","SOUND_QUACK","SOUND_SPECIAL_QUACK","SOUND_CHAT_MESSAGE","SOUND_FREEZE","SOUND_PIN","SOUND_MEDIA_LOADING","SOUND_MEDIA_LOADED","SOUND_CAMERA_TOOL_COUNTDOWN","SOUND_PREFERENCE_MENU_SELECT","SOUND_SPAWN_EMOJI","SoundEffectsSystem","_assets_sfx_tick_mp3__WEBPACK_IMPORTED_MODULE_0__","_assets_sfx_tick_mp3__WEBPACK_IMPORTED_MODULE_0___default","_assets_sfx_teleport_loop_mp3__WEBPACK_IMPORTED_MODULE_1__","_assets_sfx_teleport_loop_mp3__WEBPACK_IMPORTED_MODULE_1___default","_assets_sfx_quickTurn_mp3__WEBPACK_IMPORTED_MODULE_2__","_assets_sfx_quickTurn_mp3__WEBPACK_IMPORTED_MODULE_2___default","_assets_sfx_tap_mellow_mp3__WEBPACK_IMPORTED_MODULE_3__","_assets_sfx_tap_mellow_mp3__WEBPACK_IMPORTED_MODULE_3___default","_assets_sfx_PenSpawn_mp3__WEBPACK_IMPORTED_MODULE_4__","_assets_sfx_PenSpawn_mp3__WEBPACK_IMPORTED_MODULE_4___default","_assets_sfx_PenDraw1_mp3__WEBPACK_IMPORTED_MODULE_5__","_assets_sfx_PenDraw1_mp3__WEBPACK_IMPORTED_MODULE_5___default","_assets_sfx_PicSnapHey_mp3__WEBPACK_IMPORTED_MODULE_6__","_assets_sfx_PicSnapHey_mp3__WEBPACK_IMPORTED_MODULE_6___default","_assets_sfx_welcome_mp3__WEBPACK_IMPORTED_MODULE_7__","_assets_sfx_welcome_mp3__WEBPACK_IMPORTED_MODULE_7___default","_assets_sfx_quack_mp3__WEBPACK_IMPORTED_MODULE_8__","_assets_sfx_quack_mp3__WEBPACK_IMPORTED_MODULE_8___default","_assets_sfx_specialquack_mp3__WEBPACK_IMPORTED_MODULE_9__","_assets_sfx_specialquack_mp3__WEBPACK_IMPORTED_MODULE_9___default","_assets_sfx_pop_mp3__WEBPACK_IMPORTED_MODULE_10__","_assets_sfx_pop_mp3__WEBPACK_IMPORTED_MODULE_10___default","_assets_sfx_Eb_blip_mp3__WEBPACK_IMPORTED_MODULE_11__","_assets_sfx_Eb_blip_mp3__WEBPACK_IMPORTED_MODULE_11___default","_assets_sfx_tack_mp3__WEBPACK_IMPORTED_MODULE_12__","_assets_sfx_tack_mp3__WEBPACK_IMPORTED_MODULE_12___default","_assets_sfx_A_bendUp_mp3__WEBPACK_IMPORTED_MODULE_13__","_assets_sfx_A_bendUp_mp3__WEBPACK_IMPORTED_MODULE_13___default","_assets_sfx_suspense_mp3__WEBPACK_IMPORTED_MODULE_14__","_assets_sfx_suspense_mp3__WEBPACK_IMPORTED_MODULE_14___default","_assets_sfx_emoji_mp3__WEBPACK_IMPORTED_MODULE_15__","_assets_sfx_emoji_mp3__WEBPACK_IMPORTED_MODULE_15___default","_utils_three_utils__WEBPACK_IMPORTED_MODULE_16__","soundEnum","SOUND_PREFERENCE_MENU_HOVER","pendingAudioSourceNodes","pendingPositionalAudios","positionalAudiosStationary","positionalAudiosFollowingObject3Ds","audioContext","AudioContext","audioListener","AudioListener","add","evt","cameraEl","getObject3D","soundsAndUrls","URL_TICK","URL_TELEPORT_LOOP","URL_QUICK_TURN","URL_TAP_MELLOW","URL_PEN_SPAWN","URL_PEN_DRAW","URL_CAMERA_SNAPSHOT","URL_WELCOME","URL_QUACK","URL_SPECIAL_QUACK","URL_POP","URL_FREEZE","URL_TACK","URL_MEDIA_LOADING","URL_MEDIA_LOADED","URL_SPAWN_EMOJI","loading","audioBufferPromise","arrayBuffer","decodeAudioData","sounds","sound","audioBuffer","enqueueSound","createBufferSource","buffer","destination","enqueuePositionalSound","positionalAudio","PositionalAudio","setBuffer","playPositionalSoundAt","matrixWorldNeedsUpdate","playPositionalSoundFollowing","playSoundOneShot","playSoundLooped","playSoundLoopedWithGain","gain","createGain","stopSoundNode","stop","stopPositionalAudio","inPositionalAudio","pendingIndex","isPlaying","tick","pendingPositionalAudio","play","positionalAudioAndObject3D","IfFeature","_utils_configs__WEBPACK_IMPORTED_MODULE_0__","props","DialogContainer","Component","super","_defineProperty","closable","currentTarget","onClose","onKeyDown","onContainerClicked","componentDidMount","componentWillUnmount","removeEventListener","render","react__WEBPACK_IMPORTED_MODULE_0___default","className","classNames","noOverlay","onClick","wide","allowOverflow","additionalClass","_fortawesome_react_fontawesome__WEBPACK_IMPORTED_MODULE_4__","icon","faTimes","title","PropTypes","isRequired","func","bool","string","qsTruthy","param","val","ReactAudioContext","WithHoverSound","react__WEBPACK_IMPORTED_MODULE_0__","prop_types__WEBPACK_IMPORTED_MODULE_1__","prop_types__WEBPACK_IMPORTED_MODULE_1___default","React","createContext","Consumer","cloneElement","onMouseEnter","playSound","propTypes","secondary-button","secondaryButton","bottom-links-main","bottomLinksMain","bottom-links","bottomLinks","close-button","closeButton","settings-menu-drop","settingsMenuDrop","attach-point","attachPoint","contents","rows","row","row-no-margin","rowNoMargin","row-header","rowHeader","list-item","listItem","list-item-link","listItemLink","settings-menu-overlay-wrap","settingsMenuOverlayWrap","settings-menu-overlay","settingsMenuOverlay","settings-row","settingsRow","secondary-link-item","secondaryLinkItem","entry-button-secondary","entryButtonSecondary","entry-panel","entryPanel","button-container","buttonContainer","secondary-action-button","secondaryActionButton","entry-button","entryButton","action-button","actionButton","collapse-button","collapseButton","favorite-button","favoriteButton","back","lobby-label","lobbyLabel","label","rename-button","renameButton","wide-button","wideButton","screen-sharing","screenSharing","checkbox","entry-dialog","entryDialog","favorited","bolded","subtitle","room-subtitle","roomSubtitle","lobby","profile-icon","profileIcon","button-subtitle","buttonSubtitle","audio-loader","audioLoader","webvr-link-container","webvrLinkContainer","webvr-link","webvrLink","secondary","ui","ui-dialog","uiDialog","ui-interactive","uiInteractive","object-list","objectList","presence-info","presenceInfo","corner-button","cornerButton","nag-corner-button","nagCornerButton","choose-scene-button","chooseSceneButton","leave-button","leaveButton","interstitial","invite-tip","inviteTip","streaming-tip","streamingTip","streaming-tip-attach-point","streamingTipAttachPoint","streaming-tip-close","streamingTipClose","streaming-tip-message","streamingTipMessage","ui-dialog-box-contents","uiDialogBoxContents","backgrounded","in-room-favorite-button","inRoomFavoriteButton","help-button","helpButton","occupant-count","occupantCount","presence-info-selected","presenceInfoSelected","camera-mode-exit-button","cameraModeExitButton","corner-button-selected","cornerButtonSelected","invite-tip-attach-point","inviteTipAttachPoint","avatar-editor","avatarEditor","room-info","roomInfo","scene-screenshot","sceneScreenshot","scene-details","sceneDetails","scene-main","sceneMain","scene-name","sceneName","scene-creator","sceneCreator","scene-attributions","sceneAttributions","attribution-name","attributionName","attribution-author","attributionAuthor","description","hub-title","hubTitle","presence-log","presenceLog","presence-log-entry","presenceLogEntry","message-body","messageBody","message-body-multi","messageBodyMulti","message-body-mono","messageBodyMono","message-wrap","messageWrap","message-wrap-multi","messageWrapMulti","message-source","messageSource","message-source-link","messageSourceLink","icon-button","iconButton","spawn-message","spawnMessage","share","mediaBody","expired","presence-log-entry-with-button","presenceLogEntryWithButton","presence-log-in-room","presenceLogInRoom","presence-log-spawn","presenceLogSpawn","presence-log-entry-one-line","presenceLogEntryOneLine","presence-log-emoji","presenceLogEmoji","emoji","ObjectTypes","FILE","CLIPBOARD","SPAWNER","URL_IMAGE","URL_VIDEO","URL_MODEL","URL_PDF","URL_AUDIO","FILE_IMAGE","FILE_VIDEO","FILE_MODEL","FILE_PDF","FILE_AUDIO","CLIPBOARD_IMAGE","CLIPBOARD_VIDEO","CLIPBOARD_MODEL","CLIPBOARD_PDF","CLIPBOARD_AUDIO","SPAWNER_IMAGE","SPAWNER_VIDEO","SPAWNER_MODEL","SPAWNER_PDF","SPAWNER_AUDIO","CAMERA","UNKNOWN","objectTypeForOrigin","urlType","fileType","clipboardType","spawnerType","objectTypeMimePrefixLookupMap","image/","model/","application/x-zip-compressed","video/","application/vnd.apple.mpegurl","application/x-mpegurl","audio/","application/pdf","srcSuffixLookupMap",".m3u8","prefix","suffix","panel","tip-cancel-text","tipCancelText","top-tip","topTip","container","top","column","bottom","hide","attach_video_share_mode","attachVideoShareMode","attach_video_share_failed","attachVideoShareFailed","attach_pen_mode","attachPenMode","attach_mute_mode","attachMuteMode","attach_freeze_mode","attachFreezeMode","top-tip-no-hud","topTipNoHud","tip-cancel","tipCancel","video-share-extra-options","videoShareExtraOptions","up","iconButtonIcon","spawn","small","large","disabled","video-share","videoShare","handleTextFieldFocus","handleTextFieldBlur","screenfull__WEBPACK_IMPORTED_MODULE_0__","screenfull__WEBPACK_IMPORTED_MODULE_0___default","_fullscreen__WEBPACK_IMPORTED_MODULE_1__","detect","require","browser","isExitingFullscreenDueToFocus","screenfull","isFullscreen","exit","focus","select","showFullScreenIfWasFullScreen","max-resolution-preference-item","maxResolutionPreferenceItem","number-with-range","numberWithRange","number-in-number-with-range","numberInNumberWithRange","preference-list-item","preferenceListItem","dropdown","content-container","contentContainer","panel-margin","panelMargin","dropdownArrow","preference-list-non-checkbox","preferenceListNonCheckbox","part","checkbox-margin","checkboxMargin","preferences-panel","preferencesPanel","scrolling-content","scrollingContent","section-bar","sectionBar","section-title","sectionTitle","row-name","rowName","reset-to-default-button","resetToDefaultButton","prev-option-scale","prevOptionScale","next-option-scale","nextOptionScale","prev-option-hovered-scale","prevOptionHoveredScale","next-option-hovered-scale","nextOptionHoveredScale","range-slider","rangeSlider","invite-container","inviteContainer","dialog","link-button","linkButton","enter-vr-button","enterVrButton","invite-button","inviteButton","enter-button","enterButton","invite-mini-button","inviteMiniButton","embed-text","embedText","invite-container-inverted","inviteContainerInverted","subscribe","embed-tip-wrap","embedTipWrap","embed-tip","embedTip","modal","invite-button-lowered","inviteButtonLowered","hide-small-screens","hideSmallScreens","link-code","linkCode","code-duration","codeDuration","invite-container-below-hud","inviteContainerBelowHud","code","keep-open","keepOpen","digit","digit_2","digit2","digit_3","digit3","code-loading-panel","codeLoadingPanel","hub-link-link","hubLinkLink","buttons","embed","embed-tip-attach-point","embedTipAttachPoint","AVATARS_API","AVATAR_TYPES","SKINNABLE","getAvatarType","avatarId","resp","avatars","fetchAvatar","_fetchAvatar","fetchSkinnableAvatar","avatar_id","gltf_url","avatar","getAvatarSrc","fetchAvatarGltfUrl","getAvatarThumbnailUrl","_getAvatarThumbnailUrl","files","thumbnail","MAT_NAME","ensureAvatarMaterial","materialForMesh","primitives","primitive","meshes","remixAvatar","_remixAvatar","parentId","parent_avatar_listing_id","enableThirdPersonMode","getInspectable","inspectable","parentNode","q","orbit","owq","owp","cwq","cwp","rwq","UP","RIGHT","Object3D","dhQ","dvQ","rig","dh","dv","dz","dt","panY","getWorldQuaternion","setFromAxisAngle","applyQuaternion","premultiply","dPos","subVectors","zoom","addVectors","moveRigSoCameraLooksAtObject","oForw","distanceMod","getBox","getCenter","sceneEl","is","dist","CAMERA_MODE_FIRST_PERSON","CAMERA_MODE_THIRD_PERSON_NEAR","CAMERA_MODE_THIRD_PERSON_FAR","CAMERA_MODE_INSPECT","CAMERA_MODE_SCENE_PREVIEW","NEXT_MODES","[object Object]","CAMERA_LAYER_INSPECT","CAMERA_LAYER_BATCH_INSPECT","ensureLightsAreSeenByCamera","isLight","layers","enable","enableInspectLayer","batch","batchManager","batchForMesh","disableInspectLayer","disable","FALLOFF","CameraSystem","translation","enteredScene","avatarPOVRotator","avatarPOV","viewingCameraRotator","viewingCamera","userinput","interaction","hoverEl","rightRemote","hovered","leftRemote","inspect","temporarilyDisableRegularExit","uninspect","nextMode","headShouldBeVisible","playerHead","getElementById","avatarRig","viewingRig","makeTranslation","horizontalDelta","verticalDelta","inspected","enableLights","localStorage","getItem","snapshot","audioTransform","audioListenerTargetTransform","bg","BoxGeometry","MeshBasicMaterial","color","BackSide","renderer","vr","setPoseTarget","getCamera","mask","mask0","cameras","mask1","hideEverythingButThisObject","audio","getAudio","showEverythingAsNormal","forEachMaterial","fn","isArray","names","chooseRandom","arr","fetchRandomDefaultAvatarId","_fetchRandomDefaultAvatarId","defaultAvatars","ducky","LOCAL_STORE_KEY","STORE_STATE_CACHE_KEY","OAUTH_FLOW_CREDENTIALS_KEY","validator","Validator","SCHEMA","definitions","additionalProperties","properties","displayName","pattern","personalAvatarId","activity","hasFoundFreeze","hasChangedName","hasAcceptedProfile","lastEnteredAt","hasPinned","hasRotated","hasRecentered","hasScaled","hasHoveredInWorldHud","hasOpenedShare","entryCount","settings","lastUsedMicDeviceId","preferences","muteMicOnEntry","enableOnScreenJoystickLeft","enableOnScreenJoystickRight","onlyShowNametagsInFreeze","allowMultipleHubsInstances","maxResolutionWidth","maxResolutionHeight","globalVoiceVolume","globalMediaVolume","snapRotationDegrees","materialQualitySetting","disableMovement","disableBackwardsMovement","disableStrafing","disableTeleporter","confirmedDiscordRooms","items","confirmedBroadcastedRooms","onLoadActions","action","args","$ref","EventTarget","jwtDecode","exp","Date","now","store_asyncToGenerator","_shouldResetAvatarOnInit","resetToRandomDefaultAvatar","setItem","dispatchEvent","CustomEvent","oauthFlowCredentials","Cookies","getJSON","_signOutOnExpiredAuthToken","credentialsAccountId","resetConfirmedBroadcastedRooms","clearStoredArray","resetTipActivityFlags","bumpEntryCount","currentEntryCount","enqueueOnLoadAction","executeOnLoadActions","clearOnLoadActions","arrayMerge","destinationArray","sourceArray","newState","mergeOpts","finalState","merge","valid","validate","showHoverEffect","isFrozen","isPinned","pinnable","pinned","isSpawner","canMove","hubChannel","can","networkedTemplate","isCamera","isPen","holdableButton","indexForComponent","component","schema","fullComponent","componentName","schemaComponent","authorizeOrSanitizeMessage","applyPersistentSync","nonAuthorizedSchemas","sanitizeMessageData","schemaDict","schemas","nonAuthorizedComponents","nonAuthorizedComponent","toString","initializeNonAuthorizedSchemas","nonAuthorizedIndices","authorizeEntityManipulation","entityMetadata","sender","senderPermissions","isCreator","pin_objects","spawn_and_move_media","spawn_camera","spawn_drawing","getPendingOrExistingEntityMetadata","networkId","pendingData","connection","adapter","getPendingDataForNetworkId","pinnableComponent","entities","getEntity","authorizeOrSanitizeMessageData","persistentSyncs","stashPersistentSync","entityData","currentData","currentComponents","assign","dataType","from_session_id","emptyObject","isFirstSync","persistent","presenceState","permissions","sanitizedAny","stashedAny","PHOENIX_RELIABLE_NAF","onData","navigation-button","navigationButton","primary-action-buttons","primaryActionButtons","cancel","title-and-close","titleAndClose","object-display-string","objectDisplayString","cancel-text","cancelText","client-info-dialog","clientInfoDialog","community-identifier","communityIdentifier","client-info","clientInfo","client-profile-image","clientProfileImage","client-details","clientDetails","client-main","clientMain","action-button-sections","actionButtonSections","action-button-placeholder","actionButtonPlaceholder","left-action-buttons","leftActionButtons","right-action-buttons","rightActionButtons","button-icon","buttonIcon","primary-action-button","primaryActionButton","registerTelemetry","raven_js__WEBPACK_IMPORTED_MODULE_0__","raven_js__WEBPACK_IMPORTED_MODULE_0___default","_utils_configs__WEBPACK_IMPORTED_MODULE_1__","ga","trackedPage","trackedTitle","sentryDsn","SENTRY_DSN","gaTrackingId","GA_TRACKING_ID","Raven","install","client-link","clientLink","presence-list","presenceList","sign-in","signIn","self","moderator-badge","moderatorBadge","getScaleCoefficient","computeObjectAABB","bounds","Box3","makeEmpty","boundingBox","computeBoundingBox","union","applyMatrix4","Euler","boxRoot","worldSpace","updateMatrixWorld","isEmpty","worldToLocal","dX","dY","dZ","message-entry-input","messageEntryInput","message-entry","messageEntry","message-entry-disabled","messageEntryDisabled","message-entry-button","messageEntryButton","message-entry-spawn","messageEntrySpawn","message-entry-button-in-room","messageEntryButtonInRoom","message-entry-upload","messageEntryUpload","message-entry-in-room","messageEntryInRoom","message-entry-input-in-room","messageEntryInputInRoom","message-entry-input-no-spawn","messageEntryInputNoSpawn","message-entry-on-mobile","messageEntryOnMobile","hasEnteredFullScreenThisSession","shouldShowFullScreen","isIOS","enabled","willRequireUserGesture","showFullScreenIfAvailable","_showFullScreenIfAvailable","request","_showFullScreenIfWasFullScreen","nextTick","setTimeout","raycast","acceleratedRaycast","gltfCache","cache","count","retain","cacheItem","release","delete","inflightGltfs","extractZipFile","promisifyWorker","SketchfabZipWorker","defaultInflator","componentData","multiple","cloneGltf","getHubsComponents","hubsComponents","userData","gltfExtensions","MOZ_hubs_components","HUBS_components","legacyComponents","GLTFModelPlus","registerComponent","componentKey","inflator","inflateEntities","indexToEntityMap","templates","isRoot","modelToWorldScale","childEntities","entityComponents","order","setFromQuaternion","matrixAutoUpdate","setObject3D","generateUUID","gltfIndex","inflatedEntity","isFirstInflation","objectInflations","objectInflation","promise","prop","_x9","attachTemplate","templateRoot","targetEls","getHubsComponentsExtension","extensions","extras","loadGLTF","_loadGLTF","preferredTechnique","jsonPreprocessor","fileMap","loadingManager","LoadingManager","setURLModifier","gltfLoader","GLTFLoader","parser","createParser","oldHeightfieldNode","heightfield","light","range","decay","runMigration","MOZ_alt_materials","altMaterialIndex","DefaultMatrixAutoUpdate","isMeshStandardMaterial","MobileStandardMaterial","fromStandardMaterial","keys","revokeObjectURL","loadModel","_x8","_loadModel","useCache","resolveAsset","assetEl","default","inflate","init","loadTemplates","applySrc","model","removeObject","object3DMap","templateEl","lastSrc","inflatedEl","disposeLastInflatedEl","addObject","initMixer","hasBufferGeometry","isBufferGeometry","hasBoundsTree","geo","triCount","MeshBVH","strategy","maxDepth","object3DToSet","inflateComponents","rewires","environmentMapComponent","applyEnvironmentMap","f","format","removeAttribute","profile-entry","profileEntry","form-submit","formSubmit","choose-avatar","chooseAvatar","form-field-text","formFieldText","logo","form","display-name","preview","edit-avatar","editAvatar","tweet-button","tweetButton","tweet","editor","editor-inner","editorInner","emoji-button","emojiButton","counter","posted","tweet-loader","tweetLoader","dialog-background","dialogBackground","findAncestorWithComponent","Blob","createObjectURL","putImageData","toDataURL","img","disposeImageBitmap","imageBitmap","HTMLImageElement","email-field","emailField","next-button","nextButton","continue-button","continueButton","sign-in-form","signInForm","sign-in-complete","signInComplete","terms","applyThemeToTextButton","getThemeColor","_async_utils__WEBPACK_IMPORTED_MODULE_0__","DEFAULT_COLORS","action-color","action-label-color","action-color-disabled","action-color-highlight","action-text-color","action-subtitle-color","notice-background-color","notice-text-color","favorited-color","highlighted","actionColor","actionHoverColor","VERTEX_SHADER","FRAGMENT_SHADER","ShaderMaterial","parameters","UniformsUtils","UniformsLib","fog","uvTransform","Matrix3","diffuse","opacity","aoMapIntensity","aoMap","emissive","emissiveMap","lights","transparent","alphaTest","skinning","morphTargets","vertexColors","mobileMaterial","emissiveIntensity","refreshUniforms","uvScaleMap","updateMatrix","description-field","descriptionField","name-field","nameField","room-settings-form","roomSettingsForm","select-container","selectContainer","permission","permissions-group","permissionsGroup","permission-disabled","permissionDisabled","tip-root","tipRoot","tip-link","tipLink","tip","split-tip","splitTip","split-tip-icon","splitTipIcon","spawn_menu-icon","spawnMenuIcon","object_rotate_button-icon","objectRotateButtonIcon","object_scale_button-icon","objectScaleButtonIcon","object_recenter_button-icon","objectRecenterButtonIcon","tour-tip-root","tourTipRoot","COLLISION_LAYERS","ALL","NONE","INTERACTABLES","ENVIRONMENT","AVATAR","HANDS","DEFAULT_INTERACTABLE","UNOWNED_INTERACTABLE","DEFAULT_SPAWNER","worker","nextItemId","outstanding","onmessage","handlers","transfer","postMessage","EMPTY_RESULT","URL_SOURCE_TO_TO_API_SOURCE","videos","youtube","gifs","sketchfab","poly","twitch","favorites","availableIntegrations","SOURCES","apiSource","MEDIA_SOURCE_DEFAULT_FILTERS","SEARCH_CONTEXT_PARAMS","MediaSearchStore","urlSource","getUrlMediaSource","previousSource","urlParams","requestIndex","currentRequestIndex","locationSearchParams","isMy","singular","lastSavedUrl","isFetching","nextCursor","next_cursor","lastFetchedUrl","goBack","query","keepSource","keepNav","keepSelectAction","_stashedParams","_stashedSource","_sourceNavigate","selectAction","hideNav","useLastStashedParams","currentQuery","getSearchClearedSearchParams","useValue","hasAccountWithAvatars","_hasAccountWithAvatars","stashLastSearchParams","_stashLastSearchParams","hasMediaPath","setHistory","_update","StateLink","handleClick","defaultPrevented","metaKey","altKey","ctrlKey","shiftKey","isModifiedEvent","preventDefault","stateKey","stateValue","stateDetail","innerRef","ref","touchZone","mockJoystickContainer","mockJoystick","inner","small-button","smallButton","input-border","inputBorder","left-side-of-input","leftSideOfInput","add-media-form","addMediaForm","cancel-icon","cancelIcon","upload-icon","uploadIcon","hide-file-input","hideFileInput","imageHeader","disableiOSZoom","detect_browser__WEBPACK_IMPORTED_MODULE_0__","detectOS","userAgent","lastTouchAtMs","ev","getTime","isDoubleTouch","registerComponentInstance","componentRegistry","deregisterComponentInstance","getCurrentStreamer","playerInfos","playerInfo","playerSessionId","streaming","hackyMobileSafariTest","hackyMobileSafariTestValue","hasTouchScreen","maxTouchPoints","msMaxTouchPoints","mQ","matchMedia","UA","detectTouchScreen","SignInDialog","stopPropagation","onSignIn","authStarted","react_intl__WEBPACK_IMPORTED_MODULE_2__","authComplete","styles","onContinue","continueText","onSubmit","required","placeholder","onFocus","onBlur","onChange","setState","_if_feature__WEBPACK_IMPORTED_MODULE_4__","rel","_dialog_container__WEBPACK_IMPORTED_MODULE_6__","_extends","_utils_material_utils__WEBPACK_IMPORTED_MODULE_0__","_utils_permissions_utils__WEBPACK_IMPORTED_MODULE_1__","interactorOneTransform","interactorTwoTransform","enableSweepingEffect","geometryRadius","sweepParams","isTouchscreen","time","showEffect","toggling","cursorTogglingSystem","interactorOne","interactorTwo","ready","held","options","leftToggledOff","rightToggledOff","toArray","worldY","elements","ms1","ms2","ms3","scaledRadius","sqrt","uniform","getReader","read","readChunk","done","isValidSceneUrl","_isValidSceneUrl","trim","_isValidGLB","isValidGLB","allowDisplayOfSceneLink","account_id","allow_promotion","allow_remixing","load-button","loadButton","treatment","screenshot","hub-name","hubName","main-panel","mainPanel","createDefaultEnvironmentMap","_createDefaultEnvironmentMap","urls","cubeMapPosX","cubeMapNegX","cubeMapPosY","cubeMapNegY","cubeMapPosZ","cubeMapNegZ","CubeTextureLoader","RGBFormat","environmentMap","updateEnvironmentMap","App","_storage_store__WEBPACK_IMPORTED_MODULE_0__","_storage_media_search_store__WEBPACK_IMPORTED_MODULE_1__","mediaSearchStore","setQuality","TEXTURE_PROPS","base_map","emissive_map","normal_map","orm_map","ALL_MAPS","createRenderer","alpha","useDevicePixelRatio","depth","antialias","premultipliedAlpha","preserveDrawingBuffer","powerPreference","WebGLRenderer","forceWebVR","gammaOutput","gammaFactor","physicallyCorrectLights","setPixelRatio","devicePixelRatio","createImageBitmapFromURL","blob","ORBIT_ANGLE","DEG2RAD","DEFAULT_MARGIN","fitBoxInFrustum","margin","applyEuler","lookAt","AvatarPreview","Scene","PerspectiveCamera","clientWidth","clientHeight","controls","OrbitControls","enablePan","DirectionalLight","HemisphereLight","loadId","avatarGltfUrl","loadCurrentAvatarGltfUrl","clock","Clock","snapshotCanvas","snapshotCamera","snapshotRenderer","setClearAlpha","previewRenderer","setClearColor","setAnimationLoop","getDelta","mixer","resize","parentElement","offsetWidth","offsetHeight","setSize","updateProjectionMatrix","resetCamera","setFromObject","domElement","imageBitmaps","oldProps","applyMaps","technique","previewMesh","idleAnimation","AnimationMixer","clipAction","setLoop","LoopRepeat","Infinity","idleAnimationAction","getImage","originalMaps","all","bm","toBlob","_this2","newLoadId","loadPreviewAvatar","onGltfLoaded","setAvatar","newProps","mapName","applyMap","applyMapToPreview","revertMap","react__WEBPACK_IMPORTED_MODULE_2___default","_assets_images_warning_icon_png__WEBPACK_IMPORTED_MODULE_0___default","srcSet","_assets_images_warning_icon_2x_png__WEBPACK_IMPORTED_MODULE_1___default","react_intl__WEBPACK_IMPORTED_MODULE_4__","injectIntl","withRef","spoke-launch","spokeLaunch","change-scene-button","changeSceneButton","spoke-create","spokeCreate","oauth-discord-button","oauthDiscordButton","oauth-twitter-button","oauthTwitterButton","oauth-button","oauthButton","oauth-type-name","oauthTypeName","oauth-icon","oauthIcon","privacy-notice","privacyNotice","oauth-buttons","oauthButtons","twitter-message","twitterMessage","xr","requestDevice","getVRDisplays","MIN_VOLUME_THRESHOLD","calculateVolume","analyser","levels","getByteTimeDomainData","sum","amplitude","tempScaleFromPosition","tempScaleToPosition","getAudioFeedbackScale","fromObject","toObject","minScale","maxScale","volume","distanceTo","updateVolume","newRawVolume","newPerceivedVolume","mapLinear","E","prevVolume","getAnalyser","ikRootEl","analyserEl","loudest","_updateAnalysis","_runScheduledWork","schedule","createAnalyser","fftSize","Uint8Array","soundSource","unschedule","avatarIsQuiet","lastSeenVolume","registerSystem","mediaStream","stream","createMediaStreamSource","connectAnalyser","setScalar","minValue","maxValue","skinnedmesh","morphNumber","morphTargetDictionary","morphTargetInfluences","easeOutQuadratic","SPRITE_NAMES","MIC","MIC_HOVER","MIC_OFF","MIC_OFF_HOVER","micLevelForVolume","clamp","ceil","active","tooltip","tooltipText","activeTooltipText","prevSpriteName","hovering","onHover","onHoverOut","pause","textEl","audioAnalyser","spriteName","UnlessFeature","AuthChannel","signOut","_signedIn","signedIn","verifyAuthentication","authTopic","authToken","authPayload","leave","handleAuthCredentials","startAuthentication","_this3","_this4","addAnimationComponents","modelEl","debug__WEBPACK_IMPORTED_MODULE_0__","debug__WEBPACK_IMPORTED_MODULE_0___default","_qs_truthy__WEBPACK_IMPORTED_MODULE_1__","isDebug","logFilter","maskEmail","emailParts","emailIdentity","emailDomain","RoomInfoDialog","hasDescription","hubDescription","hasScene","showSceneLink","toAttributionDiv","author","attributions","_dialog_container_js__WEBPACK_IMPORTED_MODULE_3__","Fragment","screenshot_url","sceneButtons","dayjs","extend","relativeTime","PUBLISHER_FOR_ENTRY_TYPE","sketchfab_model","poly_model","twitch_stream","MediaTiles","onCopyAvatar","parent_scene_id","onCopyScene","isImage","isAvatar","imageAspect","innerWidth","imageWidth","imageHeight","imageSrc","isHub","getTileDimensions","thumbnailElement","muted","autoPlay","playsInline","publisherName","formatMessage","intl","handleEntryClicked","_state_link__WEBPACK_IMPORTED_MODULE_20__","_fortawesome_react_fontawesome__WEBPACK_IMPORTED_MODULE_6__","faPencilAlt","onShowSimilar","faSearch","handleCopyAvatar","faClone","handleCopyScene","project_id","handleEntryInfoClicked","faInfo","faStar","faExternalLinkAlt","react_intl__WEBPACK_IMPORTED_MODULE_5__","last_activated_at","fromNow","faUsers","member_count","hasNext","hasPrevious","page","isVariableWidth","createTileWidth","createTileHeight","_if_feature__WEBPACK_IMPORTED_MODULE_17__","faPlus","entryToTile","handlePager","previousPage","faAngleLeft","nextPage","faAngleRight","array","number","patchWebGLRenderingContext","originalGetExtension","WebGLRenderingContext","getExtension","supportsFloatTextures","Float32Array","size","dataTexture","DataTexture","RGBAFormat","FloatType","PlaneBufferGeometry","Camera","getError","checkFloatTextureSupport","ScenePreviewCameraSystem","_camera_system_js__WEBPACK_IMPORTED_MODULE_0__","register","unregister","hubsSystems","cameraSystem","tick2","deriveKey","privateKey","publicKey","crypto","subtle","public","publicKeyToString","exportKey","stringToPublicKey","importKey","namedCurve","stringToArrayBuffer","buf","charCodeAt","arrayBufferToString","keyPair","generateKey","publicKeyString","incomingPublicKeyString","iv","incomingPublicKey","secret","encryptedData","encrypt","base64value","ciphertext","atob","decrypt","LINK_ACTION_TIMEOUT","LinkChannel","onFinished","finished","getLetter","readyToSend","leftChannel","incoming","_generatePublicKeyAndEncryptedObject","generatePublicKeyAndEncryptedObject","public_key","target_session_id","reply_to_session_id","_generateKeys","generateKeys","numOccupants","session_id","_decryptObject","decryptObject","command-help","commandHelp","command","cancel-button","cancelButton","confirm-button","confirmButton","help-dialog","helpDialog","docs-link","docsLink","tour-button","tourButton","zeroPos","zeroQuat","oneScale","bindingSetters","SetterByBindingTypeAndVersioning","Versioning","setter","MatrixWorldNeedsUpdate","targetObject","getWorldPosition","getWorldScale","handleMatrixModification","cachedMatrixWorld","forceLocalUpdate","forceWorldUpdate","skipParents","hasHadFirstMatrixUpdate","equals","includeInvisible","forceChildrenWorldUpdate","q1","m1","isVector3","inverse","animation","colorHelperFrom","Color","colorHelperTo","getComponentProperty","setComponentProperty","splitCache","TYPE_COLOR","STRING_COMPONENTS","STRING_OBJECT3D","toRadians","addEventListeners","eventNames","removeEventListeners","getRawProperty","splitDot","setRawProperty","targetValue","g","isRawProperty","autoplay","delay","dir","parseInt","startEvents","pauseEvents","resumeEvents","eventDetail","attrName","animationIsPlaying","onStartEvent","beginAnimation","pauseAnimation","resumeAnimation","fromColor","toColor","targetsArray","updateConfigForDefault","updateConfigForRawColor","oldData","direction","createAndStartAnimation","cancelDelayedStart","paused","pausedWasPlaying","updateConfig","delayTimeout","stopRelatedAnimations","waitComponentInitRawProperty","setColorConfig","isBoolean","isNaN","parseFloat","aframeProperty","updateConfigForVector","coordinates","propType","getPropertyType","cb","wait","clearTimeout","intensity","AmbientLight","registerLight","rendererSystem","prevData","applyColorCorrection","removeObject3D","initialForce","maxForce","physicsSystem","physics","hasBody","CANNON","Vec3","force","addComponent","removeComponent","beforeStep","isMine","currentScale","angle","applyForce","generateAndAddHeightfield","shape","mass","mult","cannonOffset","Heightfield","elementSize","addShape","skyColor","groundColor","onQualityChanged","updateComponentState","castShadow","shadowMapResolution","shadowBias","shadowRadius","PointLight","shadow","bias","radius","prevWidth","prevHeight","mapSize","innerConeAngle","outerConeAngle","SpotLight","penumbra","autoLockOnLoad","autoLockOnRelease","modifyGravityOnRelease","releaseGravity","reduceAngularFloat","gravitySpeedLimit","onGrab","onRelease","bodyHelper","isHeld","wasHeld","_makeStaticWhenAtRest","linearThreshold","linearSleepingThreshold","angularThreshold","angularSleepingThreshold","isAtRest","physicsBody","getLinearVelocity","getAngularVelocity","hasBeenHereBefore","gravity","setLocked","locked","getVelocity","angularDamping","linearDamping","collisionFilterMask","stuckTo","_unstickObject","sizeVec","boundingBoxWorldPositionVec","colliderWorldPositionVec","colliders","enterComponent","enterProperty","enterValue","leaveComponent","leaveProperty","leaveValue","collidingLastFrame","setFromCenterAndSize","isColliding","containsPoint","onPauseStateChange","videoComponent","onVideoLoaded","video","togglePlaying","origDispatch","firstObject","Pathfinding","pathfinder","loadMesh","zone","Geometry","fromBufferGeometry","setZoneData","createZone","eventSource","events","eventListeners","_handleEvent","frustumBox","inverseLightMatrixWorld","tempBox","FRUSTUM_PADDING","NEAR_CLIPPING_PLANE","FAR_CLIPPING_PLANE","verts","expandByPoint","near","far","resizeShadowCameraFrustum","Layers","reflection","inWorldHud","exclusive","layer","oldValue","newValue","clip","activeClipIndex","mixerEl","updateClip","currentAction","clipName","destroy","loadingObjectEnvMap","loadingObject","loadingObjectSrc","forceMeshBatching","disableBatching","playSoundEffect","showLoader","clearLoadingTimeout","onMediaLoaded","handleLinkedElRemoved","refresh","animating","getNetworkedEntity","networkedEl","updateScale","scaleCoefficient","removeShape","loaderMixer","sfx","soundEffectsSystem","loadingSoundEffect","loadedSoundEffect","useFancyLoader","currentEnivronmentMap","loadingClip","loadingScaleClip","VectorKeyframeTrack","SHAPE","BOX","showLoaderTimeout","updateHoverableVisuals","boundingSphere","Sphere","hoverableVisuals","injectedCustomShaderChunks","getBoundingSphere","physicsShape","shouldUpdateScale","finish","minHalfExtent","registerLinkage","takeOwnership","srcChanged","canonicalUrl","canonicalAudioUrl","accessibleUrl","isLocalModelAsset","projection","origin_audio","expected_content_type","fetchContentType","raw","isHLS","linkedVideoTexture","linkedAudioSource","linkedMediaElementAudioSource","linkedMediaVideo","videoTexture","audioSource","mediaElementAudioSource","qsTime","startTime","hash","audioSrc","dirs","HULL","mayChangeScene","maxIndex","onNext","onPrev","onSnap","getHoverMenu","hoverMenu","prevButton","snapButton","pageLabel","pinnableElement","newIndex","quackPercentage","specialQuackPercentage","_handleGrabStart","rand","lerp","newRot","positionOnly","scenePreviewCameraSystem","startPoint","targetPoint","targetRotDelta","targetRotation","setFromEuler","performance","backwards","ranOnePass","streamerCamera","streamer","getStreamerCamera","translateZ","fromRot","toRot","isBotMode","CubeCamera","BoxBufferGeometry","PMREMGenerator","skybox_PMREMGenerator","PMREMCubeUVPacker","Sky","skyScene","cubeCamera","sky","_geometry","_inclination","_azimuth","_distance","updateSunPosition","turbidity","rayleigh","luminance","mieCoefficient","mieDirectionalG","inclination","azimuth","phi","sunPosition","generateEnvironmentMap","vrEnabled","pmremGenerator","renderTarget","pmremCubeUVPacker","cubeLods","CubeUVRenderTarget","recursive","skyIndex","requestAnimationFrame","playerHeight","loadedEvent","moveToSpawnPoint","spawnPoints","spawnPoint","spawnScale","NaN","spawnCooldown","spawnEvent","animateFromCursor","cooldownTimeout","handPosition","onSpawnEvent","tempSpawnHandPosition","handleMediaLoaded","spawnedMediaScale","spawnedEntity","boxSize","divideScalar","hand","willAnimateFromCursor","spawning","activateCooldown","syncToPhysics","sx","sy","sz","MobileWater","normalSampler","waterNormals","sunDirection","sunColor","waterColor","eye","distortionScale","FrontSide","mirrorShader","ShaderChunk","TextureLoader","wrapS","wrapT","RepeatWrapping","Water","speed","forceMobile","waterMesh","waterGeometry","loadWaterNormals","waterNormalMap","waterConfig","textureWidth","textureHeight","water","mirrorCamera","setStyle","simple_water_Mesh","MeshStandardMaterial","MeshPhongMaterial","Vector2","Octave","alternate","SimpleWater","resolution","lowQuality","rotateX","waterUniforms","ripplesSpeed","ripplesScale","materialClass","specular","receiveShadow","dynamic","octaves","simplex","SimplexNoise","tideHeight","tideScale","tideSpeed","waveHeight","waveScale","waveSpeed","positionAttribute","octave","noise","setY","computeVertexNormals","vec2Equals","waterNormalsUrl","defaultSrcUrl","defaultSrcImage","startColor","middleColor","endColor","startOpacity","middleOpacity","endOpacity","colorCurve","sizeCurve","startSize","endSize","sizeRandomness","ageRandomness","lifetime","lifetimeRandomness","particleCount","startVelocity","endVelocity","velocityCurve","particleEmitter","ParticleEmitter","updateParticles","setTexture","getSanitizedComponentMapping","inputComponent","inputProperty","publicComponents","publicComponent","publicProperty","publicProperties","mappedComponent","mappedProperty","getMappedValue","registerRootSceneComponent","mediaInflator","isControlled","hasVolume","templateName","owner","videoPaused","audioType","hidePlaybackControls","distanceModel","rolloffFactor","refDistance","maxDistance","coneInnerAngle","coneOuterAngle","coneOuterGain","isHandCollisionTarget","TYPE","STATIC","collisionFilterGroup","euler","fit","FIT","MANUAL","halfExtents","canBeSpawnPoint","canBeOccupied","canBeClicked","willDisableMotion","willDisableTeleporting","willMaintainWorldUp","_componentName","found","attachTemplateToLocal","mediaLoaderAttributes","pageIndex","loop-animation","enterComponentMapping","leaveComponentMapping","targetEntity","HEIGHTFIELD","heightfieldDistance","heightfieldData","MESH","audioSettingsSystem","updateAudioSettings","loading-text","loadingText","avatar-url-dialog","avatarUrlDialog","form-frame","formFrame","leave-room","leaveRoom","_qs_truthy__WEBPACK_IMPORTED_MODULE_0__","showLog","debugLog","debugLogInput","debugLogEval","onsubmit","eval","minimized","debugLogMinimize","onclick","scrollTop","scrollHeight","origConsoleInfo","origConsoleLog","origConsoleError","origConsoleWarn","objs","childNodes","firstObj","stack","toISOString","textContent","shouldScroll","onunhandledrejection","reason","onerror","registerMe","unregisterMe","system","resume","setInitial","_lastPosition","_lastOrientation","_lastListenerPosition","panner","listener","EPSILON","positionX","positionY","positionZ","setOrientation","baseScale","addedScale","didRegister","scaleInScreenSpaceSystem","unmutedBoneName","mutedBoneName","onPos","offPos","onStateToggled","unmutedBone","getObjectByName","mutedBone","modelLoaded","updateMuteState","lastVisible","fadeOut","beginTransition","fadeIn","_resolveFinish","mat","hoverImage","activeImage","activeHoverImage","disabledImage","updateButtonState","sprite","textHoverColor","textColor","backgroundHoverColor","backgroundColor","noop","dependencies","block","mute","kick","updateVisibility","canOrWillIfCreator","contentTypes","mediaLoader","mediaImage","mediaVideo","mediaPdf","currentContentType","matchesType","targetContentType","matchesSubtype","whenPinned","_updateUI","_updateUIOnStateChange","targetEl","pinnedAndForbidden","left_hand_pose","right_hand_pose","_fireEventsAndAnimate","pinStateChanged","didFireThisFrame","transformObjectSystem","transforming","wasTransforming","activate","track","selector","myCamera","getMyCamera","isVisible","shouldBeVisible","onStateChange","newOwner","transform","oneof","stateadded","stateremoved","withPermission","needsPermission","updatePermissions","hasPermission","onPermissionsUpdated","requireOwnership","targetPos","snappedRot","snappedQ","snappedXForm","snappedXFormWorld","tempVector","isHovered","hoveredEl","_hoveredFrames","_applyMaskedTargetRotation","started","reset","_updateMatrixAutoUpdate","dim","onFrozenStateChange","applyHoverState","menuPromise","hoverContainer","allowed","frustumCulled","currentActiveCamera","activeCameraEl","setActiveCamera","cursorPoseTrackingSystem","playhead","poseIndex","overflow","poses","timestamp","_updateBillboard","_updateIsInView","isInView","frustum","Frustum","frustumMatrix","boxTemp","expandBox","isInViewOfCamera","screenCamera","projectionMatrix","matrixWorldInverse","setFromMatrix","intersectsBox","playerCamera","cameraTools","ifMyCameraRenderingViewfinder","cameraTool","lastSync","syncAll","onStoreChanged","maxCanvasSize","registry","queues","frameIndex","queue","invert","inVRMode","class","permissionName","fetchPermissions","onTimeout","onEnterVR","isOculusBrowser","enteredVR","lastTimeoutCheck","exitTimeout","deltas","secondsSinceMeasurementStart","secondsSinceSceneVisible","visibilityState","sort","medianFps","newPixelRatio","getPixelRatio","toFixed","addLinkageHandler","syncLinkage","elA","elB","_handlingLinkage","waitForMediaLoader","handlerA","handlerB","deregisterLinkage","syncedVideoAttributes","syncTolerance","updatePlaybackState","_syncCounterRegistration","timestamps","deregister","ttl","POSITIVE_INFINITY","setBodyKinematic","didThisOnce","clear","_destroyOldest","oldestEl","minTs","MAX_VALUE","ts","_destroy","teleporters","queryCollisionEntities","penSpawner","drawingToPen","drawingEl","createDrawing","createDrawingPromise","handNetworkedDrawingInit","drawing","destroyDrawing","networkedDrawing","getDrawingPromise","getDrawing","returnDrawing","bindAllEvents","unbindAllEvents","eventSrc","toggleEvents","muteEvents","unmuteEvents","onToggle","onMute","onUnmute","enableMicrophone","removeState","addState","mic","cameraBtn","inviteBtn","background","updateButtonStates","onMicClick","onSpawnClick","onPenClick","onCameraClick","onInviteClick","emitDecayTime","emitFadeTime","emitEndTime","particleEmitterConfig","lastLinearVelocity","lastAngularVelocity","particleConfig","originalParticleCount","initialized","linearVelocity","linearAcceleration","angularAcceleration","emojis","emoji_0","emoji_1","emoji_2","emoji_3","emoji_4","emoji_5","emoji_6","particles","emoji_particle_0","emoji_particle_1","emoji_particle_2","emoji_particle_3","emoji_particle_4","emoji_particle_5","emoji_particle_6","setOffsetVector","totalNumEmojis","spacing","offsetVector","sign","spawnerScale","spawnedScale","hudAngle","minHudAngle","maxHudAngle","hudDistance","spawnerPlatformWidth","spawnerPlatformSpacing","cameraWorldPosition","_onFrozen","_onThaw","spawnerEntities","spawnerEntity","requireHoverOnNonMobile","cameraObject3D","cylinder","_updateOffset","targetWorldPos","cameraForward","projectedCameraForward","angledCameraForward","defaultRight","transformDirection","projectOnPlane","DefaultUp","dot","angleTo","angleOffset","applyAxisAngle","characterController","onEnterVr","onExitVr","onFirstInteraction","onMoveJoystickChanged","onMoveJoystickEnd","onLookJoystickChanged","onLookJoystickEnd","leftMock","leftMockSmall","rightMock","rightMockSmall","enableLeft","createLeftStick","enableRight","createRightStick","onPreferenceChange","inVr","moving","rotating","displacement","lookDy","lookDx","newEnableLeft","newEnableRight","leftStick","leftTouchZone","rightStick","rightTouchZone","nipplejs","fadeTime","off","preferenceScreenIsVisible","radian","enqueueRelativeMotion","enqueueInPlaceRotationAroundWorldUp","display","leftController","rightController","HAND_ROTATIONS","makeRotationFromEuler","leftEye","rightEye","neck","chest","rotationSpeed","alwaysUpdate","headTransform","hipsPosition","invHipsToHeadVector","middleEyeMatrix","middleEyePosition","invMiddleEyeToHead","cameraYRotation","cameraYQuaternion","invHipsQuaternion","headQuaternion","rootToChest","invRootToChest","ikRoot","findIKRoot","hasConvergedHips","lastCameraTransform","forceIkUpdate","negate","hasNewCameraTransform","_hadFirstTick","epsilon","u","w","updateHand","_hasFirstTick","handRotation","handObject3D","controllerObject3D","isLeft","handMatrix","spaceInvader","setAlwaysHidden","cameraWorld","POSES","poseForFingers","subpath","previous","current","handleLeftVisuals","handleRightVisuals","hadLeftVisualLastFrame","hadRightVisualLastFrame","interactingElement","hideVisual","selfDestruct","updateOffset","QUARTER_CIRCLE","rotateOnAxis","ensureAvatarNodes","some","originalRoot","scale-audio-feedback","avatarSrc","avatarType","identityName","isOwner","isRecording","applyProperties","updateDisplayName","applyDisplayName","handleModelError","isLocalPlayerInfo","networkedEntity","getCreator","playerPresence","updateDisplayNameFromPresenceMeta","presenceMeta","recording","roles","infoShouldBeHidden","nametagEl","identityNameEl","recordingBadgeEl","modBadgeEl","open","thumbDown","indexDown","mrpDown","thumbUp","point","fist","NETWORK_POSES","animatePose","networkField","getNetworkedAvatar","networkedAvatar","prev","curr","setHandPose","TWOPI","lookCutoff","animRange","yawCutoff","onChildHovered","removeHoverEvents","isYLocked","lockedHeadPositionY","lookDir","lookEuler","hoverableChildren","pitch","RAD2DEG","yawDif","deltaAngle","forceHudVisible","hudLocked","hudOutOfView","frozen","wasInspecting","withinDistance","withoutPermission","visibleIfOwned","camWorldPos","objWorldPos","cam","hoverableSearch","hoverable","shouldNotBeVisible","isWithinDistance","isTransforming","toggle","onExpand","onCollapse","stats","threeStats","aframeStats","plugins","rStats","css","fps","caption","below","batchdraws","batchinstances","batchatlassize","createStats","statsEl","statsHeaderEl","statsTitleEl","collapseEl","insertBefore","fpsEl","lastFpsUpdate","lastFps","frameCount","inVR","vrStatsEnabled","initVRStats","lastUpdate","vrPanel","whiteSpace","baseline","depthTest","toggleVRStats","frame","stepDuration","batchingEnabled","batches","instanceCount","atlas","arrayDepth","calls","triangles","show","ONCE_TRUE","TYPE_IMG_PNG","parseGIF","GIFWorker","isFirefoxReality","audioIconTexture","audioIcon","VOLUME_LABELS","GIFTexture","frames","delays","disposals","_ctx","generateMipmaps","isVideoTexture","minFilter","NearestFilter","frameStartTime","clearRect","rawImageData","delayTimes","loadCnt","LinearFilter","createVideoOrAudioEl","preload","scaleToAspectRatio","ratio","disposeTexture","HTMLVideoElement","hls","textureCache","videoHeight","videoWidth","inflightTextures","errorImage","errorImageSrc","errorTexture","magFilter","errorCacheItem","timeFmt","h","tickRate","updateHoverMenu","tryUpdateVideoPlaybackState","ensureOwned","isMineOrLocal","updateSrc","seekForward","seekBack","volumeUp","volumeDown","snap","changeVolumeBy","videoMutedAt","localSnapCount","isSnapping","videoIsLive","onSnapImageLoaded","playbackControls","playPauseButton","volumeUpButton","volumeDownButton","seekForwardButton","seekBackButton","timeLabel","volumeLabel","updateVolumeLabel","getNetworkOwner","currentTime","_ignorePauseStateChanges","_playbackStateChangeTimeout","audioSourceEl","cleanUp","createVideoTextureAudioSourceEl","createMediaElementSource","setDistanceModel","setRolloffFactor","setRefDistance","setMaxDistance","Audio","setNodeSource","updateLiveState","currentLevel","videoWasLive","details","live","HLS","Events","LEVEL_LOADED","LEVEL_SWITCHED","SphereBufferGeometry","DoubleSide","_audioSyncInterval","clearInterval","videoEl","audioEl","isReady","VideoTexture","streamClientId","getMediaStream","srcObject","getVideoTracks","isSupported","setupHls","stopLoad","detachMedia","xhrSetup","xhr","buildAbsoluteURL","loadSource","attachMedia","ERROR","fatal","ErrorTypes","NETWORK_ERROR","startLoad","MEDIA_ERROR","recoverMediaError","setupInterval","setInterval","isNoLongerSrc","canPlayType","poll","mayModifyPlayHead","volumeModRight","volumeModLeft","disconnect","currentSrcIsRetained","_this5","inflightKey","createGIFTexture","uvs","uv","canvasContext","_this6","_this7","renderTask","loadingSrc","getDocument","numPages","getPage","viewport","getViewport","pw","ph","currentPageTextureIsRetained","SMALL_STEP","BIG_STEP","numBars","pinchDelta","rotatePitchAndYaw","opq","oq","pq","yq","initialUpDot","initialForwardDotUp","newUpDot","newForwardDotUp","pendingXRotation","HALF_PI","THREE_HALF_PI","forward","zero","halfExtent","_updateBox","_setupTarget","opening","wasVisible","scaleChanged","previousScaleX","previousScaleY","previousScaleZ","isAnimating","targetPosition","pointOnBoxFace","pointOnBoxFaceToCamera","boxCenter","tempParentWorldScale","boxFaceNormal","forceNewExtents","targetSquareDistance","targetDir","targetHalfExtentStr","targetHalfExtent","targetCameraDot","halfExtentStr","cameraAngleDotBoxNormal","squareDistance","targetScale","finalScale","tipSelector","labelSelector","tipEl","labelEl","onHovered","onUnhovered","wasPinned","_discordBridges","canPin","mirror_media_button_asyncToGenerator","close_mirrored_media_button_asyncToGenerator","xMin","xMax","yMin","yMax","zMin","zMax","_checkForDestroy","cameraModelPromise","cameraModelSrc","pathsMap","player-right-controller","player-left-controller","right-cursor","left-cursor","videoCodec","codec","MediaRecorder","isTypeSupported","videoMimeType","hasWebGL2","allowVideo","CAPTURE_WIDTH","CAPTURE_HEIGHT","CAPTURE_DURATIONS","snapCanvas","pixels","imageData","createImageData","bitmap","captureDuration","captureAudio","showCameraViewfinder","WebGLRenderTarget","stencil","viewfinderInViewThisFrame","updateUI","screen","selfieScreen","labelActionBackground","labelBackground","durationLabel","recordIcon","recordAlphaIcon","snapMenu","recordButton","nextDurationButton","prevDurationButton","snapClicked","cancelSnapping","changeDuration","stopButton","stopRecording","captureAudioButton","captureAudioIcon","updateRenderTargetNextTick","updateViewfinder","newIdx","trackTarget","isPhoto","snapCountdown","countdownInterval","camera_tool_asyncToGenerator","takeSnapshotNextTick","beginRecording","hasDuration","isRecordingUnbound","videoRecorder","showActionLabelBackground","videoContext","videoCanvas","videoImageData","videoPixels","captureStream","attachBlankAudio","oscillator","createOscillator","createMediaStreamDestination","setValueAtTime","addTrack","getAudioTracks","selfAudio","getInput","mimeType","chunks","recordingStartTime","ondataavailable","videoCountdown","videoCountdownInterval","_free","onstop","recordingDuration","playerIsBehindCamera","MAX_DURATION_TO_LIMIT_LOOPS","heldLeftHand","heldRightHand","heldRightRemote","heldThisFrame","grabPath","isHolding","updateSnapMenuOrientation","isHoldingTrigger","isHoldingSnapshotTrigger","snapTriggerTimeout","releaseInterval","tock","playerHud","hudEl","playerHudWasVisible","spriteSystem","bubbleSystem","invaders","tmpVRFlag","tmpOnAfterRender","onAfterRender","videoRenderTarget","setRenderTarget","srcX0","srcY0","srcX1","srcY1","dest","dstX0","dstY0","dstX1","dstY1","gl","srcFramebuffer","__webglFramebuffer","destFramebuffer","bindFramebuffer","READ_FRAMEBUFFER","DRAW_FRAMEBUFFER","checkFramebufferStatus","FRAMEBUFFER_COMPLETE","blitFramebuffer","COLOR_BUFFER_BIT","LINEAR","readRenderTargetPixels","snapPixels","RENDER_WIDTH","pixelsToPNG","heldLeftRemote","grabberId","grabberPaths","playerWorld","playerToCamera","cameraForwardPoint","cameraForwardWorld","_isIn2DInterstitial","_exitAction","getUserGesture","handleExitTo2DInterstitial","_handleExitTo2DInterstitial","isLower","exitAction","nonFullscreen","exitVR","vrNotice","exit2DInterstitialAndEnterVR","_exit2DInterstitialAndEnterVR","enterVR","isIn2DInterstitial","onlyOpenLink","open_media_button_asyncToGenerator","exitImmersive","refresh_media_button_asyncToGenerator","SHORTLINK_DOMAIN","twitter","remix_avatar_button_asyncToGenerator","copying","AMMO_BODY_ATTRIBUTES","TRANSFORM_MODE","AXIS","PUPPET","CURSOR","ALIGN","SCALE","STEP_LENGTH","CAMERA_WORLD_QUATERNION","CAMERA_WORLD_POSITION","TARGET_WORLD_QUATERNION","v2","q2","eps","onGrabStart","transformSystem","startTransform","onGrabEnd","stopTransform","startQ","dxStore","dxApplied","dyAll","dyStore","dyApplied","raycasters","puppet","initialControllerOrientation","initialControllerOrientation_inverse","initialObjectOrientation","currentControllerOrientation","controllerOrientationDelta","planarInfo","plane","wireframe","normal","intersections","previousPointOnPlane","currentPointOnPlane","deltaOnPlane","finalProjectedVec","PI_AROUND_Y","pInv","startPlaneCasting","raycaster","sign2","dxAll","puppetingTick","cursorAxisOrScaleTick","cameraToPlaneDistance","intersection","modify","FORWARD","TWO_PI","calculatePlaneMatrix","planeMatrix","planeUp","planeForward","planeRight","planePosition","camPosition","planeForLeftCursor","planeForRightCursor","isScaling","planeRotation","initialIntersectionPoint","intersectionPoint","initialObjectScale","desiredObjectScale","deltaScale","objectMatrix","dragVector","currentObjectScale","objectToScale","objectPosition","objectToCam","startScaling","didGetObjectReferences","leftEventer","leftCursorController","leftRaycaster","rightCursorController","rightRaycaster","raycastOnPlane","initialDistanceToObject","transformSelectedObjectSystem","endScaling","dotFactor","scaleFactor","RayCurve","numPoints","BufferGeometry","vertices","addAttribute","BufferAttribute","setDynamic","drawMode","TriangleStripDrawMode","parabolicCurve","p0","v0","out","setDirection","cross","setWidth","setPoint","checkLineIntersection","referenceNormal","landingMaxAngle","hitPoint","intersects","intersectObjects","collisionNormal","angleNormals","isValidNormalsAngle","face","LANDING_NORMAL","vecHelper","confirm","collisionEntities","hitCylinderColor","hitCylinderRadius","outerRadius","hitCylinderHeight","isTeleporting","rayCurve","teleportEntity","parabola","hit","Raycaster","rigWorldPosition","newRigWorldPosition","teleportOriginWorldPosition","teleportEventDetail","oldPosition","newPosition","prevHitHeight","hitEntity","createHitEntity","stopPlayingTeleportSound","teleportingSound","isTeleportingDisabled","timeTeleporting","teleportTo","playerScale","collidedIndex","timeSegment","percentToDraw","segmentT","hitEntityOpacity","easeOutIn","dRadii","outerScale","easeIn","outerTorus","torus","radiusTubular","segmentsRadial","segmentsTubular","segmentsHeight","openEnded","isTagged","tag","isHoldable","offersHandConstraint","offersRemoteConstraint","togglesHoveredActionSet","singleActionButton","isHoverMenuChild","isStatic","didUpdateOnce","constraintsSystem","MAX_ANISOTROPY","computeWidth","wrapPixels","wrapCount","widthFactor","FONTS","roboto","font","ch","chars","yoffset","digitsum","digits","xadvance","computeFontWidthFactor","loadTexture","align","oneOf","anchor","letterSpacing","lineHeight","tabSize","xOffset","zOffset","shaderData","getShaderData","shaderObject","shaders","Shader","createTextGeometry","updateFont","currentFont","updateGeometry","updateLayout","parseSide","pages","layout","geometryComponent","textScale","descender","TypeError","ascender","geometryUpdateBase","geometryUpdateData","newLineRegex","tabRegex","isFinite","common","initializedInTick","sets","VR_DEVICE_AVAILABILITY","yes","no","maybe","GENERIC_ENTRY_TYPE_DEVICE_BLACKLIST","getAvailableVREntryTypes","_getAvailableVREntryTypes","ua","isSamsungBrowser","isWebVRCapableBrowser","hasNativeWebVRImplementation","isDaydreamCapableBrowser","isIDevice","isFirefoxBrowser","isUIWebView","mediaDevices","safari","isCardboardCapableBrowser","displays","generic","cardboard","gearvr","isMaybeGearVRCompatibleDevice","isMaybeDaydreamCompatibleDevice","capabilities","canPresent","canShare","opts","tweetLink","StateRoute","_this$props","routeProps","_objectWithoutProperties","react_default","es_Route","PromoteClientDialog","dialog_container","promote_client_dialog_extends","index_es","onConfirm","ClientInfoDialog","client_info_dialog_defineProperty","avatarThumbnailUrl","performConditionalSignIn","client_info_dialog_asyncToGenerator","addOwner","getPresenceEntry","showNonHistoriedDialog","removeOwner","unhide","mayKick","mayMute","targetIsOwner","targetIsCreator","targetIsSignedIn","signed_in","mayAddOwner","mayRemoveOwner","isHidden","client_info_dialog_extends","add_owner_default","remove_owner_default","Loader","loader_defineProperty","loadingNum","loadedNum","doneWithInitialLoad","loadingTimeout","tryFinishLoading","environmentSceneLoaded","onLoaded","onObjectLoading","onObjectLoaded","nomore","loaderStyles","usual","locale","unless_feature","AutoExitWarning","secondsRemaining","wrap_with_audio","onCancel","InlineSVG","filteredProps","svgi_extends","dangerouslySetInnerHTML","__html","InlineSVGButton","EntryButton","autoFocus","cx","iconSrc","prefixMessageId","mediumMessageId","isInHMD","TwoDEntryButton","entryButtonProps","entry_buttons_objectSpread","MobileScreenEntryImg","DesktopScreenEntryImg","GenericEntryButton","GenericVREntryImg","DaydreamEntryButton","DaydreamEntryImg","ProfileEntryPanel","profile_entry_panel_defineProperty","getStateFromProfile","hasChangedNowOrPreviously","profile_entry_panel_asyncToGenerator","storeUpdated","nameInput","setAvatarFromMediaResult","refetchAvatar","componentDidUpdate","_prevProps","prevState","react_fontawesome_index_es","saveStateAndFinish","htmlFor","displayNameOverride","spellCheck","inp","avatar_preview","state_link","hideDelete","returnToProfile","sourceNavigateWithNoNav","if_feature","PRIVACY_POLICY_LINKS","DEFAULT_FACETS","MediaBrowser","media_browser_defineProperty","showNav","selectNextResult","clearStashedQueryOnClose","getStoreAndHistoryState","selectEntry","inputRef","getUrlSource","suggestions","forceNow","_sendQueryTimeout","filterQueryNavigate","lucky_query","handleQueryUpdated","handleFacetClicked","similar_to","similar_name","onMediaSearchResultEntrySelected","sourceNavigate","pushExitMediaBrowserHistory","isSceneApiType","isAvatarApiType","clearStashedQuery","pageNavigate","browserDiv","sourceChanged","showCustomOption","hideSearch","showEmptyStringOnNoResult","handleCustomClicked","showCustomMediaDialog","activeFilter","darkened","blur","faLink","faCloudUploadAlt","handleSourceClicked","selected","media_tiles","attributionHostnames","giphy.com","giphyLogo","media.giphy.com","instructions","desktopTips","references","mobileInstructions","desktopInstructions","lastUrl","fileInputId","CreateObjectDialog","create_object_dialog_defineProperty","fileName","attributionImage","validity","fileInput","onCreate","other","create_object_dialog_objectWithoutProperties","uploadButton","faPaperclip","filenameLabel","urlInput","onUrlChange","create_object_dialog_extends","onCreateClicked","onFileChange","ChangeSceneDialog","change_scene_dialog_defineProperty","submitting","setCustomValidity","urlValidationPromise","change_scene_dialog_asyncToGenerator","checkValidity","reportValidity","changeSceneForm","AvatarUrlDialog","avatar_url_dialog_defineProperty","onChangeClicked","InviteDialog","invite_dialog_defineProperty","copyButtonActive","shareButtonActive","entryCode","embedUrl","entryCodeString","num","pad","shortLinkText","shortLink","isModal","readOnly","copyClicked","allowShare","shareClicked","showEmbedTip","hasPush","onSubscribeChanged","checked","isSubscribed","InviteTeamDialog","invite_team_dialog_defineProperty","inviteButtonText","requestSupport","invite_team_dialog_extends","inviteClicked","LinkDialog","LinkDialogHeader","SafariDialog","safari_dialog_defineProperty","copyLinkButtonText","onCopyClicked","copyLinkClicked","safari_dialog_extends","RoomSettingsDialog","room_settings_dialog_defineProperty","initialSettings","renderCheckbox","member_permission","member_permissions","room_settings_dialog_objectSpread","showRoomAccessSettings","room_settings_dialog_extends","autoComplete","onRoomAccessSettingsChange","newMemberPermissions","CloseRoomDialog","close_room_dialog_extends","LOCAL_CLOSE_TIPS","KEEP_ACTIVE_AFTER_GLOBAL_CLOSE","localStorageCache","finishedScopes","tipPlatform","platformTips","desktop","mobile","standalone","isTipFinished","markTipFinished","storeData","handleTipClose","fullTip","scope","tips","resetTips","VALIDATORS","look","activeSets","rightCursorHoldingPen","leftCursorHoldingPen","locomotion","accel","turning","spawn_menu","mediaCounter","freeze_gesture","rightCursorHoldingInteractable","leftCursorHoldingInteractable","rightCursorHoveringOnInteractable","leftCursorHoveringOnInteractable","menu_hover","invite","rightCursorHoldingCamera","leftCursorHoldingCamera","object_grab","object_rotate_button","object_scale_button","object_recenter_button","object_pin","object_zoom","object_scale","pen_color","pen_size","pen_mode","freeze_mode","video_share_mode","mute_mode","feedback","activeTips","_finishedScopes","_performStep","_userinput","_mediaCounter","prevTop","prevBottom","chosenTip","finishCount","Tip","tipRegion","broadcastTarget","rootStyles","tipBody","WebRTCScreenshareUnsupportedDialog","webrtc_screenshare_unsupported_dialog_extends","flexDirection","alignItems","fontSize","WebAssemblyUnsupportedDialog","webassembly_unsupported_dialog_extends","WebVRRecommendDialog","webvr_recommend_dialog_extends","FeedbackDialog","feedback_dialog_extends","frameBorder","marginHeight","marginWidth","HelpDialog","help_dialog_extends","LeaveRoomDialog","leave_room_dialog_extends","messageType","destinationUrl","SORT_ORDER_VIDEO","SORT_ORDER_AUDIO","SORT_ORDER_IMAGE","SORT_ORDER_PDF","SORT_ORDER_MODEL","SORT_ORDER_UNIDENTIFIED","mediaSortOrder","mediaSort","el1","el2","ObjectInfoDialog","object_info_dialog_defineProperty","mediaEntities","targetMatrix","enqueueWaypointTravelTo","snapToNavMesh","willMaintainInitialOrientation","updateMediaEntities","navigateNext","navigatePrev","navigate","pin","unpin","onPinChanged","toggleLights","targetIndex","onNavigated","_isRemoving","exitAfterRemove","object_info_dialog_extends","entryStyles","faChevronLeft","enqueueWaypointTravel","faChevronRight","OAuthDialog","renderSignInDisclaimer","renderTweetDisclaimer","oauthInfo","oauth_dialog_extends","emojiPlugin","createEmojiPlugin","hashtagPlugin","createHashtagPlugin","linkifyPlugin","createLinkifyPlugin","counterPlugin","createCounterPlugin","addEmoji","editorState","contentState","getCurrentContent","entityKey","createEntity","emojiUnicode","getLastCreatedEntityKey","currentSelectionState","getSelection","emojiAddedContent","emojiEndPos","blockSize","afterRemovalContentState","Modifier","removeRange","targetSelection","getSelectionAfter","insertText","getAnchorOffset","blockKey","getAnchorKey","getBlockForKey","getLength","newEditorState","EditorState","forceSelection","TweetDialog","createEditorStateWithText","editorRef","sendTweet","media_stored_file_url","getPlainText","posting","renderPostedDialog","tweet_dialog_extends","renderTweetDialog","EmojiSuggestions","EmojiSelect","CharCounter","draft_js_plugins_editor_lib_default","emojiSuggestions","limit","LobbyChatBox","lobby_chat_box_defineProperty","pendingMessage","onSendMessage","textRows","pendingMessageTextareaHeight","pendingMessageFieldHeight","discordSnippet","occupantSnippet","messageEntryPlaceholder","sendMessage","messageEntrySubmit","sendMessageIcon","ChatCommandHelp","commands","commandHelpOnTop","onTop","matchingPrefix","defaultStylesByTagName","noStyleTags","BASE","HEAD","HTML","META","NOFRAME","NOSCRIPT","PARAM","SCRIPT","STYLE","TITLE","tagNames","computeDefaultStyleByTagName","tagName","defaultStyle","element","computedStyle","getComputedStyle","warmSerializeElement","navigateToClientInfo","currentParams","PresenceList","presence_list_defineProperty","faVideo","hmd","hmdIcon","faMobileAlt","discord","discordIcon","faDesktop","getPresenceIcon","isBot","badge","renderExpandedList","domForPresence","onSignOut","expanded","messageCanvas","emojiRegex","CHAT_MESSAGE_TEXTURE_SIZE","messageBodyDom","fromSessionId","includeFromLink","multiLine","wrapStyle","mono","messageBodyClasses","includeClientLink","onFromClick","words","outWords","word","wordWrap","cleanedBody","Linkify_default","toEmojis","renderChatMessage","allowEmojiRender","isOneLine","isEmoji","entryDom","ReactDOM","xhtml","nodeType","Node","ELEMENT_NODE","cssTexts","cssText","ii","cssPropName","outerHTML","serializeElement","unmountComponentAtNode","meshEntity","blobUrl","meshMaterial","spawnChatMessage","_spawnChatMessage","ChatMessage","maySpawn","InWorldChatBox","in_world_chat_box_defineProperty","chat_command_help_ChatCommandHelp","accept","onObjectCreated","enableSpawning","faCamera","spawnMessageIcon","defaultEditors","useEditorWhitelist","editorWhitelist","avatar_editor_asyncToGenerator","AvatarEditor","avatar_editor_defineProperty","baseAvatarResults","editorLinks","previewGltfUrl","creatorAttribution","inputFiles","base_gltf_url","gltfs","randomAvatarResult","base","KHR_binary_glTF","bin","getWrappedInstance","filesToUpload","uploading","fileUploads","avatar_editor_objectSpread","createOrUpdateAvatar","onSave","getPreviewUrl","baseSid","avatarResult","propName","sid","dropdown_arrow_default","dropdown_arrow_2x_default","paddingBottom","ext","editors","uploadAvatar","textField","textarea","selectListingGrid","mapField","avatar_editor_extends","handleGltfLoaded","confirmDelete","deleteAvatar","has_listings","MicLevelWidget","mic_level_widget_defineProperty","startAnalyser","stopAnalyser","micUpdateInterval","micLevelMovingAverage","MovingAverage","average","movingAverage","micClip","muteOnEntry","viewBox","fill","xmlns","cy","fillOpacity","hasAudioTrack","mic_level_default","mic_level_2x_default","mic_denied_default","mic_denied_2x_default","NumberRangeSelector","number_range_selector_defineProperty","isDragging","myRoot","createRef","stopDragging","drag","clientX","offsetLeft","currentValue","onMouseDown","PREFERENCE_LIST_ITEM_TYPE","CHECK_BOX","SELECT","NUMBER_WITH_RANGE","MAX_RESOLUTION","MaxResolutionPreferenceItem","tabIndex","PreferenceListItem","preference_list_item_defineProperty","selectHovered","forceUpdate","UNSAFE_componentWillMount","renderControls","storedPref","prefType","storeKey","defaultBool","preference_list_item_MaxResolutionPreferenceItem","defaultString","preference_list_item_extends","onMouseLeave","number_range_selector_NumberRangeSelector","defaultNumber","isCheckbox","faUndo","addLocaleData","PreferencesScreen","preference_list_item_PreferenceListItem","general","OutputLevelWidget","output_level_widget_defineProperty","tonePlaying","playTestTone","toneClip","webmTone","mp3Tone","oggTone","wavTone","testToneTimeout","iconClass","speaker_level_default","speaker_level_2x_default","PhotoMessage","landingPageUrl","onShareClicked","VideoMessage","ImageMessage","spawnImage","PresenceLog","presence_log_defineProperty","entryClasses","presenceLogChat","oldName","newName","inRoom","presenceClasses","domForEntry","THUMBNAIL_TITLE","DISPLAY_IMAGE","faMusic","faImage","faNewspaper","faQuestion","faCube","ObjectList","object_list_defineProperty","inspecting","domForEntity","onInspectObject","onMouseOut","onMouseOver","resourceName","httpIndex","lessHost","hostSplit","substr","getDisplayString","faCubes","SettingsMenu","settings_menu_defineProperty","unexpand","showAsOverlay","onMouseUp","acanvas","renderExpandedMenu","rowClasses","hideExtranousItems","showRoomSettings","showCloseRoom","showRoomInfo","hubScene","showRoomSection","showStreamerMode","onCloseOverlay","faUserAlt","faCog","showPreferencesScreen","faDoorClosed","faInfoCircle","toggleStreamerMode","bottomLink","faBars","isStreaming","PreloadOverlay","onLoadClicked","MIC_ICONS","Mic0","Mic1","Mic2","Mic3","Mic4","Mic5","Mic6","Mic7","MicOff0","MicOff1","MicOff2","MicOff3","MicOff4","MicOff5","MicOff6","MicOff7","TopHUD","_2d_hud_defineProperty","showVideoShareOptions","lastActiveMediaSource","micLevel","cameraDisabled","penDisabled","mediaDisabled","getDisplayMedia","videoShareMediaSource","onEndShareVideo","onShareVideo","onShareVideoNotCapable","videoShareExtraOptionTypes","primaryVideoShareType","showExtrasOnHover","hideVideoSharingButtonTimeout","capitalize","iconForType","ShareScreenIconActive","ShareCameraIconActive","ShareScreenIcon","ShareCameraIcon","handleVideoShareClicked","videoSharingButtons","buildVideoSharingButtons","tipDivForType","cancelFunc","watching","onWatchEnded","showVideoShareFailed","hideVideoShareFailedTip","activeTip","micIcon","unselectable","uiStyles","onToggleMute","sourceNavigateToDefaultSource","SpawnIcon","onSpawnPen","isCursorHoldingPen","PenIconActive","PenIcon","onSpawnCamera","hasActiveCamera","CameraIconActive","CameraIcon","showStreamingTip","hideStreamingTip","react_components_2d_hud","SpectatingLabel","avatarEditorDebug","HMD_MIC_REGEXES","IN_ROOM_MODAL_ROUTER_PATHS","IN_ROOM_MODAL_QUERY_VARS","LOBBY_MODAL_ROUTER_PATHS","LOBBY_MODAL_QUERY_VARS","LOBBY_MODAL_QUERY_VALUES","enumerateDevices","isMobilePhoneOrVR","AUTO_EXIT_TIMER_SECONDS","UIRoot","ui_root_defineProperty","enterInVR","entered","showShareDialog","broadcastTipDismissed","linkCodeCancel","miniInviteActivated","didConnectToNetworkedScene","noMoreLoadingUpdates","hideLoader","showPrefs","waitingOnAudio","audioTrack","audioTrackClone","micDevices","autoExitTimerStartedAt","autoExitTimerInterval","autoExitMessage","secondsRemainingBeforeAutoExit","exited","objectInfo","objectSrc","isObjectListExpanded","isPresenceListExpanded","startAutoExitTimer","disableAutoExitOnIdle","endAutoExitTimer","signInMessageId","authChannel","signInCompleteMessageId","signInContinueTextId","onContinueAfterSignIn","ui_root_asyncToGenerator","subscriptions","isFavorited","initialIsFavorited","sceneLoaded","mediaSource","updateSubscribedState","forcedVREntryType","enterDaydream","enter2D","secondsSinceStart","checkForAutoExit","onConcurrentLoad","onIdleDetected","onActivityDetected","exitScene","grantedMicLabels","setMediaStreamToDefault","beginOrSkipAudioSetup","performDirectEntryFlow","availableVREntryTypes","_ref7","constraints","deviceId","exact","fetchAudioTrack","setupNewMediaStream","hasAudio","ideal","_ref9","getUserMedia","recreateAudioStream","_ref10","setLocalMediaStream","mediaStreamForMicAnalysis","fetchMicDevices","micDeviceId","micDeviceIdForMicLabel","micLabelForMediaStream","entry_step","onAudioReadyButton","hasHmdMicrophone","selectedMicLabel","enterScene","linkChannel","generateCode","updateScene","ui_root_objectSpread","DialogClass","closeDialog","fly","beginStreaming","endStreaming","_ref16","broadcastedRoomConfirmed","onInterstitialPromptClicked","roomUnavailableReason","platformUnsupportedReason","exitSubtitleId","promptForNameAndAvatarBeforeEntry","hubIsBound","toggleFavorited","entryFavoriteButton","lobby_chat_box","entryDisallowed","attemptLink","sendEnteringEvent","handleForceEntry","sendEnteringCancelledEvent","faArrowLeft","granted","onMicGrantButton","mic_granted_default","mic_granted_2x_default","subtitleId","mic_level_widget_MicLevelWidget","output_level_widget_OutputLevelWidget","selectedMicDeviceId","micDeviceChanged","mic_small_default","mic_small_2x_default","shouldShowHmdMicWarning","warning_icon_default","warning_icon_2x_default","overlay","showSafariDialog","safari_dialog_SafariDialog","showWebAssemblyDialog","webassembly_unsupported_dialog_WebAssemblyUnsupportedDialog","exitEventHandler","prevProps","showSignInDialog","showContextualSignInDialog","willCompileAndUploadMaterials","compileAndUploadMaterials","onSceneLoaded","onAframeStateChanged","onShareVideoEnabled","onShareVideoDisabled","onShareVideoFailed","playerRig","isExited","showPreload","isLoading","ui-root","in-modal-or-overlay","isInModalOrOverlay","serviceWorker","showOAuthDialog","showInterstitialPrompt","oauth_dialog_OAuthDialog","onCloseOAuthDialog","renderExitedPane","react_components_loader","onLoadingFinished","preferences_screen_PreferencesScreen","renderInterstitialPrompt","renderBotMode","enteredOrWatching","enteredOrWatchingOrPreload","inEntryFlow","isWaitingForAutoExit","auto_exit_warning","state_route","renderDevicePanel","renderMicPanel","renderAudioSetupPanel","renderEntryStartPanel","dialogBoxContentsClassNames","showSettingsAsOverlay","presenceLogEntries","switchToInspectingObject","showMediaBrowser","hasTopTip","clientInfoClientId","getClientInfoClientId","showClientInfo","showObjectInfo","hasEmbedPresence","hasDiscordBridges","showBroadcastTip","showInviteTip","showChooseSceneButton","streamerName","Provider","preload_overlay_PreloadOverlay","onPreloadLoadClicked","profile_entry_panel","ui_root_extends","avatar_editor_AvatarEditor","onAvatarSaved","react_components_media_browser","renderDialog","hubMemberPermissions","hubAllowPromotion","updateHub","closeHub","createObject","changeScene","setAvatarUrl","client_info_dialog_ClientInfoDialog","object_info_dialog_ObjectInfoDialog","presence_log_PresenceLog","tip_Tip","confirmBroadcastedRoom","in_world_chat_box","inviteStyles","toggleShareDialog","onMiniInviteClicked","invite_dialog_InviteDialog","hubEntryCode","initialIsSubscribed","link_dialog_LinkDialog","object_list_ObjectList","expand","presence_list_PresenceList","settings_menu_SettingsMenu","spectating_label_SpectatingLabel","topHud","toggleMute","shareVideo","endShareVideo","showWebRTCScreenshareUnsupportedDialog","isSupportAvailable","MS_PER_DAY","MS_PER_MONTH","isSameMonth","da","db","getFullYear","getMonth","HUB_CREATOR_PERMISSIONS","VALID_PERMISSIONS","HubChannel","hub_channel_defineProperty","Presence","_permissions","postgrest_role","nextRefresh","hub_channel_asyncToGenerator","entryDisplayType","vrDisplay","isPresenting","initialOccupantCount","initialOccupants","entryEvent","hub_channel_objectSpread","getEntryTimingFlags","entryTimingFlags","isNewDaily","isNewMonthly","isNewDayWindow","isNewMonthWindow","storedLastEnteredAt","lastEntered","msSinceLastEntered","getDate","isSameDay","object_type","update_hub","close_hub","subscription","allow","creatorAssignmentTokenEntry","_getCreatorAssignmentToken","perms_token","setPermissionsFromToken","auth_token","oauth_url","gltfNode","fileAccessToken","gltf_node","file_access_token","permsToken","_blockedSessionIds","unblock","completeSync","Set","migrateToSocket","presenceBindings","onJoin","caller","onLeave","onSync","endRecording","exceedsDensityThreshold","subtree","boundingData","isHighDensity","leftResult","rightResult","traverseMeshesAndAddShapes","shapePrefix","shapes","meshRoot","group","__proto__","roots","_roots","isGeometryHighDensity","navMesh","groupEnd","MessageDispatch","entryManager","addToPresenceLog","remountUI","message_dispatch_defineProperty","commandParts","dispatchCommand","activeElement","scales","curScale","captureSystem","setDebug","debugEnabled","rename","available","forceEnableTouchscreen","SceneEntryManager","scene_entry_manager_defineProperty","whenSceneLoaded","_entered","scene_entry_manager_asyncToGenerator","waypointSystem","session","verbose","_setupPlayerRig","_setupBlocking","_setupKicking","_setupMedia","_setupCamera","_spawnAvatar","_runBot","sendEnteredEvent","hasLoaded","localMediaStream","getTracks","_setPlayerInfoFromProfile","avatarScale","_lastFetchedAvatarId","kickedClientId","_unpinElement","removeEntity","removeEntitiesOfClient","storedPromotionToken","gltfComponents","equalArray","every","mediaSrc","mediaVersion","mediaContentSubtype","pinnedEntityToGltf","_signInAndPinOrUnpinElement","_pinElement","_disableSignInOnPinAction","spawnMediaInfrontOfPlayer","or","handlePinEvent","currentVideoShareEntity","sendObjectSpawnedEvent","_forceExitFrom2DInterstitial","forceExitFrom2DInterstitial","contentEditable","uiRoot","clipboardData","getData","dataTransfer","isHandlingVideoShare","shareVideoMediaStream","isDisplayMedia","newStream","frameRate","removeTrack","delaySpawn","audioInput","dataInput","crossorigin","onchange","getRecording","mozCaptureStream","INIT_TIMEOUT_MS","urlBase64ToUint8Array","base64String","base64","repeat","rawData","outputArray","Subscriptions","subscriptions_defineProperty","registration","vapidPublicKey","_isSubscribed","subscriptions_asyncToGenerator","startedAt","pushManager","convertedVapidKey","permissionState","userVisibleOnly","applicationServerKey","getSubscription","endpoint","pushSubscription","has_remaining_subscriptions","invaderPos","bubblePos","createSphereGizmo","WireframeGeometry","LineSegments","bubbles","tickCount","_updateInvaders","registerBubble","bubble","unregisterBubble","registerInvader","invader","unregisterInvader","updateDebug","setInvading","tempInvasionFlags","setInvaderFlag","distanceSquared","radiusSum","flushInvadingFlagsForIndex","invading","meshName","targetMesh","useMaterial","invadingOpacity","findInvaderMesh","alwaysHidden","radiusSquared","applyInvasionToMesh","updateBoneVisibility","IDLE_TIMEOUT_MS","CHARACTER_ACCELERATION_PATH","BASIC_ACTIVITY_PATHS","resetTimeout","idleTimeout","lastInputCheck","onIdleTimeout","basicActivity","activityPath","cameraEls","cameraUpdateCount","ticks","updateMyCamera","playerModelEl","updatePlayerHead","headEl","myCameraTool","modeMod","WheelEvent","DOM_DELTA_PIXEL","DOM_DELTA_LINE","DOM_DELTA_PAGE","isInModal","MouseDevice","queueEvent","passive","deltaX","deltaY","deltaMode","middle","clientY","innerHeight","movementX","movementY","mouseDownLeftThisFrame","mouseDownRightThisFrame","mouseDownMiddleThisFrame","write","didStopProcessingEarly","setVector2","setValueType","ArrayBackedSet","initialItems","oncontextmenu","KeyboardDevice","seenKeys","HudDevice","XboxControllerDevice","buttonMap","buttonId","axisMap","axisId","getGamepads","connected","xboxPaths","hapticActuators","Pose","fromOriginAndDirection","setFromUnitVectors","fromCameraProjection","normalizedX","normalizedY","unproject","EYES_TO_ELBOW","FOREARM","applyArmModel","controllerEuler","deltaControllerPosition","controllerQuaternion","controllerPosition","gamepadPose","headObject3D","userHeight","fromArray","copySittingToStandingTransform","stageParameters","sittingToStandingTransform","ONES","TOUCHPAD","TRIGGER","OculusGoControllerDevice","sittingToStandingMatrix","rayObject","rayMatrixWorld","setPose","setMatrix4","TOUCHPAD_X","TOUCHPAD_Y","GearVRControllerDevice","leftOculusTouchButtonMap","rightOculusTouchButtonMap","LEFT_HAND_OFFSET","RIGHT_HAND_OFFSET","OculusTouchControllerDevice","buttonMaps","devicePaths","handOffset","HAND_OFFSET","POSE","MATRIX","DaydreamControllerDevice","RAY_ROTATION","ViveControllerDevice","gamepads","WindowsMixedRealityControllerDevice","CircularBuffer","writePtr","difference","GyroDevice","hmdEuler","hmdQuaternion","prevX","prevY","dXBuffer","dYBuffer","hasPolyfill","webvrpolyfill","getPolyfillDisplays","frameData","VRFrameData","getFrameData","findHandCollisionTargetForHand","world","handPtr","Ammo","getPointer","handCollisions","collisions","object3Ds","notRemoteHoverTargets","remoteHoverTargets","findRemoteHoverTarget","isUI","updateCursorIntersection","leftRemoteHoverTarget","rightRemoteHoverTarget","getRightRemoteHoverTarget","getLeftRemoteHoverTarget","dropPath","hoverFn","previousState","tickInteractor","lostOwnership","calculateCursorPose","AppAwareMouseDevice","prevButtonLeft","clickedOnAnything","prevCursorPose","prevOrigin","prevDirection","cursorController","rawIntersections","cursorTargettingSystem","remoteHoverTarget","isInteractable","isStaticControlledMedia","isStaticMedia","touchIsAssigned","touch","assignments","assignment","identifier","jobIsAssigned","job","unassign","findByJob","findByTouch","MOVE_CURSOR_JOB","MOVE_CAMERA_JOB","FIRST_PINCHER_JOB","SECOND_PINCHER_JOB","TAP_PATHS","x1","y1","x2","y2","dx","dy","getPlayerCamera","AppAwareTouchscreenDevice","pendingTap","maxTouchCount","tapIndexToWriteNextFrame","framesUntilGrab","framesUntilUnassign","second","first","cameraMover","move","isFirstTouch","isSecondTouch","isThirdTouch","hasSecondPinch","setFromCamera","shouldMoveCursor","cursorJob","previousAssignment","changedTouches","touches","hasCursorJob","hasCameraJob","xforms","scalar","scaleExp","pow","deadzone","deadzoneSize","split_vec2","compose_vec2","copyIfFalse","copyIfTrue","copyVec2IfTrue","zeroIfDefined","true","rising","risingWithFrameDelay","falling","vec2Zero","poseFromCameraProjection","vec2dpad","deadzoneRadius","invertX","invertY","deadzoneRadiusSquared","atan2","always","constValue","wasd_to_vec2","vec2","add_vec2","max_vec2","normalize_vec2","any","touch_axis_scroll","snap_to","touching","diff_vec2","addSetsToBindings","mapping","setName","binding","togglePenWithP","togglePenWithHud","inspectZoomSpeed","keyboardMouseUserBindings","global","xform","priority","rightCursorHoldingUI","rightCursorHoveringOnVideo","inputFocused","rightCursorHoveringOnUI","touchCamDelta","touchscreenUserBindings","rightCursorHoveringOnPen","keyboardDebuggingBindings","leftButton","leftAxis","leftPose","rightButton","rightAxis","rightPose","rightGripRisingGrab","leftGripRisingGrab","lowerButtons","upperButtons","leftGripPressed1","leftGripPressed2","rightGripPressed1","rightGripPressed2","leftTriggerPressed1","leftTriggerPressed2","rightTriggerPressed1","rightTriggerPressed2","oculusTouchUserBindings","north","south","east","west","override","leftHandHoveringOnNothing","leftCursorHoveringOnUI","leftCursorHoveringOnVideo","rightCursorHoveringOnNothing","leftCursorHoveringOnNothing","leftHandHoveringOnInteractable","leftHandHoldingInteractable","leftHandHoveringOnPen","leftHandHoldingPen","leftCursorHoldingUI","rightHandHoveringOnInteractable","rightHandHoldingInteractable","rightHandHoveringOnPen","rightHandHoldingPen","rightCursorHoveringOnCamera","rightHandHoveringOnCamera","leftHandHoveringOnCamera","rightHandHoldingCamera","leftHandHoldingCamera","rightHandHoveringOnNothing","wakeLeft","wakeRight","lButton","lAxis","lPose","lJoy","lJoyScaled","lJoyXScaled","lJoyYScaled","lJoyYDeadzoned","lTouch","lTouchScaled","lTouchXScaled","lTouchY","lTouchYScaled","lDpadNorth1","lDpadSouth1","lDpadEast1","lDpadWest1","lDpadCenter1","lDpadNorth2","lDpadSouth2","lDpadEast2","lDpadWest2","lDpadCenter2","lTriggerFallingStopDrawing","lGripFallingStopDrawing","lTriggerRisingGrab","lGripRisingGrab","lTouchpadRising2","lTouchpadRising1","touchCharacterAcceleration","lCharacterAcceleration","leftBoost","leftUndoDrawing","rButton","rAxis","rPose","rTouch","rJoy","rJoyYDeadzoned","rDpadNorth1","rDpadSouth1","rDpadEast1","rDpadWest1","rDpadCenter1","rDpadNorth2","rDpadSouth2","rDpadEast2","rDpadWest2","rDpadCenter2","rDpadCenterStrip","rTouchpadRising","rTouchpadFalling","rightBoost","rTriggerRisingGrab","rGripRisingGrab","rightCursorDrop1","rightCursorDrop2","leftCursorDrop1","leftCursorDrop2","rTriggerStopTeleport","rTouchpadStopTeleport","rightUndoDrawing","ensureFrozenViaDpad","ensureFrozenViaKeyboard","ensureFrozenViaButtons","thawViaDpad","thawViaKeyboard","thawViaButtons","freezeButtons","inspectButtons","rSnapRight1","rSnapLeft1","rSnapRight2","rSnapLeft2","keyboardSnapRight","keyboardSnapLeft","keyboardCharacterAcceleration","wasd_vec2","arrows_vec2","keyboardBoost","leftTouchpadPressed1","leftTouchpadPressed2","leftTouchpadFallingStopTeleport","leftTriggerFallingStopTeleport","leftGripFallingWhileHoldingPen","viveUserBindings","rightHandTeleporting","leftHandTeleporting","leftCursorHoveringOnPen","leftCursorHoveringOnCamera","viveWandUserBindings","indexUserBindings","viveFocusPlusUserBindings","viveCosmosUserBindings","lGripPressed","rGripPressed","rTriggerPressed","rJoyNorth","rGripRising","rTriggerRising","rGripFalling","rTriggerFalling","dpadVariables","padWest","padEast","padNorth","padSouth","padCenter","padCenterStrip","dpadBindings","neverFrozenBinding","penBindings","forCursor","padY","triggerPressed","padPressed","padTouched","padRising","padCenterStripTouched","handPoseBindings","gripPressed","holdingCameraBindings","wmrUserBindings","leftPadPressed","rightPadPressed","leftPadFalling","rightPadFalling","keyboardSaceFalling","freezeBindings","rJoyWest","rJoyEast","rJoyWestRising","rJoyEastRising","keyboardQRising","keyboardERising","teleportationAndRotationBindings","lJoyXDeadzoned","characterAccelerationBindings","cursorMediaVolumeModBindings","rPadNorthOrSouth","rPadNorthOrSouthPressed","rPadNorthOrSouthPressedY","cursorModDeltaBindings","scaledRightJoystickVertical","scaledLeftJoystickCursorDelta","deadzonedRightJoystickHorizontal","deadzonedRightJoystickVertical","deadzonedLeftJoystickHorizontal","deadzonedLeftJoystickVertical","disableForwardOnTrigger","scaledLeftJoystickHorizontal","scaledLeftJoystickVertical","scaledLeftJoystickForwardAcceleration","xboxControllerUserBindings","rightCursorHoldingNothing","touchpadRising","touchpadFalling","touchpadPressed","dpadNorth","dpadSouth","dpadEast","dpadWest","dpadCenter","brushSizeDelta","cursorModDelta","dpadSouthDrop","dpadCenterDrop","grabBinding","dropOnCenterOrSouth","daydreamUserBindings","cardboardUserBindings","generate3DOFTriggerBindings","touchpadButton","triggerButton","touchpadX","touchpadXForPen","touchpadY","touchpadYForPen","triggerRising","triggerFalling","dpadCenterStrip","dpadBottomCenterStrip","togglePen","dropBinding","leftTeleporter","rightTeleporter","GamepadDevice","buttonPath","gamepadBindings","oculusGoUserBindings","gearVRControllerUserBindings","satisfiesPath","satisfyPath","satisfiedBy","notEmpty","isSubpath","canMask","masker","masked","maskerKey","maskerPath","maskedKey","maskedPath","isActive","toggleSet","pendingSetChanges","generation","generations","prevActiveSets","xformStates","activeDevices","registeredMappings","registeredMappingsChanged","vrGamepadMappings","nonVRGamepadMappings","addExtraMappings","activeDevice","deleteExtraMappings","updateBindingsForVRMode","gamepadConnected","gamepadDevice","maybeToggleXboxMapping","vrAxesSum","mouseMovement","nonXboxActivity","hasXboxMapping","prevSortedBindings","sortedBindings","mappings","unsorted","sorted","dependencySort","masks","masksRow","bindingsRow","col","computeMasks","teleporter","leftHandHoveringOnVideo","rightHandHoveringOnVideo","leftCursorHoldingNothing","resolveActionSets","activeSetsChanged","il","elem","jl","arrayContentsDiffer","actives","prevActives","prevMasked","maskedRow","computeExecutionStrategy","bindingExistedLastFrame","PATHS_TO_SHOW","DELIMITER","replacer","userinputFrameStatus","pathsOutput","strings","maskers","logBindings","MEDIA_SEARCH_PATHS","CursorTargettingSystem","setDirty","dirty","observer","MutationObserver","observe","childList","populateEntities","shouldEnableRemote","remote","teleporting","woke","vrRemotePenIntersection","CursorTogglingSystem","domContentLoadedButComponentsMayNotHave","gotComponentReferences","rightHandTeleporter","leftHandTeleporter","gazeTeleporter","inspectingInVR","shouldEnableLeftRemote","shouldEnableRightRemote","WORLD_CONFIG","debugDrawMode","AmmoDebugConstants","DrawWireframe","PhysicsSystem","AmmoWasm","AmmoModule","locateFile","bodies","bodyHelpers","shapeHelpers","debugRequested","World","alive","init2","shapeHelper","getDebugDrawer","updateShapes","DYNAMIC","syncFromPhysics","addBody","removeBody","registerBodyHelper","registerShapeHelper","CONSTRAINT_CONFIG","ConstraintsSystem","prevLeftHand","prevRightHand","prevRightRemote","prevLeftRemote","constraintPairs","constraintTag","entityId","heldEntityId","activationState","ACTIVATION_STATE","ACTIVE_TAG","DISABLE_DEACTIVATION","targetBody","Constraint","COLLISION_FILTER_MASK_HANDS","distanceBetweenStretchers","obj1","obj2","existsAndHeldInEither","holderA","holderB","TwoPointStretchingSystem","stretching","stretched","leftStretcher","rightStretcher","previousLeftStretcher","previousRightStretcher","initialStretchDistance","SingleActionButtonSystem","didInteractThisFrame","hovered2","HoldableButtonSystem","prevHeld","heldLeft","prevHeldLeft","hasButtonComponent","BUTTON_COMPONENT_NAMES","getHoverableButton","dispatch","HOVERED","UNHOVERED","HoverButtonSystem","button2","DrawingMenuSystem","drawing_menu_system_defineProperty","cameraWorldPos","drawingMenus","getMenuScale","remotes","undoDraw","serializeDrawing","lastIntersection","hideMenus","cursorControllers","getHovered","showMenu","handleButtons","scaleMenus","registerDrawingMenu","networkedDrawingEl","menuEl","undoButton","deleteButton","serializeButton","unregisterDrawingMenu","getSpecificHoverMenu","findHoverMenu","HoverMenuSystem","prevHoverMenu","hoverMenu2","prevHoverMenu2","SuperSpawnerSystem","maybeSpawn","superSpawner","performSpawn","copyState","STRENGTH","DROP","PICKUP","BUTTON_PRESSED","HOVER","STRETCH_BASE","STRETCH_DISTANCE","TELEPORTING","TELEPORTED","determineStrength","HapticFeedbackSystem","twoPointStretchingSystem","interactLeft","interactRight","leftActuator","rightActuator","leftHandStrength","rightHandStrength","rightRemoteStrength","leftRemoteStrength","buttonLeftStrength","buttonRightStrength","stretchingStrength","stretchSystem","stretcherLeft","stretcherRight","leftStrength","rightStrength","pulse","tempVec3","tempVec4","INSTANCE_DATA_BYTE_LENGTH","DEFAULT_COLOR","HIDE_MATRIX","makeScale","sizeofInstances","inspectLayer","HubsBatchRawUniformGroup","BatchRawUniformGroup","maxInstances","ArrayBuffer","hubs_sweepParams","hubs_interactorOnePos","hubs_isFrozen","Uint32Array","hubs_interactorTwoPos","hubs_time","instanceId","setInstanceTransform","setInstanceColor","hideDueToPinning","highlightInteractorOne","highlightInteractorTwo","MAX_INSTANCES","UBO_BYTE_LENGTH","BatchManagerSystem","WeakMap","WebGL2RenderingContext","getParameter","MAX_UNIFORM_BLOCK_SIZE","ubo","BatchManager","unlit","unlitBatchVert","unlitBatchFrag","rootObject","batchedCount","addMesh","removeMesh","InteractionSfxSystem","colorShift","ColorShiftWorker","getThemeColorShifter","getImageData","ImageData","multiviewVertPrefix","nonmultiviewVertPrefix","multiviewFragPrefix","nonmultiviewFragPrefix","didRegisterWithSystem","didFailToRegister","registered","updateUVs","normalizedFrame","memo","spritesheet","missingSprites","ret","getSheetType","spritesheetAction","SHEET_TYPES","raycastOnSprite","vA","vB","vC","vD","intersectionInfo","intersect","ray","intersectTriangle","getHoverableVisuals","comp","createGeometry","maxSprites","mvCols","InterleavedBuffer","InterleavedBufferAttribute","indices","setIndex","ZEROS","SpriteSystem","sheetType","slots","indexWithSprite","notice","spriteWithIndex","multiview","vert","frag","domReady","spritesheetPng","spritesheetActionPng","spritesheetNoticePng","spritesheetTexture","RawShaderMaterial","u_spritesheet","renderOrder","RENDER_ORDER","HUD_ICONS","uniformsNeedUpdate","aEnableSweepingEffect","aSweepParams","enableSweepingEffectValue","setXY","spritesheetNotice","aUvs","aVertices","setXYZ","calculateIconTransform","backward","camToWaypoint","v1","waypoint","extractBasis","isOccupiableSpawnPoint","waypointData","isUnoccupiableSpawnPoint","loadTemplateAndAddToScene","templateId","loadTemplatesForWaypointData","templateIds","templatesToLoadForWaypointData","isOccupiedByMe","waypointComponent","isOccupied","unoccupyWaypoint","unoccupyWaypoints","waypointComponents","WaypointSystem","helperMat4","waypointForTemplateEl","elementsFromTemplatesFor","eventHandlers","lostOwnershipOfWaypoint","waypointPreviewAvatar","releaseAnyOccupiedWaypoints","currentWaypoint","teleportToWaypoint","iconEl","tryTeleportToOccupiableWaypoint","previouslyOccupiedWaypoints","tryToOccupy","didOccupy","wp","setupEventHandlersFor","onUnhover","onInteract","setupEventHandlers","waypointId","elementsFromTemplates","li","unregisterComponent","ri","getUnoccupiableSpawnPoint","candidates","mightNeedRespawn","ownershipLostTime","connectedClients","shouldTryToOccupy","isMineOrTakeOwnership","occupyWaypoint","tryToOccupyAnyOf","waypoints","candidate","currentMoveToSpawn","nextMoveToSpawn","waitOneTick","nextMoveToSpawnResolve","moveToUnoccupiableSpawnPoint","resolvedWaypointOrNull","currentMoveToSpawnResolve","waypointComponentOrNull","tickTemplateEl","elementFromTemplate","mat4Pool","getCurrentPlayerHeight","NAV_ZONE","qsAllowWaypointLerp","calculateDisplacementToDesiredPOV","translationCoordinateSpace","translated","localTranslation","povMat4","localDisplacement","displacementToDesiredPOV","SNAP_ROTATION_RADIAN","BASE_SPEED","CharacterControllerSystem","character_controller_system_defineProperty","deltaFromHeadToTargetForHead","targetForHead","targetForRig","targetWorldPosition","isMotionDisabled","findPositionOnNavMesh","inPosition","outPosition","initialOrientation","finalPosition","finalPOV","shouldLandWhenPossible","shouldUnoccupyWaypointsOnceMoving","snapRotatedPOV","newPOV","startPOVPosition","desiredPOVPosition","navMeshSnappedPOVPosition","interpolatedWaypoint","startTranslation","waypointPosition","activeWaypoint","waypointComponentData","waypointTravelTime","isInstant","waypointTravelStartTime","animationIsOver","travelByWaypoint","wasFlying","messageDispatch","didStopFlying","navNode","dXZ","zCharacterAcceleration","relativeMotion","lerpC","nextRelativeMotion","triedToMove","lengthSq","shouldRecomputeNavGroupAndNavNode","shouldResnapToNavMesh","squareDistNavMeshCorrection","findPOVPositionAboveNavMesh","startingFeetPosition","desiredFeetPosition","outPOVPosition","shouldRecomputeGroupAndNode","navGroup","inTransform","motion","getClosestNode","zones","outPos","getGroup","clampStep","CursorPoseTrackingSystem","pairs","MIN_DISTANCE","ScaleInScreenSpaceSystem","scale_in_screen_space_defineProperty","parentScale","updateMediaAudioSettings","mediaDistanceModel","mediaRolloffFactor","mediaRefDistance","mediaMaxDistance","mediaConeInnerAngle","mediaConeOuterAngle","mediaConeOuterGain","updateAvatarAudioSettings","avatarDistanceModel","avatarRolloffFactor","avatarRefDistance","avatarMaxDistance","AudioSettingsSystem","audio_settings_system_defineProperty","defaultSettings","mediaVolume","audioSettings","mediaAudioSources","avatarAudioSources","onSceneReset","registerMediaAudioSource","unregisterMediaAudioSource","registerAvatarAudioSource","unregisterAvatarAudioSource","mediaAudioSource","avatarAudioSource","onSoundSourceSet","networkedAudioSource","DOMContentDidLoad","interactionSfxSystem","superSpawnerSystem","singleActionButtonSystem","holdableButtonSystem","hoverButtonSystem","hoverMenuSystem","hapticFeedbackSystem","drawingMenuSystem","didInteractLeftThisFrame","didInteractRightThisFrame","_gotAudioTrack","_recorderTimeout","_initRecorder","_stream","_recorder","_tryAddingAudioTrack","addScalar","clampScalar","HIGHLIGHT","NO_HIGHLIGHT","TRANSFORM_COLOR_1","TRANSFORM_COLOR_2","defaultDistance","minDistance","firstHitOnly","lineGeometry","Line","LineBasicMaterial","cameraPos","isGrabbing","intersectionIsValid","addScaledVector","lerpHSL","posePosition","cursorPosition","positionArray","computeBoundingSphere","DRAW_MODE","almostEquals","drawFrequency","minDistanceBetweenPoints","drawingManager","availableColors","minRadius","maxRadius","penVisible","penTipPosition","timeSinceLastDraw","lastPosition","currentDrawing","worldPosition","colorIndex","grabbed","originalPosition","lastIntersectionDistance","penTip","penLaserAttributesUpdated","penLaserAttributes","laserVisible","laserInHand","laserOrigin","remoteLaserOrigin","laserTarget","_handleInput","_getIntersection","_updatePenTip","_updateLaser","_setPenVisible","_doDraw","_startDraw","_endDraw","penScaleMod","_changeRadius","_changeColor","_undoDraw","worldQuaternion","laserStartPosition","laserEndPosition","camerWorldPosition","lastIntersectedObject","getLastPoint","_getNormal","draw","directionToCamera","startDraw","endDraw","mod","InterpolationBuffer","tipMaterial","lineCurve","LineCurve3","TubeBufferGeometry","laser","laserTip","originBuffer","MODE_LERP","targetBuffer","originBufferPosition","targetBufferPosition","getPosition","laserTipVisible","SharedBufferGeometry","primitiveMode","maxBufferSize","geometries","addBuffer","restartPrimitive","addVertex","prevIdx","componentSize","diff","undo","normals","colors","setDrawRange","addColor","addNormal","computeBoundingSpheres","SharedBufferGeometryManager","sharedBuffers","addSharedBuffer","getSharedBuffer","copyData","fromIndex","toIndex","segments","defaultRadius","maxDrawTimeout","maxLines","maxPointsPerLine","_receiveData","networkBuffer","sendNetworkBufferQueue","drawStarted","lineStarted","remoteLineStarted","receivedBufferParts","bufferIndex","connectedToOwner","networkBufferInitialized","VertexColors","sharedBufferGeometryManager","lastPoint","lastSegments","currentSegments","sharedBuffer","vertexCount","networkBufferCount","currentPointCount","invalidPointRead","lastReadPointCount","networkBufferHistory","onConnect","getNetworkId","drawingId","subscribeToDataChannel","unsubscribeToDataChannel","isConnected","hasActiveDataChannel","sendDataGuaranteed","_broadcastDrawing","_drawFromNetwork","_sendNetworkBuffer","_deleteExpiredLines","exporter","GLTFExporter","convertToTriangles","networked-drawing-buffer","parseChunks","includeCustomExtensions","asset","generator","createGLBBlob","NEGATIVE_INFINITY","temp","drawRange","attribute","getX","getY","getZ","originalGeometry","originalPositions","originalColors","originalNormals","positions","i2","i3","deserializeDrawing","setHex","copyArray","broadcastDataGuaranteed","didWork","pointCount","_draw","_updateBuffer","drawTime","datum","idxLength","parts","_addToNetworkBuffer","getHexString","capNormal","radiusMultiplier","_generateSegments","_drawCylinder","_drawEndCap","_endLine","_addDegenerateTriangle","_restartPrimitive","_drawCap","_pushToNetworkBuffer","_drawPoint","projectedDirection","projectedPoint","elapsedTime","copyDirection","copyNormal","setLength","getHex","_addVertex","down","segmentIndex","segment","segmentsList","angleIncrement","_rotatePointAroundAxis","calculatedDirection","_getDeserializeButton","networkedDrawingBuffer","finishDrawing","ACTIVATION_STATES","ISLAND_SLEEPING","WANTS_DEACTIVATION","DISABLE_SIMULATION","angularFactor","KINEMATIC","emitCollisionEvents","disableCollision","scaleAutoUpdate","Body","CYLINDER","SPHERE","CAPSULE","CONE","HACD","VHACD","maxHalfExtent","sphereRadius","cylinderAxis","bodyEl","threeToAmmo","localTransform","registerNetworkSchemas","vectorRequiresUpdate","almostEqualVec3","requiresNetworkUpdate","BUILD_VERSION","HUD_BACKGROUND","isEmbed","firstSyncSource","syncSource","isTelemetryDisabled","instanceKey","started_at","onStorageEvent","detectConcurrentLoad","uiProps","routerBaseName","createMemoryHistory","createBrowserHistory","basename","qsVREntryType","userinputSets","Router","Route","react_components_ui_root","hub_objectSpread","hub_isBotMode","hub_store","hub_mediaSearchStore","mountUI","updateUIForHub","entry_code","updateEnvironmentForHub","sceneUrl","isLegacyBundle","sceneErrorHandler","environmentScene","model_url","loadingEnvironment","defaultSpaceTopic","topics","glbAsset","assets","asset_type","bundleAsset","hasExtension","baseURL","LoaderUtils","extractUrlBase","environmentEl","fader","enterSceneWhenLoaded","hub_asyncToGenerator","initProfile","WebAssembly","defaultRoomId","setRegistration","setRegistrationFailed","initialBatchImage","texImage2D","compressedTexImage2D","patchThreeAllocations","predicate","messageId","onFailure","actionError","_x10","sceneInfo","isInOAuth","exitOAuth","serializableDetail","getTwitterOAuthURL","_x11","handleEarlyVRMode","getVRDisplay","chatFocusTarget","RTCDataChannelEvent","buildNumber","reload","hasVREntryDevice","onFirstEnvironmentLoad","runBotMode","previewCamera","reorder","setupLobbyCamera","isReloading","retDeployReconnectInterval","retPhxChannel","setVapidPublicKey","vapid_public_key","_x12","pushSubscriptionEndpoint","getCurrentEndpoint","oauthFlowPermsToken","createHubChannelParams","push_subscription_endpoint","migrateToNewReticulumServer","deployNotification","ret_version","ret_pool","tryReconnect","_ref11","oldSocket","setSocket","teardown","_x13","_ref12","_x14","hubPhxChannel","isInitialJoin","presenceSync","setPhoenixChannel","_ref13","session_token","vrHudPresenceCount","sendProfileUpdate","roomEntrySlotCount","entering","entryNowDisallowed","__hadInitialSync","isSelf","currentMeta","_ref14","setClientId","setJoinToken","_x16","setHubChannel","setSubscribed","web_push","hub_requires_oauth","allowNAFTraffic","hubs","embedTokenEntry","onMediaSearchCancelled","objectsScene","objectsUrl","objectsEl","connectToScene","room","serverURL","newHostPollInterval","setReconnectionListeners","currentServerURL","serverUrl","newServerURL","getHost","sendViaPhoenix","reliable","isOpen","connectionState","reliableTransport","unreliableTransport","loadEnvironmentAndConnect","connectionErrorTimeout","connectError","isFull","handleHubChannelJoined","_x15","oauth_info","incomingMessage","userInfo","getAuthor","_createInWorldLogMessage","createInWorldLogMessage","stale_fields","titleParts","oldSlug","slug","entry_mode"],"mappings":"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SrB3B,EAAQ4B,MAAQ,CAACC,EAAWC,KAC1B,MAAMC,EACH/B,EAAQc,YAAcd,EAAQc,WAAWkB,QAAUhC,EAAQc,WAAWkB,OAAOH,IAC9EF,EAAeE,GACjB,OAAOE,GAAOD,SAAgBC,KAASA,GAGzC/B,EAAQiC,KAAO,CAACC,EAAUC,IAChBnC,EAAQc,YAAcd,EAAQc,WAAWsB,OAASpC,EAAQc,WAAWsB,MAAMF,IAAcC,EAGnGnC,EAAQqC,WAAaC,IACnBrC,EAAUqC,GAEZtC,EAAQC,QAAU,IAAMA,EAETD,oDChGf,MAAMuC,EAAa,CACjB,OACA,WACA,aACA,YACA,eACA,WACA,SACA,YACA,WACA,cACA,QACA,UACA,UACA,OACA,SACA,UACA,WACA,SACA,WACA,aACA,WACA,SACA,UACA,UACA,OACA,QACA,QACA,UACA,OACA,YACA,WACA,SACA,WACA,OACA,WACA,WACA,SACA,QACA,YACA,MACA,WACA,SACA,UACA,QACA,WACA,WACA,QACA,QACA,MACA,QACA,YACA,OACA,UACA,SACA,cACA,WACA,UACA,YACA,UACA,WACA,YACA,UACA,aACA,SACA,WACA,UACA,WACA,SACA,YACA,UACA,QACA,OACA,OACA,QACA,YACA,QACA,SACA,SACA,QACA,UACA,aACA,SACA,cACA,YACA,WACA,OACA,QACA,WACA,UACA,WACA,WACA,cACA,cACA,OACA,SACA,QACA,YACA,UACA,WACA,SACA,WACA,eACA,aACA,OACA,SACA,MACA,WACA,SACA,QACA,SACA,UACA,QACA,QACA,SACA,SACA,WACA,OACA,UACA,aACA,aACA,YACA,YACA,UACA,SACA,UACA,aACA,aACA,OACA,YACA,WACA,WACA,SACA,YACA,WACA,aACA,aACA,cACA,UACA,UACA,OACA,QACA,QACA,SACA,OACA,WACA,OACA,YACA,QACA,UACA,UACA,WACA,QACA,WACA,YACA,QACA,YACA,QACA,OACA,YACA,aACA,QACA,SACA,SACA,QACA,QACA,QACA,MACA,QACA,WACA,QACA,WACA,QACA,WACA,UACA,SACA,OACA,QACA,MACA,UACA,QACA,UACA,QACA,QACA,QACA,WACA,WACA,SACA,WACA,WACA,cACA,gBACA,WACA,aACA,QACA,aACA,YACA,cACA,WACA,aACA,UACA,YACA,UACA,YACA,YACA,aACA,YACA,WACA,OACA,WACA,OACA,YACA,QACA,SACA,WACA,WACA,SACA,SACA,OACA,WACA,WACA,UACA,YACA,SACA,UACA,YACA,aACA,QACA,SACA,eACA,UACA,QACA,SACA,UACA,YACA,OACA,MACA,UACA,UACA,WACA,WACA,QACA,QACA,WACA,SACA,WACA,WACA,aACA,SACA,aACA,cACA,SACA,aACA,WACA,SACA,SACA,OACA,QACA,SACA,SACA,SACA,UACA,OACA,WACA,QACA,aACA,SACA,UACA,UACA,WACA,YACA,YACA,QACA,UACA,YACA,QACA,SACA,UACA,UACA,UACA,UACA,OACA,QACA,OACA,SACA,YACA,UACA,YACA,cACA,WACA,UACA,eACA,SACA,OACA,cACA,WACA,YACA,SACA,WACA,UACA,YACA,UACA,WACA,WACA,SACA,YACA,UACA,OACA,WACA,QACA,YACA,WACA,WACA,QACA,QACA,SACA,OACA,YACA,SACA,eACA,aACA,WACA,SACA,SACA,YACA,SACA,OACA,WACA,YACA,QACA,QACA,OACA,OACA,QACA,SACA,UACA,UACA,SACA,UACA,OACA,WACA,UACA,WACA,YACA,WACA,UACA,cACA,QACA,YACA,OACA,QACA,WACA,OACA,QACA,OACA,gBACA,UACA,YACA,cACA,SACA,QACA,SACA,WACA,WACA,WACA,WACA,OACA,UACA,OACA,QACA,SACA,SACA,SACA,WACA,SACA,SACA,OACA,OACA,UACA,UACA,QACA,SACA,eACA,cACA,WACA,UACA,cACA,SACA,YACA,SACA,cACA,aACA,YACA,SACA,QACA,SACA,WACA,QACA,UACA,WACA,YACA,YACA,cACA,QACA,OACA,YACA,YACA,YACA,YACA,aACA,YACA,WACA,QACA,OACA,WACA,QACA,WACA,aACA,SACA,WACA,WACA,SACA,YACA,UACA,UACA,aACA,MACA,OACA,aACA,WACA,WACA,YACA,cACA,QACA,QACA,UACA,gBACA,WACA,OACA,UACA,SACA,SACA,SACA,aACA,SACA,UACA,WACA,WACA,SACA,UACA,UACA,WACA,UACA,QACA,aACA,aACA,QACA,iBACA,UACA,SACA,SACA,WACA,SACA,QACA,SACA,QACA,cACA,WACA,UACA,SACA,WACA,WACA,QACA,UACA,YACA,aACA,aACA,SACA,SACA,UACA,SACA,UACA,QACA,YACA,SACA,UACA,WACA,WACA,YACA,aACA,UACA,YACA,YACA,QACA,UACA,SACA,WACA,OACA,UACA,SACA,WACA,QACA,QACA,OACA,cACA,YACA,WACA,UACA,WACA,SACA,cACA,SACA,SACA,WACA,OACA,WACA,QACA,QACA,UACA,QACA,QACA,SACA,YACA,SACA,cACA,cACA,QACA,QACA,QACA,QACA,WACA,WACA,YACA,eACA,aACA,aACA,OACA,aACA,cACA,YACA,SACA,QACA,UACA,WACA,OACA,OACA,UACA,WACA,SACA,aACA,SACA,UACA,UACA,SACA,QACA,QACA,SACA,aACA,YACA,QACA,QACA,cACA,UACA,WACA,cACA,SACA,WACA,OACA,SACA,OACA,SACA,WACA,QACA,QACA,UACA,aACA,SACA,WACA,MACA,QACA,YACA,UACA,OACA,UACA,OACA,WACA,OACA,QACA,UACA,QACA,OACA,SACA,WACA,SACA,OACA,UACA,SACA,cACA,YACA,UAGIC,EAAQ,CACZ,QACA,OACA,QACA,WACA,QACA,OACA,SACA,QACA,YACA,SACA,eACA,WACA,QACA,SACA,WACA,QACA,SACA,UACA,OACA,SACA,SACA,UACA,OACA,OACA,OACA,QACA,OACA,QACA,YACA,SACA,OACA,SACA,SACA,WACA,YACA,cACA,SACA,YACA,SACA,UACA,aACA,WACA,cACA,YACA,OACA,UACA,SACA,aACA,WACA,eACA,aACA,SAC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,EAAOk+C,QAAQ,GAAGpD,OAAO93C,IAAI03C,IAIjC6D,yBACMz7C,KAAKk6C,WACPl6C,KAAKk6C,UAAUl+B,SAASs8B,GAE1B,MAAM9vB,EAAQnC,OAAOoC,OAAO,GACtB/I,EAAS8I,EAAM2uB,GAAG,WAClBj6C,EAASwiB,EAAS8I,EAAMsyB,SAASC,GAAGE,UAAUzyB,EAAMtrB,QAAUsrB,EAAMtrB,OAC1EA,EAAO86C,OAAOkD,KAAOl7C,KAAKs6C,SAASY,KAC/Bx7B,IACFxiB,EAAOk+C,QAAQ,GAAGpD,OAAOkD,KAAOl7C,KAAKs6C,SAASa,MAC9Cj+C,EAAOk+C,QAAQ,GAAGpD,OAAOkD,KAAOl7C,KAAKs6C,SAASe,uCC/S7C,SAASK,EAAgBpiC,EAAUqiC,GACnCriC,EAASR,WAEVtL,MAAMouC,QAAQtiC,EAASR,UACzBQ,EAASR,SAASxW,QAAQq5C,GAE1BA,EAAGriC,EAASR,WAIT,SAASwT,EAAahT,EAAUqiC,GACrC,GAAKriC,EAASR,SAEd,OAAItL,MAAMouC,QAAQtiC,EAASR,UAClBQ,EAASR,SAASlZ,IAAI+7C,GAEtBA,EAAGriC,EAASR,UAhBvB3iB,EAAAY,EAAA4f,EAAA,sBAAA+kC,IAAAvlD,EAAAY,EAAA4f,EAAA,sBAAA2V,oPCGA,MAAMuvB,EAAQ,CACZ,gBACA,cACA,oBACA,cACA,YACA,cACA,aACA,aACA,aACA,gBACA,gBACA,gBACA,gBACA,YACA,eACA,mBACA,mBACA,iBACA,gBACA,kBACA,eACA,eACA,mBACA,iBACA,WACA,cACA,gBACA,UACA,WACA,gBACA,cACA,YACA,WACA,YACA,YACA,mBACA,iBACA,aACA,aACA,YACA,cACA,eACA,cACA,cACA,UACA,WACA,eACA,eACA,YACA,mBACA,gBACA,oBACA,kBACA,YACA,cACA,kBACA,aACA,cACA,eACA,cACA,cACA,cACA,iBACA,kBACA,cACA,WACA,WACA,cACA,OACA,mBACA,cACA,mBACA,cACA,iBACA,aACA,cACA,cACA,gBACA,qBACA,iBACA,eACA,gBACA,eACA,SACA,Y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CE,MAAM2oH,EAAW,CACf,QACA,MACA,OACA,SACA,OACA,QACA,UACA,oBACA,qBAOF,OAJIznH,aAAS,kBACXynH,EAAS9tJ,KAAK,kBAIdg0I,GAAAttH,EAAAtY,cAAA,OAAKi3B,UAAWC,KAAW,CAAEmd,CAAC0rB,KAAOyb,cAAc,EAAMnnC,CAAC0rB,KAAO4/E,kBAAmBjjJ,KAAKw5B,MAAM0pH,SAC5FF,EAASpjJ,IACR9I,IACiC,KAA9BkJ,KAAKw5B,MAAM2pH,gBACVrsJ,EAAEmb,MAAM,KAAK,GAAGmC,WAAWpU,KAAKw5B,MAAM2pH,eAAelxI,MAAM,KAAK,MAChEi3H,GAAAttH,EAAAtY,cAAA,OAAKi3B,UAAW8oC,KAAOxgD,MAAO9qB,IAAKjB,GACjCoyI,GAAAttH,EAAAtY,cAAA,OAAKi3B,UAAW8oC,KAAO0b,SAAvB,IAAkCjoF,GAClCoyI,GAAAttH,EAAAtY,cAAA,WACE4lI,GAAAttH,EAAAtY,cAACimI,GAAA,EAAD,CAAkB5zH,eAAgB7e,EAAEmb,MAAM,KAAK,2HAhC5C8wI,eACA,CACjBI,eAAgBjoH,KAAUI,OAC1B4nH,MAAOhoH,KAAUG,uGCPrB,MAAM+nH,GAAyB,GAGzBC,GAAc,CAClBC,MAAM,EACNC,MAAM,EACNC,MAAM,EACNC,MAAM,EACNC,SAAS,EACTC,UAAU,EACVC,OAAO,EACPC,QAAQ,EACRC,OAAO,EACPC,OAAO,GAKHC,GAAW,CACf,IACA,OACA,UACA,OACA,UACA,QACA,QACA,IACA,OACA,MACA,MACA,aACA,OACA,KACA,SACA,SACA,UACA,SACA,OACA,OACA,MACA,WACA,UACA,WACA,KACA,MACA,UACA,MACA,MACA,KACA,KACA,KACA,QACA,WACA,aACA,SACA,OACA,SACA,OACA,KACA,KACA,KACA,KACA,KACA,KACA,OACA,SACA,SACA,KACA,OACA,IACA,SACA,MACA,QACA,MACA,MACA,SACA,QACA,SACA,KACA,OACA,MACA,OACA,OACA,OACA,OACA,QACA,MACA,OACA,WACA,SACA,KACA,SACA,WACA,SACA,IACA,QACA,M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","file":"assets/js/hub-a5d1e801d30bb0dd261b.js","sourcesContent":[" \t// install a JSONP callback for chunk loading\n \tfunction webpackJsonpCallback(data) {\n \t\tvar chunkIds = data[0];\n \t\tvar moreModules = data[1];\n \t\tvar executeModules = data[2];\n\n \t\t// add \"moreModules\" to the modules object,\n \t\t// then flag all \"chunkIds\" as loaded and fire callback\n \t\tvar moduleId, chunkId, i = 0, resolves = [];\n \t\tfor(;i < chunkIds.length; i++) {\n \t\t\tchunkId = chunkIds[i];\n \t\t\tif(installedChunks[chunkId]) {\n \t\t\t\tresolves.push(installedChunks[chunkId][0]);\n \t\t\t}\n \t\t\tinstalledChunks[chunkId] = 0;\n \t\t}\n \t\tfor(moduleId in moreModules) {\n \t\t\tif(Object.prototype.hasOwnProperty.call(moreModules, moduleId)) {\n \t\t\t\tmodules[moduleId] = moreModules[moduleId];\n \t\t\t}\n \t\t}\n \t\tif(parentJsonpFunction) parentJsonpFunction(data);\n\n \t\twhile(resolves.length) {\n \t\t\tresolves.shift()();\n \t\t}\n\n \t\t// add entry modules from loaded chunk to deferred list\n \t\tdeferredModules.push.apply(deferredModules, executeModules || []);\n\n \t\t// run deferred modules when all chunks ready\n \t\treturn checkDeferredModules();\n \t};\n \tfunction checkDeferredModules() {\n \t\tvar result;\n \t\tfor(var i = 0; i < deferredModules.length; i++) {\n \t\t\tvar deferredModule = deferredModules[i];\n \t\t\tvar fulfilled = true;\n \t\t\tfor(var j = 1; j < deferredModule.length; j++) {\n \t\t\t\tvar depId = deferredModule[j];\n \t\t\t\tif(installedChunks[depId] !== 0) fulfilled = false;\n \t\t\t}\n \t\t\tif(fulfilled) {\n \t\t\t\tdeferredModules.splice(i--, 1);\n \t\t\t\tresult = __webpack_require__(__webpack_require__.s = deferredModule[0]);\n \t\t\t}\n \t\t}\n\n \t\treturn result;\n \t}\n\n \t// The module cache\n \tvar installedModules = {};\n\n \t// object to store loaded and loading chunks\n \t// undefined = chunk not loaded, null = chunk preloaded/prefetched\n \t// Promise = chunk loading, 0 = chunk loaded\n \tvar installedChunks = {\n \t\t5: 0\n \t};\n\n \tvar deferredModules = [];\n\n \t// script path function\n \tfunction jsonpScriptSrc(chunkId) {\n \t\treturn __webpack_require__.p + \"assets/js/\" + ({}[chunkId]||chunkId) + \"-\" + {}[chunkId] + \".js\"\n \t}\n\n \t// The require function\n \tfunction __webpack_require__(moduleId) {\n\n \t\t// Check if module is in cache\n \t\tif(installedModules[moduleId]) {\n \t\t\treturn installedModules[moduleId].exports;\n \t\t}\n \t\t// Create a new module (and put it into the cache)\n \t\tvar module = installedModules[moduleId] = {\n \t\t\ti: moduleId,\n \t\t\tl: false,\n \t\t\texports: {}\n \t\t};\n\n \t\t// Execute the module function\n \t\tmodules[moduleId].call(module.exports, module, module.exports, __webpack_require__);\n\n \t\t// Flag the module as loaded\n \t\tmodule.l = true;\n\n \t\t// Return the exports of the module\n \t\treturn module.exports;\n \t}\n\n \t// The chunk loading function for additional chunks\n \t// Since all referenced chunks are already included\n \t// in this file, this function is empty here.\n \t__webpack_require__.e = function requireEnsure() {\n \t\treturn Promise.resolve();\n \t};\n\n \t// expose the modules object (__webpack_modules__)\n \t__webpack_require__.m = modules;\n\n \t// expose the module cache\n \t__webpack_require__.c = installedModules;\n\n \t// define getter function for harmony exports\n \t__webpack_require__.d = function(exports, name, getter) {\n \t\tif(!__webpack_require__.o(exports, name)) {\n \t\t\tObject.defineProperty(exports, name, { enumerable: true, get: getter });\n \t\t}\n \t};\n\n \t// define __esModule on exports\n \t__webpack_require__.r = function(exports) {\n \t\tif(typeof Symbol !== 'undefined' && Symbol.toStringTag) {\n \t\t\tObject.defineProperty(exports, Symbol.toStringTag, { value: 'Module' });\n \t\t}\n \t\tObject.defineProperty(exports, '__esModule', { value: true });\n \t};\n\n \t// create a fake namespace object\n \t// mode & 1: value is a module id, require it\n \t// mode & 2: merge all properties of value into the ns\n \t// mode & 4: return value when already ns object\n \t// mode & 8|1: behave like require\n \t__webpack_require__.t = function(value, mode) {\n \t\tif(mode & 1) value = __webpack_require__(value);\n \t\tif(mode & 8) return value;\n \t\tif((mode & 4) && typeof value === 'object' && value && value.__esModule) return value;\n \t\tvar ns = Object.create(null);\n \t\t__webpack_require__.r(ns);\n \t\tObject.defineProperty(ns, 'default', { enumerable: true, value: value });\n \t\tif(mode & 2 && typeof value != 'string') for(var key in value) __webpack_require__.d(ns, key, function(key) { return value[key]; }.bind(null, key));\n \t\treturn ns;\n \t};\n\n \t// getDefaultExport function for compatibility with non-harmony modules\n \t__webpack_require__.n = function(module) {\n \t\tvar getter = module && module.__esModule ?\n \t\t\tfunction getDefault() { return module['default']; } :\n \t\t\tfunction getModuleExports() { return module; };\n \t\t__webpack_require__.d(getter, 'a', getter);\n \t\treturn getter;\n \t};\n\n \t// Object.prototype.hasOwnProperty.call\n \t__webpack_require__.o = function(object, property) { return Object.prototype.hasOwnProperty.call(object, property); };\n\n \t// __webpack_public_path__\n \t__webpack_require__.p = \"/custom-hubs-template/\";\n\n \t// on error function for async loading\n \t__webpack_require__.oe = function(err) { console.error(err); throw err; };\n\n \tvar jsonpArray = window[\"webpackJsonp\"] = window[\"webpackJsonp\"] || [];\n \tvar oldJsonpFunction = jsonpArray.push.bind(jsonpArray);\n \tjsonpArray.push = webpackJsonpCallback;\n \tjsonpArray = jsonpArray.slice();\n \tfor(var i = 0; i < jsonpArray.length; i++) webpackJsonpCallback(jsonpArray[i]);\n \tvar parentJsonpFunction = oldJsonpFunction;\n\n\n \t// add entry module to deferred list\n \tdeferredModules.push([1285,1,0]);\n \t// run deferred modules when ready\n \treturn checkDeferredModules();\n","export const paths = {};\npaths.noop = \"/noop\";\npaths.actions = {};\npaths.actions.log = \"/actions/log\";\npaths.actions.toggleScreenShare = \"/actions/toggleScreenShare\";\npaths.actions.snapRotateLeft = \"/actions/snapRotateLeft\";\npaths.actions.snapRotateRight = \"/actions/snapRotateRight\";\npaths.actions.angularVelocity = \"/actions/angularVelocity\";\npaths.actions.logDebugFrame = \"/actions/logDebugFrame\";\npaths.actions.logInteractionState = \"/actions/logInteractionState\";\npaths.actions.debugUserInput = {};\npaths.actions.debugUserInput.describeCurrentMasks = \"/actions/debugUserInput/describeCurrentMasks\";\npaths.actions.cameraDelta = \"/actions/cameraDelta\";\npaths.actions.lobbyCameraDelta = \"/actions/lobbyCameraDelta\";\npaths.actions.characterAcceleration = \"/actions/characterAcceleration\";\npaths.actions.dCharSpeed = \"/actions/dCharSpeed\";\npaths.actions.boost = \"/actions/boost\";\npaths.actions.startGazeTeleport = \"/actions/startTeleport\";\npaths.actions.stopGazeTeleport = \"/actions/stopTeleport\";\npaths.actions.spawnPen = \"/actions/spawnPen\";\npaths.actions.ensureFrozen = \"/actions/ensureFrozen\";\npaths.actions.toggleFreeze = \"/actions/toggleFreeze\";\npaths.actions.thaw = \"/actions/thaw\";\npaths.actions.muteMic = \"/actions/muteMic\";\npaths.actions.toggleFly = \"/actions/toggleFly\";\npaths.actions.toggleUI = \"/actions/toggleUI\";\npaths.actions.waypointDeltaDistance = \"/actions/waypointDeltaDistance\";\npaths.actions.focusChat = \"/actions/focusChat\";\npaths.actions.focusChatCommand = \"/actions/focusChatCommand\";\npaths.actions.toggleCamera = \"/actions/toggleCamera\";\npaths.actions.takeSnapshot = \"/actions/takeSnapshot\";\npaths.actions.mediaExit = \"/actions/mediaExit\";\npaths.actions.mediaSearch1 = \"/actions/mediaSearch1\";\npaths.actions.mediaSearch2 = \"/actions/mediaSearch2\";\npaths.actions.mediaSearch3 = \"/actions/mediaSearch3\";\npaths.actions.mediaSearch4 = \"/actions/mediaSearch4\";\npaths.actions.mediaSearch5 = \"/actions/mediaSearch5\";\npaths.actions.mediaSearch6 = \"/actions/mediaSearch6\";\npaths.actions.mediaSearch7 = \"/actions/mediaSearch7\";\npaths.actions.mediaSearch8 = \"/actions/mediaSearch8\";\npaths.actions.transformModifier = \"/actions/transformModifier\";\npaths.actions.rayObjectRotation = \"/actions/rayObjectRotation\";\npaths.actions.cursor = {};\npaths.actions.cursor.right = {};\npaths.actions.cursor.right.pose = \"/actions/cursor/right/Pose\";\npaths.actions.cursor.right.hideLine = \"/actions/cursor/right/HideLine\";\npaths.actions.cursor.right.grab = \"/actions/cursor/right/Grab\";\npaths.actions.cursor.right.drop = \"/actions/cursor/right/Drop\";\npaths.actions.cursor.right.modDelta = \"/actions/cursor/right/ModDelta\";\npaths.actions.cursor.right.startDrawing = \"/actions/cursor/right/StartDrawing\";\npaths.actions.cursor.right.stopDrawing = \"/actions/cursor/right/StopDrawing\";\npaths.actions.cursor.right.undoDrawing = \"/actions/cursor/right/UndoDrawing\";\npaths.actions.cursor.right.penNextColor = \"/actions/cursor/right/PenNextColor\";\npaths.actions.cursor.right.penPrevColor = \"/actions/cursor/right/PenPrevColor\";\npaths.actions.cursor.right.scalePenTip = \"/actions/cursor/right/ScalePenTip\";\npaths.actions.cursor.right.scaleGrabbedGrabbable = \"/actions/cursor/right/ScaleGrabbedGrabbable\";\npaths.actions.cursor.right.mediaVolumeMod = \"/actions/cursor/right//mediaVolumeMod\";\npaths.actions.cursor.right.takeSnapshot = \"/actions/cursor/right/TakeSnapshot\";\npaths.actions.cursor.right.wake = \"/actions/cursor/right/wake\";\npaths.actions.cursor.left = {};\npaths.actions.cursor.left.pose = \"/actions/cursor/left/Pose\";\npaths.actions.cursor.left.hideLine = \"/actions/cursor/left/HideLine\";\npaths.actions.cursor.left.grab = \"/actions/cursor/left/Grab\";\npaths.actions.cursor.left.drop = \"/actions/cursor/left/Drop\";\npaths.actions.cursor.left.modDelta = \"/actions/cursor/left/ModDelta\";\npaths.actions.cursor.left.startDrawing = \"/actions/cursor/left/StartDrawing\";\npaths.actions.cursor.left.stopDrawing = \"/actions/cursor/left/StopDrawing\";\npaths.actions.cursor.left.undoDrawing = \"/actions/cursor/left/UndoDrawing\";\npaths.actions.cursor.left.penNextColor = \"/actions/cursor/left/PenNextColor\";\npaths.actions.cursor.left.penPrevColor = \"/actions/cursor/left/PenPrevColor\";\npaths.actions.cursor.left.scalePenTip = \"/actions/cursor/left/ScalePenTip\";\npaths.actions.cursor.left.scaleGrabbedGrabbable = \"/actions/cursor/left/ScaleGrabbedGrabbable\";\npaths.actions.cursor.left.mediaVolumeMod = \"/actions/cursor/left//mediaVolumeMod\";\npaths.actions.cursor.left.takeSnapshot = \"/actions/cursor/left/TakeSnapshot\";\npaths.actions.cursor.left.wake = \"/actions/cursor/left/wake\";\npaths.actions.pen = {};\npaths.actions.pen.remove = \"/actions/pen/remove\";\npaths.actions.rightHand = {};\npaths.actions.rightHand.matrix = \"/actions/rightHand/matrix\";\npaths.actions.rightHand.pose = \"/actions/rightHandPose\";\npaths.actions.rightHand.grab = \"/actions/rightHandGrab\";\npaths.actions.rightHand.drop = \"/actions/rightHandDrop\";\npaths.actions.rightHand.modDelta = \"/actions/rightHandModDelta\";\npaths.actions.rightHand.startDrawing = \"/actions/rightHandStartDrawing\";\npaths.actions.rightHand.stopDrawing = \"/actions/rightHandStopDrawing\";\npaths.actions.rightHand.undoDrawing = \"/actions/rightHandUndoDrawing\";\npaths.actions.rightHand.switchDrawMode = \"/actions/rightHandSwitchDrawMode\";\npaths.actions.rightHand.penNextColor = \"/actions/rightHandPenNextColor\";\npaths.actions.rightHand.penPrevColor = \"/actions/rightHandPenPrevColor\";\npaths.actions.rightHand.scalePenTip = \"/actions/rightHandScalePenTip\";\npaths.actions.rightHand.startTeleport = \"/actions/rightHand/startTeleport\";\npaths.actions.rightHand.stopTeleport = \"/actions/rightHand/stopTeleport\";\npaths.actions.rightHand.takeSnapshot = \"/actions/rightHandTakeSnapshot\";\npaths.actions.rightHand.thumb = \"/actions/rightHand/thumbDown\";\npaths.actions.rightHand.index = \"/actions/rightHand/indexDown\";\npaths.actions.rightHand.middleRingPinky = \"/actions/rightHand/middleRingPinkyDown\";\npaths.actions.leftHand = {};\npaths.actions.leftHand.matrix = \"/actions/leftHand/matrix\";\npaths.actions.leftHand.pose = \"/actions/leftHandPose\";\npaths.actions.leftHand.grab = \"/actions/leftHandGrab\";\npaths.actions.leftHand.drop = \"/actions/leftHandDrop\";\npaths.actions.leftHand.modDelta = \"/actions/leftHandModDelta\";\npaths.actions.leftHand.startDrawing = \"/actions/leftHandStartDrawing\";\npaths.actions.leftHand.stopDrawing = \"/actions/leftHandStopDrawing\";\npaths.actions.leftHand.undoDrawing = \"/actions/leftHandUndoDrawing\";\npaths.actions.leftHand.switchDrawMode = \"/actions/leftHandSwitchDrawMode\";\npaths.actions.leftHand.penNextColor = \"/actions/leftHandPenNextColor\";\npaths.actions.leftHand.penPrevColor = \"/actions/leftHandPenPrevColor\";\npaths.actions.leftHand.scalePenTip = \"/actions/leftHandScalePenTip\";\npaths.actions.leftHand.startTeleport = \"/actions/leftHand/startTeleport\";\npaths.actions.leftHand.stopTeleport = \"/actions/leftHand/stopTeleport\";\npaths.actions.leftHand.takeSnapshot = \"/actions/leftHandTakeSnapshot\";\npaths.actions.leftHand.thumb = \"/actions/leftHand/thumbDown\";\npaths.actions.leftHand.index = \"/actions/leftHand/indexDown\";\npaths.actions.leftHand.middleRingPinky = \"/actions/leftHand/middleRingPinkyDown\";\npaths.actions.camera = {};\npaths.actions.camera.exitMirror = \"/actions/cameraExitMirror\";\npaths.actions.startInspecting = \"/actions/startInspecting\";\npaths.actions.stopInspecting = \"/actions/stopInspecting\";\npaths.actions.inspectZoom = \"/actions/inspectZoom\";\npaths.actions.inspectPanY = \"/actions/inspectPanY\";\npaths.actions.resetInspectView = \"/actions/resetInspectView\";\npaths.actions.nextCameraMode = \"/actions/nextCameraMode\";\npaths.haptics = {};\npaths.haptics.actuators = {};\npaths.haptics.actuators.left = \"/haptics/actuators/left\";\npaths.haptics.actuators.right = \"/haptics/actuators/right\";\n\npaths.device = {};\npaths.device.mouse = {};\npaths.device.mouse.coords = \"/device/mouse/coords\";\npaths.device.mouse.movementXY = \"/device/mouse/movementXY\";\npaths.device.mouse.buttonLeft = \"/device/mouse/buttonLeft\";\npaths.device.mouse.buttonRight = \"/device/mouse/buttonRight\";\npaths.device.mouse.buttonMiddle = \"/device/mouse/buttonMiddle\";\npaths.device.mouse.wheel = \"/device/mouse/wheel\";\npaths.device.smartMouse = {};\npaths.device.smartMouse.cursorPose = \"/device/smartMouse/cursorPose\";\npaths.device.smartMouse.cameraDelta = \"/device/smartMouse/cameraDelta\";\npaths.device.smartMouse.shouldMoveCamera = \"/device/smartMouse/shouldMoveCamera\";\npaths.device.touchscreen = {};\npaths.device.touchscreen.cursorPose = \"/device/touchscreen/cursorPose\";\npaths.device.touchscreen.touchCameraDelta = \"/device/touchscreen/touchCameraDelta\";\npaths.device.touchscreen.gyroCameraDelta = \"/device/touchscreen/gyroCameraDelta\";\npaths.device.touchscreen.cameraDelta = \"/device/touchscreen/cameraDelta\";\npaths.device.touchscreen.pinch = {};\npaths.device.touchscreen.pinch.delta = \"/device/touchscreen/pinch/delta\";\npaths.device.touchscreen.pinch.initialDistance = \"/device/touchscreen/pinch/initialDistance\";\npaths.device.touchscreen.pinch.currentDistance = \"/device/touchscreen/pinch/currentDistance\";\npaths.device.touchscreen.isTouching = \"/device/touchscreen/isTouching\";\npaths.device.touchscreen.isTouchingGrabbable = \"/device/touchscreen/isTouchingGrabbable\";\npaths.device.touchscreen.tap1 = \"/device/touchscreen/tap1\";\npaths.device.touchscreen.tap2 = \"/device/touchscreen/tap2\";\npaths.device.touchscreen.tap3 = \"/device/touchscreen/tap3\";\npaths.device.touchscreen.tap4 = \"/device/touchscreen/tap4\";\npaths.device.touchscreen.tap5 = \"/device/touchscreen/tap5\";\npaths.device.touchscreen.anything = \"/device/touchscreen/anything\";\npaths.device.gyro = {};\npaths.device.gyro.averageDeltaX = \"/device/gyro/averageDeltaX\";\npaths.device.gyro.averageDeltaY = \"/device/gyro/averageDeltaY\";\npaths.device.hud = {};\npaths.device.hud.penButton = \"/device/hud/penButton\";\n\npaths.device.keyboard = {\n  map: new Map(),\n  key: function(k) {\n    let path = this.map.get(k);\n    if (path) {\n      return path;\n    }\n    path = `/device/keyboard/${k === \" \" ? \"space\" : k.toLowerCase()}`;\n    this.map.set(k, path);\n    return path;\n  }\n};\n\npaths.device.gamepad = gamepadIndex => ({\n  button: buttonIndex => ({\n    pressed: `/device/gamepad/${gamepadIndex}/button/${buttonIndex}/pressed`,\n    touched: `/device/gamepad/${gamepadIndex}/button/${buttonIndex}/touched`,\n    value: `/device/gamepad/${gamepadIndex}/button/${buttonIndex}/value`\n  }),\n  axis: axisIndex => `/device/gamepad/${gamepadIndex}/axis/${axisIndex}`\n});\n\nconst xbox = \"/device/xbox/\";\npaths.device.xbox = {\n  v: name => `/vars/xbox/${name}`,\n  button: buttonName => ({\n    pressed: `${xbox}button/${buttonName}/pressed`,\n    touched: `${xbox}button/${buttonName}/touched`,\n    value: `${xbox}button/${buttonName}/value`\n  }),\n  axis: axisName => {\n    return `${xbox}axis/${axisName}`;\n  },\n  axesSum: `${xbox}axis/sum`\n};\n\npaths.device.oculusgo = {\n  // TODO remove these in favor of the direct accessors\n  button: buttonName => ({\n    pressed: `/device/oculusgo/button/${buttonName}/pressed`,\n    touched: `/device/oculusgo/button/${buttonName}/touched`,\n    value: `/device/oculusgo/button/${buttonName}/value`\n  }),\n  axis: axisName => {\n    return `/device/oculusgo/axis/${axisName}`;\n  },\n  //\n  trigger: {\n    pressed: \"/device/oculusgo/button/trigger/pressed\",\n    touched: \"/device/oculusgo/button/trigger/touched\",\n    value: \"/device/oculusgo/button/trigger/value\"\n  },\n  touchpad: {\n    pressed: \"/device/oculusgo/button/touchpad/pressed\",\n    touched: \"/device/oculusgo/button/touchpad/touched\",\n    value: \"/device/oculusgo/button/touchpad/value\",\n    axisX: \"/device/oculusgo/axis/touchpadX\",\n    axisY: \"/device/oculusgo/axis/touchpadY\"\n  },\n  pose: \"/device/oculusgo/pose\",\n  matrix: \"/device/oculusgo/matrix\",\n  v: name => {\n    return `/vars/oculusgo/${name}`;\n  }\n};\n\nconst gearVRController = \"/device/gearVRController/\";\npaths.device.gearVRController = {\n  button: buttonName => ({\n    pressed: `${gearVRController}button/${buttonName}/pressed`,\n    touched: `${gearVRController}button/${buttonName}/touched`,\n    value: `${gearVRController}button/${buttonName}/value`\n  }),\n  axis: axisName => {\n    return `${gearVRController}axis/${axisName}`;\n  },\n  pose: `${gearVRController}pose`,\n  matrix: `${gearVRController}matrix`,\n  v: name => {\n    return `/vars/gearVRController/${name}`;\n  }\n};\n\nconst daydream = \"/device/daydream/\";\npaths.device.daydream = {\n  button: buttonName => ({\n    pressed: `${daydream}button/${buttonName}/pressed`,\n    touched: `${daydream}button/${buttonName}/touched`,\n    value: `${daydream}button/${buttonName}/value`\n  }),\n  axis: axisName => {\n    return `${daydream}axis/${axisName}`;\n  },\n  pose: `${daydream}pose`,\n  matrix: `${daydream}matrix`\n};\n\nconst rightOculusTouch = \"/device/rightOculusTouch/\";\npaths.device.rightOculusTouch = {\n  button: buttonName => ({\n    pressed: `${rightOculusTouch}button/${buttonName}/pressed`,\n    touched: `${rightOculusTouch}button/${buttonName}/touched`,\n    value: `${rightOculusTouch}button/${buttonName}/value`\n  }),\n  axis: axisName => {\n    return `${rightOculusTouch}axis/${axisName}`;\n  },\n  axesSum: `${rightOculusTouch}axis/sum`,\n  pose: `${rightOculusTouch}pose`,\n  matrix: `${rightOculusTouch}matrix`\n};\n\nconst leftOculusTouch = \"/device/leftOculusTouch/\";\npaths.device.leftOculusTouch = {\n  button: buttonName => ({\n    pressed: `${leftOculusTouch}button/${buttonName}/pressed`,\n    touched: `${leftOculusTouch}button/${buttonName}/touched`,\n    value: `${leftOculusTouch}button/${buttonName}/value`\n  }),\n  axis: axisName => {\n    return `${leftOculusTouch}axis/${axisName}`;\n  },\n  axesSum: `${leftOculusTouch}axis/sum`,\n  pose: `${leftOculusTouch}pose`,\n  matrix: `${leftOculusTouch}matrix`\n};\n\npaths.device.vive = {};\npaths.device.vive.left = {\n  button: buttonName => ({\n    pressed: `/device/vive/left/button/${buttonName}/pressed`,\n    touched: `/device/vive/left/button/${buttonName}/touched`,\n    value: `/device/vive/left/button/${buttonName}/value`\n  }),\n  axis: axisName => {\n    return `/device/vive/left/axis/${axisName}`;\n  },\n  axesSum: \"/device/vive/left/axis/sum\",\n  pose: `/device/vive/left/pose`,\n  matrix: `/device/vive/left/matrix`\n};\npaths.device.vive.right = {\n  button: buttonName => ({\n    pressed: `/device/vive/right/button/${buttonName}/pressed`,\n    touched: `/device/vive/right/button/${buttonName}/touched`,\n    value: `/device/vive/right/button/${buttonName}/value`\n  }),\n  axis: axisName => {\n    return `/device/vive/right/axis/${axisName}`;\n  },\n  axesSum: \"/device/vive/right/axis/sum\",\n  pose: `/device/vive/right/pose`,\n  matrix: `/device/vive/right/matrix`\n};\n\nfunction button(device, side, name) {\n  return {\n    pressed: `${device}${side}/button/${name}/pressed`,\n    touched: `${device}${side}/button/${name}/touched`,\n    value: `${device}${side}/button/${name}/value`\n  };\n}\n\nfunction axes(device, side, name) {\n  return {\n    axisX: `${device}${side}/axis/${name}X`,\n    axisY: `${device}${side}/axis/${name}Y`\n  };\n}\n\nfunction wmrController(side) {\n  const wmr = \"/device/wmr/\";\n  return {\n    touchpad: {\n      ...button(wmr, side, \"touchpad\"),\n      ...axes(wmr, side, \"touchpad\")\n    },\n    trigger: button(wmr, side, \"trigger\"),\n    grip: button(wmr, side, \"grip\"),\n    menu: button(wmr, side, \"menu\"),\n    joystick: axes(wmr, side, \"joystick\"),\n    pose: `${wmr}${side}/pose`,\n    matrix: `${wmr}${side}/matrix`\n  };\n}\npaths.device.wmr = {};\npaths.device.wmr.v = name => `/vars/wmr/${name}`;\npaths.device.wmr.k = name => `/vars/wmr/keyboard/${name}`;\npaths.device.wmr.left = wmrController(\"left\");\npaths.device.wmr.right = wmrController(\"right\");\n","import appLogo from \"../assets/images/app-logo.png\";\nimport companyLogo from \"../assets/images/company-logo.png\";\nimport sceneEditorLogo from \"../assets/images/editor-logo.png\";\nimport pdfjs from \"pdfjs-dist\";\n\n// Read configs from global variable if available, otherwise use the process.env injected from build.\nconst configs = {};\nlet isAdmin = false;\n\n[\n  \"RETICULUM_SERVER\",\n  \"THUMBNAIL_SERVER\",\n  \"CORS_PROXY_SERVER\",\n  \"NON_CORS_PROXY_DOMAINS\",\n  \"SENTRY_DSN\",\n  \"GA_TRACKING_ID\",\n  \"SHORTLINK_DOMAIN\",\n  \"BASE_ASSETS_PATH\"\n].forEach(x => {\n  const el = document.querySelector(`meta[name='env:${x.toLowerCase()}']`);\n  configs[x] = el ? el.getAttribute(\"content\") : process.env[x];\n\n  if (x === \"BASE_ASSETS_PATH\" && configs[x]) {\n    // eslint-disable-next-line no-undef\n    __webpack_public_path__ = configs[x];\n\n    // Using external CDN to reduce build size\n    pdfjs.GlobalWorkerOptions.workerSrc = `${configs[x]}../assets/js/pdfjs-dist@2.1.266/build/pdf.worker.js`;\n  }\n});\n\n// Also include configs that reticulum injects as a script in the page head.\n\nconfigs.AVAILABLE_INTEGRATIONS = window.AVAILABLE_INTEGRATIONS || {};\n\nif (window.APP_CONFIG) {\n  configs.APP_CONFIG = window.APP_CONFIG;\n  const { theme } = configs.APP_CONFIG;\n  if (theme) {\n    const colorVars = [];\n    for (const key in theme) {\n      if (!theme.hasOwnProperty(key)) continue;\n      colorVars.push(`--${key}: ${theme[key]};`);\n    }\n    const style = document.createElement(\"style\");\n    style.innerHTML = `:root{${colorVars.join(\"\\n\")}}`;\n    document.head.prepend(style);\n  }\n\n  if (!configs.APP_CONFIG.features) {\n    configs.APP_CONFIG.features = {};\n  }\n} else {\n  configs.APP_CONFIG = {\n    features: {}\n  };\n}\n\nconst isLocalDevelopment = process.env.NODE_ENV === \"development\";\n\nconfigs.feature = featureName => {\n  const value = configs.APP_CONFIG.features[featureName];\n  if (typeof value === \"boolean\") {\n    const enableAll = isLocalDevelopment && !process.env.USE_FEATURE_CONFIG;\n    const forceEnableSpoke = featureName === \"enable_spoke\" && isAdmin;\n    return forceEnableSpoke || enableAll || value;\n  } else {\n    return value;\n  }\n};\n\nlet localDevImages = {};\nif (isLocalDevelopment) {\n  localDevImages = {\n    logo: appLogo,\n    company_logo: companyLogo,\n    editor_logo: sceneEditorLogo\n  };\n}\n\nconfigs.image = (imageName, cssUrl) => {\n  const url =\n    (configs.APP_CONFIG && configs.APP_CONFIG.images && configs.APP_CONFIG.images[imageName]) ||\n    localDevImages[imageName];\n  return url && cssUrl ? `url(${url})` : url;\n};\n\nconfigs.link = (linkName, defaultValue) => {\n  return (configs.APP_CONFIG && configs.APP_CONFIG.links && configs.APP_CONFIG.links[linkName]) || defaultValue;\n};\n\nconfigs.setIsAdmin = _isAdmin => {\n  isAdmin = _isAdmin;\n};\nconfigs.isAdmin = () => isAdmin;\n\nexport default configs;\n","const adjectives = [\n  \"able\",\n  \"absolute\",\n  \"acceptable\",\n  \"acclaimed\",\n  \"accomplished\",\n  \"accurate\",\n  \"aching\",\n  \"acrobatic\",\n  \"adorable\",\n  \"adventurous\",\n  \"basic\",\n  \"belated\",\n  \"beloved\",\n  \"calm\",\n  \"candid\",\n  \"capital\",\n  \"carefree\",\n  \"caring\",\n  \"cautious\",\n  \"celebrated\",\n  \"charming\",\n  \"daring\",\n  \"darling\",\n  \"dearest\",\n  \"each\",\n  \"eager\",\n  \"early\",\n  \"earnest\",\n  \"easy\",\n  \"easygoing\",\n  \"ecstatic\",\n  \"edible\",\n  \"fabulous\",\n  \"fair\",\n  \"faithful\",\n  \"familiar\",\n  \"famous\",\n  \"fancy\",\n  \"fantastic\",\n  \"far\",\n  \"generous\",\n  \"gentle\",\n  \"genuine\",\n  \"giant\",\n  \"handmade\",\n  \"handsome\",\n  \"handy\",\n  \"happy\",\n  \"icy\",\n  \"ideal\",\n  \"identical\",\n  \"keen\",\n  \"lasting\",\n  \"lavish\",\n  \"magnificent\",\n  \"majestic\",\n  \"mammoth\",\n  \"marvelous\",\n  \"natural\",\n  \"obedient\",\n  \"palatable\",\n  \"parched\",\n  \"passionate\",\n  \"pastel\",\n  \"peaceful\",\n  \"perfect\",\n  \"perfumed\",\n  \"quaint\",\n  \"qualified\",\n  \"radiant\",\n  \"rapid\",\n  \"rare\",\n  \"safe\",\n  \"sandy\",\n  \"satisfied\",\n  \"scaly\",\n  \"scarce\",\n  \"scared\",\n  \"scary\",\n  \"scented\",\n  \"scientific\",\n  \"secret\",\n  \"sentimental\",\n  \"talkative\",\n  \"tangible\",\n  \"tart\",\n  \"tasty\",\n  \"tattered\",\n  \"teeming\",\n  \"ultimate\",\n  \"uncommon\",\n  \"unconscious\",\n  \"understated\",\n  \"warm\",\n  \"active\",\n  \"adept\",\n  \"admirable\",\n  \"admired\",\n  \"adorable\",\n  \"adored\",\n  \"advanced\",\n  \"affectionate\",\n  \"beneficial\",\n  \"best\",\n  \"better\",\n  \"big\",\n  \"cheerful\",\n  \"cheery\",\n  \"chief\",\n  \"chilly\",\n  \"classic\",\n  \"clean\",\n  \"clear\",\n  \"clever\",\n  \"decent\",\n  \"decisive\",\n  \"deep\",\n  \"defiant\",\n  \"definitive\",\n  \"delectable\",\n  \"delicious\",\n  \"elaborate\",\n  \"elastic\",\n  \"elated\",\n  \"elegant\",\n  \"elementary\",\n  \"elliptical\",\n  \"fast\",\n  \"favorable\",\n  \"favorite\",\n  \"fearless\",\n  \"gifted\",\n  \"glamorous\",\n  \"gleaming\",\n  \"glittering\",\n  \"harmonious\",\n  \"imaginative\",\n  \"immense\",\n  \"jealous\",\n  \"kind\",\n  \"leafy\",\n  \"legal\",\n  \"mature\",\n  \"mean\",\n  \"nautical\",\n  \"neat\",\n  \"necessary\",\n  \"needy\",\n  \"oddball\",\n  \"offbeat\",\n  \"periodic\",\n  \"perky\",\n  \"personal\",\n  \"pertinent\",\n  \"petty\",\n  \"quarterly\",\n  \"ready\",\n  \"real\",\n  \"realistic\",\n  \"reasonable\",\n  \"regal\",\n  \"serene\",\n  \"shabby\",\n  \"sharp\",\n  \"shiny\",\n  \"showy\",\n  \"shy\",\n  \"silky\",\n  \"tempting\",\n  \"tense\",\n  \"terrific\",\n  \"testy\",\n  \"thankful\",\n  \"uniform\",\n  \"unique\",\n  \"vast\",\n  \"weary\",\n  \"wee\",\n  \"welcome\",\n  \"agile\",\n  \"alarmed\",\n  \"alert\",\n  \"alive\",\n  \"bleak\",\n  \"blissful\",\n  \"blushing\",\n  \"coarse\",\n  \"colorful\",\n  \"colossal\",\n  \"comfortable\",\n  \"compassionate\",\n  \"complete\",\n  \"delightful\",\n  \"dense\",\n  \"dependable\",\n  \"dependent\",\n  \"descriptive\",\n  \"detailed\",\n  \"determined\",\n  \"devoted\",\n  \"different\",\n  \"eminent\",\n  \"emotional\",\n  \"enchanted\",\n  \"enchanting\",\n  \"energetic\",\n  \"enormous\",\n  \"fine\",\n  \"finished\",\n  \"firm\",\n  \"firsthand\",\n  \"fixed\",\n  \"flashy\",\n  \"flawless\",\n  \"glorious\",\n  \"glossy\",\n  \"golden\",\n  \"good\",\n  \"gorgeous\",\n  \"graceful\",\n  \"healthy\",\n  \"heartfelt\",\n  \"hearty\",\n  \"helpful\",\n  \"impartial\",\n  \"impressive\",\n  \"jolly\",\n  \"jovial\",\n  \"lighthearted\",\n  \"likable\",\n  \"lined\",\n  \"mellow\",\n  \"melodic\",\n  \"memorable\",\n  \"mild\",\n  \"new\",\n  \"opulent\",\n  \"playful\",\n  \"pleasant\",\n  \"pleasing\",\n  \"plump\",\n  \"plush\",\n  \"polished\",\n  \"polite\",\n  \"reliable\",\n  \"relieved\",\n  \"remarkable\",\n  \"remote\",\n  \"respectful\",\n  \"responsible\",\n  \"simple\",\n  \"simplistic\",\n  \"sizzling\",\n  \"sleepy\",\n  \"slight\",\n  \"slim\",\n  \"smart\",\n  \"smooth\",\n  \"snappy\",\n  \"snoopy\",\n  \"thirsty\",\n  \"this\",\n  \"thorough\",\n  \"those\",\n  \"thoughtful\",\n  \"united\",\n  \"vibrant\",\n  \"vicious\",\n  \"wellmade\",\n  \"whimsical\",\n  \"whirlwind\",\n  \"zesty\",\n  \"amazing\",\n  \"ambitious\",\n  \"ample\",\n  \"amused\",\n  \"amusing\",\n  \"ancient\",\n  \"angelic\",\n  \"antique\",\n  \"bold\",\n  \"bossy\",\n  \"both\",\n  \"bouncy\",\n  \"bountiful\",\n  \"complex\",\n  \"conscious\",\n  \"considerate\",\n  \"constant\",\n  \"content\",\n  \"conventional\",\n  \"cooked\",\n  \"cool\",\n  \"cooperative\",\n  \"diligent\",\n  \"dimwitted\",\n  \"direct\",\n  \"discrete\",\n  \"envious\",\n  \"essential\",\n  \"ethical\",\n  \"euphoric\",\n  \"flippant\",\n  \"fluffy\",\n  \"flustered\",\n  \"focused\",\n  \"fond\",\n  \"gracious\",\n  \"grand\",\n  \"grandiose\",\n  \"granular\",\n  \"grateful\",\n  \"grave\",\n  \"great\",\n  \"hidden\",\n  \"high\",\n  \"hilarious\",\n  \"homely\",\n  \"incomparable\",\n  \"incredible\",\n  \"infamous\",\n  \"joyful\",\n  \"lively\",\n  \"loathsome\",\n  \"lonely\",\n  \"long\",\n  \"mindless\",\n  \"miniature\",\n  \"minor\",\n  \"misty\",\n  \"next\",\n  \"nice\",\n  \"nifty\",\n  \"nimble\",\n  \"orderly\",\n  \"organic\",\n  \"ornate\",\n  \"popular\",\n  \"posh\",\n  \"positive\",\n  \"potable\",\n  \"powerful\",\n  \"powerless\",\n  \"precious\",\n  \"present\",\n  \"prestigious\",\n  \"quick\",\n  \"rewarding\",\n  \"rich\",\n  \"right\",\n  \"sociable\",\n  \"soft\",\n  \"solid\",\n  \"some\",\n  \"sophisticated\",\n  \"soulful\",\n  \"sparkling\",\n  \"spectacular\",\n  \"speedy\",\n  \"spicy\",\n  \"spiffy\",\n  \"spirited\",\n  \"spiteful\",\n  \"splendid\",\n  \"spotless\",\n  \"spry\",\n  \"thrifty\",\n  \"tidy\",\n  \"tight\",\n  \"timely\",\n  \"tinted\",\n  \"unruly\",\n  \"untimely\",\n  \"violet\",\n  \"wicked\",\n  \"wide\",\n  \"wild\",\n  \"willing\",\n  \"winding\",\n  \"windy\",\n  \"zigzag\",\n  \"apprehensive\",\n  \"appropriate\",\n  \"artistic\",\n  \"assured\",\n  \"astonishing\",\n  \"bright\",\n  \"brilliant\",\n  \"bronze\",\n  \"coordinated\",\n  \"courageous\",\n  \"courteous\",\n  \"crafty\",\n  \"crazy\",\n  \"creamy\",\n  \"creative\",\n  \"crisp\",\n  \"distant\",\n  \"distinct\",\n  \"downright\",\n  \"evergreen\",\n  \"everlasting\",\n  \"every\",\n  \"evil\",\n  \"excellent\",\n  \"excitable\",\n  \"exemplary\",\n  \"exhausted\",\n  \"forthright\",\n  \"fortunate\",\n  \"fragrant\",\n  \"frank\",\n  \"free\",\n  \"frequent\",\n  \"fresh\",\n  \"friendly\",\n  \"frightened\",\n  \"frigid\",\n  \"gripping\",\n  \"grounded\",\n  \"honest\",\n  \"honorable\",\n  \"honored\",\n  \"hopeful\",\n  \"hospitable\",\n  \"hot\",\n  \"huge\",\n  \"infatuated\",\n  \"infinite\",\n  \"informal\",\n  \"insistent\",\n  \"instructive\",\n  \"juicy\",\n  \"jumbo\",\n  \"knowing\",\n  \"knowledgeable\",\n  \"longterm\",\n  \"loud\",\n  \"lovable\",\n  \"loving\",\n  \"modern\",\n  \"modest\",\n  \"monumental\",\n  \"normal\",\n  \"notable\",\n  \"outgoing\",\n  \"precious\",\n  \"pretty\",\n  \"prickly\",\n  \"primary\",\n  \"pristine\",\n  \"private\",\n  \"prize\",\n  \"productive\",\n  \"profitable\",\n  \"quiet\",\n  \"quintessential\",\n  \"roasted\",\n  \"robust\",\n  \"square\",\n  \"squiggly\",\n  \"stable\",\n  \"staid\",\n  \"starry\",\n  \"steel\",\n  \"stimulating\",\n  \"striking\",\n  \"striped\",\n  \"strong\",\n  \"studious\",\n  \"stunning\",\n  \"tough\",\n  \"trained\",\n  \"treasured\",\n  \"tremendous\",\n  \"triangular\",\n  \"tricky\",\n  \"unused\",\n  \"unusual\",\n  \"upbeat\",\n  \"virtual\",\n  \"witty\",\n  \"wonderful\",\n  \"wooden\",\n  \"worldly\",\n  \"youthful\",\n  \"attached\",\n  \"attentive\",\n  \"attractive\",\n  \"austere\",\n  \"authentic\",\n  \"automatic\",\n  \"aware\",\n  \"awesome\",\n  \"bubbly\",\n  \"bustling\",\n  \"busy\",\n  \"buttery\",\n  \"cuddly\",\n  \"cultured\",\n  \"curly\",\n  \"curvy\",\n  \"cute\",\n  \"cylindrical\",\n  \"downright\",\n  \"dramatic\",\n  \"excited\",\n  \"exciting\",\n  \"exotic\",\n  \"experienced\",\n  \"expert\",\n  \"frosty\",\n  \"fruitful\",\n  \"full\",\n  \"fumbling\",\n  \"funny\",\n  \"fussy\",\n  \"growing\",\n  \"grown\",\n  \"gummy\",\n  \"humble\",\n  \"humongous\",\n  \"hungry\",\n  \"intelligent\",\n  \"interesting\",\n  \"known\",\n  \"kooky\",\n  \"loyal\",\n  \"lucky\",\n  \"luminous\",\n  \"lustrous\",\n  \"luxurious\",\n  \"multicolored\",\n  \"mysterious\",\n  \"noteworthy\",\n  \"numb\",\n  \"nutritious\",\n  \"outstanding\",\n  \"overjoyed\",\n  \"proper\",\n  \"proud\",\n  \"prudent\",\n  \"punctual\",\n  \"puny\",\n  \"pure\",\n  \"puzzled\",\n  \"puzzling\",\n  \"quirky\",\n  \"stupendous\",\n  \"sturdy\",\n  \"stylish\",\n  \"subdued\",\n  \"subtle\",\n  \"sunny\",\n  \"super\",\n  \"superb\",\n  \"supportive\",\n  \"surprised\",\n  \"sweet\",\n  \"swift\",\n  \"sympathetic\",\n  \"trivial\",\n  \"trusting\",\n  \"trustworthy\",\n  \"trusty\",\n  \"truthful\",\n  \"twin\",\n  \"usable\",\n  \"used\",\n  \"useful\",\n  \"utilized\",\n  \"vital\",\n  \"vivid\",\n  \"worried\",\n  \"worthwhile\",\n  \"worthy\",\n  \"writhing\",\n  \"wry\",\n  \"yummy\",\n  \"chocolate\",\n  \"crimson\",\n  \"cyan\",\n  \"fuchsia\",\n  \"gold\",\n  \"honeydew\",\n  \"lime\",\n  \"linen\",\n  \"magenta\",\n  \"olive\",\n  \"peru\",\n  \"salmon\",\n  \"seashell\",\n  \"sienna\",\n  \"snow\",\n  \"thistle\",\n  \"tomato\",\n  \"transparent\",\n  \"turquoise\",\n  \"violet\"\n];\n\nconst nouns = [\n  \"space\",\n  \"land\",\n  \"world\",\n  \"universe\",\n  \"plane\",\n  \"room\",\n  \"nation\",\n  \"plaza\",\n  \"gathering\",\n  \"meetup\",\n  \"get together\",\n  \"conclave\",\n  \"party\",\n  \"domain\",\n  \"dominion\",\n  \"realm\",\n  \"square\",\n  \"commons\",\n  \"park\",\n  \"cosmos\",\n  \"sphere\",\n  \"terrain\",\n  \"spot\",\n  \"zone\",\n  \"area\",\n  \"tract\",\n  \"turf\",\n  \"place\",\n  \"territory\",\n  \"volume\",\n  \"camp\",\n  \"picnic\",\n  \"outing\",\n  \"vacation\",\n  \"adventure\",\n  \"exploration\",\n  \"outing\",\n  \"walkabout\",\n  \"safari\",\n  \"venture\",\n  \"roundtable\",\n  \"barbecue\",\n  \"celebration\",\n  \"festivity\",\n  \"gala\",\n  \"shindig\",\n  \"social\",\n  \"convention\",\n  \"assembly\",\n  \"congregation\",\n  \"rendezvous\",\n  \"huddle\",\n  \"meet\",\n  \"soiree\"\n];\n\nexport function generateHubName() {\n  const randItem = set => {\n    const s = set[Math.floor(Math.random() * set.length)];\n    return s.charAt(0).toUpperCase() + s.slice(1);\n  };\n\n  return `${randItem(adjectives)} ${randItem(adjectives)} ${randItem(nouns)}`;\n}\n","import { Socket } from \"phoenix\";\nimport { generateHubName } from \"../utils/name-generation\";\nimport configs from \"../utils/configs\";\n\nimport Store from \"../storage/store\";\n\nexport function hasReticulumServer() {\n  return !!configs.RETICULUM_SERVER;\n}\n\nexport function isLocalClient() {\n  return hasReticulumServer() && document.location.host !== configs.RETICULUM_SERVER;\n}\n\nconst resolverLink = document.createElement(\"a\");\nexport function getReticulumFetchUrl(path, absolute = false) {\n  if (hasReticulumServer()) {\n    return `https://${configs.RETICULUM_SERVER}${path}`;\n  } else if (absolute) {\n    resolverLink.href = path;\n    return resolverLink.href;\n  } else {\n    return path;\n  }\n}\n\nlet reticulumMeta = null;\nlet invalidatedReticulumMetaThisSession = false;\n\nexport async function invalidateReticulumMeta() {\n  invalidatedReticulumMetaThisSession = true;\n  reticulumMeta = null;\n}\n\nexport async function getReticulumMeta() {\n  if (!reticulumMeta) {\n    // Initially look up version based upon page, avoiding round-trip, otherwise fetch.\n    if (!invalidatedReticulumMetaThisSession && document.querySelector(\"meta[name='ret:version']\")) {\n      reticulumMeta = {\n        version: document.querySelector(\"meta[name='ret:version']\").getAttribute(\"value\"),\n        pool: document.querySelector(\"meta[name='ret:pool']\").getAttribute(\"value\"),\n        phx_host: document.querySelector(\"meta[name='ret:phx_host']\").getAttribute(\"value\")\n      };\n    } else {\n      await fetch(getReticulumFetchUrl(\"/api/v1/meta\")).then(async res => {\n        reticulumMeta = await res.json();\n      });\n    }\n  }\n\n  const qs = new URLSearchParams(location.search);\n  const phxHostOverride = qs.get(\"phx_host\");\n\n  if (phxHostOverride) {\n    reticulumMeta.phx_host = phxHostOverride;\n  }\n\n  return reticulumMeta;\n}\n\nexport async function connectToReticulum(debug = false, params = null, socketClass = Socket) {\n  const qs = new URLSearchParams(location.search);\n\n  const getNewSocketUrl = async () => {\n    const socketProtocol =\n      qs.get(\"phx_protocol\") ||\n      configs.RETICULUM_SOCKET_PROTOCOL ||\n      (document.location.protocol === \"https:\" ? \"wss:\" : \"ws:\");\n    let socketHost = qs.get(\"phx_host\");\n    let socketPort = qs.get(\"phx_port\");\n\n    const reticulumMeta = await getReticulumMeta();\n    socketHost = socketHost || configs.RETICULUM_SOCKET_SERVER || reticulumMeta.phx_host;\n    socketPort =\n      socketPort || (hasReticulumServer() ? new URL(`${socketProtocol}//${configs.RETICULUM_SERVER}`).port : \"443\");\n    return `${socketProtocol}//${socketHost}${socketPort ? `:${socketPort}` : \"\"}`;\n  };\n\n  const socketUrl = await getNewSocketUrl();\n  console.log(`Phoenix Socket URL: ${socketUrl}`);\n\n  const socketSettings = {};\n\n  if (debug) {\n    socketSettings.logger = (kind, msg, data) => {\n      console.log(`${kind}: ${msg}`, data);\n    };\n  }\n\n  if (params) {\n    socketSettings.params = params;\n  }\n\n  const socket = new socketClass(`${socketUrl}/socket`, socketSettings);\n  socket.connect();\n  socket.onError(async () => {\n    // On error, underlying reticulum node may have died, so rebalance by\n    // fetching a new healthy node to connect to.\n    invalidateReticulumMeta();\n\n    const endPointPath = new URL(socket.endPoint).pathname;\n    const newSocketUrl = await getNewSocketUrl();\n    const newEndPoint = `${newSocketUrl}${endPointPath}`;\n    console.log(`Socket error, changed endpoint to ${newEndPoint}`);\n    socket.endPoint = newEndPoint;\n  });\n\n  return socket;\n}\n\nexport function getLandingPageForPhoto(photoUrl) {\n  const parsedUrl = new URL(photoUrl);\n  return getReticulumFetchUrl(parsedUrl.pathname.replace(\".png\", \".html\") + parsedUrl.search, true);\n}\n\nexport function fetchReticulumAuthenticated(url, method = \"GET\", payload) {\n  const { token } = window.APP.store.state.credentials;\n  const retUrl = getReticulumFetchUrl(url);\n  const params = {\n    headers: { \"content-type\": \"application/json\" },\n    method\n  };\n  if (token) {\n    params.headers.authorization = `bearer ${token}`;\n  }\n  if (payload) {\n    params.body = JSON.stringify(payload);\n  }\n  return fetch(retUrl, params).then(async r => {\n    const result = await r.text();\n    try {\n      return JSON.parse(result);\n    } catch (e) {\n      // Some reticulum responses, particularly DELETE requests, don't return json.\n      return result;\n    }\n  });\n}\n\nexport async function createAndRedirectToNewHub(name, sceneId, replace) {\n  const createUrl = getReticulumFetchUrl(\"/api/v1/hubs\");\n  const payload = { hub: { name: name || generateHubName() } };\n\n  if (sceneId) {\n    payload.hub.scene_id = sceneId;\n  }\n\n  const headers = { \"content-type\": \"application/json\" };\n  const store = new Store();\n  if (store.state && store.state.credentials.token) {\n    headers.authorization = `bearer ${store.state.credentials.token}`;\n  }\n\n  let res = await fetch(createUrl, {\n    body: JSON.stringify(payload),\n    headers,\n    method: \"POST\"\n  }).then(r => r.json());\n\n  if (res.error === \"invalid_token\") {\n    // Clear the invalid token from store.\n    store.update({ credentials: { token: null, email: null } });\n\n    // Create hub anonymously\n    delete headers.authorization;\n    res = await fetch(createUrl, {\n      body: JSON.stringify(payload),\n      headers,\n      method: \"POST\"\n    }).then(r => r.json());\n  }\n\n  const hub = res;\n  let url = hub.url;\n\n  const creatorAssignmentToken = hub.creator_assignment_token;\n  if (creatorAssignmentToken) {\n    store.update({ creatorAssignmentTokens: [{ hubId: hub.hub_id, creatorAssignmentToken: creatorAssignmentToken }] });\n\n    // Don't need to store the embed token if there's no creator assignment token, since that means\n    // we are the owner and will get the embed token on page load.\n    const embedToken = hub.embed_token;\n\n    if (embedToken) {\n      store.update({ embedTokens: [{ hubId: hub.hub_id, embedToken: embedToken }] });\n    }\n  }\n\n  if (isLocalClient()) {\n    url = process.env.BASE_ASSETS_PATH + `hub.html?hub_id=${hub.hub_id}`;\n  }\n\n  if (replace) {\n    document.location.replace(url);\n  } else {\n    document.location = url;\n  }\n}\n\nexport function getPresenceEntryForSession(presences, sessionId) {\n  const entry = Object.entries(presences || {}).find(([k]) => k === sessionId) || [];\n  const presence = entry[1];\n  return (presence && presence.metas && presence.metas[0]) || {};\n}\n\nexport function getPresenceContextForSession(presences, sessionId) {\n  return (getPresenceEntryForSession(presences, sessionId) || {}).context || {};\n}\n\nexport function getPresenceProfileForSession(presences, sessionId) {\n  return (getPresenceEntryForSession(presences, sessionId) || {}).profile || {};\n}\n\n// Takes the given channel, and creates a new channel with the same bindings\n// with the given socket, joins it, and leaves the old channel after joining.\n//\n// NOTE: This function relies upon phoenix channel object internals, so this\n// function will need to be reviewed if/when we ever update phoenix.js\nexport function migrateChannelToSocket(oldChannel, socket, params) {\n  const channel = socket.channel(oldChannel.topic, params || oldChannel.params);\n\n  for (let i = 0, l = oldChannel.bindings.length; i < l; i++) {\n    const item = oldChannel.bindings[i];\n    channel.on(item.event, item.callback);\n  }\n\n  for (let i = 0, l = oldChannel.pushBuffer.length; i < l; i++) {\n    const item = oldChannel.pushBuffer[i];\n    channel.push(item.event, item.payload, item.timeout);\n  }\n\n  const oldJoinPush = oldChannel.joinPush;\n  const joinPush = channel.join();\n\n  for (let i = 0, l = oldJoinPush.recHooks.length; i < l; i++) {\n    const item = oldJoinPush.recHooks[i];\n    joinPush.receive(item.status, item.callback);\n  }\n\n  return new Promise(resolve => {\n    joinPush.receive(\"ok\", () => {\n      // Clear all event handlers first so no duplicate messages come in.\n      oldChannel.bindings = [];\n      resolve(channel);\n    });\n  });\n}\n\nexport function discordBridgesForPresences(presences) {\n  const channels = [];\n  for (const p of Object.values(presences)) {\n    for (const m of p.metas) {\n      if (m.profile && m.profile.discordBridges) {\n        Array.prototype.push.apply(channels, m.profile.discordBridges.map(b => b.channel.name));\n      }\n    }\n  }\n  return channels;\n}\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"media-browser\":\"media-browser__media-browser__y0Hsu\",\"mediaBrowser\":\"media-browser__media-browser__y0Hsu\",\"facets\":\"media-browser__facets__1Yz65\",\"facet\":\"media-browser__facet__2uP6U\",\"body\":\"media-browser__body__j6Tv2\",\"pager\":\"media-browser__pager__RKx5O\",\"header-center\":\"media-browser__header-center__2D9CW\",\"headerCenter\":\"media-browser__header-center__2D9CW\",\"search\":\"media-browser__search__3gQ84\",\"header-left\":\"media-browser__header-left__1ObQh\",\"headerLeft\":\"media-browser__header-left__1ObQh\",\"engine-attribution\":\"media-browser__engine-attribution__2P2aD\",\"engineAttribution\":\"media-browser__engine-attribution__2P2aD\",\"engine-attribution-contents\":\"media-browser__engine-attribution-contents__gCdfr\",\"engineAttributionContents\":\"media-browser__engine-attribution-contents__gCdfr\",\"favorites-header\":\"media-browser__favorites-header__1XzZx\",\"favoritesHeader\":\"media-browser__favorites-header__1XzZx\",\"search-clear\":\"media-browser__search-clear__2GkP3\",\"searchClear\":\"media-browser__search-clear__2GkP3\",\"search-icon\":\"media-browser__search-icon__g1Sj9\",\"searchIcon\":\"media-browser__search-icon__g1Sj9\",\"box\":\"media-browser__box__1KHYi\",\"header\":\"media-browser__header__zqZ09\",\"no-search\":\"media-browser__no-search__3N90H\",\"noSearch\":\"media-browser__no-search__3N90H\",\"nav\":\"media-browser__nav__9J5If\",\"nav-right-pad\":\"media-browser__nav-right-pad__1qH0B\",\"navRightPad\":\"media-browser__nav-right-pad__1qH0B\",\"nav-source\":\"media-browser__nav-source__o6NI6\",\"navSource\":\"media-browser__nav-source__o6NI6\",\"nav-source-selected\":\"media-browser__nav-source-selected__2osjH\",\"navSourceSelected\":\"media-browser__nav-source-selected__2osjH\",\"nav-scroll-arrow\":\"media-browser__nav-scroll-arrow__2Nikk\",\"navScrollArrow\":\"media-browser__nav-scroll-arrow__2Nikk\",\"tiles\":\"media-browser__tiles__1BYEY\",\"tile\":\"media-browser__tile__2lzHU\",\"info\":\"media-browser__info__2c8Zs\",\"name\":\"media-browser__name__RFiE4\",\"attribution\":\"media-browser__attribution__3glgj\",\"creator\":\"media-browser__creator__3LDPh\",\"publisher\":\"media-browser__publisher__mTzsX\",\"last-joined\":\"media-browser__last-joined__2DVWf\",\"lastJoined\":\"media-browser__last-joined__2DVWf\",\"tile-link\":\"media-browser__tile-link__IXyUO\",\"tileLink\":\"media-browser__tile-link__IXyUO\",\"tile-content\":\"media-browser__tile-content__1QYSP\",\"tileContent\":\"media-browser__tile-content__1QYSP\",\"avatar-tile\":\"media-browser__avatar-tile__qNo2r\",\"avatarTile\":\"media-browser__avatar-tile__qNo2r\",\"favorite\":\"media-browser__favorite__1vVd0\",\"tile-actions\":\"media-browser__tile-actions__1QXbx\",\"tileActions\":\"media-browser__tile-actions__1QXbx\",\"presence\":\"media-browser__presence__2l7SM\",\"create-tile\":\"media-browser__create-tile__RL9vr\",\"createTile\":\"media-browser__create-tile__RL9vr\",\"create-avatar-tile\":\"media-browser__create-avatar-tile__2dxlP\",\"createAvatarTile\":\"media-browser__create-avatar-tile__2dxlP\",\"tiles-variable\":\"media-browser__tiles-variable__1ZNxg\",\"tilesVariable\":\"media-browser__tiles-variable__1ZNxg\",\"page-number\":\"media-browser__page-number__OTpSH\",\"pageNumber\":\"media-browser__page-number__OTpSH\",\"pager-button-disabled\":\"media-browser__pager-button-disabled__ytlSN\",\"pagerButtonDisabled\":\"media-browser__pager-button-disabled__ytlSN\",\"header-right\":\"media-browser__header-right__3k3JZ\",\"headerRight\":\"media-browser__header-right__3k3JZ\",\"create-button\":\"media-browser__create-button__30hMV\",\"createButton\":\"media-browser__create-button__30hMV\",\"create-link\":\"media-browser__create-link__28Bpj\",\"createLink\":\"media-browser__create-link__28Bpj\",\"empty-string\":\"media-browser__empty-string__3r0tc\",\"emptyString\":\"media-browser__empty-string__3r0tc\",\"media-browser-inline\":\"media-browser__media-browser-inline__3AgWD\",\"mediaBrowserInline\":\"media-browser__media-browser-inline__3AgWD\"};","import { hasReticulumServer } from \"./phoenix-utils\";\nimport configs from \"./configs\";\n\nconst nonCorsProxyDomains = (configs.NON_CORS_PROXY_DOMAINS || \"\").split(\",\");\nif (configs.CORS_PROXY_SERVER) {\n  nonCorsProxyDomains.push(configs.CORS_PROXY_SERVER);\n}\nnonCorsProxyDomains.push(document.location.hostname)\n\nconst commonKnownContentTypes = {\n  gltf: \"model/gltf\",\n  glb: \"model/gltf-binary\",\n  png: \"image/png\",\n  jpg: \"image/jpeg\",\n  jpeg: \"image/jpeg\",\n  pdf: \"application/pdf\",\n  mp4: \"video/mp4\",\n  mp3: \"audio/mpeg\"\n};\n\n// thanks to https://developer.mozilla.org/en-US/docs/Web/API/WindowBase64/Base64_encoding_and_decoding\nfunction b64EncodeUnicode(str) {\n  // first we use encodeURIComponent to get percent-encoded UTF-8, then we convert the percent-encodings\n  // into raw bytes which can be fed into btoa.\n  const CHAR_RE = /%([0-9A-F]{2})/g;\n  return btoa(encodeURIComponent(str).replace(CHAR_RE, (_, p1) => String.fromCharCode(\"0x\" + p1)));\n}\n\nconst farsparkEncodeUrl = url => {\n  // farspark doesn't know how to read '=' base64 padding characters\n  // translate base64 + to - and / to _ for URL safety\n  return b64EncodeUnicode(url)\n    .replace(/=+$/g, \"\")\n    .replace(/\\+/g, \"-\")\n    .replace(/\\//g, \"_\");\n};\n\nexport const scaledThumbnailUrlFor = (url, width, height) => {\n  let extension = \"\";\n  try {\n    const pathParts = new URL(url).pathname.split(\".\");\n\n    if (pathParts.length > 1) {\n      const extensionCandidate = pathParts.pop();\n      if (commonKnownContentTypes[extensionCandidate]) {\n        extension = `.${extensionCandidate}`;\n      }\n    }\n  } catch (e) {\n    extension = \".png\";\n  }\n\n  // HACK: the extension is needed to ensure CDN caching on Cloudflare\n  const thumbnailUrl = `https://${configs.THUMBNAIL_SERVER}/thumbnail/${farsparkEncodeUrl(\n    url\n  )}${extension}?w=${width}&h=${height}`;\n\n  try {\n    const urlHostname = new URL(url).hostname;\n\n    if (hasReticulumServer()) {\n      const retHostname = new URL(`https://${configs.RETICULUM_SERVER}`).hostname;\n      if (retHostname === urlHostname) return url;\n    }\n  } catch (e) {\n    return thumbnailUrl;\n  }\n\n  return thumbnailUrl;\n};\n\nexport const isNonCorsProxyDomain = hostname => {\n  return nonCorsProxyDomains.find(domain => hostname.endsWith(domain));\n};\n\nexport const proxiedUrlFor = url => {\n  if (!(url.startsWith(\"http:\") || url.startsWith(\"https:\"))) return url;\n\n  // Skip known domains that do not require CORS proxying.\n  try {\n    const parsedUrl = new URL(url);\n    if (isNonCorsProxyDomain(parsedUrl.hostname)) return url;\n  } catch (e) {\n    // Ignore\n  }\n\n  return `https://${configs.CORS_PROXY_SERVER}/${url}`;\n};\n\nexport function getAbsoluteUrl(baseUrl, relativeUrl) {\n  return new URL(relativeUrl, baseUrl);\n}\n\nexport function getAbsoluteHref(baseUrl, relativeUrl) {\n  return getAbsoluteUrl(baseUrl, relativeUrl).href;\n}\n\nexport const getCustomGLTFParserURLResolver = gltfUrl => url => {\n  if (typeof url !== \"string\" || url === \"\") return \"\";\n  if (/^(https?:)?\\/\\//i.test(url)) return url;\n  if (/^data:.*,.*$/i.test(url)) return url;\n  if (/^blob:.*$/i.test(url)) return url;\n\n  if (configs.CORS_PROXY_SERVER) {\n    // For absolute paths with a CORS proxied gltf URL, re-write the url properly to be proxied\n    const corsProxyPrefix = `https://${configs.CORS_PROXY_SERVER}/`;\n\n    if (gltfUrl.startsWith(corsProxyPrefix)) {\n      const originalUrl = decodeURIComponent(gltfUrl.substring(corsProxyPrefix.length));\n      const originalUrlParts = originalUrl.split(\"/\");\n\n      // Drop the .gltf filename\n      const path = new URL(url).pathname;\n      const assetUrl = originalUrlParts.slice(0, originalUrlParts.length - 1).join(\"/\") + \"/\" + path;\n      return corsProxyPrefix + assetUrl;\n    }\n  }\n\n  return url;\n};\n\nconst dataUrlRegex = /data:([a-zA-Z0-9]+\\/[a-zA-Z0-9-.+]+).*,.*/;\n\nexport const guessContentType = url => {\n  if (!url) return;\n  if (url.startsWith(\"hubs://\") && url.endsWith(\"/video\")) return \"video/vnd.hubs-webrtc\";\n  if (url.startsWith(\"data:\")) {\n    const matches = dataUrlRegex.exec(url);\n    if (matches.length > 0) {\n      matches[1];\n    }\n  }\n  const extension = new URL(url, window.location).pathname.split(\".\").pop();\n  return commonKnownContentTypes[extension];\n};\n\nconst originIsHubsServer = new Map();\nasync function isHubsServer(url) {\n  if (!url) return false;\n  if (!url.startsWith(\"http\")) {\n    url = \"https://\" + url;\n  }\n  const { origin } = new URL(url);\n\n  if (originIsHubsServer.has(origin)) {\n    return originIsHubsServer.get(origin);\n  }\n\n  let isHubsServer;\n  try {\n    isHubsServer = (await fetch(proxiedUrlFor(origin), { method: \"HEAD\" })).headers.has(\"hub-name\");\n  } catch (e) {\n    isHubsServer = false;\n  }\n  originIsHubsServer.set(origin, isHubsServer);\n  return isHubsServer;\n}\n\nconst hubsSceneRegex = /https?:\\/\\/[^/]+\\/scenes\\/(\\w+)\\/?\\S*/;\nconst hubsAvatarRegex = /https?:\\/\\/[^/]+\\/avatars\\/(?<id>\\w+)\\/?\\S*/;\nconst hubsRoomRegex = /(https?:\\/\\/)?[^/]+\\/([a-zA-Z0-9]{7})\\/?\\S*/;\n\nexport const isLocalHubsUrl = async url =>\n  (await isHubsServer(url)) && new URL(url).origin === document.location.origin;\n\nexport const isHubsSceneUrl = async url => (await isHubsServer(url)) && hubsSceneRegex.test(url);\nexport const isLocalHubsSceneUrl = async url => (await isHubsSceneUrl(url)) && (await isLocalHubsUrl(url));\n\nexport const isHubsAvatarUrl = async url => (await isHubsServer(url)) && hubsAvatarRegex.test(url);\nexport const isLocalHubsAvatarUrl = async url => (await isHubsAvatarUrl(url)) && (await isLocalHubsUrl(url));\n\nexport const isHubsRoomUrl = async url =>\n  (await isHubsServer(url)) && !(await isHubsAvatarUrl(url)) && !(await isHubsSceneUrl(url)) && hubsRoomRegex.test(url);\n\nexport const isHubsDestinationUrl = async url =>\n  (await isHubsServer(url)) && ((await isHubsSceneUrl(url)) || (await isHubsRoomUrl(url)));\n\nexport const idForAvatarUrl = url => {\n  const match = url.match(hubsAvatarRegex);\n  if (match) {\n    return match.groups.id;\n  }\n  return null;\n};\n","const tempVector3 = new THREE.Vector3();\nconst tempQuaternion = new THREE.Quaternion();\n\nexport function getLastWorldPosition(src, target) {\n  src.updateMatrices();\n  target.setFromMatrixPosition(src.matrixWorld);\n  return target;\n}\n\nexport function getLastWorldQuaternion(src, target) {\n  src.updateMatrices();\n  src.matrixWorld.decompose(tempVector3, target, tempVector3);\n  return target;\n}\n\nexport function getLastWorldScale(src, target) {\n  src.updateMatrices();\n  src.matrixWorld.decompose(tempVector3, tempQuaternion, target);\n  return target;\n}\n\nexport function disposeMaterial(mtrl) {\n  if (mtrl.map) mtrl.map.dispose();\n  if (mtrl.lightMap) mtrl.lightMap.dispose();\n  if (mtrl.bumpMap) mtrl.bumpMap.dispose();\n  if (mtrl.normalMap) mtrl.normalMap.dispose();\n  if (mtrl.specularMap) mtrl.specularMap.dispose();\n  if (mtrl.envMap) mtrl.envMap.dispose();\n  mtrl.dispose();\n}\n\nexport function disposeNode(node) {\n  if (!(node instanceof THREE.Mesh)) return;\n\n  if (node.geometry) {\n    node.geometry.dispose();\n  }\n\n  if (node.material) {\n    let materialArray;\n    if (node.material instanceof THREE.MeshFaceMaterial || node.material instanceof THREE.MultiMaterial) {\n      materialArray = node.material.materials;\n    } else if (node.material instanceof Array) {\n      materialArray = node.material;\n    }\n    if (materialArray) {\n      materialArray.forEach(disposeMaterial);\n    } else {\n      disposeMaterial(node.material);\n    }\n  }\n}\n\nconst IDENTITY = new THREE.Matrix4().identity();\nexport function setMatrixWorld(object3D, m) {\n  if (!object3D.matrixIsModified) {\n    object3D.applyMatrix(IDENTITY); // hack around our matrix optimizations\n  }\n  object3D.matrixWorld.copy(m);\n  if (object3D.parent) {\n    object3D.matrix = object3D.matrix.getInverse(object3D.parent.matrixWorld).multiply(object3D.matrixWorld);\n  } else {\n    object3D.matrix.copy(object3D.matrixWorld);\n  }\n  object3D.matrix.decompose(object3D.position, object3D.quaternion, object3D.scale);\n  object3D.childrenNeedMatrixWorldUpdate = true;\n}\n\n// Modified version of Don McCurdy's AnimationUtils.clone\n// https://github.com/mrdoob/three.js/pull/14494\n\nfunction parallelTraverse(a, b, callback) {\n  callback(a, b);\n\n  for (let i = 0; i < a.children.length; i++) {\n    parallelTraverse(a.children[i], b.children[i], callback);\n  }\n}\n\n// Supports the following PropertyBinding path formats:\n// uuid.propertyName\n// uuid.propertyName[propertyIndex]\n// uuid.objectName[objectIndex].propertyName[propertyIndex]\n// Does not support property bindings that use object3D names or parent nodes\nfunction cloneKeyframeTrack(sourceKeyframeTrack, cloneUUIDLookup) {\n  const { nodeName: uuid, objectName, objectIndex, propertyName, propertyIndex } = THREE.PropertyBinding.parseTrackName(\n    sourceKeyframeTrack.name\n  );\n\n  let path = \"\";\n\n  if (uuid !== undefined) {\n    const clonedUUID = cloneUUIDLookup.get(uuid);\n\n    if (clonedUUID === undefined) {\n      console.warn(`Could not find KeyframeTrack target with uuid: \"${uuid}\"`);\n    }\n\n    path += clonedUUID;\n  }\n\n  if (objectName !== undefined) {\n    path += \".\" + objectName;\n  }\n\n  if (objectIndex !== undefined) {\n    path += \"[\" + objectIndex + \"]\";\n  }\n\n  if (propertyName !== undefined) {\n    path += \".\" + propertyName;\n  }\n\n  if (propertyIndex !== undefined) {\n    path += \"[\" + propertyIndex + \"]\";\n  }\n\n  const clonedKeyframeTrack = sourceKeyframeTrack.clone();\n  clonedKeyframeTrack.name = path;\n\n  return clonedKeyframeTrack;\n}\n\nfunction cloneAnimationClip(sourceAnimationClip, cloneUUIDLookup) {\n  const clonedTracks = sourceAnimationClip.tracks.map(keyframeTrack =>\n    cloneKeyframeTrack(keyframeTrack, cloneUUIDLookup)\n  );\n  return new THREE.AnimationClip(sourceAnimationClip.name, sourceAnimationClip.duration, clonedTracks);\n}\n\nexport function cloneObject3D(source, preserveUUIDs) {\n  const cloneLookup = new Map();\n  const cloneUUIDLookup = new Map();\n\n  const clone = source.clone();\n\n  parallelTraverse(source, clone, (sourceNode, clonedNode) => {\n    cloneLookup.set(sourceNode, clonedNode);\n  });\n\n  source.traverse(sourceNode => {\n    const clonedNode = cloneLookup.get(sourceNode);\n\n    if (preserveUUIDs) {\n      clonedNode.uuid = sourceNode.uuid;\n    }\n\n    cloneUUIDLookup.set(sourceNode.uuid, clonedNode.uuid);\n  });\n\n  source.traverse(sourceNode => {\n    const clonedNode = cloneLookup.get(sourceNode);\n\n    if (!clonedNode) {\n      return;\n    }\n\n    if (sourceNode.animations) {\n      clonedNode.animations = sourceNode.animations.map(animationClip =>\n        cloneAnimationClip(animationClip, cloneUUIDLookup)\n      );\n    }\n\n    if (sourceNode.isMesh && sourceNode.geometry.boundsTree) {\n      clonedNode.geometry.boundsTree = sourceNode.geometry.boundsTree;\n    }\n\n    if (!sourceNode.isSkinnedMesh) return;\n\n    const sourceBones = sourceNode.skeleton.bones;\n\n    clonedNode.skeleton = sourceNode.skeleton.clone();\n\n    clonedNode.skeleton.bones = sourceBones.map(sourceBone => {\n      if (!cloneLookup.has(sourceBone)) {\n        throw new Error(\"Required bones are not descendants of the given object.\");\n      }\n\n      return cloneLookup.get(sourceBone);\n    });\n\n    clonedNode.bind(clonedNode.skeleton, sourceNode.bindMatrix);\n  });\n\n  return clone;\n}\n\nexport function findNode(root, pred) {\n  let nodes = [root];\n  while (nodes.length) {\n    const node = nodes.shift();\n    if (pred(node)) return node;\n    if (node.children) nodes = nodes.concat(node.children);\n  }\n  return null;\n}\n\nexport const interpolateAffine = (function() {\n  const mat4 = new THREE.Matrix4();\n  const end = {\n    position: new THREE.Vector3(),\n    quaternion: new THREE.Quaternion(),\n    scale: new THREE.Vector3()\n  };\n  const start = {\n    position: new THREE.Vector3(),\n    quaternion: new THREE.Quaternion(),\n    scale: new THREE.Vector3()\n  };\n  const interpolated = {\n    position: new THREE.Vector3(),\n    quaternion: new THREE.Quaternion(),\n    scale: new THREE.Vector3()\n  };\n  return function(startMat4, endMat4, progress, outMat4) {\n    start.quaternion.setFromRotationMatrix(mat4.extractRotation(startMat4));\n    end.quaternion.setFromRotationMatrix(mat4.extractRotation(endMat4));\n    THREE.Quaternion.slerp(start.quaternion, end.quaternion, interpolated.quaternion, progress);\n    interpolated.position.lerpVectors(\n      start.position.setFromMatrixColumn(startMat4, 3),\n      end.position.setFromMatrixColumn(endMat4, 3),\n      progress\n    );\n    interpolated.scale.lerpVectors(\n      start.scale.setFromMatrixScale(startMat4),\n      end.scale.setFromMatrixScale(endMat4),\n      progress\n    );\n    return outMat4.compose(\n      interpolated.position,\n      interpolated.quaternion,\n      interpolated.scale\n    );\n  };\n})();\n\nexport const squareDistanceBetween = (function() {\n  const posA = new THREE.Vector3();\n  const posB = new THREE.Vector3();\n  return function(objA, objB) {\n    objA.updateMatrices();\n    objB.updateMatrices();\n    posA.setFromMatrixColumn(objA.matrixWorld, 3);\n    posB.setFromMatrixColumn(objB.matrixWorld, 3);\n    return posA.distanceToSquared(posB);\n  };\n})();\n\nexport function isAlmostUniformVector3(v, epsilonHalf = 0.005) {\n  return Math.abs(v.x - v.y) < epsilonHalf && Math.abs(v.x - v.z) < epsilonHalf;\n}\nexport function almostEqual(a, b, epsilon = 0.01) {\n  return Math.abs(a - b) < epsilon;\n}\n\nexport const affixToWorldUp = (function() {\n  const inRotationMat4 = new THREE.Matrix4();\n  const inForward = new THREE.Vector3();\n  const outForward = new THREE.Vector3();\n  const outSide = new THREE.Vector3();\n  const worldUp = new THREE.Vector3(); // Could be called \"outUp\"\n  const v = new THREE.Vector3();\n  const inMat4Copy = new THREE.Matrix4();\n  return function affixToWorldUp(inMat4, outMat4) {\n    inRotationMat4.identity().extractRotation(inMat4Copy.copy(inMat4));\n    inForward.setFromMatrixColumn(inRotationMat4, 2).multiplyScalar(-1);\n    outForward\n      .copy(inForward)\n      .sub(v.copy(inForward).projectOnVector(worldUp.set(0, 1, 0)))\n      .normalize();\n    outSide.crossVectors(outForward, worldUp);\n    outMat4.makeBasis(outSide, worldUp, outForward.multiplyScalar(-1));\n    outMat4.scale(v.setFromMatrixScale(inMat4Copy));\n    outMat4.setPosition(v.setFromMatrixColumn(inMat4Copy, 3));\n    return outMat4;\n  };\n})();\n\nexport const calculateCameraTransformForWaypoint = (function() {\n  const upAffixedCameraTransform = new THREE.Matrix4();\n  const upAffixedWaypointTransform = new THREE.Matrix4();\n  const detachFromWorldUp = new THREE.Matrix4();\n  return function calculateCameraTransformForWaypoint(cameraTransform, waypointTransform, outMat4) {\n    affixToWorldUp(cameraTransform, upAffixedCameraTransform);\n    detachFromWorldUp.getInverse(upAffixedCameraTransform).multiply(cameraTransform);\n    affixToWorldUp(waypointTransform, upAffixedWaypointTransform);\n    outMat4.copy(upAffixedWaypointTransform).multiply(detachFromWorldUp);\n  };\n})();\n\nexport const calculateViewingDistance = (function() {\n  return function calculateViewingDistance(fov, aspect, object, box, center, vrMode) {\n    const halfYExtents = Math.max(Math.abs(box.max.y - center.y), Math.abs(center.y - box.min.y));\n    const halfXExtents = Math.max(Math.abs(box.max.x - center.x), Math.abs(center.x - box.min.x));\n    const halfVertFOV = THREE.Math.degToRad(fov / 2);\n    const halfHorFOV = Math.atan(Math.tan(halfVertFOV) * aspect) * (vrMode ? 0.5 : 1);\n    const margin = 1.05;\n    const length1 = Math.abs((halfYExtents * margin) / Math.tan(halfVertFOV));\n    const length2 = Math.abs((halfXExtents * margin) / Math.tan(halfHorFOV));\n    const length3 = Math.abs(box.max.z - center.z) + Math.max(length1, length2);\n    const length = vrMode ? Math.max(0.25, length3) : length3;\n    return length || 1.25;\n  };\n})();\n\nexport const rotateInPlaceAroundWorldUp = (function() {\n  const inMat4Copy = new THREE.Matrix4();\n  const startRotation = new THREE.Matrix4();\n  const endRotation = new THREE.Matrix4();\n  const v = new THREE.Vector3();\n  return function rotateInPlaceAroundWorldUp(inMat4, theta, outMat4) {\n    inMat4Copy.copy(inMat4);\n    return outMat4\n      .copy(endRotation.makeRotationY(theta).multiply(startRotation.extractRotation(inMat4Copy)))\n      .scale(v.setFromMatrixScale(inMat4Copy))\n      .setPosition(v.setFromMatrixPosition(inMat4Copy));\n  };\n})();\n\nexport const childMatch = (function() {\n  const childInverse = new THREE.Matrix4();\n  const newParentMatrix = new THREE.Matrix4();\n  // transform the parent such that its child matches the target\n  return function childMatch(parent, child, target) {\n    child.updateMatrices();\n    childInverse.getInverse(child.matrix);\n    newParentMatrix.multiplyMatrices(target, childInverse);\n    setMatrixWorld(parent, newParentMatrix);\n  };\n})();\n","export const waitForEvent = function(eventName, eventObj) {\n  return new Promise(resolve => {\n    eventObj.addEventListener(eventName, resolve, { once: true });\n  });\n};\n\nexport const waitForDOMContentLoaded = function() {\n  if (document.readyState === \"complete\" || document.readyState === \"loaded\" || document.readyState === \"interactive\") {\n    return Promise.resolve(null);\n  } else {\n    return waitForEvent(\"DOMContentLoaded\", window);\n  }\n};\n","import configs from \"./configs\";\nimport localeData from \"../assets/translations.data.json\";\n\nconst navigatorLang = ((navigator.languages && navigator.languages[0]) || navigator.language || navigator.userLanguage)\n  .toLowerCase()\n  .split(/[_-]+/)[0];\nexport const lang = (localeData[navigatorLang] && navigatorLang) || \"en\";\n\nconst _messages = localeData[lang] || localeData.en;\n\nif (configs.APP_CONFIG && configs.APP_CONFIG.translations && configs.APP_CONFIG.translations[lang]) {\n  const configTranslations = configs.APP_CONFIG.translations[lang];\n  for (const messageKey in configTranslations) {\n    if (!configTranslations.hasOwnProperty(messageKey)) continue;\n    if (!configTranslations[messageKey]) continue;\n    _messages[messageKey] = configTranslations[messageKey];\n  }\n}\n\nexport const messages = Object.entries(_messages)\n  .map(([key, message]) => [\n    key,\n    // Replace nested message keys (e.g. %app-name%) with their messages.\n    message.replace(/%([\\w-.]+)%/i, (_match, subkey) => _messages[subkey])\n  ])\n  .reduce((acc, entry) => {\n    acc[entry[0]] = entry[1];\n    return acc;\n  }, {});\n","// Utilities for manipulating state history. This provides a number of functions which\n// need to be used to manipulate history state so we can deal with edge cases around\n// entry back button and refreshes once entered.\n//\n// These functions also transparently deal with the room slug, so incoming calls can ignore\n// dealing with it, and provides APIs for getting the non-slug part of the path.\n//\n// The slug cannot be part of the basename for history, because the slug changes intra-session\n// if the room is renamed.\n\n// This pushes/replaces a new k, v pair into the history, while maintaining all the other\n// keys, or clears state if k if null.\n//\n// Also maintains a length key that can be used to find the length of the history chain\n// (across refreshes) for the current room.\nfunction pushOrUpdateHistory(history, replace, k, v, detail, newPathname, newSearch) {\n  let state = {};\n  const newLength = ((history.location.state && history.location.state.__historyLength) || 0) + (replace ? 0 : 1);\n\n  if (k || newPathname || newSearch) {\n    state = history.location.state ? { ...history.location.state } : {};\n    delete state.__duplicate;\n\n    if (k) {\n      state[k] = v;\n      state.key = k;\n      state.value = v;\n      state.detail = detail;\n    }\n  }\n\n  const pathname =\n    newPathname !== undefined ? newPathname : history.location.pathname === \"/\" ? \"\" : history.location.pathname;\n\n  const search = newSearch !== undefined ? newSearch : history.location.search;\n\n  // If popToBeginningOfHubHistory was previously used, there is a duplicate entry\n  // at the top of the history stack (which was needed to wipe out forward history)\n  // so we use this opportunity to replace it.\n  const isDuplicate = history.location.state && history.location.state.__duplicate;\n  const method = replace || isDuplicate ? history.replace : history.push;\n  state.__historyLength = newLength;\n\n  method({ pathname, search, state });\n}\n\nexport function pushHistoryState(history, k, v, detail) {\n  pushOrUpdateHistory(history, false, k, v, detail);\n}\n\nexport function replaceHistoryState(history, k, v, detail) {\n  pushOrUpdateHistory(history, true, k, v, detail);\n}\n\nexport function pushHistoryPath(history, path, search) {\n  pushOrUpdateHistory(history, false, null, null, null, path, search);\n}\n\nexport function clearHistoryState(history) {\n  pushOrUpdateHistory(history, false);\n}\n\n// This will pop the browser history to the first entry that was for this hubs room,\n// and then push a duplicate entry onto the history stack in order to wipe out forward\n// history.\nexport function popToBeginningOfHubHistory(history, navigateToPriorPage) {\n  if (!history.location.state || history.location.state.__historyLength === undefined) return;\n\n  const len = history.location.state.__historyLength;\n  if (len === 0) return;\n\n  return new Promise(resolve => {\n    // After the go() completes, we push a duplicate history entry onto the stack\n    // in order to wipe out forward history. We also optionally go back -2 if we wanted\n    // to go back to the prior page.\n    const unsubscribe = history.listen(() => {\n      unsubscribe();\n      history.push({\n        pathname: history.location.pathname,\n        search: history.location.search,\n        state: { __historyLength: 0, __duplicate: true }\n      });\n      if (navigateToPriorPage) history.go(-2); // Go back to history entry before beginning.\n      resolve();\n    });\n\n    history.go(-len);\n  });\n}\n\n// This will pop the browser history to the entry before the first entry for this hubs room.\nexport function navigateToPriorPage(history) {\n  popToBeginningOfHubHistory(history, true);\n}\n\n// Returns the part of the pathname that does not include the slug\nexport function sluglessPath(location) {\n  const parts = location.pathname.split(\"/\");\n  return `/${parts.slice(2).join(\"/\")}`;\n}\n\n// Returns a new path that includes the current slug as a prefix to the\n// provided path.\nexport function withSlug(location, path) {\n  const parts = location.pathname.split(\"/\");\n  return `/${parts[1]}${path}`;\n}\n","function loadAsync(loader, url, onProgress) {\n  return new Promise((resolve, reject) => loader.load(url, resolve, onProgress, reject));\n}\n\nexport default class HubsTextureLoader {\n  static crossOrigin = \"anonymous\";\n\n  constructor(manager = THREE.DefaultLoadingManager) {\n    this.manager = manager;\n  }\n\n  load(url, onLoad, onProgress, onError) {\n    const texture = new THREE.Texture();\n\n    this.loadTextureAsync(texture, url, onProgress)\n      .then(onLoad)\n      .catch(onError);\n\n    return texture;\n  }\n\n  async loadTextureAsync(texture, src, onProgress) {\n    let imageLoader;\n\n    if (window.createImageBitmap !== undefined) {\n      imageLoader = new THREE.ImageBitmapLoader(this.manager);\n      texture.flipY = false;\n    } else {\n      imageLoader = new THREE.ImageLoader(this.manager);\n    }\n\n    imageLoader.setCrossOrigin(this.crossOrigin);\n    imageLoader.setPath(this.path);\n\n    const cacheKey = this.manager.resolveURL(src);\n\n    texture.image = await loadAsync(imageLoader, src, onProgress);\n\n    // Image was just added to cache before this function gets called, disable caching by immediatly removing it\n    THREE.Cache.remove(cacheKey);\n\n    texture.needsUpdate = true;\n\n    texture.onUpdate = function() {\n      // Delete texture data once it has been uploaded to the GPU\n      texture.image.close && texture.image.close();\n      delete texture.image;\n    };\n\n    return texture;\n  }\n\n  setCrossOrigin(value) {\n    this.crossOrigin = value;\n    return this;\n  }\n\n  setPath(value) {\n    this.path = value;\n    return this;\n  }\n}\n","import { objectTypeForOriginAndContentType } from \"../object-types\";\nimport { getReticulumFetchUrl } from \"./phoenix-utils\";\nimport { ObjectContentOrigins } from \"../object-types\";\nimport mediaHighlightFrag from \"./media-highlight-frag.glsl\";\nimport { mapMaterials } from \"./material-utils\";\nimport HubsTextureLoader from \"../loaders/HubsTextureLoader\";\nimport { validMaterials } from \"../components/hoverable-visuals\";\nimport { proxiedUrlFor } from \"../utils/media-url-utils\";\nimport Linkify from \"linkify-it\";\nimport tlds from \"tlds\";\n\nimport anime from \"animejs\";\n\nconst linkify = Linkify();\nlinkify.tlds(tlds);\n\nconst mediaAPIEndpoint = getReticulumFetchUrl(\"/api/v1/media\");\nconst isMobile = AFRAME.utils.device.isMobile();\nconst isMobileVR = AFRAME.utils.device.isMobile();\n\n// Map<String, Promise<Object>\nconst resolveUrlCache = new Map();\nexport const getDefaultResolveQuality = (is360 = false) => {\n  const useLowerQuality = isMobile || isMobileVR;\n  return !is360 ? (useLowerQuality ? \"low\" : \"high\") : useLowerQuality ? \"low_360\" : \"high_360\";\n};\n\nexport const resolveUrl = async (url, quality = null, version = 1) => {\n  const key = `${url}_${version}`;\n  if (resolveUrlCache.has(key)) return resolveUrlCache.get(key);\n\n  const resultPromise = fetch(mediaAPIEndpoint, {\n    method: \"POST\",\n    headers: { \"Content-Type\": \"application/json\" },\n    body: JSON.stringify({ media: { url, quality: quality || getDefaultResolveQuality() }, version })\n  }).then(async response => {\n    if (!response.ok) {\n      const message = `Error resolving url \"${url}\":`;\n      try {\n        const body = await response.text();\n        throw new Error(message + \" \" + body);\n      } catch (e) {\n        throw new Error(message + \" \" + response.statusText);\n      }\n    }\n    return response.json();\n  });\n\n  resolveUrlCache.set(key, resultPromise);\n  return resultPromise;\n};\n\nexport const upload = (file, desiredContentType) => {\n  const formData = new FormData();\n  formData.append(\"media\", file);\n  formData.append(\"promotion_mode\", \"with_token\");\n\n  if (desiredContentType) {\n    formData.append(\"desired_content_type\", desiredContentType);\n  }\n\n  return fetch(mediaAPIEndpoint, {\n    method: \"POST\",\n    body: formData\n  }).then(r => r.json());\n};\n\n// https://stackoverflow.com/questions/7584794/accessing-jpeg-exif-rotation-data-in-javascript-on-the-client-side/32490603#32490603\nfunction getOrientation(file, callback) {\n  const reader = new FileReader();\n  reader.onload = function(e) {\n    const view = new DataView(e.target.result);\n    if (view.getUint16(0, false) != 0xffd8) {\n      return callback(-2);\n    }\n    const length = view.byteLength;\n    let offset = 2;\n    while (offset < length) {\n      if (view.getUint16(offset + 2, false) <= 8) return callback(-1);\n      const marker = view.getUint16(offset, false);\n      offset += 2;\n      if (marker == 0xffe1) {\n        if (view.getUint32((offset += 2), false) != 0x45786966) {\n          return callback(-1);\n        }\n\n        const little = view.getUint16((offset += 6), false) == 0x4949;\n        offset += view.getUint32(offset + 4, little);\n        const tags = view.getUint16(offset, little);\n        offset += 2;\n        for (let i = 0; i < tags; i++) {\n          if (view.getUint16(offset + i * 12, little) == 0x0112) {\n            return callback(view.getUint16(offset + i * 12 + 8, little));\n          }\n        }\n      } else if ((marker & 0xff00) != 0xff00) {\n        break;\n      } else {\n        offset += view.getUint16(offset, false);\n      }\n    }\n    return callback(-1);\n  };\n  reader.readAsArrayBuffer(file);\n}\n\nfunction getLatestMediaVersionOfSrc(src) {\n  const els = document.querySelectorAll(\"[media-loader]\");\n  let version = 1;\n\n  for (const el of els) {\n    const loader = el.components[\"media-loader\"];\n\n    if (loader.data && loader.data.src === src) {\n      version = Math.max(version, loader.data.version);\n    }\n  }\n\n  return version;\n}\n\nexport function coerceToUrl(urlOrText) {\n  if (!linkify.test(urlOrText)) return urlOrText;\n\n  // See: https://github.com/Soapbox/linkifyjs/blob/master/src/linkify.js#L52\n  return urlOrText.indexOf(\"://\") >= 0 ? urlOrText : `https://${urlOrText}`;\n}\n\nexport const addMedia = (\n  src,\n  template,\n  contentOrigin,\n  contentSubtype = null,\n  resolve = false,\n  fitToBox = false,\n  animate = true,\n  mediaOptions = {},\n  networked = true,\n  parentEl = null,\n  linkedEl = null\n) => {\n  const scene = AFRAME.scenes[0];\n\n  const entity = document.createElement(\"a-entity\");\n\n  if (networked) {\n    entity.setAttribute(\"networked\", { template: template });\n  } else {\n    const templateBody = document\n      .importNode(document.body.querySelector(template).content, true)\n      .firstElementChild.cloneNode(true);\n    const elAttrs = templateBody.attributes;\n\n    // Merge root element attributes with this entity\n    for (let attrIdx = 0; attrIdx < elAttrs.length; attrIdx++) {\n      entity.setAttribute(elAttrs[attrIdx].name, elAttrs[attrIdx].value);\n    }\n\n    // Append all child elements\n    while (templateBody.firstElementChild) {\n      entity.appendChild(templateBody.firstElementChild);\n    }\n  }\n\n  const needsToBeUploaded = src instanceof File;\n\n  // If we're re-pasting an existing src in the scene, we should use the latest version\n  // seen across any other entities. Otherwise, start with version 1.\n  const version = getLatestMediaVersionOfSrc(src);\n\n  entity.setAttribute(\"media-loader\", {\n    fitToBox,\n    resolve,\n    animate,\n    src: typeof src === \"string\" ? coerceToUrl(src) || src : \"\",\n    version,\n    contentSubtype,\n    fileIsOwned: !needsToBeUploaded,\n    linkedEl,\n    mediaOptions\n  });\n\n  entity.object3D.matrixNeedsUpdate = true;\n\n  (parentEl || scene).appendChild(entity);\n\n  const orientation = new Promise(function(resolve) {\n    if (needsToBeUploaded) {\n      getOrientation(src, x => {\n        resolve(x);\n      });\n    } else {\n      resolve(1);\n    }\n  });\n  if (needsToBeUploaded) {\n    // Video camera videos are converted to mp4 for compatibility\n    const desiredContentType = contentSubtype === \"video-camera\" ? \"video/mp4\" : null;\n\n    upload(src, desiredContentType)\n      .then(response => {\n        const srcUrl = new URL(proxiedUrlFor(response.origin));\n        srcUrl.searchParams.set(\"token\", response.meta.access_token);\n        entity.setAttribute(\"media-loader\", { resolve: false, src: srcUrl.href, fileId: response.file_id });\n        window.APP.store.update({\n          uploadPromotionTokens: [{ fileId: response.file_id, promotionToken: response.meta.promotion_token }]\n        });\n      })\n      .catch(e => {\n        console.error(\"Media upload failed\", e);\n        entity.setAttribute(\"media-loader\", { src: \"error\" });\n      });\n  } else if (src instanceof MediaStream) {\n    entity.setAttribute(\"media-loader\", { src: `hubs://clients/${NAF.clientId}/video` });\n  }\n\n  if (contentOrigin) {\n    entity.addEventListener(\"media_resolved\", ({ detail }) => {\n      const objectType = objectTypeForOriginAndContentType(contentOrigin, detail.contentType, detail.src);\n      scene.emit(\"object_spawned\", { objectType });\n    });\n  }\n\n  return { entity, orientation };\n};\n\nexport const cloneMedia = (sourceEl, template, src = null, networked = true, link = false, parentEl = null) => {\n  if (!src) {\n    ({ src } = sourceEl.components[\"media-loader\"].data);\n  }\n\n  const { contentSubtype, fitToBox, mediaOptions } = sourceEl.components[\"media-loader\"].data;\n\n  return addMedia(\n    src,\n    template,\n    ObjectContentOrigins.URL,\n    contentSubtype,\n    true,\n    fitToBox,\n    false,\n    mediaOptions,\n    networked,\n    parentEl,\n    link ? sourceEl : null\n  );\n};\n\nexport function injectCustomShaderChunks(obj) {\n  const vertexRegex = /\\bskinning_vertex\\b/;\n  const fragRegex = /\\bgl_FragColor\\b/;\n\n  const shaderUniforms = [];\n  const batchManagerSystem = AFRAME.scenes[0].systems[\"hubs-systems\"].batchManagerSystem;\n\n  obj.traverse(object => {\n    if (!object.material) return;\n\n    object.material = mapMaterials(object, material => {\n      if (material.hubs_InjectedCustomShaderChunks) return material;\n      if (!validMaterials.includes(material.type)) {\n        return material;\n      }\n\n      // HACK, this routine inadvertently leaves the A-Frame shaders wired to the old, dark\n      // material, so maps cannot be updated at runtime. This breaks UI elements who have\n      // hover/toggle state, so for now just skip these while we figure out a more correct\n      // solution.\n      if (\n        object.el.classList.contains(\"ui\") ||\n        object.el.classList.contains(\"hud\") ||\n        object.el.getAttribute(\"text-button\")\n      )\n        return material;\n\n      // Used when the object is batched\n      batchManagerSystem.meshToEl.set(object, obj.el);\n\n      const newMaterial = material.clone();\n      // This will not run if the object is never rendered unbatched, since its unbatched shader will never be compiled\n      newMaterial.onBeforeCompile = shader => {\n        if (!vertexRegex.test(shader.vertexShader)) return;\n\n        shader.uniforms.hubs_IsFrozen = { value: false };\n        shader.uniforms.hubs_EnableSweepingEffect = { value: false };\n        shader.uniforms.hubs_SweepParams = { value: [0, 0] };\n        shader.uniforms.hubs_InteractorOnePos = { value: [0, 0, 0] };\n        shader.uniforms.hubs_InteractorTwoPos = { value: [0, 0, 0] };\n        shader.uniforms.hubs_HighlightInteractorOne = { value: false };\n        shader.uniforms.hubs_HighlightInteractorTwo = { value: false };\n        shader.uniforms.hubs_Time = { value: 0 };\n\n        const vchunk = `\n        if (hubs_HighlightInteractorOne || hubs_HighlightInteractorTwo || hubs_IsFrozen) {\n          vec4 wt = modelMatrix * vec4(transformed, 1);\n\n          // Used in the fragment shader below.\n          hubs_WorldPosition = wt.xyz;\n        }\n        `;\n\n        const vlines = shader.vertexShader.split(\"\\n\");\n        const vindex = vlines.findIndex(line => vertexRegex.test(line));\n        vlines.splice(vindex + 1, 0, vchunk);\n        vlines.unshift(\"varying vec3 hubs_WorldPosition;\");\n        vlines.unshift(\"uniform bool hubs_IsFrozen;\");\n        vlines.unshift(\"uniform bool hubs_HighlightInteractorOne;\");\n        vlines.unshift(\"uniform bool hubs_HighlightInteractorTwo;\");\n        shader.vertexShader = vlines.join(\"\\n\");\n\n        const flines = shader.fragmentShader.split(\"\\n\");\n        const findex = flines.findIndex(line => fragRegex.test(line));\n        flines.splice(findex + 1, 0, mediaHighlightFrag);\n        flines.unshift(\"varying vec3 hubs_WorldPosition;\");\n        flines.unshift(\"uniform bool hubs_IsFrozen;\");\n        flines.unshift(\"uniform bool hubs_EnableSweepingEffect;\");\n        flines.unshift(\"uniform vec2 hubs_SweepParams;\");\n        flines.unshift(\"uniform bool hubs_HighlightInteractorOne;\");\n        flines.unshift(\"uniform vec3 hubs_InteractorOnePos;\");\n        flines.unshift(\"uniform bool hubs_HighlightInteractorTwo;\");\n        flines.unshift(\"uniform vec3 hubs_InteractorTwoPos;\");\n        flines.unshift(\"uniform float hubs_Time;\");\n        shader.fragmentShader = flines.join(\"\\n\");\n\n        shaderUniforms.push(shader.uniforms);\n      };\n      newMaterial.needsUpdate = true;\n      newMaterial.hubs_InjectedCustomShaderChunks = true;\n      return newMaterial;\n    });\n  });\n\n  return shaderUniforms;\n}\n\nexport function getPromotionTokenForFile(fileId) {\n  return window.APP.store.state.uploadPromotionTokens.find(upload => upload.fileId === fileId);\n}\n\nconst mediaPos = new THREE.Vector3();\n\nexport function addAndArrangeMedia(el, media, contentSubtype, snapCount, mirrorOrientation = false, distance = 0.75) {\n  const { entity, orientation } = addMedia(media, \"#interactable-media\", undefined, contentSubtype, false);\n\n  const pos = el.object3D.position;\n\n  entity.object3D.position.set(pos.x, pos.y, pos.z);\n  entity.object3D.rotation.copy(el.object3D.rotation);\n\n  if (mirrorOrientation) {\n    entity.object3D.rotateY(Math.PI);\n  }\n\n  // Generate photos in a circle around camera, starting from the bottom.\n  // Prevent z-fighting but place behind viewfinder\n  const idx = (snapCount % 6) + 3;\n\n  mediaPos.set(\n    Math.cos(Math.PI * 2 * (idx / 6.0)) * distance,\n    Math.sin(Math.PI * 2 * (idx / 6.0)) * distance,\n    -0.05 + idx * 0.001\n  );\n\n  el.object3D.localToWorld(mediaPos);\n  entity.object3D.visible = false;\n\n  const handler = () => {\n    entity.object3D.visible = true;\n    entity.setAttribute(\"animation__photo_pos\", {\n      property: \"position\",\n      dur: 800,\n      from: { x: pos.x, y: pos.y, z: pos.z },\n      to: { x: mediaPos.x, y: mediaPos.y, z: mediaPos.z },\n      easing: \"easeOutElastic\"\n    });\n  };\n\n  let eventType = null;\n\n  if (contentSubtype.startsWith(\"photo\")) {\n    entity.addEventListener(\"image-loaded\", handler, { once: true });\n    eventType = \"photo\";\n  } else if (contentSubtype.startsWith(\"video\")) {\n    entity.addEventListener(\"video-loaded\", handler, { once: true });\n    eventType = \"video\";\n  } else {\n    console.error(\"invalid type \" + contentSubtype);\n    return;\n  }\n\n  entity.object3D.matrixNeedsUpdate = true;\n\n  entity.addEventListener(\n    \"media_resolved\",\n    () => {\n      el.emit(`${eventType}_taken`, entity.components[\"media-loader\"].data.src);\n    },\n    { once: true }\n  );\n\n  return { entity, orientation };\n}\n\nexport const textureLoader = new HubsTextureLoader().setCrossOrigin(\"anonymous\");\n\nexport async function createImageTexture(url, filter) {\n  let texture;\n\n  if (filter) {\n    const image = new Image();\n    image.crossOrigin = \"anonymous\";\n    const load = new Promise(res => image.addEventListener(\"load\", res, { once: true }));\n    image.src = url;\n    await load;\n    const canvas = document.createElement(\"canvas\");\n    canvas.width = image.width;\n    canvas.height = image.height;\n    const ctx = canvas.getContext(\"2d\");\n    ctx.drawImage(image, 0, 0);\n    await filter(ctx, image.width, image.height);\n\n    texture = new THREE.CanvasTexture(canvas);\n  } else {\n    texture = new THREE.Texture();\n\n    try {\n      await textureLoader.loadTextureAsync(texture, url);\n    } catch (e) {\n      throw new Error(`'${url}' could not be fetched (Error code: ${e.status}; Response: ${e.statusText})`);\n    }\n  }\n\n  texture.encoding = THREE.sRGBEncoding;\n  texture.anisotropy = 4;\n\n  return texture;\n}\n\nexport function addMeshScaleAnimation(mesh, initialScale, onComplete) {\n  const step = (function() {\n    const lastValue = {};\n    return function(anim) {\n      const value = anim.animatables[0].target;\n\n      value.x = Math.max(Number.MIN_VALUE, value.x);\n      value.y = Math.max(Number.MIN_VALUE, value.y);\n      value.z = Math.max(Number.MIN_VALUE, value.z);\n\n      // For animation timeline.\n      if (value.x === lastValue.x && value.y === lastValue.y && value.z === lastValue.z) {\n        return;\n      }\n\n      lastValue.x = value.x;\n      lastValue.y = value.y;\n      lastValue.z = value.z;\n\n      mesh.scale.set(value.x, value.y, value.z);\n      mesh.matrixNeedsUpdate = true;\n    };\n  })();\n\n  const config = {\n    duration: 400,\n    easing: \"easeOutElastic\",\n    elasticity: 400,\n    loop: 0,\n    round: false,\n    x: mesh.scale.x,\n    y: mesh.scale.y,\n    z: mesh.scale.z,\n    targets: [initialScale],\n    update: anim => step(anim),\n    complete: anim => {\n      step(anim);\n      if (onComplete) onComplete();\n    }\n  };\n\n  mesh.scale.copy(initialScale);\n  mesh.matrixNeedsUpdate = true;\n\n  return anime(config);\n}\n\nexport function closeExistingMediaMirror() {\n  const mirrorTarget = document.querySelector(\"#media-mirror-target\");\n\n  // Remove old mirror target media element\n  if (mirrorTarget.firstChild) {\n    mirrorTarget.firstChild.setAttribute(\"animation__remove\", {\n      property: \"scale\",\n      dur: 200,\n      to: { x: 0.01, y: 0.01, z: 0.01 },\n      easing: \"easeInQuad\"\n    });\n\n    return new Promise(res => {\n      mirrorTarget.firstChild.addEventListener(\"animationcomplete\", () => {\n        mirrorTarget.removeChild(mirrorTarget.firstChild);\n        mirrorTarget.parentEl.object3D.visible = false;\n        res();\n      });\n    });\n  }\n}\n","/* global fetch THREE */\nimport URL_TICK from \"../assets/sfx/tick.mp3\";\nimport URL_TELEPORT_LOOP from \"../assets/sfx/teleport-loop.mp3\";\nimport URL_QUICK_TURN from \"../assets/sfx/quickTurn.mp3\";\nimport URL_TAP_MELLOW from \"../assets/sfx/tap_mellow.mp3\";\nimport URL_PEN_SPAWN from \"../assets/sfx/PenSpawn.mp3\";\nimport URL_PEN_DRAW from \"../assets/sfx/PenDraw1.mp3\";\nimport URL_CAMERA_SNAPSHOT from \"../assets/sfx/PicSnapHey.mp3\";\nimport URL_WELCOME from \"../assets/sfx/welcome.mp3\";\nimport URL_QUACK from \"../assets/sfx/quack.mp3\";\nimport URL_SPECIAL_QUACK from \"../assets/sfx/specialquack.mp3\";\nimport URL_POP from \"../assets/sfx/pop.mp3\";\nimport URL_FREEZE from \"../assets/sfx/Eb_blip.mp3\";\nimport URL_TACK from \"../assets/sfx/tack.mp3\";\nimport URL_MEDIA_LOADED from \"../assets/sfx/A_bendUp.mp3\";\nimport URL_MEDIA_LOADING from \"../assets/sfx/suspense.mp3\";\nimport URL_SPAWN_EMOJI from \"../assets/sfx/emoji.mp3\";\nimport { setMatrixWorld } from \"../utils/three-utils\";\n\nlet soundEnum = 0;\nexport const SOUND_HOVER_OR_GRAB = soundEnum++;\nexport const SOUND_THAW = soundEnum++;\nexport const SOUND_PEN_STOP_DRAW = soundEnum++;\nexport const SOUND_PEN_UNDO_DRAW = soundEnum++;\nexport const SOUND_PEN_CHANGE_COLOR = soundEnum++;\nexport const SOUND_TOGGLE_MIC = soundEnum++;\nexport const SOUND_TELEPORT_START = soundEnum++;\nexport const SOUND_TELEPORT_END = soundEnum++;\nexport const SOUND_WAYPOINT_START = soundEnum++;\nexport const SOUND_WAYPOINT_END = soundEnum++;\nexport const SOUND_SNAP_ROTATE = soundEnum++;\nexport const SOUND_SPAWN_PEN = soundEnum++;\nexport const SOUND_PEN_START_DRAW = soundEnum++;\nexport const SOUND_CAMERA_TOOL_TOOK_SNAPSHOT = soundEnum++;\nexport const SOUND_ENTER_SCENE = soundEnum++;\nexport const SOUND_QUACK = soundEnum++;\nexport const SOUND_SPECIAL_QUACK = soundEnum++;\nexport const SOUND_CHAT_MESSAGE = soundEnum++;\nexport const SOUND_FREEZE = soundEnum++;\nexport const SOUND_PIN = soundEnum++;\nexport const SOUND_MEDIA_LOADING = soundEnum++;\nexport const SOUND_MEDIA_LOADED = soundEnum++;\nexport const SOUND_CAMERA_TOOL_COUNTDOWN = soundEnum++;\nexport const SOUND_PREFERENCE_MENU_HOVER = soundEnum++;\nexport const SOUND_PREFERENCE_MENU_SELECT = soundEnum++;\nexport const SOUND_SPAWN_EMOJI = soundEnum++;\n\n// Safari doesn't support the promise form of decodeAudioData, so we polyfill it.\nfunction decodeAudioData(audioContext, arrayBuffer) {\n  return new Promise((resolve, reject) => {\n    audioContext.decodeAudioData(arrayBuffer, resolve, reject);\n  });\n}\n\nexport class SoundEffectsSystem {\n  constructor(scene) {\n    this.pendingAudioSourceNodes = [];\n    this.pendingPositionalAudios = [];\n    this.positionalAudiosStationary = [];\n    this.positionalAudiosFollowingObject3Ds = [];\n\n    this.audioContext = THREE.AudioContext.getContext();\n    this.scene = scene;\n    this.scene.audioListener = this.scene.audioListener || new THREE.AudioListener();\n    if (this.scene.camera) {\n      this.scene.camera.add(this.scene.audioListener);\n    }\n    this.scene.addEventListener(\"camera-set-active\", evt => {\n      evt.detail.cameraEl.getObject3D(\"camera\").add(this.scene.audioListener);\n    });\n    const soundsAndUrls = [\n      [SOUND_HOVER_OR_GRAB, URL_TICK],\n      [SOUND_THAW, URL_TICK],\n      [SOUND_PEN_STOP_DRAW, URL_TICK],\n      [SOUND_PEN_UNDO_DRAW, URL_TICK],\n      [SOUND_PEN_CHANGE_COLOR, URL_TICK],\n      [SOUND_TOGGLE_MIC, URL_TICK],\n      [SOUND_CAMERA_TOOL_COUNTDOWN, URL_TICK],\n      [SOUND_TELEPORT_START, URL_TELEPORT_LOOP],\n      [SOUND_TELEPORT_END, URL_QUICK_TURN],\n      [SOUND_WAYPOINT_START, URL_QUICK_TURN],\n      [SOUND_WAYPOINT_END, URL_TICK],\n      [SOUND_SNAP_ROTATE, URL_TAP_MELLOW],\n      [SOUND_SPAWN_PEN, URL_PEN_SPAWN],\n      [SOUND_PEN_START_DRAW, URL_PEN_DRAW],\n      [SOUND_CAMERA_TOOL_TOOK_SNAPSHOT, URL_CAMERA_SNAPSHOT],\n      [SOUND_ENTER_SCENE, URL_WELCOME],\n      [SOUND_QUACK, URL_QUACK],\n      [SOUND_SPECIAL_QUACK, URL_SPECIAL_QUACK],\n      [SOUND_CHAT_MESSAGE, URL_POP],\n      [SOUND_FREEZE, URL_FREEZE],\n      [SOUND_PIN, URL_TACK],\n      [SOUND_MEDIA_LOADING, URL_MEDIA_LOADING],\n      [SOUND_MEDIA_LOADED, URL_MEDIA_LOADED],\n      [SOUND_PREFERENCE_MENU_HOVER, URL_FREEZE],\n      [SOUND_PREFERENCE_MENU_SELECT, URL_TICK],\n      [SOUND_SPAWN_EMOJI, URL_SPAWN_EMOJI]\n    ];\n    const loading = new Map();\n    const load = url => {\n      let audioBufferPromise = loading.get(url);\n      if (!audioBufferPromise) {\n        audioBufferPromise = fetch(url)\n          .then(r => r.arrayBuffer())\n          .then(arrayBuffer => decodeAudioData(this.audioContext, arrayBuffer));\n        loading.set(url, audioBufferPromise);\n      }\n      return audioBufferPromise;\n    };\n    this.sounds = new Map();\n    soundsAndUrls.map(([sound, url]) => {\n      load(url).then(audioBuffer => {\n        this.sounds.set(sound, audioBuffer);\n      });\n    });\n  }\n\n  enqueueSound(sound, loop) {\n    const audioBuffer = this.sounds.get(sound);\n    if (!audioBuffer) return null;\n    // The nodes are very inexpensive to create, according to\n    // https://developer.mozilla.org/en-US/docs/Web/API/AudioBufferSourceNode\n    const source = this.audioContext.createBufferSource();\n    source.buffer = audioBuffer;\n    source.connect(this.audioContext.destination);\n    source.loop = loop;\n    this.pendingAudioSourceNodes.push(source);\n    return source;\n  }\n\n  enqueuePositionalSound(sound, loop) {\n    const audioBuffer = this.sounds.get(sound);\n    if (!audioBuffer) return null;\n\n    const positionalAudio = new THREE.PositionalAudio(this.scene.audioListener).setBuffer(audioBuffer);\n    positionalAudio.loop = loop;\n    this.pendingPositionalAudios.push(positionalAudio);\n    return positionalAudio;\n  }\n\n  playPositionalSoundAt(sound, position, loop) {\n    const positionalAudio = this.enqueuePositionalSound(sound, loop);\n    if (!positionalAudio) return null;\n    positionalAudio.position.copy(position);\n    positionalAudio.matrixWorldNeedsUpdate = true;\n    this.positionalAudiosStationary.push(positionalAudio);\n  }\n\n  playPositionalSoundFollowing(sound, object3D, loop) {\n    const positionalAudio = this.enqueuePositionalSound(sound, loop);\n    if (!positionalAudio) return null;\n    this.positionalAudiosFollowingObject3Ds.push({ positionalAudio, object3D });\n    return positionalAudio;\n  }\n\n  playSoundOneShot(sound) {\n    return this.enqueueSound(sound, false);\n  }\n\n  playSoundLooped(sound) {\n    return this.enqueueSound(sound, true);\n  }\n\n  playSoundLoopedWithGain(sound) {\n    const audioBuffer = this.sounds.get(sound);\n    if (!audioBuffer) return null;\n\n    const source = this.audioContext.createBufferSource();\n    const gain = this.audioContext.createGain();\n    source.buffer = audioBuffer;\n    source.connect(gain);\n    gain.connect(this.audioContext.destination);\n    source.loop = true;\n    this.pendingAudioSourceNodes.push(source);\n    return { gain, source };\n  }\n\n  stopSoundNode(node) {\n    const index = this.pendingAudioSourceNodes.indexOf(node);\n    if (index !== -1) {\n      this.pendingAudioSourceNodes.splice(index, 1);\n    } else {\n      node.stop();\n    }\n  }\n\n  stopPositionalAudio(inPositionalAudio) {\n    const pendingIndex = this.pendingPositionalAudios.indexOf(inPositionalAudio);\n    if (pendingIndex !== -1) {\n      this.pendingPositionalAudios.splice(pendingIndex, 1);\n    } else {\n      if (inPositionalAudio.isPlaying) {\n        inPositionalAudio.stop();\n      }\n      if (inPositionalAudio.parent) {\n        inPositionalAudio.parent.remove(inPositionalAudio);\n      }\n    }\n    this.positionalAudiosStationary = this.positionalAudiosStationary.filter(\n      positionalAudio => positionalAudio !== inPositionalAudio\n    );\n    this.positionalAudiosFollowingObject3Ds = this.positionalAudiosFollowingObject3Ds.filter(\n      ({ positionalAudio }) => positionalAudio !== inPositionalAudio\n    );\n  }\n\n  tick() {\n    for (let i = 0; i < this.pendingAudioSourceNodes.length; i++) {\n      this.pendingAudioSourceNodes[i].start();\n    }\n    this.pendingAudioSourceNodes.length = 0;\n\n    for (let i = 0; i < this.pendingPositionalAudios.length; i++) {\n      const pendingPositionalAudio = this.pendingPositionalAudios[i];\n      this.scene.object3D.add(pendingPositionalAudio);\n      pendingPositionalAudio.play();\n    }\n    this.pendingPositionalAudios.length = 0;\n\n    for (let i = this.positionalAudiosStationary.length - 1; i >= 0; i--) {\n      const positionalAudio = this.positionalAudiosStationary[i];\n      if (!positionalAudio.isPlaying) {\n        this.stopPositionalAudio(positionalAudio);\n      }\n    }\n\n    for (let i = this.positionalAudiosFollowingObject3Ds.length - 1; i >= 0; i--) {\n      const positionalAudioAndObject3D = this.positionalAudiosFollowingObject3Ds[i];\n      const positionalAudio = positionalAudioAndObject3D.positionalAudio;\n      const object3D = positionalAudioAndObject3D.object3D;\n      if (!positionalAudio.isPlaying || !object3D.parent) {\n        this.stopPositionalAudio(positionalAudio);\n      } else {\n        object3D.updateMatrices();\n        setMatrixWorld(positionalAudio, object3D.matrixWorld);\n      }\n    }\n  }\n}\n","import configs from \"../utils/configs\";\n\nexport default function IfFeature(props) {\n  return (configs.feature(props.name) && props.children) || null;\n}\n","import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport classNames from \"classnames\";\nimport { faTimes } from \"@fortawesome/free-solid-svg-icons/faTimes\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\n\nexport default class DialogContainer extends Component {\n  static propTypes = {\n    title: PropTypes.node,\n    children: PropTypes.node.isRequired,\n    onClose: PropTypes.func,\n    closable: PropTypes.bool,\n    wide: PropTypes.bool,\n    noOverlay: PropTypes.bool,\n    className: PropTypes.string,\n    allowOverflow: PropTypes.bool,\n    additionalClass: PropTypes.string\n  };\n\n  static defaultProps = {\n    closable: true\n  };\n\n  constructor(props) {\n    super(props);\n    this.onKeyDown = this.onKeyDown.bind(this);\n    this.onContainerClicked = this.onContainerClicked.bind(this);\n  }\n\n  componentDidMount() {\n    window.addEventListener(\"keydown\", this.onKeyDown);\n  }\n\n  componentWillUnmount() {\n    window.removeEventListener(\"keydown\", this.onKeyDown);\n  }\n\n  onKeyDown(e) {\n    if (this.props.closable && e.key === \"Escape\") {\n      this.props.onClose();\n    }\n  }\n\n  onContainerClicked = e => {\n    if (this.props.closable && e.currentTarget === e.target) {\n      this.props.onClose();\n    }\n  };\n\n  render() {\n    return (\n      <div\n        className={classNames(\n          \"dialog-overlay\",\n          this.props.noOverlay ? \"dialog-overlay__no-pointer-events\" : \"\",\n          this.props.className\n        )}\n      >\n        <div\n          className={classNames(\n            \"dialog\",\n            this.props.noOverlay ? \"dialog__no-pointer-events\" : \"dialog__dark-background\",\n            this.props.noOverlay ? \"dialog__align-end\" : \"\"\n          )}\n          onClick={this.onContainerClicked}\n        >\n          <div className={`dialog__box ${this.props.wide ? \"dialog__wide\" : \"\"} `}>\n            <div\n              className={classNames(\n                \"dialog__box__contents\",\n                this.props.allowOverflow ? \"dialog__box__contents-overflow\" : null,\n                this.props.additionalClass\n              )}\n            >\n              {this.props.closable &&\n                this.props.onClose &&\n                !this.props.noOverlay && (\n                  <button className=\"dialog__box__contents__close\" onClick={() => this.props.onClose()}>\n                    <i>\n                      <FontAwesomeIcon icon={faTimes} />\n                    </i>\n                  </button>\n                )}\n              {this.props.title && <div className=\"dialog__box__contents__title\">{this.props.title}</div>}\n              <div className=\"dialog__box__contents__body\">{this.props.children}</div>\n              <div className=\"dialog__box__contents__button-container\" />\n            </div>\n          </div>\n        </div>\n      </div>\n    );\n  }\n}\n","const qs = new URLSearchParams(location.search);\n\nexport default function qsTruthy(param) {\n  const val = qs.get(param);\n  // if the param exists but is not set (e.g. \"?foo&bar\"), its value is the empty string.\n  return val === \"\" || /1|on|true|yes/i.test(val);\n}\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\n\nexport const ReactAudioContext = React.createContext({});\n\nexport const hudHoverSound = \"play_sound-hud_hover_start\";\n\nexport const WithHoverSound = ({ sound, children }) => {\n  return (\n    <ReactAudioContext.Consumer>\n      {context => {\n        return React.cloneElement(children, {\n          onMouseEnter: e => {\n            if (context && context.playSound) {\n              context.playSound(sound || hudHoverSound);\n            }\n            children.props.onMouseEnter && children.props.onMouseEnter(e);\n          }\n        });\n      }}\n    </ReactAudioContext.Consumer>\n  );\n};\n\nWithHoverSound.propTypes = {\n  children: PropTypes.object,\n  sound: PropTypes.string\n};\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"secondary-button\":\"settings-menu__secondary-button__2Q5_g\",\"secondaryButton\":\"settings-menu__secondary-button__2Q5_g\",\"bottom-links-main\":\"settings-menu__bottom-links-main__Vtlje\",\"bottomLinksMain\":\"settings-menu__bottom-links-main__Vtlje\",\"bottom-links\":\"settings-menu__bottom-links__b1tDE\",\"bottomLinks\":\"settings-menu__bottom-links__b1tDE\",\"close-button\":\"settings-menu__close-button__M0EhC\",\"closeButton\":\"settings-menu__close-button__M0EhC\",\"settings-menu-drop\":\"settings-menu__settings-menu-drop__Od2Sa\",\"settingsMenuDrop\":\"settings-menu__settings-menu-drop__Od2Sa\",\"attach-point\":\"settings-menu__attach-point__2gV3g\",\"attachPoint\":\"settings-menu__attach-point__2gV3g\",\"contents\":\"settings-menu__contents__3GQlW\",\"rows\":\"settings-menu__rows__2OtlS\",\"row\":\"settings-menu__row__3w7fz\",\"row-no-margin\":\"settings-menu__row-no-margin__3rYbX\",\"rowNoMargin\":\"settings-menu__row-no-margin__3rYbX\",\"row-header\":\"settings-menu__row-header__2oCqk\",\"rowHeader\":\"settings-menu__row-header__2oCqk\",\"list-item\":\"settings-menu__list-item__1__z6\",\"listItem\":\"settings-menu__list-item__1__z6\",\"list-item-link\":\"settings-menu__list-item-link__2ovr3\",\"listItemLink\":\"settings-menu__list-item-link__2ovr3\",\"settings-menu-overlay-wrap\":\"settings-menu__settings-menu-overlay-wrap__3T7VX\",\"settingsMenuOverlayWrap\":\"settings-menu__settings-menu-overlay-wrap__3T7VX\",\"settings-menu-overlay\":\"settings-menu__settings-menu-overlay__3kU9n\",\"settingsMenuOverlay\":\"settings-menu__settings-menu-overlay__3kU9n\",\"settings-row\":\"settings-menu__settings-row__1sDDk\",\"settingsRow\":\"settings-menu__settings-row__1sDDk\",\"icon\":\"settings-menu__icon__3KMMz\",\"secondary-link-item\":\"settings-menu__secondary-link-item__1y7xz\",\"secondaryLinkItem\":\"settings-menu__secondary-link-item__1y7xz\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"entry-button-secondary\":\"entry__entry-button-secondary__1Fr_E\",\"entryButtonSecondary\":\"entry__entry-button-secondary__1Fr_E\",\"entry-panel\":\"entry__entry-panel__34CD9\",\"entryPanel\":\"entry__entry-panel__34CD9\",\"button-container\":\"entry__button-container__3Blog\",\"buttonContainer\":\"entry__button-container__3Blog\",\"secondary-action-button\":\"entry__secondary-action-button__3FCMj\",\"secondaryActionButton\":\"entry__secondary-action-button__3FCMj\",\"entry-button\":\"entry__entry-button__G7PQF\",\"entryButton\":\"entry__entry-button__G7PQF\",\"action-button\":\"entry__action-button__3Vnab\",\"actionButton\":\"entry__action-button__3Vnab\",\"collapse-button\":\"entry__collapse-button__3_PLp\",\"collapseButton\":\"entry__collapse-button__3_PLp\",\"favorite-button\":\"entry__favorite-button__2CVuk\",\"favoriteButton\":\"entry__favorite-button__2CVuk\",\"back\":\"entry__back__J4Sgl\",\"lobby-label\":\"entry__lobby-label__2Nj9w\",\"lobbyLabel\":\"entry__lobby-label__2Nj9w\",\"label\":\"entry__label__fUhpb\",\"title\":\"entry__title__1GITj\",\"name\":\"entry__name__sYOeV\",\"rename-button\":\"entry__rename-button__KFW9R\",\"renameButton\":\"entry__rename-button__KFW9R\",\"center\":\"entry__center__1105W\",\"wide-button\":\"entry__wide-button__2tfMM\",\"wideButton\":\"entry__wide-button__2tfMM\",\"screen-sharing\":\"entry__screen-sharing__NBXQu\",\"screenSharing\":\"entry__screen-sharing__NBXQu\",\"checkbox\":\"entry__checkbox__3SoPk\",\"entry-dialog\":\"entry__entry-dialog__30kMs\",\"entryDialog\":\"entry__entry-dialog__30kMs\",\"favorited\":\"entry__favorited__2IHpj\",\"icon\":\"entry__icon__3JiUl\",\"bolded\":\"entry__bolded__13B4f\",\"subtitle\":\"entry__subtitle__1BC2y\",\"room-subtitle\":\"entry__room-subtitle__7MSMo\",\"roomSubtitle\":\"entry__room-subtitle__7MSMo\",\"lobby\":\"entry__lobby__3AxfL\",\"profile-icon\":\"entry__profile-icon__3BAWG\",\"profileIcon\":\"entry__profile-icon__3BAWG\",\"button-subtitle\":\"entry__button-subtitle__3zrEo\",\"buttonSubtitle\":\"entry__button-subtitle__3zrEo\",\"audio-loader\":\"entry__audio-loader__1YCJd\",\"audioLoader\":\"entry__audio-loader__1YCJd\",\"webvr-link-container\":\"entry__webvr-link-container__3scWP\",\"webvrLinkContainer\":\"entry__webvr-link-container__3scWP\",\"webvr-link\":\"entry__webvr-link__3eWuZ\",\"webvrLink\":\"entry__webvr-link__3eWuZ\",\"secondary\":\"entry__secondary__3uhYE\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"ui\":\"ui-root__ui__33CMU\",\"ui-dialog\":\"ui-root__ui-dialog__2TY9Y\",\"uiDialog\":\"ui-root__ui-dialog__2TY9Y\",\"ui-interactive\":\"ui-root__ui-interactive__2mtC4\",\"uiInteractive\":\"ui-root__ui-interactive__2mtC4\",\"object-list\":\"ui-root__object-list__34wMm\",\"objectList\":\"ui-root__object-list__34wMm\",\"presence-info\":\"ui-root__presence-info__3cieq\",\"presenceInfo\":\"ui-root__presence-info__3cieq\",\"corner-button\":\"ui-root__corner-button__2rfQ5\",\"cornerButton\":\"ui-root__corner-button__2rfQ5\",\"nag-corner-button\":\"ui-root__nag-corner-button__3TFW5\",\"nagCornerButton\":\"ui-root__nag-corner-button__3TFW5\",\"choose-scene-button\":\"ui-root__choose-scene-button__3VNdD\",\"chooseSceneButton\":\"ui-root__choose-scene-button__3VNdD\",\"leave-button\":\"ui-root__leave-button__29u2_\",\"leaveButton\":\"ui-root__leave-button__29u2_\",\"interstitial\":\"ui-root__interstitial__1cotl\",\"invite-tip\":\"ui-root__invite-tip__20NJ6\",\"inviteTip\":\"ui-root__invite-tip__20NJ6\",\"streaming-tip\":\"ui-root__streaming-tip__17WYl\",\"streamingTip\":\"ui-root__streaming-tip__17WYl\",\"streaming-tip-attach-point\":\"ui-root__streaming-tip-attach-point__3XSH-\",\"streamingTipAttachPoint\":\"ui-root__streaming-tip-attach-point__3XSH-\",\"streaming-tip-close\":\"ui-root__streaming-tip-close__1OHPc\",\"streamingTipClose\":\"ui-root__streaming-tip-close__1OHPc\",\"streaming-tip-message\":\"ui-root__streaming-tip-message__2XOUD\",\"streamingTipMessage\":\"ui-root__streaming-tip-message__2XOUD\",\"ui-dialog-box-contents\":\"ui-root__ui-dialog-box-contents__3XWtl\",\"uiDialogBoxContents\":\"ui-root__ui-dialog-box-contents__3XWtl\",\"backgrounded\":\"ui-root__backgrounded__34j0m\",\"in-room-favorite-button\":\"ui-root__in-room-favorite-button__2I0Kj\",\"inRoomFavoriteButton\":\"ui-root__in-room-favorite-button__2I0Kj\",\"help-button\":\"ui-root__help-button__1cq2F\",\"helpButton\":\"ui-root__help-button__1cq2F\",\"occupant-count\":\"ui-root__occupant-count__34rGX\",\"occupantCount\":\"ui-root__occupant-count__34rGX\",\"presence-info-selected\":\"ui-root__presence-info-selected__1Jhbw\",\"presenceInfoSelected\":\"ui-root__presence-info-selected__1Jhbw\",\"camera-mode-exit-button\":\"ui-root__camera-mode-exit-button__2mpbz\",\"cameraModeExitButton\":\"ui-root__camera-mode-exit-button__2mpbz\",\"corner-button-selected\":\"ui-root__corner-button-selected__qRY5R\",\"cornerButtonSelected\":\"ui-root__corner-button-selected__qRY5R\",\"invite-tip-attach-point\":\"ui-root__invite-tip-attach-point__3rQJ6\",\"inviteTipAttachPoint\":\"ui-root__invite-tip-attach-point__3rQJ6\",\"avatar-editor\":\"ui-root__avatar-editor__2mO8z\",\"avatarEditor\":\"ui-root__avatar-editor__2mO8z\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"title\":\"room-info-dialog__title__3-3CO\",\"room-info\":\"room-info-dialog__room-info__3XkbS\",\"roomInfo\":\"room-info-dialog__room-info__3XkbS\",\"scene-screenshot\":\"room-info-dialog__scene-screenshot__3PWz-\",\"sceneScreenshot\":\"room-info-dialog__scene-screenshot__3PWz-\",\"scene-details\":\"room-info-dialog__scene-details__2pYml\",\"sceneDetails\":\"room-info-dialog__scene-details__2pYml\",\"scene-main\":\"room-info-dialog__scene-main__2mhXj\",\"sceneMain\":\"room-info-dialog__scene-main__2mhXj\",\"scene-name\":\"room-info-dialog__scene-name__1bqGh\",\"sceneName\":\"room-info-dialog__scene-name__1bqGh\",\"scene-creator\":\"room-info-dialog__scene-creator__3_za4\",\"sceneCreator\":\"room-info-dialog__scene-creator__3_za4\",\"scene-attributions\":\"room-info-dialog__scene-attributions__QpYVd\",\"sceneAttributions\":\"room-info-dialog__scene-attributions__QpYVd\",\"attribution\":\"room-info-dialog__attribution__I9_V-\",\"attribution-name\":\"room-info-dialog__attribution-name__3JTpI\",\"attributionName\":\"room-info-dialog__attribution-name__3JTpI\",\"attribution-author\":\"room-info-dialog__attribution-author__BouZB\",\"attributionAuthor\":\"room-info-dialog__attribution-author__BouZB\",\"description\":\"room-info-dialog__description__2jXMQ\",\"subtitle\":\"room-info-dialog__subtitle__1pamf\",\"hub-title\":\"room-info-dialog__hub-title__2rQtj\",\"hubTitle\":\"room-info-dialog__hub-title__2rQtj\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"presence-log\":\"presence-log__presence-log__10oFj\",\"presenceLog\":\"presence-log__presence-log__10oFj\",\"presence-log-entry\":\"presence-log__presence-log-entry__dt0t4\",\"presenceLogEntry\":\"presence-log__presence-log-entry__dt0t4\",\"message-body\":\"presence-log__message-body__2L9jA\",\"messageBody\":\"presence-log__message-body__2L9jA\",\"message-body-multi\":\"presence-log__message-body-multi__2e-Sx\",\"messageBodyMulti\":\"presence-log__message-body-multi__2e-Sx\",\"message-body-mono\":\"presence-log__message-body-mono__3zuQE\",\"messageBodyMono\":\"presence-log__message-body-mono__3zuQE\",\"message-wrap\":\"presence-log__message-wrap__2aWCa\",\"messageWrap\":\"presence-log__message-wrap__2aWCa\",\"message-wrap-multi\":\"presence-log__message-wrap-multi__1eA6v\",\"messageWrapMulti\":\"presence-log__message-wrap-multi__1eA6v\",\"message-source\":\"presence-log__message-source__3CI4d\",\"messageSource\":\"presence-log__message-source__3CI4d\",\"message-source-link\":\"presence-log__message-source-link__1evTZ\",\"messageSourceLink\":\"presence-log__message-source-link__1evTZ\",\"icon-button\":\"presence-log__icon-button__2Shbm\",\"iconButton\":\"presence-log__icon-button__2Shbm\",\"spawn-message\":\"presence-log__spawn-message__14Ne8\",\"spawnMessage\":\"presence-log__spawn-message__14Ne8\",\"share\":\"presence-log__share__37U7E\",\"media\":\"presence-log__media__2qG_d\",\"mediaBody\":\"presence-log__mediaBody__1rByA\",\"expired\":\"presence-log__expired__2wMJc\",\"presence-log-entry-with-button\":\"presence-log__presence-log-entry-with-button__1PxTw\",\"presenceLogEntryWithButton\":\"presence-log__presence-log-entry-with-button__1PxTw\",\"presence-log-in-room\":\"presence-log__presence-log-in-room__17h3n\",\"presenceLogInRoom\":\"presence-log__presence-log-in-room__17h3n\",\"presence-log-spawn\":\"presence-log__presence-log-spawn__3jlmT\",\"presenceLogSpawn\":\"presence-log__presence-log-spawn__3jlmT\",\"presence-log-entry-one-line\":\"presence-log__presence-log-entry-one-line__bRXfp\",\"presenceLogEntryOneLine\":\"presence-log__presence-log-entry-one-line__bRXfp\",\"presence-log-emoji\":\"presence-log__presence-log-emoji__1_3Yn\",\"presenceLogEmoji\":\"presence-log__presence-log-emoji__1_3Yn\",\"emoji\":\"presence-log__emoji__10b18\"};","// Enumeration of spawned object content origins. URL means the content is\n// fetched from a URL, FILE means it was an uploaded/dropped file, and\n// CLIPBOARD means it was raw data pasted in from the clipboard, SPAWNER means\n// it was copied over from a spawner.\nexport const ObjectContentOrigins = {\n  URL: 1,\n  FILE: 2,\n  CLIPBOARD: 3,\n  SPAWNER: 4\n};\n\n// Enumeration of spawnable object types, used for telemetry, which encapsulates\n// both the origin of the content for the object and also the type of content\n// contained in the object.\nexport const ObjectTypes = {\n  URL_IMAGE: 0,\n  URL_VIDEO: 1,\n  URL_MODEL: 2,\n  URL_PDF: 3,\n  URL_AUDIO: 4,\n  //URL_TEXT: 5,\n  //URL_TELEPORTER: 6,\n  FILE_IMAGE: 8,\n  FILE_VIDEO: 9,\n  FILE_MODEL: 10,\n  FILE_PDF: 11,\n  FILE_AUDIO: 12,\n  //FILE_TEXT: 13,\n  CLIPBOARD_IMAGE: 16,\n  CLIPBOARD_VIDEO: 17,\n  CLIPBOARD_MODEL: 18,\n  CLIPBOARD_PDF: 19,\n  CLIPBOARD_AUDIO: 20,\n  //CLIPBOARD_TEXT: 21,\n  SPAWNER_IMAGE: 24,\n  SPAWNER_VIDEO: 25,\n  SPAWNER_MODEL: 26,\n  SPAWNER_PDF: 27,\n  SPAWNER_AUDIO: 28,\n  //SPAWNER_TEXT: 29,\n  CAMERA: 30,\n  UNKNOWN: 31\n};\n\n// Given an origin and three object type values for URL, FILE, and CLIPBOARD\n// origins respectively, return the appropriate one\nfunction objectTypeForOrigin(contentOrigin, urlType, fileType, clipboardType, spawnerType) {\n  if (contentOrigin === ObjectContentOrigins.URL) {\n    return urlType;\n  } else if (contentOrigin === ObjectContentOrigins.FILE) {\n    return fileType;\n  } else if (contentOrigin === ObjectContentOrigins.CLIPBOARD) {\n    return clipboardType;\n  } else {\n    return spawnerType;\n  }\n}\n\n// Lookup table of mime-type prefixes to the set of object types that we should use\n// for objects spawned matching their underlying Content-Type.\nconst objectTypeMimePrefixLookupMap = {\n  \"image/\": [ObjectTypes.URL_IMAGE, ObjectTypes.FILE_IMAGE, ObjectTypes.CLIPBOARD_IMAGE, ObjectTypes.SPAWNER_IMAGE],\n  \"model/\": [ObjectTypes.URL_MODEL, ObjectTypes.FILE_MODEL, ObjectTypes.CLIPBOARD_MODEL, ObjectTypes.SPAWNER_MODEL],\n  \"application/x-zip-compressed\": [\n    ObjectTypes.URL_MODEL,\n    ObjectTypes.FILE_MODEL,\n    ObjectTypes.CLIPBOARD_MODEL,\n    ObjectTypes.SPAWNER_MODEL\n  ],\n  \"video/\": [ObjectTypes.URL_VIDEO, ObjectTypes.FILE_VIDEO, ObjectTypes.CLIPBOARD_VIDEO, ObjectTypes.SPAWNER_VIDEO],\n  \"application/vnd.apple.mpegurl\": [\n    ObjectTypes.URL_VIDEO,\n    ObjectTypes.FILE_VIDEO,\n    ObjectTypes.CLIPBOARD_VIDEO,\n    ObjectTypes.SPAWNER_VIDEO\n  ],\n  \"application/x-mpegurl\": [\n    ObjectTypes.URL_VIDEO,\n    ObjectTypes.FILE_VIDEO,\n    ObjectTypes.CLIPBOARD_VIDEO,\n    ObjectTypes.SPAWNER_VIDEO\n  ],\n  \"audio/\": [ObjectTypes.URL_AUDIO, ObjectTypes.FILE_AUDIO, ObjectTypes.CLIPBOARD_AUDIO, ObjectTypes.SPAWNER_AUDIO],\n  \"application/pdf\": [ObjectTypes.URL_PDF, ObjectTypes.FILE_PDF, ObjectTypes.CLIPBOARD_PDF, ObjectTypes.SPAWNER_PDF]\n};\n\nconst srcSuffixLookupMap = {\n  \".m3u8\": [ObjectTypes.URL_VIDEO, ObjectTypes.FILE_VIDEO, ObjectTypes.CLIPBOARD_VIDEO, ObjectTypes.SPAWNER_VIDEO]\n};\n\n// Given an content origin and the resolved mime type of a piece of content, return\n// the ObjectType, if any, for that content.\nexport function objectTypeForOriginAndContentType(contentOrigin, contentType, src) {\n  for (const prefix in objectTypeMimePrefixLookupMap) {\n    if (contentType.toLowerCase().startsWith(prefix)) {\n      const types = objectTypeMimePrefixLookupMap[prefix];\n      return objectTypeForOrigin(contentOrigin, ...types);\n    }\n  }\n\n  if (src) {\n    for (const suffix in srcSuffixLookupMap) {\n      if (src.toLowerCase().endsWith(suffix)) {\n        const types = srcSuffixLookupMap[suffix];\n        return objectTypeForOrigin(contentOrigin, ...types);\n      }\n    }\n  }\n\n  return ObjectTypes.UNKNOWN;\n}\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"panel\":\"_2d-hud__panel__2oM_T\",\"tip-cancel-text\":\"_2d-hud__tip-cancel-text__12KQ2\",\"tipCancelText\":\"_2d-hud__tip-cancel-text__12KQ2\",\"top-tip\":\"_2d-hud__top-tip__E5uti\",\"topTip\":\"_2d-hud__top-tip__E5uti\",\"container\":\"_2d-hud__container__66GRt\",\"top\":\"_2d-hud__top__3PiNe\",\"column\":\"_2d-hud__column__1y7XY\",\"bottom\":\"_2d-hud__bottom__2jUcT\",\"hide\":\"_2d-hud__hide__3HJO8\",\"attach-point\":\"_2d-hud__attach-point__17FSc\",\"attachPoint\":\"_2d-hud__attach-point__17FSc\",\"attach_video_share_mode\":\"_2d-hud__attach_video_share_mode__21PhM\",\"attachVideoShareMode\":\"_2d-hud__attach_video_share_mode__21PhM\",\"attach_video_share_failed\":\"_2d-hud__attach_video_share_failed__2tfqf\",\"attachVideoShareFailed\":\"_2d-hud__attach_video_share_failed__2tfqf\",\"attach_pen_mode\":\"_2d-hud__attach_pen_mode__cI1AW\",\"attachPenMode\":\"_2d-hud__attach_pen_mode__cI1AW\",\"attach_mute_mode\":\"_2d-hud__attach_mute_mode__153iB\",\"attachMuteMode\":\"_2d-hud__attach_mute_mode__153iB\",\"attach_freeze_mode\":\"_2d-hud__attach_freeze_mode__3UIHP\",\"attachFreezeMode\":\"_2d-hud__attach_freeze_mode__3UIHP\",\"top-tip-no-hud\":\"_2d-hud__top-tip-no-hud__16RXh\",\"topTipNoHud\":\"_2d-hud__top-tip-no-hud__16RXh\",\"tip-cancel\":\"_2d-hud__tip-cancel__JaFV-\",\"tipCancel\":\"_2d-hud__tip-cancel__JaFV-\",\"video-share-extra-options\":\"_2d-hud__video-share-extra-options__31VMr\",\"videoShareExtraOptions\":\"_2d-hud__video-share-extra-options__31VMr\",\"iconButton\":\"_2d-hud__iconButton__3faJz\",\"up\":\"_2d-hud__up__1lyhr\",\"iconButtonIcon\":\"_2d-hud__iconButtonIcon__3uFYG\",\"spawn\":\"_2d-hud__spawn__1FoBz\",\"small\":\"_2d-hud__small__2rqgF\",\"large\":\"_2d-hud__large__2bHqH\",\"disabled\":\"_2d-hud__disabled__3ylbZ\",\"video-share\":\"_2d-hud__video-share__38X7W\",\"videoShare\":\"_2d-hud__video-share__38X7W\"};","import screenfull from \"screenfull\";\nimport { showFullScreenIfWasFullScreen } from \"./fullscreen\";\nconst { detect } = require(\"detect-browser\");\n\nconst browser = detect();\nlet isExitingFullscreenDueToFocus = false;\n\n// Utility function that handles a bunch of incidental stuff related to text fields:\n//\n// - On non-mobile platforms, selects the value on focus\n// - If full screen, exits/enters full screen because of firefox full screen issues\nexport function handleTextFieldFocus(target) {\n  if (!window.AFRAME) return;\n  const isMobile = AFRAME.utils.device.isMobile();\n\n  if (screenfull.isFullscreen && !AFRAME.utils.device.isMobileVR() && browser.name === \"firefox\") {\n    // This will prevent focus, but its the only way to avoid getting into a\n    // weird \"firefox reports full screen but actually not\". You end up having to tap\n    // twice to ultimately get the focus.\n    //\n    // We need to keep track of a bit here so that we don't re-full screen when\n    // the text box is blurred by the browser.\n\n    isExitingFullscreenDueToFocus = true;\n    screenfull.exit().then(() => {\n      target.focus();\n    });\n  }\n\n  if (!isMobile) target.select();\n}\n\nexport function handleTextFieldBlur() {\n  // This is the incidental blur event when exiting fullscreen mode on mobile\n  if (isExitingFullscreenDueToFocus) {\n    isExitingFullscreenDueToFocus = false;\n    return;\n  }\n\n  showFullScreenIfWasFullScreen();\n}\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"max-resolution-preference-item\":\"preferences-screen__max-resolution-preference-item__1lqd7\",\"maxResolutionPreferenceItem\":\"preferences-screen__max-resolution-preference-item__1lqd7\",\"number-with-range\":\"preferences-screen__number-with-range__35LSW\",\"numberWithRange\":\"preferences-screen__number-with-range__35LSW\",\"number-in-number-with-range\":\"preferences-screen__number-in-number-with-range__2KQrK\",\"numberInNumberWithRange\":\"preferences-screen__number-in-number-with-range__2KQrK\",\"preference-list-item\":\"preferences-screen__preference-list-item__29ZAe\",\"preferenceListItem\":\"preferences-screen__preference-list-item__29ZAe\",\"dropdown\":\"preferences-screen__dropdown__Yvmf_\",\"content-container\":\"preferences-screen__content-container__3VLFw\",\"contentContainer\":\"preferences-screen__content-container__3VLFw\",\"panel-margin\":\"preferences-screen__panel-margin__Srca-\",\"panelMargin\":\"preferences-screen__panel-margin__Srca-\",\"close-button\":\"preferences-screen__close-button__2zMLp\",\"closeButton\":\"preferences-screen__close-button__2zMLp\",\"dropdownArrow\":\"preferences-screen__dropdownArrow__2TIdk\",\"preference-list-non-checkbox\":\"preferences-screen__preference-list-non-checkbox__MR159\",\"preferenceListNonCheckbox\":\"preferences-screen__preference-list-non-checkbox__MR159\",\"part\":\"preferences-screen__part__2Ranp\",\"checkbox-margin\":\"preferences-screen__checkbox-margin__1PeGJ\",\"checkboxMargin\":\"preferences-screen__checkbox-margin__1PeGJ\",\"left\":\"preferences-screen__left__3gJX_\",\"right\":\"preferences-screen__right__3_kjy\",\"preferences-panel\":\"preferences-screen__preferences-panel__1WQqG\",\"preferencesPanel\":\"preferences-screen__preferences-panel__1WQqG\",\"scrolling-content\":\"preferences-screen__scrolling-content__3eE_K\",\"scrollingContent\":\"preferences-screen__scrolling-content__3eE_K\",\"section-bar\":\"preferences-screen__section-bar__3i097\",\"sectionBar\":\"preferences-screen__section-bar__3i097\",\"section-title\":\"preferences-screen__section-title__1JGHh\",\"sectionTitle\":\"preferences-screen__section-title__1JGHh\",\"checkbox\":\"preferences-screen__checkbox__1t8BH\",\"row\":\"preferences-screen__row__24y1Q\",\"row-name\":\"preferences-screen__row-name__EAAaz\",\"rowName\":\"preferences-screen__row-name__EAAaz\",\"reset-to-default-button\":\"preferences-screen__reset-to-default-button__1WpmV\",\"resetToDefaultButton\":\"preferences-screen__reset-to-default-button__1WpmV\",\"prev-option-scale\":\"preferences-screen__prev-option-scale__1UBJy\",\"prevOptionScale\":\"preferences-screen__prev-option-scale__1UBJy\",\"next-option-scale\":\"preferences-screen__next-option-scale__1WFTK\",\"nextOptionScale\":\"preferences-screen__next-option-scale__1WFTK\",\"prev-option-hovered-scale\":\"preferences-screen__prev-option-hovered-scale__3qfSH\",\"prevOptionHoveredScale\":\"preferences-screen__prev-option-hovered-scale__3qfSH\",\"next-option-hovered-scale\":\"preferences-screen__next-option-hovered-scale__3VyMZ\",\"nextOptionHoveredScale\":\"preferences-screen__next-option-hovered-scale__3VyMZ\",\"range-slider\":\"preferences-screen__range-slider__2JBPc\",\"rangeSlider\":\"preferences-screen__range-slider__2JBPc\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"invite-container\":\"invite-dialog__invite-container__1c0Jw\",\"inviteContainer\":\"invite-dialog__invite-container__1c0Jw\",\"dialog\":\"invite-dialog__dialog__1XbxO\",\"link-button\":\"invite-dialog__link-button__S_o-t\",\"linkButton\":\"invite-dialog__link-button__S_o-t\",\"enter-vr-button\":\"invite-dialog__enter-vr-button__3y1BF\",\"enterVrButton\":\"invite-dialog__enter-vr-button__3y1BF\",\"invite-button\":\"invite-dialog__invite-button__3cjFw\",\"inviteButton\":\"invite-dialog__invite-button__3cjFw\",\"enter-button\":\"invite-dialog__enter-button__2Z5EY\",\"enterButton\":\"invite-dialog__enter-button__2Z5EY\",\"invite-mini-button\":\"invite-dialog__invite-mini-button__2zWJj\",\"inviteMiniButton\":\"invite-dialog__invite-mini-button__2zWJj\",\"domain\":\"invite-dialog__domain__2Q8Wr\",\"embed-text\":\"invite-dialog__embed-text__3-Boo\",\"embedText\":\"invite-dialog__embed-text__3-Boo\",\"invite-container-inverted\":\"invite-dialog__invite-container-inverted__1E3hR\",\"inviteContainerInverted\":\"invite-dialog__invite-container-inverted__1E3hR\",\"subscribe\":\"invite-dialog__subscribe__qlJL4\",\"embed-tip-wrap\":\"invite-dialog__embed-tip-wrap__2CQRc\",\"embedTipWrap\":\"invite-dialog__embed-tip-wrap__2CQRc\",\"embed-tip\":\"invite-dialog__embed-tip__12p0o\",\"embedTip\":\"invite-dialog__embed-tip__12p0o\",\"modal\":\"invite-dialog__modal__1hbVP\",\"invite-button-lowered\":\"invite-dialog__invite-button-lowered__3lM4N\",\"inviteButtonLowered\":\"invite-dialog__invite-button-lowered__3lM4N\",\"hide-small-screens\":\"invite-dialog__hide-small-screens__3UCeH\",\"hideSmallScreens\":\"invite-dialog__hide-small-screens__3UCeH\",\"link-code\":\"invite-dialog__link-code__k-Fcd\",\"linkCode\":\"invite-dialog__link-code__k-Fcd\",\"code-duration\":\"invite-dialog__code-duration__2E3JG\",\"codeDuration\":\"invite-dialog__code-duration__2E3JG\",\"invite-container-below-hud\":\"invite-dialog__invite-container-below-hud__30RHX\",\"inviteContainerBelowHud\":\"invite-dialog__invite-container-below-hud__30RHX\",\"attach-point\":\"invite-dialog__attach-point__otyII\",\"attachPoint\":\"invite-dialog__attach-point__otyII\",\"code\":\"invite-dialog__code__13AIx\",\"keep-open\":\"invite-dialog__keep-open__229sO\",\"keepOpen\":\"invite-dialog__keep-open__229sO\",\"digit\":\"invite-dialog__digit__2w64P\",\"digit_2\":\"invite-dialog__digit_2__pQCJ3\",\"digit2\":\"invite-dialog__digit_2__pQCJ3\",\"digit_3\":\"invite-dialog__digit_3__1bWtt\",\"digit3\":\"invite-dialog__digit_3__1bWtt\",\"code-loading-panel\":\"invite-dialog__code-loading-panel__1gghm\",\"codeLoadingPanel\":\"invite-dialog__code-loading-panel__1gghm\",\"hub-link-link\":\"invite-dialog__hub-link-link__2guVF\",\"hubLinkLink\":\"invite-dialog__hub-link-link__2guVF\",\"buttons\":\"invite-dialog__buttons__1yN_j\",\"embed\":\"invite-dialog__embed__2zy_A\",\"close\":\"invite-dialog__close__3PAxl\",\"embed-tip-attach-point\":\"invite-dialog__embed-tip-attach-point__2UAZp\",\"embedTipAttachPoint\":\"invite-dialog__embed-tip-attach-point__2UAZp\"};","import { fetchReticulumAuthenticated } from \"./phoenix-utils\";\nimport { proxiedUrlFor } from \"./media-url-utils\";\n\nconst AVATARS_API = \"/api/v1/avatars\";\n\nexport const AVATAR_TYPES = {\n  SKINNABLE: \"skinnable\",\n  URL: \"url\"\n};\n\nexport function getAvatarType(avatarId) {\n  if (avatarId.startsWith(\"http\")) return AVATAR_TYPES.URL;\n  return AVATAR_TYPES.SKINNABLE;\n}\n\nasync function fetchSkinnableAvatar(avatarId) {\n  const resp = await fetchReticulumAuthenticated(`/api/v1/avatars/${avatarId}`);\n  return resp && resp.avatars && resp.avatars[0];\n}\n\nexport async function fetchAvatar(avatarId) {\n  switch (getAvatarType(avatarId)) {\n    case AVATAR_TYPES.SKINNABLE:\n      return fetchSkinnableAvatar(avatarId);\n    case AVATAR_TYPES.URL:\n      return {\n        avatar_id: avatarId,\n        gltf_url: proxiedUrlFor(avatarId)\n      };\n  }\n}\n\nasync function fetchAvatarGltfUrl(avatarId) {\n  return fetchAvatar(avatarId).then(avatar => avatar && avatar.gltf_url);\n}\n\nexport function getAvatarSrc(avatarId) {\n  switch (getAvatarType(avatarId)) {\n    case AVATAR_TYPES.SKINNABLE:\n      return fetchAvatarGltfUrl(avatarId);\n    case AVATAR_TYPES.URL:\n      return proxiedUrlFor(avatarId);\n    default:\n      return avatarId;\n  }\n}\n\nexport async function getAvatarThumbnailUrl(avatarId) {\n  switch (getAvatarType(avatarId)) {\n    case AVATAR_TYPES.SKINNABLE:\n      return fetchAvatar(avatarId).then(avatar => avatar.files.thumbnail);\n    default:\n      return \"https://asset-bundles-prod.reticulum.io/bots/avatar_unavailable.png\";\n  }\n}\n\n// Currently the way we do material overrides is with a special named material.\n// We want to migrate eventually to having a GLTF extension that specifies what\n// materials can be overridden, but in the meantime we want to be able to support\n// arbitrary models with some sort of functionality. This provides a fallback\nexport const MAT_NAME = \"Bot_PBS\";\nexport function ensureAvatarMaterial(gltf) {\n  if (gltf.materials.find(m => m.name === MAT_NAME)) return gltf;\n\n  function materialForMesh(mesh) {\n    if (!mesh.primitives) return;\n    const primitive = mesh.primitives.find(p => p.material !== undefined);\n    return primitive && gltf.materials[primitive.material];\n  }\n\n  let nodes = gltf.scenes[gltf.scene].nodes.slice(0);\n  while (nodes.length) {\n    const node = gltf.nodes[nodes.shift()];\n    const material = node.mesh !== undefined && materialForMesh(gltf.meshes[node.mesh]);\n    if (material) {\n      material.name = MAT_NAME;\n      break;\n    }\n    if (node.children) nodes = nodes.concat(node.children);\n  }\n\n  return gltf;\n}\n\nexport async function remixAvatar(parentId, name) {\n  const avatar = {\n    parent_avatar_listing_id: parentId,\n    name: name,\n    files: {}\n  };\n\n  return fetchReticulumAuthenticated(AVATARS_API, \"POST\", { avatar });\n}\n","import { waitForDOMContentLoaded } from \"../utils/async-utils\";\nimport { childMatch, setMatrixWorld, calculateViewingDistance } from \"../utils/three-utils\";\nimport { paths } from \"./userinput/paths\";\nimport { getBox } from \"../utils/auto-box-collider\";\nimport qsTruthy from \"../utils/qs_truthy\";\nconst enableThirdPersonMode = qsTruthy(\"thirdPerson\");\n\nexport function getInspectable(child) {\n  let el = child;\n  while (el) {\n    if (el.components && el.components.tags && el.components.tags.data.inspectable) return el;\n    el = el.parentNode;\n  }\n  return null;\n}\n\nconst decompose = (function() {\n  const scale = new THREE.Vector3();\n  return function decompose(m, p, q) {\n    m.decompose(p, q, scale); //ignore scale, like we're dealing with a motor\n  };\n})();\n\nconst IDENTITY = new THREE.Matrix4().identity();\nconst orbit = (function() {\n  const owq = new THREE.Quaternion();\n  const owp = new THREE.Vector3();\n  const cwq = new THREE.Quaternion();\n  const cwp = new THREE.Vector3();\n  const rwq = new THREE.Quaternion();\n  const UP = new THREE.Vector3();\n  const RIGHT = new THREE.Vector3();\n  const target = new THREE.Object3D();\n  const dhQ = new THREE.Quaternion();\n  const dvQ = new THREE.Quaternion();\n  return function orbit(object, rig, camera, dh, dv, dz, dt, panY) {\n    if (!target.parent) {\n      // add dummy object to the scene, if this is the first time we call this function\n      AFRAME.scenes[0].object3D.add(target);\n      target.applyMatrix(IDENTITY); // make sure target gets updated at least once for our matrix optimizations\n    }\n    object.updateMatrices();\n    decompose(object.matrixWorld, owp, owq);\n    decompose(camera.matrixWorld, cwp, cwq);\n    rig.getWorldQuaternion(rwq);\n\n    dhQ.setFromAxisAngle(UP.set(0, 1, 0).applyQuaternion(owq), 0.1 * dh * dt);\n    target.quaternion.copy(cwq).premultiply(dhQ);\n    const dPos = new THREE.Vector3().subVectors(cwp, owp);\n    const zoom = 1 - dz * dt;\n    const newLength = dPos.length() * zoom;\n    // TODO: These limits should be calculated based on the calculated view distance.\n    if (newLength > 0.1 && newLength < 100) {\n      dPos.multiplyScalar(zoom);\n    }\n\n    dvQ.setFromAxisAngle(RIGHT.set(1, 0, 0).applyQuaternion(target.quaternion), 0.1 * dv * dt);\n    target.quaternion.premultiply(dvQ);\n    target.position.addVectors(owp, dPos.applyQuaternion(dhQ).applyQuaternion(dvQ)).add(\n      UP.set(0, 1, 0)\n        .multiplyScalar(panY * newLength)\n        .applyQuaternion(target.quaternion)\n    );\n    target.matrixNeedsUpdate = true;\n    target.updateMatrices();\n    childMatch(rig, camera, target.matrixWorld);\n  };\n})();\n\nconst moveRigSoCameraLooksAtObject = (function() {\n  const owq = new THREE.Quaternion();\n  const owp = new THREE.Vector3();\n  const cwq = new THREE.Quaternion();\n  const cwp = new THREE.Vector3();\n  const oForw = new THREE.Vector3();\n  const center = new THREE.Vector3();\n  const target = new THREE.Object3D();\n  return function moveRigSoCameraLooksAtObject(rig, camera, object, distanceMod) {\n    if (!target.parent) {\n      // add dummy object to the scene, if this is the first time we call this function\n      AFRAME.scenes[0].object3D.add(target);\n      target.applyMatrix(IDENTITY); // make sure target gets updated at least once for our matrix optimizations\n    }\n\n    object.updateMatrices();\n    decompose(object.matrixWorld, owp, owq);\n    decompose(camera.matrixWorld, cwp, cwq);\n    rig.getWorldQuaternion(cwq);\n\n    const box = getBox(object.el, object.el.getObject3D(\"mesh\") || object, true);\n    box.getCenter(center);\n    const vrMode = object.el.sceneEl.is(\"vr-mode\");\n    const dist =\n      calculateViewingDistance(\n        object.el.sceneEl.camera.fov,\n        object.el.sceneEl.camera.aspect,\n        object,\n        box,\n        center,\n        vrMode\n      ) * distanceMod;\n    target.position.addVectors(\n      owp,\n      oForw\n        .set(0, 0, 1)\n        .multiplyScalar(dist)\n        .applyQuaternion(owq)\n    );\n    target.quaternion.copy(owq);\n    target.matrixNeedsUpdate = true;\n    target.updateMatrices();\n    childMatch(rig, camera, target.matrixWorld);\n  };\n})();\n\nexport const CAMERA_MODE_FIRST_PERSON = 0;\nexport const CAMERA_MODE_THIRD_PERSON_NEAR = 1;\nexport const CAMERA_MODE_THIRD_PERSON_FAR = 2;\nexport const CAMERA_MODE_INSPECT = 3;\nexport const CAMERA_MODE_SCENE_PREVIEW = 4;\n\nconst NEXT_MODES = {\n  [CAMERA_MODE_FIRST_PERSON]: CAMERA_MODE_THIRD_PERSON_NEAR,\n  [CAMERA_MODE_THIRD_PERSON_NEAR]: CAMERA_MODE_THIRD_PERSON_FAR,\n  [CAMERA_MODE_THIRD_PERSON_FAR]: CAMERA_MODE_FIRST_PERSON\n};\n\nconst CAMERA_LAYER_INSPECT = 4;\n// This layer is never actually rendered by a camera but lets the batching system know it should be rendered if inspecting\nexport const CAMERA_LAYER_BATCH_INSPECT = 5;\n\nconst ensureLightsAreSeenByCamera = function(o) {\n  if (o.isLight) {\n    o.layers.enable(CAMERA_LAYER_INSPECT);\n  }\n};\nconst enableInspectLayer = function(o) {\n  const batchManagerSystem = AFRAME.scenes[0].systems[\"hubs-systems\"].batchManagerSystem;\n  const batch = batchManagerSystem.batchManager.batchForMesh.get(o);\n  if (batch) {\n    batch.layers.enable(CAMERA_LAYER_INSPECT);\n    o.layers.enable(CAMERA_LAYER_BATCH_INSPECT);\n  } else {\n    o.layers.enable(CAMERA_LAYER_INSPECT);\n  }\n};\nconst disableInspectLayer = function(o) {\n  const batchManagerSystem = AFRAME.scenes[0].systems[\"hubs-systems\"].batchManagerSystem;\n  const batch = batchManagerSystem.batchManager.batchForMesh.get(o);\n  if (batch) {\n    batch.layers.disable(CAMERA_LAYER_INSPECT);\n    o.layers.disable(CAMERA_LAYER_BATCH_INSPECT);\n  } else {\n    o.layers.disable(CAMERA_LAYER_INSPECT);\n  }\n};\n\nfunction getAudio(o) {\n  let audio;\n  o.traverse(c => {\n    if (!audio && c.type === \"Audio\") {\n      audio = c;\n    }\n  });\n  return audio;\n}\n\nconst FALLOFF = 0.9;\nexport class CameraSystem {\n  constructor(batchManagerSystem) {\n    this.enableLights = localStorage.getItem(\"show-background-while-inspecting\") === \"true\";\n    this.verticalDelta = 0;\n    this.horizontalDelta = 0;\n    this.inspectZoom = 0;\n    this.batchManagerSystem = batchManagerSystem;\n    this.mode = CAMERA_MODE_SCENE_PREVIEW;\n    this.snapshot = { audioTransform: new THREE.Matrix4(), matrixWorld: new THREE.Matrix4() };\n    this.audioListenerTargetTransform = new THREE.Matrix4();\n    waitForDOMContentLoaded().then(() => {\n      this.avatarPOV = document.getElementById(\"avatar-pov-node\");\n      this.avatarRig = document.getElementById(\"avatar-rig\");\n      this.viewingCamera = document.getElementById(\"viewing-camera\");\n      this.viewingRig = document.getElementById(\"viewing-rig\");\n\n      const bg = new THREE.Mesh(\n        new THREE.BoxGeometry(100, 100, 100),\n        new THREE.MeshBasicMaterial({ color: 0x020202, side: THREE.BackSide })\n      );\n      bg.layers.set(CAMERA_LAYER_INSPECT);\n      this.viewingRig.object3D.add(bg);\n    });\n  }\n\n  nextMode() {\n    if (this.mode === CAMERA_MODE_INSPECT) {\n      this.uninspect();\n      return;\n    }\n\n    if (!enableThirdPersonMode) return;\n    if (this.mode === CAMERA_MODE_SCENE_PREVIEW) return;\n\n    this.mode = NEXT_MODES[this.mode] || 0;\n    if (this.mode === CAMERA_MODE_FIRST_PERSON) {\n      AFRAME.scenes[0].renderer.vr.setPoseTarget(this.avatarPOV.object3D);\n    } else if (this.mode === CAMERA_MODE_THIRD_PERSON_NEAR || this.mode === CAMERA_MODE_THIRD_PERSON_FAR) {\n      AFRAME.scenes[0].renderer.vr.setPoseTarget(this.viewingCamera.object3D);\n    }\n  }\n\n  inspect(o, distanceMod, temporarilyDisableRegularExit) {\n    this.verticalDelta = 0;\n    this.horizontalDelta = 0;\n    this.inspectZoom = 0;\n    this.temporarilyDisableRegularExit = temporarilyDisableRegularExit; // TODO: Do this at the action set layer\n    if (this.mode === CAMERA_MODE_INSPECT) {\n      return;\n    }\n    const scene = AFRAME.scenes[0];\n    scene.object3D.traverse(ensureLightsAreSeenByCamera);\n    scene.classList.add(\"hand-cursor\");\n    scene.classList.remove(\"no-cursor\");\n    this.snapshot.mode = this.mode;\n    this.mode = CAMERA_MODE_INSPECT;\n    this.inspected = o;\n\n    const vrMode = scene.is(\"vr-mode\");\n    const camera = vrMode ? scene.renderer.vr.getCamera(scene.camera) : scene.camera;\n    this.snapshot.mask = camera.layers.mask;\n    if (vrMode) {\n      this.snapshot.mask0 = camera.cameras[0].layers.mask;\n      this.snapshot.mask1 = camera.cameras[1].layers.mask;\n    }\n    if (!this.enableLights) {\n      this.hideEverythingButThisObject(o);\n    }\n\n    this.viewingCamera.object3D.updateMatrices();\n    this.snapshot.matrixWorld.copy(this.viewingRig.object3D.matrixWorld);\n\n    moveRigSoCameraLooksAtObject(\n      this.viewingRig.object3D,\n      this.viewingCamera.object3D,\n      this.inspected,\n      distanceMod || 1\n    );\n\n    this.snapshot.audio = getAudio(o);\n    if (this.snapshot.audio) {\n      this.snapshot.audio.updateMatrices();\n      this.snapshot.audioTransform.copy(this.snapshot.audio.matrixWorld);\n      scene.audioListener.updateMatrices();\n      this.audioListenerTargetTransform.makeTranslation(0, 0, 1).premultiply(scene.audioListener.matrixWorld);\n      setMatrixWorld(this.snapshot.audio, this.audioListenerTargetTransform);\n    }\n  }\n\n  uninspect() {\n    this.temporarilyDisableRegularExit = false;\n    if (this.mode !== CAMERA_MODE_INSPECT) return;\n    const scene = AFRAME.scenes[0];\n    if (scene.is(\"entered\")) {\n      scene.classList.remove(\"hand-cursor\");\n      scene.classList.add(\"no-cursor\");\n    }\n    this.showEverythingAsNormal();\n    this.inspected = null;\n    if (this.snapshot.audio) {\n      setMatrixWorld(this.snapshot.audio, this.snapshot.audioTransform);\n      this.snapshot.audio = null;\n    }\n\n    this.mode = this.snapshot.mode;\n    if (this.snapshot.mode === CAMERA_MODE_SCENE_PREVIEW) {\n      setMatrixWorld(this.viewingRig.object3D, this.snapshot.matrixWorld);\n    }\n    this.snapshot.mode = null;\n    this.tick(AFRAME.scenes[0]);\n  }\n\n  hideEverythingButThisObject(o) {\n    o.traverse(enableInspectLayer);\n\n    const scene = AFRAME.scenes[0];\n    const vrMode = scene.is(\"vr-mode\");\n    const camera = vrMode ? scene.renderer.vr.getCamera(scene.camera) : scene.camera;\n    camera.layers.set(CAMERA_LAYER_INSPECT);\n    if (vrMode) {\n      camera.cameras[0].layers.set(CAMERA_LAYER_INSPECT);\n      camera.cameras[1].layers.set(CAMERA_LAYER_INSPECT);\n    }\n  }\n\n  showEverythingAsNormal() {\n    if (this.inspected) {\n      this.inspected.traverse(disableInspectLayer);\n    }\n    const scene = AFRAME.scenes[0];\n    const vrMode = scene.is(\"vr-mode\");\n    const camera = vrMode ? scene.renderer.vr.getCamera(scene.camera) : scene.camera;\n    camera.layers.mask = this.snapshot.mask;\n    if (vrMode) {\n      camera.cameras[0].layers.mask = this.snapshot.mask0;\n      camera.cameras[1].layers.mask = this.snapshot.mask1;\n    }\n  }\n\n  tick = (function() {\n    const translation = new THREE.Matrix4();\n    return function tick(scene, dt) {\n      if (!this.enteredScene && scene.is(\"entered\")) {\n        this.enteredScene = true;\n        this.mode = CAMERA_MODE_FIRST_PERSON;\n      }\n      this.avatarPOVRotator = this.avatarPOVRotator || this.avatarPOV.components[\"pitch-yaw-rotator\"];\n      this.viewingCameraRotator = this.viewingCameraRotator || this.viewingCamera.components[\"pitch-yaw-rotator\"];\n      this.avatarPOVRotator.on = true;\n      this.viewingCameraRotator.on = true;\n\n      this.userinput = this.userinput || scene.systems.userinput;\n      this.interaction = this.interaction || scene.systems.interaction;\n\n      if (this.userinput.get(paths.actions.startInspecting) && this.mode !== CAMERA_MODE_INSPECT) {\n        const hoverEl = this.interaction.state.rightRemote.hovered || this.interaction.state.leftRemote.hovered;\n\n        if (hoverEl) {\n          const inspectable = getInspectable(hoverEl);\n\n          if (inspectable) {\n            this.inspect(inspectable.object3D);\n          }\n        }\n      } else if (\n        !this.temporarilyDisableRegularExit &&\n        this.mode === CAMERA_MODE_INSPECT &&\n        this.userinput.get(paths.actions.stopInspecting)\n      ) {\n        scene.emit(\"uninspect\");\n        this.uninspect();\n      }\n\n      if (this.userinput.get(paths.actions.nextCameraMode)) {\n        this.nextMode();\n      }\n\n      const headShouldBeVisible = this.mode !== CAMERA_MODE_FIRST_PERSON;\n      this.playerHead = this.playerHead || document.getElementById(\"avatar-head\");\n      if (this.playerHead && headShouldBeVisible !== this.playerHead.object3D.visible) {\n        this.playerHead.object3D.visible = headShouldBeVisible;\n\n        // Skip a frame so we don't see our own avatar, etc.\n        return;\n      }\n\n      if (this.mode === CAMERA_MODE_FIRST_PERSON) {\n        this.viewingCameraRotator.on = false;\n        this.avatarRig.object3D.updateMatrices();\n        setMatrixWorld(this.viewingRig.object3D, this.avatarRig.object3D.matrixWorld);\n        if (scene.is(\"vr-mode\")) {\n          this.viewingCamera.object3D.updateMatrices();\n          setMatrixWorld(this.avatarPOV.object3D, this.viewingCamera.object3D.matrixWorld);\n        } else {\n          this.avatarPOV.object3D.updateMatrices();\n          setMatrixWorld(this.viewingCamera.object3D, this.avatarPOV.object3D.matrixWorld);\n        }\n      } else if (this.mode === CAMERA_MODE_THIRD_PERSON_NEAR || this.mode === CAMERA_MODE_THIRD_PERSON_FAR) {\n        if (this.mode === CAMERA_MODE_THIRD_PERSON_NEAR) {\n          translation.makeTranslation(0, 1, 3);\n        } else {\n          translation.makeTranslation(0, 2, 8);\n        }\n        this.avatarRig.object3D.updateMatrices();\n        this.viewingRig.object3D.matrixWorld.copy(this.avatarRig.object3D.matrixWorld).multiply(translation);\n        setMatrixWorld(this.viewingRig.object3D, this.viewingRig.object3D.matrixWorld);\n        this.avatarPOV.object3D.quaternion.copy(this.viewingCamera.object3D.quaternion);\n        this.avatarPOV.object3D.matrixNeedsUpdate = true;\n      } else if (this.mode === CAMERA_MODE_INSPECT) {\n        this.avatarPOVRotator.on = false;\n        this.viewingCameraRotator.on = false;\n        const cameraDelta = this.userinput.get(\n          scene.is(\"entered\") ? paths.actions.cameraDelta : paths.actions.lobbyCameraDelta\n        );\n\n        if (cameraDelta) {\n          // TODO: Move device specific tinkering to action sets\n          const horizontalDelta = (AFRAME.utils.device.isMobile() ? -0.6 : 1) * cameraDelta[0] || 0;\n          const verticalDelta = (AFRAME.utils.device.isMobile() ? -1.2 : 1) * cameraDelta[1] || 0;\n          this.horizontalDelta = (this.horizontalDelta + horizontalDelta) / 2;\n          this.verticalDelta = (this.verticalDelta + verticalDelta) / 2;\n        } else if (Math.abs(this.verticalDelta) > 0.0001 || Math.abs(this.horizontalDelta) > 0.0001) {\n          this.verticalDelta = FALLOFF * this.verticalDelta;\n          this.horizontalDelta = FALLOFF * this.horizontalDelta;\n        }\n\n        const inspectZoom = this.userinput.get(paths.actions.inspectZoom) * 0.001;\n        if (inspectZoom) {\n          this.inspectZoom = inspectZoom + (5 * this.inspectZoom) / 6;\n        } else if (Math.abs(this.inspectZoom) > 0.0001) {\n          this.inspectZoom = FALLOFF * this.inspectZoom;\n        }\n        const panY = this.userinput.get(paths.actions.inspectPanY) || 0;\n        if (this.userinput.get(paths.actions.resetInspectView)) {\n          moveRigSoCameraLooksAtObject(this.viewingRig.object3D, this.viewingCamera.object3D, this.inspected, 1);\n        }\n\n        if (\n          Math.abs(this.verticalDelta) > 0.001 ||\n          Math.abs(this.horizontalDelta) > 0.001 ||\n          Math.abs(this.inspectZoom) > 0.001 ||\n          Math.abs(panY) > 0.0001\n        ) {\n          orbit(\n            this.inspected,\n            this.viewingRig.object3D,\n            this.viewingCamera.object3D,\n            this.horizontalDelta,\n            this.verticalDelta,\n            this.inspectZoom,\n            dt,\n            panY\n          );\n        }\n      }\n\n      if (scene.audioListener && this.avatarPOV) {\n        if (\n          (this.mode === CAMERA_MODE_FIRST_PERSON || this.mode === CAMERA_MODE_INSPECT) &&\n          scene.audioListener.parent !== this.avatarPOV.object3D\n        ) {\n          this.avatarPOV.object3D.add(scene.audioListener);\n        } else if (\n          (this.mode === CAMERA_MODE_THIRD_PERSON_NEAR || this.mode === CAMERA_MODE_THIRD_PERSON_FAR) &&\n          scene.audioListener.parent !== this.viewingCamera.object3D\n        ) {\n          this.viewingCamera.object3D.add(scene.audioListener);\n        }\n      }\n    };\n  })();\n}\n","export function forEachMaterial(object3D, fn) {\n  if (!object3D.material) return;\n\n  if (Array.isArray(object3D.material)) {\n    object3D.material.forEach(fn);\n  } else {\n    fn(object3D.material);\n  }\n}\n\nexport function mapMaterials(object3D, fn) {\n  if (!object3D.material) return;\n\n  if (Array.isArray(object3D.material)) {\n    return object3D.material.map(fn);\n  } else {\n    return fn(object3D.material);\n  }\n}\n","import { fetchReticulumAuthenticated } from \"./phoenix-utils\";\nimport ducky from \"../assets/models/DuckyMesh.glb\";\n\nconst names = [\n  \"Baers-Pochard\",\n  \"Baikal-Teal\",\n  \"Barrows-Goldeneye\",\n  \"Blue-Billed\",\n  \"Blue-Duck\",\n  \"Blue-Winged\",\n  \"Brown-Teal\",\n  \"Bufflehead\",\n  \"Canvasback\",\n  \"Cape-Shoveler\",\n  \"Chestnut-Teal\",\n  \"Chiloe-Wigeon\",\n  \"Cinnamon-Teal\",\n  \"Comb-Duck\",\n  \"Common-Eider\",\n  \"Common-Goldeneye\",\n  \"Common-Merganser\",\n  \"Common-Pochard\",\n  \"Common-Scoter\",\n  \"Common-Shelduck\",\n  \"Cotton-Pygmy\",\n  \"Crested-Duck\",\n  \"Crested-Shelduck\",\n  \"Eatons-Pintail\",\n  \"Falcated\",\n  \"Ferruginous\",\n  \"Freckled-Duck\",\n  \"Gadwall\",\n  \"Garganey\",\n  \"Greater-Scaup\",\n  \"Green-Pygmy\",\n  \"Grey-Teal\",\n  \"Hardhead\",\n  \"Harlequin\",\n  \"Hartlaubs\",\n  \"Hooded-Merganser\",\n  \"Hottentot-Teal\",\n  \"Kelp-Goose\",\n  \"King-Eider\",\n  \"Lake-Duck\",\n  \"Laysan-Duck\",\n  \"Lesser-Scaup\",\n  \"Long-Tailed\",\n  \"Maccoa-Duck\",\n  \"Mallard\",\n  \"Mandarin\",\n  \"Marbled-Teal\",\n  \"Mellers-Duck\",\n  \"Merganser\",\n  \"Northern-Pintail\",\n  \"Orinoco-Goose\",\n  \"Paradise-Shelduck\",\n  \"Plumed-Whistler\",\n  \"Puna-Teal\",\n  \"Pygmy-Goose\",\n  \"Radjah-Shelduck\",\n  \"Red-Billed\",\n  \"Red-Crested\",\n  \"Red-Shoveler\",\n  \"Ring-Necked\",\n  \"Ringed-Teal\",\n  \"Rosy-Billed\",\n  \"Ruddy-Shelduck\",\n  \"Salvadoris-Teal\",\n  \"Scaly-Sided\",\n  \"Shelduck\",\n  \"Shoveler\",\n  \"Silver-Teal\",\n  \"Smew\",\n  \"Spectacled-Eider\",\n  \"Spot-Billed\",\n  \"Spotted-Whistler\",\n  \"Steamerduck\",\n  \"Stellers-Eider\",\n  \"Sunda-Teal\",\n  \"Surf-Scoter\",\n  \"Tufted-Duck\",\n  \"Velvet-Scoter\",\n  \"Wandering-Whistler\",\n  \"Whistling-duck\",\n  \"White-Backed\",\n  \"White-Cheeked\",\n  \"White-Winged\",\n  \"Wigeon\",\n  \"Wood-Duck\",\n  \"Yellow-Billed\"\n];\n\nfunction chooseRandom(arr) {\n  return arr[Math.floor(Math.random() * arr.length)];\n}\n\nexport function generateRandomName() {\n  return `${chooseRandom(names)}-${Math.floor(10000 + Math.random() * 10000)}`;\n}\n\nexport async function fetchRandomDefaultAvatarId() {\n  const defaultAvatarEndpoint = \"/api/v1/media/search?filter=default&source=avatar_listings\";\n  const defaultAvatars = (await fetchReticulumAuthenticated(defaultAvatarEndpoint)).entries;\n  if (defaultAvatars.length === 0) {\n    // If reticulum doesn't return any default avatars, just default to the duck model. This should only happen\n    // when running against a fresh reticulum server, e.g. a local ret instance.\n    return new URL(ducky, location.href).href;\n  }\n  const avatarIds = defaultAvatars.map(avatar => avatar.id);\n  return chooseRandom(avatarIds);\n}\n","import { Validator } from \"jsonschema\";\nimport merge from \"deepmerge\";\nimport Cookies from \"js-cookie\";\nimport jwtDecode from \"jwt-decode\";\n\nconst LOCAL_STORE_KEY = \"___hubs_store\";\nconst STORE_STATE_CACHE_KEY = Symbol();\nconst OAUTH_FLOW_CREDENTIALS_KEY = \"ret-oauth-flow-account-credentials\";\nconst validator = new Validator();\nimport { EventTarget } from \"event-target-shim\";\nimport { fetchRandomDefaultAvatarId, generateRandomName } from \"../utils/identity.js\";\n\n// Durable (via local-storage) schema-enforced state that is meant to be consumed via forward data flow.\n// (Think flux but with way less incidental complexity, at least for now :))\nexport const SCHEMA = {\n  id: \"/HubsStore\",\n\n  definitions: {\n    profile: {\n      type: \"object\",\n      additionalProperties: false,\n      properties: {\n        displayName: { type: \"string\", pattern: \"^[A-Za-z0-9 -]{3,32}$\" },\n        avatarId: { type: \"string\" },\n        // personalAvatarId is obsolete, but we need it here for backwards compatibility.\n        personalAvatarId: { type: \"string\" }\n      }\n    },\n\n    credentials: {\n      type: \"object\",\n      additionalProperties: false,\n      properties: {\n        token: { type: [\"null\", \"string\"] },\n        email: { type: [\"null\", \"string\"] }\n      }\n    },\n\n    activity: {\n      type: \"object\",\n      additionalProperties: false,\n      properties: {\n        hasFoundFreeze: { type: \"boolean\" },\n        hasChangedName: { type: \"boolean\" },\n        hasAcceptedProfile: { type: \"boolean\" },\n        lastEnteredAt: { type: \"string\" },\n        hasPinned: { type: \"boolean\" },\n        hasRotated: { type: \"boolean\" },\n        hasRecentered: { type: \"boolean\" },\n        hasScaled: { type: \"boolean\" },\n        hasHoveredInWorldHud: { type: \"boolean\" },\n        hasOpenedShare: { type: \"boolean\" },\n        entryCount: { type: \"number\" }\n      }\n    },\n\n    settings: {\n      type: \"object\",\n      additionalProperties: false,\n      properties: {\n        lastUsedMicDeviceId: { type: \"string\" }\n      }\n    },\n\n    preferences: {\n      type: \"object\",\n      additionalProperties: false,\n      properties: {\n        muteMicOnEntry: { type: \"bool\" },\n        enableOnScreenJoystickLeft: { type: \"bool\" },\n        enableOnScreenJoystickRight: { type: \"bool\" },\n        onlyShowNametagsInFreeze: { type: \"bool\" },\n        allowMultipleHubsInstances: { type: \"bool\" },\n        maxResolutionWidth: { type: \"number\" },\n        maxResolutionHeight: { type: \"number\" },\n        globalVoiceVolume: { type: \"number\" },\n        globalMediaVolume: { type: \"number\" },\n        snapRotationDegrees: { type: \"number\" },\n        materialQualitySetting: { type: \"string\" },\n        disableMovement: { type: \"bool\" },\n        disableBackwardsMovement: { type: \"bool\" },\n        disableStrafing: { type: \"bool\" },\n        disableTeleporter: { type: \"bool\" }\n      }\n    },\n\n    // Legacy\n    confirmedDiscordRooms: {\n      type: \"array\",\n      items: { type: \"string\" }\n    },\n\n    confirmedBroadcastedRooms: {\n      type: \"array\",\n      items: { type: \"string\" }\n    },\n\n    uploadPromotionTokens: {\n      type: \"array\",\n      items: {\n        type: \"object\",\n        additionalProperties: false,\n        properties: {\n          fileId: { type: \"string\" },\n          promotionToken: { type: \"string\" }\n        }\n      }\n    },\n\n    creatorAssignmentTokens: {\n      type: \"array\",\n      items: {\n        type: \"object\",\n        additionalProperties: false,\n        properties: {\n          hubId: { type: \"string\" },\n          creatorAssignmentToken: { type: \"string\" }\n        }\n      }\n    },\n\n    embedTokens: {\n      type: \"array\",\n      items: {\n        type: \"object\",\n        additionalProperties: false,\n        properties: {\n          hubId: { type: \"string\" },\n          embedToken: { type: \"string\" }\n        }\n      }\n    },\n\n    onLoadActions: {\n      type: \"array\",\n      items: {\n        type: \"object\",\n        additionalProperties: false,\n        properties: {\n          action: { type: \"string\" },\n          args: { type: \"object\" }\n        }\n      }\n    }\n  },\n\n  type: \"object\",\n\n  properties: {\n    profile: { $ref: \"#/definitions/profile\" },\n    credentials: { $ref: \"#/definitions/credentials\" },\n    activity: { $ref: \"#/definitions/activity\" },\n    settings: { $ref: \"#/definitions/settings\" },\n    preferences: { $ref: \"#/definitions/preferences\" },\n    confirmedDiscordRooms: { $ref: \"#/definitions/confirmedDiscordRooms\" }, // Legacy\n    confirmedBroadcastedRooms: { $ref: \"#/definitions/confirmedBroadcastedRooms\" },\n    uploadPromotionTokens: { $ref: \"#/definitions/uploadPromotionTokens\" },\n    creatorAssignmentTokens: { $ref: \"#/definitions/creatorAssignmentTokens\" },\n    embedTokens: { $ref: \"#/definitions/embedTokens\" },\n    onLoadActions: { $ref: \"#/definitions/onLoadActions\" }\n  },\n\n  additionalProperties: false\n};\n\nexport default class Store extends EventTarget {\n  constructor() {\n    super();\n\n    if (localStorage.getItem(LOCAL_STORE_KEY) === null) {\n      localStorage.setItem(LOCAL_STORE_KEY, JSON.stringify({}));\n    }\n\n    // When storage is updated in another window\n    window.addEventListener(\"storage\", e => {\n      if (e.key !== LOCAL_STORE_KEY) return;\n      delete this[STORE_STATE_CACHE_KEY];\n      this.dispatchEvent(new CustomEvent(\"statechanged\"));\n    });\n\n    this.update({\n      activity: {},\n      settings: {},\n      credentials: {},\n      profile: {},\n      confirmedDiscordRooms: [],\n      confirmedBroadcastedRooms: [],\n      uploadPromotionTokens: [],\n      creatorAssignmentTokens: [],\n      embedTokens: [],\n      onLoadActions: [],\n      preferences: {}\n    });\n\n    this._shouldResetAvatarOnInit = false;\n\n    const oauthFlowCredentials = Cookies.getJSON(OAUTH_FLOW_CREDENTIALS_KEY);\n    if (oauthFlowCredentials) {\n      this.update({ credentials: oauthFlowCredentials });\n      this._shouldResetAvatarOnInit = true;\n      Cookies.remove(OAUTH_FLOW_CREDENTIALS_KEY);\n    }\n\n    this._signOutOnExpiredAuthToken();\n  }\n\n  _signOutOnExpiredAuthToken = () => {\n    if (!this.state.credentials.token) return;\n\n    const expiry = jwtDecode(this.state.credentials.token).exp * 1000;\n    if (expiry <= Date.now()) {\n      this.update({ credentials: { token: null, email: null } });\n    }\n  };\n\n  initProfile = async () => {\n    if (this._shouldResetAvatarOnInit) {\n      await this.resetToRandomDefaultAvatar();\n    } else {\n      this.update({\n        profile: { avatarId: await fetchRandomDefaultAvatarId(), ...(this.state.profile || {}) }\n      });\n    }\n\n    // Regenerate name to encourage users to change it.\n    if (!this.state.activity.hasChangedName) {\n      this.update({ profile: { displayName: generateRandomName() } });\n    }\n  };\n\n  resetToRandomDefaultAvatar = async () => {\n    this.update({\n      profile: { ...(this.state.profile || {}), avatarId: await fetchRandomDefaultAvatarId() }\n    });\n  };\n\n  get state() {\n    if (!this.hasOwnProperty(STORE_STATE_CACHE_KEY)) {\n      this[STORE_STATE_CACHE_KEY] = JSON.parse(localStorage.getItem(LOCAL_STORE_KEY));\n    }\n\n    return this[STORE_STATE_CACHE_KEY];\n  }\n\n  get credentialsAccountId() {\n    if (this.state.credentials.token) {\n      return jwtDecode(this.state.credentials.token).sub;\n    } else {\n      return null;\n    }\n  }\n\n  resetConfirmedBroadcastedRooms() {\n    this.clearStoredArray(\"confirmedBroadcastedRooms\");\n  }\n\n  resetTipActivityFlags() {\n    this.update({\n      activity: { hasRotated: false, hasPinned: false, hasRecentered: false, hasScaled: false, entryCount: 0 }\n    });\n  }\n\n  bumpEntryCount() {\n    const currentEntryCount = this.state.activity.entryCount || 0;\n    this.update({ activity: { entryCount: currentEntryCount + 1 } });\n  }\n\n  // Sets a one-time action to perform the next time the page loads\n  enqueueOnLoadAction(action, args) {\n    this.update({ onLoadActions: [{ action, args }] });\n  }\n\n  executeOnLoadActions(sceneEl) {\n    for (let i = 0; i < this.state.onLoadActions.length; i++) {\n      const { action, args } = this.state.onLoadActions[i];\n\n      if (action === \"emit_scene_event\") {\n        sceneEl.emit(args.event, args.detail);\n      }\n    }\n\n    this.clearOnLoadActions();\n  }\n\n  clearOnLoadActions() {\n    this.clearStoredArray(\"onLoadActions\");\n  }\n\n  clearStoredArray(key) {\n    const overwriteMerge = (destinationArray, sourceArray) => sourceArray;\n    const update = {};\n    update[key] = [];\n\n    this.update(update, { arrayMerge: overwriteMerge });\n  }\n\n  update(newState, mergeOpts) {\n    const finalState = merge(this.state, newState, mergeOpts);\n    const { valid } = validator.validate(finalState, SCHEMA);\n\n    if (!valid) {\n      // Intentionally not including details about the state or validation result here, since we don't want to leak\n      // sensitive data in the error message.\n      throw new Error(`Write to store failed schema validation.`);\n    }\n\n    localStorage.setItem(LOCAL_STORE_KEY, JSON.stringify(finalState));\n    delete this[STORE_STATE_CACHE_KEY];\n\n    if (newState.profile !== undefined) {\n      this.dispatchEvent(new CustomEvent(\"profilechanged\"));\n    }\n    this.dispatchEvent(new CustomEvent(\"statechanged\"));\n\n    return finalState;\n  }\n}\n","module.exports = __webpack_public_path__ + \"assets/images/app-logo-157c06cff6c80227eb577f35c79e58b6.png\";","module.exports = __webpack_public_path__ + \"assets/images/company-logo-8f6f7c3b303004256295b45c2eee5117.png\";","module.exports = __webpack_public_path__ + \"assets/images/editor-logo-6f885a1543496ebc23a21b7fea82b255.png\";","// Brief overview of client authorization can be found in the wiki:\n// https://github.com/mozilla/hubs/wiki/Hubs-authorization\nexport function showHoverEffect(el) {\n  const isFrozen = el.sceneEl.is(\"frozen\");\n  const isPinned = el.components.pinnable && el.components.pinnable.data.pinned;\n  const isSpawner = !!el.components[\"super-spawner\"];\n  const canMove =\n    window.APP.hubChannel.can(\"spawn_and_move_media\") && (!isPinned || window.APP.hubChannel.can(\"pin_objects\"));\n  return (isSpawner || !isPinned || isFrozen) && canMove;\n}\n\nexport function canMove(entity) {\n  const isPinned = entity.components.pinnable && entity.components.pinnable.data.pinned;\n  const networkedTemplate = entity && entity.components.networked && entity.components.networked.data.template;\n  const isCamera = networkedTemplate === \"#interactable-camera\";\n  const isPen = networkedTemplate === \"#interactable-pen\";\n  const isHoldableButton = entity.components.tags && entity.components.tags.data.holdableButton;\n  return (\n    isHoldableButton ||\n    (window.APP.hubChannel.can(\"spawn_and_move_media\") &&\n      (!isPinned || window.APP.hubChannel.can(\"pin_objects\")) &&\n      (!isCamera || window.APP.hubChannel.can(\"spawn_camera\")) &&\n      (!isPen || window.APP.hubChannel.can(\"spawn_drawing\")))\n  );\n}\n\nfunction indexForComponent(component, schema) {\n  const fullComponent = typeof component === \"string\";\n  const componentName = fullComponent ? component : component.component;\n\n  if (fullComponent) {\n    return schema.components.findIndex(schemaComponent => schemaComponent === componentName);\n  } else {\n    return schema.components.findIndex(\n      schemaComponent => schemaComponent.component === componentName && schemaComponent.property === component.property\n    );\n  }\n}\n\nlet nonAuthorizedSchemas = null;\nfunction initializeNonAuthorizedSchemas() {\n  /*\n  Takes the NAF schemas defined in network-schemas.js and produces a data structure of template name to non-authorized\n  component indices:\n  {\n    \"#interactable-media\": [\"4\", \"5\", \"6\"]\n  }\n  */\n  nonAuthorizedSchemas = {};\n  const { schemaDict } = NAF.schemas;\n  for (const template in schemaDict) {\n    if (!schemaDict.hasOwnProperty(template)) continue;\n    const schema = schemaDict[template];\n    nonAuthorizedSchemas[template] = (schema.nonAuthorizedComponents || [])\n      .map(nonAuthorizedComponent => indexForComponent(nonAuthorizedComponent, schema))\n      .map(index => index.toString());\n  }\n}\n\nfunction sanitizeMessageData(template, data) {\n  if (nonAuthorizedSchemas === null) {\n    initializeNonAuthorizedSchemas();\n  }\n  const nonAuthorizedIndices = nonAuthorizedSchemas[template];\n  for (const index in data.components) {\n    if (!data.components.hasOwnProperty(index)) continue;\n    if (!nonAuthorizedIndices.includes(index)) {\n      data.components[index] = null;\n    }\n  }\n  return data;\n}\n\nfunction authorizeEntityManipulation(entityMetadata, sender, senderPermissions) {\n  const { template, creator, isPinned } = entityMetadata;\n  const isCreator = sender === creator;\n\n  if (template.endsWith(\"-waypoint-avatar\")) {\n    return true;\n  } else if (template.endsWith(\"-avatar\")) {\n    return isCreator;\n  } else if (template.endsWith(\"-media\")) {\n    return (!isPinned || senderPermissions.pin_objects) && (isCreator || senderPermissions.spawn_and_move_media);\n  } else if (template.endsWith(\"-camera\")) {\n    return isCreator || senderPermissions.spawn_camera;\n  } else if (template.endsWith(\"-pen\") || template.endsWith(\"-drawing\")) {\n    return isCreator || senderPermissions.spawn_drawing;\n  } else {\n    return false;\n  }\n}\n\nfunction getPendingOrExistingEntityMetadata(networkId) {\n  const pendingData = NAF.connection.adapter.getPendingDataForNetworkId(networkId);\n\n  if (pendingData) {\n    const { template, creator } = pendingData;\n    const schema = NAF.schemas.schemaDict[template];\n    const pinnableComponent = pendingData.components[indexForComponent(\"pinnable\", schema)];\n    const isPinned = pinnableComponent && pinnableComponent.pinned;\n    return { template, creator, isPinned };\n  }\n\n  const entity = NAF.entities.getEntity(networkId);\n  if (!entity) return null;\n\n  const { template, creator } = entity.components.networked.data;\n  const isPinned = entity.components.pinnable && entity.components.pinnable.data.pinned;\n  return { template, creator, isPinned };\n}\n\nfunction authorizeOrSanitizeMessageData(data, sender, senderPermissions) {\n  const entityMetadata = getPendingOrExistingEntityMetadata(data.networkId);\n  if (!entityMetadata) return false;\n\n  if (authorizeEntityManipulation(entityMetadata, sender, senderPermissions)) {\n    return true;\n  } else {\n    const { template } = entityMetadata;\n    sanitizeMessageData(template, data);\n    return true;\n  }\n}\n\n// If we receive a sync from a persistent object that we don't have an entity for yet, it must be a scene-owned object\n// (since we guarantee that pinned objects are loaded before connecting NAF).\n// Since we need to get metadata (the template id in particular) from the entity, we must stash these messages until\n// the scene has loaded.\n// Components which require this data must call applyPersistentSync after they are initialized\nconst persistentSyncs = {};\nfunction stashPersistentSync(message, entityData) {\n  if (!persistentSyncs[entityData.networkId]) {\n    persistentSyncs[entityData.networkId] = {\n      dataType: \"u\",\n      data: entityData,\n      clientId: message.clientId,\n      from_session_id: message.from_session_id\n    };\n  } else {\n    const currentData = persistentSyncs[entityData.networkId].data;\n    const currentComponents = currentData.components;\n    Object.assign(currentData, entityData);\n    currentData.components = Object.assign(currentComponents, entityData.components);\n  }\n}\n\nconst emptyObject = {};\nexport function authorizeOrSanitizeMessage(message) {\n  const { dataType, from_session_id } = message;\n\n  if (dataType === \"u\" && message.data.isFirstSync && !message.data.persistent) {\n    // The server has already authorized first sync messages that result in an instantiation.\n    return message;\n  }\n\n  const presenceState = window.APP.hubChannel.presence.state[from_session_id];\n\n  if (!presenceState) {\n    // We've received a manipulation message from a user that we don't have presence state for yet.\n    // Since we can't make a judgement about their permissions, we'll have to ignore the message.\n    return emptyObject;\n  }\n\n  const senderPermissions = presenceState.metas[0].permissions;\n\n  if (dataType === \"um\") {\n    let sanitizedAny = false;\n    let stashedAny = false;\n    for (const index in message.data.d) {\n      if (!message.data.d.hasOwnProperty(index)) continue;\n      const entityData = message.data.d[index];\n      if (entityData.persistent && !NAF.entities.getEntity(entityData.networkId)) {\n        stashPersistentSync(message, entityData);\n        message.data.d[index] = null;\n        stashedAny = true;\n      } else {\n        const authorizedOrSanitized = authorizeOrSanitizeMessageData(entityData, from_session_id, senderPermissions);\n        if (!authorizedOrSanitized) {\n          message.data.d[index] = null;\n          sanitizedAny = true;\n        }\n      }\n    }\n\n    if (sanitizedAny || stashedAny) {\n      message.data.d = message.data.d.filter(x => x != null);\n    }\n\n    return message;\n  } else if (dataType === \"u\") {\n    if (message.data.persistent && !NAF.entities.getEntity(message.data.networkId)) {\n      persistentSyncs[message.data.networkId] = message;\n      return emptyObject;\n    } else {\n      const authorizedOrSanitized = authorizeOrSanitizeMessageData(message.data, from_session_id, senderPermissions);\n      if (authorizedOrSanitized) {\n        return message;\n      } else {\n        return emptyObject;\n      }\n    }\n  } else if (dataType === \"r\") {\n    const entityMetadata = getPendingOrExistingEntityMetadata(message.data.networkId);\n    if (!entityMetadata) return emptyObject;\n    if (authorizeEntityManipulation(entityMetadata, from_session_id, senderPermissions)) {\n      return message;\n    } else {\n      return emptyObject;\n    }\n  } else {\n    // Fall through for other data types. Namely, \"drawing-<networkId>\" messages at the moment.\n    return message;\n  }\n}\n\nconst PHOENIX_RELIABLE_NAF = \"phx-reliable\";\nexport function applyPersistentSync(networkId) {\n  if (!persistentSyncs[networkId]) return;\n  NAF.connection.adapter.onData(authorizeOrSanitizeMessage(persistentSyncs[networkId]), PHOENIX_RELIABLE_NAF);\n  delete persistentSyncs[networkId];\n}\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"navigation-button\":\"client-info-dialog__navigation-button__2WZHM\",\"navigationButton\":\"client-info-dialog__navigation-button__2WZHM\",\"primary-action-buttons\":\"client-info-dialog__primary-action-buttons__3xJ_N\",\"primaryActionButtons\":\"client-info-dialog__primary-action-buttons__3xJ_N\",\"cancel\":\"client-info-dialog__cancel__2BguV\",\"collapse-button\":\"client-info-dialog__collapse-button__1tTD7\",\"collapseButton\":\"client-info-dialog__collapse-button__1tTD7\",\"title-and-close\":\"client-info-dialog__title-and-close__1GbuZ\",\"titleAndClose\":\"client-info-dialog__title-and-close__1GbuZ\",\"object-display-string\":\"client-info-dialog__object-display-string__2wcOD\",\"objectDisplayString\":\"client-info-dialog__object-display-string__2wcOD\",\"cancel-text\":\"client-info-dialog__cancel-text__2mi_O\",\"cancelText\":\"client-info-dialog__cancel-text__2mi_O\",\"client-info-dialog\":\"client-info-dialog__client-info-dialog__2e1dc\",\"clientInfoDialog\":\"client-info-dialog__client-info-dialog__2e1dc\",\"title\":\"client-info-dialog__title__3FGPe\",\"community-identifier\":\"client-info-dialog__community-identifier__g3lbP\",\"communityIdentifier\":\"client-info-dialog__community-identifier__g3lbP\",\"client-info\":\"client-info-dialog__client-info__1MUSa\",\"clientInfo\":\"client-info-dialog__client-info__1MUSa\",\"client-profile-image\":\"client-info-dialog__client-profile-image__zt1EA\",\"clientProfileImage\":\"client-info-dialog__client-profile-image__zt1EA\",\"client-details\":\"client-info-dialog__client-details__1F5zy\",\"clientDetails\":\"client-info-dialog__client-details__1F5zy\",\"client-main\":\"client-info-dialog__client-main__2BC1s\",\"clientMain\":\"client-info-dialog__client-main__2BC1s\",\"action-button-sections\":\"client-info-dialog__action-button-sections__amVnt\",\"actionButtonSections\":\"client-info-dialog__action-button-sections__amVnt\",\"action-button-placeholder\":\"client-info-dialog__action-button-placeholder__3MCZ3\",\"actionButtonPlaceholder\":\"client-info-dialog__action-button-placeholder__3MCZ3\",\"left-action-buttons\":\"client-info-dialog__left-action-buttons__Vul8Q\",\"leftActionButtons\":\"client-info-dialog__left-action-buttons__Vul8Q\",\"right-action-buttons\":\"client-info-dialog__right-action-buttons__231Az\",\"rightActionButtons\":\"client-info-dialog__right-action-buttons__231Az\",\"button-icon\":\"client-info-dialog__button-icon__1vKfx\",\"buttonIcon\":\"client-info-dialog__button-icon__1vKfx\",\"primary-action-button\":\"client-info-dialog__primary-action-button__NecRf\",\"primaryActionButton\":\"client-info-dialog__primary-action-button__NecRf\"};","import Raven from \"raven-js\";\nimport configs from \"./utils/configs\";\n\nconst ga = window.ga;\n\nexport default function registerTelemetry(trackedPage, trackedTitle) {\n  const sentryDsn = configs.SENTRY_DSN;\n  const gaTrackingId = configs.GA_TRACKING_ID;\n\n  if (sentryDsn) {\n    console.log(\"Tracking: Sentry DSN: \" + sentryDsn);\n    Raven.config(sentryDsn).install();\n  }\n\n  if (ga && gaTrackingId) {\n    console.log(\"Tracking: Google Analytics ID: \" + gaTrackingId);\n\n    ga(\"create\", gaTrackingId, \"auto\");\n\n    if (trackedPage) {\n      ga(\"set\", \"page\", trackedPage);\n    }\n\n    if (trackedTitle) {\n      ga(\"set\", \"title\", trackedTitle);\n    }\n\n    ga(\"send\", \"pageview\");\n  }\n}\n","module.exports = __webpack_public_path__ + \"assets/sfx/tick-b0fcbf1d9b6f92a24bec12f9bae1e42a.mp3\";","// extracted by mini-css-extract-plugin\nmodule.exports = {\"client-link\":\"presence-list__client-link__3tkyz\",\"clientLink\":\"presence-list__client-link__3tkyz\",\"presence-list\":\"presence-list__presence-list__1KERe\",\"presenceList\":\"presence-list__presence-list__1KERe\",\"attach-point\":\"presence-list__attach-point__kIdfx\",\"attachPoint\":\"presence-list__attach-point__kIdfx\",\"contents\":\"presence-list__contents__1B7bz\",\"rows\":\"presence-list__rows__1B6KS\",\"row\":\"presence-list__row__1D2j2\",\"row-no-margin\":\"presence-list__row-no-margin__2FoEq\",\"rowNoMargin\":\"presence-list__row-no-margin__2FoEq\",\"row-header\":\"presence-list__row-header__3kl1w\",\"rowHeader\":\"presence-list__row-header__3kl1w\",\"list-item\":\"presence-list__list-item__2YARP\",\"listItem\":\"presence-list__list-item__2YARP\",\"list-item-link\":\"presence-list__list-item-link__2DLC2\",\"listItemLink\":\"presence-list__list-item-link__2DLC2\",\"presence\":\"presence-list__presence__15DJe\",\"sign-in\":\"presence-list__sign-in__28eVu\",\"signIn\":\"presence-list__sign-in__28eVu\",\"icon\":\"presence-list__icon__1t8iB\",\"self\":\"presence-list__self__1g-bw\",\"moderator-badge\":\"presence-list__moderator-badge__2njku\",\"moderatorBadge\":\"presence-list__moderator-badge__2njku\"};","// Computes an AABB that surrounds the object in question and all of its children.\n// Note that if the children have rotations, this probably won't return the tightest\n// possible AABB -- we could return a tighter one if we examined all of the vertices\n// of the geometry for ourselves, but we don't care enough for what we're using this\n// for to do so much work.\nconst computeObjectAABB = (function() {\n  const bounds = new THREE.Box3();\n  return function(root, target) {\n    target.makeEmpty();\n    root.traverse(node => {\n      const geometry = node.geometry;\n      if (geometry != null) {\n        if (geometry.boundingBox == null) {\n          geometry.computeBoundingBox();\n        }\n        target.union(bounds.copy(geometry.boundingBox).applyMatrix4(node.matrixWorld));\n      }\n    });\n    return target;\n  };\n})();\n\nconst rotation = new THREE.Euler();\nexport function getBox(entity, boxRoot, worldSpace) {\n  const box = new THREE.Box3();\n\n  rotation.copy(entity.object3D.rotation);\n  entity.object3D.rotation.set(0, 0, 0);\n\n  entity.object3D.updateMatrices(true, true);\n  boxRoot.updateMatrices(true, true);\n  boxRoot.updateMatrixWorld(true);\n\n  computeObjectAABB(boxRoot, box);\n\n  if (!box.isEmpty()) {\n    if (!worldSpace) {\n      entity.object3D.worldToLocal(box.min);\n      entity.object3D.worldToLocal(box.max);\n    }\n    entity.object3D.rotation.copy(rotation);\n    entity.object3D.matrixNeedsUpdate = true;\n  }\n\n  boxRoot.matrixWorldNeedsUpdate = true;\n  boxRoot.updateMatrices();\n\n  return box;\n}\n\nexport function getScaleCoefficient(length, box) {\n  if (box.isEmpty()) return 1.0;\n\n  const { max, min } = box;\n  const dX = Math.abs(max.x - min.x);\n  const dY = Math.abs(max.y - min.y);\n  const dZ = Math.abs(max.z - min.z);\n  const lengthOfLongestComponent = Math.max(dX, dY, dZ);\n  return length / lengthOfLongestComponent;\n}\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"message-entry-input\":\"message-entry__message-entry-input__2AtQE\",\"messageEntryInput\":\"message-entry__message-entry-input__2AtQE\",\"message-entry\":\"message-entry__message-entry__x7lQX\",\"messageEntry\":\"message-entry__message-entry__x7lQX\",\"message-entry-disabled\":\"message-entry__message-entry-disabled__25LSI\",\"messageEntryDisabled\":\"message-entry__message-entry-disabled__25LSI\",\"message-entry-button\":\"message-entry__message-entry-button__3xJhH\",\"messageEntryButton\":\"message-entry__message-entry-button__3xJhH\",\"message-entry-spawn\":\"message-entry__message-entry-spawn__1_AF5\",\"messageEntrySpawn\":\"message-entry__message-entry-spawn__1_AF5\",\"message-entry-button-in-room\":\"message-entry__message-entry-button-in-room__2yMTR\",\"messageEntryButtonInRoom\":\"message-entry__message-entry-button-in-room__2yMTR\",\"message-entry-upload\":\"message-entry__message-entry-upload__3F0sX\",\"messageEntryUpload\":\"message-entry__message-entry-upload__3F0sX\",\"message-entry-in-room\":\"message-entry__message-entry-in-room__1aN5s\",\"messageEntryInRoom\":\"message-entry__message-entry-in-room__1aN5s\",\"message-entry-input-in-room\":\"message-entry__message-entry-input-in-room__30ReF\",\"messageEntryInputInRoom\":\"message-entry__message-entry-input-in-room__30ReF\",\"message-entry-input-no-spawn\":\"message-entry__message-entry-input-no-spawn__1wF7R\",\"messageEntryInputNoSpawn\":\"message-entry__message-entry-input-no-spawn__1wF7R\",\"message-entry-on-mobile\":\"message-entry__message-entry-on-mobile__2pSYF\",\"messageEntryOnMobile\":\"message-entry__message-entry-on-mobile__2pSYF\"};","module.exports = __webpack_public_path__ + \"assets/models/DuckyMesh-04f978955fb12d48f7ff8c59a05de439.glb\";","import screenfull from \"screenfull\";\n\nlet hasEnteredFullScreenThisSession = false;\n\nfunction shouldShowFullScreen() {\n  // Disable full screen on iOS, since Safari's fullscreen mode does not let you prevent native pinch-to-zoom gestures.\n  return (\n    (AFRAME.utils.device.isMobile() || AFRAME.utils.device.isMobileVR()) &&\n    !AFRAME.utils.device.isIOS() &&\n    screenfull.enabled\n  );\n}\n\nexport function willRequireUserGesture() {\n  return !screenfull.isFullscreen && shouldShowFullScreen();\n}\n\nexport async function showFullScreenIfAvailable() {\n  if (shouldShowFullScreen()) {\n    hasEnteredFullScreenThisSession = true;\n    await screenfull.request();\n  }\n}\n\nexport async function showFullScreenIfWasFullScreen() {\n  if (hasEnteredFullScreenThisSession && !screenfull.isFullscreen) {\n    await screenfull.request();\n  }\n}\n","export default function nextTick() {\n  return new Promise(resolve => {\n    setTimeout(resolve, 0);\n  });\n}\n","import nextTick from \"../utils/next-tick\";\nimport { mapMaterials } from \"../utils/material-utils\";\nimport SketchfabZipWorker from \"../workers/sketchfab-zip.worker.js\";\nimport MobileStandardMaterial from \"../materials/MobileStandardMaterial\";\nimport { textureLoader } from \"../utils/media-utils\";\nimport { getCustomGLTFParserURLResolver } from \"../utils/media-url-utils\";\nimport { promisifyWorker } from \"../utils/promisify-worker.js\";\nimport { MeshBVH, acceleratedRaycast } from \"three-mesh-bvh\";\nimport { disposeNode, cloneObject3D } from \"../utils/three-utils\";\n\nTHREE.Mesh.prototype.raycast = acceleratedRaycast;\n\nclass GLTFCache {\n  cache = new Map();\n\n  set(src, gltf) {\n    this.cache.set(src, {\n      gltf,\n      count: 0\n    });\n    return this.retain(src);\n  }\n\n  has(src) {\n    return this.cache.has(src);\n  }\n\n  get(src) {\n    return this.cache.get(src);\n  }\n\n  retain(src) {\n    const cacheItem = this.cache.get(src);\n    cacheItem.count++;\n    return cacheItem;\n  }\n\n  release(src) {\n    const cacheItem = this.cache.get(src);\n\n    if (!cacheItem) {\n      console.error(`Releasing uncached gltf ${src}`);\n      return;\n    }\n\n    cacheItem.count--;\n    if (cacheItem.count <= 0) {\n      cacheItem.gltf.scene.traverse(disposeNode);\n      this.cache.delete(src);\n    }\n  }\n}\nconst gltfCache = new GLTFCache();\nconst inflightGltfs = new Map();\n\nconst extractZipFile = promisifyWorker(new SketchfabZipWorker());\n\nfunction defaultInflator(el, componentName, componentData) {\n  if (!AFRAME.components[componentName]) {\n    throw new Error(`Inflator failed. \"${componentName}\" component does not exist.`);\n  }\n  if (AFRAME.components[componentName].multiple && Array.isArray(componentData)) {\n    for (let i = 0; i < componentData.length; i++) {\n      el.setAttribute(componentName + \"__\" + i, componentData[i]);\n    }\n  } else {\n    el.setAttribute(componentName, componentData);\n  }\n}\n\nAFRAME.GLTFModelPlus = {\n  // eslint-disable-next-line no-unused-vars\n  components: {},\n  registerComponent(componentKey, componentName, inflator) {\n    inflator = inflator || defaultInflator;\n    AFRAME.GLTFModelPlus.components[componentKey] = { inflator, componentName };\n  }\n};\n\nfunction generateMeshBVH(object3D) {\n  object3D.traverse(obj => {\n    // note that we might already have a bounds tree if this was a clone of an object with one\n    const hasBufferGeometry = obj.isMesh && obj.geometry.isBufferGeometry;\n    const hasBoundsTree = hasBufferGeometry && obj.geometry.boundsTree;\n    if (hasBufferGeometry && !hasBoundsTree && obj.geometry.attributes.position) {\n      const geo = obj.geometry;\n      const triCount = geo.index ? geo.index.count / 3 : geo.attributes.position.count / 3;\n      // only bother using memory and time making a BVH if there are a reasonable number of tris,\n      // and if there are too many it's too painful and large to tolerate doing it (at least until\n      // we put this in a web worker)\n      if (triCount > 1000 && triCount < 1000000) {\n        // note that bounds tree construction creates an index as a side effect if one doesn't already exist\n        geo.boundsTree = new MeshBVH(obj.geometry, { strategy: 0, maxDepth: 30 });\n      }\n    }\n  });\n}\n\nfunction cloneGltf(gltf) {\n  return {\n    animations: gltf.scene.animations,\n    scene: cloneObject3D(gltf.scene)\n  };\n}\n\nfunction getHubsComponents(node) {\n  const hubsComponents =\n    node.userData.gltfExtensions &&\n    (node.userData.gltfExtensions.MOZ_hubs_components || node.userData.gltfExtensions.HUBS_components);\n\n  // We can remove support for legacy components when our environment, avatar and interactable models are\n  // updated to match Spoke output.\n  const legacyComponents = node.userData.components;\n\n  return hubsComponents || legacyComponents;\n}\n\n/// Walks the tree of three.js objects starting at the given node, using the GLTF data\n/// and template data to construct A-Frame entities and components when necessary.\n/// (It's unnecessary to construct entities for subtrees that have no component data\n/// or templates associated with any of their nodes.)\n///\n/// Returns the A-Frame entity associated with the given node, if one was constructed.\nconst inflateEntities = function(indexToEntityMap, node, templates, isRoot, modelToWorldScale = 1) {\n  // TODO: Remove this once we update the legacy avatars to the new node names\n  if (node.name === \"Chest\") {\n    node.name = \"Spine\";\n  } else if (node.name === \"Root Scene\") {\n    node.name = \"AvatarRoot\";\n  } else if (node.name === \"Bot_Skinned\") {\n    node.name = \"AvatarMesh\";\n  }\n\n  // inflate subtrees first so that we can determine whether or not this node needs to be inflated\n  const childEntities = [];\n  const children = node.children.slice(0); // setObject3D mutates the node's parent, so we have to copy\n  for (const child of children) {\n    const el = inflateEntities(indexToEntityMap, child, templates);\n    if (el) {\n      childEntities.push(el);\n    }\n  }\n\n  const entityComponents = getHubsComponents(node);\n\n  const nodeHasBehavior = !!entityComponents || node.name in templates;\n  if (!nodeHasBehavior && !childEntities.length && !isRoot) {\n    return null; // we don't need an entity for this node\n  }\n\n  const el = document.createElement(\"a-entity\");\n  el.append.apply(el, childEntities);\n\n  // Remove invalid CSS class name characters.\n  const className = (node.name || node.uuid).replace(/[^\\w-]/g, \"\");\n  el.classList.add(className);\n\n  // AFRAME rotation component expects rotations in YXZ, convert it\n  if (node.rotation.order !== \"YXZ\") {\n    node.rotation.setFromQuaternion(node.quaternion, \"YXZ\");\n  }\n\n  // Copy over the object's transform to the THREE.Group and reset the actual transform of the Object3D\n  // all updates to the object should be done through the THREE.Group wrapper\n  el.object3D.position.copy(node.position);\n  el.object3D.rotation.copy(node.rotation);\n  el.object3D.scale.copy(node.scale).multiplyScalar(modelToWorldScale);\n  el.object3D.matrixNeedsUpdate = true;\n\n  node.matrixAutoUpdate = false;\n  node.matrix.identity();\n  node.matrix.decompose(node.position, node.rotation, node.scale);\n\n  el.setObject3D(node.type.toLowerCase(), node);\n  if (entityComponents && \"nav-mesh\" in entityComponents) {\n    el.setObject3D(\"mesh\", node);\n  }\n\n  // Set the name of the `THREE.Group` to match the name of the node,\n  // so that templates can be attached to the correct AFrame entity.\n  el.object3D.name = node.name;\n\n  // Set the uuid of the `THREE.Group` to match the uuid of the node,\n  // so that `THREE.PropertyBinding` will find (and later animate)\n  // the group. See `PropertyBinding.findNode`:\n  // https://github.com/mrdoob/three.js/blob/dev/src/animation/PropertyBinding.js#L211\n  el.object3D.uuid = node.uuid;\n  node.uuid = THREE.Math.generateUUID();\n\n  if (node.animations) {\n    // Pass animations up to the group object so that when we can pass the group as\n    // the optional root in `THREE.AnimationMixer.clipAction` and use the hierarchy\n    // preserved under the group (but not the node). Otherwise `clipArray` will be\n    // `null` in `THREE.AnimationClip.findByName`.\n    node.parent.animations = node.animations;\n  }\n\n  const gltfIndex = node.userData.gltfIndex;\n  if (gltfIndex !== undefined) {\n    indexToEntityMap[gltfIndex] = el;\n  }\n\n  return el;\n};\n\nasync function inflateComponents(inflatedEntity, indexToEntityMap) {\n  let isFirstInflation = true;\n  const objectInflations = [];\n\n  inflatedEntity.object3D.traverse(async object3D => {\n    const objectInflation = {};\n    objectInflation.promise = new Promise(resolve => (objectInflation.resolve = resolve));\n    objectInflations.push(objectInflation);\n\n    if (!isFirstInflation) {\n      await objectInflations.shift().promise;\n    }\n    isFirstInflation = false;\n\n    const entityComponents = getHubsComponents(object3D);\n    const el = object3D.el;\n\n    if (entityComponents && el) {\n      for (const prop in entityComponents) {\n        if (entityComponents.hasOwnProperty(prop) && AFRAME.GLTFModelPlus.components.hasOwnProperty(prop)) {\n          const { componentName, inflator } = AFRAME.GLTFModelPlus.components[prop];\n          await inflator(el, componentName, entityComponents[prop], entityComponents, indexToEntityMap);\n        }\n      }\n    }\n\n    objectInflation.resolve();\n  });\n\n  await objectInflations.shift().promise;\n}\n\nfunction attachTemplate(root, name, templateRoot) {\n  const targetEls = root.querySelectorAll(\".\" + name);\n  for (const el of targetEls) {\n    const root = templateRoot.cloneNode(true);\n    // Merge root element attributes with the target element\n    for (const { name, value } of root.attributes) {\n      el.setAttribute(name, value);\n    }\n\n    // Append all child elements\n    while (root.children.length > 0) {\n      el.appendChild(root.children[0]);\n    }\n  }\n}\n\nfunction getHubsComponentsExtension(node) {\n  if (node.extensions && node.extensions.MOZ_hubs_components) {\n    return node.extensions.MOZ_hubs_components;\n  } else if (node.extensions && node.extensions.HUBS_components) {\n    return node.extensions.HUBS_components;\n  } else if (node.extras && node.extras.gltfExtensions && node.extras.gltfExtensions.MOZ_hubs_components) {\n    return node.extras.gltfExtensions.MOZ_hubs_components;\n  }\n}\n\n// Versions are documented here: https://github.com/mozilla/hubs/wiki/MOZ_hubs_components-Changelog\n// Make sure to update the wiki and Spoke when bumping a version\nfunction runMigration(version, json) {\n  if (version < 2) {\n    //old heightfields will be on the same node as the nav-mesh, delete those\n    const oldHeightfieldNode = json.nodes.find(node => {\n      const components = getHubsComponentsExtension(node);\n      return components && components.heightfield && components[\"nav-mesh\"];\n    });\n    if (oldHeightfieldNode) {\n      if (oldHeightfieldNode.extensions && oldHeightfieldNode.extensions.MOZ_hubs_components) {\n        delete oldHeightfieldNode.extensions.MOZ_hubs_components.heightfield;\n      } else if (oldHeightfieldNode.extensions && oldHeightfieldNode.extensions.HUBS_components) {\n        delete oldHeightfieldNode.extensions.HUBS_components.heightfield;\n      } else if (\n        oldHeightfieldNode.extras &&\n        oldHeightfieldNode.extras.gltfExtensions &&\n        oldHeightfieldNode.extras.gltfExtensions.MOZ_hubs_components\n      ) {\n        delete oldHeightfieldNode.extras.gltfExtensions.MOZ_hubs_components;\n      }\n    }\n  }\n\n  if (version < 4) {\n    // Lights prior to version 4 should treat range === 0 as if it has zero decay\n    if (json.nodes) {\n      for (const node of json.nodes) {\n        const components = getHubsComponentsExtension(node);\n\n        if (!components) {\n          continue;\n        }\n\n        const light = components[\"spot-light\"] || components[\"point-light\"];\n\n        if (light && light.range === 0) {\n          light.decay = 0;\n        }\n      }\n    }\n  }\n}\n\nexport async function loadGLTF(src, contentType, preferredTechnique, onProgress, jsonPreprocessor) {\n  let gltfUrl = src;\n  let fileMap;\n\n  if (contentType && (contentType.includes(\"model/gltf+zip\") || contentType.includes(\"application/x-zip-compressed\"))) {\n    fileMap = await extractZipFile(gltfUrl);\n    gltfUrl = fileMap[\"scene.gtlf\"];\n  }\n\n  const loadingManager = new THREE.LoadingManager();\n  loadingManager.setURLModifier(getCustomGLTFParserURLResolver(gltfUrl));\n  const gltfLoader = new THREE.GLTFLoader(loadingManager);\n\n  const parser = await new Promise((resolve, reject) => gltfLoader.createParser(gltfUrl, resolve, onProgress, reject));\n\n  parser.textureLoader = textureLoader;\n\n  if (jsonPreprocessor) {\n    parser.json = jsonPreprocessor(parser.json);\n  }\n\n  let version = 0;\n  if (\n    parser.json.extensions &&\n    parser.json.extensions.MOZ_hubs_components &&\n    parser.json.extensions.MOZ_hubs_components.hasOwnProperty(\"version\")\n  ) {\n    version = parser.json.extensions.MOZ_hubs_components.version;\n  }\n  runMigration(version, parser.json);\n\n  const materials = parser.json.materials;\n  if (materials) {\n    for (let i = 0; i < materials.length; i++) {\n      const material = materials[i];\n\n      if (\n        material.extensions &&\n        material.extensions.MOZ_alt_materials &&\n        material.extensions.MOZ_alt_materials[preferredTechnique] !== undefined\n      ) {\n        const altMaterialIndex = material.extensions.MOZ_alt_materials[preferredTechnique];\n        materials[i] = materials[altMaterialIndex];\n      }\n    }\n  }\n\n  const nodes = parser.json.nodes;\n\n  if (nodes) {\n    for (let i = 0; i < nodes.length; i++) {\n      const node = nodes[i];\n\n      if (!node.extras) {\n        node.extras = {};\n      }\n\n      node.extras.gltfIndex = i;\n    }\n  }\n\n  const gltf = await new Promise(parser.parse.bind(parser));\n\n  gltf.scene.traverse(object => {\n    // GLTFLoader sets matrixAutoUpdate on animated objects, we want to keep the defaults\n    object.matrixAutoUpdate = THREE.Object3D.DefaultMatrixAutoUpdate;\n\n    object.material = mapMaterials(object, material => {\n      if (material.isMeshStandardMaterial && preferredTechnique === \"KHR_materials_unlit\") {\n        return MobileStandardMaterial.fromStandardMaterial(material);\n      }\n\n      return material;\n    });\n  });\n\n  if (fileMap) {\n    // The GLTF is now cached as a THREE object, we can get rid of the original blobs\n    Object.keys(fileMap).forEach(URL.revokeObjectURL);\n  }\n\n  gltf.scene.animations = gltf.animations;\n\n  return gltf;\n}\n\nexport async function loadModel(src, contentType = null, useCache = false, jsonPreprocessor = null) {\n  const preferredTechnique =\n    window.APP && window.APP.quality === \"low\" ? \"KHR_materials_unlit\" : \"pbrMetallicRoughness\";\n\n  if (useCache) {\n    if (gltfCache.has(src)) {\n      gltfCache.retain(src);\n      return cloneGltf(gltfCache.get(src).gltf);\n    } else {\n      if (inflightGltfs.has(src)) {\n        const gltf = await inflightGltfs.get(src);\n        gltfCache.retain(src);\n        return cloneGltf(gltf);\n      } else {\n        const promise = loadGLTF(src, contentType, preferredTechnique, null, jsonPreprocessor);\n        inflightGltfs.set(src, promise);\n        const gltf = await promise;\n        inflightGltfs.delete(src);\n        gltfCache.set(src, gltf);\n        return cloneGltf(gltf);\n      }\n    }\n  } else {\n    return loadGLTF(src, contentType, preferredTechnique, null, jsonPreprocessor);\n  }\n}\n\nfunction resolveAsset(src) {\n  // If the src attribute is a selector, get the url from the asset item.\n  if (src && src.charAt(0) === \"#\") {\n    const assetEl = document.getElementById(src.substring(1));\n    if (assetEl) {\n      return assetEl.getAttribute(\"src\");\n    }\n  }\n  return src;\n}\n\n/**\n * Loads a GLTF model, optionally recursively \"inflates\" the child nodes of a model into a-entities and sets\n * whitelisted components on them if defined in the node's extras.\n * @namespace gltf\n * @component gltf-model-plus\n */\nAFRAME.registerComponent(\"gltf-model-plus\", {\n  schema: {\n    src: { type: \"string\" },\n    contentType: { type: \"string\" },\n    useCache: { default: true },\n    inflate: { default: false },\n    batch: { default: false },\n    modelToWorldScale: { type: \"number\", default: 1 }\n  },\n\n  init() {\n    // This can be set externally if a consumer wants to do some node preprocssing.\n    this.jsonPreprocessor = null;\n\n    this.loadTemplates();\n  },\n\n  update() {\n    this.applySrc(resolveAsset(this.data.src), this.data.contentType);\n  },\n\n  remove() {\n    if (this.data.batch && this.model) {\n      this.el.sceneEl.systems[\"hubs-systems\"].batchManagerSystem.removeObject(this.el.object3DMap.mesh);\n    }\n    const src = resolveAsset(this.data.src);\n    if (src) {\n      gltfCache.release(src);\n    }\n  },\n\n  loadTemplates() {\n    this.templates = {};\n    this.el.querySelectorAll(\":scope > template\").forEach(templateEl => {\n      const root = document.importNode(templateEl.firstElementChild || templateEl.content.firstElementChild, true);\n      this.templates[templateEl.getAttribute(\"data-name\")] = root;\n    });\n  },\n\n  async applySrc(src, contentType) {\n    try {\n      if (src === this.lastSrc) return;\n\n      const lastSrc = this.lastSrc;\n      this.lastSrc = src;\n\n      if (!src) {\n        if (this.inflatedEl) {\n          console.warn(\"gltf-model-plus set to an empty source, unloading inflated model.\");\n          this.disposeLastInflatedEl();\n        }\n        return;\n      }\n\n      this.el.emit(\"model-loading\");\n      const gltf = await loadModel(src, contentType, this.data.useCache, this.jsonPreprocessor);\n\n      // If we started loading something else already\n      // TODO: there should be a way to cancel loading instead\n      if (src != this.lastSrc) return;\n\n      // If we had inflated something already before, clean that up\n      this.disposeLastInflatedEl();\n\n      this.model = gltf.scene || gltf.scenes[0];\n\n      if (this.data.batch) {\n        this.el.sceneEl.systems[\"hubs-systems\"].batchManagerSystem.addObject(this.model);\n      }\n\n      if (gltf.animations.length > 0) {\n        this.el.setAttribute(\"animation-mixer\", {});\n        this.el.components[\"animation-mixer\"].initMixer(this.model.animations);\n      } else {\n        generateMeshBVH(this.model);\n      }\n\n      const indexToEntityMap = {};\n\n      let object3DToSet = this.model;\n      if (\n        this.data.inflate &&\n        (this.inflatedEl = inflateEntities(\n          indexToEntityMap,\n          this.model,\n          this.templates,\n          true,\n          this.data.modelToWorldScale\n        ))\n      ) {\n        this.el.appendChild(this.inflatedEl);\n\n        object3DToSet = this.inflatedEl.object3D;\n        object3DToSet.visible = false;\n\n        // TODO: Still don't fully understand the lifecycle here and how it differs between browsers, we should dig in more\n        // Wait one tick for the appended custom elements to be connected before attaching templates\n        await nextTick();\n        if (src != this.lastSrc) return; // TODO: there must be a nicer pattern for this\n\n        await inflateComponents(this.inflatedEl, indexToEntityMap);\n\n        for (const name in this.templates) {\n          attachTemplate(this.el, name, this.templates[name]);\n        }\n      }\n\n      // The call to setObject3D below recursively clobbers any `el` backreferences to entities\n      // in the entire inflated entity graph to point to `object3DToSet`.\n      //\n      // We don't want those overwritten, since lots of code assumes `object3d.el` points to the relevant\n      // A-Frame entity for that three.js object, so we back them up and re-wire them here. If we didn't do\n      // this, all the `el` properties on these object3ds would point to the `object3DToSet` which is either\n      // the model or the root GLTF inflated entity.\n      const rewires = [];\n\n      object3DToSet.traverse(o => {\n        const el = o.el;\n        if (el) rewires.push(() => (o.el = el));\n      });\n\n      const environmentMapComponent = this.el.sceneEl.components[\"environment-map\"];\n\n      if (environmentMapComponent) {\n        environmentMapComponent.applyEnvironmentMap(object3DToSet);\n      }\n\n      if (lastSrc) {\n        gltfCache.release(lastSrc);\n      }\n      this.el.setObject3D(\"mesh\", object3DToSet);\n\n      rewires.forEach(f => f());\n\n      object3DToSet.visible = true;\n      this.el.emit(\"model-loaded\", { format: \"gltf\", model: this.model });\n    } catch (e) {\n      gltfCache.release(src);\n      console.error(\"Failed to load glTF model\", e, this);\n      this.el.emit(\"model-error\", { format: \"gltf\", src });\n    }\n  },\n\n  disposeLastInflatedEl() {\n    if (this.inflatedEl) {\n      this.inflatedEl.parentNode.removeChild(this.inflatedEl);\n\n      this.inflatedEl.object3D.traverse(x => {\n        if (x.material && x.material.dispose) {\n          x.material.dispose();\n        }\n\n        if (x.geometry) {\n          if (x.geometry.dispose) {\n            x.geometry.dispose();\n          }\n\n          x.geometry.boundsTree = null;\n        }\n      });\n\n      delete this.inflatedEl;\n\n      this.el.removeAttribute(\"animation-mixer\");\n    }\n  }\n});\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"profile-entry\":\"profile__profile-entry__1pJKZ\",\"profileEntry\":\"profile__profile-entry__1pJKZ\",\"form-submit\":\"profile__form-submit__2y7xb\",\"formSubmit\":\"profile__form-submit__2y7xb\",\"choose-avatar\":\"profile__choose-avatar__2EV0F\",\"chooseAvatar\":\"profile__choose-avatar__2EV0F\",\"form-field-text\":\"profile__form-field-text__1bzeV\",\"formFieldText\":\"profile__form-field-text__1bzeV\",\"title\":\"profile__title__Vcynv\",\"close\":\"profile__close__2Uitz\",\"logo\":\"profile__logo__1JZAd\",\"form\":\"profile__form__1-hBO\",\"box\":\"profile__box__oJXQD\",\"links\":\"profile__links__2hukW\",\"display-name\":\"profile__display-name__auABh\",\"displayName\":\"profile__display-name__auABh\",\"preview\":\"profile__preview__3QjLq\",\"edit-avatar\":\"profile__edit-avatar__3386A\",\"editAvatar\":\"profile__edit-avatar__3386A\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"buttons\":\"tweet-dialog__buttons__1gYv2\",\"tweet-button\":\"tweet-dialog__tweet-button__3XvNj\",\"tweetButton\":\"tweet-dialog__tweet-button__3XvNj\",\"tweet\":\"tweet-dialog__tweet__25N6e\",\"editor\":\"tweet-dialog__editor__3xJV-\",\"editor-inner\":\"tweet-dialog__editor-inner__1Zhzc\",\"editorInner\":\"tweet-dialog__editor-inner__1Zhzc\",\"emoji-button\":\"tweet-dialog__emoji-button__2L9tR\",\"emojiButton\":\"tweet-dialog__emoji-button__2L9tR\",\"counter\":\"tweet-dialog__counter__2OZyX\",\"media\":\"tweet-dialog__media__IeN9e\",\"posted\":\"tweet-dialog__posted__2t8RC\",\"tweet-loader\":\"tweet-dialog__tweet-loader__3Q8YL\",\"tweetLoader\":\"tweet-dialog__tweet-loader__3Q8YL\",\"dialog-background\":\"tweet-dialog__dialog-background__2vvyQ\",\"dialogBackground\":\"tweet-dialog__dialog-background__2vvyQ\"};","export function findAncestorWithComponent(entity, componentName) {\n  while (entity && !(entity.components && entity.components[componentName])) {\n    entity = entity.parentNode;\n  }\n  return entity;\n}\n","export const createImageBitmap =\n  window.createImageBitmap ||\n  async function(data) {\n    return new Promise(resolve => {\n      // https://dev.to/nektro/createimagebitmap-polyfill-for-safari-and-edge-228\n      // https://gist.github.com/MonsieurV/fb640c29084c171b4444184858a91bc7\n\n      let srcUrl;\n      if (data instanceof Blob) {\n        srcUrl = URL.createObjectURL(data);\n      } else {\n        const canvas = document.createElement(\"canvas\");\n        const ctx = canvas.getContext(\"2d\");\n        canvas.width = data.width;\n        canvas.height = data.height;\n        ctx.putImageData(data, 0, 0);\n        srcUrl = canvas.toDataURL();\n      }\n      const img = document.createElement(\"img\");\n\n      img.addEventListener(\"load\", () => resolve(img));\n\n      img.src = srcUrl;\n    });\n  };\n\nexport function disposeImageBitmap(imageBitmap) {\n  if (imageBitmap instanceof HTMLImageElement && imageBitmap.src.startsWith(\"blob:\")) {\n    URL.revokeObjectURL(imageBitmap.src);\n  } else {\n    imageBitmap.close && imageBitmap.close();\n  }\n}\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"email-field\":\"sign-in-dialog__email-field__g3xRW\",\"emailField\":\"sign-in-dialog__email-field__g3xRW\",\"next-button\":\"sign-in-dialog__next-button__2pGtq\",\"nextButton\":\"sign-in-dialog__next-button__2pGtq\",\"continue-button\":\"sign-in-dialog__continue-button__kFN6Z\",\"continueButton\":\"sign-in-dialog__continue-button__kFN6Z\",\"sign-in-form\":\"sign-in-dialog__sign-in-form__3Muog\",\"signInForm\":\"sign-in-dialog__sign-in-form__3Muog\",\"sign-in-complete\":\"sign-in-dialog__sign-in-complete__3JMkv\",\"signInComplete\":\"sign-in-dialog__sign-in-complete__3JMkv\",\"terms\":\"sign-in-dialog__terms__3TT6i\"};","import { waitForDOMContentLoaded } from \"./async-utils\";\nimport \"./configs\";\n\n// Node these should be synchronized with the top of shared.scss\nconst DEFAULT_ACTION_COLOR = \"#FF3464\";\nconst DEFAULT_ACTION_COLOR_LIGHT = \"#FF74A4\";\n\nconst DEFAULT_COLORS = {\n  \"action-color\": DEFAULT_ACTION_COLOR,\n  \"action-label-color\": DEFAULT_ACTION_COLOR,\n  \"action-color-disabled\": DEFAULT_ACTION_COLOR_LIGHT,\n  \"action-color-highlight\": DEFAULT_ACTION_COLOR_LIGHT,\n  \"action-text-color\": \"#FFFFFF\",\n  \"action-subtitle-color\": \"#F0F0F0\",\n  \"notice-background-color\": \"#2F80ED\",\n  \"notice-text-color\": \"#FFFFFF\",\n  \"favorited-color\": \"#FFC000\"\n};\n\nfunction getThemeColor(name) {\n  if (window.APP_CONFIG && window.APP_CONFIG.theme && window.APP_CONFIG.theme[name])\n    return window.APP_CONFIG.theme[name];\n\n  return DEFAULT_COLORS[name];\n}\n\nwaitForDOMContentLoaded().then(() => {\n  if (window.APP_CONFIG && window.APP_CONFIG.theme && window.APP_CONFIG.theme[\"dark-theme\"]) {\n    document.body.classList.add(\"dark-theme\");\n  } else {\n    document.body.classList.add(\"light-theme\");\n  }\n\n  const actionColor = getThemeColor(\"action-color\");\n  const actionHoverColor = getThemeColor(\"action-color-highlight\");\n\n  if (document.querySelector(\"#rounded-text-button\")) {\n    // NOTE, using the object-based {} setAttribute variant in a-frame\n    // seems to not work in Firefox here -- the entities with the mixins are not\n    // updated.\n    document\n      .querySelector(\"#rounded-text-button\")\n      .setAttribute(\n        \"text-button\",\n        `textHoverColor: ${actionHoverColor}; textColor: ${actionColor}; backgroundColor: #fff; backgroundHoverColor: #aaa;`\n      );\n\n    document\n      .querySelector(\"#rounded-button\")\n      .setAttribute(\n        \"text-button\",\n        `textHoverColor: ${actionHoverColor}; textColor: ${actionColor}; backgroundColor: #fff; backgroundHoverColor: #aaa;`\n      );\n\n    document\n      .querySelector(\"#rounded-text-action-button\")\n      .setAttribute(\n        \"text-button\",\n        `textHoverColor: #fff; textColor: #fff; backgroundColor: ${actionColor}; backgroundHoverColor: ${actionHoverColor}`\n      );\n\n    document\n      .querySelector(\"#rounded-action-button\")\n      .setAttribute(\n        \"text-button\",\n        `textHoverColor: #fff; textColor: #fff; backgroundColor: ${actionColor}; backgroundHoverColor: ${actionHoverColor}`\n      );\n  }\n});\n\nfunction applyThemeToTextButton(el, highlighted) {\n  el.setAttribute(\n    \"text-button\",\n    \"backgroundColor\",\n    highlighted ? getThemeColor(\"action-color-highlight\") : getThemeColor(\"action-color\")\n  );\n  el.setAttribute(\n    \"text-button\",\n    \"backgroundHoverColor\",\n    highlighted ? \"#aaa\" : getThemeColor(\"action-color-highlight\")\n  );\n}\n\nexport { applyThemeToTextButton, getThemeColor };\n","module.exports = __webpack_public_path__ + \"assets/images/warning_icon-739d2a2ea906737505bcbc2cb51123a8.png\";","const VERTEX_SHADER = `\n#include <common>\n#include <uv_pars_vertex>\n#include <uv2_pars_vertex>\n#include <color_pars_vertex>\n#include <fog_pars_vertex>\n#include <morphtarget_pars_vertex>\n#include <skinning_pars_vertex>\n#include <logdepthbuf_pars_vertex>\n#include <clipping_planes_pars_vertex>\n\nvoid main() {\n  #include <uv_vertex>\n  #include <uv2_vertex>\n  #include <color_vertex>\n  #include <skinbase_vertex>\n\n  #include <begin_vertex>\n  #include <morphtarget_vertex>\n  #include <skinning_vertex>\n  #include <project_vertex>\n  #include <logdepthbuf_vertex>\n\n  #include <worldpos_vertex>\n  #include <clipping_planes_vertex>\n  #include <fog_vertex>\n}\n`;\n\nconst FRAGMENT_SHADER = `\nuniform vec3 diffuse;\nuniform vec3 emissive;\nuniform float opacity;\n\n#include <common>\n#include <color_pars_fragment>\n#include <uv_pars_fragment>\n#include <uv2_pars_fragment>\n#include <map_pars_fragment>\n#include <aomap_pars_fragment>\n#include <emissivemap_pars_fragment>\n#include <fog_pars_fragment>\n#include <logdepthbuf_pars_fragment>\n#include <clipping_planes_pars_fragment>\n\nvoid main() {\n  #include <clipping_planes_fragment>\n\n  vec4 diffuseColor = vec4(diffuse, opacity);\n  ReflectedLight reflectedLight = ReflectedLight(vec3(0.0), vec3(0.0), vec3(0.0), vec3(0.0));\n  vec3 totalEmissiveRadiance = emissive;\n\n  #include <logdepthbuf_fragment>\n  #include <map_fragment>\n  #include <color_fragment>\n  #include <alphatest_fragment>\n  #include <emissivemap_fragment>\n\n  reflectedLight.indirectDiffuse += vec3(1.0);\n\n  #include <aomap_fragment>\n\n  reflectedLight.indirectDiffuse *= diffuseColor.rgb;\n\n  vec3 outgoingLight = reflectedLight.directDiffuse + reflectedLight.indirectDiffuse + reflectedLight.directSpecular + reflectedLight.indirectSpecular + totalEmissiveRadiance;\n\n  gl_FragColor = vec4(outgoingLight, diffuseColor.a);\n\n  #include <premultiplied_alpha_fragment>\n  #include <tonemapping_fragment>\n  #include <encodings_fragment>\n  #include <fog_fragment>\n}\n`;\n\nexport default class MobileStandardMaterial extends THREE.ShaderMaterial {\n  type = \"MobileStandardMaterial\";\n  isMobileStandardMaterial = true;\n  static fromStandardMaterial(material) {\n    const parameters = {\n      vertexShader: VERTEX_SHADER,\n      fragmentShader: FRAGMENT_SHADER,\n      uniforms: {\n        ...THREE.UniformsUtils.clone(THREE.UniformsLib.fog),\n        uvTransform: { value: new THREE.Matrix3() },\n        diffuse: { value: material.color },\n        opacity: { value: material.opacity },\n        map: { value: material.map },\n        aoMapIntensity: { value: material.aoMapIntensity },\n        aoMap: { value: material.aoMap },\n        emissive: { value: material.emissive },\n        emissiveMap: { value: material.emissiveMap }\n      },\n      fog: true,\n      lights: false,\n      opacity: material.opacity,\n      transparent: material.transparent,\n      alphaTest: material.alphaTest,\n      skinning: material.skinning,\n      morphTargets: material.morphTargets,\n      vertexColors: material.vertexColors,\n      name: material.name\n    };\n\n    const mobileMaterial = new MobileStandardMaterial(parameters);\n\n    mobileMaterial.color = material.color;\n    mobileMaterial.map = material.map;\n    mobileMaterial.aoMap = material.aoMap;\n    mobileMaterial.aoMapIntensity = material.aoMapIntensity;\n    mobileMaterial.emissive = material.emissive;\n    mobileMaterial.emissiveIntensity = material.emissiveIntensity;\n    mobileMaterial.emissiveMap = material.emissiveMap;\n\n    // TODO this actually needs to get called whenever any of these material properties change\n    mobileMaterial.refreshUniforms();\n\n    return mobileMaterial;\n  }\n\n  refreshUniforms() {\n    this.uniforms.opacity.value = this.opacity;\n\n    if (this.color) {\n      this.uniforms.diffuse.value.copy(this.color);\n    }\n\n    if (this.emissive) {\n      this.uniforms.emissive.value.copy(this.emissive).multiplyScalar(this.emissiveIntensity);\n    }\n\n    if (this.map) {\n      this.uniforms.map.value = this.map;\n    }\n\n    if (this.aoMap) {\n      this.uniforms.aoMap.value = this.aoMap;\n      this.uniforms.aoMapIntensity.value = this.aoMapIntensity;\n    }\n\n    const uvScaleMap = this.map || this.emissiveMap;\n    if (uvScaleMap && uvScaleMap.matrixAutoUpdate === true) {\n      uvScaleMap.updateMatrix();\n      this.uniforms.uvTransform.value.copy(uvScaleMap.matrix);\n    }\n  }\n\n  clone() {\n    return MobileStandardMaterial.fromStandardMaterial(this);\n  }\n}\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"description-field\":\"room-settings-dialog__description-field__36sKF\",\"descriptionField\":\"room-settings-dialog__description-field__36sKF\",\"name-field\":\"room-settings-dialog__name-field___yGhb\",\"nameField\":\"room-settings-dialog__name-field___yGhb\",\"next-button\":\"room-settings-dialog__next-button__2F9Jd\",\"nextButton\":\"room-settings-dialog__next-button__2F9Jd\",\"continue-button\":\"room-settings-dialog__continue-button__2Ltsg\",\"continueButton\":\"room-settings-dialog__continue-button__2Ltsg\",\"room-settings-form\":\"room-settings-dialog__room-settings-form__yNism\",\"roomSettingsForm\":\"room-settings-dialog__room-settings-form__yNism\",\"select-container\":\"room-settings-dialog__select-container__SGcNH\",\"selectContainer\":\"room-settings-dialog__select-container__SGcNH\",\"permission\":\"room-settings-dialog__permission__3W-cW\",\"subtitle\":\"room-settings-dialog__subtitle__2ddy2\",\"permissions\":\"room-settings-dialog__permissions__1sHPN\",\"permissions-group\":\"room-settings-dialog__permissions-group__1oRYA\",\"permissionsGroup\":\"room-settings-dialog__permissions-group__1oRYA\",\"permission-disabled\":\"room-settings-dialog__permission-disabled__3NH-j\",\"permissionDisabled\":\"room-settings-dialog__permission-disabled__3NH-j\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"tip-root\":\"tip__tip-root__1s7D1\",\"tipRoot\":\"tip__tip-root__1s7D1\",\"tip-link\":\"tip__tip-link__3m4Iq\",\"tipLink\":\"tip__tip-link__3m4Iq\",\"tip-cancel\":\"tip__tip-cancel__1xPNP\",\"tipCancel\":\"tip__tip-cancel__1xPNP\",\"tip\":\"tip__tip__32KOl\",\"split-tip\":\"tip__split-tip__1xSCE\",\"splitTip\":\"tip__split-tip__1xSCE\",\"split-tip-icon\":\"tip__split-tip-icon__1ZXw0\",\"splitTipIcon\":\"tip__split-tip-icon__1ZXw0\",\"spawn_menu-icon\":\"tip__spawn_menu-icon__2en_9\",\"spawnMenuIcon\":\"tip__spawn_menu-icon__2en_9\",\"object_rotate_button-icon\":\"tip__object_rotate_button-icon__2tgeV\",\"objectRotateButtonIcon\":\"tip__object_rotate_button-icon__2tgeV\",\"object_scale_button-icon\":\"tip__object_scale_button-icon__pxKrw\",\"objectScaleButtonIcon\":\"tip__object_scale_button-icon__pxKrw\",\"object_recenter_button-icon\":\"tip__object_recenter_button-icon__38tNR\",\"objectRecenterButtonIcon\":\"tip__object_recenter_button-icon__38tNR\",\"tour-tip-root\":\"tip__tour-tip-root__1PxCu\",\"tourTipRoot\":\"tip__tour-tip-root__1PxCu\"};","module.exports = {\n  COLLISION_LAYERS: {\n    ALL: -1,\n    NONE: 0,\n    INTERACTABLES: 1,\n    ENVIRONMENT: 2,\n    AVATAR: 4,\n    HANDS: 8,\n    DEFAULT_INTERACTABLE: 1 | 2 | 4 | 8,\n    UNOWNED_INTERACTABLE: 1 | 8,\n    DEFAULT_SPAWNER: 1 | 8\n  }\n};\n","// Wrapper for a worker which accepts work items and responds with results.\n//\n// The worker must receive messages with data of the shape { id, payload }, and then respond\n// with messages containing matching IDs of the shape { id, result, err }.\n//\n// Returns a function that accepts a work item, sends it to the worker, and returns a promise that\n// will resolve with the result or reject with the error.\n//\nexport function promisifyWorker(worker) {\n  let nextItemId = 0;\n  const outstanding = {}; // item ID: { resolve, reject }\n\n  worker.onmessage = msg => {\n    const { id, result, err } = msg.data;\n    const handlers = outstanding[id];\n    if (handlers == null) {\n      console.error(`Unknown message with ID ${id} received from ${worker}.`);\n    } else {\n      delete outstanding[id];\n      if (err != null) {\n        handlers.reject(new Error(err));\n      } else {\n        handlers.resolve(result);\n      }\n    }\n  };\n\n  return function(data, transfer, args = {}) {\n    const id = nextItemId++;\n    const promise = new Promise((resolve, reject) => {\n      outstanding[id] = { resolve, reject };\n    });\n    worker.postMessage(Object.assign(args, { id, payload: data }), transfer);\n    return promise;\n  };\n}\n","import { EventTarget } from \"event-target-shim\";\nimport configs from \"../utils/configs\";\nimport { getReticulumFetchUrl, fetchReticulumAuthenticated, hasReticulumServer } from \"../utils/phoenix-utils\";\nimport { pushHistoryPath, sluglessPath, withSlug } from \"../utils/history\";\n\nconst EMPTY_RESULT = { entries: [], meta: {} };\n\nconst URL_SOURCE_TO_TO_API_SOURCE = {\n  scenes: \"scene_listings\",\n  images: \"bing_images\",\n  videos: \"bing_videos\",\n  youtube: \"youtube_videos\",\n  gifs: \"tenor\",\n  sketchfab: \"sketchfab\",\n  poly: \"poly\",\n  twitch: \"twitch\",\n  favorites: \"favorites\"\n};\n\nconst desiredSources = [\"poly\", \"sketchfab\", \"videos\", \"scenes\", \"avatars\", \"gifs\", \"images\"];\nconst availableIntegrations = configs.AVAILABLE_INTEGRATIONS;\nconst availableSources = desiredSources.filter(source => {\n  const apiSource = URL_SOURCE_TO_TO_API_SOURCE[source];\n  return !availableIntegrations.hasOwnProperty(apiSource) || availableIntegrations[apiSource];\n});\nexport const SOURCES = availableSources;\n\nexport const MEDIA_SOURCE_DEFAULT_FILTERS = {\n  gifs: \"trending\",\n  sketchfab: \"featured\",\n  scenes: \"featured\",\n  favorites: \"my-favorites\"\n};\n\nconst SEARCH_CONTEXT_PARAMS = [\"q\", \"filter\", \"cursor\", \"similar_to\"];\n\n// This class is responsible for fetching and storing media search results and provides a\n// convenience API for performing history updates relevant to search navigation.\nexport default class MediaSearchStore extends EventTarget {\n  constructor() {\n    super();\n\n    this.requestIndex = 0;\n  }\n\n  setHistory(history) {\n    this.history = history;\n\n    this._update(this.history.location);\n\n    this.history.listen(location => {\n      this._update(location);\n    });\n  }\n\n  _update = async location => {\n    this.result = null;\n    this.dispatchEvent(new CustomEvent(\"statechanged\"));\n\n    const urlSource = this.getUrlMediaSource(location);\n    if (!urlSource) return;\n\n    if (!this.previousSource || this.previousSource !== urlSource) {\n      this.dispatchEvent(new CustomEvent(\"sourcechanged\"));\n      this.previousSource = urlSource;\n    }\n\n    const urlParams = new URLSearchParams(location.search);\n\n    this.requestIndex++;\n    const currentRequestIndex = this.requestIndex;\n    const searchParams = new URLSearchParams();\n    const locationSearchParams = new URLSearchParams(location.search);\n    const isMy = locationSearchParams.get(\"filter\") && locationSearchParams.get(\"filter\").startsWith(\"my-\");\n\n    for (const param of SEARCH_CONTEXT_PARAMS) {\n      if (!urlParams.get(param)) continue;\n      searchParams.set(param, urlParams.get(param));\n    }\n\n    searchParams.get(\"locale\", navigator.languages[0]);\n\n    let source;\n    if (urlSource === \"avatars\" || urlSource === \"scenes\") {\n      // Avatars + scenes are special since we request them from a different source based on the facet.\n      const singular = urlSource === \"avatars\" ? \"avatar\" : \"scene\";\n      source = isMy ? `${singular}s` : `${singular}_listings`;\n    } else {\n      source = URL_SOURCE_TO_TO_API_SOURCE[urlSource];\n    }\n    searchParams.set(\"source\", source);\n\n    let fetch = true;\n\n    if (source === \"avatars\" || source === \"scenes\" || source === \"favorites\") {\n      if (isMy) {\n        if (window.APP.store.credentialsAccountId) {\n          searchParams.set(\"user\", window.APP.store.credentialsAccountId);\n        } else {\n          fetch = false; // Don't fetch my-* if not signed in\n        }\n      }\n    }\n\n    const path = `/api/v1/media/search?${searchParams.toString()}`;\n    const url = getReticulumFetchUrl(path);\n    if (this.lastSavedUrl === url) return;\n\n    this.isFetching = true;\n    this.dispatchEvent(new CustomEvent(\"statechanged\"));\n    const result = fetch ? await fetchReticulumAuthenticated(path) : EMPTY_RESULT;\n\n    if (this.requestIndex != currentRequestIndex) return;\n\n    this.result = result;\n    this.nextCursor = this.result && this.result.meta && this.result.meta.next_cursor;\n    this.lastFetchedUrl = url;\n    this.isFetching = false;\n    this.dispatchEvent(new CustomEvent(\"statechanged\"));\n  };\n\n  pageNavigate = delta => {\n    if (delta === -1) {\n      this.history.goBack();\n    } else {\n      const location = this.history.location;\n      const searchParams = new URLSearchParams(location.search);\n      searchParams.set(\"cursor\", this.nextCursor);\n      pushHistoryPath(this.history, location.pathname, searchParams.toString());\n    }\n  };\n\n  filterQueryNavigate = (filter, query) => {\n    const location = this.history.location;\n    const searchParams = new URLSearchParams(location.search);\n\n    searchParams.delete(\"similar_to\");\n    searchParams.delete(\"similar_name\");\n\n    if (query) {\n      searchParams.set(\"q\", query);\n    } else {\n      searchParams.delete(\"q\");\n    }\n\n    if (filter) {\n      searchParams.set(\"filter\", filter);\n    } else {\n      searchParams.delete(\"filter\");\n    }\n\n    if (filter) {\n      searchParams.set(\"cursor\", filter);\n    } else {\n      searchParams.delete(\"cursor\");\n    }\n\n    pushHistoryPath(this.history, location.pathname, searchParams.toString());\n  };\n\n  getSearchClearedSearchParams = (location, keepSource, keepNav, keepSelectAction) => {\n    const searchParams = new URLSearchParams(location.search);\n\n    // Strip browsing query params\n    searchParams.delete(\"q\");\n    searchParams.delete(\"filter\");\n    searchParams.delete(\"cursor\");\n    searchParams.delete(\"similar_to\");\n    searchParams.delete(\"similar_name\");\n\n    if (!keepNav) {\n      searchParams.delete(\"media_nav\");\n    }\n\n    if (!keepSource) {\n      searchParams.delete(\"media_source\");\n    }\n\n    if (!keepSelectAction) {\n      searchParams.delete(\"selectAction\");\n    }\n\n    return searchParams;\n  };\n\n  _stashLastSearchParams = location => {\n    const searchParams = new URLSearchParams(location.search);\n\n    this._stashedParams = {};\n    this._stashedSource = null;\n\n    const source = this.getUrlMediaSource(location);\n\n    // HACK for now do not stash favorite search, since that ends up being a source\n    // we do not reveal in the media browser UX. Revisit the rules here when we have a\n    // proper favorites browser. Then, we should have two separate stashes.\n    if (source === \"favorites\") return;\n    this._stashedSource = source;\n\n    for (const param of SEARCH_CONTEXT_PARAMS) {\n      const value = searchParams.get(param);\n\n      if (value) {\n        this._stashedParams[param] = value;\n      }\n    }\n  };\n\n  clearStashedQuery = () => {\n    if (!this._stashedParams) return;\n    delete this._stashedParams.q;\n  };\n\n  sourceNavigate = source => {\n    this._sourceNavigate(source, false, true);\n  };\n\n  sourceNavigateToDefaultSource = () => {\n    this._sourceNavigate(this._stashedSource ? this._stashedSource : SOURCES[0], false, true);\n  };\n\n  sourceNavigateWithNoNav = (source, selectAction) => {\n    this._sourceNavigate(source, true, false, selectAction);\n  };\n\n  _sourceNavigate = async (source, hideNav, useLastStashedParams, selectAction) => {\n    const currentQuery = new URLSearchParams(this.history.location.search).get(\"q\");\n    const searchParams = this.getSearchClearedSearchParams(this.history.location);\n\n    if (currentQuery) {\n      searchParams.set(\"q\", currentQuery);\n    } else {\n      if (useLastStashedParams && this._stashedParams) {\n        for (const param of SEARCH_CONTEXT_PARAMS) {\n          const value = this._stashedParams[param];\n\n          // Only q param is compatible across sources, so keep it if is stashed.\n          const useValue = param === \"q\" || this._stashedSource === source;\n\n          if (value && useValue) {\n            searchParams.set(param, value);\n          }\n        }\n      } else {\n        if (source === \"avatars\") {\n          const hasAccountWithAvatars = await this._hasAccountWithAvatars();\n          searchParams.set(\"filter\", hasAccountWithAvatars ? \"my-avatars\" : \"featured\");\n        } else if (MEDIA_SOURCE_DEFAULT_FILTERS[source]) {\n          searchParams.set(\"filter\", MEDIA_SOURCE_DEFAULT_FILTERS[source]);\n        }\n      }\n    }\n\n    this._stashedParams = null;\n    this._stashedSource = null;\n\n    if (hideNav) {\n      searchParams.set(\"media_nav\", \"false\");\n    }\n\n    if (selectAction) {\n      searchParams.set(\"selectAction\", selectAction);\n    }\n\n    if (hasReticulumServer() && document.location.host !== configs.RETICULUM_SERVER) {\n      searchParams.set(\"media_source\", source);\n      pushHistoryPath(this.history, this.history.location.pathname, searchParams.toString());\n    } else {\n      pushHistoryPath(this.history, withSlug(this.history.location, `/media/${source}`), searchParams.toString());\n    }\n  };\n\n  _hasAccountWithAvatars = async () => {\n    const { credentialsAccountId } = window.APP.store;\n    if (!credentialsAccountId) return false;\n\n    const searchParams = new URLSearchParams();\n    const source = \"avatars\";\n    searchParams.set(\"source\", source);\n    searchParams.set(\"user\", credentialsAccountId);\n    const result = await fetchReticulumAuthenticated(`/api/v1/media/search?${searchParams.toString()}`);\n    return !!(result && result.entries) && result.entries.length > 0;\n  };\n\n  getUrlMediaSource = location => {\n    const { search } = location;\n    const urlParams = new URLSearchParams(search);\n    const pathname = sluglessPath(location);\n\n    if (!pathname.startsWith(\"/media\") && !urlParams.get(\"media_source\")) return null;\n    return urlParams.get(\"media_source\") || pathname.substring(7);\n  };\n\n  pushExitMediaBrowserHistory = (history, stashLastSearchParams = true) => {\n    if (!history) history = this.history;\n\n    if (stashLastSearchParams) this._stashLastSearchParams(history.location);\n\n    const { pathname } = history.location;\n    const hasMediaPath = sluglessPath(history.location).startsWith(\"/media\");\n    pushHistoryPath(\n      history,\n      hasMediaPath ? withSlug(history.location, \"/\") : pathname,\n      this.getSearchClearedSearchParams(history.location).toString()\n    );\n    this.dispatchEvent(new CustomEvent(\"media-exit\"));\n  };\n}\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport { pushHistoryState, replaceHistoryState } from \"../utils/history\";\n\nfunction isModifiedEvent(event) {\n  return !!(event.metaKey || event.altKey || event.ctrlKey || event.shiftKey);\n}\n\n/**\n * A history-aware link that pushes/replaces the state, but not the path, in the browser history.\n */\nclass StateLink extends React.Component {\n  static propTypes = {\n    history: PropTypes.object,\n    innerRef: PropTypes.object,\n    replace: PropTypes.bool,\n    stateKey: PropTypes.string,\n    stateValue: PropTypes.string,\n    stateDetail: PropTypes.object,\n    target: PropTypes.string,\n    title: PropTypes.string,\n    onClick: PropTypes.func,\n    children: PropTypes.node,\n    className: PropTypes.string\n  };\n\n  async handleClick(event, history) {\n    if (this.props.onClick) this.props.onClick(event);\n\n    if (\n      !event.defaultPrevented && // onClick prevented default\n      event.button === 0 && // ignore everything but left clicks\n      (!this.props.target || this.props.target === \"_self\") && // let browser handle \"target=_blank\" etc.\n      !isModifiedEvent(event) // ignore clicks with modifier keys\n    ) {\n      event.preventDefault();\n      const method = this.props.replace ? replaceHistoryState : pushHistoryState;\n      method(history, this.props.stateKey, this.props.stateValue, this.props.stateDetail);\n    }\n  }\n\n  render() {\n    const { innerRef, target, className, title, children } = this.props;\n    return (\n      <a\n        target={target}\n        className={className}\n        title={title}\n        onClick={event => this.handleClick(event, this.props.history)}\n        href=\"#\"\n        ref={innerRef}\n      >\n        {children}\n      </a>\n    );\n  }\n}\n\nexport default StateLink;\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"touchZone\":\"virtual-gamepad-controls__touchZone__1KF_C\",\"left\":\"virtual-gamepad-controls__left__1-URB\",\"right\":\"virtual-gamepad-controls__right__1cgnU\",\"mockJoystickContainer\":\"virtual-gamepad-controls__mockJoystickContainer__1aH3e\",\"mockJoystick\":\"virtual-gamepad-controls__mockJoystick__2CuCG\",\"inner\":\"virtual-gamepad-controls__inner__1Bn3C\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"action-button\":\"create-object-dialog__action-button__3OIJQ\",\"actionButton\":\"create-object-dialog__action-button__3OIJQ\",\"buttons\":\"create-object-dialog__buttons__1zA-b\",\"small-button\":\"create-object-dialog__small-button__7UxXQ\",\"smallButton\":\"create-object-dialog__small-button__7UxXQ\",\"input-border\":\"create-object-dialog__input-border__1N9AV\",\"inputBorder\":\"create-object-dialog__input-border__1N9AV\",\"left-side-of-input\":\"create-object-dialog__left-side-of-input__zyV06\",\"leftSideOfInput\":\"create-object-dialog__left-side-of-input__zyV06\",\"add-media-form\":\"create-object-dialog__add-media-form__10Wh-\",\"addMediaForm\":\"create-object-dialog__add-media-form__10Wh-\",\"cancel-icon\":\"create-object-dialog__cancel-icon__yD-8A\",\"cancelIcon\":\"create-object-dialog__cancel-icon__yD-8A\",\"upload-icon\":\"create-object-dialog__upload-icon__19g9k\",\"uploadIcon\":\"create-object-dialog__upload-icon__19g9k\",\"hide-file-input\":\"create-object-dialog__hide-file-input__2myDe\",\"hideFileInput\":\"create-object-dialog__hide-file-input__2myDe\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"close-button\":\"link-dialog__close-button__2THTw\",\"closeButton\":\"link-dialog__close-button__2THTw\",\"domain\":\"link-dialog__domain__1WbPJ\",\"dialog\":\"link-dialog__dialog__1zbyG\",\"header\":\"link-dialog__header__1A06x\",\"contents\":\"link-dialog__contents__3ODVz\",\"code\":\"link-dialog__code__259RI\",\"imageHeader\":\"link-dialog__imageHeader__eaJe6\",\"keep-open\":\"link-dialog__keep-open__DYcUI\",\"keepOpen\":\"link-dialog__keep-open__DYcUI\",\"digit\":\"link-dialog__digit___zoC4\",\"code-loading-panel\":\"link-dialog__code-loading-panel__WKkNk\",\"codeLoadingPanel\":\"link-dialog__code-loading-panel__WKkNk\",\"close\":\"link-dialog__close__2TTmg\"};","import { detectOS } from \"detect-browser\";\n\nexport function disableiOSZoom() {\n  if (detectOS(navigator.userAgent) !== \"iOS\") return;\n\n  let lastTouchAtMs = 0;\n\n  document.addEventListener(\"touchmove\", ev => {\n    if (ev.scale === 1) return;\n\n    ev.preventDefault();\n  });\n\n  document.addEventListener(\"touchend\", ev => {\n    const now = new Date().getTime();\n    const isDoubleTouch = now - lastTouchAtMs <= 300;\n    lastTouchAtMs = now;\n\n    if (isDoubleTouch) {\n      ev.preventDefault();\n    }\n  });\n}\n","// Provides a global registry of running components\nexport function registerComponentInstance(component, name) {\n  window.APP.componentRegistry = window.APP.componentRegistry || {};\n  window.APP.componentRegistry[name] = window.APP.componentRegistry[name] || [];\n  window.APP.componentRegistry[name].push(component);\n}\n\nexport function deregisterComponentInstance(component, name) {\n  if (!window.APP.componentRegistry || !window.APP.componentRegistry[name]) return;\n  window.APP.componentRegistry[name].splice(window.APP.componentRegistry[name].indexOf(component), 1);\n}\n\nexport function getCurrentStreamer() {\n  if (!window.APP || !window.APP.componentRegistry || !window.APP.hubChannel || !window.APP.hubChannel.presence)\n    return null;\n  const playerInfos = window.APP.componentRegistry[\"player-info\"] || [];\n  const presences = window.APP.hubChannel.presence.state;\n\n  for (let i = 0; i < playerInfos.length; i++) {\n    const playerInfo = playerInfos[i];\n    const presence = presences[playerInfo.playerSessionId];\n\n    if (presence && presence.metas[0] && presence.metas[0].streaming) {\n      return playerInfo;\n    }\n  }\n\n  return null;\n}\n","// from https://developer.mozilla.org/en-US/docs/Web/HTTP/Browser_detection_using_the_user_agent\nfunction detectTouchScreen() {\n  let hasTouchScreen = false;\n  if (\"maxTouchPoints\" in navigator) {\n    hasTouchScreen = navigator.maxTouchPoints > 0;\n  } else if (\"msMaxTouchPoints\" in navigator) {\n    hasTouchScreen = navigator.msMaxTouchPoints > 0;\n  } else {\n    const mQ = window.matchMedia && matchMedia(\"(pointer:coarse)\");\n    if (mQ && mQ.media === \"(pointer:coarse)\") {\n      hasTouchScreen = !!mQ.matches;\n    } else if (\"orientation\" in window) {\n      hasTouchScreen = true; // deprecated, but good fallback\n    } else {\n      // Only as a last resort, fall back to user agent sniffing\n      const UA = navigator.userAgent;\n      hasTouchScreen =\n        /\\b(BlackBerry|webOS|iPhone|IEMobile)\\b/i.test(UA) || /\\b(Android|Windows Phone|iPad|iPod)\\b/i.test(UA);\n    }\n  }\n  return hasTouchScreen;\n}\n\nlet hackyMobileSafariTestValue = null;\n\n// HACK for https://github.com/mozilla/hubs/issues/1813\n// Touchscreen controls depend on iPad and iPhone detection,\n// which recently regressed. For UA matching \"Macintosh\", enable\n// touchscreen controls if there exists a touchscreen.\n// We cannot always enable touchscreen controls when a touchscreen\n// is present until we fix conflicts between simultaneous mouse\n// and touchscreen interactions.\nexport function hackyMobileSafariTest() {\n  if (hackyMobileSafariTestValue === null) {\n    hackyMobileSafariTestValue = /\\b(Macintosh|iPad|iPhone)\\b/i.test(navigator.userAgent) && detectTouchScreen();\n  }\n\n  return hackyMobileSafariTestValue;\n  // e.g. Match\n  // Mozilla/5.0 (Macintosh; Intel Mac OS X 10_15) AppleWebKit/605.1.15 (KHTML, like Gecko) Version/13.0.1 Safari/605.1.15\n  // but not\n  // \"Mozilla/5.0 (X11; Linux x86_64) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/76.0.3809.100 Safari/537.36\"\n}\n","import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport { FormattedMessage } from \"react-intl\";\n\nimport configs from \"../utils/configs\";\nimport IfFeature from \"./if-feature\";\nimport styles from \"../assets/stylesheets/sign-in-dialog.scss\";\nimport DialogContainer from \"./dialog-container\";\nimport { handleTextFieldFocus, handleTextFieldBlur } from \"../utils/focus-utils\";\n\nexport default class SignInDialog extends Component {\n  static propTypes = {\n    authStarted: PropTypes.bool,\n    authComplete: PropTypes.bool,\n    onSignIn: PropTypes.func,\n    onContinue: PropTypes.func,\n    message: PropTypes.string,\n    continueText: PropTypes.string,\n    closable: PropTypes.bool\n  };\n\n  static defaultProps = {\n    closable: true\n  };\n\n  state = {\n    email: \"\"\n  };\n\n  onSubmit = e => {\n    e.preventDefault();\n    e.stopPropagation();\n    this.props.onSignIn(this.state.email);\n  };\n\n  render() {\n    let contents;\n    if (this.props.authStarted) {\n      contents = (\n        <p>\n          <FormattedMessage className=\"preformatted\" id=\"sign-in.auth-started\" />\n        </p>\n      );\n    } else if (this.props.authComplete) {\n      contents = (\n        <div className={styles.signInComplete}>\n          <p>{this.props.message}</p>\n          <button onClick={this.props.onContinue} className={styles.continueButton}>\n            {this.props.continueText}\n          </button>\n        </div>\n      );\n    } else {\n      contents = (\n        <form onSubmit={this.onSubmit} className={styles.signInForm}>\n          <span>{this.props.message}</span>\n          <input\n            name=\"email\"\n            type=\"email\"\n            required\n            placeholder=\"Your email address\"\n            value={this.state.email}\n            onFocus={e => handleTextFieldFocus(e.target)}\n            onBlur={() => handleTextFieldBlur()}\n            onChange={e => this.setState({ email: e.target.value })}\n            className={styles.emailField}\n          />\n          {(configs.feature(\"show_terms\") || configs.feature(\"show_privacy\")) && (\n            <p className={styles.terms}>\n              By proceeding, you agree to the{\" \"}\n              <IfFeature name=\"show_terms\">\n                <a\n                  rel=\"noopener noreferrer\"\n                  target=\"_blank\"\n                  href={configs.link(\"terms_of_use\", \"https://github.com/mozilla/hubs/blob/master/TERMS.md\")}\n                >\n                  terms of use\n                </a>{\" \"}\n              </IfFeature>\n              {configs.feature(\"show_terms\") && configs.feature(\"show_privacy\") && \"and \"}\n              <IfFeature name=\"show_privacy\">\n                <a\n                  rel=\"noopener noreferrer\"\n                  target=\"_blank\"\n                  href={configs.link(\"privacy_notice\", \"https://github.com/mozilla/hubs/blob/master/PRIVACY.md\")}\n                >\n                  privacy notice\n                </a>\n              </IfFeature>.\n            </p>\n          )}\n          <button type=\"submit\" className={styles.nextButton}>\n            next\n          </button>\n        </form>\n      );\n    }\n\n    return (\n      <DialogContainer title=\"Sign In\" {...this.props}>\n        {contents}\n      </DialogContainer>\n    );\n  }\n}\n","import { forEachMaterial } from \"../utils/material-utils\";\nimport { showHoverEffect } from \"../utils/permissions-utils\";\n\nconst interactorOneTransform = [];\nconst interactorTwoTransform = [];\n\nexport const validMaterials = [\"MeshStandardMaterial\", \"MeshBasicMaterial\", \"MobileStandardMaterial\"];\n/**\n * Applies effects to a hoverable based on hover state.\n * @namespace interactables\n * @component hoverable-visuals\n */\nAFRAME.registerComponent(\"hoverable-visuals\", {\n  schema: {\n    enableSweepingEffect: { type: \"boolean\", default: true }\n  },\n  init() {\n    // uniforms and boundingSphere are set from the component responsible for loading the mesh.\n    this.uniforms = null;\n    this.geometryRadius = 0;\n\n    this.sweepParams = [0, 0];\n  },\n  remove() {\n    this.uniforms = null;\n    this.boundingBox = null;\n\n    // Used when the object is batched\n    const batchManagerSystem = this.el.sceneEl.systems[\"hubs-systems\"].batchManagerSystem;\n    this.el.object3D.traverse(object => {\n      if (!object.material) return;\n      forEachMaterial(object, material => {\n        if (\n          !validMaterials.includes(material.type) ||\n          object.el.classList.contains(\"ui\") ||\n          object.el.classList.contains(\"hud\") ||\n          object.el.getAttribute(\"text-button\")\n        )\n          return;\n\n        batchManagerSystem.meshToEl.delete(object);\n      });\n    });\n\n    const isMobile = AFRAME.utils.device.isMobile();\n    const isMobileVR = AFRAME.utils.device.isMobileVR();\n    this.isTouchscreen = isMobile && !isMobileVR;\n  },\n  tick(time) {\n    if (!this.uniforms || !this.uniforms.length) return;\n\n    const isFrozen = this.el.sceneEl.is(\"frozen\");\n    const showEffect = showHoverEffect(this.el);\n    const toggling = this.el.sceneEl.systems[\"hubs-systems\"].cursorTogglingSystem;\n\n    let interactorOne, interactorTwo;\n    const interaction = this.el.sceneEl.systems.interaction;\n    if (!interaction.ready) return; //DOMContentReady workaround\n    if (interaction.state.leftHand.hovered === this.el && !interaction.state.leftHand.held) {\n      interactorOne = interaction.options.leftHand.entity.object3D;\n    }\n    if (\n      interaction.state.leftRemote.hovered === this.el &&\n      !interaction.state.leftRemote.held &&\n      !toggling.leftToggledOff\n    ) {\n      interactorOne = interaction.options.leftRemote.entity.object3D;\n    }\n    if (\n      interaction.state.rightRemote.hovered === this.el &&\n      !interaction.state.rightRemote.held &&\n      !toggling.rightToggledOff\n    ) {\n      interactorTwo = interaction.options.rightRemote.entity.object3D;\n    }\n    if (interaction.state.rightHand.hovered === this.el && !interaction.state.rightHand.held) {\n      interactorTwo = interaction.options.rightHand.entity.object3D;\n    }\n\n    if (interactorOne) {\n      interactorOne.matrixWorld.toArray(interactorOneTransform);\n    }\n    if (interactorTwo) {\n      interactorTwo.matrixWorld.toArray(interactorTwoTransform);\n    }\n\n    if (interactorOne || interactorTwo || isFrozen) {\n      const worldY = this.el.object3D.matrixWorld.elements[13];\n      const ms1 = this.el.object3D.matrixWorld.elements[4];\n      const ms2 = this.el.object3D.matrixWorld.elements[5];\n      const ms3 = this.el.object3D.matrixWorld.elements[6];\n      const worldScale = Math.sqrt(ms1 * ms1 + ms2 * ms2 + ms3 * ms3);\n      const scaledRadius = worldScale * this.geometryRadius;\n      this.sweepParams[0] = worldY - scaledRadius;\n      this.sweepParams[1] = worldY + scaledRadius;\n    }\n\n    for (let i = 0, l = this.uniforms.length; i < l; i++) {\n      const uniform = this.uniforms[i];\n      uniform.hubs_EnableSweepingEffect.value = this.data.enableSweepingEffect && showEffect;\n      uniform.hubs_IsFrozen.value = isFrozen;\n      uniform.hubs_SweepParams.value = this.sweepParams;\n\n      uniform.hubs_HighlightInteractorOne.value = !!interactorOne && showEffect && !this.isTouchscreen;\n      uniform.hubs_InteractorOnePos.value[0] = interactorOneTransform[12];\n      uniform.hubs_InteractorOnePos.value[1] = interactorOneTransform[13];\n      uniform.hubs_InteractorOnePos.value[2] = interactorOneTransform[14];\n\n      uniform.hubs_HighlightInteractorTwo.value = !!interactorTwo && showEffect && !this.isTouchscreen;\n      uniform.hubs_InteractorTwoPos.value[0] = interactorTwoTransform[12];\n      uniform.hubs_InteractorTwoPos.value[1] = interactorTwoTransform[13];\n      uniform.hubs_InteractorTwoPos.value[2] = interactorTwoTransform[14];\n\n      if (interactorOne || interactorTwo || isFrozen) {\n        uniform.hubs_Time.value = time;\n      }\n    }\n  }\n});\n","import { isLocalHubsSceneUrl, proxiedUrlFor } from \"../utils/media-url-utils\";\n\nexport async function isValidGLB(url) {\n  return fetch(url).then(async r => {\n    const reader = r.body.getReader();\n    let header = \"\";\n    function readChunk({ done, value }) {\n      header += String.fromCharCode.apply(null, value.slice(0, 4));\n      if (!done && header.length < 4) {\n        return reader.read().then(readChunk);\n      } else {\n        reader.cancel();\n      }\n    }\n    await reader.read().then(readChunk);\n    return header.startsWith(\"glTF\");\n  });\n}\n\nexport async function isValidSceneUrl(url) {\n  if (url.trim() === \"\") return false;\n  if (!url.startsWith(\"http\")) return false;\n  if (await isLocalHubsSceneUrl(url)) {\n    return true;\n  } else {\n    return isValidGLB(proxiedUrlFor(url));\n  }\n}\n\n// To assist with content control, we avoid displaying scene links to users who are not the scene\n// creator, unless the scene is remixable or promotable.\nexport function allowDisplayOfSceneLink(scene, store) {\n  return (\n    (store.credentialsAccountId && scene.account_id === store.credentialsAccountId) ||\n    scene.allow_promotion ||\n    scene.allow_remixing\n  );\n}\n","module.exports = __webpack_public_path__ + \"assets/waternormals-4418dde3f6abc21dc32506acf5f5b093.jpg\";","// extracted by mini-css-extract-plugin\nmodule.exports = {\"load-button\":\"preload-overlay__load-button__ba1d4\",\"loadButton\":\"preload-overlay__load-button__ba1d4\",\"treatment\":\"preload-overlay__treatment__1L4r0\",\"screenshot\":\"preload-overlay__screenshot__3TZYm\",\"hub-name\":\"preload-overlay__hub-name__2txaT\",\"hubName\":\"preload-overlay__hub-name__2txaT\",\"main-panel\":\"preload-overlay__main-panel__2EX4k\",\"mainPanel\":\"preload-overlay__main-panel__2EX4k\",\"logo\":\"preload-overlay__logo__1IJJc\"};","import { forEachMaterial } from \"../utils/material-utils\";\nimport cubeMapPosX from \"../assets/images/cubemap/posx.jpg\";\nimport cubeMapNegX from \"../assets/images/cubemap/negx.jpg\";\nimport cubeMapPosY from \"../assets/images/cubemap/posy.jpg\";\nimport cubeMapNegY from \"../assets/images/cubemap/negy.jpg\";\nimport cubeMapPosZ from \"../assets/images/cubemap/posz.jpg\";\nimport cubeMapNegZ from \"../assets/images/cubemap/negz.jpg\";\n\nexport async function createDefaultEnvironmentMap() {\n  const urls = [cubeMapPosX, cubeMapNegX, cubeMapPosY, cubeMapNegY, cubeMapPosZ, cubeMapNegZ];\n  const texture = await new Promise((resolve, reject) =>\n    new THREE.CubeTextureLoader().load(urls, resolve, undefined, reject)\n  );\n  texture.format = THREE.RGBFormat;\n  return texture;\n}\n\nAFRAME.registerComponent(\"environment-map\", {\n  init() {\n    this.environmentMap = null;\n\n    this.updateEnvironmentMap = this.updateEnvironmentMap.bind(this);\n  },\n\n  updateEnvironmentMap(environmentMap) {\n    this.environmentMap = environmentMap;\n    this.applyEnvironmentMap(this.el.object3D);\n  },\n\n  applyEnvironmentMap(object3D) {\n    object3D.traverse(object => {\n      forEachMaterial(object, material => {\n        if (material.isMeshStandardMaterial) {\n          material.envMap = this.environmentMap;\n          material.needsUpdate = true;\n        }\n      });\n    });\n  }\n});\n","module.exports = \"if (hubs_HighlightInteractorOne || hubs_HighlightInteractorTwo || hubs_IsFrozen) {\\n  float ratio = 0.0;\\n  float size = hubs_SweepParams.t - hubs_SweepParams.s;\\n\\n  if (hubs_EnableSweepingEffect) {\\n    float line = mod(hubs_Time / 500.0 * size, size * 3.0) + hubs_SweepParams.s - size / 3.0;\\n\\n    if (hubs_WorldPosition.y < line) {\\n      // Highlight with a sweeping gradient.\\n      ratio = max(0.0, 1.0 - (line - hubs_WorldPosition.y) / (size * 1.5));\\n    }\\n  }\\n\\n  // Highlight with a gradient falling off with distance.\\n  float pulse = 1.0 / (size + 0.2) * 8.0 + 1.0 / (size + 0.3) * 3.0 * (sin(hubs_Time / 1000.0) + 1.0);\\n\\n  if (hubs_HighlightInteractorOne) {\\n    float dist1 = distance(hubs_WorldPosition, hubs_InteractorOnePos);\\n    ratio += -min(1.0, pow(dist1 * pulse, 3.0)) + 1.0;\\n  } \\n\\n  if (hubs_HighlightInteractorTwo) {\\n    float dist2 = distance(hubs_WorldPosition, hubs_InteractorTwoPos);\\n    ratio += -min(1.0, pow(dist2 * pulse, 3.0)) + 1.0;\\n  }\\n\\n  ratio = min(1.0, ratio);\\n\\n  // Gamma corrected highlight color\\n  vec3 highlightColor = vec3(0.184, 0.499, 0.933);\\n\\n  gl_FragColor.rgb = (gl_FragColor.rgb * (1.0 - ratio)) + (highlightColor * ratio);\\n}\\n\"","module.exports = __webpack_public_path__ + \"assets/images/cubemap/posx-d235fb97df77b607be04b84125f40e7c.jpg\";","module.exports = __webpack_public_path__ + \"assets/images/cubemap/negx-35034574e114423babdea92b6a2eb97a.jpg\";","module.exports = __webpack_public_path__ + \"assets/images/cubemap/posy-d0c4e1e7979d75923d4d8b49c191bc6e.jpg\";","module.exports = __webpack_public_path__ + \"assets/images/cubemap/negy-35808d21d1d17ac1b84d3184e365093b.jpg\";","module.exports = __webpack_public_path__ + \"assets/images/cubemap/posz-de29aa8396196e4b040cd5305e351dbe.jpg\";","module.exports = __webpack_public_path__ + \"assets/images/cubemap/negz-d73d18a8b7994524dc39a6ea3fcf43fc.jpg\";","import Store from \"./storage/store\";\nimport MediaSearchStore from \"./storage/media-search-store\";\n\nexport class App {\n  constructor() {\n    this.scene = null;\n    this.quality = \"low\";\n    this.store = new Store();\n    this.mediaSearchStore = new MediaSearchStore();\n  }\n\n  setQuality(quality) {\n    if (this.quality === quality) {\n      return false;\n    }\n\n    this.quality = quality;\n\n    if (this.scene) {\n      this.scene.dispatchEvent(new CustomEvent(\"quality-changed\", { detail: quality }));\n    }\n\n    return true;\n  }\n}\n","import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport { injectIntl, FormattedMessage } from \"react-intl\";\nimport classNames from \"classnames\";\nimport \"three/examples/js/controls/OrbitControls\";\n\nimport { createDefaultEnvironmentMap } from \"../components/environment-map\";\nimport { loadGLTF } from \"../components/gltf-model-plus\";\nimport { disposeNode, findNode } from \"../utils/three-utils\";\nimport { ensureAvatarMaterial, MAT_NAME } from \"../utils/avatar-utils\";\nimport { createImageBitmap, disposeImageBitmap } from \"../utils/image-bitmap-utils\";\nimport styles from \"../assets/stylesheets/avatar-preview.scss\";\n\nconst TEXTURE_PROPS = {\n  base_map: [\"map\"],\n  emissive_map: [\"emissiveMap\"],\n  normal_map: [\"normalMap\"],\n  orm_map: [\"aoMap\", \"roughnessMap\", \"metalnessMap\"]\n};\n\nconst ALL_MAPS = Object.keys(TEXTURE_PROPS);\n\n// This should match our aframe renderer=\"antialias: true; colorManagement: true; sortObjects: true;\n// physicallyCorrectLights: true; webgl2: true; multiview: false;\"\nfunction createRenderer(canvas, alpha = false, useDevicePixelRatio = true) {\n  const context = canvas.getContext(\"webgl2\", {\n    alpha,\n    depth: true,\n    antialias: true,\n    premultipliedAlpha: true,\n    preserveDrawingBuffer: false,\n    powerPreference: \"default\"\n  });\n\n  const renderer = new THREE.WebGLRenderer({ alpha, canvas, context, forceWebVR: true });\n  renderer.gammaOutput = true;\n  renderer.gammaFactor = 2.2;\n  renderer.physicallyCorrectLights = true;\n  if (useDevicePixelRatio) {\n    renderer.setPixelRatio(window.devicePixelRatio);\n  }\n  return renderer;\n}\n\nconst createImageBitmapFromURL = url =>\n  fetch(url)\n    .then(r => r.blob())\n    .then(createImageBitmap);\n\nconst ORBIT_ANGLE = new THREE.Euler(-30 * THREE.Math.DEG2RAD, 30 * THREE.Math.DEG2RAD, 0);\nconst DEFAULT_MARGIN = 1;\n\nfunction fitBoxInFrustum(camera, box, center, margin = DEFAULT_MARGIN) {\n  const halfYExtents = Math.max(box.max.y - center.y, center.y - box.min.y);\n  const halfVertFOV = THREE.Math.degToRad(camera.fov / 2);\n  camera.position.set(0, 0, (halfYExtents / Math.tan(halfVertFOV) + box.max.z) * margin);\n  camera.position.applyEuler(ORBIT_ANGLE);\n  camera.position.add(center);\n  camera.lookAt(center);\n}\n\nclass AvatarPreview extends Component {\n  static propTypes = {\n    avatarGltfUrl: PropTypes.string,\n    className: PropTypes.string,\n    onGltfLoaded: PropTypes.func\n  };\n  constructor(props) {\n    super(props);\n    this.state = { loading: true, error: null };\n    this.avatar = null;\n    this.imageBitmaps = {};\n  }\n\n  componentDidMount = () => {\n    this.scene = new THREE.Scene();\n\n    this.camera = new THREE.PerspectiveCamera(55, this.canvas.clientWidth / this.canvas.clientHeight, 0.1, 1000);\n    this.controls = new THREE.OrbitControls(this.camera, this.canvas);\n    this.controls.enablePan = false;\n\n    const light = new THREE.DirectionalLight(0xf7f6ef, 1);\n    light.position.set(0, 10, 10);\n    this.scene.add(light);\n    this.scene.add(new THREE.HemisphereLight(0xb1e3ff, 0xb1e3ff, 2.5));\n\n    this.loadId = 0;\n\n    this.camera.position.set(-0.2, 0.5, 0.5);\n    this.camera.matrixAutoUpdate = true;\n\n    this.controls.target.set(0, 0.45, 0);\n    this.controls.update();\n\n    if (this.props.avatarGltfUrl) {\n      this.loadCurrentAvatarGltfUrl();\n    }\n\n    const clock = new THREE.Clock();\n\n    this.snapshotCanvas = document.createElement(\"canvas\");\n    this.snapshotCanvas.width = 720;\n    this.snapshotCanvas.height = 1280;\n    this.snapshotCamera = new THREE.PerspectiveCamera(55, 720 / 1280, 0.1, 1000);\n    this.snapshotCamera.matrixAutoUpdate = true;\n    this.snapshotRenderer = createRenderer(this.snapshotCanvas, true, false);\n    this.snapshotRenderer.setClearAlpha(0);\n\n    this.previewRenderer = createRenderer(this.canvas);\n    this.previewRenderer.setClearColor(0xeaeaea);\n    this.previewRenderer.setAnimationLoop(() => {\n      const dt = clock.getDelta();\n      this.mixer && this.mixer.update(dt);\n      this.previewRenderer.render(this.scene, this.camera);\n    });\n    window.addEventListener(\"resize\", this.resize);\n    this.resize();\n  };\n\n  resize = () => {\n    const width = this.canvas.parentElement.offsetWidth;\n    const height = this.canvas.parentElement.offsetHeight;\n    this.previewRenderer.setSize(width, height);\n    this.camera.aspect = width / height;\n    this.camera.updateProjectionMatrix();\n  };\n\n  setAvatar = avatar => {\n    if (!avatar) return;\n    this.avatar = avatar;\n    this.scene.add(avatar);\n    this.resetCamera();\n    this.setState({ error: null, loading: false });\n  };\n\n  resetCamera = (() => {\n    const box = new THREE.Box3();\n    const center = new THREE.Vector3();\n    return () => {\n      box.setFromObject(this.avatar);\n      box.getCenter(center);\n\n      // Shift the center vertically in order to frame the avatar nicely.\n      center.y = (box.max.y - box.min.y) * 0.6 + box.min.y;\n\n      fitBoxInFrustum(this.camera, box, center);\n      fitBoxInFrustum(this.snapshotCamera, box, center, 0.7);\n\n      this.controls.target.copy(center);\n      this.controls.update();\n    };\n  })();\n\n  componentWillUnmount = () => {\n    // Gotta be particularly careful about disposing things here since we will likely create many avatar\n    // previews during a session and Chrome will eventually discard the oldest webgl context if we leak\n    // contexts by holding on to them directly or indirectly.\n\n    this.scene && this.scene.traverse(disposeNode);\n    if (this.previewRenderer) {\n      this.previewRenderer.dispose();\n      this.previewRenderer.context = null;\n    }\n    if (this.snapshotRenderer) {\n      this.snapshotRenderer.dispose();\n      this.snapshotRenderer.context = null;\n    }\n    if (this.controls) {\n      this.controls.dispose();\n      this.controls.domElement = null;\n    }\n\n    Object.values(this.imageBitmaps).forEach(img => disposeImageBitmap(img));\n    window.removeEventListener(\"resize\", this.resize);\n  };\n\n  componentDidUpdate = async oldProps => {\n    if (oldProps.avatarGltfUrl !== this.props.avatarGltfUrl) {\n      if (this.avatar) {\n        this.scene.remove(this.avatar);\n        this.avatar = null;\n      }\n      if (this.props.avatarGltfUrl) {\n        this.setState({ error: null, loading: true });\n        await this.loadCurrentAvatarGltfUrl();\n      }\n    }\n    this.applyMaps(oldProps, this.props);\n  };\n\n  async loadCurrentAvatarGltfUrl() {\n    const newLoadId = ++this.loadId;\n    const gltf = await this.loadPreviewAvatar(this.props.avatarGltfUrl);\n    // If we had started loading another avatar while we were loading this one, throw this one away\n    if (newLoadId !== this.loadId) return;\n    if (gltf && this.props.onGltfLoaded) this.props.onGltfLoaded(gltf);\n    this.setAvatar(gltf.scene);\n  }\n\n  applyMaps(oldProps, newProps) {\n    return Promise.all(\n      ALL_MAPS.map(mapName => {\n        const applyMap = this.applyMapToPreview.bind(this, mapName);\n        if (oldProps[mapName] != newProps[mapName]) {\n          if (newProps[mapName] instanceof File) {\n            return createImageBitmap(newProps[mapName]).then(applyMap);\n          } else if (newProps[mapName]) {\n            return createImageBitmapFromURL(newProps[mapName]).then(applyMap);\n          } else {\n            return this.revertMap(mapName);\n          }\n        }\n      })\n    );\n  }\n\n  loadPreviewAvatar = async avatarGltfUrl => {\n    let gltf;\n    try {\n      const technique = window.APP.quality === \"low\" ? \"KHR_materials_unlit\" : \"pbrMetallicRoughness\";\n      gltf = await loadGLTF(avatarGltfUrl, \"model/gltf\", technique, null, ensureAvatarMaterial);\n    } catch (e) {\n      console.error(\"Failed to load avatar preview\", e);\n      this.setState({ loading: false, error: true });\n      return;\n    }\n\n    // TODO Check for \"Bot_Skinned\" here is a hack for legacy avatars which only has a name one of the MOZ_alt_material nodes\n    this.previewMesh = findNode(\n      gltf.scene,\n      n => (n.isMesh && n.material && n.material.name === MAT_NAME) || n.name === \"Bot_Skinned\"\n    );\n\n    if (!this.previewMesh) {\n      console.error(\"Failed to find avatar preview mesh\");\n      this.setState({ loading: false, error: true });\n      return;\n    }\n\n    const idleAnimation = gltf.animations && gltf.animations.find(({ name }) => name === \"idle_eyes\");\n    if (idleAnimation) {\n      this.mixer = new THREE.AnimationMixer(gltf.scene);\n      const action = this.mixer.clipAction(idleAnimation);\n      action.enabled = true;\n      action.setLoop(THREE.LoopRepeat, Infinity).play();\n      this.idleAnimationAction = action;\n    }\n\n    const { material } = this.previewMesh;\n    if (material) {\n      // We delete onUpdate here to opt out of the auto texture cleanup after GPU upload.\n      const getImage = p => material[p] && delete material[p].onUpdate && material[p].image;\n      this.originalMaps = {\n        base_map: TEXTURE_PROPS[\"base_map\"].map(getImage),\n        emissive_map: TEXTURE_PROPS[\"emissive_map\"].map(getImage),\n        normal_map: TEXTURE_PROPS[\"normal_map\"].map(getImage),\n        orm_map: TEXTURE_PROPS[\"orm_map\"].map(getImage)\n      };\n\n      await Promise.all([\n        this.applyMaps({}, this.props), // Apply initial maps\n        createDefaultEnvironmentMap().then(t => {\n          this.previewMesh.material.envMap = t;\n          this.previewMesh.material.needsUpdate = true;\n        })\n      ]);\n    } else {\n      this.originalMaps = {};\n    }\n\n    return gltf;\n  };\n\n  applyMapToPreview = (name, image) => {\n    if (this.imageBitmaps[name]) {\n      disposeImageBitmap(this.imageBitmaps[name]);\n    }\n    this.imageBitmaps[name] = image;\n    TEXTURE_PROPS[name].forEach(prop => {\n      const texture = this.previewMesh.material[prop];\n      texture.image = image;\n      texture.needsUpdate = true;\n    });\n  };\n\n  revertMap = name => {\n    if (this.imageBitmaps[name]) {\n      disposeImageBitmap(this.imageBitmaps[name]);\n    }\n    delete this.imageBitmaps[name];\n    this.originalMaps[name].forEach((bm, i) => {\n      const texture = this.previewMesh.material[TEXTURE_PROPS[name][i]];\n      texture.image = bm;\n      texture.needsUpdate = true;\n    });\n  };\n\n  snapshot = () => {\n    return new Promise(resolve => {\n      if (this.idleAnimationAction) this.idleAnimationAction.stop();\n      this.snapshotRenderer.render(this.scene, this.snapshotCamera);\n      this.snapshotCanvas.toBlob(blob => {\n        if (this.idleAnimationAction) this.idleAnimationAction.play();\n        resolve(blob);\n      });\n    });\n  };\n\n  render() {\n    return (\n      <div className={classNames(styles.preview, this.props.className)}>\n        {!this.props.avatarGltfUrl ||\n          (this.state.loading &&\n            !this.state.error && (\n              <div className=\"loader\">\n                <div className=\"loader-center\" />\n              </div>\n            ))}\n        {this.props.avatarGltfUrl &&\n          (this.state.error && !this.state.loading) && (\n            <div className=\"error\">\n              <img\n                src=\"../assets/images/warning_icon.png\"\n                srcSet=\"../assets/images/warning_icon@2x.png 2x\"\n                className=\"error-icon\"\n              />\n              <FormattedMessage id=\"avatar-preview.loading-failed\" />\n            </div>\n          )}\n        <canvas ref={c => (this.canvas = c)} />\n      </div>\n    );\n  }\n}\n\nexport default injectIntl(AvatarPreview, { withRef: true });\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"action-button\":\"change-scene-dialog__action-button__1xtdK\",\"actionButton\":\"change-scene-dialog__action-button__1xtdK\",\"buttons\":\"change-scene-dialog__buttons__2QE34\",\"spoke-launch\":\"change-scene-dialog__spoke-launch__YObDn\",\"spokeLaunch\":\"change-scene-dialog__spoke-launch__YObDn\",\"input-border\":\"change-scene-dialog__input-border__30jd6\",\"inputBorder\":\"change-scene-dialog__input-border__30jd6\",\"left-side-of-input\":\"change-scene-dialog__left-side-of-input__14WKu\",\"leftSideOfInput\":\"change-scene-dialog__left-side-of-input__14WKu\",\"change-scene-button\":\"change-scene-dialog__change-scene-button__ckfZW\",\"changeSceneButton\":\"change-scene-dialog__change-scene-button__ckfZW\",\"spoke-create\":\"change-scene-dialog__spoke-create__2krL-\",\"spokeCreate\":\"change-scene-dialog__spoke-create__2krL-\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"oauth-discord-button\":\"oauth-dialog__oauth-discord-button__A_Zra\",\"oauthDiscordButton\":\"oauth-dialog__oauth-discord-button__A_Zra\",\"oauth-twitter-button\":\"oauth-dialog__oauth-twitter-button__Vh4oX\",\"oauthTwitterButton\":\"oauth-dialog__oauth-twitter-button__Vh4oX\",\"oauth-button\":\"oauth-dialog__oauth-button__25RiO\",\"oauthButton\":\"oauth-dialog__oauth-button__25RiO\",\"oauth-type-name\":\"oauth-dialog__oauth-type-name__jPyhW\",\"oauthTypeName\":\"oauth-dialog__oauth-type-name__jPyhW\",\"oauth-icon\":\"oauth-dialog__oauth-icon__v1G6W\",\"oauthIcon\":\"oauth-dialog__oauth-icon__v1G6W\",\"privacy-notice\":\"oauth-dialog__privacy-notice__2R9ZT\",\"privacyNotice\":\"oauth-dialog__privacy-notice__2R9ZT\",\"oauth-buttons\":\"oauth-dialog__oauth-buttons__1U1Ni\",\"oauthButtons\":\"oauth-dialog__oauth-buttons__1U1Ni\",\"twitter-message\":\"oauth-dialog__twitter-message__cWCES\",\"twitterMessage\":\"oauth-dialog__twitter-message__cWCES\"};","/*\nHACK Fix a-frame's device detection in Chrome when WebXR or WebVR flags are enabled in\nchrome://flags. See https://github.com/mozilla/hubs/issues/892\n*/\nif (!/Oculus/.test(navigator.userAgent) && navigator.xr && !navigator.xr.requestDevice) {\n  navigator.xr.requestDevice = () => Promise.reject({ message: \"Hubs: requestDevice not supported.\" });\n}\n/*\nHACK Call getVRDisplays to force Oculus Browser to use WebVR, which in turn disables the WebXR API.\n*/\nif (/Oculus/.test(navigator.userAgent)) {\n  navigator.getVRDisplays();\n}\n","import { findAncestorWithComponent } from \"../utils/scene-graph\";\nimport { waitForDOMContentLoaded } from \"../utils/async-utils\";\nimport { easeOutQuadratic } from \"../utils/easing\";\n\n// This computation is expensive, so we run on at most one avatar per frame, including quiet avatars.\n// However if we detect an avatar is seen speaking (its volume is above DISABLE_AT_VOLUME_THRESHOLD)\n// then we continue analysis for at least DISABLE_GRACE_PERIOD_MS and disable doing it every frame if\n// the avatar is quiet during that entire duration (eg they are muted)\nconst DISABLE_AT_VOLUME_THRESHOLD = 0.00001;\nconst DISABLE_GRACE_PERIOD_MS = 10000;\nconst MIN_VOLUME_THRESHOLD = 0.08;\n\nconst calculateVolume = (analyser, levels) => {\n  // take care with compatibility, e.g. safari doesn't support getFloatTimeDomainData\n  analyser.getByteTimeDomainData(levels);\n  let sum = 0;\n  for (let i = 0; i < levels.length; i++) {\n    const amplitude = (levels[i] - 128) / 128;\n    sum += amplitude * amplitude;\n  }\n  const currVolume = Math.sqrt(sum / levels.length);\n  return currVolume;\n};\n\nconst tempScaleFromPosition = new THREE.Vector3();\nconst tempScaleToPosition = new THREE.Vector3();\n\nexport function getAudioFeedbackScale(fromObject, toObject, minScale, maxScale, volume) {\n  tempScaleToPosition.setFromMatrixPosition(toObject.matrixWorld);\n  tempScaleFromPosition.setFromMatrixPosition(fromObject.matrixWorld);\n  const distance = tempScaleFromPosition.distanceTo(tempScaleToPosition) / 10;\n  return Math.min(maxScale, minScale + (maxScale - minScale) * volume * 8 * distance);\n}\n\nfunction updateVolume(component) {\n  const newRawVolume = calculateVolume(component.analyser, component.levels);\n\n  const newPerceivedVolume = Math.log(THREE.Math.mapLinear(newRawVolume, 0, 1, 1, Math.E));\n\n  component.volume = newPerceivedVolume < MIN_VOLUME_THRESHOLD ? 0 : newPerceivedVolume;\n\n  const s = component.volume > component.prevVolume ? 0.35 : 0.3;\n  component.volume = s * component.volume + (1 - s) * component.prevVolume;\n  component.prevVolume = component.volume;\n}\n\n/**\n * Updates a `volume` property based on a networked audio source\n * @namespace avatar\n * @component networked-audio-analyser\n */\nAFRAME.registerComponent(\"networked-audio-analyser\", {\n  async init() {\n    this.volume = 0;\n    this.prevVolume = 0;\n    this.loudest = 0;\n\n    this._updateAnalysis = this._updateAnalysis.bind(this);\n    this._runScheduledWork = this._runScheduledWork.bind(this);\n    this.el.sceneEl.systems[\"frame-scheduler\"].schedule(this._updateAnalysis, \"audio-analyser\");\n    this.el.addEventListener(\"sound-source-set\", event => {\n      const ctx = THREE.AudioContext.getContext();\n      this.analyser = ctx.createAnalyser();\n      this.analyser.fftSize = 32;\n      this.levels = new Uint8Array(this.analyser.fftSize);\n      event.detail.soundSource.connect(this.analyser);\n    });\n  },\n\n  remove: function() {\n    this.el.sceneEl.systems[\"frame-scheduler\"].unschedule(this._runScheduledWork, \"audio-analyser\");\n  },\n\n  tick: function(t) {\n    if (!this.avatarIsQuiet) {\n      this._updateAnalysis(t);\n    }\n  },\n\n  _runScheduledWork: function() {\n    if (this.avatarIsQuiet) {\n      this._updateAnalysis();\n    }\n  },\n\n  // Updates the analysis/volume. If t is passed, that implies this is called via tick\n  // and so as a performance optimization will check to see if it's been at least DISABLE_GRACE_PERIOD_MS\n  // since the last volume was seen above DISABLE_AT_VOLUME_THRESHOLD, and if so, will disable\n  // tick updates until the volume exceeds the level again.\n  _updateAnalysis: function(t) {\n    if (!this.analyser) return;\n\n    updateVolume(this);\n\n    if (this.volume < DISABLE_AT_VOLUME_THRESHOLD) {\n      if (t && this.lastSeenVolume && this.lastSeenVolume < t - DISABLE_GRACE_PERIOD_MS) {\n        this.avatarIsQuiet = true;\n      }\n    } else {\n      if (t) {\n        this.lastSeenVolume = t;\n      }\n\n      this.avatarIsQuiet = false;\n    }\n  }\n});\n\nfunction connectAnalyser(mediaStream) {\n  const ctx = THREE.AudioContext.getContext();\n  const source = ctx.createMediaStreamSource(mediaStream);\n  const analyser = ctx.createAnalyser();\n  analyser.fftSize = 32;\n  const levels = new Uint8Array(analyser.fftSize);\n  source.connect(analyser);\n  return { analyser, levels };\n}\n\nfunction getAnalyser(el) {\n  // Is this the local player\n  const ikRootEl = findAncestorWithComponent(el, \"ik-root\");\n  if (ikRootEl && ikRootEl.id === \"avatar-rig\") {\n    return el.sceneEl.systems[\"local-audio-analyser\"];\n  } else {\n    const analyserEl = findAncestorWithComponent(el, \"networked-audio-analyser\");\n    if (!analyserEl) return null;\n    return analyserEl.components[\"networked-audio-analyser\"];\n  }\n}\n\n/**\n * Calculates volume of the local audio stream.\n */\nAFRAME.registerSystem(\"local-audio-analyser\", {\n  init() {\n    this.volume = 0;\n    this.loudest = 0;\n    this.prevVolume = 0;\n\n    this.el.addEventListener(\"local-media-stream-created\", e => {\n      const mediaStream = e.detail.mediaStream;\n      if (this.stream) {\n        console.warn(\"media stream changed\", this.stream, mediaStream);\n        // TODO: cleanup?\n      }\n      this.stream = mediaStream;\n      const { analyser, levels } = connectAnalyser(mediaStream);\n      this.analyser = analyser;\n      this.levels = levels;\n    });\n  },\n\n  tick: function() {\n    if (!this.analyser) return;\n    updateVolume(this);\n  }\n});\n\n/**\n * Sets an entity's scale base on the volume of an audio-analyser in a parent entity.\n * @namespace avatar\n * @component scale-audio-feedback\n */\nAFRAME.registerComponent(\"scale-audio-feedback\", {\n  schema: {\n    minScale: { default: 1 },\n    maxScale: { default: 1.5 }\n  },\n\n  async init() {\n    await waitForDOMContentLoaded();\n    this.camera = document.getElementById(\"viewing-camera\").object3D;\n  },\n\n  tick() {\n    // TODO: come up with a cleaner way to handle this.\n    // bone's are \"hidden\" by scaling them with bone-visibility, without this we would overwrite that.\n    if (!this.el.object3D.visible) return;\n    if (!this.camera) return;\n    if (!this.analyser) this.analyser = getAnalyser(this.el);\n\n    const { minScale, maxScale } = this.data;\n\n    const { object3D } = this.el;\n\n    const scale = getAudioFeedbackScale(\n      this.el.object3D,\n      this.camera,\n      minScale,\n      maxScale,\n      this.analyser ? this.analyser.volume : 0\n    );\n\n    object3D.scale.setScalar(scale);\n    object3D.matrixNeedsUpdate = true;\n  }\n});\n\n/**\n * Animates a morph target based on an audio-analyser in a parent entity\n * @namespace avatar\n * @component morph-audio-feedback\n */\nAFRAME.registerComponent(\"morph-audio-feedback\", {\n  schema: {\n    name: { default: \"\" },\n    minValue: { default: 0 },\n    maxValue: { default: 2 }\n  },\n\n  init() {\n    this.mesh = this.el.object3DMap.skinnedmesh;\n    this.morphNumber = this.mesh.morphTargetDictionary[this.data.name];\n  },\n\n  tick() {\n    if (!this.mesh) return;\n\n    if (!this.analyser) this.analyser = getAnalyser(this.el);\n\n    const { minValue, maxValue } = this.data;\n    this.mesh.morphTargetInfluences[this.morphNumber] = THREE.Math.mapLinear(\n      easeOutQuadratic(this.analyser ? this.analyser.volume : 0),\n      0,\n      1,\n      minValue,\n      maxValue\n    );\n  }\n});\n\nconst SPRITE_NAMES = {\n  MIC: [\"mic-0.png\", \"mic-1.png\", \"mic-2.png\", \"mic-3.png\", \"mic-4.png\", \"mic-5.png\", \"mic-6.png\", \"mic-7.png\"],\n  MIC_HOVER: [\n    \"mic-0_hover.png\",\n    \"mic-1_hover.png\",\n    \"mic-2_hover.png\",\n    \"mic-3_hover.png\",\n    \"mic-4_hover.png\",\n    \"mic-5_hover.png\",\n    \"mic-6_hover.png\",\n    \"mic-7_hover.png\"\n  ],\n  MIC_OFF: [\n    \"mic-off-0.png\",\n    \"mic-off-1.png\",\n    \"mic-off-2.png\",\n    \"mic-off-3.png\",\n    \"mic-off-4.png\",\n    \"mic-off-5.png\",\n    \"mic-off-6.png\",\n    \"mic-off-7.png\"\n  ],\n  MIC_OFF_HOVER: [\n    \"mic-off-0_hover.png\",\n    \"mic-off-1_hover.png\",\n    \"mic-off-2_hover.png\",\n    \"mic-off-3_hover.png\",\n    \"mic-off-4_hover.png\",\n    \"mic-off-5_hover.png\",\n    \"mic-off-6_hover.png\",\n    \"mic-off-7_hover.png\"\n  ]\n};\n\nexport function micLevelForVolume(volume) {\n  return THREE.Math.clamp(Math.ceil(THREE.Math.mapLinear(volume - 0.05, 0, 1, 0, 7)), 0, 7);\n}\n\nAFRAME.registerComponent(\"mic-button\", {\n  schema: {\n    active: { type: \"boolean\" },\n    tooltip: { type: \"selector\" },\n    tooltipText: { type: \"string\" },\n    activeTooltipText: { type: \"string\" }\n  },\n\n  init() {\n    this.prevSpriteName = \"\";\n    this.el.object3D.matrixNeedsUpdate = true;\n    this.hovering = false;\n    this.onHover = () => {\n      this.hovering = true;\n      this.data.tooltip.setAttribute(\"visible\", true);\n    };\n    this.onHoverOut = () => {\n      this.hovering = false;\n      this.data.tooltip.setAttribute(\"visible\", false);\n    };\n  },\n\n  play() {\n    this.el.object3D.addEventListener(\"hovered\", this.onHover);\n    this.el.object3D.addEventListener(\"unhovered\", this.onHoverOut);\n  },\n\n  pause() {\n    this.el.object3D.removeEventListener(\"hovered\", this.onHover);\n    this.el.object3D.removeEventListener(\"unhovered\", this.onHoverOut);\n  },\n\n  update() {\n    if (this.data.tooltip) {\n      this.textEl = this.data.tooltip.querySelector(\"[text]\");\n    }\n  },\n\n  tick() {\n    const audioAnalyser = this.el.sceneEl.systems[\"local-audio-analyser\"];\n    const active = this.data.active;\n    const hovering = this.hovering;\n    const spriteNames =\n      SPRITE_NAMES[!active ? (hovering ? \"MIC_HOVER\" : \"MIC\") : hovering ? \"MIC_OFF_HOVER\" : \"MIC_OFF\"];\n    const level = micLevelForVolume(audioAnalyser.volume);\n    const spriteName = spriteNames[level];\n    if (spriteName !== this.prevSpriteName) {\n      this.prevSpriteName = spriteName;\n      this.el.setAttribute(\"sprite\", \"name\", spriteName);\n    }\n\n    if (this.data.tooltip && hovering) {\n      this.textEl = this.textEl || this.data.tooltip.querySelector(\"[text]\");\n      this.textEl.setAttribute(\"text\", \"value\", active ? this.data.activeTooltipText : this.data.tooltipText);\n    }\n  }\n});\n","import configs from \"../utils/configs\";\n\nexport default function UnlessFeature(props) {\n  return (!configs.feature(props.name) && props.children) || null;\n}\n","import uuid from \"uuid/v4\";\n\nexport default class AuthChannel {\n  constructor(store) {\n    this.store = store;\n    this.socket = null;\n    this._signedIn = !!this.store.state.credentials.token;\n  }\n\n  setSocket = socket => {\n    this.socket = socket;\n  };\n\n  get email() {\n    return this.store.state.credentials.email;\n  }\n\n  get signedIn() {\n    return this._signedIn;\n  }\n\n  signOut = async hubChannel => {\n    if (hubChannel) {\n      await hubChannel.signOut();\n    }\n    this.store.update({ credentials: { token: null, email: null } });\n    await this.store.resetToRandomDefaultAvatar();\n    this._signedIn = false;\n  };\n\n  verifyAuthentication(authTopic, authToken, authPayload) {\n    const channel = this.socket.channel(authTopic);\n    return new Promise((resolve, reject) => {\n      channel.onError(() => {\n        channel.leave();\n        reject();\n      });\n\n      channel\n        .join()\n        .receive(\"ok\", () => {\n          channel.on(\"auth_credentials\", async ({ credentials: token, payload: payload }) => {\n            await this.handleAuthCredentials(payload.email, token);\n            resolve();\n          });\n\n          channel.push(\"auth_verified\", { token: authToken, payload: authPayload });\n        })\n        .receive(\"error\", reject);\n    });\n  }\n\n  async startAuthentication(email, hubChannel) {\n    const channel = this.socket.channel(`auth:${uuid()}`);\n    await new Promise((resolve, reject) =>\n      channel\n        .join()\n        .receive(\"ok\", resolve)\n        .receive(\"error\", reject)\n    );\n\n    const authComplete = new Promise(resolve =>\n      channel.on(\"auth_credentials\", async ({ credentials: token }) => {\n        await this.handleAuthCredentials(email, token, hubChannel);\n        resolve();\n      })\n    );\n\n    channel.push(\"auth_request\", { email, origin: \"hubs\" });\n\n    // Returning an object with the authComplete promise since we want the caller to wait for the above await but not\n    // for authComplete.\n    return { authComplete };\n  }\n\n  async handleAuthCredentials(email, token, hubChannel) {\n    this.store.update({ credentials: { email, token } });\n\n    if (hubChannel) {\n      await hubChannel.signIn(token);\n    }\n\n    this._signedIn = true;\n  }\n}\n","export function addAnimationComponents(modelEl) {\n  if (!modelEl.components[\"animation-mixer\"]) {\n    return;\n  }\n\n  if (!modelEl.querySelector(\"[loop-animation]\")) {\n    modelEl.setAttribute(\"loop-animation\", \"\");\n  }\n}\n","export function easeOutQuadratic(t) {\n  return t * (2 - t);\n}\n","module.exports = __webpack_public_path__ + \"assets/images/warning_icon@2x-706e4a4db33f9456bac320e956b4120d.png\";","module.exports = __webpack_public_path__ + \"assets/sfx/quickTurn-cda89edb1a7a32e4442cac70cd2694be.mp3\";","module.exports = __webpack_public_path__ + \"assets/sfx/Eb_blip-8d7302990e83d6798400a6027dce3936.mp3\";","module.exports = __webpack_public_path__ + \"assets/images/dropdown_arrow-601450f494125f8caccec2271aebd4cb.png\";","module.exports = __webpack_public_path__ + \"assets/images/dropdown_arrow@2x-1023ab0bd743b3525d99986de89f0c3b.png\";","// A-Frame blows away any npm debug log filters so this allow the user to set the log filter\n// via the query string.\nimport debug from \"debug\";\nimport qsTruthy from \"./qs_truthy\";\n\nconst qs = new URLSearchParams(location.search);\nconst isDebug = qsTruthy(\"debug\");\nconst logFilter = qs.get(\"log_filter\") || (isDebug && \"naf-janus-adapter:*\");\n\nif (logFilter) {\n  debug.enable(logFilter);\n}\n","export default function maskEmail(email) {\n  if (!email) return \"\";\n  const emailParts = email.split(\"@\");\n  const emailIdentity = emailParts[0];\n  const emailDomain = emailParts[1];\n  const truncatedIdentity = emailIdentity.substring(0, Math.min(emailIdentity.length, 3));\n  return `${truncatedIdentity}...@${emailDomain}`;\n}\n","import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport { injectIntl, FormattedMessage } from \"react-intl\";\n\nimport DialogContainer from \"./dialog-container.js\";\nimport styles from \"../assets/stylesheets/room-info-dialog.scss\";\nimport { scaledThumbnailUrlFor } from \"../utils/media-url-utils\";\nimport { allowDisplayOfSceneLink } from \"../utils/scene-url-utils\";\n\nclass RoomInfoDialog extends Component {\n  static propTypes = {\n    hubName: PropTypes.string,\n    hubDescription: PropTypes.string,\n    scene: PropTypes.object,\n    store: PropTypes.object\n  };\n\n  render() {\n    const hasDescription = !!this.props.hubDescription;\n    const hasScene = !!this.props.scene;\n\n    const showSceneLink = hasScene && allowDisplayOfSceneLink(this.props.scene, this.props.store);\n\n    const toAttributionDiv = (a, i) => {\n      if (a.url) {\n        const source = a.url.includes(\"sketchfab.com\")\n          ? \"on Sketchfab\"\n          : a.url.includes(\"poly.google.com\")\n            ? \"on Google Poly\"\n            : \"\";\n\n        return (\n          <div className={styles.attribution} key={`${a.url} ${i}`}>\n            <div className={styles.attributionName}>\n              <a href={a.url} target=\"_blank\" rel=\"noopener noreferrer\">\n                {a.name}\n              </a>\n            </div>\n            <div className={styles.attributionAuthor}>\n              by {a.author} {source}\n            </div>\n          </div>\n        );\n      } else {\n        return (\n          <div className={styles.attribution} key={`${a.name} ${a.author} {i}`}>\n            <div className={styles.attributionName}>{a.name}</div>\n            <div className={styles.attributionAuthor}>by {a.author}</div>\n          </div>\n        );\n      }\n    };\n\n    let attributions = null;\n    let creator = null;\n\n    if (hasScene && this.props.scene.attributions) {\n      creator = this.props.scene.attributions.creator;\n      attributions = (\n        <div>\n          {this.props.scene.attributions.content && this.props.scene.attributions.content.map(toAttributionDiv)}\n        </div>\n      );\n    }\n\n    const title = (\n      <div className={styles.title}>\n        {hasDescription && hasScene ? <FormattedMessage id=\"room-info.title\" /> : this.props.hubName}\n      </div>\n    );\n\n    return (\n      <DialogContainer title={title} wide={true} {...this.props}>\n        {hasDescription && (\n          <>\n            {hasScene && <div className={styles.hubTitle}>{this.props.hubName}</div>}\n            <div className={styles.description}>{this.props.hubDescription}</div>\n          </>\n        )}\n        {hasScene && (\n          <>\n            <div className={styles.subtitle}>\n              <FormattedMessage id=\"room-info.scene-info\" />\n            </div>\n            <div className={styles.roomInfo}>\n              <div className={styles.sceneScreenshot}>\n                {showSceneLink ? (\n                  <a href={this.props.scene.url} target=\"_blank\" rel=\"noopener noreferrer\">\n                    <img src={scaledThumbnailUrlFor(this.props.scene.screenshot_url, 400, 480)} />\n                  </a>\n                ) : (\n                  <img src={scaledThumbnailUrlFor(this.props.scene.screenshot_url, 400, 480)} />\n                )}\n              </div>\n              <div className={styles.sceneDetails}>\n                <div className={styles.sceneMain}>\n                  <div className={styles.sceneName}>\n                    {showSceneLink ? (\n                      <a href={this.props.scene.url} target=\"_blank\" rel=\"noopener noreferrer\">\n                        {this.props.scene.name}\n                      </a>\n                    ) : (\n                      <span>{this.props.scene.name}</span>\n                    )}\n                  </div>\n                  <div className={styles.sceneCreator}>{creator}</div>\n                </div>\n                <div className={styles.sceneAttributions}>{attributions}</div>\n                <div className={styles.sceneButtons}> </div>\n              </div>\n            </div>\n          </>\n        )}\n      </DialogContainer>\n    );\n  }\n}\nexport default injectIntl(RoomInfoDialog);\n","import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport classNames from \"classnames\";\nimport dayjs from \"dayjs-ext\";\nimport relativeTime from \"dayjs-ext/plugin/relativeTime\";\nimport { injectIntl, FormattedMessage } from \"react-intl\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport { faAngleLeft } from \"@fortawesome/free-solid-svg-icons/faAngleLeft\";\nimport { faAngleRight } from \"@fortawesome/free-solid-svg-icons/faAngleRight\";\nimport { faExternalLinkAlt } from \"@fortawesome/free-solid-svg-icons/faExternalLinkAlt\";\nimport { faPencilAlt } from \"@fortawesome/free-solid-svg-icons/faPencilAlt\";\nimport { faInfo } from \"@fortawesome/free-solid-svg-icons/faInfo\";\nimport { faClone } from \"@fortawesome/free-solid-svg-icons/faClone\";\nimport { faPlus } from \"@fortawesome/free-solid-svg-icons/faPlus\";\nimport { faSearch } from \"@fortawesome/free-solid-svg-icons/faSearch\";\nimport { faUsers } from \"@fortawesome/free-solid-svg-icons/faUsers\";\nimport { faStar } from \"@fortawesome/free-solid-svg-icons/faStar\";\n\nimport IfFeature from \"./if-feature\";\nimport styles from \"../assets/stylesheets/media-browser.scss\";\nimport { proxiedUrlFor, scaledThumbnailUrlFor } from \"../utils/media-url-utils\";\nimport StateLink from \"./state-link\";\nimport { remixAvatar } from \"../utils/avatar-utils\";\nimport { fetchReticulumAuthenticated } from \"../utils/phoenix-utils\";\nimport { getReticulumFetchUrl } from \"../utils/phoenix-utils\";\n\ndayjs.extend(relativeTime);\n\nconst PUBLISHER_FOR_ENTRY_TYPE = {\n  sketchfab_model: \"Sketchfab\",\n  poly_model: \"Google Poly\",\n  twitch_stream: \"Twitch\"\n};\n\nclass MediaTiles extends Component {\n  static propTypes = {\n    intl: PropTypes.object,\n    entries: PropTypes.array,\n    hasNext: PropTypes.bool,\n    hasPrevious: PropTypes.bool,\n    isVariableWidth: PropTypes.bool,\n    page: PropTypes.number,\n    history: PropTypes.object,\n    urlSource: PropTypes.string,\n    handleEntryClicked: PropTypes.func,\n    handleEntryInfoClicked: PropTypes.func,\n    handlePager: PropTypes.func,\n    onCopyAvatar: PropTypes.func,\n    onCopyScene: PropTypes.func,\n    onShowSimilar: PropTypes.func\n  };\n\n  handleCopyAvatar = async (e, entry) => {\n    e.preventDefault();\n    await remixAvatar(entry.id, entry.name);\n    this.props.onCopyAvatar();\n  };\n\n  handleCopyScene = async (e, entry) => {\n    e.preventDefault();\n    await fetchReticulumAuthenticated(\"/api/v1/scenes\", \"POST\", {\n      parent_scene_id: entry.id\n    });\n    this.props.onCopyScene();\n  };\n\n  render() {\n    const { urlSource, hasNext, hasPrevious, page, isVariableWidth } = this.props;\n    const entries = this.props.entries || [];\n    const [createTileWidth, createTileHeight] = this.getTileDimensions(false, urlSource === \"avatars\");\n\n    return (\n      <div className={styles.body}>\n        <div className={classNames({ [styles.tiles]: true, [styles.tilesVariable]: isVariableWidth })}>\n          {(urlSource === \"avatars\" || urlSource === \"scenes\") && (\n            <div\n              style={{ width: `${createTileWidth}px`, height: `${createTileHeight}px` }}\n              className={classNames({\n                [styles.tile]: true,\n                [styles.createTile]: true,\n                [styles.createAvatarTile]: urlSource === \"avatars\"\n              })}\n            >\n              {urlSource === \"scenes\" ? (\n                <IfFeature name=\"enable_spoke\">\n                  <a href=\"/spoke/new\" rel=\"noopener noreferrer\" target=\"_blank\" className={styles.tileLink}>\n                    <div className={styles.tileContent}>\n                      <FontAwesomeIcon icon={faPlus} />\n                      <FormattedMessage id=\"media-browser.create-scene\" />\n                    </div>\n                  </a>\n                </IfFeature>\n              ) : (\n                <a\n                  onClick={e => {\n                    e.preventDefault();\n                    window.dispatchEvent(new CustomEvent(\"action_create_avatar\"));\n                  }}\n                  className={styles.tileLink}\n                >\n                  <div className={styles.tileContent}>\n                    <FontAwesomeIcon icon={faPlus} />\n                    <FormattedMessage id=\"media-browser.create-avatar\" />\n                  </div>\n                </a>\n              )}\n            </div>\n          )}\n\n          {entries.map(this.entryToTile)}\n        </div>\n\n        {(hasNext || hasPrevious) &&\n          this.props.handlePager && (\n            <div className={styles.pager}>\n              <a\n                className={classNames({ [styles.previousPage]: true, [styles.pagerButtonDisabled]: !hasPrevious })}\n                onClick={() => this.props.handlePager(-1)}\n              >\n                <FontAwesomeIcon icon={faAngleLeft} />\n              </a>\n              <div className={styles.pageNumber}>{page}</div>\n              <a\n                className={classNames({ [styles.nextPage]: true, [styles.pagerButtonDisabled]: !hasNext })}\n                onClick={() => this.props.handlePager(1)}\n              >\n                <FontAwesomeIcon icon={faAngleRight} />\n              </a>\n            </div>\n          )}\n      </div>\n    );\n  }\n\n  getTileDimensions = (isImage, isAvatar, imageAspect) => {\n    // Doing breakpointing here, so we can have proper image placeholder based upon dynamic aspect ratio\n    const clientWidth = window.innerWidth;\n    let imageHeight = clientWidth < 1079 ? (clientWidth < 768 ? (clientWidth < 400 ? 85 : 100) : 150) : 200;\n    if (isAvatar) imageHeight = Math.floor(imageHeight * 1.5);\n\n    // Aspect ratio can vary per image if its an image result. Avatars are a taller portrait aspect, o/w assume 720p\n    let imageWidth;\n    if (isImage) {\n      imageWidth = Math.floor(Math.max(imageAspect * imageHeight, imageHeight * 0.85));\n    } else if (isAvatar) {\n      imageWidth = Math.floor((9 / 16) * imageHeight);\n    } else {\n      imageWidth = Math.floor(Math.max((16 / 9) * imageHeight, imageHeight * 0.85));\n    }\n\n    return [imageWidth, imageHeight];\n  };\n\n  entryToTile = (entry, idx) => {\n    const imageSrc = entry.images.preview.url;\n    const creator = entry.attributions && entry.attributions.creator;\n    const isImage = entry.type.endsWith(\"_image\");\n    const isAvatar = [\"avatar\", \"avatar_listing\"].includes(entry.type);\n    const isHub = [\"room\"].includes(entry.type);\n    const imageAspect = entry.images.preview.width / entry.images.preview.height;\n\n    const [imageWidth, imageHeight] = this.getTileDimensions(isImage, isAvatar, imageAspect);\n\n    // Inline mp4s directly since far/nearspark cannot resize them.\n    const thumbnailElement =\n      entry.images.preview.type === \"mp4\" ? (\n        <video\n          className={classNames(styles.tileContent, styles.avatarTile)}\n          style={{ width: `${imageWidth}px`, height: `${imageHeight}px` }}\n          muted\n          autoPlay\n          playsInline\n          loop\n          src={proxiedUrlFor(imageSrc)}\n        />\n      ) : (\n        <img\n          className={classNames(styles.tileContent, styles.avatarTile)}\n          style={{ width: `${imageWidth}px`, height: `${imageHeight}px` }}\n          src={scaledThumbnailUrlFor(imageSrc, imageWidth, imageHeight)}\n        />\n      );\n\n    const publisherName =\n      (entry.attributions && entry.attributions.publisher && entry.attributions.publisher.name) ||\n      PUBLISHER_FOR_ENTRY_TYPE[entry.type];\n\n    const { formatMessage } = this.props.intl;\n\n    return (\n      <div style={{ width: `${imageWidth}px` }} className={styles.tile} key={`${entry.id}_${idx}`}>\n        <a\n          href={entry.url}\n          rel=\"noreferrer noopener\"\n          onClick={e => this.props.handleEntryClicked && this.props.handleEntryClicked(e, entry)}\n          className={styles.tileLink}\n          style={{ width: `${imageWidth}px`, height: `${imageHeight}px` }}\n        >\n          {thumbnailElement}\n        </a>\n        <div className={styles.tileActions}>\n          {entry.type === \"avatar\" && (\n            <StateLink\n              stateKey=\"overlay\"\n              stateValue=\"avatar-editor\"\n              stateDetail={{ avatarId: entry.id }}\n              history={this.props.history}\n              title=\"Edit\"\n            >\n              <FontAwesomeIcon icon={faPencilAlt} />\n            </StateLink>\n          )}\n          {entry.type === \"avatar_listing\" && (\n            <a\n              onClick={e => {\n                e.preventDefault();\n                this.props.onShowSimilar(entry.id, entry.name);\n              }}\n              title=\"Show Similar\"\n            >\n              <FontAwesomeIcon icon={faSearch} />\n            </a>\n          )}\n          {entry.type === \"avatar_listing\" &&\n            entry.allow_remixing && (\n              <a onClick={e => this.handleCopyAvatar(e, entry)} title=\"Copy to my avatars\">\n                <FontAwesomeIcon icon={faClone} />\n              </a>\n            )}\n          {entry.type === \"scene_listing\" &&\n            entry.allow_remixing && (\n              <a onClick={e => this.handleCopyScene(e, entry)} title=\"Copy to my scenes\">\n                <FontAwesomeIcon icon={faClone} />\n              </a>\n            )}\n          {entry.type === \"scene\" &&\n            entry.project_id && (\n              <a\n                target=\"_blank\"\n                rel=\"noopener noreferrer\"\n                href={getReticulumFetchUrl(`/spoke/projects/${entry.project_id}`)}\n                title={formatMessage({ id: \"scene.edit_button\" })}\n              >\n                <FontAwesomeIcon icon={faPencilAlt} />\n              </a>\n            )}\n          {entry.type === \"room\" &&\n            this.props.handleEntryInfoClicked &&\n            entry.description && (\n              <a\n                title=\"room info\"\n                onClick={e => {\n                  e.preventDefault();\n                  this.props.handleEntryInfoClicked(entry);\n                }}\n              >\n                <FontAwesomeIcon icon={faInfo} />\n              </a>\n            )}\n        </div>\n\n        {entry.favorited && (\n          <div className={styles.favorite}>\n            <FontAwesomeIcon icon={faStar} />\n          </div>\n        )}\n\n        {!entry.type.endsWith(\"_image\") && (\n          <div className={styles.info}>\n            <a\n              href={entry.url}\n              rel=\"noreferrer noopener\"\n              className={styles.name}\n              onClick={e => this.props.handleEntryClicked && this.props.handleEntryClicked(e, entry)}\n            >\n              {entry.name || \"\\u00A0\"}\n            </a>\n            {!isAvatar &&\n              !isHub && (\n                <div className={styles.attribution}>\n                  <div className={styles.creator}>\n                    {creator && creator.name === undefined && <span>{creator}</span>}\n                    {creator && creator.name && !creator.url && <span>{creator.name}</span>}\n                    {creator &&\n                      creator.name &&\n                      creator.url && (\n                        <a href={creator.url} target=\"_blank\" rel=\"noopener noreferrer\">\n                          {creator.name}\n                        </a>\n                      )}\n                  </div>\n                  {publisherName && (\n                    <div className={styles.publisher}>\n                      <i>\n                        <FontAwesomeIcon icon={faExternalLinkAlt} />\n                      </i>\n                      &nbsp;<a href={entry.url} target=\"_blank\" rel=\"noopener noreferrer\">\n                        {publisherName}\n                      </a>\n                    </div>\n                  )}\n                </div>\n              )}\n            {isHub && (\n              <>\n                <div className={styles.attribution}>\n                  <div className={styles.lastJoined}>\n                    <FormattedMessage id=\"media-browser.hub.joined-prefix\" />\n                    {dayjs(entry.last_activated_at).fromNow()}\n                  </div>\n                </div>\n                <div className={styles.presence}>\n                  <FontAwesomeIcon icon={faUsers} />\n                  <span>{entry.member_count}</span>\n                </div>\n              </>\n            )}\n          </div>\n        )}\n      </div>\n    );\n  };\n}\nexport default injectIntl(MediaTiles);\n","const THREE = AFRAME.THREE;\n\nfunction checkFloatTextureSupport() {\n  const renderer = new THREE.WebGLRenderer();\n\n  const scene = new THREE.Scene();\n  const size = 2;\n  const data = new Float32Array(size * size * 4);\n  const dataTexture = new THREE.DataTexture(data, size, size, THREE.RGBAFormat, THREE.FloatType);\n  const box = new THREE.Mesh(new THREE.PlaneBufferGeometry(1, 1), new THREE.MeshBasicMaterial({ map: dataTexture }));\n  box.material.map.needsUpdate = true;\n  scene.add(box);\n\n  renderer.render(scene, new THREE.Camera());\n  const result = renderer.context.getError() === 0;\n  renderer.dispose();\n  return result;\n}\n\nexport function patchWebGLRenderingContext() {\n  if (/Android.+Firefox/.test(navigator.userAgent)) {\n    // It appears that Galaxy S6 devices falsely report that they support\n    // OES_texture_float in Firefox. This workaround disables float textures\n    // for those devices.\n    // See https://github.com/mozilla/hubs/issues/32 and\n    // https://bugzilla.mozilla.org/show_bug.cgi?id=1338656\n    const originalGetExtension = WebGLRenderingContext.prototype.getExtension;\n    const supportsFloatTextures = checkFloatTextureSupport();\n    WebGLRenderingContext.prototype.getExtension = function patchedGetExtension(name) {\n      if (name === \"OES_texture_float\" && !supportsFloatTextures) {\n        return null;\n      }\n      return originalGetExtension.call(this, name);\n    };\n  }\n}\n","module.exports = __webpack_public_path__ + \"assets/models/LoadingObject_Atom-7dcc3b81897e68b740c1cf12b6cf4c3f.glb\";","module.exports = __webpack_public_path__ + \"assets/sfx/teleport-loop-84e2caa4f62e5c6d6ce339b0c715c06d.mp3\";","module.exports = __webpack_public_path__ + \"assets/sfx/tap_mellow-673398d6e97818ec4b675708d460bd0f.mp3\";","module.exports = __webpack_public_path__ + \"assets/sfx/PenSpawn-aac1f534773040f0fafa41e9db76017b.mp3\";","module.exports = __webpack_public_path__ + \"assets/sfx/PenDraw1-ddbdc17a6beefecbca2685c8c9d0d2d5.mp3\";","module.exports = __webpack_public_path__ + \"assets/sfx/PicSnapHey-0228ddd197e5a6d88f7bcd2ceb340f8e.mp3\";","module.exports = __webpack_public_path__ + \"assets/sfx/welcome-0083300978d5dd05eaa376f65761da47.mp3\";","module.exports = __webpack_public_path__ + \"assets/sfx/quack-1f18502834f8f1db43990b769c2ab193.mp3\";","module.exports = __webpack_public_path__ + \"assets/sfx/specialquack-6d1a192a6092e8dfed5d3de063755ee2.mp3\";","module.exports = __webpack_public_path__ + \"assets/sfx/pop-5784f3bcfaf98637147737448d6df8df.mp3\";","module.exports = __webpack_public_path__ + \"assets/sfx/tack-0d55b064794faaa1733fcf6bc89cad0c.mp3\";","module.exports = __webpack_public_path__ + \"assets/sfx/A_bendUp-de32e556413bb2a527fb514984738c70.mp3\";","module.exports = __webpack_public_path__ + \"assets/sfx/suspense-f27c64840e5ede36ec694c22a030615c.mp3\";","module.exports = __webpack_public_path__ + \"assets/sfx/emoji-27673179a22e6f42e8187ccba07e4dce.mp3\";","// extracted by mini-css-extract-plugin\nmodule.exports = {\"preview\":\"avatar-preview__preview__2I8qx\"};","import { CAMERA_MODE_INSPECT } from \"./camera-system.js\";\n\nexport class ScenePreviewCameraSystem {\n  constructor() {\n    this.entities = [];\n  }\n\n  register(el) {\n    this.entities.push(el);\n  }\n\n  unregister(el) {\n    this.entities.splice(this.entities.indexOf(el, 1));\n  }\n\n  tick() {\n    for (const el of this.entities) {\n      const hubsSystems = AFRAME.scenes[0].systems[\"hubs-systems\"];\n      if (el && (!hubsSystems || hubsSystems.cameraSystem.mode !== CAMERA_MODE_INSPECT)) {\n        el.components[\"scene-preview-camera\"].tick2();\n      }\n    }\n  }\n}\n","// NOTE: We do not use an IV since we generate a new keypair each time we use these routines.\n\nasync function deriveKey(privateKey, publicKey) {\n  return crypto.subtle.deriveKey(\n    { name: \"ECDH\", public: publicKey },\n    privateKey,\n    { name: \"AES-CBC\", length: 256 },\n    true,\n    [\"encrypt\", \"decrypt\"]\n  );\n}\n\nasync function publicKeyToString(key) {\n  return JSON.stringify(await crypto.subtle.exportKey(\"jwk\", key));\n}\n\nasync function stringToPublicKey(s) {\n  return await crypto.subtle.importKey(\"jwk\", JSON.parse(s), { name: \"ECDH\", namedCurve: \"P-256\" }, true, []);\n}\n\nfunction stringToArrayBuffer(s) {\n  const buf = new Uint8Array(s.length);\n\n  for (let i = 0; i < s.length; i++) {\n    buf[i] = s.charCodeAt(i);\n  }\n\n  return buf;\n}\n\nfunction arrayBufferToString(b) {\n  const buf = new Uint8Array(b);\n  let s = \"\";\n\n  for (let i = 0; i < buf.byteLength; i++) {\n    s += String.fromCharCode(buf[i]);\n  }\n\n  return s;\n}\n\n// This allows a single object to be passed encrypted from a receiver in a req -> response flow\n\n// Requestor generates a public key and private key, and should send the public key to receiver.\nexport async function generateKeys() {\n  const keyPair = await crypto.subtle.generateKey({ name: \"ECDH\", namedCurve: \"P-256\" }, true, [\"deriveKey\"]);\n  const publicKeyString = await publicKeyToString(keyPair.publicKey);\n  return { publicKeyString, privateKey: keyPair.privateKey };\n}\n\n// Receiver takes the public key from requestor and passes obj to get a response public key and the encrypted data to return.\nexport async function generatePublicKeyAndEncryptedObject(incomingPublicKeyString, obj) {\n  const iv = new Uint8Array(16);\n  const incomingPublicKey = await stringToPublicKey(incomingPublicKeyString);\n  const keyPair = await crypto.subtle.generateKey({ name: \"ECDH\", namedCurve: \"P-256\" }, true, [\"deriveKey\"]);\n  const publicKeyString = await publicKeyToString(keyPair.publicKey);\n  const secret = await deriveKey(keyPair.privateKey, incomingPublicKey);\n\n  const encryptedData = btoa(\n    arrayBufferToString(\n      await crypto.subtle.encrypt({ name: \"AES-CBC\", iv }, secret, stringToArrayBuffer(JSON.stringify(obj)))\n    )\n  );\n\n  return { publicKeyString, encryptedData };\n}\n\n// Requestor then takes the receiver's public key, the private key (returned from generateKeys()), and the data from the receiver.\nexport async function decryptObject(publicKeyString, privateKey, base64value) {\n  const iv = new Uint8Array(16);\n  const publicKey = await stringToPublicKey(publicKeyString);\n  const secret = await deriveKey(privateKey, publicKey);\n  const ciphertext = stringToArrayBuffer(atob(base64value));\n  const data = await crypto.subtle.decrypt({ name: \"AES-CBC\", iv }, secret, ciphertext);\n  return JSON.parse(arrayBufferToString(data));\n}\n","import { generatePublicKeyAndEncryptedObject, generateKeys, decryptObject } from \"./crypto\";\n\nconst LINK_ACTION_TIMEOUT = 10000;\n\nexport default class LinkChannel {\n  constructor(store) {\n    this.store = store;\n  }\n\n  setSocket = socket => {\n    this.socket = socket;\n  };\n\n  // Returns a promise that, when resolved, will forward an object with three keys:\n  //\n  // code: The code that was made available to use for link.\n  //\n  // cancel: A function that the caller can call to cancel the use of the code.\n  //\n  // onFinished: A promise that, when resolved, indicates the code is no longer usable,\n  // because it was either successfully used by the remote device or it has expired\n  // (\"used\" or \"expired\" is passed to the callback).\n  generateCode = () => {\n    return new Promise(resolve => {\n      const onFinished = new Promise(finished => {\n        const step = () => {\n          const getLetter = () => \"ABCDEFGHI\"[Math.floor(Math.random() * 9)];\n          const code = `${getLetter()}${getLetter()}${getLetter()}${getLetter()}`;\n\n          // Only respond to one link_request in this channel.\n          let readyToSend = false;\n          let leftChannel = false;\n\n          const channel = this.socket.channel(`link:${code}`, { timeout: LINK_ACTION_TIMEOUT });\n\n          const leave = () => {\n            if (!leftChannel) channel.leave();\n            leftChannel = true;\n          };\n\n          const cancel = () => leave();\n\n          channel.on(\"link_expired\", () => finished(\"expired\"));\n\n          channel.on(\"presence_state\", state => {\n            if (readyToSend) return;\n\n            if (Object.keys(state).length > 0) {\n              // Code is in use by someone else, try a new one\n              step();\n            } else {\n              readyToSend = true;\n              resolve({ code, cancel, onFinished });\n            }\n          });\n\n          channel.on(\"link_request\", incoming => {\n            if (readyToSend) {\n              const data = { path: location.pathname };\n\n              // Copy profile data to link'ed device if it's been set.\n              if (this.store.state.activity.hasChangedName) {\n                data.profile = { ...this.store.state.profile };\n              }\n              data.credentials = { ...this.store.state.credentials };\n\n              generatePublicKeyAndEncryptedObject(incoming.public_key, data).then(\n                ({ publicKeyString, encryptedData }) => {\n                  const payload = {\n                    target_session_id: incoming.reply_to_session_id,\n                    public_key: publicKeyString,\n                    data: encryptedData\n                  };\n\n                  if (!leftChannel) {\n                    channel.push(\"link_response\", payload);\n                  }\n\n                  leave();\n\n                  finished(\"used\");\n                  readyToSend = false;\n                }\n              );\n            }\n          });\n\n          channel.join().receive(\"error\", r => console.error(r));\n        };\n\n        step();\n      });\n    });\n  };\n\n  // Attempts to receive a link payload from a remote device using the given code.\n  //\n  // Promise rejects if the code is invalid or there is a problem with the channel.\n  // Promise resolves and passes payload of link source on successful link.\n  attemptLink = code => {\n    return new Promise((resolve, reject) => {\n      const channel = this.socket.channel(`link:${code}`, { timeout: LINK_ACTION_TIMEOUT });\n      let finished = false;\n\n      generateKeys().then(({ publicKeyString, privateKey }) => {\n        channel.on(\"presence_state\", state => {\n          const numOccupants = Object.keys(state).length;\n\n          if (numOccupants === 1) {\n            // Great, only sender is in topic, request link\n            channel.push(\"link_request\", {\n              reply_to_session_id: this.socket.params().session_id,\n              public_key: publicKeyString\n            });\n\n            setTimeout(() => {\n              if (finished) return;\n              channel.leave();\n              reject(new Error(\"no_response\"));\n            }, LINK_ACTION_TIMEOUT);\n          } else if (numOccupants === 0) {\n            // Nobody in this channel, probably a bad code.\n            channel.leave();\n            reject(new Error(\"failed\"));\n          } else {\n            console.warn(\"link code channel already has 2 or more occupants, something fishy is going on.\");\n            channel.leave();\n            reject(new Error(\"in_use\"));\n          }\n        });\n\n        channel.on(\"link_response\", payload => {\n          finished = true;\n          channel.leave();\n\n          decryptObject(payload.public_key, privateKey, payload.data).then(resolve);\n        });\n\n        channel\n          .join()\n          .receive(\"ok\", data => (this.socket.params().session_id = data.session_id))\n          .receive(\"error\", r => console.error(r));\n      });\n    });\n  };\n}\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"command-help\":\"chat-command-help__command-help__q0Wb8\",\"commandHelp\":\"chat-command-help__command-help__q0Wb8\",\"entry\":\"chat-command-help__entry__1E1un\",\"command\":\"chat-command-help__command__2GMyn\"};","module.exports = __webpack_public_path__ + \"assets/images/mic_denied-5ce12e4dc9b5eb42ce69b753c46c2174.png\";","module.exports = __webpack_public_path__ + \"assets/images/mic_denied@2x-127a94ff73b93a0b4ac89682ce836b91.png\";","module.exports = \"<svg viewBox=\\\"0 0 64 64\\\" fill=\\\"none\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\" class=\\\"svg-icon\\\"><path fill-rule=\\\"evenodd\\\" clip-rule=\\\"evenodd\\\" d=\\\"M61.0316 33.4196C61.841 33.0737 61.841 31.9263 61.0316 31.5804L5.78581 7.97542C4.46632 7.41163 2.99999 8.37968 2.99999 9.81457L2.99999 30.4511L29.262 32.5L2.99999 34.549L2.99998 55.1854C2.99998 56.6203 4.46632 57.5884 5.7858 57.0246L61.0316 33.4196Z\\\" fill=\\\"currentColor\\\"></path></svg>\"","module.exports = __webpack_public_path__ + \"assets/models/LoadingEnvironment-570a9f69a9509eb8a039c9ff93ccfdca.glb\";","// extracted by mini-css-extract-plugin\nmodule.exports = {\"cancel-button\":\"promote-client-dialog__cancel-button__3YZLa\",\"cancelButton\":\"promote-client-dialog__cancel-button__3YZLa\",\"confirm-button\":\"promote-client-dialog__confirm-button__3LXvQ\",\"confirmButton\":\"promote-client-dialog__confirm-button__3LXvQ\",\"message\":\"promote-client-dialog__message__1LA_N\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"cancel-button\":\"close-room-dialog__cancel-button__MmtAo\",\"cancelButton\":\"close-room-dialog__cancel-button__MmtAo\",\"confirm-button\":\"close-room-dialog__confirm-button__Bs9y3\",\"confirmButton\":\"close-room-dialog__confirm-button__Bs9y3\",\"message\":\"close-room-dialog__message__1Rvh3\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"help-dialog\":\"help-dialog__help-dialog__3kPVz\",\"helpDialog\":\"help-dialog__help-dialog__3kPVz\",\"docs-link\":\"help-dialog__docs-link__1kBbO\",\"docsLink\":\"help-dialog__docs-link__1kBbO\",\"tour-button\":\"help-dialog__tour-button__2kJpg\",\"tourButton\":\"help-dialog__tour-button__2kJpg\",\"link-button\":\"help-dialog__link-button__18Iw0\",\"linkButton\":\"help-dialog__link-button__18Iw0\"};","const zeroPos = new THREE.Vector3(0, 0, 0);\nconst zeroQuat = new THREE.Quaternion();\nconst oneScale = new THREE.Vector3(1, 1, 1);\nconst identity = new THREE.Matrix4();\nidentity.identity();\n\n// Patch animation system\nconst bindingSetters = THREE.PropertyBinding.prototype.SetterByBindingTypeAndVersioning;\nconst Versioning = THREE.PropertyBinding.prototype.Versioning;\n\n// For all binding types, monkey patch the setters that require world matrix\n// updates to also flip matrixNeedsUpdate\nfor (let i = 0; i < bindingSetters.length; i++) {\n  const setter = bindingSetters[i][Versioning.MatrixWorldNeedsUpdate];\n  if (!setter) continue;\n\n  bindingSetters[i][Versioning.MatrixWorldNeedsUpdate] = function() {\n    const v = setter.apply(this, arguments);\n    this.targetObject.matrixNeedsUpdate = true;\n    return v;\n  };\n}\n\nTHREE.Object3D.prototype.getWorldPosition = function(target) {\n  if (target === undefined) {\n    console.warn(\"THREE.Object3D: .getWorldPosition() target is now required\");\n    target = new THREE.Vector3();\n  }\n\n  // New function, defined below (used instead of updateMatrixWorld)\n  this.updateMatrices();\n\n  return target.setFromMatrixPosition(this.matrixWorld);\n};\n\nTHREE.Object3D.prototype.getWorldQuaternion = (function() {\n  const position = new THREE.Vector3();\n  const scale = new THREE.Vector3();\n\n  return function getWorldQuaternion(target) {\n    if (target === undefined) {\n      console.warn(\"THREE.Object3D: .getWorldQuaternion() target is now required\");\n      target = new THREE.Quaternion();\n    }\n\n    // New function, defined below (used instead of updateMatrixWorld)\n    this.updateMatrices();\n    this.matrixWorld.decompose(position, target, scale);\n\n    return target;\n  };\n})();\n\nTHREE.Object3D.getWorldScale = (function() {\n  const position = new THREE.Vector3();\n  const quaternion = new THREE.Quaternion();\n\n  return function getWorldScale(target) {\n    if (target === undefined) {\n      console.warn(\"THREE.Object3D: .getWorldScale() target is now required\");\n      target = new THREE.Vector3();\n    }\n\n    // New function, defined below (used instead of updateMatrixWorld)\n    this.updateMatrices();\n    this.matrixWorld.decompose(position, quaternion, target);\n\n    return target;\n  };\n})();\n\nconst handleMatrixModification = o => {\n  if (!o.matrixIsModified) {\n    o.matrixIsModified = true;\n\n    if (o.cachedMatrixWorld) {\n      o.cachedMatrixWorld.copy(o.matrixWorld);\n      o.matrixWorld = o.cachedMatrixWorld;\n    }\n  }\n};\n\nconst updateMatrix = THREE.Object3D.prototype.updateMatrix;\nTHREE.Object3D.prototype.updateMatrix = function() {\n  updateMatrix.apply(this, arguments);\n  handleMatrixModification(this);\n};\n\nconst applyMatrix = THREE.Object3D.prototype.applyMatrix;\nTHREE.Object3D.prototype.applyMatrix = function() {\n  applyMatrix.apply(this, arguments);\n  handleMatrixModification(this);\n};\n\n// By the end of this function this.matrix reflects the updated local matrix\n// and this.matrixWorld reflects the updated world matrix, taking into account\n// parent matrices.\n//\n// forceLocalUpdate - Forces the local matrix to be updated regardless of if it has not\n// been marked dirty.\n//\n// forceWorldUpdate - Forces the world matrix to be updated regardless of if the local matrix\n// has been updated since the last update.\n//\n// skipParents - unless true, all parent matricies are updated before updating this object's\n// local and world matrix.\n//\nTHREE.Object3D.prototype.updateMatrices = function(forceLocalUpdate, forceWorldUpdate, skipParents) {\n  if (!this.hasHadFirstMatrixUpdate) {\n    if (\n      !this.position.equals(zeroPos) ||\n      !this.quaternion.equals(zeroQuat) ||\n      !this.scale.equals(oneScale) ||\n      !this.matrix.equals(identity)\n    ) {\n      // Only update the matrix the first time if its non-identity, this way\n      // this.matrixIsModified will remain false until the default\n      // identity matrix is updated.\n      this.updateMatrix();\n    }\n\n    this.hasHadFirstMatrixUpdate = true;\n    this.matrixWorldNeedsUpdate = true;\n    this.cachedMatrixWorld = this.matrixWorld;\n  } else if (this.matrixNeedsUpdate || this.matrixAutoUpdate || forceLocalUpdate) {\n    this.updateMatrix();\n    if (this.matrixNeedsUpdate) this.matrixNeedsUpdate = false;\n  }\n\n  if (!skipParents && this.parent) {\n    this.parent.updateMatrices(false, forceWorldUpdate, false);\n    this.matrixWorldNeedsUpdate = this.matrixWorldNeedsUpdate || this.parent.childrenNeedMatrixWorldUpdate;\n  }\n\n  if (this.matrixWorldNeedsUpdate || forceWorldUpdate) {\n    if (this.parent === null) {\n      this.matrixWorld.copy(this.matrix);\n    } else {\n      // If the matrix is unmodified, it is the identity matrix,\n      // and hence we can use the parent's world matrix directly.\n      //\n      // Note this assumes all callers will either not pass skipParents=true\n      // *or* will update the parent themselves beforehand as is done in\n      // updateMatrixWorld.\n      if (!this.matrixIsModified) {\n        this.matrixWorld = this.parent.matrixWorld;\n      } else {\n        // Once matrixIsModified === true, this.matrixWorld has been updated to be a local\n        // copy, not a reference to this.parent.matrixWorld (see updateMatrix/applyMatrix)\n        this.matrixWorld.multiplyMatrices(this.parent.matrixWorld, this.matrix);\n      }\n    }\n\n    this.childrenNeedMatrixWorldUpdate = true;\n    this.matrixWorldNeedsUpdate = false;\n  }\n};\n\n// Computes this object's matrices and then the recursively computes the matrices of all the children.\n//\n// forceWorldUpdate - If true and the object is visible, will force the world matrix to be updated for\n// this node and all of its children.\n//\n// includeInvisible - If true, does not ignore non-visible objects.\nTHREE.Object3D.prototype.updateMatrixWorld = function(forceWorldUpdate, includeInvisible) {\n  if (!this.visible && !includeInvisible) return;\n\n  // Do not recurse upwards, since this is recursing downwards\n  this.updateMatrices(false, forceWorldUpdate, true);\n\n  const children = this.children;\n  const forceChildrenWorldUpdate = this.childrenNeedMatrixWorldUpdate || forceWorldUpdate;\n\n  for (let i = 0, l = children.length; i < l; i++) {\n    children[i].updateMatrixWorld(forceChildrenWorldUpdate, includeInvisible);\n  }\n\n  if (this.childrenNeedMatrixWorldUpdate) this.childrenNeedMatrixWorldUpdate = false;\n};\n\n// Updates this function to use updateMatrices() to avoid extra matrix computations\nTHREE.Object3D.prototype.lookAt = (function() {\n  // This method does not support objects having non-uniformly-scaled parent(s)\n\n  const q1 = new THREE.Quaternion();\n  const m1 = new THREE.Matrix4();\n  const target = new THREE.Vector3();\n  const position = new THREE.Vector3();\n\n  return function lookAt(x, y, z) {\n    if (x.isVector3) {\n      target.copy(x);\n    } else {\n      target.set(x, y, z);\n    }\n\n    const parent = this.parent;\n\n    if (parent) {\n      parent.updateMatrices();\n    }\n    this.updateMatrices(); // hubs change\n\n    position.setFromMatrixPosition(this.matrixWorld);\n\n    if (this.isCamera || this.isLight) {\n      m1.lookAt(position, target, this.up);\n    } else {\n      m1.lookAt(target, position, this.up);\n    }\n\n    this.quaternion.setFromRotationMatrix(m1);\n\n    if (parent) {\n      m1.extractRotation(parent.matrixWorld);\n      q1.setFromRotationMatrix(m1);\n      this.quaternion.premultiply(q1.inverse());\n    }\n    this.matrixNeedsUpdate = true;\n  };\n})();\n","/* eslint-disable */\n\n// Modified version of A-Frame's animation component to set matrixNeedsUpdate = true in the\n// scenario where the transform changes on an object during an animation.\n//\n// Changes are identified w comment // hubs\n//\n// Bugfix added 3/1/19 - If an animation component is removed before its delay setting, then\n// it erroneously restarts.\n\nvar anime = require(\"animejs\").default;\nvar components = AFRAME.components; // hubs\nvar registerComponent = AFRAME.registerComponent; // hubs\n//var THREE = require('../lib/three'); // hubs\nvar utils = AFRAME.utils; // hubs\n\ndelete AFRAME.components.animation; // hubs\n\nvar colorHelperFrom = new THREE.Color();\nvar colorHelperTo = new THREE.Color();\n\nvar getComponentProperty = utils.entity.getComponentProperty;\nvar setComponentProperty = utils.entity.setComponentProperty;\nvar splitCache = {};\n\nvar TYPE_COLOR = \"color\";\nvar PROP_POSITION = \"position\";\nvar PROP_ROTATION = \"rotation\";\nvar PROP_SCALE = \"scale\";\nvar STRING_COMPONENTS = \"components\";\nvar STRING_OBJECT3D = \"object3D\";\n\n/**\n * Animation component for A-Frame using anime.js.\n *\n * The component manually controls the tick by setting `autoplay: false` on anime.js and\n * manually * calling `animation.tick()` in the tick handler. To pause or resume, we toggle a\n * boolean * flag * `isAnimationPlaying`.\n *\n * anime.js animation config for tweenining Javascript objects and values works as:\n *\n *  config = {\n *    targets: {foo: 0.0, bar: '#000'},\n *    foo: 1.0,\n *    bar: '#FFF'\n *  }\n *\n * The above will tween each property in `targets`. The `to` values are set in the root of\n * the config.\n *\n * @member {object} animation - anime.js instance.\n * @member {boolean} animationIsPlaying - Control if animation is playing.\n */\nmodule.exports.Component = registerComponent(\"animation\", {\n  schema: {\n    autoplay: { default: true },\n    delay: { default: 0 },\n    dir: { default: \"\" },\n    dur: { default: 1000 },\n    easing: { default: \"easeInQuad\" },\n    elasticity: { default: 400 },\n    enabled: { default: true },\n    from: { default: \"\" },\n    loop: {\n      default: 0,\n      parse: function(value) {\n        // Boolean or integer.\n        if (value === true || value === \"true\") {\n          return true;\n        }\n        if (value === false || value === \"false\") {\n          return false;\n        }\n        return parseInt(value, 10);\n      }\n    },\n    property: { default: \"\" },\n    startEvents: { type: \"array\" },\n    pauseEvents: { type: \"array\" },\n    resumeEvents: { type: \"array\" },\n    round: { default: false },\n    to: { default: \"\" },\n    type: { default: \"\" },\n    isRawProperty: { default: false }\n  },\n\n  multiple: true,\n\n  init: function() {\n    var self = this;\n\n    this.eventDetail = { name: this.attrName };\n    this.time = 0;\n\n    this.animation = null;\n    this.animationIsPlaying = false;\n    this.onStartEvent = this.onStartEvent.bind(this);\n    this.beginAnimation = this.beginAnimation.bind(this);\n    this.pauseAnimation = this.pauseAnimation.bind(this);\n    this.resumeAnimation = this.resumeAnimation.bind(this);\n\n    this.fromColor = {};\n    this.toColor = {};\n    this.targets = {};\n    this.targetsArray = [];\n\n    this.updateConfigForDefault = this.updateConfigForDefault.bind(this);\n    this.updateConfigForRawColor = this.updateConfigForRawColor.bind(this);\n\n    this.config = {\n      complete: function() {\n        self.animationIsPlaying = false;\n        self.el.emit(\"animationcomplete\", self.eventDetail, false);\n        if (self.id) {\n          self.el.emit(\"animationcomplete__\" + self.id, self.eventDetail, false);\n        }\n      }\n    };\n  },\n\n  update: function(oldData) {\n    var config = this.config;\n    var data = this.data;\n\n    this.animationIsPlaying = false;\n\n    if (!this.data.enabled) {\n      return;\n    }\n\n    if (!data.property) {\n      return;\n    }\n\n    // Base config.\n    config.autoplay = false;\n    config.direction = data.dir;\n    config.duration = data.dur;\n    config.easing = data.easing;\n    config.elasticity = data.elasticity;\n    config.loop = data.loop;\n    config.round = data.round;\n\n    // Start new animation.\n    this.createAndStartAnimation();\n  },\n\n  tick: function(t, dt) {\n    if (!this.animationIsPlaying) {\n      return;\n    }\n    this.time += dt;\n    this.animation.tick(this.time);\n  },\n\n  remove: function() {\n    this.pauseAnimation();\n    this.removeEventListeners();\n    this.cancelDelayedStart(); // hubs\n  },\n\n  pause: function() {\n    this.paused = true;\n    this.pausedWasPlaying = this.animationIsPlaying;\n    this.pauseAnimation();\n    this.removeEventListeners();\n    this.cancelDelayedStart(); // hubs\n  },\n\n  /**\n   * `play` handler only for resuming scene.\n   */\n  play: function() {\n    if (!this.paused) {\n      return;\n    }\n    this.paused = false;\n    this.addEventListeners();\n    if (this.pausedWasPlaying) {\n      this.resumeAnimation();\n      this.pausedWasPlaying = false;\n    }\n  },\n\n  /**\n   * Start animation from scratch.\n   */\n  createAndStartAnimation: function() {\n    var data = this.data;\n\n    this.updateConfig();\n    this.animationIsPlaying = false;\n    this.animation = anime(this.config);\n\n    this.removeEventListeners();\n    this.cancelDelayedStart(); // hubs\n    this.addEventListeners();\n\n    // Wait for start events for animation.\n    if (!data.autoplay || (data.startEvents && data.startEvents.length)) {\n      return;\n    }\n\n    // Delay animation.\n    if (data.delay) {\n      // hubs\n      this.delayTimeout = setTimeout(this.beginAnimation, data.delay);\n      return;\n    }\n\n    // Play animation.\n    this.beginAnimation();\n  },\n\n  /**\n   * This is before animation start (including from startEvents).\n   * Set to initial state (config.from, time = 0, seekTime = 0).\n   */\n  beginAnimation: function() {\n    this.updateConfig();\n    this.time = 0;\n    this.animationIsPlaying = true;\n    this.stopRelatedAnimations();\n    this.el.emit(\"animationbegin\", this.eventDetail, false);\n  },\n\n  pauseAnimation: function() {\n    this.animationIsPlaying = false;\n  },\n\n  resumeAnimation: function() {\n    this.animationIsPlaying = true;\n  },\n\n  /**\n   * startEvents callback.\n   */\n  onStartEvent: function() {\n    if (!this.data.enabled) {\n      return;\n    }\n\n    this.updateConfig();\n    if (this.animation) {\n      this.animation.pause();\n    }\n    this.animation = anime(this.config);\n\n    // Include the delay before each start event.\n    if (this.data.delay) {\n      setTimeout(this.beginAnimation, this.data.delay);\n      return;\n    }\n    this.beginAnimation();\n  },\n\n  /**\n   * rawProperty: true and type: color;\n   */\n  updateConfigForRawColor: function() {\n    var config = this.config;\n    var data = this.data;\n    var el = this.el;\n    var from;\n    var key;\n    var to;\n\n    if (this.waitComponentInitRawProperty(this.updateConfigForRawColor)) {\n      return;\n    }\n\n    from = data.from === \"\" ? getRawProperty(el, data.property) : data.from;\n    to = data.to;\n\n    // Use r/g/b vector for color type.\n    this.setColorConfig(from, to);\n    from = this.fromColor;\n    to = this.toColor;\n\n    this.targetsArray.length = 0;\n    this.targetsArray.push(from);\n    config.targets = this.targetsArray;\n    for (key in to) {\n      config[key] = to[key];\n    }\n\n    config.update = (function() {\n      var lastValue = {};\n      return function(anim) {\n        var value;\n        value = anim.animatables[0].target;\n        // For animation timeline.\n        if (value.r === lastValue.r && value.g === lastValue.g && value.b === lastValue.b) {\n          return;\n        }\n\n        setRawProperty(el, data.property, value, data.type);\n      };\n    })();\n  },\n\n  /**\n   * Stuff property into generic `property` key.\n   */\n  updateConfigForDefault: function() {\n    var config = this.config;\n    var data = this.data;\n    var el = this.el;\n    var from;\n    var isBoolean;\n    var isNumber;\n    var to;\n\n    if (this.waitComponentInitRawProperty(this.updateConfigForDefault)) {\n      return;\n    }\n\n    if (data.from === \"\") {\n      // Infer from.\n      from = isRawProperty(data) ? getRawProperty(el, data.property) : getComponentProperty(el, data.property);\n    } else {\n      // Explicit from.\n      from = data.from;\n    }\n\n    to = data.to;\n\n    isNumber = !isNaN(from || to);\n    if (isNumber) {\n      from = parseFloat(from);\n      to = parseFloat(to);\n    } else {\n      from = from ? from.toString() : from;\n      to = to ? to.toString() : to;\n    }\n\n    // Convert booleans to integer to allow boolean flipping.\n    isBoolean = data.to === \"true\" || data.to === \"false\" || data.to === true || data.to === false;\n    if (isBoolean) {\n      from = data.from === \"true\" || data.from === true ? 1 : 0;\n      to = data.to === \"true\" || data.to === true ? 1 : 0;\n    }\n\n    this.targets.aframeProperty = from;\n    config.targets = this.targets;\n    config.aframeProperty = to;\n    config.update = (function() {\n      var lastValue;\n\n      return function(anim) {\n        var value;\n        value = anim.animatables[0].target.aframeProperty;\n\n        // Need to do a last value check for animation timeline since all the tweening\n        // begins simultaenously even if the value has not changed. Also better for perf\n        // anyways.\n        if (value === lastValue) {\n          return;\n        }\n        lastValue = value;\n\n        if (isBoolean) {\n          value = value >= 1;\n        }\n\n        if (isRawProperty(data)) {\n          setRawProperty(el, data.property, value, data.type);\n        } else {\n          setComponentProperty(el, data.property, value);\n        }\n      };\n    })();\n  },\n\n  /**\n   * Extend x/y/z/w onto the config.\n   * Update vector by modifying object3D.\n   */\n  updateConfigForVector: function() {\n    var config = this.config;\n    var data = this.data;\n    var el = this.el;\n    var key;\n    var from;\n    var to;\n\n    // Parse coordinates.\n    from =\n      data.from !== \"\"\n        ? utils.coordinates.parse(data.from) // If data.from defined, use that.\n        : getComponentProperty(el, data.property); // If data.from not defined, get on the fly.\n    to = utils.coordinates.parse(data.to);\n\n    if (data.property === PROP_ROTATION) {\n      toRadians(from);\n      toRadians(to);\n    }\n\n    // Set to and from.\n    this.targetsArray.length = 0;\n    this.targetsArray.push(from);\n    config.targets = this.targetsArray;\n    for (key in to) {\n      config[key] = to[key];\n    }\n\n    // If animating object3D transformation, run more optimized updater.\n    if (data.property === PROP_POSITION || data.property === PROP_ROTATION || data.property === PROP_SCALE) {\n      config.update = (function() {\n        var lastValue = {};\n        return function(anim) {\n          var value = anim.animatables[0].target;\n\n          if (data.property === PROP_SCALE) {\n            value.x = Math.max(0.0001, value.x);\n            value.y = Math.max(0.0001, value.y);\n            value.z = Math.max(0.0001, value.z);\n          }\n\n          // For animation timeline.\n          if (value.x === lastValue.x && value.y === lastValue.y && value.z === lastValue.z) {\n            return;\n          }\n\n          lastValue.x = value.x;\n          lastValue.y = value.y;\n          lastValue.z = value.z;\n\n          el.object3D[data.property].set(value.x, value.y, value.z);\n          el.object3D.matrixNeedsUpdate = true; // hubs\n        };\n      })();\n      return;\n    }\n\n    // Animating some vector.\n    config.update = (function() {\n      var lastValue = {};\n      return function(anim) {\n        var value = anim.animations[0].target;\n\n        // Animate rotation through radians.\n        // For animation timeline.\n        if (value.x === lastValue.x && value.y === lastValue.y && value.z === lastValue.z) {\n          return;\n        }\n        lastValue.x = value.x;\n        lastValue.y = value.y;\n        lastValue.z = value.z;\n        setComponentProperty(el, data.property, value);\n      };\n    })();\n  },\n\n  /**\n   * Update the config before each run.\n   */\n  updateConfig: function() {\n    var propType;\n\n    // Route config type.\n    propType = getPropertyType(this.el, this.data.property);\n    if (isRawProperty(this.data) && this.data.type === TYPE_COLOR) {\n      this.updateConfigForRawColor();\n    } else if (propType === \"vec2\" || propType === \"vec3\" || propType === \"vec4\") {\n      this.updateConfigForVector();\n    } else {\n      this.updateConfigForDefault();\n    }\n  },\n\n  /**\n   * Wait for component to initialize.\n   */\n  waitComponentInitRawProperty: function(cb) {\n    var componentName;\n    var data = this.data;\n    var el = this.el;\n    var self = this;\n\n    if (data.from !== \"\") {\n      return false;\n    }\n\n    if (!data.property.startsWith(STRING_COMPONENTS)) {\n      return false;\n    }\n\n    componentName = splitDot(data.property)[1];\n    if (el.components[componentName]) {\n      return false;\n    }\n\n    el.addEventListener(\"componentinitialized\", function wait(evt) {\n      if (evt.detail.name !== componentName) {\n        return;\n      }\n      cb();\n      // Since the config was created async, create the animation now since we missed it\n      // earlier.\n      self.animation = anime(self.config);\n      el.removeEventListener(\"componentinitialized\", wait);\n    });\n    return true;\n  },\n\n  /**\n   * Make sure two animations on the same property don't fight each other.\n   * e.g., animation__mouseenter=\"property: material.opacity\"\n   *       animation__mouseleave=\"property: material.opacity\"\n   */\n  stopRelatedAnimations: function() {\n    var component;\n    var componentName;\n    for (componentName in this.el.components) {\n      component = this.el.components[componentName];\n      if (componentName === this.attrName) {\n        continue;\n      }\n      if (component.name !== \"animation\") {\n        continue;\n      }\n      if (!component.animationIsPlaying) {\n        continue;\n      }\n      if (component.data.property !== this.data.property) {\n        continue;\n      }\n      component.animationIsPlaying = false;\n    }\n  },\n\n  addEventListeners: function() {\n    var data = this.data;\n    var el = this.el;\n    addEventListeners(el, data.startEvents, this.onStartEvent);\n    addEventListeners(el, data.pauseEvents, this.pauseAnimation);\n    addEventListeners(el, data.resumeEvents, this.resumeAnimation);\n  },\n\n  removeEventListeners: function() {\n    var data = this.data;\n    var el = this.el;\n    removeEventListeners(el, data.startEvents, this.onStartEvent);\n    removeEventListeners(el, data.pauseEvents, this.pauseAnimation);\n    removeEventListeners(el, data.resumeEvents, this.resumeAnimation);\n  },\n\n  // hubs\n  cancelDelayedStart: function() {\n    if (this.delayTimeout) {\n      clearTimeout(this.delayTimeout);\n      this.delayTimeout = null;\n    }\n  },\n\n  setColorConfig: function(from, to) {\n    colorHelperFrom.set(from);\n    colorHelperTo.set(to);\n    from = this.fromColor;\n    to = this.toColor;\n    from.r = colorHelperFrom.r;\n    from.g = colorHelperFrom.g;\n    from.b = colorHelperFrom.b;\n    to.r = colorHelperTo.r;\n    to.g = colorHelperTo.g;\n    to.b = colorHelperTo.b;\n  }\n});\n\n/**\n * Given property name, check schema to see what type we are animating.\n * We just care whether the property is a vector.\n */\nfunction getPropertyType(el, property) {\n  var component;\n  var componentName;\n  var split;\n  var propertyName;\n\n  split = property.split(\".\");\n  componentName = split[0];\n  propertyName = split[1];\n  component = el.components[componentName] || components[componentName];\n\n  // Primitives.\n  if (!component) {\n    return null;\n  }\n\n  // Dynamic schema. We only care about vectors anyways.\n  if (propertyName && !component.schema[propertyName]) {\n    return null;\n  }\n\n  // Multi-prop.\n  if (propertyName) {\n    return component.schema[propertyName].type;\n  }\n\n  // Single-prop.\n  return component.schema.type;\n}\n\n/**\n * Convert object to radians.\n */\nfunction toRadians(obj) {\n  obj.x = THREE.Math.degToRad(obj.x);\n  obj.y = THREE.Math.degToRad(obj.y);\n  obj.z = THREE.Math.degToRad(obj.z);\n}\n\nfunction addEventListeners(el, eventNames, handler) {\n  var i;\n  for (i = 0; i < eventNames.length; i++) {\n    el.addEventListener(eventNames[i], handler);\n  }\n}\n\nfunction removeEventListeners(el, eventNames, handler) {\n  var i;\n  for (i = 0; i < eventNames.length; i++) {\n    el.removeEventListener(eventNames[i], handler);\n  }\n}\n\nfunction getRawProperty(el, path) {\n  var i;\n  var split;\n  var value;\n  split = splitDot(path);\n  value = el;\n  for (i = 0; i < split.length; i++) {\n    value = value[split[i]];\n  }\n  return value;\n}\n\nfunction setRawProperty(el, path, value, type) {\n  var i;\n  var split;\n  var propertyName;\n  var targetValue;\n\n  if (path.startsWith(\"object3D.rotation\")) {\n    value = THREE.Math.degToRad(value);\n  }\n\n  // Walk.\n  split = splitDot(path);\n  targetValue = el;\n  for (i = 0; i < split.length - 1; i++) {\n    targetValue = targetValue[split[i]];\n  }\n  propertyName = split[split.length - 1];\n\n  // Raw color.\n  if (type === TYPE_COLOR) {\n    if (\"r\" in targetValue[propertyName]) {\n      targetValue[propertyName].r = value.r;\n      targetValue[propertyName].g = value.g;\n      targetValue[propertyName].b = value.b;\n    } else {\n      targetValue[propertyName].x = value.r;\n      targetValue[propertyName].y = value.g;\n      targetValue[propertyName].z = value.b;\n    }\n    return;\n  }\n\n  targetValue[propertyName] = value;\n}\n\nfunction splitDot(path) {\n  if (path in splitCache) {\n    return splitCache[path];\n  }\n  splitCache[path] = path.split(\".\");\n  return splitCache[path];\n}\n\nfunction isRawProperty(data) {\n  return data.isRawProperty || data.property.startsWith(STRING_COMPONENTS) || data.property.startsWith(STRING_OBJECT3D);\n}\n","AFRAME.registerComponent(\"ambient-light\", {\n  schema: {\n    color: { type: \"color\" },\n    intensity: { default: 1.0 }\n  },\n\n  init() {\n    const el = this.el;\n    this.light = new THREE.AmbientLight();\n    this.el.setObject3D(\"ambient-light\", this.light);\n    this.el.sceneEl.systems.light.registerLight(el);\n    this.rendererSystem = this.el.sceneEl.systems.renderer;\n  },\n\n  update(prevData) {\n    if (this.data.color !== prevData.color) {\n      this.light.color.set(this.data.color);\n      this.rendererSystem.applyColorCorrection(this.light.color);\n    }\n\n    if (this.data.intensity !== prevData.intensity) {\n      this.light.intensity = this.data.intensity;\n    }\n  },\n\n  remove: function() {\n    this.el.removeObject3D(\"ambient-light\");\n  }\n});\n","/**\n * Instantiates and updates a THREE.AnimationMixer on an entity.\n * @component animation-mixer\n */\nAFRAME.registerComponent(\"animation-mixer\", {\n  initMixer(animations) {\n    this.mixer = new THREE.AnimationMixer(this.el.object3D);\n    this.el.object3D.animations = animations;\n    this.animations = animations;\n  },\n\n  tick: function(t, dt) {\n    if (this.mixer) {\n      this.mixer.update(dt / 1000);\n    }\n  }\n});\n","/**\n * Sets the CSS class on an entity.\n * @component css-class\n */\nAFRAME.registerComponent(\"css-class\", {\n  schema: {\n    type: \"string\"\n  },\n  multiple: true,\n  init() {\n    this.el.classList.add(this.data);\n  },\n  update(oldData) {\n    if (this.data !== oldData) {\n      this.el.classList.remove(oldData);\n      this.el.classList.add(this.data);\n    }\n  },\n  remove() {\n    this.el.classList.remove(this.data);\n  }\n});\n","/* global CANNON */\n/**\n * Floats a duck based on its scale.\n * @component duck\n */\nAFRAME.registerComponent(\"duck\", {\n  schema: {\n    initialForce: { default: 0 },\n    maxForce: { default: 6.5 },\n    maxScale: { default: 5 }\n  },\n\n  init: function() {\n    this.physicsSystem = this.el.sceneEl.systems.physics;\n    this.hasBody = false;\n    this.position = new CANNON.Vec3();\n    this.force = new CANNON.Vec3(0, this.data.initialForce, 0);\n    this.initialScale = this.el.object3D.scale.x;\n    this.maxScale = this.data.maxScale * this.initialScale;\n  },\n\n  play: function() {\n    this.physicsSystem.addComponent(this);\n  },\n\n  pause: function() {\n    this.physicsSystem.removeComponent(this);\n  },\n\n  beforeStep: function() {\n    if (this.el.body && NAF.utils.isMine(this.el)) {\n      const currentScale = this.el.object3D.scale.x;\n      const ratio = Math.min(1, (currentScale - this.initialScale) / (this.maxScale - this.initialScale));\n      const force = ratio * this.data.maxForce;\n      if (force > 0) {\n        const angle = Math.random() * Math.PI * 2;\n        const x = Math.cos(angle);\n        const z = Math.sin(angle);\n        this.force.set(x, force, z);\n        this.position.set(x * 0.01, 0, z * 0.01);\n        this.el.object3D.matrixNeedsUpdate = true;\n        this.el.body.applyForce(this.force, this.position);\n      }\n    }\n  }\n});\n","/* global CANNON */\nAFRAME.registerComponent(\"heightfield\", {\n  init() {\n    this.el.addEventListener(\"componentinitialized\", e => {\n      if (e.detail.name === \"static-body\") {\n        this.generateAndAddHeightfield(this.el.components[\"static-body\"]);\n      }\n    });\n    this.el.setAttribute(\"static-body\", { shape: \"none\", mass: 0 });\n  },\n  generateAndAddHeightfield(body) {\n    const { offset, distance, data } = this.data;\n\n    const orientation = new CANNON.Quaternion();\n    orientation.setFromAxisAngle(new CANNON.Vec3(1, 0, 0), -Math.PI / 2);\n\n    const rotation = new CANNON.Quaternion();\n    rotation.setFromAxisAngle(new CANNON.Vec3(0, 1, 0), -Math.PI / 2);\n    rotation.mult(orientation, orientation);\n\n    const cannonOffset = new CANNON.Vec3(offset.x, offset.y, offset.z);\n\n    const shape = new CANNON.Heightfield(data, { elementSize: distance });\n\n    body.addShape(shape, cannonOffset, orientation);\n  }\n});\n","AFRAME.registerComponent(\"hemisphere-light\", {\n  schema: {\n    skyColor: { type: \"color\" },\n    groundColor: { type: \"color\" },\n    intensity: { default: 1.0 }\n  },\n\n  init() {\n    const el = this.el;\n    this.light = new THREE.HemisphereLight();\n    this.light.position.set(0, 0, 0);\n    this.light.matrixNeedsUpdate = true;\n    this.el.setObject3D(\"hemisphere-light\", this.light);\n    this.el.sceneEl.systems.light.registerLight(el);\n  },\n\n  update(prevData) {\n    if (this.data.skyColor !== prevData.skyColor) {\n      this.light.color.set(this.data.skyColor);\n    }\n\n    if (this.data.groundColor !== prevData.groundColor) {\n      this.light.groundColor.set(this.data.groundColor);\n    }\n\n    if (this.data.intensity !== prevData.intensity) {\n      this.light.intensity = this.data.intensity;\n    }\n  },\n\n  remove: function() {\n    this.el.removeObject3D(\"hemisphere-light\");\n  }\n});\n","/**\n * Hides entities based on the scene's quality mode\n * @namespace environment\n * @component hide-when-quality\n */\nAFRAME.registerComponent(\"hide-when-quality\", {\n  schema: { type: \"string\", default: \"low\" },\n\n  init() {\n    this.onQualityChanged = this.onQualityChanged.bind(this);\n    this.el.sceneEl.addEventListener(\"quality-changed\", this.onQualityChanged);\n  },\n\n  onQualityChanged(event) {\n    this.updateComponentState(event.detail);\n  },\n\n  update(oldData) {\n    if (this.data !== oldData) {\n      this.updateComponentState(window.APP.quality);\n    }\n  },\n\n  updateComponentState(quality) {\n    this.el.setAttribute(\"visible\", quality !== this.data);\n  }\n});\n","AFRAME.registerComponent(\"point-light\", {\n  schema: {\n    color: { type: \"color\" },\n    intensity: { default: 1.0 },\n    range: { default: 0 },\n    decay: { default: 2 },\n    castShadow: { default: true },\n    shadowMapResolution: { default: [512, 512] },\n    shadowBias: { default: 0 },\n    shadowRadius: { default: 1 }\n  },\n\n  init() {\n    const el = this.el;\n    this.light = new THREE.PointLight();\n    this.light.shadow.camera.matrixAutoUpdate = true;\n    this.el.setObject3D(\"point-light\", this.light);\n    this.el.sceneEl.systems.light.registerLight(el);\n    this.rendererSystem = this.el.sceneEl.systems.renderer;\n  },\n\n  update(prevData) {\n    const light = this.light;\n\n    if (this.data.color !== prevData.color) {\n      const color = new THREE.Color(this.data.color);\n      this.rendererSystem.applyColorCorrection(color);\n      light.color.copy(color);\n    }\n\n    if (this.data.intensity !== prevData.intensity) {\n      light.intensity = this.data.intensity;\n    }\n\n    if (this.data.range !== prevData.range) {\n      light.distance = this.data.range;\n    }\n\n    if (this.data.decay !== prevData.decay) {\n      light.decay = this.data.decay;\n    }\n\n    if (this.data.castShadow !== prevData.castShadow) {\n      light.castShadow = this.data.castShadow;\n    }\n\n    if (this.data.shadowBias !== prevData.shadowBias) {\n      light.shadow.bias = this.data.shadowBias;\n    }\n\n    if (this.data.shadowRadius !== prevData.shadowRadius) {\n      light.shadow.radius = this.data.shadowRadius;\n    }\n\n    const [width, height] = this.data.shadowMapResolution;\n    const [prevWidth, prevHeight] = prevData.shadowMapResolution ? prevData.shadowMapResolution : [512, 512];\n\n    if (width !== prevWidth || height !== prevHeight) {\n      light.shadow.mapSize.set(width, height);\n\n      if (light.shadow.map) {\n        light.shadow.map.dispose();\n        light.shadow.map = null;\n      }\n    }\n  },\n\n  remove: function() {\n    this.el.removeObject3D(\"point-light\");\n  }\n});\n","AFRAME.registerComponent(\"spot-light\", {\n  schema: {\n    color: { type: \"color\" },\n    intensity: { default: 1.0 },\n    range: { default: 0 },\n    decay: { default: 2 },\n    innerConeAngle: { default: 0 },\n    outerConeAngle: { default: Math.PI / 4.0 },\n    castShadow: { default: true },\n    shadowMapResolution: { default: [512, 512] },\n    shadowBias: { default: 0 },\n    shadowRadius: { default: 1 }\n  },\n\n  init() {\n    const el = this.el;\n    this.light = new THREE.SpotLight();\n    this.light.position.set(0, 0, 0);\n    this.light.target.position.set(0, 0, 1);\n    this.light.add(this.light.target);\n    this.light.matrixNeedsUpdate = true;\n    this.light.target.matrixNeedsUpdate = true;\n    this.el.setObject3D(\"spot-light\", this.light);\n    this.el.sceneEl.systems.light.registerLight(el);\n  },\n\n  update(prevData) {\n    const light = this.light;\n\n    if (this.data.color !== prevData.color) {\n      light.color.set(this.data.color);\n    }\n\n    if (this.data.intensity !== prevData.intensity) {\n      light.intensity = this.data.intensity;\n    }\n\n    if (this.data.range !== prevData.range) {\n      light.distance = this.data.range;\n    }\n\n    if (this.data.decay !== prevData.decay) {\n      light.decay = this.data.decay;\n    }\n\n    if (this.data.innerConeAngle !== prevData.innerConeAngle || this.data.outerConeAngle !== prevData.outerConeAngle) {\n      light.angle = this.data.outerConeAngle;\n      light.penumbra = 1.0 - this.data.innerConeAngle / this.data.outerConeAngle;\n    }\n\n    if (this.data.castShadow !== prevData.castShadow) {\n      light.castShadow = this.data.castShadow;\n    }\n\n    if (this.data.shadowBias !== prevData.shadowBias) {\n      light.shadow.bias = this.data.shadowBias;\n    }\n\n    if (this.data.shadowRadius !== prevData.shadowRadius) {\n      light.shadow.radius = this.data.shadowRadius;\n    }\n\n    const [width, height] = this.data.shadowMapResolution;\n    const [prevWidth, prevHeight] = prevData.shadowMapResolution ? prevData.shadowMapResolution : [512, 512];\n\n    if (width !== prevWidth || height !== prevHeight) {\n      light.shadow.mapSize.set(width, height);\n\n      if (light.shadow.map) {\n        light.shadow.map.dispose();\n        light.shadow.map = null;\n      }\n    }\n  },\n\n  remove: function() {\n    this.el.removeObject3D(\"spot-light\");\n  }\n});\n","/* global AFRAME */\nconst COLLISION_LAYERS = require(\"../constants\").COLLISION_LAYERS;\n\nAFRAME.registerComponent(\"floaty-object\", {\n  schema: {\n    // Make the object locked/kinematic upon load\n    autoLockOnLoad: { default: false },\n\n    // Make the object kinematic immediately upon release\n    autoLockOnRelease: { default: false },\n\n    // On release, modify the gravity based upon gravitySpeedLimit. If less than this, let the object float\n    // otherwise apply releaseGravity.\n    modifyGravityOnRelease: { default: false },\n\n    // Gravity to apply if object is thrown at a speed greated than speed limit.\n    releaseGravity: { default: -2 },\n\n    // If true, the degree to which angular rotation is allowed when floating is reduced (useful for 2d media)\n    reduceAngularFloat: { default: false },\n\n    // Velocity speed limit under which gravity will not be added if modifyGravityOnRelease is true\n    gravitySpeedLimit: { default: 1.85 } // Set to 0 to never apply gravity\n  },\n\n  init() {\n    this.onGrab = this.onGrab.bind(this);\n    this.onRelease = this.onRelease.bind(this);\n  },\n\n  tick() {\n    if (!this.bodyHelper) {\n      this.bodyHelper = this.el.components[\"body-helper\"];\n    }\n\n    const interaction = AFRAME.scenes[0].systems.interaction;\n    const isHeld = interaction && interaction.isHeld(this.el);\n    if (isHeld && !this.wasHeld) {\n      this.onGrab();\n    }\n    if (this.wasHeld && !isHeld) {\n      this.onRelease();\n    }\n\n    if (!isHeld && this._makeStaticWhenAtRest) {\n      const isMine = this.el.components.networked && NAF.utils.isMine(this.el);\n      const linearThreshold = this.bodyHelper.data.linearSleepingThreshold;\n      const angularThreshold = this.bodyHelper.data.angularSleepingThreshold;\n      const isAtRest =\n        this.bodyHelper.body &&\n        this.bodyHelper.body.physicsBody.getLinearVelocity().length2() < linearThreshold * linearThreshold &&\n        this.bodyHelper.body.physicsBody.getAngularVelocity().length2() < angularThreshold * angularThreshold;\n\n      if (isAtRest && isMine) {\n        this.el.setAttribute(\"body-helper\", { type: \"kinematic\" });\n      }\n\n      if (isAtRest || !isMine) {\n        this._makeStaticWhenAtRest = false;\n      }\n    }\n\n    this.wasHeld = isHeld;\n  },\n\n  play() {\n    // We do this in play instead of in init because otherwise NAF.utils.isMine fails\n    if (this.hasBeenHereBefore) return;\n    this.hasBeenHereBefore = true;\n    if (this.data.autoLockOnLoad) {\n      this.el.setAttribute(\"body-helper\", {\n        gravity: { x: 0, y: 0, z: 0 }\n      });\n      this.setLocked(true);\n    }\n  },\n\n  setLocked(locked) {\n    if (this.el.components.networked && !NAF.utils.isMine(this.el)) return;\n\n    this.locked = locked;\n    this.el.setAttribute(\"body-helper\", { type: locked ? \"kinematic\" : \"dynamic\" });\n  },\n\n  onRelease() {\n    if (this.data.modifyGravityOnRelease) {\n      if (\n        this.data.gravitySpeedLimit === 0 ||\n        (this.bodyHelper.body &&\n          this.bodyHelper.body.getVelocity().length2() < this.data.gravitySpeedLimit * this.data.gravitySpeedLimit)\n      ) {\n        this.el.setAttribute(\"body-helper\", {\n          gravity: { x: 0, y: 0, z: 0 },\n          angularDamping: this.data.reduceAngularFloat ? 0.98 : 0.5,\n          linearDamping: 0.95,\n          linearSleepingThreshold: 0.1,\n          angularSleepingThreshold: 0.1,\n          collisionFilterMask: COLLISION_LAYERS.HANDS\n        });\n\n        this._makeStaticWhenAtRest = true;\n      } else {\n        this.el.setAttribute(\"body-helper\", {\n          gravity: { x: 0, y: this.data.releaseGravity, z: 0 },\n          angularDamping: 0.01,\n          linearDamping: 0.01,\n          linearSleepingThreshold: 1.6,\n          angularSleepingThreshold: 2.5,\n          collisionFilterMask: COLLISION_LAYERS.DEFAULT_INTERACTABLE\n        });\n      }\n    } else {\n      this.el.setAttribute(\"body-helper\", {\n        collisionFilterMask: COLLISION_LAYERS.DEFAULT_INTERACTABLE,\n        gravity: { x: 0, y: -9.8, z: 0 }\n      });\n    }\n\n    if (this.data.autoLockOnRelease) {\n      this.setLocked(true);\n    }\n  },\n\n  onGrab() {\n    this.el.setAttribute(\"body-helper\", {\n      gravity: { x: 0, y: 0, z: 0 },\n      collisionFilterMask: COLLISION_LAYERS.HANDS\n    });\n    this.setLocked(false);\n  },\n\n  remove() {\n    if (this.stuckTo) {\n      const stuckTo = this.stuckTo;\n      delete this.stuckTo;\n      stuckTo._unstickObject();\n    }\n  }\n});\n","const sizeVec = new THREE.Vector3();\nconst boundingBoxWorldPositionVec = new THREE.Vector3();\nconst colliderWorldPositionVec = new THREE.Vector3();\n\nAFRAME.registerComponent(\"trigger-volume\", {\n  schema: {\n    colliders: { type: \"selectorAll\" },\n    size: { type: \"vec3\", default: { x: 1, y: 1, z: 1 } },\n    target: { type: \"selector\" },\n    enterComponent: { type: \"string\" },\n    enterProperty: { type: \"string\" },\n    enterValue: {\n      default: \"\",\n      parse: v => (typeof v === \"object\" ? v : JSON.parse(v)),\n      stringify: JSON.stringify\n    },\n    leaveComponent: { type: \"string\" },\n    leaveProperty: { type: \"string\" },\n    leaveValue: {\n      default: \"\",\n      parse: v => (typeof v === \"object\" ? v : JSON.parse(v)),\n      stringify: JSON.stringify\n    }\n  },\n  init() {\n    this.boundingBox = new THREE.Box3();\n    this.collidingLastFrame = {};\n  },\n  update() {\n    this.el.object3D.getWorldPosition(boundingBoxWorldPositionVec);\n    sizeVec.copy(this.data.size);\n    this.boundingBox.setFromCenterAndSize(boundingBoxWorldPositionVec, sizeVec);\n  },\n  tick() {\n    if (!this.data.target) return;\n\n    const colliders = this.data.colliders;\n\n    for (let i = 0; i < colliders.length; i++) {\n      const collider = colliders[i];\n      const object3D = collider.object3D;\n\n      object3D.getWorldPosition(colliderWorldPositionVec);\n      const isColliding = this.boundingBox.containsPoint(colliderWorldPositionVec);\n      const collidingLastFrame = this.collidingLastFrame[object3D.id];\n\n      if (isColliding && !collidingLastFrame) {\n        this.data.target.setAttribute(this.data.enterComponent, this.data.enterProperty, this.data.enterValue);\n      } else if (!isColliding && collidingLastFrame) {\n        this.data.target.setAttribute(this.data.leaveComponent, this.data.leaveProperty, this.data.leaveValue);\n      }\n\n      this.collidingLastFrame[object3D.id] = isColliding;\n    }\n  }\n});\n","// HACK: Setting videoPaused on media-video doesn't work if you are the owner.\n// This component gets around that by calling .togglePlaying() to play/pause the video based on a property change.\nAFRAME.registerComponent(\"video-pause-state\", {\n  schema: {\n    paused: { default: false }\n  },\n\n  init() {\n    this.onPauseStateChange = this.onPauseStateChange.bind(this);\n    this.videoComponent = this.el.components[\"media-video\"];\n\n    if (this.videoComponent) {\n      this.onVideoLoaded();\n    } else {\n      this.onVideoLoaded = this.onVideoLoaded.bind(this);\n      this.el.addEventListener(\"video-loaded\", this.onVideoLoaded);\n    }\n  },\n\n  onVideoLoaded() {\n    this.videoComponent = this.el.components[\"media-video\"];\n    this.video = this.videoComponent.video;\n    this.video.addEventListener(\"pause\", this.onPauseStateChange);\n  },\n\n  onPauseStateChange() {\n    this.el.setAttribute(\"paused\", this.video.paused);\n  },\n\n  update() {\n    if (this.video && this.data.paused !== this.video.paused) {\n      this.videoComponent.togglePlaying();\n    }\n  },\n\n  remove() {\n    if (this.video) {\n      this.video.removeEventListener(\"pause\", this.onPauseStateChange);\n    }\n    this.el.removeEventListener(\"video-loaded\", this.onVideoLoaded);\n  }\n});\n","/**\n * Logs all events dispatched on an entity\n * @namespace debug\n * @component log-events\n */\nAFRAME.registerComponent(\"log-events\", {\n  init: function() {\n    const el = this.el;\n    const log = this.log.bind(this);\n    const origDispatch = this.el.dispatchEvent;\n    this.el.dispatchEvent = function() {\n      log(Array.from(arguments));\n      return origDispatch.apply(el, arguments);\n    };\n  },\n  log: function([e]) {\n    if ([\"componentchanged\"].includes(e.type)) return;\n    let firstObject = true;\n    const replacer = (k, x) => {\n      if (!x) return x;\n      if (typeof x === \"object\" && x.length === undefined) {\n        if (firstObject) {\n          firstObject = false;\n          return x;\n        }\n        return \"[object]\";\n      }\n      return x;\n    };\n    console.info(`log-events: ${this.el.id} ${e.type} ${JSON.stringify(e.detail, replacer)}`);\n  }\n});\n\n/**\n * Logs all life cycle phases on an entity.\n * @namespace debug\n * @component lifecycle-checker\n */\nAFRAME.registerComponent(\"lifecycle-checker\", {\n  schema: {\n    name: { type: \"string\" },\n    tick: { default: false }\n  },\n  init: function() {\n    this.log(\"init\");\n  },\n  update: function() {\n    this.log(\"update\");\n  },\n  tick: function() {\n    if (this.data.tick) {\n      this.log(\"tick\");\n    }\n  },\n  remove: function() {\n    this.log(\"remove\");\n  },\n  pause: function() {\n    this.log(\"pause\");\n  },\n  play: function() {\n    this.log(\"play\");\n  },\n\n  log: function(method) {\n    console.info(`lifecycle-checker:${this.data.name} ${method}`);\n  }\n});\n","const { Pathfinding } = require(\"three-pathfinding\");\n\nAFRAME.registerSystem(\"nav\", {\n  init: function() {\n    this.pathfinder = new Pathfinding();\n  },\n\n  loadMesh: function(mesh, zone) {\n    this.el.object3D.updateMatrixWorld();\n\n    if (this.mesh && this.mesh.geometry && this.mesh.geometry.dispose) {\n      this.mesh.geometry.dispose();\n    }\n\n    this.mesh = mesh;\n    const geometry = new THREE.Geometry().fromBufferGeometry(mesh.geometry);\n    geometry.applyMatrix(mesh.matrixWorld);\n    this.pathfinder.setZoneData(zone, Pathfinding.createZone(geometry));\n    this.el.sceneEl.emit(\"nav-mesh-loaded\");\n  }\n});\n","/**\n * Listens to events from an event source and re-emits them on this entity\n * @component event-repeater\n */\nAFRAME.registerComponent(\"event-repeater\", {\n  schema: {\n    eventSource: { type: \"selector\" },\n    events: { type: \"array\" }\n  },\n\n  play: function() {\n    this.data.eventListeners = [];\n    const events = this.data.events;\n    for (let i = 0; i < events.length; i++) {\n      const event = events[i];\n      this.data.eventListeners[event] = this._handleEvent.bind(this, event);\n      this.data.eventSource.addEventListener(event, this.data.eventListeners[event]);\n    }\n  },\n\n  pause: function() {\n    const events = this.data.events;\n    for (let i = 0; i < events.length; i++) {\n      const event = events[i];\n      this.data.eventSource.removeEventListener(event, this.data.eventListeners[event]);\n    }\n    this.data.eventListeners = [];\n  },\n\n  _handleEvent: function(event, e) {\n    this.el.emit(event, e.detail);\n  }\n});\n","const boundingBox = new THREE.Box3();\nconst frustumBox = new THREE.Box3();\nconst inverseLightMatrixWorld = new THREE.Matrix4();\nconst tempBox = new THREE.Box3();\nconst FRUSTUM_PADDING = 1;\nconst NEAR_CLIPPING_PLANE = -500;\nconst FAR_CLIPPING_PLANE = 500;\nconst verts = [\n  new THREE.Vector3(),\n  new THREE.Vector3(),\n  new THREE.Vector3(),\n  new THREE.Vector3(),\n  new THREE.Vector3(),\n  new THREE.Vector3(),\n  new THREE.Vector3(),\n  new THREE.Vector3()\n];\n\nexport default function resizeShadowCameraFrustum(light, scene) {\n  // Reset bounding box\n  frustumBox.makeEmpty();\n  boundingBox.makeEmpty();\n\n  // Grow the extents of boundingBox for every geometry in the scene that has castShadow set to true.\n  scene.traverse(node => {\n    const geometry = node.geometry;\n\n    if (geometry && node.castShadow) {\n      if (!geometry.boundingBox) {\n        geometry.computeBoundingBox();\n      }\n\n      tempBox.copy(geometry.boundingBox);\n\n      // Apply matrix transforming bounding box from model space to world space\n      tempBox.applyMatrix4(node.matrixWorld);\n\n      boundingBox.union(tempBox);\n    }\n  });\n\n  // Transform the resulting bounding box from world space to light space.\n  // Construct a new bounding box in light space that contains the corners of the bounding box in world space.\n  const min = boundingBox.min;\n  const max = boundingBox.max;\n\n  verts[0].set(min.x, min.y, min.z);\n  verts[1].set(min.x, min.y, max.z);\n  verts[2].set(min.x, max.y, min.z);\n  verts[3].set(min.x, max.y, max.z);\n  verts[4].set(max.x, min.y, min.z);\n  verts[5].set(max.x, min.y, max.z);\n  verts[6].set(max.x, max.y, min.z);\n  verts[7].set(max.x, max.y, max.z);\n\n  inverseLightMatrixWorld.getInverse(light.shadow.camera.matrixWorld);\n\n  for (let i = 0; i < verts.length; i++) {\n    verts[i].applyMatrix4(inverseLightMatrixWorld);\n    frustumBox.expandByPoint(verts[i]);\n  }\n\n  // Update the camera frustum to fit the resulting bounding box.\n  // Everything in the frustum that has castShadow set to true will cast a shadow.\n  // Everything in the frustum that has receiveShadow set to true will receive a shadow.\n  // FRUSTUM_PADDING is added to avoid clipping the edges of shadows.\n  // TODO: Determine why shadows flicker when light is moved fast. The light's matrixWorld is probably being updated a frame behind.\n  const camera = light.shadow.camera;\n  camera.left = frustumBox.min.x - FRUSTUM_PADDING;\n  camera.right = frustumBox.max.x + FRUSTUM_PADDING;\n  camera.bottom = frustumBox.min.y - FRUSTUM_PADDING;\n  camera.top = frustumBox.max.y + FRUSTUM_PADDING;\n  camera.near = frustumBox.min.z + NEAR_CLIPPING_PLANE;\n  camera.far = frustumBox.max.z + FAR_CLIPPING_PLANE;\n  camera.updateProjectionMatrix();\n}\n","import resizeShadowCameraFrustum from \"../utils/resizeShadowCameraFrustum\";\n\nAFRAME.registerComponent(\"directional-light\", {\n  schema: {\n    color: { type: \"color\" },\n    intensity: { default: 1.0 },\n    castShadow: { default: true },\n    shadowMapResolution: { default: [512, 512] },\n    shadowBias: { default: 0 },\n    shadowRadius: { default: 1 }\n  },\n\n  init() {\n    const el = this.el;\n    this.light = new THREE.DirectionalLight();\n    this.light.position.set(0, 0, 0);\n    this.light.target.position.set(0, 0, 1);\n    this.light.add(this.light.target);\n    this.el.setObject3D(\"directional-light\", this.light);\n    this.el.sceneEl.systems.light.registerLight(el);\n    this.rendererSystem = this.el.sceneEl.systems.renderer;\n  },\n\n  update(prevData) {\n    const light = this.light;\n\n    if (this.data.color !== prevData.color) {\n      const color = new THREE.Color(this.data.color);\n      this.rendererSystem.applyColorCorrection(color);\n      light.color.copy(color);\n    }\n\n    if (this.data.intensity !== prevData.intensity) {\n      light.intensity = this.data.intensity;\n    }\n\n    if (this.data.castShadow !== prevData.castShadow) {\n      light.castShadow = this.data.castShadow;\n    }\n\n    if (this.data.shadowBias !== prevData.shadowBias) {\n      light.shadow.bias = this.data.shadowBias;\n    }\n\n    if (this.data.shadowRadius !== prevData.shadowRadius) {\n      light.shadow.radius = this.data.shadowRadius;\n    }\n\n    const [width, height] = this.data.shadowMapResolution;\n    const [prevWidth, prevHeight] = prevData.shadowMapResolution ? prevData.shadowMapResolution : [512, 512];\n\n    if (width !== prevWidth || height !== prevHeight) {\n      light.shadow.mapSize.set(width, height);\n\n      if (light.shadow.map) {\n        light.shadow.map.dispose();\n        light.shadow.map = null;\n      }\n    }\n\n    this.light.shadow.camera.matrixNeedsUpdate = true;\n  },\n\n  tick() {\n    if (window.APP && window.APP.quality === \"low\") {\n      return;\n    }\n\n    resizeShadowCameraFrustum(this.light, this.el.sceneEl.object3D);\n  },\n\n  remove: function() {\n    this.el.removeObject3D(\"directional-light\");\n  }\n});\n","export const Layers = {\n  // Layers 0 - 2 reserverd by ThreeJS and AFrame.\n  reflection: 3\n};\n\n/**\n * Sets layer flags on the underlying Object3D\n * @namespace environment\n * @component layers\n */\nAFRAME.registerComponent(\"layers\", {\n  schema: {\n    reflection: { type: \"boolean\", default: false },\n    inWorldHud: { type: \"boolean\", default: false },\n    exclusive: { type: \"boolean\", default: false } // if true, only these layers will be set\n  },\n  init() {\n    this.update = this.update.bind(this);\n    this.el.addEventListener(\"model-loaded\", this.update);\n  },\n  update(oldData) {\n    const obj = this.el.object3D;\n\n    if (this.data.exclusive) {\n      obj.traverse(o => (o.layers.mask = 0));\n    }\n\n    for (const [name, layer] of Object.entries(Layers)) {\n      const oldValue = oldData[name];\n      const newValue = this.data[name];\n\n      if (oldValue !== newValue) {\n        if (newValue) {\n          obj.traverse(o => o.layers.enable(layer));\n        } else {\n          obj.traverse(o => o.layers.disable(layer));\n        }\n      }\n    }\n  },\n  remove() {\n    this.el.removeEventListener(\"model-loaded\", this.update);\n  }\n});\n","import { findAncestorWithComponent } from \"../utils/scene-graph\";\n\n/**\n * Loops the given clip using this entity's animation mixer\n * @component loop-animation\n */\nAFRAME.registerComponent(\"loop-animation\", {\n  schema: {\n    paused: { type: \"boolean\", default: false },\n    /* DEPRECATED: Use activeClipIndex instead since animation names are not unique */\n    clip: { type: \"string\", default: \"\" },\n    activeClipIndex: { type: \"int\", default: 0 }\n  },\n\n  init() {\n    this.mixerEl = findAncestorWithComponent(this.el, \"animation-mixer\");\n\n    if (!this.mixerEl) {\n      console.warn(\"loop-animation component could not find an animation-mixer in its ancestors.\");\n      return;\n    }\n\n    this.updateClip();\n  },\n\n  update(oldData) {\n    if (this.mixerEl) {\n      if (oldData.clip !== this.data.clip || oldData.activeClipIndex !== this.data.activeClipIndex) {\n        this.updateClip();\n      }\n\n      if (oldData.paused !== this.data.paused && this.currentAction) {\n        this.currentAction.paused = this.data.paused;\n      }\n    }\n  },\n\n  updateClip() {\n    const { mixer, animations } = this.mixerEl.components[\"animation-mixer\"];\n    const { clip: clipName, activeClipIndex } = this.data;\n\n    if (animations.length === 0) {\n      return;\n    }\n\n    let clip;\n\n    if (clipName !== \"\") {\n      clip = animations.find(({ name }) => name === clipName);\n    } else {\n      clip = animations[activeClipIndex];\n    }\n\n    if (!clip) {\n      return;\n    }\n\n    const action = mixer.clipAction(clip, this.el.object3D);\n    action.enabled = true;\n    action.setLoop(THREE.LoopRepeat, Infinity).play();\n    this.currentAction = action;\n  },\n\n  destroy() {\n    if (this.currentAction) {\n      this.currentAction.enabled = false;\n      this.currentAction.stop();\n    }\n  }\n});\n","import { getBox, getScaleCoefficient } from \"../utils/auto-box-collider\";\nimport {\n  resolveUrl,\n  getDefaultResolveQuality,\n  injectCustomShaderChunks,\n  addMeshScaleAnimation,\n  closeExistingMediaMirror\n} from \"../utils/media-utils\";\nimport {\n  isNonCorsProxyDomain,\n  guessContentType,\n  proxiedUrlFor,\n  isHubsRoomUrl,\n  isLocalHubsSceneUrl,\n  isLocalHubsAvatarUrl\n} from \"../utils/media-url-utils\";\nimport { addAnimationComponents } from \"../utils/animation\";\nimport qsTruthy from \"../utils/qs_truthy\";\n\nimport loadingObjectSrc from \"../assets/models/LoadingObject_Atom.glb\";\nimport { SOUND_MEDIA_LOADING, SOUND_MEDIA_LOADED } from \"../systems/sound-effects-system\";\nimport { loadModel } from \"./gltf-model-plus\";\nimport { cloneObject3D } from \"../utils/three-utils\";\nimport { waitForDOMContentLoaded } from \"../utils/async-utils\";\n\nimport { SHAPE } from \"three-ammo/constants\";\n\nlet loadingObjectEnvMap;\nlet loadingObject;\n\nwaitForDOMContentLoaded().then(() => {\n  loadModel(loadingObjectSrc).then(gltf => {\n    loadingObject = gltf;\n  });\n});\n\nconst fetchContentType = url => {\n  return fetch(url, { method: \"HEAD\" }).then(r => r.headers.get(\"content-type\"));\n};\n\nconst forceMeshBatching = qsTruthy(\"batchMeshes\");\nconst disableBatching = qsTruthy(\"disableBatching\");\n\nAFRAME.registerComponent(\"media-loader\", {\n  schema: {\n    playSoundEffect: { default: true },\n    fileId: { type: \"string\" },\n    fileIsOwned: { type: \"boolean\" },\n    src: { type: \"string\" },\n    version: { type: \"number\", default: 1 }, // Used to force a re-resolution\n    fitToBox: { default: false },\n    resolve: { default: false },\n    contentType: { default: null },\n    contentSubtype: { default: null },\n    animate: { default: true },\n    linkedEl: { default: null }, // This is the element of which this is a linked derivative. See linked-media.js\n    mediaOptions: {\n      default: {},\n      parse: v => (typeof v === \"object\" ? v : JSON.parse(v)),\n      stringify: JSON.stringify\n    }\n  },\n\n  init() {\n    this.onError = this.onError.bind(this);\n    this.showLoader = this.showLoader.bind(this);\n    this.clearLoadingTimeout = this.clearLoadingTimeout.bind(this);\n    this.onMediaLoaded = this.onMediaLoaded.bind(this);\n    this.handleLinkedElRemoved = this.handleLinkedElRemoved.bind(this);\n    this.refresh = this.refresh.bind(this);\n    this.animating = false;\n\n    try {\n      NAF.utils\n        .getNetworkedEntity(this.el)\n        .then(networkedEl => {\n          this.networkedEl = networkedEl;\n        })\n        .catch(() => {}); //ignore exception, entity might not be networked\n    } catch (e) {\n      // NAF may not exist on scene landing page\n    }\n  },\n\n  updateScale: (function() {\n    const center = new THREE.Vector3();\n    return function(fitToBox) {\n      const mesh = this.el.getObject3D(\"mesh\");\n      const box = getBox(this.el, mesh);\n      const scaleCoefficient = fitToBox ? getScaleCoefficient(0.5, box) : 1;\n      mesh.scale.multiplyScalar(scaleCoefficient);\n      const { min, max } = box;\n      center.addVectors(min, max).multiplyScalar(0.5 * scaleCoefficient);\n      mesh.position.sub(center);\n      mesh.matrixNeedsUpdate = true;\n    };\n  })(),\n\n  removeShape(id) {\n    if (this.el.getAttribute(\"shape-helper__\" + id)) {\n      this.el.removeAttribute(\"shape-helper__\" + id);\n    }\n  },\n\n  tick(t, dt) {\n    if (this.loaderMixer) {\n      this.loaderMixer.update(dt / 1000);\n    }\n  },\n\n  handleLinkedElRemoved(e) {\n    if (e.detail.name === \"media-loader\") {\n      this.data.linkedEl.removeEventListener(\"componentremoved\", this.handleLinkedElRemoved);\n\n      // this should be revisited if we ever use media linking for something other than media mirroring UX --\n      // right now it is assumed if there is a linkedEl, this is the currently active mirrored media\n      closeExistingMediaMirror();\n    }\n  },\n\n  remove() {\n    if (this.data.linkedEl) {\n      this.data.linkedEl.removeEventListener(\"componentremoved\", this.handleLinkedElRemoved);\n    }\n\n    const sfx = this.el.sceneEl.systems[\"hubs-systems\"].soundEffectsSystem;\n    if (this.loadingSoundEffect) {\n      sfx.stopPositionalAudio(this.loadingSoundEffect);\n      this.loadingSoundEffect = null;\n    }\n    if (this.loadedSoundEffect) {\n      sfx.stopPositionalAudio(this.loadedSoundEffect);\n      this.loadedSoundEffect = null;\n    }\n  },\n\n  onError() {\n    this.el.removeAttribute(\"gltf-model-plus\");\n    this.el.removeAttribute(\"media-pager\");\n    this.el.removeAttribute(\"media-video\");\n    this.el.removeAttribute(\"media-pdf\");\n    this.el.setAttribute(\"media-image\", { src: \"error\" });\n    this.clearLoadingTimeout();\n  },\n\n  showLoader() {\n    if (this.el.object3DMap.mesh) {\n      this.clearLoadingTimeout();\n      return;\n    }\n    const useFancyLoader = !!loadingObject;\n\n    const mesh = useFancyLoader\n      ? cloneObject3D(loadingObject.scene)\n      : new THREE.Mesh(new THREE.BoxGeometry(), new THREE.MeshBasicMaterial());\n    this.el.setObject3D(\"mesh\", mesh);\n\n    this.updateScale(true);\n\n    if (useFancyLoader) {\n      const environmentMapComponent = this.el.sceneEl.components[\"environment-map\"];\n      if (environmentMapComponent) {\n        const currentEnivronmentMap = environmentMapComponent.environmentMap;\n        if (loadingObjectEnvMap !== currentEnivronmentMap) {\n          environmentMapComponent.applyEnvironmentMap(mesh);\n          loadingObjectEnvMap = currentEnivronmentMap;\n        }\n      }\n\n      this.loaderMixer = new THREE.AnimationMixer(mesh);\n\n      this.loadingClip = this.loaderMixer.clipAction(mesh.animations[0]);\n      this.loadingScaleClip = this.loaderMixer.clipAction(\n        new THREE.AnimationClip(null, 1000, [\n          new THREE.VectorKeyframeTrack(\".scale\", [0, 0.2], [0, 0, 0, mesh.scale.x, mesh.scale.y, mesh.scale.z])\n        ])\n      );\n      setTimeout(() => {\n        if (!this.loaderMixer) return; // Animation/loader was stopped early\n        this.el.setAttribute(\"shape-helper__loader\", { type: SHAPE.BOX });\n      }, 200);\n\n      this.loadingClip.play();\n      this.loadingScaleClip.play();\n    }\n\n    if (\n      this.el.sceneEl.is(\"entered\") &&\n      (!this.networkedEl || NAF.utils.isMine(this.networkedEl)) &&\n      this.data.playSoundEffect\n    ) {\n      this.loadingSoundEffect = this.el.sceneEl.systems[\"hubs-systems\"].soundEffectsSystem.playPositionalSoundFollowing(\n        SOUND_MEDIA_LOADING,\n        this.el.object3D,\n        true\n      );\n    }\n\n    delete this.showLoaderTimeout;\n  },\n\n  clearLoadingTimeout() {\n    clearTimeout(this.showLoaderTimeout);\n    if (this.loadingSoundEffect) {\n      this.el.sceneEl.systems[\"hubs-systems\"].soundEffectsSystem.stopPositionalAudio(this.loadingSoundEffect);\n      this.loadingSoundEffect = null;\n    }\n    if (this.loaderMixer) {\n      this.loadingClip.stop();\n      this.loadingScaleClip.stop();\n      delete this.loaderMixer;\n      delete this.loadingScaleClip;\n      delete this.loadingClip;\n    }\n    delete this.showLoaderTimeout;\n    this.removeShape(\"loader\");\n  },\n\n  updateHoverableVisuals: (function() {\n    const boundingBox = new THREE.Box3();\n    const boundingSphere = new THREE.Sphere();\n    return function() {\n      const hoverableVisuals = this.el.components[\"hoverable-visuals\"];\n\n      if (hoverableVisuals) {\n        if (!this.injectedCustomShaderChunks) {\n          this.injectedCustomShaderChunks = true;\n          hoverableVisuals.uniforms = injectCustomShaderChunks(this.el.object3D);\n        }\n\n        boundingBox.setFromObject(this.el.object3DMap.mesh);\n        boundingBox.getBoundingSphere(boundingSphere);\n        hoverableVisuals.geometryRadius = boundingSphere.radius / this.el.object3D.scale.y;\n      }\n    };\n  })(),\n\n  onMediaLoaded(physicsShape = null, shouldUpdateScale) {\n    const el = this.el;\n    this.clearLoadingTimeout();\n\n    if (this.el.sceneEl.is(\"entered\") && this.data.playSoundEffect) {\n      this.loadedSoundEffect = this.el.sceneEl.systems[\"hubs-systems\"].soundEffectsSystem.playPositionalSoundFollowing(\n        SOUND_MEDIA_LOADED,\n        this.el.object3D,\n        false\n      );\n    }\n\n    const finish = () => {\n      this.animating = false;\n\n      if (physicsShape) {\n        el.setAttribute(\"shape-helper\", {\n          type: physicsShape,\n          minHalfExtent: 0.04\n        });\n      }\n\n      this.updateHoverableVisuals();\n\n      if (this.data.linkedEl) {\n        this.el.sceneEl.systems[\"linked-media\"].registerLinkage(this.data.linkedEl, this.el);\n        this.data.linkedEl.addEventListener(\"componentremoved\", this.handleLinkedElRemoved);\n      }\n\n      el.emit(\"media-loaded\");\n    };\n\n    if (this.data.animate) {\n      if (!this.animating) {\n        this.animating = true;\n        if (shouldUpdateScale) this.updateScale(this.data.fitToBox);\n        const mesh = this.el.getObject3D(\"mesh\");\n        const scale = { x: 0.001, y: 0.001, z: 0.001 };\n        scale.x = mesh.scale.x < scale.x ? mesh.scale.x * 0.001 : scale.x;\n        scale.y = mesh.scale.y < scale.y ? mesh.scale.x * 0.001 : scale.y;\n        scale.z = mesh.scale.z < scale.z ? mesh.scale.x * 0.001 : scale.z;\n        addMeshScaleAnimation(mesh, scale, finish);\n      }\n    } else {\n      if (shouldUpdateScale) this.updateScale(this.data.fitToBox);\n      finish();\n    }\n  },\n\n  refresh() {\n    if (this.networkedEl && !NAF.utils.isMine(this.networkedEl) && !NAF.utils.takeOwnership(this.networkedEl)) return;\n\n    // When we refresh, we bump the version to the current timestamp.\n    //\n    // The only use-case for refresh right now is re-fetching screenshots.\n    this.el.setAttribute(\"media-loader\", { version: Math.floor(Date.now() / 1000) });\n  },\n\n  async update(oldData) {\n    const { src, version, contentSubtype } = this.data;\n    if (!src) return;\n\n    const srcChanged = oldData.src !== src;\n    const versionChanged = !!(oldData.version && oldData.version !== version);\n\n    if (versionChanged) {\n      this.el.emit(\"media_refreshing\");\n\n      // Don't animate if its a refresh.\n      this.data.animate = false;\n\n      // Play the sound effect on a refresh only if we are the owner\n      this.data.playSoundEffect = NAF.utils.isMine(this.networkedEl);\n    }\n\n    try {\n      if (srcChanged && !this.showLoaderTimeout) {\n        this.showLoaderTimeout = setTimeout(this.showLoader, 100);\n      }\n\n      let canonicalUrl = src;\n      let canonicalAudioUrl = src;\n      let accessibleUrl = src;\n      let contentType = this.data.contentType;\n      let thumbnail;\n\n      const parsedUrl = new URL(src);\n\n      // We want to resolve and proxy some hubs urls, like rooms and scene links,\n      // but want to avoid proxying assets in order for this to work in dev environments\n      const isLocalModelAsset =\n        isNonCorsProxyDomain(parsedUrl.hostname) && (guessContentType(src) || \"\").startsWith(\"model/gltf\");\n\n      if (this.data.resolve && !src.startsWith(\"data:\") && !src.startsWith(\"hubs:\") && !isLocalModelAsset) {\n        const is360 = !!(this.data.mediaOptions.projection && this.data.mediaOptions.projection.startsWith(\"360\"));\n        const quality = getDefaultResolveQuality(is360);\n        const result = await resolveUrl(src, quality, version);\n        canonicalUrl = result.origin;\n\n        // handle protocol relative urls\n        if (canonicalUrl.startsWith(\"//\")) {\n          canonicalUrl = location.protocol + canonicalUrl;\n        }\n\n        canonicalAudioUrl = result.origin_audio;\n        if (canonicalAudioUrl && canonicalAudioUrl.startsWith(\"//\")) {\n          canonicalAudioUrl = location.protocol + canonicalAudioUrl;\n        }\n\n        contentType = (result.meta && result.meta.expected_content_type) || contentType;\n        thumbnail = result.meta && result.meta.thumbnail && proxiedUrlFor(result.meta.thumbnail);\n      }\n\n      // todo: we don't need to proxy for many things if the canonical URL has permissive CORS headers\n      accessibleUrl = proxiedUrlFor(canonicalUrl);\n\n      // if the component creator didn't know the content type, we didn't get it from reticulum, and\n      // we don't think we can infer it from the extension, we need to make a HEAD request to find it out\n      contentType = contentType || guessContentType(canonicalUrl) || (await fetchContentType(accessibleUrl));\n\n      // We don't want to emit media_resolved for index updates.\n      if (srcChanged) {\n        this.el.emit(\"media_resolved\", { src, raw: accessibleUrl, contentType });\n      } else {\n        this.el.emit(\"media_refreshed\", { src, raw: accessibleUrl, contentType });\n      }\n\n      if (\n        contentType.startsWith(\"video/\") ||\n        contentType.startsWith(\"audio/\") ||\n        AFRAME.utils.material.isHLS(canonicalUrl, contentType)\n      ) {\n        let linkedVideoTexture, linkedAudioSource, linkedMediaElementAudioSource;\n        if (this.data.linkedEl) {\n          const linkedMediaVideo = this.data.linkedEl.components[\"media-video\"];\n\n          linkedVideoTexture = linkedMediaVideo.videoTexture;\n          linkedAudioSource = linkedMediaVideo.audioSource;\n          linkedMediaElementAudioSource = linkedMediaVideo.mediaElementAudioSource;\n        }\n\n        const qsTime = parseInt(parsedUrl.searchParams.get(\"t\"));\n        const hashTime = parseInt(new URLSearchParams(parsedUrl.hash.substring(1)).get(\"t\"));\n        const startTime = hashTime || qsTime || 0;\n        this.el.removeAttribute(\"gltf-model-plus\");\n        this.el.removeAttribute(\"media-image\");\n        this.el.removeAttribute(\"media-pdf\");\n        this.el.setAttribute(\"floaty-object\", { reduceAngularFloat: true, releaseGravity: -1 });\n        this.el.addEventListener(\n          \"video-loaded\",\n          e => {\n            this.onMediaLoaded(e.detail.projection === \"flat\" ? SHAPE.BOX : null);\n          },\n          { once: true }\n        );\n        this.el.setAttribute(\n          \"media-video\",\n          Object.assign({}, this.data.mediaOptions, {\n            src: accessibleUrl,\n            audioSrc: canonicalAudioUrl ? proxiedUrlFor(canonicalAudioUrl) : null,\n            time: startTime,\n            contentType,\n            linkedVideoTexture,\n            linkedAudioSource,\n            linkedMediaElementAudioSource\n          })\n        );\n        if (this.el.components[\"position-at-box-shape-border__freeze\"]) {\n          this.el.setAttribute(\"position-at-box-shape-border__freeze\", { dirs: [\"forward\", \"back\"] });\n        }\n      } else if (contentType.startsWith(\"image/\")) {\n        this.el.removeAttribute(\"gltf-model-plus\");\n        this.el.removeAttribute(\"media-video\");\n        this.el.removeAttribute(\"media-pdf\");\n        this.el.removeAttribute(\"media-pager\");\n        this.el.addEventListener(\n          \"image-loaded\",\n          e => {\n            this.onMediaLoaded(e.detail.projection === \"flat\" ? SHAPE.BOX : null);\n\n            if (contentSubtype === \"photo-camera\") {\n              this.el.setAttribute(\"hover-menu__photo\", {\n                template: \"#photo-hover-menu\",\n                dirs: [\"forward\", \"back\"]\n              });\n            }\n          },\n          { once: true }\n        );\n        this.el.setAttribute(\"floaty-object\", { reduceAngularFloat: true, releaseGravity: -1 });\n        let batch = !disableBatching;\n        if (this.data.mediaOptions.hasOwnProperty(\"batch\") && !this.data.mediaOptions.batch) {\n          batch = false;\n        }\n        this.el.setAttribute(\n          \"media-image\",\n          Object.assign({}, this.data.mediaOptions, {\n            src: accessibleUrl,\n            version,\n            contentType,\n            batch\n          })\n        );\n\n        if (this.el.components[\"position-at-box-shape-border__freeze\"]) {\n          this.el.setAttribute(\"position-at-box-shape-border__freeze\", { dirs: [\"forward\", \"back\"] });\n        }\n      } else if (contentType.startsWith(\"application/pdf\")) {\n        this.el.removeAttribute(\"gltf-model-plus\");\n        this.el.removeAttribute(\"media-video\");\n        this.el.removeAttribute(\"media-image\");\n        this.el.setAttribute(\n          \"media-pdf\",\n          Object.assign({}, this.data.mediaOptions, {\n            src: accessibleUrl,\n            contentType,\n            batch: false // Batching disabled until atlas is updated properly\n          })\n        );\n        this.el.setAttribute(\"media-pager\", {});\n        this.el.setAttribute(\"floaty-object\", { reduceAngularFloat: true, releaseGravity: -1 });\n        this.el.addEventListener(\n          \"pdf-loaded\",\n          () => {\n            this.clearLoadingTimeout();\n            this.onMediaLoaded(SHAPE.BOX);\n          },\n          { once: true }\n        );\n\n        if (this.el.components[\"position-at-box-shape-border__freeze\"]) {\n          this.el.setAttribute(\"position-at-box-shape-border__freeze\", { dirs: [\"forward\", \"back\"] });\n        }\n      } else if (\n        contentType.includes(\"application/octet-stream\") ||\n        contentType.includes(\"x-zip-compressed\") ||\n        contentType.startsWith(\"model/gltf\")\n      ) {\n        this.el.removeAttribute(\"media-image\");\n        this.el.removeAttribute(\"media-video\");\n        this.el.removeAttribute(\"media-pdf\");\n        this.el.removeAttribute(\"media-pager\");\n        this.el.addEventListener(\n          \"model-loaded\",\n          () => {\n            this.onMediaLoaded(SHAPE.HULL, true);\n            addAnimationComponents(this.el);\n          },\n          { once: true }\n        );\n        this.el.addEventListener(\"model-error\", this.onError, { once: true });\n        let batch =\n          !disableBatching &&\n          (forceMeshBatching || (AFRAME.utils.device.isMobile() && window.APP && window.APP.quality === \"low\"));\n        if (this.data.mediaOptions.hasOwnProperty(\"batch\") && !this.data.mediaOptions.batch) {\n          batch = false;\n        }\n        this.el.setAttribute(\n          \"gltf-model-plus\",\n          Object.assign({}, this.data.mediaOptions, {\n            src: accessibleUrl,\n            contentType: contentType,\n            inflate: true,\n            batch,\n            modelToWorldScale: this.data.fitToBox ? 0.0001 : 1.0\n          })\n        );\n      } else if (contentType.startsWith(\"text/html\")) {\n        this.el.removeAttribute(\"gltf-model-plus\");\n        this.el.removeAttribute(\"media-video\");\n        this.el.removeAttribute(\"media-pdf\");\n        this.el.removeAttribute(\"media-pager\");\n        this.el.addEventListener(\n          \"image-loaded\",\n          async () => {\n            const mayChangeScene = this.el.sceneEl.systems.permissions.can(\"update_hub\");\n\n            if (await isLocalHubsAvatarUrl(src)) {\n              this.el.setAttribute(\"hover-menu__hubs-item\", {\n                template: \"#avatar-link-hover-menu\",\n                dirs: [\"forward\", \"back\"]\n              });\n            } else if ((await isHubsRoomUrl(src)) || ((await isLocalHubsSceneUrl(src)) && mayChangeScene)) {\n              this.el.setAttribute(\"hover-menu__hubs-item\", {\n                template: \"#hubs-destination-hover-menu\",\n                dirs: [\"forward\", \"back\"]\n              });\n            } else {\n              this.el.setAttribute(\"hover-menu__link\", { template: \"#link-hover-menu\", dirs: [\"forward\", \"back\"] });\n            }\n            this.onMediaLoaded(SHAPE.BOX);\n          },\n          { once: true }\n        );\n        this.el.setAttribute(\"floaty-object\", { reduceAngularFloat: true, releaseGravity: -1 });\n        let batch = !disableBatching;\n        if (this.data.mediaOptions.hasOwnProperty(\"batch\") && !this.data.mediaOptions.batch) {\n          batch = false;\n        }\n        this.el.setAttribute(\n          \"media-image\",\n          Object.assign({}, this.data.mediaOptions, {\n            src: thumbnail,\n            version,\n            contentType: guessContentType(thumbnail) || \"image/png\",\n            batch\n          })\n        );\n        if (this.el.components[\"position-at-box-shape-border__freeze\"]) {\n          this.el.setAttribute(\"position-at-box-shape-border__freeze\", { dirs: [\"forward\", \"back\"] });\n        }\n      } else {\n        throw new Error(`Unsupported content type: ${contentType}`);\n      }\n    } catch (e) {\n      console.error(\"Error adding media\", e);\n      this.onError();\n    }\n  }\n});\n\nAFRAME.registerComponent(\"media-pager\", {\n  schema: {\n    index: { default: 0 },\n    maxIndex: { default: 0 }\n  },\n\n  init() {\n    this.onNext = this.onNext.bind(this);\n    this.onPrev = this.onPrev.bind(this);\n    this.onSnap = this.onSnap.bind(this);\n    this.update = this.update.bind(this);\n\n    this.el.setAttribute(\"hover-menu__pager\", { template: \"#pager-hover-menu\", dirs: [\"forward\", \"back\"] });\n    this.el.components[\"hover-menu__pager\"].getHoverMenu().then(menu => {\n      // If we got removed while waiting, do nothing.\n      if (!this.el.parentNode) return;\n\n      this.hoverMenu = menu;\n      this.nextButton = this.el.querySelector(\".next-button [text-button]\");\n      this.prevButton = this.el.querySelector(\".prev-button [text-button]\");\n      this.snapButton = this.el.querySelector(\".snap-button [text-button]\");\n      this.pageLabel = this.el.querySelector(\".page-label\");\n\n      this.nextButton.object3D.addEventListener(\"interact\", this.onNext);\n      this.prevButton.object3D.addEventListener(\"interact\", this.onPrev);\n      this.snapButton.object3D.addEventListener(\"interact\", this.onSnap);\n\n      this.update();\n      this.el.emit(\"pager-loaded\");\n    });\n\n    NAF.utils\n      .getNetworkedEntity(this.el)\n      .then(networkedEl => {\n        this.networkedEl = networkedEl;\n        this.networkedEl.addEventListener(\"pinned\", this.update);\n        this.networkedEl.addEventListener(\"unpinned\", this.update);\n        window.APP.hubChannel.addEventListener(\"permissions_updated\", this.update);\n      })\n      .catch(() => {}); //ignore exception, entity might not be networked\n\n    this.el.addEventListener(\"pdf-loaded\", async () => {\n      this.update();\n    });\n  },\n\n  async update(oldData) {\n    if (this.networkedEl && NAF.utils.isMine(this.networkedEl)) {\n      if (oldData && typeof oldData.index === \"number\" && oldData.index !== this.data.index) {\n        this.el.emit(\"owned-pager-page-changed\");\n      }\n    }\n\n    if (this.pageLabel) {\n      this.pageLabel.setAttribute(\"text\", \"value\", `${this.data.index + 1}/${this.data.maxIndex + 1}`);\n    }\n\n    if (this.prevButton && this.nextButton) {\n      const pinnableElement = this.el.components[\"media-loader\"].data.linkedEl || this.el;\n      const isPinned = pinnableElement.components.pinnable && pinnableElement.components.pinnable.data.pinned;\n      this.prevButton.object3D.visible = this.nextButton.object3D.visible =\n        !isPinned || window.APP.hubChannel.can(\"pin_objects\");\n    }\n  },\n\n  onNext() {\n    if (this.networkedEl && !NAF.utils.isMine(this.networkedEl) && !NAF.utils.takeOwnership(this.networkedEl)) return;\n    const newIndex = Math.min(this.data.index + 1, this.data.maxIndex);\n    this.el.setAttribute(\"media-pdf\", \"index\", newIndex);\n    this.el.setAttribute(\"media-pager\", \"index\", newIndex);\n  },\n\n  onPrev() {\n    if (this.networkedEl && !NAF.utils.isMine(this.networkedEl) && !NAF.utils.takeOwnership(this.networkedEl)) return;\n    const newIndex = Math.max(this.data.index - 1, 0);\n    this.el.setAttribute(\"media-pdf\", \"index\", newIndex);\n    this.el.setAttribute(\"media-pager\", \"index\", newIndex);\n  },\n\n  onSnap() {\n    this.el.emit(\"pager-snap-clicked\");\n  },\n\n  remove() {\n    if (this.networkedEl) {\n      this.networkedEl.removeEventListener(\"pinned\", this.update);\n      this.networkedEl.removeEventListener(\"unpinned\", this.update);\n    }\n\n    window.APP.hubChannel.removeEventListener(\"permissions_updated\", this.update);\n  }\n});\n","import { SOUND_QUACK, SOUND_SPECIAL_QUACK } from \"../systems/sound-effects-system\";\n\nAFRAME.registerComponent(\"quack\", {\n  schema: {\n    quackPercentage: { default: 1 },\n    specialQuackPercentage: { default: 0.01 }\n  },\n\n  init: function() {\n    this._handleGrabStart = this._handleGrabStart.bind(this);\n  },\n\n  play: function() {\n    this.el.object3D.addEventListener(\"interact\", this._handleGrabStart);\n  },\n\n  pause: function() {\n    this.el.object3D.removeEventListener(\"interact\", this._handleGrabStart);\n  },\n\n  _handleGrabStart: function() {\n    const rand = Math.random();\n    if (rand < this.data.specialQuackPercentage) {\n      this.el.sceneEl.systems[\"hubs-systems\"].soundEffectsSystem.playSoundOneShot(SOUND_SPECIAL_QUACK);\n    } else if (rand < this.data.quackPercentage) {\n      this.el.sceneEl.systems[\"hubs-systems\"].soundEffectsSystem.playSoundOneShot(SOUND_QUACK);\n    }\n  }\n});\n","import { setMatrixWorld } from \"../utils/three-utils\";\nimport { getCurrentStreamer } from \"../utils/component-utils\";\nimport { CAMERA_MODE_SCENE_PREVIEW } from \"../systems/camera-system\";\n\nfunction getStreamerCamera() {\n  const streamer = getCurrentStreamer();\n  if (streamer) {\n    return streamer.el.querySelector(\".camera\").object3D;\n  }\n  return null;\n}\n\nfunction lerp(start, end, t) {\n  return (1 - t) * start + t * end;\n}\n\nconst newRot = new THREE.Quaternion();\n\n/**\n * Nicely pans the camera for previewing a scene. There's some weirdness with this right now\n * since it ends up panning in a direction dependent upon the start camera orientation,\n * but it's good enough for now.\n */\nAFRAME.registerComponent(\"scene-preview-camera\", {\n  schema: {\n    duration: { default: 90, type: \"number\" },\n    positionOnly: { default: false, type: \"boolean\" }\n  },\n\n  init: function() {\n    const systems = AFRAME.scenes[0].systems[\"hubs-systems\"] || AFRAME.scenes[0].systems[\"scene-systems\"];\n\n    if (systems) {\n      systems.scenePreviewCameraSystem.register(this.el);\n    }\n\n    this.startPoint = this.el.object3D.position.clone();\n    this.startRotation = this.el.object3D.quaternion.clone();\n\n    this.targetPoint = this.el.object3D.position.clone();\n    this.targetPoint.y = Math.max(this.targetPoint.y - 1.5, 1);\n    this.targetPoint.add(new THREE.Vector3(2, 0, -2));\n\n    const targetRotDelta = new THREE.Euler(-0.15, 0.0, 0.15);\n    this.targetRotation = new THREE.Quaternion();\n    this.targetRotation.setFromEuler(targetRotDelta);\n    this.targetRotation.premultiply(this.startRotation);\n\n    this.startTime = performance.now();\n    this.backwards = false;\n    this.ranOnePass = false;\n  },\n\n  tick2: function() {\n    const hubsSystems = this.el.sceneEl.systems[\"hubs-systems\"];\n\n    let streamerCamera;\n    if (hubsSystems) {\n      hubsSystems.cameraSystem.mode = CAMERA_MODE_SCENE_PREVIEW;\n      streamerCamera = getStreamerCamera();\n    }\n\n    if (streamerCamera) {\n      setMatrixWorld(this.el.object3D, streamerCamera.matrixWorld);\n      // Move camera forward just a bit so that we don't see the avatar's eye cylinders.\n      this.el.object3D.translateZ(-0.1);\n      this.el.object3D.matrixNeedsUpdate = true;\n    } else {\n      let t = (performance.now() - this.startTime) / (1000.0 * this.data.duration);\n      t = Math.min(1.0, Math.max(0.0, t));\n\n      if (!this.ranOnePass) {\n        t = t * (2 - t);\n      } else {\n        t = t < 0.5 ? 2 * t * t : -1 + (4 - 2 * t) * t;\n      }\n\n      const from = this.backwards ? this.targetPoint : this.startPoint;\n      const to = this.backwards ? this.startPoint : this.targetPoint;\n      const fromRot = this.backwards ? this.targetRotation : this.startRotation;\n      const toRot = this.backwards ? this.startRotation : this.targetRotation;\n\n      THREE.Quaternion.slerp(fromRot, toRot, newRot, t);\n\n      this.el.object3D.position.set(lerp(from.x, to.x, t), lerp(from.y, to.y, t), lerp(from.z, to.z, t));\n\n      if (!this.data.positionOnly) {\n        this.el.object3D.rotation.setFromQuaternion(newRot);\n      }\n\n      this.el.object3D.matrixNeedsUpdate = true;\n\n      if (t >= 0.9999) {\n        this.ranOnePass = true;\n        this.backwards = !this.backwards;\n        this.startTime = performance.now();\n      }\n    }\n  },\n\n  remove: function() {\n    const systems = AFRAME.scenes[0].systems[\"hubs-systems\"] || AFRAME.scenes[0].systems[\"scene-systems\"];\n\n    if (systems) {\n      systems.scenePreviewCameraSystem.unregister(this.el);\n    }\n  }\n});\n","import \"three/examples/js/pmrem/PMREMGenerator\";\nimport \"three/examples/js/pmrem/PMREMCubeUVPacker\";\nimport qsTruthy from \"../utils/qs_truthy\";\nconst isBotMode = qsTruthy(\"bot\");\n\nconst {\n  Scene,\n  CubeCamera,\n  Object3D,\n  Vector3,\n  BoxBufferGeometry,\n  ShaderMaterial,\n  UniformsUtils,\n  BackSide,\n  Mesh,\n  UniformsLib,\n  PMREMGenerator,\n  PMREMCubeUVPacker\n} = THREE;\n\n/**\n * @author zz85 / https://github.com/zz85\n *\n * Based on \"A Practical Analytic Model for Daylight\"\n * aka The Preetham Model, the de facto standard analytic skydome model\n * http://www.cs.utah.edu/~shirley/papers/sunsky/sunsky.pdf\n *\n * First implemented by Simon Wallner\n * http://www.simonwallner.at/projects/atmospheric-scattering\n *\n * Improved by Martin Upitis\n * http://blenderartists.org/forum/showthread.php?245954-preethams-sky-impementation-HDR\n *\n * Three.js integration by zz85 http://twitter.com/blurspline\n */\n\nconst vertexShader = `\n#include <common>\n#include <fog_pars_vertex>\n\nuniform vec3 sunPosition;\nuniform float rayleigh;\nuniform float turbidity;\nuniform float mieCoefficient;\n\nvarying vec3 vWorldPosition;\nvarying vec3 vSunDirection;\nvarying float vSunfade;\nvarying vec3 vBetaR;\nvarying vec3 vBetaM;\nvarying float vSunE;\n\nconst vec3 up = vec3( 0.0, 1.0, 0.0 );\n\n// constants for atmospheric scattering\nconst float e = 2.71828182845904523536028747135266249775724709369995957;\nconst float pi = 3.141592653589793238462643383279502884197169;\n\n// wavelength of used primaries, according to preetham\nconst vec3 lambda = vec3( 680E-9, 550E-9, 450E-9 );\n// this pre-calcuation replaces older TotalRayleigh(vec3 lambda) function:\n// (8.0 * pow(pi, 3.0) * pow(pow(n, 2.0) - 1.0, 2.0) * (6.0 + 3.0 * pn)) / (3.0 * N * pow(lambda, vec3(4.0)) * (6.0 - 7.0 * pn))\nconst vec3 totalRayleigh = vec3( 5.804542996261093E-6, 1.3562911419845635E-5, 3.0265902468824876E-5 );\n\n// mie stuff\n// K coefficient for the primaries\nconst float v = 4.0;\nconst vec3 K = vec3( 0.686, 0.678, 0.666 );\n// MieConst = pi * pow( ( 2.0 * pi ) / lambda, vec3( v - 2.0 ) ) * K\nconst vec3 MieConst = vec3( 1.8399918514433978E14, 2.7798023919660528E14, 4.0790479543861094E14 );\n\n// earth shadow hack\n// cutoffAngle = pi / 1.95;\nconst float cutoffAngle = 1.6110731556870734;\nconst float steepness = 1.5;\nconst float EE = 1000.0;\n\nfloat sunIntensity( float zenithAngleCos ) {\n  zenithAngleCos = clamp( zenithAngleCos, -1.0, 1.0 );\n  return EE * max( 0.0, 1.0 - pow( e, -( ( cutoffAngle - acos( zenithAngleCos ) ) / steepness ) ) );\n}\n\nvec3 totalMie( float T ) {\n  float c = ( 0.2 * T ) * 10E-18;\n  return 0.434 * c * MieConst;\n}\n\nvoid main() {\n  #include <begin_vertex>\n\n  vec4 worldPosition = modelMatrix * vec4( position, 1.0 );\n  vWorldPosition = worldPosition.xyz;\n\n  #include <project_vertex>\n\n  vSunDirection = normalize( sunPosition );\n\n  vSunE = sunIntensity( dot( vSunDirection, up ) );\n\n  vSunfade = 1.0 - clamp( 1.0 - exp( ( sunPosition.y / 450000.0 ) ), 0.0, 1.0 );\n\n  float rayleighCoefficient = rayleigh - ( 1.0 * ( 1.0 - vSunfade ) );\n\n  // extinction (absorbtion + out scattering)\n  // rayleigh coefficients\n  vBetaR = totalRayleigh * rayleighCoefficient;\n\n  // mie coefficients\n  vBetaM = totalMie( turbidity ) * mieCoefficient;\n\n  #include <fog_vertex>\n}\n`;\n\nconst fragmentShader = `\n#include <common>\n#include <fog_pars_fragment>\n\nvarying vec3 vWorldPosition;\nvarying vec3 vSunDirection;\nvarying float vSunfade;\nvarying vec3 vBetaR;\nvarying vec3 vBetaM;\nvarying float vSunE;\n\nuniform float luminance;\nuniform float mieDirectionalG;\n\nconst vec3 cameraPos = vec3( 0.0, 0.0, 0.0 );\n\n// constants for atmospheric scattering\nconst float pi = 3.141592653589793238462643383279502884197169;\n\nconst float n = 1.0003; // refractive index of air\nconst float N = 2.545E25; // number of molecules per unit volume for air at\n// 288.15K and 1013mb (sea level -45 celsius)\n\n// optical length at zenith for molecules\nconst float rayleighZenithLength = 8.4E3;\nconst float mieZenithLength = 1.25E3;\nconst vec3 up = vec3( 0.0, 1.0, 0.0 );\n// 66 arc seconds -> degrees, and the cosine of that\nconst float sunAngularDiameterCos = 0.999956676946448443553574619906976478926848692873900859324;\n\n// 3.0 / ( 16.0 * pi )\nconst float THREE_OVER_SIXTEENPI = 0.05968310365946075;\n// 1.0 / ( 4.0 * pi )\nconst float ONE_OVER_FOURPI = 0.07957747154594767;\n\nfloat rayleighPhase( float cosTheta ) {\n  return THREE_OVER_SIXTEENPI * ( 1.0 + pow( cosTheta, 2.0 ) );\n}\n\nfloat hgPhase( float cosTheta, float g ) {\n  float g2 = pow( g, 2.0 );\n  float inverse = 1.0 / pow( 1.0 - 2.0 * g * cosTheta + g2, 1.5 );\n  return ONE_OVER_FOURPI * ( ( 1.0 - g2 ) * inverse );\n}\n\n// Filmic ToneMapping http://filmicgames.com/archives/75\nconst float A = 0.15;\nconst float B = 0.50;\nconst float C = 0.10;\nconst float D = 0.20;\nconst float E = 0.02;\nconst float F = 0.30;\n\nconst float whiteScale = 1.0748724675633854; // 1.0 / Uncharted2Tonemap(1000.0)\n\nvec3 Uncharted2Tonemap( vec3 x ) {\n  return ( ( x * ( A * x + C * B ) + D * E ) / ( x * ( A * x + B ) + D * F ) ) - E / F;\n}\n\nvoid main() {\n  // optical length\n  // cutoff angle at 90 to avoid singularity in next formula.\n  float zenithAngle = acos( max( 0.0, dot( up, normalize( vWorldPosition - cameraPos ) ) ) );\n  float inverse = 1.0 / ( cos( zenithAngle ) + 0.15 * pow( 93.885 - ( ( zenithAngle * 180.0 ) / pi ), -1.253 ) );\n  float sR = rayleighZenithLength * inverse;\n  float sM = mieZenithLength * inverse;\n\n  // combined extinction factor\n  vec3 Fex = exp( -( vBetaR * sR + vBetaM * sM ) );\n\n  // in scattering\n  float cosTheta = dot( normalize( vWorldPosition - cameraPos ), vSunDirection );\n\n  float rPhase = rayleighPhase( cosTheta * 0.5 + 0.5 );\n  vec3 betaRTheta = vBetaR * rPhase;\n\n  float mPhase = hgPhase( cosTheta, mieDirectionalG );\n  vec3 betaMTheta = vBetaM * mPhase;\n\n  vec3 Lin = pow( vSunE * ( ( betaRTheta + betaMTheta ) / ( vBetaR + vBetaM ) ) * ( 1.0 - Fex ), vec3( 1.5 ) );\n  Lin *= mix( vec3( 1.0 ), pow( vSunE * ( ( betaRTheta + betaMTheta ) / ( vBetaR + vBetaM ) ) * Fex, vec3( 1.0 / 2.0 ) ), clamp( pow( 1.0 - dot( up, vSunDirection ), 5.0 ), 0.0, 1.0 ) );\n\n  // nightsky\n  vec3 direction = normalize( vWorldPosition - cameraPos );\n  float theta = acos( direction.y ); // elevation --> y-axis, [-pi/2, pi/2]\n  float phi = atan( direction.z, direction.x ); // azimuth --> x-axis [-pi/2, pi/2]\n  vec2 uv = vec2( phi, theta ) / vec2( 2.0 * pi, pi ) + vec2( 0.5, 0.0 );\n  vec3 L0 = vec3( 0.1 ) * Fex;\n\n  // composition + solar disc\n  float sundisk = smoothstep( sunAngularDiameterCos, sunAngularDiameterCos + 0.00002, cosTheta );\n  L0 += ( vSunE * 19000.0 * Fex ) * sundisk;\n\n  vec3 texColor = ( Lin + L0 ) * 0.04 + vec3( 0.0, 0.0003, 0.00075 );\n\n  vec3 curr = Uncharted2Tonemap( ( log2( 2.0 / pow( luminance, 4.0 ) ) ) * texColor );\n  vec3 color = curr * whiteScale;\n\n  vec3 retColor = pow( color, vec3( 1.0 / ( 1.2 + ( 1.2 * vSunfade ) ) ) );\n\n  gl_FragColor = vec4( retColor, 1.0 );\n\n  #include <fog_fragment>\n}\n`;\n\nexport default class Sky extends Object3D {\n  static shader = {\n    uniforms: UniformsUtils.merge([\n      UniformsLib.fog,\n      {\n        luminance: { value: 1 },\n        turbidity: { value: 10 },\n        rayleigh: { value: 2 },\n        mieCoefficient: { value: 0.005 },\n        mieDirectionalG: { value: 0.8 },\n        sunPosition: { value: new Vector3() }\n      }\n    ]),\n    vertexShader,\n    fragmentShader\n  };\n\n  static _geometry = new BoxBufferGeometry(1, 1, 1);\n\n  constructor() {\n    super();\n\n    const material = new ShaderMaterial({\n      fragmentShader: Sky.shader.fragmentShader,\n      vertexShader: Sky.shader.vertexShader,\n      uniforms: UniformsUtils.clone(Sky.shader.uniforms),\n      side: BackSide,\n      fog: true\n    });\n\n    this.skyScene = new Scene();\n    this.cubeCamera = new CubeCamera(1, 100000, 512);\n    this.skyScene.add(this.cubeCamera);\n\n    this.sky = new Mesh(Sky._geometry, material);\n    this.sky.name = \"Sky\";\n    this.add(this.sky);\n\n    this._inclination = 0;\n    this._azimuth = 0.15;\n    this._distance = 8000;\n    this.updateSunPosition();\n  }\n\n  get turbidity() {\n    return this.sky.material.uniforms.turbidity.value;\n  }\n\n  set turbidity(value) {\n    this.sky.material.uniforms.turbidity.value = value;\n  }\n\n  get rayleigh() {\n    return this.sky.material.uniforms.rayleigh.value;\n  }\n\n  set rayleigh(value) {\n    this.sky.material.uniforms.rayleigh.value = value;\n  }\n\n  get luminance() {\n    return this.sky.material.uniforms.luminance.value;\n  }\n\n  set luminance(value) {\n    this.sky.material.uniforms.luminance.value = value;\n  }\n\n  get mieCoefficient() {\n    return this.sky.material.uniforms.mieCoefficient.value;\n  }\n\n  set mieCoefficient(value) {\n    this.sky.material.uniforms.mieCoefficient.value = value;\n  }\n\n  get mieDirectionalG() {\n    return this.sky.material.uniforms.mieDirectionalG.value;\n  }\n\n  set mieDirectionalG(value) {\n    this.sky.material.uniforms.mieDirectionalG.value = value;\n  }\n\n  get inclination() {\n    return this._inclination;\n  }\n\n  set inclination(value) {\n    this._inclination = value;\n    this.updateSunPosition();\n  }\n\n  get azimuth() {\n    return this._azimuth;\n  }\n\n  set azimuth(value) {\n    this._azimuth = value;\n    this.updateSunPosition();\n  }\n\n  get distance() {\n    return this._distance;\n  }\n\n  set distance(value) {\n    this._distance = value;\n    this.updateSunPosition();\n  }\n\n  updateSunPosition() {\n    const theta = Math.PI * (this._inclination - 0.5);\n    const phi = 2 * Math.PI * (this._azimuth - 0.5);\n\n    const distance = this._distance;\n\n    const x = distance * Math.cos(phi);\n    const y = distance * Math.sin(phi) * Math.sin(theta);\n    const z = distance * Math.sin(phi) * Math.cos(theta);\n\n    this.sky.material.uniforms.sunPosition.value.set(x, y, z).normalize();\n    this.sky.scale.set(distance, distance, distance);\n  }\n\n  generateEnvironmentMap(renderer) {\n    this.skyScene.add(this.sky);\n    this.cubeCamera.update(renderer, this.skyScene);\n    this.add(this.sky);\n    const vrEnabled = renderer.vr.enabled;\n    renderer.vr.enabled = false;\n    const pmremGenerator = new PMREMGenerator(this.cubeCamera.renderTarget.texture);\n    pmremGenerator.update(renderer);\n    const pmremCubeUVPacker = new PMREMCubeUVPacker(pmremGenerator.cubeLods);\n    pmremCubeUVPacker.update(renderer);\n    renderer.vr.enabled = vrEnabled;\n    pmremGenerator.dispose();\n    pmremCubeUVPacker.dispose();\n    return pmremCubeUVPacker.CubeUVRenderTarget.texture;\n  }\n\n  copy(source, recursive = true) {\n    if (recursive) {\n      this.remove(this.sky);\n    }\n\n    super.copy(source, recursive);\n\n    if (recursive) {\n      const skyIndex = source.children.indexOf(source.sky);\n\n      if (skyIndex !== -1) {\n        this.sky = this.children[skyIndex];\n      }\n    }\n\n    this.turbidity = source.turbidity;\n    this.rayleigh = source.rayleigh;\n    this.luminance = source.luminance;\n    this.mieCoefficient = source.mieCoefficient;\n    this.mieDirectionalG = source.mieDirectionalG;\n    this.inclination = source.inclination;\n    this.azimuth = source.azimuth;\n    this.distance = source.distance;\n\n    return this;\n  }\n}\n\nAFRAME.registerComponent(\"skybox\", {\n  schema: {\n    turbidity: { type: \"number\", default: 10 },\n    rayleigh: { type: \"number\", default: 2 },\n    luminance: { type: \"number\", default: 1 },\n    mieCoefficient: { type: \"number\", default: 0.005 },\n    mieDirectionalG: { type: \"number\", default: 0.8 },\n    inclination: { type: \"number\", default: 0 },\n    azimuth: { type: \"number\", default: 0.15 },\n    distance: { type: \"number\", default: 8000 }\n  },\n\n  init() {\n    this.sky = new Sky();\n    this.sky.cubeCamera.children.forEach(o => (o.matrixNeedsUpdate = true));\n    this.el.setObject3D(\"mesh\", this.sky);\n\n    this.updateEnvironmentMap = this.updateEnvironmentMap.bind(this);\n    // HACK: Render environment map on next frame to avoid bug where the render target texture is black.\n    // This is likely due to the custom elements attached callback being synchronous on Chrome but not Firefox.\n    // Added timeout due to additional case where texture is black in Firefox.\n    requestAnimationFrame(() => setTimeout(this.updateEnvironmentMap));\n  },\n\n  update(oldData) {\n    if (this.data.turbidity !== oldData.turbidity) {\n      this.sky.turbidity = this.data.turbidity;\n    }\n\n    if (this.data.rayleigh !== oldData.rayleigh) {\n      this.sky.rayleigh = this.data.rayleigh;\n    }\n\n    if (this.data.luminance !== oldData.luminance) {\n      this.sky.luminance = this.data.luminance;\n    }\n\n    if (this.data.mieCoefficient !== oldData.mieCoefficient) {\n      this.sky.mieCoefficient = this.data.mieCoefficient;\n    }\n\n    if (this.data.mieDirectionalG !== oldData.mieDirectionalG) {\n      this.sky.mieDirectionalG = this.data.mieDirectionalG;\n    }\n\n    if (this.data.inclination !== oldData.inclination) {\n      this.sky.inclination = this.data.inclination;\n      this.el.object3D.matrixNeedsUpdate = true;\n    }\n\n    if (this.data.azimuth !== oldData.azimuth) {\n      this.sky.azimuth = this.data.azimuth;\n      this.el.object3D.matrixNeedsUpdate = true;\n    }\n\n    if (this.data.distance !== oldData.distance) {\n      const distance = this.data.distance;\n\n      // HACK Remove this if condition and always set the scale based on distance when the existing environments\n      // have their sky scales set to 1.\n      this.sky.distance = this.el.object3D.scale.x === 1 ? distance : 1;\n      this.sky.matrixNeedsUpdate = true;\n    }\n\n    this.updateEnvironmentMap();\n  },\n\n  updateEnvironmentMap() {\n    const environmentMapComponent = this.el.sceneEl.components[\"environment-map\"];\n\n    if (environmentMapComponent && !isBotMode) {\n      const renderer = this.el.sceneEl.renderer;\n      const envMap = this.sky.generateEnvironmentMap(renderer);\n      environmentMapComponent.updateEnvironmentMap(envMap);\n    }\n  },\n\n  remove() {\n    this.el.removeObject3D(\"mesh\");\n  }\n});\n","import { getLastWorldPosition } from \"../utils/three-utils\";\nimport { waitForDOMContentLoaded } from \"../utils/async-utils\";\n\n/**\n * Used on a avatar-rig to move the avatar to a random spawn point on entry.\n * @namespace avatar\n * @component spawn-controller\n */\nAFRAME.registerComponent(\"spawn-controller\", {\n  schema: {\n    target: { type: \"selector\" },\n    camera: { type: \"selector\", default: \"#avatar-pov-node\" },\n    playerHeight: { default: 1.6 },\n    loadedEvent: { type: \"string\" }\n  },\n  init() {\n    this.moveToSpawnPoint = this.moveToSpawnPoint.bind(this);\n\n    waitForDOMContentLoaded().then(() => {\n      this.data.target.addEventListener(this.data.loadedEvent, this.moveToSpawnPoint);\n    });\n  },\n  moveToSpawnPoint() {\n    const spawnPoints = document.querySelectorAll(\"[spawn-point]\");\n\n    if (spawnPoints.length === 0) {\n      // Keep default position\n      return;\n    }\n\n    const camera = this.data.camera;\n    const spawnPointIndex = Math.round((spawnPoints.length - 1) * Math.random());\n    const spawnPoint = spawnPoints[spawnPointIndex];\n\n    getLastWorldPosition(spawnPoint.object3D, this.el.object3D.position);\n    this.el.object3D.rotation.copy(spawnPoint.object3D.rotation);\n\n    if (this.el.sceneEl.is(\"vr-mode\")) {\n      // Rotate the avatar rig such that the vr-camera faces forward.\n      this.el.object3D.rotation.y -= this.data.camera.object3D.rotation.y;\n    } else {\n      // Reset the camera transform in 2D mode.\n      camera.object3D.position.set(0, this.data.playerHeight, 0);\n      camera.object3D.rotation.set(0, 0, 0);\n      camera.object3D.matrixNeedsUpdate = true;\n    }\n\n    // Camera faces -Z direction. Flip rotation on Y axis to face the correct direction.\n    this.el.object3D.rotation.y += Math.PI;\n    this.el.object3D.matrixNeedsUpdate = true;\n  }\n});\n\n/**\n * Marks an entity as a potential spawn point.\n * @namespace environment\n * @component spawn-point\n */\nAFRAME.registerComponent(\"spawn-point\", {\n  init() {\n    this.el.object3D.visible = false;\n  }\n});\n","/* global require AFRAME THREE setTimeout clearTimeout */\nimport { addMedia } from \"../utils/media-utils\";\nimport { waitForEvent } from \"../utils/async-utils\";\nimport { ObjectContentOrigins } from \"../object-types\";\nimport { paths } from \"../systems/userinput/paths\";\nimport { getBox, getScaleCoefficient } from \"../utils/auto-box-collider\";\n\nconst COLLISION_LAYERS = require(\"../constants\").COLLISION_LAYERS;\n\nfunction setNonNullVec3Components(target, values) {\n  target.set(\n    values.x === null ? target.x : values.x,\n    values.y === null ? target.y : values.y,\n    values.z === null ? target.z : values.z\n  );\n}\n\n/**\n * Spawns networked objects when grabbed or when a specified event is fired.\n * @namespace network\n * @component super-spawner\n */\nAFRAME.registerComponent(\"super-spawner\", {\n  schema: {\n    /**\n     * Source of the media asset the spawner will spawn when grabbed. This can be a gltf, video, or image, or a url that the reticiulm media API can resolve to a gltf, video, or image.\n     */\n    src: { default: \"\" },\n\n    /**\n     * Whether to use the Reticulum media resolution API to interpret the src URL (e.g. find a video URL for Youtube videos.)\n     */\n    resolve: { default: false },\n\n    /**\n     * The template to use for this object\n     */\n    template: { default: \"\" },\n\n    /**\n     * Spawn the object with a custom scale, rather than copying that of the spawner.\n     */\n    spawnScale: { type: \"vec3\", default: { x: NaN, y: NaN, z: NaN } },\n\n    /**\n     * The spawner will become invisible and ungrabbable for this ammount of time after being grabbed. This can prevent rapidly spawning objects.\n     */\n    spawnCooldown: { default: 1 },\n\n    /**\n     * Optional event to listen for to spawn an object on the preferred superHand\n     */\n    spawnEvent: { type: \"string\" },\n\n    /**\n     * If true, will spawn the object at the cursor and animate it into the hand.\n     */\n    animateFromCursor: { type: \"boolean\" },\n\n    mediaOptions: {\n      default: {},\n      parse: v => (typeof v === \"object\" ? v : JSON.parse(v)),\n      stringify: JSON.stringify\n    }\n  },\n\n  init() {\n    this.cooldownTimeout = null;\n    this.handPosition = new THREE.Vector3();\n\n    this.onSpawnEvent = this.onSpawnEvent.bind(this);\n\n    this.sceneEl = this.el.sceneEl;\n\n    this.tempSpawnHandPosition = new THREE.Vector3();\n\n    this.handleMediaLoaded = this.handleMediaLoaded.bind(this);\n\n    this.spawnedMediaScale = null;\n  },\n\n  play() {\n    this.el.addEventListener(\"media-loaded\", this.handleMediaLoaded);\n    if (this.data.spawnEvent) {\n      this.el.sceneEl.addEventListener(this.data.spawnEvent, this.onSpawnEvent);\n    }\n  },\n\n  pause() {\n    this.el.removeEventListener(\"media-loaded\", this.handleMediaLoaded);\n    if (this.data.spawnEvent) {\n      this.el.sceneEl.removeEventListener(this.data.spawnEvent, this.onSpawnEvent);\n    }\n    if (this.cooldownTimeout) {\n      clearTimeout(this.cooldownTimeout);\n      this.cooldownTimeout = null;\n      this.el.setAttribute(\"visible\", true);\n      this.el.classList.add(\"interactable\");\n    }\n  },\n\n  handleMediaLoaded(e) {\n    const spawnedEntity = e.target;\n    this.spawnedMediaScale = spawnedEntity.object3D.scale.clone();\n    setNonNullVec3Components(this.spawnedMediaScale, this.data.spawnScale);\n\n    const boxSize =\n      spawnedEntity.components[\"media-image\"] ||\n      spawnedEntity.components[\"media-video\"] ||\n      spawnedEntity.components[\"media-pdf\"]\n        ? 1\n        : 0.5;\n\n    const scaleCoefficient = getScaleCoefficient(boxSize, getBox(spawnedEntity, spawnedEntity.object3D));\n    this.spawnedMediaScale.divideScalar(scaleCoefficient);\n  },\n\n  async onSpawnEvent(e) {\n    if (this.cooldownTimeout || !this.el.sceneEl.is(\"entered\")) {\n      return;\n    }\n\n    const spawnedEntity = addMedia(\n      this.data.src,\n      this.data.template,\n      ObjectContentOrigins.SPAWNER,\n      null,\n      this.data.resolve,\n      false,\n      {\n        x: this.data.spawnScale.x === null ? 1 : this.data.spawnScale.x,\n        y: this.data.spawnScale.y === null ? 1 : this.data.spawnScale.y,\n        z: this.data.spawnScale.z === null ? 1 : this.data.spawnScale.z\n      }\n    ).entity;\n\n    const interaction = this.el.sceneEl.systems.interaction;\n    if (!interaction.ready) return; //DOMContentReady workaround\n    const cursor = (e.detail && e.detail.object3D) || interaction.options.rightRemote.entity.object3D;\n\n    const left = cursor.el.id.indexOf(\"right\") === -1;\n    const hand = left ? interaction.options.leftHand.entity.object3D : interaction.options.rightHand.entity.object3D;\n    cursor.getWorldPosition(spawnedEntity.object3D.position);\n    cursor.getWorldQuaternion(spawnedEntity.object3D.quaternion);\n    spawnedEntity.object3D.matrixNeedsUpdate = true;\n\n    this.el.emit(\"spawned-entity-created\", { target: spawnedEntity });\n\n    const userinput = AFRAME.scenes[0].systems.userinput;\n    const willAnimateFromCursor =\n      this.data.animateFromCursor &&\n      (userinput.get(paths.actions.rightHand.matrix) || userinput.get(paths.actions.leftHand.matrix));\n    if (!willAnimateFromCursor) {\n      if (left) {\n        interaction.state.leftRemote.held = spawnedEntity;\n        interaction.state.leftRemote.spawning = true;\n      } else {\n        interaction.state.rightRemote.held = spawnedEntity;\n        interaction.state.rightRemote.spawning = true;\n      }\n    }\n    this.activateCooldown();\n    await waitForEvent(\"model-loaded\", spawnedEntity);\n\n    cursor.getWorldPosition(spawnedEntity.object3D.position);\n    cursor.getWorldQuaternion(spawnedEntity.object3D.quaternion);\n    spawnedEntity.object3D.matrixNeedsUpdate = true;\n\n    if (willAnimateFromCursor) {\n      hand.getWorldPosition(this.handPosition);\n      spawnedEntity.setAttribute(\"animation__spawn-at-cursor\", {\n        property: \"position\",\n        delay: 500,\n        dur: 1500,\n        from: {\n          x: spawnedEntity.object3D.position.x,\n          y: spawnedEntity.object3D.position.y,\n          z: spawnedEntity.object3D.position.z\n        },\n        to: { x: this.handPosition.x, y: this.handPosition.y, z: this.handPosition.z },\n        easing: \"easeInOutBack\"\n      });\n    } else {\n      if (left) {\n        interaction.state.leftRemote.spawning = false;\n      } else {\n        interaction.state.rightRemote.spawning = false;\n      }\n    }\n    if (spawnedEntity.components[\"body-helper\"].body) {\n      spawnedEntity.components[\"body-helper\"].body.syncToPhysics(true);\n    }\n\n    spawnedEntity.addEventListener(\n      \"media-loaded\",\n      () => {\n        this.el.emit(\"spawned-entity-loaded\", { target: spawnedEntity });\n      },\n      { once: true }\n    );\n  },\n\n  activateCooldown() {\n    if (this.data.spawnCooldown > 0) {\n      const [sx, sy, sz] = [this.el.object3D.scale.x, this.el.object3D.scale.y, this.el.object3D.scale.z];\n\n      this.el.setAttribute(\"visible\", false);\n      this.el.object3D.scale.set(0.001, 0.001, 0.001);\n      this.el.object3D.matrixNeedsUpdate = true;\n      this.el.classList.remove(\"interactable\");\n      this.el.setAttribute(\"body-helper\", { collisionFilterMask: COLLISION_LAYERS.NONE });\n      this.cooldownTimeout = setTimeout(() => {\n        this.el.setAttribute(\"visible\", true);\n        this.el.classList.add(\"interactable\");\n        this.el.setAttribute(\"body-helper\", { collisionFilterMask: COLLISION_LAYERS.DEFAULT_SPAWNER });\n        this.el.removeAttribute(\"animation__spawner-cooldown\");\n        this.el.setAttribute(\"animation__spawner-cooldown\", {\n          property: \"scale\",\n          delay: 50,\n          dur: 350,\n          from: { x: 0.001, y: 0.001, z: 0.001 },\n          to: { x: sx, y: sy, z: sz },\n          easing: \"easeOutElastic\"\n        });\n\n        this.cooldownTimeout = null;\n      }, this.data.spawnCooldown * 1000);\n    }\n  }\n});\n","import { Layers } from \"./layers\";\nimport \"../vendor/Water\";\nimport waterNormalMap from \"../assets/waternormals.jpg\";\n\n/**\n * @author jbouny / https://github.com/jbouny\n *\n * Work based on :\n * @author Slayvin / http://slayvin.net : Flat mirror for three.js\n * @author Stemkoski / http://www.adelphi.edu/~stemkoski : An implementation of water shader based on the flat mirror\n * @author Jonas Wagner / http://29a.ch/ && http://29a.ch/slides/2012/webglwater/ : Water shader explanations in WebGL\n */\n\nfunction MobileWater(geometry, options) {\n  THREE.Mesh.call(this, geometry);\n\n  const scope = this;\n\n  options = options || {};\n\n  const time = options.time !== undefined ? options.time : 0.0;\n  const normalSampler = options.waterNormals !== undefined ? options.waterNormals : null;\n  const sunDirection =\n    options.sunDirection !== undefined ? options.sunDirection : new THREE.Vector3(0.70707, 0.70707, 0.0);\n  const sunColor = new THREE.Color(options.sunColor !== undefined ? options.sunColor : 0xffffff);\n  const waterColor = new THREE.Color(options.waterColor !== undefined ? options.waterColor : 0x7f7f7f);\n  const eye = options.eye !== undefined ? options.eye : new THREE.Vector3(0, 0, 0);\n  const distortionScale = options.distortionScale !== undefined ? options.distortionScale : 20.0;\n  const side = options.side !== undefined ? options.side : THREE.FrontSide;\n  const fog = options.fog !== undefined ? options.fog : false;\n\n  const mirrorShader = {\n    uniforms: THREE.UniformsUtils.merge([\n      THREE.UniformsLib[\"lights\"],\n      {\n        normalSampler: { value: null },\n        time: { value: 0.0 },\n        size: { value: 1.0 },\n        distortionScale: { value: 20.0 },\n        sunColor: { value: new THREE.Color(0x7f7f7f) },\n        sunDirection: { value: new THREE.Vector3(0.70707, 0.70707, 0) },\n        eye: { value: new THREE.Vector3() },\n        waterColor: { value: new THREE.Color(0x555555) }\n      }\n    ]),\n\n    vertexShader: `\n      uniform float time;\n      varying vec4 worldPosition;\n\n      void main() {\n      \tworldPosition = modelMatrix * vec4( position, 1.0 );\n      \tvec4 mvPosition =  modelViewMatrix * vec4( position, 1.0 );\n      \tgl_Position = projectionMatrix * mvPosition;\n\n      }\n    `,\n\n    fragmentShader: `\n      uniform float time;\n      uniform float size;\n      uniform float distortionScale;\n      uniform sampler2D normalSampler;\n      uniform vec3 sunColor;\n      uniform vec3 sunDirection;\n      uniform vec3 eye;\n      uniform vec3 waterColor;\n\n      varying vec4 worldPosition;\n\n      vec4 getNoise( vec2 uv ) {\n      \tvec2 uv0 = ( uv / 103.0 ) + vec2(time / 17.0, time / 29.0);\n      \tvec2 uv1 = uv / 107.0-vec2( time / -19.0, time / 31.0 );\n      \tvec2 uv2 = uv / vec2( 8907.0, 9803.0 ) + vec2( time / 101.0, time / 97.0 );\n      \tvec2 uv3 = uv / vec2( 1091.0, 1027.0 ) - vec2( time / 109.0, time / -113.0 );\n      \tvec4 noise = texture2D( normalSampler, uv0 ) +\n      \t\ttexture2D( normalSampler, uv1 ) +\n      \t\ttexture2D( normalSampler, uv2 ) +\n      \t\ttexture2D( normalSampler, uv3 );\n      \treturn noise * 0.5 - 1.0;\n      }\n\n      void sunLight( const vec3 surfaceNormal, const vec3 eyeDirection, float shiny, float spec, float diffuse, inout vec3 diffuseColor, inout vec3 specularColor ) {\n      \tvec3 reflection = normalize( reflect( -sunDirection, surfaceNormal ) );\n      \tfloat direction = max( 0.0, dot( eyeDirection, reflection ) );\n      \tspecularColor += pow( direction, shiny ) * sunColor * spec;\n      \tdiffuseColor += max( dot( sunDirection, surfaceNormal ), 0.0 ) * sunColor * diffuse;\n      }\n\n      ${THREE.ShaderChunk[\"common\"]}\n      ${THREE.ShaderChunk[\"packing\"]}\n      ${THREE.ShaderChunk[\"bsdfs\"]}\n      ${THREE.ShaderChunk[\"lights_pars_begin\"]}\n\n      void main() {\n      \tvec4 noise = getNoise( worldPosition.xz * size );\n      \tvec3 surfaceNormal = normalize( noise.xzy * vec3( 1.5, 1.0, 1.5 ) );\n\n      \tvec3 diffuseLight = vec3(0.0);\n      \tvec3 specularLight = vec3(0.0);\n\n      \tvec3 worldToEye = eye-worldPosition.xyz;\n      \tvec3 eyeDirection = normalize( worldToEye );\n      \tsunLight( surfaceNormal, eyeDirection, 100.0, 2.0, 0.5, diffuseLight, specularLight );\n\n      \tfloat theta = max( dot( eyeDirection, surfaceNormal ), 0.0 );\n      \tfloat rf0 = 0.3;\n      \tfloat reflectance = rf0 + ( 1.0 - rf0 ) * pow( ( 1.0 - theta ), 5.0 );\n      \tvec3 scatter = max( 0.0, dot( surfaceNormal, eyeDirection ) ) * waterColor;\n      \tvec3 albedo = mix( ( sunColor * diffuseLight * 0.3 + scatter ), ( 0.5 + specularLight ), reflectance);\n      \tvec3 outgoingLight = albedo;\n      \tgl_FragColor = vec4( outgoingLight, 1 );\n      }\n    `\n  };\n\n  const material = new THREE.ShaderMaterial({\n    fragmentShader: mirrorShader.fragmentShader,\n    vertexShader: mirrorShader.vertexShader,\n    uniforms: THREE.UniformsUtils.clone(mirrorShader.uniforms),\n    transparent: false,\n    lights: true,\n    side: side,\n    fog: fog\n  });\n\n  material.uniforms.time.value = time;\n  material.uniforms.normalSampler.value = normalSampler;\n  material.uniforms.sunColor.value = sunColor;\n  material.uniforms.waterColor.value = waterColor;\n  material.uniforms.sunDirection.value = sunDirection;\n  material.uniforms.distortionScale.value = distortionScale;\n\n  material.uniforms.eye.value = eye;\n\n  scope.material = material;\n}\n\nMobileWater.prototype = Object.create(THREE.Mesh.prototype);\nMobileWater.prototype.constructor = THREE.Water;\n\nasync function loadWaterNormals(url) {\n  const texture = await new Promise((resolve, reject) =>\n    new THREE.TextureLoader().load(url, resolve, undefined, reject)\n  );\n  texture.wrapS = texture.wrapT = THREE.RepeatWrapping;\n  texture.needsUpdate = true;\n  return texture;\n}\n\nAFRAME.registerComponent(\"water\", {\n  schema: {\n    waterColor: { type: \"color\", default: \"#001e0f\" },\n    distortionScale: { type: \"number\", default: 3.7 },\n    sunColor: { type: \"color\", default: \"#ffffff\" },\n    inclination: { type: \"number\", default: 0 },\n    azimuth: { type: \"number\", default: 0 },\n    distance: { type: \"number\", default: 1 },\n    speed: { type: \"number\", default: 0.1 },\n    forceMobile: { type: \"boolean\", default: false }\n  },\n  init() {\n    const waterMesh = this.el.getObject3D(\"mesh\");\n    const waterGeometry = waterMesh.geometry;\n\n    // Render THREE.Water shader instead of THREE.Mesh\n    waterMesh.visible = false;\n\n    loadWaterNormals(waterNormalMap).then(waterNormals => {\n      const waterConfig = {\n        textureWidth: 512,\n        textureHeight: 512,\n        waterNormals: waterNormals,\n        sunDirection: this.data.sunDirection,\n        sunColor: new THREE.Color(this.data.sunColor),\n        waterColor: new THREE.Color(this.data.waterColor),\n        distortionScale: this.data.distortionScale,\n        fog: false\n      };\n\n      if (AFRAME.utils.device.isMobile() || AFRAME.utils.device.isMobileVR() || this.data.forceMobile) {\n        this.water = new MobileWater(waterGeometry, waterConfig);\n      } else {\n        this.water = new THREE.Water(waterGeometry, waterConfig);\n        this.water.mirrorCamera.layers.set(Layers.reflection);\n      }\n\n      this.el.setObject3D(\"water\", this.water);\n    });\n  },\n\n  update(oldData) {\n    if (this.data.forceMobile !== oldData.forceMobile) {\n      this.el.removeObject3D(\"water\");\n      this.init();\n      return;\n    }\n\n    if (!this.water) {\n      return;\n    }\n\n    const uniforms = this.water.material.uniforms;\n\n    if (this.data.waterColor !== oldData.waterColor) {\n      uniforms.waterColor.value.setStyle(this.data.waterColor);\n    }\n\n    if (this.data.distortionScale !== oldData.distortionScale) {\n      uniforms.distortionScale.value = this.data.distortionScale;\n    }\n\n    if (this.data.sunColor !== oldData.sunColor) {\n      uniforms.sunColor.value.setStyle(this.data.sunColor);\n    }\n\n    if (\n      this.data.inclination !== oldData.inclination ||\n      this.data.azimuth !== oldData.azimuth ||\n      this.data.distance !== oldData.distance\n    ) {\n      const theta = Math.PI * (this.data.inclination - 0.5);\n      const phi = 2 * Math.PI * (this.data.azimuth - 0.5);\n\n      const distance = this.data.distance;\n\n      const x = distance * Math.cos(phi);\n      const y = distance * Math.sin(phi) * Math.sin(theta);\n      const z = distance * Math.sin(phi) * Math.cos(theta);\n\n      uniforms.sunDirection.value.set(x, y, z);\n    }\n  },\n\n  tick(time) {\n    if (this.water) {\n      this.water.material.uniforms.time.value = (time / 1000) * this.data.speed;\n    }\n  },\n\n  remove() {\n    this.el.removeObject3D(\"water\");\n    const waterMesh = this.el.getObject3D(\"mesh\");\n    waterMesh.visible = true;\n  }\n});\n","import { SimplexNoise } from \"three/examples/jsm/math/SimplexNoise\";\nimport waterNormalsUrl from \"../assets/waternormals.jpg\";\n\nconst {\n  Mesh,\n  PlaneBufferGeometry,\n  MeshStandardMaterial,\n  MeshPhongMaterial,\n  Vector2,\n  TextureLoader,\n  RepeatWrapping\n} = THREE;\n\n/**\n * SimpleWater\n * Keep in sync with Spoke's SimpleWater class\n */\n\n/**\n * Adapted dynamic geometry code from: https://github.com/ditzel/UnityOceanWavesAndShip\n */\n\nclass Octave {\n  constructor(speed = new Vector2(1, 1), scale = new Vector2(1, 1), height = 0.0025, alternate = true) {\n    this.speed = speed;\n    this.scale = scale;\n    this.height = height;\n    this.alternate = alternate;\n  }\n}\nexport default class SimpleWater extends Mesh {\n  constructor(normalMap, resolution = 24, lowQuality = false) {\n    const geometry = new PlaneBufferGeometry(10, 10, resolution, resolution);\n    geometry.rotateX(-Math.PI / 2);\n\n    const waterUniforms = {\n      ripplesSpeed: { value: 0.25 },\n      ripplesScale: { value: 1 },\n      time: { value: 0 }\n    };\n\n    const materialClass = lowQuality ? MeshPhongMaterial : MeshStandardMaterial;\n\n    normalMap.wrapS = normalMap.wrapT = RepeatWrapping;\n\n    const material = new materialClass({ color: 0x0054df, normalMap });\n    material.name = \"SimpleWaterMaterial\";\n\n    material.onBeforeCompile = shader => {\n      Object.assign(shader.uniforms, waterUniforms);\n\n      shader.vertexShader = shader.vertexShader.replace(\n        \"#include <fog_pars_vertex>\",\n        `\n        #include <fog_pars_vertex>\n        varying vec3 vWPosition;\n      `\n      );\n\n      shader.vertexShader = shader.vertexShader.replace(\n        \"#include <fog_vertex>\",\n        `\n        #include <fog_vertex>\n        vWPosition = ( modelMatrix * vec4( transformed, 1.0 ) ).xyz;\n      `\n      );\n\n      // getNoise function from https://github.com/mrdoob/three.js/blob/dev/examples/jsm/objects/Water.js\n      shader.fragmentShader = shader.fragmentShader.replace(\n        \"#include <normalmap_pars_fragment>\",\n        `\n        #include <normalmap_pars_fragment>\n\n        uniform float time;\n        uniform float ripplesSpeed;\n        uniform float ripplesScale;\n      \n        varying vec3 vWPosition;\n      \n        vec4 getNoise(vec2 uv){\n          float timeOffset = time * ripplesSpeed;\n          uv = (uv - 0.5) * (1.0 / ripplesScale);\n          vec2 uv0 = (uv/103.0)+vec2(timeOffset/17.0, timeOffset/29.0);\n          vec2 uv1 = uv/107.0-vec2(timeOffset/-19.0, timeOffset/31.0);\n          vec2 uv2 = uv/vec2(897.0, 983.0)+vec2(timeOffset/101.0, timeOffset/97.0);\n          vec2 uv3 = uv/vec2(991.0, 877.0)-vec2(timeOffset/109.0, timeOffset/-113.0);\n          vec4 noise = (texture2D(normalMap, uv0)) +\n                       (texture2D(normalMap, uv1)) +\n                       (texture2D(normalMap, uv2)) +\n                       (texture2D(normalMap, uv3));\n          return noise / 4.0;\n        }\n      `\n      );\n\n      // https://github.com/mrdoob/three.js/blob/dev/src/renderers/shaders/ShaderChunk/normalmap_pars_fragment.glsl.js#L20\n      shader.fragmentShader = shader.fragmentShader.replace(\n        \"#include <normal_fragment_maps>\",\n        `\n          // Workaround for Adreno 3XX dFd*( vec3 ) bug. See #9988\n\n          vec3 eye_pos = -vViewPosition;\n          vec3 q0 = vec3( dFdx( eye_pos.x ), dFdx( eye_pos.y ), dFdx( eye_pos.z ) );\n          vec3 q1 = vec3( dFdy( eye_pos.x ), dFdy( eye_pos.y ), dFdy( eye_pos.z ) );\n          vec2 st0 = dFdx( vUv.st );\n          vec2 st1 = dFdy( vUv.st );\n\n          float scale = sign( st1.t * st0.s - st0.t * st1.s ); // we do not care about the magnitude\n\n          vec3 S = normalize( ( q0 * st1.t - q1 * st0.t ) * scale );\n          vec3 T = normalize( ( - q0 * st1.s + q1 * st0.s ) * scale );\n          vec3 N = normalize( normal );\n          mat3 tsn = mat3( S, T, N );\n\n          vec3 mapN = getNoise(vWPosition.xz).xyz * 2.0 - 1.0;\n\n          mapN.xy *= normalScale;\n          mapN.xy *= ( float( gl_FrontFacing ) * 2.0 - 1.0 );\n\n          normal = normalize( tsn * mapN );\n        `\n      );\n    };\n\n    super(geometry, material);\n\n    this.lowQuality = lowQuality;\n    this.waterUniforms = waterUniforms;\n\n    if (lowQuality) {\n      this.material.specular.set(0xffffff);\n    } else {\n      this.receiveShadow = true;\n    }\n\n    this.geometry.attributes.position.dynamic = true;\n\n    this.resolution = resolution;\n    this.octaves = [\n      new Octave(new Vector2(0.5, 0.5), new Vector2(1, 1), 0.01, true),\n      new Octave(new Vector2(0.05, 6), new Vector2(1, 20), 0.1, false)\n    ];\n\n    this.simplex = new SimplexNoise();\n  }\n\n  get opacity() {\n    return this.material.opacity;\n  }\n\n  set opacity(value) {\n    this.material.opacity = value;\n\n    if (value !== 1) {\n      this.material.transparent = true;\n    }\n  }\n\n  get color() {\n    return this.material.color;\n  }\n\n  get tideHeight() {\n    return this.octaves[0].height;\n  }\n\n  get tideScale() {\n    return this.octaves[0].scale;\n  }\n\n  get tideSpeed() {\n    return this.octaves[0].speed;\n  }\n\n  set tideHeight(value) {\n    this.octaves[0].height = value;\n  }\n\n  get waveHeight() {\n    return this.octaves[1].height;\n  }\n\n  set waveHeight(value) {\n    this.octaves[1].height = value;\n  }\n\n  get waveScale() {\n    return this.octaves[1].scale;\n  }\n\n  get waveSpeed() {\n    return this.octaves[1].speed;\n  }\n\n  set ripplesSpeed(value) {\n    this.waterUniforms.ripplesSpeed.value = value;\n  }\n\n  get ripplesSpeed() {\n    return this.waterUniforms.ripplesSpeed.value;\n  }\n\n  set ripplesScale(value) {\n    this.waterUniforms.ripplesScale.value = value;\n  }\n\n  get ripplesScale() {\n    return this.waterUniforms.ripplesScale.value;\n  }\n\n  update(time) {\n    const positionAttribute = this.geometry.attributes.position;\n\n    for (let x = 0; x <= this.resolution; x++) {\n      for (let z = 0; z <= this.resolution; z++) {\n        let y = 0;\n\n        for (let o = 0; o < this.octaves.length; o++) {\n          const octave = this.octaves[o];\n\n          if (octave.alternate) {\n            const noise = this.simplex.noise(\n              (x * octave.scale.x) / this.resolution,\n              (z * octave.scale.y) / this.resolution\n            );\n            y += Math.cos(noise + octave.speed.length() * time) * octave.height;\n          } else {\n            const noise =\n              this.simplex.noise(\n                (x * octave.scale.x + time * octave.speed.x) / this.resolution,\n                (z * octave.scale.y + time * octave.speed.y) / this.resolution\n              ) - 0.5;\n            y += noise * octave.height;\n          }\n        }\n\n        positionAttribute.setY(x * (this.resolution + 1) + z, y);\n      }\n    }\n\n    this.geometry.computeVertexNormals();\n    positionAttribute.needsUpdate = true;\n    this.waterUniforms.time.value = time;\n  }\n\n  clone(recursive) {\n    return new SimpleWater(this.material.normalMap, this.resolution, this.lowQuality).copy(this, recursive);\n  }\n\n  copy(source, recursive = true) {\n    super.copy(source, recursive);\n\n    this.opacity = source.opacity;\n    this.color.copy(source.color);\n    this.tideHeight = source.tideHeight;\n    this.tideScale.copy(source.tideScale);\n    this.tideSpeed.copy(source.tideSpeed);\n    this.waveHeight = source.waveHeight;\n    this.waveScale.copy(source.waveScale);\n    this.waveSpeed.copy(source.waveSpeed);\n    this.ripplesSpeed = source.ripplesSpeed;\n    this.ripplesScale = source.ripplesScale;\n\n    return this;\n  }\n}\n\nfunction vec2Equals(a, b) {\n  return a && b && a.x === b.x && a.y === b.y;\n}\n\nlet waterNormalMap = null;\n\nAFRAME.registerComponent(\"simple-water\", {\n  schema: {\n    opacity: { type: \"number\", default: 1 },\n    color: { type: \"color\" },\n    tideHeight: { type: \"number\", default: 0.01 },\n    tideScale: { type: \"vec2\", default: { x: 1, y: 1 } },\n    tideSpeed: { type: \"vec2\", default: { x: 0.5, y: 0.5 } },\n    waveHeight: { type: \"number\", default: 0.1 },\n    waveScale: { type: \"vec2\", default: { x: 1, y: 20 } },\n    waveSpeed: { type: \"vec2\", default: { x: 0.05, y: 6 } },\n    ripplesScale: { type: \"number\", default: 1 },\n    ripplesSpeed: { type: \"number\", default: 0.25 }\n  },\n\n  init() {\n    if (!waterNormalMap) {\n      waterNormalMap = new TextureLoader().load(waterNormalsUrl);\n    }\n    this.water = new SimpleWater(waterNormalMap, undefined, window.APP && window.APP.quality === \"low\");\n    this.el.setObject3D(\"mesh\", this.water);\n  },\n\n  update(oldData) {\n    if (this.data.opacity !== oldData.opacity) {\n      this.water.opacity = this.data.opacity;\n    }\n\n    if (this.data.color !== oldData.color) {\n      this.water.color.set(this.data.color);\n    }\n\n    if (this.data.tideHeight !== oldData.tideHeight) {\n      this.water.tideHeight = this.data.tideHeight;\n    }\n\n    if (!vec2Equals(this.data.tideScale, oldData.tideScale)) {\n      this.water.tideScale.copy(this.data.tideScale);\n    }\n\n    if (!vec2Equals(this.data.tideSpeed, oldData.tideSpeed)) {\n      this.water.tideSpeed.copy(this.data.tideSpeed);\n    }\n\n    if (this.data.waveHeight !== oldData.waveHeight) {\n      this.water.waveHeight = this.data.waveHeight;\n    }\n\n    if (!vec2Equals(this.data.waveScale, oldData.waveScale)) {\n      this.water.waveScale.copy(this.data.waveScale);\n    }\n\n    if (!vec2Equals(this.data.waveSpeed, oldData.waveSpeed)) {\n      this.water.waveSpeed.copy(this.data.waveSpeed);\n    }\n\n    if (this.data.ripplesScale !== oldData.ripplesScale) {\n      this.water.ripplesScale = this.data.ripplesScale;\n    }\n\n    if (this.data.ripplesSpeed !== oldData.ripplesSpeed) {\n      this.water.ripplesSpeed = this.data.ripplesSpeed;\n    }\n  },\n\n  tick(time) {\n    this.water.update(time / 1000);\n  },\n\n  remove() {\n    this.el.removeObject3D(\"mesh\");\n  }\n});\n","import { ParticleEmitter } from \"@mozillareality/three-particle-emitter\";\nimport { textureLoader } from \"../utils/media-utils\";\nimport { resolveUrl } from \"../utils/media-utils\";\nimport { proxiedUrlFor } from \"../utils/media-url-utils\";\nimport defaultSrcImage from \"../assets/images/warning_icon.png\";\n\nconst defaultSrcUrl = new URL(defaultSrcImage, window.location.href).href;\n\nAFRAME.registerComponent(\"particle-emitter\", {\n  schema: {\n    resolve: { type: \"boolean\", default: true },\n    src: { type: \"string\", default: defaultSrcUrl },\n    startColor: { type: \"color\" },\n    middleColor: { type: \"color\" },\n    endColor: { type: \"color\" },\n    startOpacity: { type: \"number\", default: 1 },\n    middleOpacity: { type: \"number\", default: 1 },\n    endOpacity: { type: \"number\", default: 1 },\n    colorCurve: { type: \"string\", default: \"linear\" },\n    sizeCurve: { type: \"string\", default: \"linear\" },\n    startSize: { type: \"number\", default: 1 },\n    endSize: { type: \"number\", default: 1 },\n    sizeRandomness: { type: \"number\" },\n    ageRandomness: { type: \"number\" },\n    lifetime: { type: \"number\", default: 1 },\n    lifetimeRandomness: { type: \"number\" },\n    particleCount: { type: \"number\", default: 10 },\n    startVelocity: { type: \"vec3\", default: { x: 0, y: 0, z: 1 } },\n    endVelocity: { type: \"vec3\", default: { x: 0, y: 0, z: 1 } },\n    velocityCurve: { type: \"string\", default: \"linear\" },\n    angularVelocity: { type: \"number\" }\n  },\n\n  init() {\n    this.particleEmitter = new ParticleEmitter(null);\n    this.particleEmitter.visible = false;\n    this.el.setObject3D(\"particle-emitter\", this.particleEmitter);\n    this.updateParticles = false;\n    if (this.data.src === defaultSrcUrl) {\n      this.data.resolve = false;\n    }\n  },\n\n  async setTexture(src, resolve) {\n    let accessibleUrl = src;\n\n    if (resolve) {\n      const result = await resolveUrl(src);\n      let canonicalUrl = result.origin;\n\n      // handle protocol relative urls\n      if (canonicalUrl.startsWith(\"//\")) {\n        canonicalUrl = location.protocol + canonicalUrl;\n      }\n\n      // todo: we don't need to proxy for many things if the canonical URL has permissive CORS headers\n      accessibleUrl = proxiedUrlFor(canonicalUrl);\n    }\n\n    const texture = new THREE.Texture();\n\n    await textureLoader.loadTextureAsync(texture, accessibleUrl);\n\n    // Guard against src changing while request was in flight\n    if (this.data.src !== src) {\n      return;\n    }\n\n    this.particleEmitter.material.uniforms.map.value = texture;\n    this.particleEmitter.visible = true;\n    this.updateParticles = true;\n  },\n\n  update(prevData) {\n    const data = this.data;\n    const particleEmitter = this.particleEmitter;\n\n    if (prevData.src !== data.src) {\n      this.setTexture(data.src, data.resolve).catch(console.error);\n    }\n\n    if (\n      prevData.startColor !== data.startColor ||\n      prevData.startSize !== data.startSize ||\n      prevData.sizeRandomness !== data.sizeRandomness ||\n      prevData.ageRandomness !== data.ageRandomness ||\n      prevData.lifetime !== data.lifetime ||\n      prevData.lifetimeRandomness !== data.lifetimeRandomness ||\n      prevData.particleCount !== data.particleCount\n    ) {\n      this.updateParticles = true;\n    }\n\n    particleEmitter.startColor.set(data.startColor);\n    particleEmitter.middleColor.set(data.middleColor);\n    particleEmitter.endColor.set(data.endColor);\n    particleEmitter.startOpacity = data.startOpacity;\n    particleEmitter.middleOpacity = data.middleOpacity;\n    particleEmitter.endOpacity = data.endOpacity;\n    particleEmitter.colorCurve = data.colorCurve;\n    particleEmitter.sizeCurve = data.sizeCurve;\n    particleEmitter.startSize = data.startSize;\n    particleEmitter.endSize = data.endSize;\n    particleEmitter.sizeRandomness = data.sizeRandomness;\n    particleEmitter.ageRandomness = data.ageRandomness;\n    particleEmitter.lifetime = data.lifetime;\n    particleEmitter.lifetimeRandomness = data.lifetimeRandomness;\n    particleEmitter.particleCount = data.particleCount;\n    particleEmitter.startVelocity.copy(data.startVelocity);\n    particleEmitter.endVelocity.copy(data.endVelocity);\n    particleEmitter.velocityCurve = data.velocityCurve;\n    particleEmitter.angularVelocity = data.angularVelocity;\n  },\n\n  tick(time, dt) {\n    if (this.updateParticles) {\n      this.particleEmitter.updateParticles();\n      this.updateParticles = false;\n    }\n\n    if (this.particleEmitter.visible) {\n      this.particleEmitter.update(dt / 1000);\n    }\n  }\n});\n","export function getSanitizedComponentMapping(inputComponent, inputProperty, publicComponents) {\n  const publicComponent = publicComponents[inputComponent];\n\n  if (!publicComponent) {\n    throw new Error(`Component \"${inputComponent}\" is not public.`);\n  }\n\n  const publicProperty = publicComponent.publicProperties[inputProperty];\n\n  if (!publicProperty) {\n    throw new Error(`Component \"${inputComponent}\"'s property \"${inputProperty}\" is not public.`);\n  }\n\n  return {\n    mappedComponent: publicComponent.mappedComponent,\n    mappedProperty: publicProperty.mappedProperty,\n    getMappedValue: publicProperty.getMappedValue\n  };\n}\n","import \"./components/gltf-model-plus\";\nimport { getSanitizedComponentMapping } from \"./utils/component-mappings\";\nimport { TYPE, SHAPE, FIT } from \"three-ammo/constants\";\nconst COLLISION_LAYERS = require(\"./constants\").COLLISION_LAYERS;\n\nfunction registerRootSceneComponent(componentName) {\n  AFRAME.GLTFModelPlus.registerComponent(componentName, componentName, (el, componentName, componentData) => {\n    const sceneEl = AFRAME.scenes[0];\n\n    sceneEl.setAttribute(componentName, componentData);\n\n    sceneEl.addEventListener(\n      \"reset_scene\",\n      () => {\n        sceneEl.removeAttribute(componentName);\n      },\n      { once: true }\n    );\n  });\n}\n\nregisterRootSceneComponent(\"fog\");\nregisterRootSceneComponent(\"background\");\n\nAFRAME.GLTFModelPlus.registerComponent(\"duck\", \"duck\");\nAFRAME.GLTFModelPlus.registerComponent(\"quack\", \"quack\");\nAFRAME.GLTFModelPlus.registerComponent(\"sound\", \"sound\");\nAFRAME.GLTFModelPlus.registerComponent(\"css-class\", \"css-class\");\nAFRAME.GLTFModelPlus.registerComponent(\"interactable\", \"css-class\", (el, componentName) => {\n  el.setAttribute(componentName, \"interactable\");\n});\nAFRAME.GLTFModelPlus.registerComponent(\"super-spawner\", \"super-spawner\", (el, componentName, componentData) => {\n  //TODO: Do not automatically add these components\n  el.setAttribute(\"is-remote-hover-target\", \"\");\n  el.setAttribute(\"tags\", { isHandCollisionTarget: true });\n  el.setAttribute(\"hoverable-visuals\", \"\");\n  el.setAttribute(componentName, componentData);\n});\nAFRAME.GLTFModelPlus.registerComponent(\"gltf-model-plus\", \"gltf-model-plus\");\nAFRAME.GLTFModelPlus.registerComponent(\"media-loader\", \"media-loader\");\nAFRAME.GLTFModelPlus.registerComponent(\"body\", \"body-helper\", el => {\n  //This is only required for migration of old environments with super-spawners\n  //will no longer be needed when spawners are added via Spoke instead.\n  el.setAttribute(\"body-helper\", {\n    mass: 0,\n    type: TYPE.STATIC,\n    collisionFilterGroup: COLLISION_LAYERS.INTERACTABLES,\n    collisionFilterMask: COLLISION_LAYERS.DEFAULT_SPAWNER\n  });\n});\nAFRAME.GLTFModelPlus.registerComponent(\"ammo-shape\", \"shape-helper\");\nAFRAME.GLTFModelPlus.registerComponent(\"hide-when-quality\", \"hide-when-quality\");\nAFRAME.GLTFModelPlus.registerComponent(\"light\", \"light\", (el, componentName, componentData) => {\n  if (componentData.distance === 0) {\n    componentData.decay = 0;\n  }\n  el.setAttribute(componentName, componentData);\n  if (componentData.castShadow) {\n    // HACK: component.light isn't set until one frame after setArrtibute\n    setTimeout(() => {\n      el.components.light.light.shadow.camera.matrixNeedsUpdate = true;\n    }, 0);\n  }\n});\nAFRAME.GLTFModelPlus.registerComponent(\"ambient-light\", \"ambient-light\");\nAFRAME.GLTFModelPlus.registerComponent(\"directional-light\", \"directional-light\");\nAFRAME.GLTFModelPlus.registerComponent(\"hemisphere-light\", \"hemisphere-light\");\nAFRAME.GLTFModelPlus.registerComponent(\"point-light\", \"point-light\");\nAFRAME.GLTFModelPlus.registerComponent(\"spot-light\", \"spot-light\");\n\nAFRAME.GLTFModelPlus.registerComponent(\"simple-water\", \"simple-water\");\nAFRAME.GLTFModelPlus.registerComponent(\"skybox\", \"skybox\");\nAFRAME.GLTFModelPlus.registerComponent(\"layers\", \"layers\");\nAFRAME.GLTFModelPlus.registerComponent(\"shadow\", \"shadow\");\nAFRAME.GLTFModelPlus.registerComponent(\"water\", \"water\");\nAFRAME.GLTFModelPlus.registerComponent(\"scale-audio-feedback\", \"scale-audio-feedback\");\nAFRAME.GLTFModelPlus.registerComponent(\"morph-audio-feedback\", \"morph-audio-feedback\");\nAFRAME.GLTFModelPlus.registerComponent(\"animation-mixer\", \"animation-mixer\");\nAFRAME.GLTFModelPlus.registerComponent(\"loop-animation\", \"loop-animation\");\nAFRAME.GLTFModelPlus.registerComponent(\n  \"box-collider\",\n  \"shape-helper\",\n  (() => {\n    const euler = new THREE.Euler();\n    return (el, componentName, componentData) => {\n      const { scale, rotation } = componentData;\n      euler.set(rotation.x, rotation.y, rotation.z);\n      const orientation = new THREE.Quaternion().setFromEuler(euler);\n      el.setAttribute(componentName, {\n        type: SHAPE.BOX,\n        fit: FIT.MANUAL,\n        offset: componentData.position,\n        halfExtents: { x: scale.x / 2, y: scale.y / 2, z: scale.z / 2 },\n        orientation\n      });\n    };\n  })()\n);\nAFRAME.GLTFModelPlus.registerComponent(\"visible\", \"visible\", (el, componentName, componentData) => {\n  if (typeof componentData === \"object\") {\n    el.setAttribute(componentName, componentData.visible);\n  } else {\n    el.setAttribute(componentName, componentData);\n  }\n});\nAFRAME.GLTFModelPlus.registerComponent(\"spawn-point\", \"spawn-point\", el => {\n  el.setAttribute(\"waypoint\", {\n    canBeSpawnPoint: true,\n    canBeOccupied: false,\n    canBeClicked: false,\n    willDisableMotion: false,\n    willDisableTeleporting: false,\n    willMaintainWorldUp: true\n  });\n});\nAFRAME.GLTFModelPlus.registerComponent(\"sticky-zone\", \"sticky-zone\");\nAFRAME.GLTFModelPlus.registerComponent(\"nav-mesh\", \"nav-mesh\", (el, _componentName, componentData) => {\n  const nav = AFRAME.scenes[0].systems.nav;\n  const zone = componentData.zone || \"character\";\n  let found = false;\n  el.object3D.traverse(node => {\n    if (node.isMesh && !found) {\n      found = true;\n      nav.loadMesh(node, zone);\n    }\n  });\n  // There isn't actually an a-frame nav-mesh component, but we want to tag this el as a nav-mesh since\n  // nav-mesh-helper will query for it later.\n  el.setAttribute(\"nav-mesh\");\n});\n\nAFRAME.GLTFModelPlus.registerComponent(\"pinnable\", \"pinnable\");\n\nAFRAME.GLTFModelPlus.registerComponent(\"waypoint\", \"waypoint\", (el, componentName, componentData, components) => {\n  if (componentData.canBeOccupied) {\n    el.setAttribute(\"networked\", {\n      template: \"#template-waypoint-avatar\",\n      attachTemplateToLocal: false,\n      owner: \"scene\",\n      persistent: true,\n      networkId: components.networked.id\n    });\n  }\n  el.setAttribute(\"waypoint\", componentData);\n});\n\nAFRAME.GLTFModelPlus.registerComponent(\"media\", \"media\", (el, componentName, componentData) => {\n  if (componentData.id) {\n    el.setAttribute(\"networked\", {\n      template: \"#interactable-media\",\n      owner: \"scene\",\n      persistent: true,\n      networkId: componentData.id\n    });\n  }\n\n  const mediaLoaderAttributes = {\n    src: componentData.src,\n    fitToBox: componentData.contentSubtype ? false : true,\n    resolve: true,\n    fileIsOwned: true,\n    animate: false,\n    contentSubtype: componentData.contentSubtype\n  };\n\n  if (componentData.version) {\n    mediaLoaderAttributes.version = componentData.version;\n  }\n\n  el.setAttribute(\"media-loader\", mediaLoaderAttributes);\n\n  if (componentData.pageIndex) {\n    el.setAttribute(\"media-pdf\", { index: componentData.pageIndex });\n    el.setAttribute(\"media-pager\", { index: componentData.pageIndex });\n  }\n\n  if (componentData.paused !== undefined) {\n    el.setAttribute(\"media-video\", { videoPaused: componentData.paused });\n  }\n\n  if (componentData.time) {\n    el.setAttribute(\"media-video\", { time: componentData.time });\n  }\n});\n\nasync function mediaInflator(el, componentName, componentData, components) {\n  let isControlled = true;\n\n  if (components.networked) {\n    isControlled = componentData.controls || componentName === \"link\";\n\n    const hasVolume = componentName === \"video\" || componentName === \"audio\";\n    const templateName = isControlled || hasVolume ? \"#static-controlled-media\" : \"#static-media\";\n\n    el.setAttribute(\"networked\", {\n      template: templateName,\n      owner: \"scene\",\n      persistent: true,\n      networkId: components.networked.id\n    });\n  }\n\n  const mediaOptions = {};\n\n  if (componentName === \"video\" || componentName === \"image\") {\n    mediaOptions.projection = componentData.projection;\n  }\n\n  if (componentName === \"video\" || componentName === \"audio\") {\n    mediaOptions.videoPaused = !componentData.autoPlay;\n    mediaOptions.volume = componentData.volume;\n    mediaOptions.loop = componentData.loop;\n    mediaOptions.audioType = componentData.audioType;\n    mediaOptions.hidePlaybackControls = !isControlled;\n\n    if (componentData.audioType === \"pannernode\") {\n      mediaOptions.distanceModel = componentData.distanceModel;\n      mediaOptions.rolloffFactor = componentData.rolloffFactor;\n      mediaOptions.refDistance = componentData.refDistance;\n      mediaOptions.maxDistance = componentData.maxDistance;\n      mediaOptions.coneInnerAngle = componentData.coneInnerAngle;\n      mediaOptions.coneOuterAngle = componentData.coneOuterAngle;\n      mediaOptions.coneOuterGain = componentData.coneOuterGain;\n    }\n\n    el.setAttribute(\"video-pause-state\", { paused: mediaOptions.videoPaused });\n  }\n\n  const src = componentName === \"link\" ? componentData.href : componentData.src;\n\n  el.setAttribute(\"media-loader\", {\n    src,\n    fitToBox: true,\n    resolve: true,\n    fileIsOwned: true,\n    animate: false,\n    mediaOptions\n  });\n}\n\nAFRAME.GLTFModelPlus.registerComponent(\"image\", \"image\", mediaInflator);\nAFRAME.GLTFModelPlus.registerComponent(\"audio\", \"audio\", mediaInflator, (name, property, value) => {\n  if (property === \"paused\") {\n    return { name: \"video-pause-state\", property, value };\n  } else {\n    return null;\n  }\n});\nAFRAME.GLTFModelPlus.registerComponent(\"video\", \"video\", mediaInflator, (name, property, value) => {\n  if (property === \"paused\") {\n    return { name: \"video-pause-state\", property, value };\n  } else {\n    return null;\n  }\n});\nAFRAME.GLTFModelPlus.registerComponent(\"link\", \"link\", mediaInflator);\n\nAFRAME.GLTFModelPlus.registerComponent(\"hoverable\", \"is-remote-hover-target\", el => {\n  el.setAttribute(\"is-remote-hover-target\", \"\");\n  el.setAttribute(\"tags\", { isHandCollisionTarget: true });\n});\n\nAFRAME.GLTFModelPlus.registerComponent(\"spawner\", \"spawner\", (el, componentName, componentData) => {\n  el.setAttribute(\"media-loader\", {\n    src: componentData.src,\n    resolve: true,\n    fileIsOwned: true,\n    animate: false\n  });\n  el.setAttribute(\"css-class\", \"interactable\");\n  el.setAttribute(\"super-spawner\", {\n    src: componentData.src,\n    resolve: true,\n    template: \"#interactable-media\"\n  });\n  el.setAttribute(\"hoverable-visuals\", \"\");\n  el.setAttribute(\"body-helper\", {\n    mass: 0,\n    type: TYPE.STATIC,\n    collisionFilterGroup: COLLISION_LAYERS.INTERACTABLES,\n    collisionFilterMask: COLLISION_LAYERS.DEFAULT_SPAWNER\n  });\n  el.setAttribute(\"is-remote-hover-target\", \"\");\n  el.setAttribute(\"tags\", { isHandCollisionTarget: true });\n});\n\nconst publicComponents = {\n  video: {\n    mappedComponent: \"video-pause-state\",\n    publicProperties: {\n      paused: {\n        mappedProperty: \"paused\",\n        getMappedValue(value) {\n          return !!value;\n        }\n      }\n    }\n  },\n  \"loop-animation\": {\n    mappedComponent: \"loop-animation\",\n    publicProperties: {\n      paused: {\n        mappedProperty: \"paused\",\n        getMappedValue(value) {\n          return !!value;\n        }\n      }\n    }\n  }\n};\n\nAFRAME.GLTFModelPlus.registerComponent(\n  \"trigger-volume\",\n  \"trigger-volume\",\n  (el, componentName, componentData, components, indexToEntityMap) => {\n    const {\n      size,\n      target,\n      enterComponent,\n      enterProperty,\n      enterValue,\n      leaveComponent,\n      leaveProperty,\n      leaveValue\n    } = componentData;\n\n    let enterComponentMapping, leaveComponentMapping, targetEntity;\n\n    try {\n      enterComponentMapping = getSanitizedComponentMapping(enterComponent, enterProperty, publicComponents);\n      leaveComponentMapping = getSanitizedComponentMapping(leaveComponent, leaveProperty, publicComponents);\n\n      targetEntity = indexToEntityMap[target];\n\n      if (!targetEntity) {\n        throw new Error(`Couldn't find target entity with index: ${target}.`);\n      }\n    } catch (e) {\n      console.warn(`Error inflating gltf component \"trigger-volume\": ${e.message}`);\n      return;\n    }\n\n    // Filter out scope and colliders properties.\n    el.setAttribute(\"trigger-volume\", {\n      colliders: \"#avatar-pov-node\",\n      size,\n      target: targetEntity,\n      enterComponent: enterComponentMapping.mappedComponent,\n      enterProperty: enterComponentMapping.mappedProperty,\n      enterValue: enterComponentMapping.getMappedValue(enterValue),\n      leaveComponent: leaveComponentMapping.mappedComponent,\n      leaveProperty: leaveComponentMapping.mappedProperty,\n      leaveValue: leaveComponentMapping.getMappedValue(leaveValue)\n    });\n  }\n);\n\nAFRAME.GLTFModelPlus.registerComponent(\"heightfield\", \"heightfield\", (el, componentName, componentData) => {\n  el.setAttribute(\"shape-helper__heightfield\", {\n    type: SHAPE.HEIGHTFIELD,\n    margin: 0.01,\n    fit: FIT.MANUAL,\n    heightfieldDistance: componentData.distance,\n    offset: componentData.offset,\n    heightfieldData: componentData.data\n  });\n});\n\nAFRAME.GLTFModelPlus.registerComponent(\"trimesh\", \"trimesh\", el => {\n  el.setAttribute(\"shape-helper__trimesh\", {\n    type: SHAPE.MESH,\n    margin: 0.01,\n    fit: FIT.ALL,\n    includeInvisible: true\n  });\n});\n\nAFRAME.GLTFModelPlus.registerComponent(\"particle-emitter\", \"particle-emitter\");\n\nAFRAME.GLTFModelPlus.registerComponent(\"networked-drawing-buffer\", \"networked-drawing-buffer\");\n\nAFRAME.GLTFModelPlus.registerComponent(\"audio-settings\", \"audio-settings\", (el, _componentName, componentData) => {\n  el.sceneEl.systems[\"hubs-systems\"].audioSettingsSystem.updateAudioSettings(componentData);\n});\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"loading-text\":\"loader__loading-text__QVcF3\",\"loadingText\":\"loader__loading-text__QVcF3\"};","module.exports = __webpack_public_path__ + \"assets/images/giphy_logo-e4fe68503ab5d004deb31e43636a0a7c.png\";","module.exports = __webpack_public_path__ + \"assets/images/emojis/emoji_0-902121d77164d8da8f8dd09d7a9ed761.png\";","module.exports = __webpack_public_path__ + \"assets/images/emojis/emoji_1-7d6e0cd0fcf8476aa9773da9bb53e399.png\";","module.exports = __webpack_public_path__ + \"assets/images/emojis/emoji_2-810f2d13cb607c120556d95765b8b21d.png\";","module.exports = __webpack_public_path__ + \"assets/images/emojis/emoji_3-5d247ddca0eccab1da6d29b030181195.png\";","module.exports = __webpack_public_path__ + \"assets/images/emojis/emoji_4-b1e61ff7ce3ac7aa29e92ab3fd5987c5.png\";","module.exports = __webpack_public_path__ + \"assets/images/emojis/emoji_5-1f8e9d84efb84989cd717fc147a80a9d.png\";","module.exports = __webpack_public_path__ + \"assets/images/emojis/emoji_6-bd090b380b4bde4f23a3b10040eb5623.png\";","module.exports = __webpack_public_path__ + \"assets/models/emojis/emoji_0-f3f46448f25bc1d8599c39fc43fc3430.glb\";","module.exports = __webpack_public_path__ + \"assets/models/emojis/emoji_1-99633c94256b7520f7833921094bedfe.glb\";","module.exports = __webpack_public_path__ + \"assets/models/emojis/emoji_2-4531e5b1d197a14e76c8d47894b62db0.glb\";","module.exports = __webpack_public_path__ + \"assets/models/emojis/emoji_3-167102458af413f37fc62cd5b201a010.glb\";","module.exports = __webpack_public_path__ + \"assets/models/emojis/emoji_4-834ee3738e00e03227ff45809c6f2fe8.glb\";","module.exports = __webpack_public_path__ + \"assets/models/emojis/emoji_5-b2763de169ccdb200ec5e8503170079d.glb\";","module.exports = __webpack_public_path__ + \"assets/models/emojis/emoji_6-6df1120c791dabb88d6b1ada0d8f973d.glb\";","module.exports = \"data:image/gif;base64,R0lGODlhEAAQAIQaAAAAAAEBAQABBQEBAgEBBQMDAwAykwBk+wFk+/85Af47AwCIHgCJHgGJHgCKHgOJIPc63vc64Pc64YeHhwDySLu7wru8wru8w7y8wwD6/v///////////////////////yH+EUNyZWF0ZWQgd2l0aCBHSU1QACH5BAEKAB8ALAAAAAAQABAAAAVl4AeMZDl9KAqkLDqd6YrN9HzC4jdbTUPDMBnGQWEAKphBYKTSYR6LRQE5y+VmlUAAc+lWrMIa4nBYxXQJcabMkkUUtLGhJZNA4BiC4HyVSCJpKRhgOktmgoRVLDSELY5mTHQlKyEAOw==\"","module.exports = __webpack_public_path__ + \"assets/images/audio-0205471a2825b8450c63e45f83436997.png\";","module.exports = __webpack_public_path__ + \"assets/camera_tool-a25d0894a6b635779bd4ed41f2de0411.glb\";","module.exports = __webpack_public_path__ + \"assets/images/mic_granted-5d41c8098b2c1a084f07dd3a2473983f.png\";","module.exports = __webpack_public_path__ + \"assets/images/mic_granted@2x-f84d9eb002832eeeb768529e6cb1e93e.png\";","module.exports = __webpack_public_path__ + \"assets/images/mic_small-b81b3397cc985eb8d3d67a4f007158cc.png\";","module.exports = __webpack_public_path__ + \"assets/images/mic_small@2x-d04ff548fa26495f69249f0c34f44b72.png\";","module.exports = __webpack_public_path__ + \"assets/images/add-owner-c3f352da151b4a5be71defd565720235.png\";","module.exports = __webpack_public_path__ + \"assets/images/remove-owner-02b96ad3a84badda798fde00ac4c2243.png\";","module.exports = \"<svg viewBox=\\\"0 0 70 70\\\" fill=\\\"none\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\"><mask id=\\\"path-1-inside-1\\\" fill=\\\"currentColor\\\"><path fill-rule=\\\"evenodd\\\" clip-rule=\\\"evenodd\\\" d=\\\"M28 17C25.2386 17 23 19.2386 23 22V50C23 52.7614 25.2386 55 28 55H43C45.7614 55 48 52.7614 48 50V22C48 19.2386 45.7614 17 43 17H28ZM45 21H26V46H45V21Z\\\"></path></mask><path d=\\\"M26 21V18H23V21H26ZM45 21H48V18H45V21ZM26 46H23V49H26V46ZM45 46V49H48V46H45ZM26 22C26 20.8954 26.8954 20 28 20V14C23.5817 14 20 17.5817 20 22H26ZM26 50V22H20V50H26ZM28 52C26.8954 52 26 51.1046 26 50H20C20 54.4183 23.5817 58 28 58V52ZM43 52H28V58H43V52ZM45 50C45 51.1046 44.1046 52 43 52V58C47.4183 58 51 54.4183 51 50H45ZM45 22V50H51V22H45ZM43 20C44.1046 20 45 20.8954 45 22H51C51 17.5817 47.4183 14 43 14V20ZM28 20H43V14H28V20ZM26 24H45V18H26V24ZM29 46V21H23V46H29ZM45 43H26V49H45V43ZM42 21V46H48V21H42Z\\\" fill=\\\"currentColor\\\" mask=\\\"url(#path-1-inside-1)\\\"></path></svg>\"","module.exports = \"<svg viewBox=\\\"0 0 70 70\\\" fill=\\\"none\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\"><rect x=\\\"25\\\" y=\\\"52\\\" width=\\\"20\\\" height=\\\"3\\\" fill=\\\"currentColor\\\"></rect><path fill-rule=\\\"evenodd\\\" clip-rule=\\\"evenodd\\\" d=\\\"M17 18C15.3431 18 14 19.3431 14 21V49C14 50.6569 15.3431 52 17 52H52C53.6569 52 55 50.6569 55 49V21C55 19.3431 53.6569 18 52 18H17ZM50 24H19V46H50V24Z\\\" fill=\\\"currentColor\\\"></path></svg>\"","module.exports = \"<svg viewBox=\\\"0 0 70 70\\\" fill=\\\"none\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\"><path fill-rule=\\\"evenodd\\\" clip-rule=\\\"evenodd\\\" d=\\\"M56.1704 22H16.7123C15.2406 22 14 23.226 14 24.7381V47.2622C14 48.7742 15.2406 50 16.7711 50H27.5496C28.7053 50 29.6958 49.3015 30.112 48.3081L33.2462 40.8289C33.7747 39.5677 35.0324 38.6805 36.5 38.6805C37.9676 38.6805 39.2253 39.5677 39.7538 40.8289L42.888 48.3081C43.3042 49.3015 44.2947 50 45.3916 50H56.1704C57.7594 50 59 48.7742 59 47.2622V24.7381C59 23.226 57.7594 22 56.1704 22ZM26.294 40.9274C23.5369 40.9274 21.3046 38.7226 21.3046 36C21.3046 33.2774 23.5369 31.0729 26.294 31.0729C29.0507 31.0729 31.2785 33.2774 31.2785 36C31.2785 38.7226 29.0459 40.9274 26.294 40.9274ZM46.7086 40.9251C43.9531 40.9251 41.7215 38.7214 41.7215 36C41.7215 33.2789 43.9531 31.0751 46.7086 31.0751C49.4641 31.0751 51.6957 33.2789 51.6957 36C51.6957 38.7214 49.4641 40.9251 46.7086 40.9251Z\\\" fill=\\\"currentColor\\\"></path></svg>\"","module.exports = \"<svg viewBox=\\\"0 0 90 90\\\" fill=\\\"none\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\"><path d=\\\"M88.5 45C88.5 69.0244 69.0244 88.5 45 88.5C20.9756 88.5 1.5 69.0244 1.5 45C1.5 20.9756 20.9756 1.5 45 1.5C69.0244 1.5 88.5 20.9756 88.5 45Z\\\" fill=\\\"currentColor\\\" stroke=\\\"white\\\" stroke-width=\\\"3\\\"></path><path opacity=\\\"0.995697\\\" d=\\\"M14 4.5H31C36.2467 4.5 40.5 8.75329 40.5 14C40.5 19.2467 36.2467 23.5 31 23.5H14C8.75329 23.5 4.5 19.2467 4.5 14C4.5 8.75329 8.75329 4.5 14 4.5Z\\\" transform=\\\"translate(22 32)\\\" fill=\\\"currentColor\\\" fill-opacity=\\\"0.01\\\" stroke=\\\"white\\\" stroke-width=\\\"9\\\"></path></svg>\"","module.exports = \"<svg viewBox=\\\"0 0 70 70\\\" fill=\\\"none\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\"><path fill-rule=\\\"evenodd\\\" clip-rule=\\\"evenodd\\\" d=\\\"M36.9396 28.0771L36.9407 28.0791L42.6084 23.8706L36.9396 28.0771ZM46.1453 21.2459L46.2056 21.2012C44.9645 13.4303 37.2392 10.5728 32.3743 12.3211C29.6618 13.2959 27.4228 15.8722 27.7725 19.6208C28.5866 19.9334 29.4993 20.3901 30.4405 20.988C29.7485 20.5556 29.02 20.1659 28.2565 19.8237C28.2326 19.8128 28.2068 19.8013 28.1798 19.7896L28.136 19.7706L28.0937 19.7526C27.9853 19.7068 27.8689 19.6597 27.7781 19.623L28.9614 31.0567L28.9592 31.0566L27.7733 19.6278C20.4643 16.8238 13.9753 21.995 13.0476 27.1085C12.5303 29.9594 13.7032 33.2419 17.1044 34.8115C17.1982 34.7357 17.2955 34.6596 17.3959 34.5834C17.2963 34.6596 17.1885 34.7455 17.1049 34.8122L27.5308 39.4958L17.1057 34.8158C11.0378 39.7828 12.272 48.063 16.2093 51.4281C18.4026 53.3028 21.7772 53.8141 24.8267 51.6413C24.8271 51.6437 24.8274 51.646 24.8278 51.6483C26.0717 59.4153 33.7589 62.5507 38.6227 60.8028C41.3351 59.828 43.5405 57.1432 43.1908 53.3947L43.1887 53.3938L42.0629 41.9876C42.8049 42.023 43.5494 42.0128 44.2918 41.9565C43.5693 42.013 42.8273 42.0263 42.0704 41.9884L43.1917 53.3903C50.5007 56.1943 57.0086 51.0182 57.9363 45.9048C58.4531 43.0563 57.261 39.8491 53.8666 38.2781L53.8726 38.2733L53.8813 38.2772C59.9492 33.3103 58.733 25.03 54.7957 21.6649C52.6011 19.7892 49.2551 19.0298 46.2043 21.2065L46.204 21.2049L46.1453 21.2459ZM24.7381 50.8659C24.6885 50.2898 24.6664 49.7171 24.6708 49.1492C24.6627 49.7549 24.6868 50.3301 24.7381 50.8659ZM26.4947 41.3573C26.7594 40.8103 27.0509 40.2765 27.3679 39.7576C27.0437 40.2833 26.7535 40.8179 26.4947 41.3573ZM35.899 47.811C35.2143 46.9425 34.5955 45.9912 34.0836 44.9638L34.0848 44.9629C34.6027 45.966 35.2091 46.9197 35.899 47.811ZM42.77 53.2217L42.8006 53.2352L42.838 53.2515C42.3392 53.0395 41.811 52.7758 41.2672 52.4623C41.7518 52.7362 42.2529 52.9898 42.77 53.2217ZM53.4572 38.5906C52.3548 39.3893 51.1917 40.0449 49.9897 40.5607C51.3569 39.983 52.5339 39.2898 53.4572 38.5906ZM46.1688 26.3694L46.1608 26.4207L46.1521 26.476C46.2432 25.8756 46.3047 25.2674 46.3351 24.6529C46.3103 25.2118 46.2582 25.786 46.1688 26.3694ZM46.2315 21.5027C46.252 21.7142 46.2709 21.9316 46.2875 22.1546C46.2786 22.0527 46.2688 21.9506 46.2582 21.8485C46.2556 21.8247 46.253 21.7961 46.2504 21.7643L46.2478 21.7306L46.243 21.6663L46.2363 21.5711L46.2315 21.5027ZM36.7446 27.7097C36.2049 26.7199 35.5771 25.7805 34.8671 24.9054C35.5604 25.7504 36.1988 26.6857 36.7446 27.7097ZM28.5085 31.0408C27.3591 31.0152 26.205 31.0989 25.0634 31.2945C26.1819 31.0909 27.3412 30.9931 28.5085 31.0408ZM18.1473 34.0527C18.0911 34.0902 18.0351 34.128 17.9792 34.1662C17.9387 34.1939 17.8983 34.2218 17.858 34.2498C17.7852 34.3004 17.7128 34.3516 17.6405 34.4034C17.5975 34.4343 17.5545 34.4654 17.5117 34.4967L17.5087 34.4989C17.7096 34.35 17.9229 34.2008 18.1473 34.0527Z\\\" fill=\\\"url(#paint0_radial)\\\"></path><path opacity=\\\"0.65\\\" fill-rule=\\\"evenodd\\\" clip-rule=\\\"evenodd\\\" d=\\\"M28.9603 31.0463L27.7733 19.6074C20.4643 16.8034 13.9753 21.9747 13.0476 27.0881C12.5303 29.939 13.7032 33.2215 17.1044 34.7911C19.5285 32.8327 24.2134 30.6976 28.9603 31.0463Z\\\" fill=\\\"url(#paint1_radial)\\\"></path><path opacity=\\\"0.65\\\" fill-rule=\\\"evenodd\\\" clip-rule=\\\"evenodd\\\" d=\\\"M27.532 39.4763L17.1056 34.7954C11.0378 39.7623 12.272 48.0426 16.2093 51.4077C18.4045 53.2839 21.7828 53.7945 24.8343 51.6155C24.3519 48.5236 24.8343 43.6784 27.532 39.4763Z\\\" fill=\\\"url(#paint2_radial)\\\"></path><path opacity=\\\"0.65\\\" fill-rule=\\\"evenodd\\\" clip-rule=\\\"evenodd\\\" d=\\\"M34.0831 44.9423L24.8273 51.6222C26.0684 59.3932 33.7578 62.5307 38.6228 60.7824C41.3352 59.8076 43.5405 57.1228 43.1909 53.3743C40.3075 52.2601 36.2428 49.2778 34.0831 44.9423Z\\\" fill=\\\"url(#paint3_radial)\\\"></path><path opacity=\\\"0.65\\\" fill-rule=\\\"evenodd\\\" clip-rule=\\\"evenodd\\\" d=\\\"M42.0704 41.968L43.1917 53.3699C50.5007 56.1739 57.0086 50.9978 57.9363 45.8844C58.4536 43.0334 57.259 39.8232 53.8578 38.2536C51.5074 40.1955 47.1197 42.221 42.0704 41.968Z\\\" fill=\\\"url(#paint4_radial)\\\"></path><path opacity=\\\"0.65\\\" fill-rule=\\\"evenodd\\\" clip-rule=\\\"evenodd\\\" d=\\\"M43.4933 33.5267L53.8813 38.2568C59.9492 33.2899 58.733 25.0096 54.7957 21.6445C52.6005 19.7683 49.2533 19.0089 46.2018 21.1879C46.3564 22.6597 46.4588 24.4579 46.1687 26.349C45.8099 28.6889 44.997 31.1531 43.4933 33.5267Z\\\" fill=\\\"url(#paint5_radial)\\\"></path><path opacity=\\\"0.65\\\" fill-rule=\\\"evenodd\\\" clip-rule=\\\"evenodd\\\" d=\\\"M36.9358 28.0596L46.2056 21.1809C44.9645 13.4099 37.2392 10.5524 32.3742 12.3008C29.6618 13.2755 27.4228 15.8519 27.7725 19.6004C30.6226 20.6949 34.6806 23.5543 36.9358 28.0596Z\\\" fill=\\\"url(#paint6_radial)\\\"></path><defs><radialGradient id=\\\"paint0_radial\\\" cx=\\\"0\\\" cy=\\\"0\\\" r=\\\"1\\\" gradientUnits=\\\"userSpaceOnUse\\\" gradientTransform=\\\"translate(17.6669 15.2447) rotate(53.2605) scale(49.8783 48.801)\\\"><stop stop-color=\\\"#F5F5F5\\\"></stop><stop offset=\\\"0.412807\\\" stop-color=\\\"#ff3464\\\"></stop><stop offset=\\\"1\\\" stop-color=\\\"#DBDBDB\\\"></stop></radialGradient><radialGradient id=\\\"paint1_radial\\\" cx=\\\"0\\\" cy=\\\"0\\\" r=\\\"1\\\" gradientUnits=\\\"userSpaceOnUse\\\" gradientTransform=\\\"translate(19.3019 36.2829) rotate(-103.017) scale(10.8394 10.8734)\\\"><stop stop-color=\\\"$ff3464\\\"></stop><stop offset=\\\"1\\\" stop-color=\\\"#ff3464\\\" stop-opacity=\\\"0.01\\\"></stop></radialGradient><radialGradient id=\\\"paint2_radial\\\" cx=\\\"0\\\" cy=\\\"0\\\" r=\\\"1\\\" gradientUnits=\\\"userSpaceOnUse\\\" gradientTransform=\\\"translate(27.1801 50.5029) rotate(-163.042) scale(10.7545 10.9388)\\\"><stop stop-color=\\\"#ff3464\\\"></stop><stop offset=\\\"1\\\" stop-color=\\\"#ff3464\\\" stop-opacity=\\\"0.01\\\"></stop></radialGradient><radialGradient id=\\\"paint3_radial\\\" cx=\\\"0\\\" cy=\\\"0\\\" r=\\\"1\\\" gradientUnits=\\\"userSpaceOnUse\\\" gradientTransform=\\\"translate(43.3906 50.7488) rotate(136.694) scale(10.7723 10.8964)\\\"><stop stop-color=\\\"#ff3464\\\"></stop><stop offset=\\\"1\\\" stop-color=\\\"#ff3464\\\" stop-opacity=\\\"0.01\\\"></stop></radialGradient><radialGradient id=\\\"paint4_radial\\\" cx=\\\"0\\\" cy=\\\"0\\\" r=\\\"1\\\" gradientUnits=\\\"userSpaceOnUse\\\" gradientTransform=\\\"translate(51.6998 36.7682) rotate(76.9667) scale(10.7941 10.8401)\\\"><stop stop-color=\\\"#ff3464\\\"></stop><stop offset=\\\"1\\\" stop-color=\\\"#ff3464\\\" stop-opacity=\\\"0.01\\\"></stop></radialGradient><radialGradient id=\\\"paint5_radial\\\" cx=\\\"0\\\" cy=\\\"0\\\" r=\\\"1\\\" gradientUnits=\\\"userSpaceOnUse\\\" gradientTransform=\\\"translate(43.7493 22.4711) rotate(17.0544) scale(10.8065 10.917)\\\"><stop stop-color=\\\"#ff3464\\\"></stop><stop offset=\\\"1\\\" stop-color=\\\"#ff3464\\\" stop-opacity=\\\"0.01\\\"></stop></radialGradient><radialGradient id=\\\"paint6_radial\\\" cx=\\\"0\\\" cy=\\\"0\\\" r=\\\"1\\\" gradientUnits=\\\"userSpaceOnUse\\\" gradientTransform=\\\"translate(27.6037 22.3039) rotate(-43.1622) scale(10.8536 10.8674)\\\"><stop stop-color=\\\"#ff3464\\\"></stop><stop offset=\\\"1\\\" stop-color=\\\"#ff3464\\\" stop-opacity=\\\"0.01\\\"></stop></radialGradient></defs></svg>\"","// extracted by mini-css-extract-plugin\nmodule.exports = {\"avatar-url-dialog\":\"avatar-url-dialog__avatar-url-dialog__17OoD\",\"avatarUrlDialog\":\"avatar-url-dialog__avatar-url-dialog__17OoD\"};","module.exports = __webpack_public_path__ + \"assets/images/link_dialog_header-b15568ca2056d8be7a58c359e6a9ca51.svg\";","// extracted by mini-css-extract-plugin\nmodule.exports = {\"form-frame\":\"feedback-dialog__form-frame__1gfk_\",\"formFrame\":\"feedback-dialog__form-frame__1gfk_\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"leave-room\":\"leave-room-dialog__leave-room__31Jf7\",\"leaveRoom\":\"leave-room-dialog__leave-room__31Jf7\"};","module.exports = \"<svg viewBox=\\\"0 0 64 64\\\" fill=\\\"none\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\" class=\\\"svg-icon\\\"><path fill-rule=\\\"evenodd\\\" clip-rule=\\\"evenodd\\\" d=\\\"M37.681 23.5792C36.9 22.7981 35.6337 22.7981 34.8526 23.5792L28.061 30.3708L33.6796 35.9893L40.4712 29.1977C41.2522 28.4167 41.2522 27.1503 40.4712 26.3693L37.681 23.5792ZM32.1187 37.5501L26.5002 31.9316L6.46454 51.9672C5.68349 52.7483 5.68349 54.0146 6.46454 54.7957L9.25466 57.5858C10.0357 58.3668 11.302 58.3668 12.0831 57.5858L32.1187 37.5501Z\\\" fill=\\\"currentColor\\\"></path><path d=\\\"M27.2783 2.46352C27.4279 2.00287 28.0797 2.00287 28.2293 2.46353L29.9356 7.71476C30.0025 7.92078 30.1945 8.06026 30.4111 8.06026L35.9326 8.06026C36.4169 8.06026 36.6183 8.68006 36.2265 8.96476L31.7595 12.2102C31.5842 12.3375 31.5109 12.5632 31.5779 12.7692L33.2841 18.0205C33.4338 18.4811 32.9065 18.8642 32.5147 18.5795L28.0477 15.334C27.8724 15.2067 27.6352 15.2067 27.4599 15.334L22.9929 18.5795C22.6011 18.8642 22.0738 18.4811 22.2235 18.0205L23.9297 12.7692C23.9967 12.5632 23.9234 12.3375 23.7481 12.2102L19.2811 8.96476C18.8893 8.68006 19.0907 8.06026 19.575 8.06026L25.0965 8.06026C25.3131 8.06026 25.5051 7.92078 25.572 7.71476L27.2783 2.46352Z\\\" fill=\\\"currentColor\\\"></path><path d=\\\"M48.3949 10.6377C48.5445 10.177 49.1962 10.177 49.3459 10.6377L50.2875 13.5355C50.3544 13.7415 50.5464 13.881 50.763 13.881H53.81C54.2943 13.881 54.4957 14.5008 54.1039 14.7855L51.6388 16.5764C51.4636 16.7038 51.3902 16.9295 51.4572 17.1355L52.3987 20.0333C52.5484 20.4939 52.0212 20.877 51.6293 20.5923L49.1643 18.8013C48.989 18.674 48.7517 18.674 48.5765 18.8013L46.1115 20.5923C45.7196 20.877 45.1924 20.4939 45.342 20.0333L46.2836 17.1355C46.3505 16.9295 46.2772 16.7038 46.102 16.5764L43.6369 14.7855C43.2451 14.5008 43.4465 13.881 43.9308 13.881H46.9778C47.1944 13.881 47.3864 13.7415 47.4533 13.5355L48.3949 10.6377Z\\\" fill=\\\"currentColor\\\"></path><path d=\\\"M49.7572 31.0731C49.9069 30.6124 50.5586 30.6124 50.7083 31.0731L51.9557 34.9123C52.0226 35.1183 52.2146 35.2577 52.4312 35.2577H56.468C56.9524 35.2577 57.1537 35.8776 56.7619 36.1623L53.4961 38.535C53.3208 38.6623 53.2475 38.888 53.3144 39.094L54.5619 42.9332C54.7116 43.3939 54.1843 43.7769 53.7925 43.4922L50.5266 41.1195C50.3514 40.9922 50.1141 40.9922 49.9389 41.1195L46.6731 43.4922C46.2812 43.7769 45.754 43.3939 45.9036 42.9332L47.1511 39.094C47.218 38.888 47.1447 38.6623 46.9694 38.535L43.7036 36.1623C43.3118 35.8776 43.5131 35.2577 43.9975 35.2577H48.0343C48.2509 35.2577 48.4429 35.1183 48.5098 34.9123L49.7572 31.0731Z\\\" fill=\\\"currentColor\\\"></path></svg>\"","module.exports = \"<svg id=\\\"Layer_1\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\" viewBox=\\\"0 0 245 240\\\"><style>.st0{fill:currentColor;}</style><path class=\\\"st0\\\" d=\\\"M104.4 103.9c-5.7 0-10.2 5-10.2 11.1s4.6 11.1 10.2 11.1c5.7 0 10.2-5 10.2-11.1.1-6.1-4.5-11.1-10.2-11.1zM140.9 103.9c-5.7 0-10.2 5-10.2 11.1s4.6 11.1 10.2 11.1c5.7 0 10.2-5 10.2-11.1s-4.5-11.1-10.2-11.1z\\\"></path><path class=\\\"st0\\\" d=\\\"M189.5 20h-134C44.2 20 35 29.2 35 40.6v135.2c0 11.4 9.2 20.6 20.5 20.6h113.4l-5.3-18.5 12.8 11.9 12.1 11.2 21.5 19V40.6c0-11.4-9.2-20.6-20.5-20.6zm-38.6 130.6s-3.6-4.3-6.6-8.1c13.1-3.7 18.1-11.9 18.1-11.9-4.1 2.7-8 4.6-11.5 5.9-5 2.1-9.8 3.5-14.5 4.3-9.6 1.8-18.4 1.3-25.9-.1-5.7-1.1-10.6-2.7-14.7-4.3-2.3-.9-4.8-2-7.3-3.4-.3-.2-.6-.3-.9-.5-.2-.1-.3-.2-.4-.3-1.8-1-2.8-1.7-2.8-1.7s4.8 8 17.5 11.8c-3 3.8-6.7 8.3-6.7 8.3-22.1-.7-30.5-15.2-30.5-15.2 0-32.2 14.4-58.3 14.4-58.3 14.4-10.8 28.1-10.5 28.1-10.5l1 1.2c-18 5.2-26.3 13.1-26.3 13.1s2.2-1.2 5.9-2.9c10.7-4.7 19.2-6 22.7-6.3.6-.1 1.1-.2 1.7-.2 6.1-.8 13-1 20.2-.2 9.5 1.1 19.7 3.9 30.1 9.6 0 0-7.9-7.5-24.9-12.7l1.4-1.6s13.7-.3 28.1 10.5c0 0 14.4 26.1 14.4 58.3 0 0-8.5 14.5-30.6 15.2z\\\"></path></svg>\"","module.exports = \"<svg viewBox=\\\"0 0 32 32\\\" fill=\\\"currentColor\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\" class=\\\"svg-icon\\\"><g id=\\\"device icon\\\"><path id=\\\"Vector 2\\\" d=\\\"M37.5 12C39.2921 12.2907 42.9409 13.0468 43.9308 13.5486C43.5236 1.76734 37.0468 -0.180441 33.5 2C37.7222 3.12137 37.6018 9.45614 37.5 12Z\\\" fill=\\\"#C4C4C4\\\"></path><path id=\\\"Vector 2.1\\\" d=\\\"M37.5 12C39.2921 12.2907 42.9409 13.0468 43.9308 13.5486C43.5236 1.76734 37.0468 -0.180441 33.5 2C37.7222 3.12137 37.6018 9.45614 37.5 12Z\\\" fill=\\\"#EFEFEF\\\"></path><g id=\\\"Subtract\\\"><path fill-rule=\\\"evenodd\\\" clip-rule=\\\"evenodd\\\" d=\\\"M27.5209 16.7286C28.8705 16.9007 30.167 16.1431 30.6795 14.8828C31.2166 13.5623 31.744 12.3973 32.2569 11.3735C33.4626 11.4107 34.5557 11.45 35.5 11.5C40.6072 11.7706 43.9609 13.2812 46.0424 15.3205C44.6124 15.9529 42.8928 16.8012 41.241 17.6476C39.5412 18.5184 37.8927 19.3977 36.6705 20.0585C36.059 20.3892 35.5532 20.6656 35.2001 20.8596C35.0234 20.9566 34.8849 21.033 34.7903 21.0853L34.644 21.1663C34.1086 21.4638 33.8079 22.057 33.8844 22.6648L33.8935 31.1305C33.9531 31.6039 34.2344 32.0208 34.6512 32.2532C35.0731 32.4938 35.5692 32.4314 36.0506 32.2866L36.1806 32.2269C36.294 32.1746 36.4598 32.098 36.6704 32C36.9037 31.8914 37.1922 31.7565 37.5258 31.5992C37.7946 31.4724 38.0927 31.3311 38.4147 31.1773L38.6575 31.0614C40.1664 30.3413 42.8905 29.0412 44.7287 28.0867C45.9328 27.4615 47.1537 26.8042 48.2714 26.1612C47.8862 27.1642 47.3632 28.0057 46.77 28.5856L29.5 38C28.0825 36.957 28.5674 36.3965 29.432 35.3968C30.97 33.6185 33.7096 30.4509 29.0818 20.7075C23.4626 16.2822 10.8481 16.1996 5.46832 16.1644C3.72919 16.153 2.74615 16.1466 3 16C4.71545 15.0093 15.9421 11.8416 19.6582 10.9238C19.5714 11.1113 19.4879 11.2913 19.4076 11.463C19.3668 11.5502 19.3269 11.6352 19.2878 11.7179C18.8773 12.5863 18.9074 13.5989 19.369 14.4414C19.8304 15.2838 20.6675 15.8543 21.6204 15.9759L27.5209 16.7286Z\\\" fill=\\\"currentColor\\\"></path><path d=\\\"M30.6795 14.8828L30.2163 14.6945L30.2163 14.6945L30.6795 14.8828ZM27.5209 16.7286L27.5842 16.2326L27.5842 16.2326L27.5209 16.7286ZM32.2569 11.3735L32.2723 10.8738L31.953 10.8639L31.8099 11.1496L32.2569 11.3735ZM35.5 11.5L35.5265 11.0007L35.5265 11.0007L35.5 11.5ZM46.0424 15.3205L46.2447 15.7778L46.9192 15.4795L46.3923 14.9633L46.0424 15.3205ZM41.241 17.6476L41.469 18.0925L41.469 18.0925L41.241 17.6476ZM36.6705 20.0585L36.4327 19.6187L36.4327 19.6187L36.6705 20.0585ZM35.2001 20.8596L35.4407 21.2979L35.4408 21.2978L35.2001 20.8596ZM34.7903 21.0853L34.5485 20.6477L34.548 20.6479L34.7903 21.0853ZM34.644 21.1663L34.4018 20.7289L34.4012 20.7292L34.644 21.1663ZM33.8844 22.6648L34.3844 22.6643L34.3844 22.6332L34.3805 22.6023L33.8844 22.6648ZM33.8935 31.1305L33.3935 31.131L33.3935 31.1621L33.3974 31.193L33.8935 31.1305ZM34.6512 32.2532L34.8989 31.8188L34.8947 31.8165L34.6512 32.2532ZM36.0506 32.2866L36.1945 32.7655L36.2278 32.7555L36.2594 32.7409L36.0506 32.2866ZM36.1806 32.2269L36.3894 32.6812L36.3898 32.681L36.1806 32.2269ZM36.6704 32L36.8814 32.4533L36.8814 32.4533L36.6704 32ZM37.5258 31.5992L37.7391 32.0514L37.7391 32.0514L37.5258 31.5992ZM38.4147 31.1773L38.1994 30.7261L38.1993 30.7261L38.4147 31.1773ZM38.6575 31.0614L38.4422 30.6102L38.4422 30.6102L38.6575 31.0614ZM44.7287 28.0867L44.4983 27.643L44.4983 27.643L44.7287 28.0867ZM48.2714 26.1612L48.7381 26.3405L49.2432 25.0252L48.022 25.7278L48.2714 26.1612ZM46.77 28.5856L47.0093 29.0246L47.0701 28.9915L47.1196 28.9431L46.77 28.5856ZM29.5 38L29.2037 38.4027L29.46 38.5913L29.7393 38.439L29.5 38ZM29.432 35.3968L29.8102 35.7238V35.7238L29.432 35.3968ZM29.0818 20.7075L29.5335 20.493L29.4832 20.3872L29.3912 20.3147L29.0818 20.7075ZM5.46832 16.1644L5.46505 16.6644H5.46505L5.46832 16.1644ZM3 16L2.74994 15.567L2.74994 15.567L3 16ZM19.6582 10.9238L20.1119 11.1338L20.5495 10.1886L19.5383 10.4383L19.6582 10.9238ZM19.4076 11.463L19.8605 11.6748L19.8605 11.6748L19.4076 11.463ZM19.2878 11.7179L18.8358 11.5041L18.8357 11.5042L19.2878 11.7179ZM19.369 14.4414L19.8075 14.2011L19.8075 14.2011L19.369 14.4414ZM21.6204 15.9759L21.6837 15.4799L21.6204 15.9759ZM30.2163 14.6945C29.7892 15.7447 28.7088 16.3761 27.5842 16.2326L27.4577 17.2246C29.0321 17.4254 30.5447 16.5416 31.1427 15.0712L30.2163 14.6945ZM31.8099 11.1496C31.2905 12.1863 30.7577 13.3633 30.2163 14.6945L31.1427 15.0712C31.6754 13.7614 32.1975 12.6083 32.7039 11.5975L31.8099 11.1496ZM35.5265 11.0007C34.5764 10.9504 33.4789 10.911 32.2723 10.8738L32.2415 11.8733C33.4464 11.9104 34.5349 11.9496 35.4735 11.9993L35.5265 11.0007ZM46.3923 14.9633C44.2011 12.8166 40.7191 11.2759 35.5265 11.0007L35.4735 11.9993C40.4953 12.2654 43.7206 13.7459 45.6925 15.6777L46.3923 14.9633ZM41.469 18.0925C43.1179 17.2477 44.8276 16.4045 46.2447 15.7778L45.8402 14.8632C44.3972 15.5014 42.6677 16.3548 41.013 17.2026L41.469 18.0925ZM36.9083 20.4984C38.1286 19.8386 39.7736 18.9611 41.469 18.0925L41.013 17.2026C39.3088 18.0757 37.6568 18.9569 36.4327 19.6187L36.9083 20.4984ZM35.4408 21.2978C35.7931 21.1043 36.2979 20.8284 36.9083 20.4984L36.4327 19.6187C35.8201 19.95 35.3134 20.2269 34.9594 20.4213L35.4408 21.2978ZM35.0321 21.5229C35.1264 21.4708 35.2645 21.3946 35.4407 21.2979L34.9594 20.4213C34.7823 20.5186 34.6434 20.5952 34.5485 20.6477L35.0321 21.5229ZM34.8863 21.6037L35.0325 21.5227L34.548 20.6479L34.4018 20.7289L34.8863 21.6037ZM34.3805 22.6023C34.3295 22.1972 34.5299 21.8017 34.8869 21.6033L34.4012 20.7292C33.6872 21.1259 33.2863 21.9169 33.3883 22.7273L34.3805 22.6023ZM34.3935 31.1299L34.3844 22.6643L33.3844 22.6653L33.3935 31.131L34.3935 31.1299ZM34.8947 31.8165C34.6169 31.6615 34.4293 31.3836 34.3896 31.068L33.3974 31.193C33.4769 31.8242 33.852 32.38 34.4077 32.6898L34.8947 31.8165ZM35.9067 31.8078C35.454 31.9439 35.1332 31.9525 34.8989 31.8188L34.4034 32.6875C35.0129 33.0351 35.6843 32.9188 36.1945 32.7655L35.9067 31.8078ZM35.9718 31.7726L35.8418 31.8323L36.2594 32.7409L36.3894 32.6812L35.9718 31.7726ZM36.4594 31.5467C36.2495 31.6444 36.0843 31.7207 35.9714 31.7728L36.3898 32.681C36.5037 32.6285 36.6701 32.5516 36.8814 32.4533L36.4594 31.5467ZM37.3125 31.1469C36.9798 31.3039 36.692 31.4384 36.4594 31.5467L36.8814 32.4533C37.1153 32.3444 37.4046 32.2091 37.7391 32.0514L37.3125 31.1469ZM38.1993 30.7261C37.878 30.8795 37.5806 31.0205 37.3125 31.1469L37.7391 32.0514C38.0085 31.9243 38.3073 31.7827 38.6302 31.6285L38.1993 30.7261ZM38.4422 30.6102L38.1994 30.7261L38.6301 31.6286L38.8729 31.5127L38.4422 30.6102ZM44.4983 27.643C42.6691 28.5928 39.9535 29.8889 38.4422 30.6102L38.8729 31.5127C40.3793 30.7937 43.1119 29.4897 44.9591 28.5305L44.4983 27.643ZM48.022 25.7278C46.9126 26.3661 45.6984 27.0198 44.4983 27.643L44.9591 28.5305C46.1672 27.9031 47.3949 27.2423 48.5207 26.5946L48.022 25.7278ZM47.1196 28.9431C47.7765 28.3009 48.3341 27.3925 48.7381 26.3405L47.8046 25.982C47.4382 26.9359 46.95 27.7104 46.4205 28.2281L47.1196 28.9431ZM29.7393 38.439L47.0093 29.0246L46.5307 28.1466L29.2607 37.561L29.7393 38.439ZM29.0538 35.0697C28.843 35.3134 28.6308 35.5579 28.4674 35.7941C28.3039 36.0304 28.1557 36.3043 28.1145 36.6168C28.0235 37.3074 28.4737 37.8656 29.2037 38.4027L29.7963 37.5973C29.1089 37.0914 29.0927 36.8479 29.1059 36.7475C29.1169 36.6645 29.1634 36.5457 29.2897 36.3631C29.4161 36.1804 29.5887 35.9799 29.8102 35.7238L29.0538 35.0697ZM28.6302 20.922C30.9222 25.7476 31.3544 28.8735 31.0735 30.9728C30.7952 33.0523 29.8106 34.1947 29.0538 35.0697L29.8102 35.7238C30.5914 34.8206 31.7455 33.4901 32.0647 31.1054C32.3811 28.7404 31.8693 25.4108 29.5335 20.493L28.6302 20.922ZM5.46505 16.6644C8.15636 16.682 12.627 16.7117 17.122 17.2857C21.6411 17.8627 26.0783 18.9786 28.7725 21.1003L29.3912 20.3147C26.4662 18.0111 21.7865 16.8731 17.2486 16.2937C12.6865 15.7112 8.16005 15.682 5.47159 15.6644L5.46505 16.6644ZM2.74994 15.567C2.71449 15.5875 2.63778 15.6347 2.57251 15.7184C2.4953 15.8174 2.40557 16.0157 2.50093 16.2425C2.57364 16.4154 2.71294 16.4913 2.7561 16.5134C2.81543 16.5439 2.87237 16.5607 2.91009 16.5703C3.05002 16.6061 3.25286 16.622 3.46207 16.6323C3.90703 16.6543 4.60126 16.6588 5.46505 16.6644L5.4716 15.6644C4.59625 15.6587 3.9294 15.6542 3.51152 15.6335C3.40834 15.6284 3.32552 15.6226 3.26166 15.616C3.22991 15.6128 3.20507 15.6096 3.18627 15.6067C3.177 15.6053 3.16997 15.604 3.16491 15.603C3.15975 15.602 3.15762 15.6015 3.15795 15.6015C3.15808 15.6016 3.16273 15.6028 3.17068 15.6055C3.17813 15.6081 3.19331 15.6138 3.21289 15.6239C3.23191 15.6336 3.35604 15.6962 3.42276 15.8549C3.51215 16.0675 3.42563 16.2506 3.36106 16.3334C3.30842 16.4009 3.25378 16.4308 3.25006 16.433L2.74994 15.567ZM19.5383 10.4383C17.6705 10.8997 13.9271 11.9233 10.4371 12.955C8.69171 13.4711 7.00533 13.9904 5.64585 14.4436C4.3085 14.8894 3.23173 15.2888 2.74994 15.567L3.25006 16.433C3.62599 16.2159 4.59586 15.8477 5.9621 15.3923C7.30623 14.9442 8.98043 14.4285 10.7206 13.914C14.2019 12.8848 17.9298 11.8657 19.7781 11.4092L19.5383 10.4383ZM19.8605 11.6748C19.9412 11.5022 20.0251 11.3215 20.1119 11.1338L19.2045 10.7137C19.1178 10.901 19.0345 11.0804 18.9547 11.2512L19.8605 11.6748ZM19.7398 11.9317C19.7793 11.8481 19.8195 11.7624 19.8605 11.6748L18.9547 11.2512C18.9141 11.3379 18.8745 11.4223 18.8358 11.5041L19.7398 11.9317ZM19.8075 14.2011C19.4228 13.4991 19.3977 12.6553 19.7398 11.9316L18.8357 11.5042C18.3568 12.5174 18.392 13.6987 18.9305 14.6816L19.8075 14.2011ZM21.6837 15.4799C20.8896 15.3786 20.192 14.9032 19.8075 14.2011L18.9304 14.6816C19.4689 15.6645 20.4455 16.3301 21.5572 16.4719L21.6837 15.4799ZM27.5842 16.2326L21.6837 15.4799L21.5572 16.4719L27.4577 17.2246L27.5842 16.2326Z\\\" fill=\\\"currentColor\\\"></path></g><path id=\\\"Vector 2_2\\\" d=\\\"M22 13L27.9005 13.7527C35.7204 -5.47592 43.5914 1.80677 44.1005 14.3013C44.0496 6.10544 41.4074 -0.0498744 33.7029 0.000304595C27.5393 0.0404478 24.1269 8.50061 22 13Z\\\" fill=\\\"currentColor\\\"></path><path id=\\\"Vector\\\" d=\\\"M30.0146 35.5184C30.6209 34.4891 31.0856 32.6318 31.0919 29.3392C30.6547 23.0315 29.594 21.1437 28.0037 20.1879C27.075 19.6298 25.7496 19.2525 23.6724 18.9311C22.4151 18.7366 21.0244 18.5798 19.4032 18.3969C18.3173 18.2744 17.1281 18.1402 15.8062 17.9753C14.4882 17.8108 13.3113 17.65 12.2415 17.5038C10.7839 17.3046 9.52502 17.1325 8.3785 17.0155C6.3889 16.8124 5.1769 16.8342 4.37736 17.0632C3.75934 17.2402 3.34932 17.5441 2.9782 18.3246C2.54305 19.2397 2.20891 20.7381 2.00005 23.2152C2.01122 29.3363 3.26876 31.3737 4.77762 32.3943C5.64876 32.9836 6.81469 33.386 8.46877 33.7555C9.28645 33.9381 10.1726 34.1028 11.1646 34.2866L11.1946 34.2922C12.1523 34.4696 13.1959 34.663 14.2995 34.8984C16.2798 35.2154 18.1882 35.6107 19.9036 35.966C20.7256 36.1363 21.5034 36.2974 22.2235 36.4363C24.575 36.8898 26.3227 37.1091 27.6414 36.9478C28.8125 36.8045 29.5026 36.3874 30.0146 35.5184Z\\\" stroke=\\\"currentColor\\\" stroke-width=\\\"4\\\"></path><path id=\\\"Vector 3\\\" d=\\\"M36.6921 29L36.6921 23.1034C40.7408 21.1901 45.2593 18.8099 48 17.5C49.86 16.611 51.371 17.3214 51.7408 19.1901C52 20.5 51.1543 21.8739 50 22.5C48.8457 23.1261 36.6921 29 36.6921 29Z\\\" fill=\\\"currentColor\\\"></path></g></svg>\"","// extracted by mini-css-extract-plugin\nmodule.exports = {\"avatar-editor\":\"avatar-editor__avatar-editor__xtJ6P\",\"avatarEditor\":\"avatar-editor__avatar-editor__xtJ6P\"};","module.exports = __webpack_public_path__ + \"assets/images/mic_level-d197b930a4350dc80adb2446babb05e1.png\";","module.exports = __webpack_public_path__ + \"assets/images/mic_level@2x-9d49309c2f0e55e5c54193237658768b.png\";","module.exports = __webpack_public_path__ + \"assets/images/speaker_level-9567a1a6f33d4d0e59e57903b08369c9.png\";","module.exports = __webpack_public_path__ + \"assets/images/speaker_level@2x-b5e6a12f613576cf5c1a1b96e8c9d8d0.png\";","module.exports = __webpack_public_path__ + \"assets/sfx/tone-624e72d19fe0cea1b85ca174cb6be256.webm\";","module.exports = __webpack_public_path__ + \"assets/sfx/tone-3fa0defb5172b2533fedcc1929605799.mp3\";","module.exports = __webpack_public_path__ + \"assets/sfx/tone-78ae5a60f0e336f384919eee9f5a2e18.ogg\";","module.exports = __webpack_public_path__ + \"assets/sfx/tone-4604a4c98f36f3e0c6980295bc5c7ffe.wav\";","module.exports = \"<svg viewBox=\\\"0 0 31 31\\\" fill=\\\"none\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\"><circle cx=\\\"15.5\\\" cy=\\\"15.5\\\" r=\\\"14.5\\\" fill=\\\"currentColor\\\" stroke=\\\"white\\\" stroke-width=\\\"2\\\" stroke-miterlimit=\\\"3.8637\\\"></circle><path fill-rule=\\\"evenodd\\\" clip-rule=\\\"evenodd\\\" d=\\\"M18.3345 12.9125C17.944 12.522 17.3108 12.522 16.9203 12.9125L14.8338 14.999L16.7466 16.9118L18.8331 14.8253C19.2236 14.4348 19.2236 13.8016 18.8331 13.4111L18.3345 12.9125ZM16.2152 17.4432L14.3024 15.5304L7.70711 22.1257C7.31658 22.5162 7.31658 23.1494 7.70711 23.5399L8.20568 24.0385C8.59621 24.429 9.22937 24.429 9.6199 24.0385L16.2152 17.4432Z\\\" fill=\\\"white\\\"></path><path d=\\\"M14.539 5.58541C14.5989 5.40115 14.8595 5.40115 14.9194 5.58541L15.4653 7.26541C15.4921 7.34781 15.5688 7.40361 15.6555 7.40361H17.4219C17.6157 7.40361 17.6962 7.65153 17.5395 7.76541L16.1104 8.80371C16.0403 8.85463 16.011 8.94491 16.0378 9.02731L16.5836 10.7073C16.6435 10.8916 16.4326 11.0448 16.2759 10.9309L14.8468 9.89262C14.7767 9.84169 14.6817 9.84169 14.6116 9.89262L13.1826 10.9309C13.0258 11.0448 12.8149 10.8916 12.8748 10.7073L13.4206 9.02731C13.4474 8.94491 13.4181 8.85463 13.348 8.80371L11.9189 7.76541C11.7622 7.65153 11.8427 7.40361 12.0365 7.40361H13.8029C13.8896 7.40361 13.9664 7.34781 13.9931 7.26541L14.539 5.58541Z\\\" fill=\\\"white\\\"></path><path d=\\\"M21.728 8.36823C21.7878 8.18397 22.0485 8.18397 22.1084 8.36823L22.3939 9.24703C22.4207 9.32943 22.4975 9.38523 22.5841 9.38523H23.5081C23.7019 9.38523 23.7824 9.63315 23.6257 9.74703L22.8782 10.2902C22.8081 10.3411 22.7787 10.4314 22.8055 10.5138L23.091 11.3926C23.1509 11.5768 22.94 11.73 22.7833 11.6162L22.0357 11.073C21.9656 11.0221 21.8707 11.0221 21.8006 11.073L21.0531 11.6162C20.8963 11.73 20.6854 11.5768 20.7453 11.3926L21.0308 10.5138C21.0576 10.4314 21.0283 10.3411 20.9582 10.2902L20.2106 9.74703C20.0539 9.63315 20.1344 9.38523 20.3282 9.38523H21.2522C21.3388 9.38523 21.4156 9.32943 21.4424 9.24703L21.728 8.36823Z\\\" fill=\\\"white\\\"></path><path d=\\\"M22.1918 15.3253C22.2516 15.141 22.5123 15.141 22.5722 15.3253L22.9618 16.5246C22.9886 16.607 23.0654 16.6628 23.1521 16.6628H24.4131C24.6068 16.6628 24.6874 16.9107 24.5306 17.0246L23.5104 17.7658C23.4403 17.8167 23.411 17.907 23.4378 17.9894L23.8275 19.1887C23.8873 19.3729 23.6764 19.5261 23.5197 19.4123L22.4995 18.6711C22.4294 18.6201 22.3345 18.6201 22.2644 18.6711L21.2442 19.4123C21.0875 19.5261 20.8766 19.3729 20.9365 19.1887L21.3261 17.9894C21.3529 17.907 21.3236 17.8167 21.2535 17.7658L20.2333 17.0246C20.0766 16.9107 20.1571 16.6628 20.3509 16.6628H21.6119C21.6985 16.6628 21.7753 16.607 21.8021 16.5246L22.1918 15.3253Z\\\" fill=\\\"white\\\"></path></svg>\"","module.exports = \"<svg viewBox=\\\"0 0 33 33\\\" fill=\\\"none\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\"><circle cx=\\\"16.5005\\\" cy=\\\"16.5\\\" r=\\\"14.5\\\" fill=\\\"#404040\\\" stroke=\\\"currentColor\\\" stroke-width=\\\"3\\\" stroke-miterlimit=\\\"3.8637\\\"></circle><rect x=\\\"11.5005\\\" y=\\\"23\\\" width=\\\"10\\\" height=\\\"2\\\" fill=\\\"white\\\"></rect><path fill-rule=\\\"evenodd\\\" clip-rule=\\\"evenodd\\\" d=\\\"M10.5005 9C8.84363 9 7.50049 10.3431 7.50049 12V20C7.50049 21.6569 8.84363 23 10.5005 23H22.5005C24.1573 23 25.5005 21.6569 25.5005 20V12C25.5005 10.3431 24.1573 9 22.5005 9H10.5005ZM11.5005 12C10.9482 12 10.5005 12.4477 10.5005 13V19C10.5005 19.5523 10.9482 20 11.5005 20H21.5005C22.0528 20 22.5005 19.5523 22.5005 19V13C22.5005 12.4477 22.0528 12 21.5005 12H11.5005Z\\\" fill=\\\"white\\\"></path></svg>\"","module.exports = \"<svg viewBox=\\\"0 0 33 33\\\" fill=\\\"none\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\"><circle cx=\\\"16.5005\\\" cy=\\\"16.5\\\" r=\\\"14.5\\\" fill=\\\"#404040\\\" stroke=\\\"black\\\" stroke-opacity=\\\"0.01\\\" stroke-width=\\\"3\\\" stroke-miterlimit=\\\"1\\\"></circle><rect x=\\\"11.5005\\\" y=\\\"23\\\" width=\\\"10\\\" height=\\\"2\\\" fill=\\\"white\\\"></rect><path fill-rule=\\\"evenodd\\\" clip-rule=\\\"evenodd\\\" d=\\\"M10.5005 9C8.84363 9 7.50049 10.3431 7.50049 12V20C7.50049 21.6569 8.84363 23 10.5005 23H22.5005C24.1573 23 25.5005 21.6569 25.5005 20V12C25.5005 10.3431 24.1573 9 22.5005 9H10.5005ZM11.5005 12C10.9482 12 10.5005 12.4477 10.5005 13V19C10.5005 19.5523 10.9482 20 11.5005 20H21.5005C22.0528 20 22.5005 19.5523 22.5005 19V13C22.5005 12.4477 22.0528 12 21.5005 12H11.5005Z\\\" fill=\\\"white\\\"></path></svg>\"","module.exports = \"<svg viewBox=\\\"0 0 33 33\\\" fill=\\\"none\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\"><circle cx=\\\"16.5005\\\" cy=\\\"16.5\\\" r=\\\"14.5\\\" fill=\\\"#404040\\\" stroke=\\\"currentColor\\\" stroke-width=\\\"3\\\" stroke-miterlimit=\\\"3.8637\\\"></circle><rect x=\\\"8.00049\\\" y=\\\"11\\\" width=\\\"14\\\" height=\\\"11\\\" rx=\\\"2\\\" fill=\\\"white\\\"></rect><path fill-rule=\\\"evenodd\\\" clip-rule=\\\"evenodd\\\" d=\\\"M25.8032 12.7057C25.3814 12.5114 24.8337 12.5587 24.4733 12.8475L20.8237 15.7718C20.3927 16.1171 20.3927 16.677 20.8237 17.0224L24.568 20.0225C24.902 20.2901 25.3968 20.3503 25.8032 20.2032V12.7057Z\\\" fill=\\\"white\\\"></path></svg>\"","module.exports = \"<svg viewBox=\\\"0 0 33 33\\\" fill=\\\"none\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\"><circle cx=\\\"16.5005\\\" cy=\\\"16.5\\\" r=\\\"14.5\\\" fill=\\\"#404040\\\" stroke=\\\"black\\\" stroke-opacity=\\\"0.01\\\" stroke-width=\\\"3\\\" stroke-miterlimit=\\\"1\\\"></circle><rect x=\\\"8.00049\\\" y=\\\"11\\\" width=\\\"14\\\" height=\\\"11\\\" rx=\\\"2\\\" fill=\\\"white\\\"></rect><path fill-rule=\\\"evenodd\\\" clip-rule=\\\"evenodd\\\" d=\\\"M25.8032 12.7057C25.3814 12.5114 24.8337 12.5587 24.4733 12.8475L20.8237 15.7718C20.3927 16.1171 20.3927 16.677 20.8237 17.0224L24.568 20.0225C24.902 20.2901 25.3968 20.3503 25.8032 20.2032V12.7057Z\\\" fill=\\\"white\\\"></path></svg>\"","module.exports = \"<svg viewBox=\\\"0 0 33 33\\\" fill=\\\"none\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\"><circle cx=\\\"16.5005\\\" cy=\\\"16.5\\\" r=\\\"14.5\\\" fill=\\\"#404040\\\" stroke=\\\"black\\\" stroke-opacity=\\\"0.01\\\" stroke-width=\\\"3\\\" stroke-miterlimit=\\\"1\\\"></circle><path d=\\\"M8.75049 24H24.2505C24.5266 24 24.7505 24.2239 24.7505 24.5C24.7505 24.7761 24.5266 25 24.2505 25H9.75049C9.1982 25 8.75049 24.5523 8.75049 24Z\\\" fill=\\\"white\\\"></path><path d=\\\"M10.0005 17.9508L14.0005 22L10.1844 23.0407C9.43889 23.2441 8.7543 22.561 8.95595 21.815L10.0005 17.9508ZM24.7934 9.8226C25.1839 10.2131 25.1839 10.8463 24.7934 11.2368L14.5497 21.4805L10.5207 17.4508L20.7637 7.20715C21.1542 6.81661 21.7874 6.8166 22.1779 7.20713L24.7934 9.8226Z\\\" fill=\\\"white\\\"></path></svg>\"","module.exports = \"<svg viewBox=\\\"0 0 33 33\\\" fill=\\\"none\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\"><circle cx=\\\"16.5005\\\" cy=\\\"16.5\\\" r=\\\"14.5\\\" fill=\\\"#404040\\\" stroke=\\\"currentColor\\\" stroke-width=\\\"3\\\" stroke-miterlimit=\\\"3.8637\\\"></circle><path d=\\\"M8.75049 24H24.2505C24.5266 24 24.7505 24.2239 24.7505 24.5C24.7505 24.7761 24.5266 25 24.2505 25H9.75049C9.1982 25 8.75049 24.5523 8.75049 24Z\\\" fill=\\\"white\\\"></path><path d=\\\"M10.0005 17.9508L14.0005 22L10.1844 23.0407C9.43889 23.2441 8.7543 22.561 8.95595 21.815L10.0005 17.9508ZM24.7934 9.8226C25.1839 10.2131 25.1839 10.8463 24.7934 11.2368L14.5497 21.4805L10.5207 17.4508L20.7637 7.20715C21.1542 6.81661 21.7874 6.8166 22.1779 7.20713L24.7934 9.8226Z\\\" fill=\\\"white\\\"></path></svg>\"","module.exports = \"<svg viewBox=\\\"0 0 33 33\\\" fill=\\\"none\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\"><circle cx=\\\"16.5005\\\" cy=\\\"16.5\\\" r=\\\"14.5\\\" fill=\\\"#404040\\\" stroke=\\\"black\\\" stroke-opacity=\\\"0.01\\\" stroke-width=\\\"3\\\" stroke-miterlimit=\\\"1\\\"></circle><path fill-rule=\\\"evenodd\\\" clip-rule=\\\"evenodd\\\" d=\\\"M8.26715 10C7.56759 10 7.00049 10.5698 7.00049 11.2727V22.7273C7.00049 23.4302 7.56759 24 8.26715 24H24.7338C25.4334 24 26.0005 23.4302 26.0005 22.7273V11.2727C26.0005 10.5698 25.4334 10 24.7338 10H8.26715ZM9.13382 11C8.5079 11 8.00049 11.1628 8.00049 11.3636V14.6364C8.00049 14.8372 8.5079 15 9.13382 15H23.8672C24.4931 15 25.0005 14.8372 25.0005 14.6364V11.3636C25.0005 11.1628 24.4931 11 23.8672 11H9.13382Z\\\" fill=\\\"white\\\"></path><circle cx=\\\"16.5005\\\" cy=\\\"19.5\\\" r=\\\"3\\\" stroke=\\\"#404040\\\"></circle></svg>\"","module.exports = \"<svg viewBox=\\\"0 0 33 33\\\" fill=\\\"none\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\"><circle cx=\\\"16.5005\\\" cy=\\\"16.5\\\" r=\\\"14.5\\\" fill=\\\"#404040\\\" stroke=\\\"currentColor\\\" stroke-width=\\\"3\\\" stroke-miterlimit=\\\"3.8637\\\"></circle><path fill-rule=\\\"evenodd\\\" clip-rule=\\\"evenodd\\\" d=\\\"M8.26715 10C7.56759 10 7.00049 10.5698 7.00049 11.2727V22.7273C7.00049 23.4302 7.56759 24 8.26715 24H24.7338C25.4334 24 26.0005 23.4302 26.0005 22.7273V11.2727C26.0005 10.5698 25.4334 10 24.7338 10H8.26715ZM9.13382 11C8.5079 11 8.00049 11.1628 8.00049 11.3636V14.6364C8.00049 14.8372 8.5079 15 9.13382 15H23.8672C24.4931 15 25.0005 14.8372 25.0005 14.6364V11.3636C25.0005 11.1628 24.4931 11 23.8672 11H9.13382Z\\\" fill=\\\"white\\\"></path><circle cx=\\\"16.5005\\\" cy=\\\"19.5\\\" r=\\\"3\\\" stroke=\\\"#404040\\\"></circle></svg>\"","module.exports = \"<svg viewBox=\\\"0 0 128 128\\\" fill=\\\"none\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\"><circle cx=\\\"64\\\" cy=\\\"64\\\" r=\\\"58\\\" fill=\\\"#404040\\\" stroke=\\\"currentColor\\\" stroke-width=\\\"12\\\" stroke-miterlimit=\\\"3.8637\\\"></circle><rect x=\\\"58.5789\\\" y=\\\"94.0633\\\" width=\\\"10.8424\\\" height=\\\"14.0748\\\" fill=\\\"white\\\"></rect><path fill-rule=\\\"evenodd\\\" clip-rule=\\\"evenodd\\\" d=\\\"M49.7201 72.799C49.7201 65.9079 42.1164 62.6609 40.3616 69.3249C39.9447 70.9085 39.7241 72.5592 39.7241 74.2557C39.7241 86.1656 50.5928 95.8204 64 95.8204C77.4072 95.8204 88.2758 86.1656 88.2758 74.2557C88.2758 72.5593 88.0553 70.9085 87.6383 69.325C85.8837 62.6611 78.28 65.908 78.28 72.799C78.28 80.6856 71.8866 87.0789 64.0001 87.0789C56.1135 87.0789 49.7201 80.6856 49.7201 72.799Z\\\" fill=\\\"white\\\"></path><rect x=\\\"53.3186\\\" y=\\\"19.8621\\\" width=\\\"21.3628\\\" height=\\\"63.6407\\\" rx=\\\"10.6814\\\" fill=\\\"white\\\"></rect><path d=\\\"M53.3186 72.8113C53.3186 78.7104 58.0995 83.4926 63.997 83.4926C69.8945 83.4926 74.6754 78.7104 74.6754 72.8113V30.5338C74.6754 24.6347 69.8945 19.8526 63.997 19.8526C58.0995 19.8526 53.3186 24.6347 53.3186 30.5338V72.8113Z\\\" fill=\\\"white\\\"></path></svg>\"","module.exports = \"<svg viewBox=\\\"0 0 128 128\\\" fill=\\\"none\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\"><circle cx=\\\"64\\\" cy=\\\"64\\\" r=\\\"58\\\" fill=\\\"#404040\\\" stroke=\\\"currentColor\\\" stroke-width=\\\"12\\\" stroke-miterlimit=\\\"3.8637\\\"></circle><rect x=\\\"58.5789\\\" y=\\\"94.0633\\\" width=\\\"10.8424\\\" height=\\\"14.0748\\\" fill=\\\"white\\\"></rect><path fill-rule=\\\"evenodd\\\" clip-rule=\\\"evenodd\\\" d=\\\"M49.7201 72.799C49.7201 65.9079 42.1164 62.6609 40.3616 69.3249C39.9447 70.9085 39.7241 72.5592 39.7241 74.2557C39.7241 86.1656 50.5928 95.8204 64 95.8204C77.4072 95.8204 88.2758 86.1656 88.2758 74.2557C88.2758 72.5593 88.0553 70.9085 87.6383 69.325C85.8837 62.6611 78.28 65.908 78.28 72.799C78.28 80.6856 71.8866 87.0789 64.0001 87.0789C56.1135 87.0789 49.7201 80.6856 49.7201 72.799Z\\\" fill=\\\"white\\\"></path><rect x=\\\"53.3186\\\" y=\\\"19.8621\\\" width=\\\"21.3628\\\" height=\\\"63.6407\\\" rx=\\\"10.6814\\\" fill=\\\"white\\\"></rect><path d=\\\"M53.3186 72.8113C53.3186 78.7104 58.0995 83.4926 63.997 83.4926C69.8945 83.4926 74.6754 78.7104 74.6754 72.8113V30.5338C74.6754 24.6347 69.8945 19.8526 63.997 19.8526C58.0995 19.8526 53.3186 24.6347 53.3186 30.5338V72.8113Z\\\" fill=\\\"white\\\"></path><mask id=\\\"mask0\\\" mask-type=\\\"alpha\\\" maskUnits=\\\"userSpaceOnUse\\\" x=\\\"53\\\" y=\\\"74\\\" width=\\\"22\\\" height=\\\"10\\\"><rect x=\\\"53.3186\\\" y=\\\"74.4011\\\" width=\\\"21.36\\\" height=\\\"9.09143\\\" fill=\\\"#C4C4C4\\\"></rect></mask><g mask=\\\"url(#mask0)\\\"><path d=\\\"M53.3186 72.8113C53.3186 78.7104 58.0995 83.4926 63.997 83.4926C69.8945 83.4926 74.6754 78.7104 74.6754 72.8113V30.5338C74.6754 24.6347 69.8945 19.8526 63.997 19.8526C58.0995 19.8526 53.3186 24.6347 53.3186 30.5338V72.8113Z\\\" fill=\\\"currentColor\\\"></path></g></svg>\"","module.exports = \"<svg viewBox=\\\"0 0 128 128\\\" fill=\\\"none\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\"><circle cx=\\\"64\\\" cy=\\\"64\\\" r=\\\"58\\\" fill=\\\"#404040\\\" stroke=\\\"currentColor\\\" stroke-width=\\\"12\\\" stroke-miterlimit=\\\"3.8637\\\"></circle><rect x=\\\"58.5789\\\" y=\\\"94.0633\\\" width=\\\"10.8424\\\" height=\\\"14.0748\\\" fill=\\\"white\\\"></rect><path fill-rule=\\\"evenodd\\\" clip-rule=\\\"evenodd\\\" d=\\\"M49.7201 72.799C49.7201 65.9079 42.1164 62.6609 40.3616 69.3249C39.9447 70.9085 39.7241 72.5592 39.7241 74.2557C39.7241 86.1656 50.5928 95.8204 64 95.8204C77.4072 95.8204 88.2758 86.1656 88.2758 74.2557C88.2758 72.5593 88.0553 70.9085 87.6383 69.325C85.8837 62.6611 78.28 65.908 78.28 72.799C78.28 80.6856 71.8866 87.0789 64.0001 87.0789C56.1135 87.0789 49.7201 80.6856 49.7201 72.799Z\\\" fill=\\\"white\\\"></path><rect x=\\\"53.3186\\\" y=\\\"19.8621\\\" width=\\\"21.3628\\\" height=\\\"63.6407\\\" rx=\\\"10.6814\\\" fill=\\\"white\\\"></rect><path d=\\\"M53.3186 72.8113C53.3186 78.7104 58.0995 83.4926 63.997 83.4926C69.8945 83.4926 74.6754 78.7104 74.6754 72.8113V30.5338C74.6754 24.6347 69.8945 19.8526 63.997 19.8526C58.0995 19.8526 53.3186 24.6347 53.3186 30.5338V72.8113Z\\\" fill=\\\"white\\\"></path><mask id=\\\"mask0\\\" mask-type=\\\"alpha\\\" maskUnits=\\\"userSpaceOnUse\\\" x=\\\"53\\\" y=\\\"65\\\" width=\\\"22\\\" height=\\\"19\\\"><rect x=\\\"53.3186\\\" y=\\\"65.3097\\\" width=\\\"21.36\\\" height=\\\"9.09143\\\" fill=\\\"#C4C4C4\\\"></rect><rect x=\\\"53.3186\\\" y=\\\"74.4011\\\" width=\\\"21.36\\\" height=\\\"9.09143\\\" fill=\\\"#C4C4C4\\\"></rect></mask><g mask=\\\"url(#mask0)\\\"><path d=\\\"M53.3186 72.8113C53.3186 78.7104 58.0995 83.4926 63.997 83.4926C69.8945 83.4926 74.6754 78.7104 74.6754 72.8113V30.5338C74.6754 24.6347 69.8945 19.8526 63.997 19.8526C58.0995 19.8526 53.3186 24.6347 53.3186 30.5338V72.8113Z\\\" fill=\\\"currentColor\\\"></path></g></svg>\"","module.exports = \"<svg viewBox=\\\"0 0 128 128\\\" fill=\\\"none\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\"><circle cx=\\\"64\\\" cy=\\\"64\\\" r=\\\"58\\\" fill=\\\"#404040\\\" stroke=\\\"currentColor\\\" stroke-width=\\\"12\\\" stroke-miterlimit=\\\"3.8637\\\"></circle><rect x=\\\"58.5789\\\" y=\\\"94.0633\\\" width=\\\"10.8424\\\" height=\\\"14.0748\\\" fill=\\\"white\\\"></rect><path fill-rule=\\\"evenodd\\\" clip-rule=\\\"evenodd\\\" d=\\\"M49.7202 72.799C49.7202 65.9079 42.1165 62.6609 40.3617 69.3249C39.9447 70.9085 39.7242 72.5592 39.7242 74.2557C39.7242 86.1656 50.5929 95.8204 64 95.8204C77.4072 95.8204 88.2759 86.1656 88.2759 74.2557C88.2759 72.5593 88.0554 70.9085 87.6384 69.325C85.8837 62.6611 78.28 65.908 78.28 72.799C78.28 80.6856 71.8867 87.0789 64.0001 87.0789C56.1135 87.0789 49.7202 80.6856 49.7202 72.799Z\\\" fill=\\\"white\\\"></path><rect x=\\\"53.3187\\\" y=\\\"19.8621\\\" width=\\\"21.3628\\\" height=\\\"63.6407\\\" rx=\\\"10.6814\\\" fill=\\\"white\\\"></rect><path d=\\\"M53.3187 72.8113C53.3187 78.7104 58.0995 83.4926 63.997 83.4926C69.8946 83.4926 74.6754 78.7104 74.6754 72.8113V30.5338C74.6754 24.6347 69.8946 19.8526 63.997 19.8526C58.0995 19.8526 53.3187 24.6347 53.3187 30.5338V72.8113Z\\\" fill=\\\"white\\\"></path><mask id=\\\"mask0\\\" mask-type=\\\"alpha\\\" maskUnits=\\\"userSpaceOnUse\\\" x=\\\"53\\\" y=\\\"56\\\" width=\\\"22\\\" height=\\\"28\\\"><rect x=\\\"53.3187\\\" y=\\\"56.2183\\\" width=\\\"21.36\\\" height=\\\"9.09143\\\" fill=\\\"#C4C4C4\\\"></rect><rect x=\\\"53.3187\\\" y=\\\"65.3097\\\" width=\\\"21.36\\\" height=\\\"9.09143\\\" fill=\\\"#C4C4C4\\\"></rect><rect x=\\\"53.3187\\\" y=\\\"74.4011\\\" width=\\\"21.36\\\" height=\\\"9.09143\\\" fill=\\\"#C4C4C4\\\"></rect></mask><g mask=\\\"url(#mask0)\\\"><path d=\\\"M53.3187 72.8113C53.3187 78.7104 58.0995 83.4926 63.997 83.4926C69.8946 83.4926 74.6754 78.7104 74.6754 72.8113V30.5338C74.6754 24.6347 69.8946 19.8526 63.997 19.8526C58.0995 19.8526 53.3187 24.6347 53.3187 30.5338V72.8113Z\\\" fill=\\\"currentColor\\\"></path></g></svg>\"","module.exports = \"<svg viewBox=\\\"0 0 128 128\\\" fill=\\\"none\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\"><circle cx=\\\"64\\\" cy=\\\"64\\\" r=\\\"58\\\" fill=\\\"#404040\\\" stroke=\\\"currentColor\\\" stroke-width=\\\"12\\\" stroke-miterlimit=\\\"3.8637\\\"></circle><rect x=\\\"58.5789\\\" y=\\\"94.0633\\\" width=\\\"10.8424\\\" height=\\\"14.0748\\\" fill=\\\"white\\\"></rect><path fill-rule=\\\"evenodd\\\" clip-rule=\\\"evenodd\\\" d=\\\"M49.7202 72.799C49.7202 65.9079 42.1165 62.6609 40.3617 69.3249C39.9447 70.9085 39.7242 72.5592 39.7242 74.2557C39.7242 86.1656 50.5929 95.8204 64 95.8204C77.4072 95.8204 88.2759 86.1656 88.2759 74.2557C88.2759 72.5593 88.0554 70.9085 87.6384 69.325C85.8837 62.6611 78.28 65.908 78.28 72.799C78.28 80.6856 71.8867 87.0789 64.0001 87.0789C56.1135 87.0789 49.7202 80.6856 49.7202 72.799Z\\\" fill=\\\"white\\\"></path><rect x=\\\"53.3187\\\" y=\\\"19.8621\\\" width=\\\"21.3628\\\" height=\\\"63.6407\\\" rx=\\\"10.6814\\\" fill=\\\"white\\\"></rect><path d=\\\"M53.3187 72.8113C53.3187 78.7104 58.0995 83.4926 63.997 83.4926C69.8946 83.4926 74.6754 78.7104 74.6754 72.8113V30.5338C74.6754 24.6347 69.8946 19.8526 63.997 19.8526C58.0995 19.8526 53.3187 24.6347 53.3187 30.5338V72.8113Z\\\" fill=\\\"white\\\"></path><mask id=\\\"mask0\\\" mask-type=\\\"alpha\\\" maskUnits=\\\"userSpaceOnUse\\\" x=\\\"53\\\" y=\\\"47\\\" width=\\\"22\\\" height=\\\"37\\\"><rect x=\\\"53.3187\\\" y=\\\"47.1268\\\" width=\\\"21.36\\\" height=\\\"9.09143\\\" fill=\\\"#C4C4C4\\\"></rect><rect x=\\\"53.3187\\\" y=\\\"56.2183\\\" width=\\\"21.36\\\" height=\\\"9.09143\\\" fill=\\\"#C4C4C4\\\"></rect><rect x=\\\"53.3187\\\" y=\\\"65.3097\\\" width=\\\"21.36\\\" height=\\\"9.09143\\\" fill=\\\"#C4C4C4\\\"></rect><rect x=\\\"53.3187\\\" y=\\\"74.4011\\\" width=\\\"21.36\\\" height=\\\"9.09143\\\" fill=\\\"#C4C4C4\\\"></rect></mask><g mask=\\\"url(#mask0)\\\"><path d=\\\"M53.3187 72.8113C53.3187 78.7104 58.0995 83.4926 63.997 83.4926C69.8946 83.4926 74.6754 78.7104 74.6754 72.8113V30.5338C74.6754 24.6347 69.8946 19.8526 63.997 19.8526C58.0995 19.8526 53.3187 24.6347 53.3187 30.5338V72.8113Z\\\" fill=\\\"currentColor\\\"></path></g></svg>\"","module.exports = \"<svg viewBox=\\\"0 0 128 128\\\" fill=\\\"none\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\"><circle cx=\\\"64\\\" cy=\\\"64\\\" r=\\\"58\\\" fill=\\\"#404040\\\" stroke=\\\"currentColor\\\" stroke-width=\\\"12\\\" stroke-miterlimit=\\\"3.8637\\\"></circle><rect x=\\\"58.5789\\\" y=\\\"94.0633\\\" width=\\\"10.8424\\\" height=\\\"14.0748\\\" fill=\\\"white\\\"></rect><path fill-rule=\\\"evenodd\\\" clip-rule=\\\"evenodd\\\" d=\\\"M49.7202 72.799C49.7202 65.9079 42.1165 62.6609 40.3617 69.3249C39.9447 70.9085 39.7242 72.5592 39.7242 74.2557C39.7242 86.1656 50.5929 95.8204 64 95.8204C77.4072 95.8204 88.2759 86.1656 88.2759 74.2557C88.2759 72.5593 88.0554 70.9085 87.6384 69.325C85.8837 62.6611 78.28 65.908 78.28 72.799C78.28 80.6856 71.8867 87.0789 64.0001 87.0789C56.1135 87.0789 49.7202 80.6856 49.7202 72.799Z\\\" fill=\\\"white\\\"></path><rect x=\\\"53.3187\\\" y=\\\"19.8621\\\" width=\\\"21.3628\\\" height=\\\"63.6407\\\" rx=\\\"10.6814\\\" fill=\\\"white\\\"></rect><path d=\\\"M53.3187 72.8113C53.3187 78.7104 58.0995 83.4926 63.997 83.4926C69.8946 83.4926 74.6754 78.7104 74.6754 72.8113V30.5338C74.6754 24.6347 69.8946 19.8526 63.997 19.8526C58.0995 19.8526 53.3187 24.6347 53.3187 30.5338V72.8113Z\\\" fill=\\\"white\\\"></path><mask id=\\\"mask0\\\" mask-type=\\\"alpha\\\" maskUnits=\\\"userSpaceOnUse\\\" x=\\\"53\\\" y=\\\"38\\\" width=\\\"22\\\" height=\\\"46\\\"><rect x=\\\"53.3187\\\" y=\\\"38.0354\\\" width=\\\"21.36\\\" height=\\\"9.09143\\\" fill=\\\"currentColor\\\"></rect><rect x=\\\"53.3187\\\" y=\\\"47.1268\\\" width=\\\"21.36\\\" height=\\\"9.09143\\\" fill=\\\"currentColor\\\"></rect><rect x=\\\"53.3187\\\" y=\\\"56.2183\\\" width=\\\"21.36\\\" height=\\\"9.09143\\\" fill=\\\"currentColor\\\"></rect><rect x=\\\"53.3187\\\" y=\\\"65.3097\\\" width=\\\"21.36\\\" height=\\\"9.09143\\\" fill=\\\"currentColor\\\"></rect><rect x=\\\"53.3187\\\" y=\\\"74.4011\\\" width=\\\"21.36\\\" height=\\\"9.09143\\\" fill=\\\"currentColor\\\"></rect></mask><g mask=\\\"url(#mask0)\\\"><path d=\\\"M53.3187 72.8113C53.3187 78.7104 58.0995 83.4926 63.997 83.4926C69.8946 83.4926 74.6754 78.7104 74.6754 72.8113V30.5338C74.6754 24.6347 69.8946 19.8526 63.997 19.8526C58.0995 19.8526 53.3187 24.6347 53.3187 30.5338V72.8113Z\\\" fill=\\\"currentColor\\\"></path></g></svg>\"","module.exports = \"<svg viewBox=\\\"0 0 128 128\\\" fill=\\\"none\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\"><circle cx=\\\"64\\\" cy=\\\"64\\\" r=\\\"58\\\" fill=\\\"#404040\\\" stroke=\\\"currentColor\\\" stroke-width=\\\"12\\\" stroke-miterlimit=\\\"3.8637\\\"></circle><rect x=\\\"58.5789\\\" y=\\\"94.0633\\\" width=\\\"10.8424\\\" height=\\\"14.0748\\\" fill=\\\"white\\\"></rect><path fill-rule=\\\"evenodd\\\" clip-rule=\\\"evenodd\\\" d=\\\"M49.7202 72.799C49.7202 65.9079 42.1165 62.6609 40.3617 69.3249C39.9447 70.9085 39.7242 72.5592 39.7242 74.2557C39.7242 86.1656 50.5929 95.8204 64 95.8204C77.4072 95.8204 88.2759 86.1656 88.2759 74.2557C88.2759 72.5593 88.0554 70.9085 87.6384 69.325C85.8837 62.6611 78.28 65.908 78.28 72.799C78.28 80.6856 71.8867 87.0789 64.0001 87.0789C56.1135 87.0789 49.7202 80.6856 49.7202 72.799Z\\\" fill=\\\"white\\\"></path><rect x=\\\"53.3187\\\" y=\\\"19.8621\\\" width=\\\"21.3628\\\" height=\\\"63.6407\\\" rx=\\\"10.6814\\\" fill=\\\"white\\\"></rect><path d=\\\"M53.3187 72.8113C53.3187 78.7104 58.0995 83.4926 63.997 83.4926C69.8946 83.4926 74.6754 78.7104 74.6754 72.8113V30.5338C74.6754 24.6347 69.8946 19.8526 63.997 19.8526C58.0995 19.8526 53.3187 24.6347 53.3187 30.5338V72.8113Z\\\" fill=\\\"white\\\"></path><mask id=\\\"mask0\\\" mask-type=\\\"alpha\\\" maskUnits=\\\"userSpaceOnUse\\\" x=\\\"53\\\" y=\\\"28\\\" width=\\\"22\\\" height=\\\"56\\\"><rect x=\\\"53.3187\\\" y=\\\"28.944\\\" width=\\\"21.36\\\" height=\\\"9.09143\\\" fill=\\\"#C4C4C4\\\"></rect><rect x=\\\"53.3187\\\" y=\\\"38.0354\\\" width=\\\"21.36\\\" height=\\\"9.09143\\\" fill=\\\"#C4C4C4\\\"></rect><rect x=\\\"53.3187\\\" y=\\\"47.1268\\\" width=\\\"21.36\\\" height=\\\"9.09143\\\" fill=\\\"#C4C4C4\\\"></rect><rect x=\\\"53.3187\\\" y=\\\"56.2183\\\" width=\\\"21.36\\\" height=\\\"9.09143\\\" fill=\\\"#C4C4C4\\\"></rect><rect x=\\\"53.3187\\\" y=\\\"65.3097\\\" width=\\\"21.36\\\" height=\\\"9.09143\\\" fill=\\\"#C4C4C4\\\"></rect><rect x=\\\"53.3187\\\" y=\\\"74.4011\\\" width=\\\"21.36\\\" height=\\\"9.09143\\\" fill=\\\"#C4C4C4\\\"></rect></mask><g mask=\\\"url(#mask0)\\\"><path d=\\\"M53.3187 72.8113C53.3187 78.7104 58.0995 83.4926 63.997 83.4926C69.8946 83.4926 74.6754 78.7104 74.6754 72.8113V30.5338C74.6754 24.6347 69.8946 19.8526 63.997 19.8526C58.0995 19.8526 53.3187 24.6347 53.3187 30.5338V72.8113Z\\\" fill=\\\"currentColor\\\"></path></g></svg>\"","module.exports = \"<svg viewBox=\\\"0 0 128 128\\\" fill=\\\"none\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\"><circle cx=\\\"64\\\" cy=\\\"64\\\" r=\\\"58\\\" fill=\\\"#404040\\\" stroke=\\\"currentColor\\\" stroke-width=\\\"12\\\" stroke-miterlimit=\\\"3.8637\\\"></circle><rect x=\\\"58.5789\\\" y=\\\"94.0633\\\" width=\\\"10.8424\\\" height=\\\"14.0748\\\" fill=\\\"white\\\"></rect><path fill-rule=\\\"evenodd\\\" clip-rule=\\\"evenodd\\\" d=\\\"M49.7202 72.799C49.7202 65.9079 42.1165 62.6609 40.3617 69.3249C39.9447 70.9085 39.7242 72.5592 39.7242 74.2557C39.7242 86.1656 50.5929 95.8204 64 95.8204C77.4072 95.8204 88.2759 86.1656 88.2759 74.2557C88.2759 72.5593 88.0554 70.9085 87.6384 69.325C85.8837 62.6611 78.28 65.908 78.28 72.799C78.28 80.6856 71.8867 87.0789 64.0001 87.0789C56.1135 87.0789 49.7202 80.6856 49.7202 72.799Z\\\" fill=\\\"white\\\"></path><rect x=\\\"53.3187\\\" y=\\\"19.8621\\\" width=\\\"21.3628\\\" height=\\\"63.6407\\\" rx=\\\"10.6814\\\" fill=\\\"white\\\"></rect><path d=\\\"M53.3187 72.8113C53.3187 78.7104 58.0995 83.4926 63.997 83.4926C69.8946 83.4926 74.6754 78.7104 74.6754 72.8113V30.5338C74.6754 24.6347 69.8946 19.8526 63.997 19.8526C58.0995 19.8526 53.3187 24.6347 53.3187 30.5338V72.8113Z\\\" fill=\\\"white\\\"></path><mask id=\\\"mask0\\\" mask-type=\\\"alpha\\\" maskUnits=\\\"userSpaceOnUse\\\" x=\\\"53\\\" y=\\\"19\\\" width=\\\"22\\\" height=\\\"65\\\"><rect x=\\\"53.3187\\\" y=\\\"19.8525\\\" width=\\\"21.36\\\" height=\\\"9.09143\\\" fill=\\\"#C4C4C4\\\"></rect><rect x=\\\"53.3187\\\" y=\\\"28.944\\\" width=\\\"21.36\\\" height=\\\"9.09143\\\" fill=\\\"#C4C4C4\\\"></rect><rect x=\\\"53.3187\\\" y=\\\"38.0354\\\" width=\\\"21.36\\\" height=\\\"9.09143\\\" fill=\\\"#C4C4C4\\\"></rect><rect x=\\\"53.3187\\\" y=\\\"47.1268\\\" width=\\\"21.36\\\" height=\\\"9.09143\\\" fill=\\\"#C4C4C4\\\"></rect><rect x=\\\"53.3187\\\" y=\\\"56.2183\\\" width=\\\"21.36\\\" height=\\\"9.09143\\\" fill=\\\"#C4C4C4\\\"></rect><rect x=\\\"53.3187\\\" y=\\\"65.3097\\\" width=\\\"21.36\\\" height=\\\"9.09143\\\" fill=\\\"#C4C4C4\\\"></rect><rect x=\\\"53.3187\\\" y=\\\"74.4011\\\" width=\\\"21.36\\\" height=\\\"9.09143\\\" fill=\\\"#C4C4C4\\\"></rect></mask><g mask=\\\"url(#mask0)\\\"><path d=\\\"M53.3187 72.8113C53.3187 78.7104 58.0995 83.4926 63.997 83.4926C69.8946 83.4926 74.6754 78.7104 74.6754 72.8113V30.5338C74.6754 24.6347 69.8946 19.8526 63.997 19.8526C58.0995 19.8526 53.3187 24.6347 53.3187 30.5338V72.8113Z\\\" fill=\\\"currentColor\\\"></path></g></svg>\"","module.exports = \"<svg viewBox=\\\"0 0 128 128\\\" fill=\\\"none\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\"><circle cx=\\\"64\\\" cy=\\\"64\\\" r=\\\"64\\\" fill=\\\"#404040\\\"></circle><rect x=\\\"58.5789\\\" y=\\\"94.0632\\\" width=\\\"10.8424\\\" height=\\\"14.0748\\\" fill=\\\"white\\\"></rect><path fill-rule=\\\"evenodd\\\" clip-rule=\\\"evenodd\\\" d=\\\"M49.7201 72.799C49.7201 65.9079 42.1164 62.6609 40.3616 69.3249C39.9447 70.9085 39.7241 72.5592 39.7241 74.2557C39.7241 86.1656 50.5928 95.8204 64 95.8204C77.4072 95.8204 88.2758 86.1656 88.2758 74.2557C88.2758 72.5593 88.0553 70.9085 87.6383 69.325C85.8837 62.6611 78.28 65.908 78.28 72.799C78.28 80.6856 71.8866 87.0789 64.0001 87.0789C56.1135 87.0789 49.7201 80.6856 49.7201 72.799Z\\\" fill=\\\"white\\\"></path><rect x=\\\"53.3186\\\" y=\\\"19.862\\\" width=\\\"21.3628\\\" height=\\\"63.6407\\\" rx=\\\"10.6814\\\" fill=\\\"white\\\"></rect><mask id=\\\"path-5-outside-1\\\" maskUnits=\\\"userSpaceOnUse\\\" x=\\\"10.9819\\\" y=\\\"11.4462\\\" width=\\\"106.066\\\" height=\\\"106.066\\\" fill=\\\"black\\\"><rect fill=\\\"white\\\" x=\\\"10.9819\\\" y=\\\"11.4462\\\" width=\\\"106.066\\\" height=\\\"106.066\\\"></rect><path fill-rule=\\\"evenodd\\\" clip-rule=\\\"evenodd\\\" d=\\\"M87.4633 47.6226C89.416 45.67 89.416 42.5042 87.4633 40.5515C85.5107 38.5989 82.3449 38.5989 80.3923 40.5515L64.0148 56.929L47.6375 40.5516C45.6848 38.599 42.519 38.599 40.5664 40.5516C38.6138 42.5042 38.6138 45.67 40.5664 47.6227L56.9438 64.0001L40.5664 80.3774C38.6138 82.3301 38.6138 85.4959 40.5664 87.4485C42.519 89.4011 45.6848 89.4011 47.6375 87.4485L64.0148 71.0711L80.3923 87.4486C82.3449 89.4012 85.5107 89.4012 87.4633 87.4486C89.416 85.4959 89.416 82.3301 87.4633 80.3775L71.0859 64.0001L87.4633 47.6226Z\\\"></path></mask><path fill-rule=\\\"evenodd\\\" clip-rule=\\\"evenodd\\\" d=\\\"M87.4633 47.6226C89.416 45.67 89.416 42.5042 87.4633 40.5515C85.5107 38.5989 82.3449 38.5989 80.3923 40.5515L64.0148 56.929L47.6375 40.5516C45.6848 38.599 42.519 38.599 40.5664 40.5516C38.6138 42.5042 38.6138 45.67 40.5664 47.6227L56.9438 64.0001L40.5664 80.3774C38.6138 82.3301 38.6138 85.4959 40.5664 87.4485C42.519 89.4011 45.6848 89.4011 47.6375 87.4485L64.0148 71.0711L80.3923 87.4486C82.3449 89.4012 85.5107 89.4012 87.4633 87.4486C89.416 85.4959 89.416 82.3301 87.4633 80.3775L71.0859 64.0001L87.4633 47.6226Z\\\" fill=\\\"white\\\"></path><path d=\\\"M87.4633 47.6226L90.2918 50.451L87.4633 47.6226ZM64.0148 56.929L61.1864 59.7574L64.0148 62.5858L66.8433 59.7574L64.0148 56.929ZM40.5664 40.5516L43.3948 43.38L40.5664 40.5516ZM56.9438 64.0001L59.7722 66.8285L62.6006 64.0001L59.7722 61.1716L56.9438 64.0001ZM64.0148 71.0711L66.8433 68.2427L64.0148 65.4143L61.1864 68.2427L64.0148 71.0711ZM87.4633 87.4486L90.2918 90.277L90.2918 90.277L87.4633 87.4486ZM71.0859 64.0001L68.2575 61.1716L65.4291 64.0001L68.2575 66.8285L71.0859 64.0001ZM84.6349 43.38C85.0254 43.7705 85.0254 44.4037 84.6349 44.7942L90.2918 50.451C93.8065 46.9363 93.8065 41.2378 90.2918 37.7231L84.6349 43.38ZM83.2207 43.38C83.6112 42.9894 84.2444 42.9894 84.6349 43.38L90.2918 37.7231C86.7771 34.2084 81.0786 34.2084 77.5639 37.7231L83.2207 43.38ZM66.8433 59.7574L83.2207 43.38L77.5639 37.7231L61.1864 54.1006L66.8433 59.7574ZM44.809 43.38L61.1864 59.7574L66.8433 54.1006L50.4659 37.7232L44.809 43.38ZM43.3948 43.38C43.7853 42.9895 44.4185 42.9895 44.809 43.38L50.4659 37.7232C46.9512 34.2084 41.2527 34.2084 37.738 37.7232L43.3948 43.38ZM43.3948 44.7942C43.0043 44.4037 43.0043 43.7705 43.3948 43.38L37.738 37.7232C34.2232 41.2379 34.2232 46.9364 37.738 50.4511L43.3948 44.7942ZM59.7722 61.1716L43.3948 44.7942L37.738 50.4511L54.1153 66.8285L59.7722 61.1716ZM43.3948 83.2059L59.7722 66.8285L54.1153 61.1716L37.738 77.549L43.3948 83.2059ZM43.3948 84.6201C43.0043 84.2295 43.0043 83.5964 43.3948 83.2059L37.738 77.549C34.2232 81.0637 34.2232 86.7622 37.738 90.2769L43.3948 84.6201ZM44.809 84.6201C44.4185 85.0106 43.7853 85.0106 43.3948 84.6201L37.738 90.2769C41.2527 93.7916 46.9512 93.7917 50.4659 90.2769L44.809 84.6201ZM61.1864 68.2427L44.809 84.6201L50.4659 90.2769L66.8433 73.8995L61.1864 68.2427ZM83.2207 84.6201L66.8433 68.2427L61.1864 73.8995L77.5638 90.277L83.2207 84.6201ZM84.6349 84.6201C84.2444 85.0107 83.6112 85.0107 83.2207 84.6201L77.5638 90.277C81.0786 93.7917 86.777 93.7917 90.2918 90.277L84.6349 84.6201ZM84.6349 83.2059C85.0254 83.5964 85.0254 84.2296 84.6349 84.6201L90.2918 90.277C93.8065 86.7623 93.8065 81.0638 90.2918 77.5491L84.6349 83.2059ZM68.2575 66.8285L84.6349 83.2059L90.2918 77.5491L73.9143 61.1716L68.2575 66.8285ZM84.6349 44.7942L68.2575 61.1716L73.9143 66.8285L90.2918 50.451L84.6349 44.7942Z\\\" fill=\\\"#404040\\\" mask=\\\"url(#path-5-outside-1)\\\"></path></svg>\"","module.exports = \"<svg viewBox=\\\"0 0 128 128\\\" fill=\\\"none\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\"><circle cx=\\\"64\\\" cy=\\\"64\\\" r=\\\"64\\\" fill=\\\"#404040\\\"></circle><rect x=\\\"58.5789\\\" y=\\\"94.0632\\\" width=\\\"10.8424\\\" height=\\\"14.0748\\\" fill=\\\"white\\\"></rect><path fill-rule=\\\"evenodd\\\" clip-rule=\\\"evenodd\\\" d=\\\"M49.7201 72.799C49.7201 65.9079 42.1164 62.6609 40.3616 69.3249C39.9447 70.9085 39.7241 72.5592 39.7241 74.2557C39.7241 86.1656 50.5928 95.8204 64 95.8204C77.4072 95.8204 88.2758 86.1656 88.2758 74.2557C88.2758 72.5593 88.0553 70.9085 87.6383 69.325C85.8837 62.6611 78.28 65.908 78.28 72.799C78.28 80.6856 71.8866 87.0789 64.0001 87.0789C56.1135 87.0789 49.7201 80.6856 49.7201 72.799Z\\\" fill=\\\"white\\\"></path><rect x=\\\"53.3186\\\" y=\\\"19.862\\\" width=\\\"21.3628\\\" height=\\\"63.6407\\\" rx=\\\"10.6814\\\" fill=\\\"white\\\"></rect><mask id=\\\"path-5-outside-1\\\" maskUnits=\\\"userSpaceOnUse\\\" x=\\\"10.9819\\\" y=\\\"11.4462\\\" width=\\\"106.066\\\" height=\\\"106.066\\\" fill=\\\"black\\\"><rect fill=\\\"white\\\" x=\\\"10.9819\\\" y=\\\"11.4462\\\" width=\\\"106.066\\\" height=\\\"106.066\\\"></rect><path fill-rule=\\\"evenodd\\\" clip-rule=\\\"evenodd\\\" d=\\\"M87.4633 47.6226C89.416 45.67 89.416 42.5042 87.4633 40.5515C85.5107 38.5989 82.3449 38.5989 80.3923 40.5515L64.0148 56.929L47.6375 40.5516C45.6848 38.599 42.519 38.599 40.5664 40.5516C38.6138 42.5042 38.6138 45.67 40.5664 47.6227L56.9438 64.0001L40.5664 80.3774C38.6138 82.3301 38.6138 85.4959 40.5664 87.4485C42.519 89.4011 45.6848 89.4011 47.6375 87.4485L64.0148 71.0711L80.3923 87.4486C82.3449 89.4012 85.5107 89.4012 87.4633 87.4486C89.416 85.4959 89.416 82.3301 87.4633 80.3775L71.0859 64.0001L87.4633 47.6226Z\\\"></path></mask><path fill-rule=\\\"evenodd\\\" clip-rule=\\\"evenodd\\\" d=\\\"M87.4633 47.6226C89.416 45.67 89.416 42.5042 87.4633 40.5515C85.5107 38.5989 82.3449 38.5989 80.3923 40.5515L64.0148 56.929L47.6375 40.5516C45.6848 38.599 42.519 38.599 40.5664 40.5516C38.6138 42.5042 38.6138 45.67 40.5664 47.6227L56.9438 64.0001L40.5664 80.3774C38.6138 82.3301 38.6138 85.4959 40.5664 87.4485C42.519 89.4011 45.6848 89.4011 47.6375 87.4485L64.0148 71.0711L80.3923 87.4486C82.3449 89.4012 85.5107 89.4012 87.4633 87.4486C89.416 85.4959 89.416 82.3301 87.4633 80.3775L71.0859 64.0001L87.4633 47.6226Z\\\" fill=\\\"#FFEAED\\\"></path><path d=\\\"M87.4633 47.6226L90.2918 50.451L87.4633 47.6226ZM64.0148 56.929L61.1864 59.7574L64.0148 62.5858L66.8433 59.7574L64.0148 56.929ZM40.5664 40.5516L43.3948 43.38L40.5664 40.5516ZM56.9438 64.0001L59.7722 66.8285L62.6006 64.0001L59.7722 61.1716L56.9438 64.0001ZM64.0148 71.0711L66.8433 68.2427L64.0148 65.4143L61.1864 68.2427L64.0148 71.0711ZM87.4633 87.4486L90.2918 90.277L90.2918 90.277L87.4633 87.4486ZM71.0859 64.0001L68.2575 61.1716L65.4291 64.0001L68.2575 66.8285L71.0859 64.0001ZM84.6349 43.38C85.0254 43.7705 85.0254 44.4037 84.6349 44.7942L90.2918 50.451C93.8065 46.9363 93.8065 41.2378 90.2918 37.7231L84.6349 43.38ZM83.2207 43.38C83.6112 42.9894 84.2444 42.9894 84.6349 43.38L90.2918 37.7231C86.7771 34.2084 81.0786 34.2084 77.5639 37.7231L83.2207 43.38ZM66.8433 59.7574L83.2207 43.38L77.5639 37.7231L61.1864 54.1006L66.8433 59.7574ZM44.809 43.38L61.1864 59.7574L66.8433 54.1006L50.4659 37.7232L44.809 43.38ZM43.3948 43.38C43.7853 42.9895 44.4185 42.9895 44.809 43.38L50.4659 37.7232C46.9512 34.2084 41.2527 34.2084 37.738 37.7232L43.3948 43.38ZM43.3948 44.7942C43.0043 44.4037 43.0043 43.7705 43.3948 43.38L37.738 37.7232C34.2232 41.2379 34.2232 46.9364 37.738 50.4511L43.3948 44.7942ZM59.7722 61.1716L43.3948 44.7942L37.738 50.4511L54.1153 66.8285L59.7722 61.1716ZM43.3948 83.2059L59.7722 66.8285L54.1153 61.1716L37.738 77.549L43.3948 83.2059ZM43.3948 84.6201C43.0043 84.2295 43.0043 83.5964 43.3948 83.2059L37.738 77.549C34.2232 81.0637 34.2232 86.7622 37.738 90.2769L43.3948 84.6201ZM44.809 84.6201C44.4185 85.0106 43.7853 85.0106 43.3948 84.6201L37.738 90.2769C41.2527 93.7916 46.9512 93.7917 50.4659 90.2769L44.809 84.6201ZM61.1864 68.2427L44.809 84.6201L50.4659 90.2769L66.8433 73.8995L61.1864 68.2427ZM83.2207 84.6201L66.8433 68.2427L61.1864 73.8995L77.5638 90.277L83.2207 84.6201ZM84.6349 84.6201C84.2444 85.0107 83.6112 85.0107 83.2207 84.6201L77.5638 90.277C81.0786 93.7917 86.777 93.7917 90.2918 90.277L84.6349 84.6201ZM84.6349 83.2059C85.0254 83.5964 85.0254 84.2296 84.6349 84.6201L90.2918 90.277C93.8065 86.7623 93.8065 81.0638 90.2918 77.5491L84.6349 83.2059ZM68.2575 66.8285L84.6349 83.2059L90.2918 77.5491L73.9143 61.1716L68.2575 66.8285ZM84.6349 44.7942L68.2575 61.1716L73.9143 66.8285L90.2918 50.451L84.6349 44.7942Z\\\" fill=\\\"#404040\\\" mask=\\\"url(#path-5-outside-1)\\\"></path></svg>\"","module.exports = \"<svg viewBox=\\\"0 0 128 128\\\" fill=\\\"none\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\"><circle cx=\\\"64\\\" cy=\\\"64\\\" r=\\\"64\\\" fill=\\\"#404040\\\"></circle><rect x=\\\"58.5789\\\" y=\\\"94.0632\\\" width=\\\"10.8424\\\" height=\\\"14.0748\\\" fill=\\\"white\\\"></rect><path fill-rule=\\\"evenodd\\\" clip-rule=\\\"evenodd\\\" d=\\\"M49.7201 72.799C49.7201 65.9079 42.1164 62.6609 40.3616 69.3249C39.9447 70.9085 39.7241 72.5592 39.7241 74.2557C39.7241 86.1656 50.5928 95.8204 64 95.8204C77.4072 95.8204 88.2758 86.1656 88.2758 74.2557C88.2758 72.5593 88.0553 70.9085 87.6383 69.325C85.8837 62.6611 78.28 65.908 78.28 72.799C78.28 80.6856 71.8866 87.0789 64.0001 87.0789C56.1135 87.0789 49.7201 80.6856 49.7201 72.799Z\\\" fill=\\\"white\\\"></path><rect x=\\\"53.3186\\\" y=\\\"19.862\\\" width=\\\"21.3628\\\" height=\\\"63.6407\\\" rx=\\\"10.6814\\\" fill=\\\"white\\\"></rect><mask id=\\\"path-5-outside-1\\\" maskUnits=\\\"userSpaceOnUse\\\" x=\\\"10.9819\\\" y=\\\"11.4462\\\" width=\\\"106.066\\\" height=\\\"106.066\\\" fill=\\\"black\\\"><rect fill=\\\"white\\\" x=\\\"10.9819\\\" y=\\\"11.4462\\\" width=\\\"106.066\\\" height=\\\"106.066\\\"></rect><path fill-rule=\\\"evenodd\\\" clip-rule=\\\"evenodd\\\" d=\\\"M87.4633 47.6226C89.416 45.67 89.416 42.5042 87.4633 40.5515C85.5107 38.5989 82.3449 38.5989 80.3923 40.5515L64.0148 56.929L47.6375 40.5516C45.6848 38.599 42.519 38.599 40.5664 40.5516C38.6138 42.5042 38.6138 45.67 40.5664 47.6227L56.9438 64.0001L40.5664 80.3774C38.6138 82.3301 38.6138 85.4959 40.5664 87.4485C42.519 89.4011 45.6848 89.4011 47.6375 87.4485L64.0148 71.0711L80.3923 87.4486C82.3449 89.4012 85.5107 89.4012 87.4633 87.4486C89.416 85.4959 89.416 82.3301 87.4633 80.3775L71.0859 64.0001L87.4633 47.6226Z\\\"></path></mask><path fill-rule=\\\"evenodd\\\" clip-rule=\\\"evenodd\\\" d=\\\"M87.4633 47.6226C89.416 45.67 89.416 42.5042 87.4633 40.5515C85.5107 38.5989 82.3449 38.5989 80.3923 40.5515L64.0148 56.929L47.6375 40.5516C45.6848 38.599 42.519 38.599 40.5664 40.5516C38.6138 42.5042 38.6138 45.67 40.5664 47.6227L56.9438 64.0001L40.5664 80.3774C38.6138 82.3301 38.6138 85.4959 40.5664 87.4485C42.519 89.4011 45.6848 89.4011 47.6375 87.4485L64.0148 71.0711L80.3923 87.4486C82.3449 89.4012 85.5107 89.4012 87.4633 87.4486C89.416 85.4959 89.416 82.3301 87.4633 80.3775L71.0859 64.0001L87.4633 47.6226Z\\\" fill=\\\"#FFD2D8\\\"></path><path d=\\\"M87.4633 47.6226L90.2918 50.451L87.4633 47.6226ZM64.0148 56.929L61.1864 59.7574L64.0148 62.5858L66.8433 59.7574L64.0148 56.929ZM40.5664 40.5516L43.3948 43.38L40.5664 40.5516ZM56.9438 64.0001L59.7722 66.8285L62.6006 64.0001L59.7722 61.1716L56.9438 64.0001ZM64.0148 71.0711L66.8433 68.2427L64.0148 65.4143L61.1864 68.2427L64.0148 71.0711ZM87.4633 87.4486L90.2918 90.277L90.2918 90.277L87.4633 87.4486ZM71.0859 64.0001L68.2575 61.1716L65.4291 64.0001L68.2575 66.8285L71.0859 64.0001ZM84.6349 43.38C85.0254 43.7705 85.0254 44.4037 84.6349 44.7942L90.2918 50.451C93.8065 46.9363 93.8065 41.2378 90.2918 37.7231L84.6349 43.38ZM83.2207 43.38C83.6112 42.9894 84.2444 42.9894 84.6349 43.38L90.2918 37.7231C86.7771 34.2084 81.0786 34.2084 77.5639 37.7231L83.2207 43.38ZM66.8433 59.7574L83.2207 43.38L77.5639 37.7231L61.1864 54.1006L66.8433 59.7574ZM44.809 43.38L61.1864 59.7574L66.8433 54.1006L50.4659 37.7232L44.809 43.38ZM43.3948 43.38C43.7853 42.9895 44.4185 42.9895 44.809 43.38L50.4659 37.7232C46.9512 34.2084 41.2527 34.2084 37.738 37.7232L43.3948 43.38ZM43.3948 44.7942C43.0043 44.4037 43.0043 43.7705 43.3948 43.38L37.738 37.7232C34.2232 41.2379 34.2232 46.9364 37.738 50.4511L43.3948 44.7942ZM59.7722 61.1716L43.3948 44.7942L37.738 50.4511L54.1153 66.8285L59.7722 61.1716ZM43.3948 83.2059L59.7722 66.8285L54.1153 61.1716L37.738 77.549L43.3948 83.2059ZM43.3948 84.6201C43.0043 84.2295 43.0043 83.5964 43.3948 83.2059L37.738 77.549C34.2232 81.0637 34.2232 86.7622 37.738 90.2769L43.3948 84.6201ZM44.809 84.6201C44.4185 85.0106 43.7853 85.0106 43.3948 84.6201L37.738 90.2769C41.2527 93.7916 46.9512 93.7917 50.4659 90.2769L44.809 84.6201ZM61.1864 68.2427L44.809 84.6201L50.4659 90.2769L66.8433 73.8995L61.1864 68.2427ZM83.2207 84.6201L66.8433 68.2427L61.1864 73.8995L77.5638 90.277L83.2207 84.6201ZM84.6349 84.6201C84.2444 85.0107 83.6112 85.0107 83.2207 84.6201L77.5638 90.277C81.0786 93.7917 86.777 93.7917 90.2918 90.277L84.6349 84.6201ZM84.6349 83.2059C85.0254 83.5964 85.0254 84.2296 84.6349 84.6201L90.2918 90.277C93.8065 86.7623 93.8065 81.0638 90.2918 77.5491L84.6349 83.2059ZM68.2575 66.8285L84.6349 83.2059L90.2918 77.5491L73.9143 61.1716L68.2575 66.8285ZM84.6349 44.7942L68.2575 61.1716L73.9143 66.8285L90.2918 50.451L84.6349 44.7942Z\\\" fill=\\\"#404040\\\" mask=\\\"url(#path-5-outside-1)\\\"></path></svg>\"","module.exports = \"<svg viewBox=\\\"0 0 128 128\\\" fill=\\\"none\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\"><circle cx=\\\"64\\\" cy=\\\"64\\\" r=\\\"64\\\" fill=\\\"#404040\\\"></circle><rect x=\\\"58.5789\\\" y=\\\"94.0632\\\" width=\\\"10.8424\\\" height=\\\"14.0748\\\" fill=\\\"white\\\"></rect><path fill-rule=\\\"evenodd\\\" clip-rule=\\\"evenodd\\\" d=\\\"M49.7201 72.799C49.7201 65.9079 42.1164 62.6609 40.3616 69.3249C39.9447 70.9085 39.7241 72.5592 39.7241 74.2557C39.7241 86.1656 50.5928 95.8204 64 95.8204C77.4072 95.8204 88.2758 86.1656 88.2758 74.2557C88.2758 72.5593 88.0553 70.9085 87.6383 69.325C85.8837 62.6611 78.28 65.908 78.28 72.799C78.28 80.6856 71.8866 87.0789 64.0001 87.0789C56.1135 87.0789 49.7201 80.6856 49.7201 72.799Z\\\" fill=\\\"white\\\"></path><rect x=\\\"53.3186\\\" y=\\\"19.862\\\" width=\\\"21.3628\\\" height=\\\"63.6407\\\" rx=\\\"10.6814\\\" fill=\\\"white\\\"></rect><mask id=\\\"path-5-outside-1\\\" maskUnits=\\\"userSpaceOnUse\\\" x=\\\"10.9819\\\" y=\\\"11.4462\\\" width=\\\"106.066\\\" height=\\\"106.066\\\" fill=\\\"black\\\"><rect fill=\\\"white\\\" x=\\\"10.9819\\\" y=\\\"11.4462\\\" width=\\\"106.066\\\" height=\\\"106.066\\\"></rect><path fill-rule=\\\"evenodd\\\" clip-rule=\\\"evenodd\\\" d=\\\"M87.4633 47.6226C89.416 45.67 89.416 42.5042 87.4633 40.5515C85.5107 38.5989 82.3449 38.5989 80.3923 40.5515L64.0148 56.929L47.6375 40.5516C45.6848 38.599 42.519 38.599 40.5664 40.5516C38.6138 42.5042 38.6138 45.67 40.5664 47.6227L56.9438 64.0001L40.5664 80.3774C38.6138 82.3301 38.6138 85.4959 40.5664 87.4485C42.519 89.4011 45.6848 89.4011 47.6375 87.4485L64.0148 71.0711L80.3923 87.4486C82.3449 89.4012 85.5107 89.4012 87.4633 87.4486C89.416 85.4959 89.416 82.3301 87.4633 80.3775L71.0859 64.0001L87.4633 47.6226Z\\\"></path></mask><path fill-rule=\\\"evenodd\\\" clip-rule=\\\"evenodd\\\" d=\\\"M87.4633 47.6226C89.416 45.67 89.416 42.5042 87.4633 40.5515C85.5107 38.5989 82.3449 38.5989 80.3923 40.5515L64.0148 56.929L47.6375 40.5516C45.6848 38.599 42.519 38.599 40.5664 40.5516C38.6138 42.5042 38.6138 45.67 40.5664 47.6227L56.9438 64.0001L40.5664 80.3774C38.6138 82.3301 38.6138 85.4959 40.5664 87.4485C42.519 89.4011 45.6848 89.4011 47.6375 87.4485L64.0148 71.0711L80.3923 87.4486C82.3449 89.4012 85.5107 89.4012 87.4633 87.4486C89.416 85.4959 89.416 82.3301 87.4633 80.3775L71.0859 64.0001L87.4633 47.6226Z\\\" fill=\\\"#FFAEB9\\\"></path><path d=\\\"M64.0148 56.929L61.1864 59.7574L64.0148 62.5858L66.8433 59.7574L64.0148 56.929ZM40.5664 40.5516L43.3948 43.38L40.5664 40.5516ZM56.9438 64.0001L59.7722 66.8285L62.6006 64.0001L59.7722 61.1716L56.9438 64.0001ZM64.0148 71.0711L66.8433 68.2427L64.0148 65.4143L61.1864 68.2427L64.0148 71.0711ZM87.4633 87.4486L90.2918 90.277L90.2918 90.277L87.4633 87.4486ZM71.0859 64.0001L68.2575 61.1716L65.4291 64.0001L68.2575 66.8285L71.0859 64.0001ZM84.6349 43.38C85.0254 43.7705 85.0254 44.4037 84.6349 44.7942L90.2918 50.451C93.8065 46.9363 93.8065 41.2378 90.2918 37.7231L84.6349 43.38ZM83.2207 43.38C83.6112 42.9894 84.2444 42.9894 84.6349 43.38L90.2918 37.7231C86.7771 34.2084 81.0786 34.2084 77.5639 37.7231L83.2207 43.38ZM66.8433 59.7574L83.2207 43.38L77.5639 37.7231L61.1864 54.1006L66.8433 59.7574ZM44.809 43.38L61.1864 59.7574L66.8433 54.1006L50.4659 37.7232L44.809 43.38ZM43.3948 43.38C43.7853 42.9895 44.4185 42.9895 44.809 43.38L50.4659 37.7232C46.9512 34.2084 41.2527 34.2084 37.738 37.7232L43.3948 43.38ZM43.3948 44.7942C43.0043 44.4037 43.0043 43.7705 43.3948 43.38L37.738 37.7232C34.2232 41.2379 34.2232 46.9364 37.738 50.4511L43.3948 44.7942ZM59.7722 61.1716L43.3948 44.7942L37.738 50.4511L54.1153 66.8285L59.7722 61.1716ZM43.3948 83.2059L59.7722 66.8285L54.1153 61.1716L37.738 77.549L43.3948 83.2059ZM43.3948 84.6201C43.0043 84.2295 43.0043 83.5964 43.3948 83.2059L37.738 77.549C34.2232 81.0637 34.2232 86.7622 37.738 90.2769L43.3948 84.6201ZM44.809 84.6201C44.4185 85.0106 43.7853 85.0106 43.3948 84.6201L37.738 90.2769C41.2527 93.7916 46.9512 93.7917 50.4659 90.2769L44.809 84.6201ZM61.1864 68.2427L44.809 84.6201L50.4659 90.2769L66.8433 73.8995L61.1864 68.2427ZM83.2207 84.6201L66.8433 68.2427L61.1864 73.8995L77.5638 90.277L83.2207 84.6201ZM84.6349 84.6201C84.2444 85.0107 83.6112 85.0107 83.2207 84.6201L77.5638 90.277C81.0786 93.7917 86.777 93.7917 90.2918 90.277L84.6349 84.6201ZM84.6349 83.2059C85.0254 83.5964 85.0254 84.2296 84.6349 84.6201L90.2918 90.277C93.8065 86.7623 93.8065 81.0638 90.2918 77.5491L84.6349 83.2059ZM68.2575 66.8285L84.6349 83.2059L90.2918 77.5491L73.9143 61.1716L68.2575 66.8285ZM84.6349 44.7942L68.2575 61.1716L73.9143 66.8285L90.2918 50.451L84.6349 44.7942Z\\\" fill=\\\"#404040\\\" mask=\\\"url(#path-5-outside-1)\\\"></path></svg>\"","module.exports = \"<svg viewBox=\\\"0 0 128 128\\\" fill=\\\"none\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\"><circle cx=\\\"64\\\" cy=\\\"64\\\" r=\\\"64\\\" fill=\\\"#404040\\\"></circle><rect x=\\\"58.5789\\\" y=\\\"94.0632\\\" width=\\\"10.8424\\\" height=\\\"14.0748\\\" fill=\\\"white\\\"></rect><path fill-rule=\\\"evenodd\\\" clip-rule=\\\"evenodd\\\" d=\\\"M49.7201 72.799C49.7201 65.9079 42.1164 62.6609 40.3616 69.3249C39.9447 70.9085 39.7241 72.5592 39.7241 74.2557C39.7241 86.1656 50.5928 95.8204 64 95.8204C77.4072 95.8204 88.2758 86.1656 88.2758 74.2557C88.2758 72.5593 88.0553 70.9085 87.6383 69.325C85.8837 62.6611 78.28 65.908 78.28 72.799C78.28 80.6856 71.8866 87.0789 64.0001 87.0789C56.1135 87.0789 49.7201 80.6856 49.7201 72.799Z\\\" fill=\\\"white\\\"></path><rect x=\\\"53.3186\\\" y=\\\"19.862\\\" width=\\\"21.3628\\\" height=\\\"63.6407\\\" rx=\\\"10.6814\\\" fill=\\\"white\\\"></rect><mask id=\\\"path-5-outside-1\\\" maskUnits=\\\"userSpaceOnUse\\\" x=\\\"10.9819\\\" y=\\\"11.4462\\\" width=\\\"106.066\\\" height=\\\"106.066\\\" fill=\\\"black\\\"><rect fill=\\\"white\\\" x=\\\"10.9819\\\" y=\\\"11.4462\\\" width=\\\"106.066\\\" height=\\\"106.066\\\"></rect><path fill-rule=\\\"evenodd\\\" clip-rule=\\\"evenodd\\\" d=\\\"M87.4633 47.6226C89.416 45.67 89.416 42.5042 87.4633 40.5515C85.5107 38.5989 82.3449 38.5989 80.3923 40.5515L64.0148 56.929L47.6375 40.5516C45.6848 38.599 42.519 38.599 40.5664 40.5516C38.6138 42.5042 38.6138 45.67 40.5664 47.6227L56.9438 64.0001L40.5664 80.3774C38.6138 82.3301 38.6138 85.4959 40.5664 87.4485C42.519 89.4011 45.6848 89.4011 47.6375 87.4485L64.0148 71.0711L80.3923 87.4486C82.3449 89.4012 85.5107 89.4012 87.4633 87.4486C89.416 85.4959 89.416 82.3301 87.4633 80.3775L71.0859 64.0001L87.4633 47.6226Z\\\"></path></mask><path fill-rule=\\\"evenodd\\\" clip-rule=\\\"evenodd\\\" d=\\\"M87.4633 47.6226C89.416 45.67 89.416 42.5042 87.4633 40.5515C85.5107 38.5989 82.3449 38.5989 80.3923 40.5515L64.0148 56.929L47.6375 40.5516C45.6848 38.599 42.519 38.599 40.5664 40.5516C38.6138 42.5042 38.6138 45.67 40.5664 47.6227L56.9438 64.0001L40.5664 80.3774C38.6138 82.3301 38.6138 85.4959 40.5664 87.4485C42.519 89.4011 45.6848 89.4011 47.6375 87.4485L64.0148 71.0711L80.3923 87.4486C82.3449 89.4012 85.5107 89.4012 87.4633 87.4486C89.416 85.4959 89.416 82.3301 87.4633 80.3775L71.0859 64.0001L87.4633 47.6226Z\\\" fill=\\\"#FF8D9D\\\"></path><path d=\\\"M64.0148 56.929L61.1864 59.7574L64.0148 62.5858L66.8433 59.7574L64.0148 56.929ZM40.5664 40.5516L43.3948 43.38L40.5664 40.5516ZM56.9438 64.0001L59.7722 66.8285L62.6006 64.0001L59.7722 61.1716L56.9438 64.0001ZM64.0148 71.0711L66.8433 68.2427L64.0148 65.4143L61.1864 68.2427L64.0148 71.0711ZM87.4633 87.4486L90.2918 90.277L90.2918 90.277L87.4633 87.4486ZM71.0859 64.0001L68.2575 61.1716L65.4291 64.0001L68.2575 66.8285L71.0859 64.0001ZM84.6349 43.38C85.0254 43.7705 85.0254 44.4037 84.6349 44.7942L90.2918 50.451C93.8065 46.9363 93.8065 41.2378 90.2918 37.7231L84.6349 43.38ZM83.2207 43.38C83.6112 42.9894 84.2444 42.9894 84.6349 43.38L90.2918 37.7231C86.7771 34.2084 81.0786 34.2084 77.5639 37.7231L83.2207 43.38ZM66.8433 59.7574L83.2207 43.38L77.5639 37.7231L61.1864 54.1006L66.8433 59.7574ZM44.809 43.38L61.1864 59.7574L66.8433 54.1006L50.4659 37.7232L44.809 43.38ZM43.3948 43.38C43.7853 42.9895 44.4185 42.9895 44.809 43.38L50.4659 37.7232C46.9512 34.2084 41.2527 34.2084 37.738 37.7232L43.3948 43.38ZM43.3948 44.7942C43.0043 44.4037 43.0043 43.7705 43.3948 43.38L37.738 37.7232C34.2232 41.2379 34.2232 46.9364 37.738 50.4511L43.3948 44.7942ZM59.7722 61.1716L43.3948 44.7942L37.738 50.4511L54.1153 66.8285L59.7722 61.1716ZM43.3948 83.2059L59.7722 66.8285L54.1153 61.1716L37.738 77.549L43.3948 83.2059ZM43.3948 84.6201C43.0043 84.2295 43.0043 83.5964 43.3948 83.2059L37.738 77.549C34.2232 81.0637 34.2232 86.7622 37.738 90.2769L43.3948 84.6201ZM44.809 84.6201C44.4185 85.0106 43.7853 85.0106 43.3948 84.6201L37.738 90.2769C41.2527 93.7916 46.9512 93.7917 50.4659 90.2769L44.809 84.6201ZM61.1864 68.2427L44.809 84.6201L50.4659 90.2769L66.8433 73.8995L61.1864 68.2427ZM83.2207 84.6201L66.8433 68.2427L61.1864 73.8995L77.5638 90.277L83.2207 84.6201ZM84.6349 84.6201C84.2444 85.0107 83.6112 85.0107 83.2207 84.6201L77.5638 90.277C81.0786 93.7917 86.777 93.7917 90.2918 90.277L84.6349 84.6201ZM84.6349 83.2059C85.0254 83.5964 85.0254 84.2296 84.6349 84.6201L90.2918 90.277C93.8065 86.7623 93.8065 81.0638 90.2918 77.5491L84.6349 83.2059ZM68.2575 66.8285L84.6349 83.2059L90.2918 77.5491L73.9143 61.1716L68.2575 66.8285ZM84.6349 44.7942L68.2575 61.1716L73.9143 66.8285L90.2918 50.451L84.6349 44.7942Z\\\" fill=\\\"#404040\\\" mask=\\\"url(#path-5-outside-1)\\\"></path></svg>\"","module.exports = \"<svg viewBox=\\\"0 0 128 128\\\" fill=\\\"none\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\"><circle cx=\\\"64\\\" cy=\\\"64\\\" r=\\\"64\\\" fill=\\\"#404040\\\"></circle><rect x=\\\"58.5789\\\" y=\\\"94.0632\\\" width=\\\"10.8424\\\" height=\\\"14.0748\\\" fill=\\\"white\\\"></rect><path fill-rule=\\\"evenodd\\\" clip-rule=\\\"evenodd\\\" d=\\\"M49.7201 72.799C49.7201 65.9079 42.1164 62.6609 40.3616 69.3249C39.9447 70.9085 39.7241 72.5592 39.7241 74.2557C39.7241 86.1656 50.5928 95.8204 64 95.8204C77.4072 95.8204 88.2758 86.1656 88.2758 74.2557C88.2758 72.5593 88.0553 70.9085 87.6383 69.325C85.8837 62.6611 78.28 65.908 78.28 72.799C78.28 80.6856 71.8866 87.0789 64.0001 87.0789C56.1135 87.0789 49.7201 80.6856 49.7201 72.799Z\\\" fill=\\\"white\\\"></path><rect x=\\\"53.3186\\\" y=\\\"19.862\\\" width=\\\"21.3628\\\" height=\\\"63.6407\\\" rx=\\\"10.6814\\\" fill=\\\"white\\\"></rect><mask id=\\\"path-5-outside-1\\\" maskUnits=\\\"userSpaceOnUse\\\" x=\\\"10.9819\\\" y=\\\"11.4462\\\" width=\\\"106.066\\\" height=\\\"106.066\\\" fill=\\\"black\\\"><rect fill=\\\"white\\\" x=\\\"10.9819\\\" y=\\\"11.4462\\\" width=\\\"106.066\\\" height=\\\"106.066\\\"></rect><path fill-rule=\\\"evenodd\\\" clip-rule=\\\"evenodd\\\" d=\\\"M87.4633 47.6226C89.416 45.67 89.416 42.5042 87.4633 40.5515C85.5107 38.5989 82.3449 38.5989 80.3923 40.5515L64.0148 56.929L47.6375 40.5516C45.6848 38.599 42.519 38.599 40.5664 40.5516C38.6138 42.5042 38.6138 45.67 40.5664 47.6227L56.9438 64.0001L40.5664 80.3774C38.6138 82.3301 38.6138 85.4959 40.5664 87.4485C42.519 89.4011 45.6848 89.4011 47.6375 87.4485L64.0148 71.0711L80.3923 87.4486C82.3449 89.4012 85.5107 89.4012 87.4633 87.4486C89.416 85.4959 89.416 82.3301 87.4633 80.3775L71.0859 64.0001L87.4633 47.6226Z\\\"></path></mask><path fill-rule=\\\"evenodd\\\" clip-rule=\\\"evenodd\\\" d=\\\"M87.4633 47.6226C89.416 45.67 89.416 42.5042 87.4633 40.5515C85.5107 38.5989 82.3449 38.5989 80.3923 40.5515L64.0148 56.929L47.6375 40.5516C45.6848 38.599 42.519 38.599 40.5664 40.5516C38.6138 42.5042 38.6138 45.67 40.5664 47.6227L56.9438 64.0001L40.5664 80.3774C38.6138 82.3301 38.6138 85.4959 40.5664 87.4485C42.519 89.4011 45.6848 89.4011 47.6375 87.4485L64.0148 71.0711L80.3923 87.4486C82.3449 89.4012 85.5107 89.4012 87.4633 87.4486C89.416 85.4959 89.416 82.3301 87.4633 80.3775L71.0859 64.0001L87.4633 47.6226Z\\\" fill=\\\"#FF7083\\\"></path><path d=\\\"M64.0148 56.929L61.1864 59.7574L64.0148 62.5858L66.8433 59.7574L64.0148 56.929ZM40.5664 40.5516L43.3948 43.38L40.5664 40.5516ZM56.9438 64.0001L59.7722 66.8285L62.6006 64.0001L59.7722 61.1716L56.9438 64.0001ZM64.0148 71.0711L66.8433 68.2427L64.0148 65.4143L61.1864 68.2427L64.0148 71.0711ZM87.4633 87.4486L90.2918 90.277L90.2918 90.277L87.4633 87.4486ZM71.0859 64.0001L68.2575 61.1716L65.4291 64.0001L68.2575 66.8285L71.0859 64.0001ZM84.6349 43.38C85.0254 43.7705 85.0254 44.4037 84.6349 44.7942L90.2918 50.451C93.8065 46.9363 93.8065 41.2378 90.2918 37.7231L84.6349 43.38ZM83.2207 43.38C83.6112 42.9894 84.2444 42.9894 84.6349 43.38L90.2918 37.7231C86.7771 34.2084 81.0786 34.2084 77.5639 37.7231L83.2207 43.38ZM66.8433 59.7574L83.2207 43.38L77.5639 37.7231L61.1864 54.1006L66.8433 59.7574ZM44.809 43.38L61.1864 59.7574L66.8433 54.1006L50.4659 37.7232L44.809 43.38ZM43.3948 43.38C43.7853 42.9895 44.4185 42.9895 44.809 43.38L50.4659 37.7232C46.9512 34.2084 41.2527 34.2084 37.738 37.7232L43.3948 43.38ZM43.3948 44.7942C43.0043 44.4037 43.0043 43.7705 43.3948 43.38L37.738 37.7232C34.2232 41.2379 34.2232 46.9364 37.738 50.4511L43.3948 44.7942ZM59.7722 61.1716L43.3948 44.7942L37.738 50.4511L54.1153 66.8285L59.7722 61.1716ZM43.3948 83.2059L59.7722 66.8285L54.1153 61.1716L37.738 77.549L43.3948 83.2059ZM43.3948 84.6201C43.0043 84.2295 43.0043 83.5964 43.3948 83.2059L37.738 77.549C34.2232 81.0637 34.2232 86.7622 37.738 90.2769L43.3948 84.6201ZM44.809 84.6201C44.4185 85.0106 43.7853 85.0106 43.3948 84.6201L37.738 90.2769C41.2527 93.7916 46.9512 93.7917 50.4659 90.2769L44.809 84.6201ZM61.1864 68.2427L44.809 84.6201L50.4659 90.2769L66.8433 73.8995L61.1864 68.2427ZM83.2207 84.6201L66.8433 68.2427L61.1864 73.8995L77.5638 90.277L83.2207 84.6201ZM84.6349 84.6201C84.2444 85.0107 83.6112 85.0107 83.2207 84.6201L77.5638 90.277C81.0786 93.7917 86.777 93.7917 90.2918 90.277L84.6349 84.6201ZM84.6349 83.2059C85.0254 83.5964 85.0254 84.2296 84.6349 84.6201L90.2918 90.277C93.8065 86.7623 93.8065 81.0638 90.2918 77.5491L84.6349 83.2059ZM68.2575 66.8285L84.6349 83.2059L90.2918 77.5491L73.9143 61.1716L68.2575 66.8285ZM84.6349 44.7942L68.2575 61.1716L73.9143 66.8285L90.2918 50.451L84.6349 44.7942Z\\\" fill=\\\"#404040\\\" mask=\\\"url(#path-5-outside-1)\\\"></path></svg>\"","module.exports = \"<svg viewBox=\\\"0 0 128 128\\\" fill=\\\"none\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\"><circle cx=\\\"64\\\" cy=\\\"64\\\" r=\\\"64\\\" fill=\\\"#404040\\\"></circle><rect x=\\\"58.5789\\\" y=\\\"94.0632\\\" width=\\\"10.8424\\\" height=\\\"14.0748\\\" fill=\\\"white\\\"></rect><path fill-rule=\\\"evenodd\\\" clip-rule=\\\"evenodd\\\" d=\\\"M49.7201 72.799C49.7201 65.9079 42.1164 62.6609 40.3616 69.3249C39.9447 70.9085 39.7241 72.5592 39.7241 74.2557C39.7241 86.1656 50.5928 95.8204 64 95.8204C77.4072 95.8204 88.2758 86.1656 88.2758 74.2557C88.2758 72.5593 88.0553 70.9085 87.6383 69.325C85.8837 62.6611 78.28 65.908 78.28 72.799C78.28 80.6856 71.8866 87.0789 64.0001 87.0789C56.1135 87.0789 49.7201 80.6856 49.7201 72.799Z\\\" fill=\\\"white\\\"></path><rect x=\\\"53.3186\\\" y=\\\"19.862\\\" width=\\\"21.3628\\\" height=\\\"63.6407\\\" rx=\\\"10.6814\\\" fill=\\\"white\\\"></rect><mask id=\\\"path-5-outside-1\\\" maskUnits=\\\"userSpaceOnUse\\\" x=\\\"10.9819\\\" y=\\\"11.4462\\\" width=\\\"106.066\\\" height=\\\"106.066\\\" fill=\\\"black\\\"><rect fill=\\\"white\\\" x=\\\"10.9819\\\" y=\\\"11.4462\\\" width=\\\"106.066\\\" height=\\\"106.066\\\"></rect><path fill-rule=\\\"evenodd\\\" clip-rule=\\\"evenodd\\\" d=\\\"M87.4633 47.6226C89.416 45.67 89.416 42.5042 87.4633 40.5515C85.5107 38.5989 82.3449 38.5989 80.3923 40.5515L64.0148 56.929L47.6375 40.5516C45.6848 38.599 42.519 38.599 40.5664 40.5516C38.6138 42.5042 38.6138 45.67 40.5664 47.6227L56.9438 64.0001L40.5664 80.3774C38.6138 82.3301 38.6138 85.4959 40.5664 87.4485C42.519 89.4011 45.6848 89.4011 47.6375 87.4485L64.0148 71.0711L80.3923 87.4486C82.3449 89.4012 85.5107 89.4012 87.4633 87.4486C89.416 85.4959 89.416 82.3301 87.4633 80.3775L71.0859 64.0001L87.4633 47.6226Z\\\"></path></mask><path fill-rule=\\\"evenodd\\\" clip-rule=\\\"evenodd\\\" d=\\\"M87.4633 47.6226C89.416 45.67 89.416 42.5042 87.4633 40.5515C85.5107 38.5989 82.3449 38.5989 80.3923 40.5515L64.0148 56.929L47.6375 40.5516C45.6848 38.599 42.519 38.599 40.5664 40.5516C38.6138 42.5042 38.6138 45.67 40.5664 47.6227L56.9438 64.0001L40.5664 80.3774C38.6138 82.3301 38.6138 85.4959 40.5664 87.4485C42.519 89.4011 45.6848 89.4011 47.6375 87.4485L64.0148 71.0711L80.3923 87.4486C82.3449 89.4012 85.5107 89.4012 87.4633 87.4486C89.416 85.4959 89.416 82.3301 87.4633 80.3775L71.0859 64.0001L87.4633 47.6226Z\\\" fill=\\\"#FF6479\\\"></path><path d=\\\"M64.0148 56.929L61.1864 59.7574L64.0148 62.5858L66.8433 59.7574L64.0148 56.929ZM47.6375 40.5516L44.809 43.38L47.6375 40.5516ZM40.5664 40.5516L43.3948 43.38L40.5664 40.5516ZM56.9438 64.0001L59.7722 66.8285L62.6006 64.0001L59.7722 61.1716L56.9438 64.0001ZM40.5664 80.3774L37.738 77.549L40.5664 80.3774ZM47.6375 87.4485L44.809 84.6201L47.6375 87.4485ZM64.0148 71.0711L66.8433 68.2427L64.0148 65.4143L61.1864 68.2427L64.0148 71.0711ZM87.4633 87.4486L90.2918 90.277L90.2918 90.277L87.4633 87.4486ZM71.0859 64.0001L68.2575 61.1716L65.4291 64.0001L68.2575 66.8285L71.0859 64.0001ZM84.6349 43.38C85.0254 43.7705 85.0254 44.4037 84.6349 44.7942L90.2918 50.451C93.8065 46.9363 93.8065 41.2378 90.2918 37.7231L84.6349 43.38ZM83.2207 43.38C83.6112 42.9894 84.2444 42.9894 84.6349 43.38L90.2918 37.7231C86.7771 34.2084 81.0786 34.2084 77.5639 37.7231L83.2207 43.38ZM66.8433 59.7574L83.2207 43.38L77.5639 37.7231L61.1864 54.1006L66.8433 59.7574ZM44.809 43.38L61.1864 59.7574L66.8433 54.1006L50.4659 37.7232L44.809 43.38ZM43.3948 43.38C43.7853 42.9895 44.4185 42.9895 44.809 43.38L50.4659 37.7232C46.9512 34.2084 41.2527 34.2084 37.738 37.7232L43.3948 43.38ZM43.3948 44.7942C43.0043 44.4037 43.0043 43.7705 43.3948 43.38L37.738 37.7232C34.2232 41.2379 34.2232 46.9364 37.738 50.4511L43.3948 44.7942ZM59.7722 61.1716L43.3948 44.7942L37.738 50.4511L54.1153 66.8285L59.7722 61.1716ZM43.3948 83.2059L59.7722 66.8285L54.1153 61.1716L37.738 77.549L43.3948 83.2059ZM43.3948 84.6201C43.0043 84.2295 43.0043 83.5964 43.3948 83.2059L37.738 77.549C34.2232 81.0637 34.2232 86.7622 37.738 90.2769L43.3948 84.6201ZM44.809 84.6201C44.4185 85.0106 43.7853 85.0106 43.3948 84.6201L37.738 90.2769C41.2527 93.7916 46.9512 93.7917 50.4659 90.2769L44.809 84.6201ZM61.1864 68.2427L44.809 84.6201L50.4659 90.2769L66.8433 73.8995L61.1864 68.2427ZM83.2207 84.6201L66.8433 68.2427L61.1864 73.8995L77.5638 90.277L83.2207 84.6201ZM84.6349 84.6201C84.2444 85.0107 83.6112 85.0107 83.2207 84.6201L77.5638 90.277C81.0786 93.7917 86.777 93.7917 90.2918 90.277L84.6349 84.6201ZM84.6349 83.2059C85.0254 83.5964 85.0254 84.2296 84.6349 84.6201L90.2918 90.277C93.8065 86.7623 93.8065 81.0638 90.2918 77.5491L84.6349 83.2059ZM68.2575 66.8285L84.6349 83.2059L90.2918 77.5491L73.9143 61.1716L68.2575 66.8285ZM84.6349 44.7942L68.2575 61.1716L73.9143 66.8285L90.2918 50.451L84.6349 44.7942Z\\\" fill=\\\"#404040\\\" mask=\\\"url(#path-5-outside-1)\\\"></path></svg>\"","module.exports = \"<svg viewBox=\\\"0 0 128 128\\\" fill=\\\"none\\\" xmlns=\\\"http://www.w3.org/2000/svg\\\"><circle cx=\\\"64\\\" cy=\\\"64\\\" r=\\\"64\\\" fill=\\\"#404040\\\"></circle><rect x=\\\"58.5789\\\" y=\\\"94.0632\\\" width=\\\"10.8424\\\" height=\\\"14.0748\\\" fill=\\\"white\\\"></rect><path fill-rule=\\\"evenodd\\\" clip-rule=\\\"evenodd\\\" d=\\\"M49.7201 72.799C49.7201 65.9079 42.1164 62.6609 40.3616 69.3249C39.9447 70.9085 39.7241 72.5592 39.7241 74.2557C39.7241 86.1656 50.5928 95.8204 64 95.8204C77.4072 95.8204 88.2758 86.1656 88.2758 74.2557C88.2758 72.5593 88.0553 70.9085 87.6383 69.325C85.8837 62.6611 78.28 65.908 78.28 72.799C78.28 80.6856 71.8866 87.0789 64.0001 87.0789C56.1135 87.0789 49.7201 80.6856 49.7201 72.799Z\\\" fill=\\\"white\\\"></path><rect x=\\\"53.3186\\\" y=\\\"19.862\\\" width=\\\"21.3628\\\" height=\\\"63.6407\\\" rx=\\\"10.6814\\\" fill=\\\"white\\\"></rect><mask id=\\\"path-5-outside-1\\\" maskUnits=\\\"userSpaceOnUse\\\" x=\\\"10.9819\\\" y=\\\"11.4462\\\" width=\\\"106.066\\\" height=\\\"106.066\\\" fill=\\\"black\\\"><rect fill=\\\"white\\\" x=\\\"10.9819\\\" y=\\\"11.4462\\\" width=\\\"106.066\\\" height=\\\"106.066\\\"></rect><path fill-rule=\\\"evenodd\\\" clip-rule=\\\"evenodd\\\" d=\\\"M87.4634 47.6226C89.416 45.67 89.416 42.5042 87.4634 40.5515C85.5108 38.5989 82.3449 38.5989 80.3923 40.5515L64.0149 56.929L47.6375 40.5516C45.6849 38.599 42.519 38.599 40.5664 40.5516C38.6138 42.5042 38.6138 45.67 40.5664 47.6227L56.9438 64.0001L40.5664 80.3774C38.6138 82.3301 38.6138 85.4959 40.5664 87.4485C42.519 89.4011 45.6849 89.4011 47.6375 87.4485L64.0149 71.0711L80.3923 87.4486C82.3449 89.4012 85.5107 89.4012 87.4634 87.4486C89.416 85.4959 89.416 82.3301 87.4634 80.3775L71.0859 64.0001L87.4634 47.6226Z\\\"></path></mask><path fill-rule=\\\"evenodd\\\" clip-rule=\\\"evenodd\\\" d=\\\"M87.4634 47.6226C89.416 45.67 89.416 42.5042 87.4634 40.5515C85.5108 38.5989 82.3449 38.5989 80.3923 40.5515L64.0149 56.929L47.6375 40.5516C45.6849 38.599 42.519 38.599 40.5664 40.5516C38.6138 42.5042 38.6138 45.67 40.5664 47.6227L56.9438 64.0001L40.5664 80.3774C38.6138 82.3301 38.6138 85.4959 40.5664 87.4485C42.519 89.4011 45.6849 89.4011 47.6375 87.4485L64.0149 71.0711L80.3923 87.4486C82.3449 89.4012 85.5107 89.4012 87.4634 87.4486C89.416 85.4959 89.416 82.3301 87.4634 80.3775L71.0859 64.0001L87.4634 47.6226Z\\\" fill=\\\"#FF3550\\\"></path><path d=\\\"M64.0149 56.929L61.1864 59.7574L64.0149 62.5858L66.8433 59.7574L64.0149 56.929ZM40.5664 40.5516L43.3948 43.38L40.5664 40.5516ZM40.5664 47.6227L43.3948 44.7942L40.5664 47.6227ZM56.9438 64.0001L59.7722 66.8285L62.6007 64.0001L59.7722 61.1716L56.9438 64.0001ZM64.0149 71.0711L66.8433 68.2427L64.0149 65.4143L61.1864 68.2427L64.0149 71.0711ZM87.4634 87.4486L90.2918 90.277L90.2918 90.277L87.4634 87.4486ZM71.0859 64.0001L68.2575 61.1716L65.4291 64.0001L68.2575 66.8285L71.0859 64.0001ZM84.635 43.38C85.0255 43.7705 85.0255 44.4037 84.635 44.7942L90.2918 50.451C93.8065 46.9363 93.8065 41.2378 90.2918 37.7231L84.635 43.38ZM83.2207 43.38C83.6113 42.9894 84.2444 42.9894 84.635 43.38L90.2918 37.7231C86.7771 34.2084 81.0786 34.2084 77.5639 37.7231L83.2207 43.38ZM66.8433 59.7574L83.2207 43.38L77.5639 37.7231L61.1864 54.1006L66.8433 59.7574ZM44.8091 43.38L61.1864 59.7574L66.8433 54.1006L50.4659 37.7232L44.8091 43.38ZM43.3948 43.38C43.7854 42.9895 44.4185 42.9895 44.8091 43.38L50.4659 37.7232C46.9512 34.2084 41.2527 34.2084 37.738 37.7232L43.3948 43.38ZM43.3948 44.7942C43.0043 44.4037 43.0043 43.7705 43.3948 43.38L37.738 37.7232C34.2233 41.2379 34.2233 46.9364 37.738 50.4511L43.3948 44.7942ZM59.7722 61.1716L43.3948 44.7942L37.738 50.4511L54.1154 66.8285L59.7722 61.1716ZM43.3949 83.2059L59.7722 66.8285L54.1154 61.1716L37.738 77.549L43.3949 83.2059ZM43.3949 84.6201C43.0043 84.2295 43.0043 83.5964 43.3949 83.2059L37.738 77.549C34.2233 81.0637 34.2233 86.7622 37.738 90.2769L43.3949 84.6201ZM44.8091 84.6201C44.4185 85.0106 43.7854 85.0106 43.3949 84.6201L37.738 90.2769C41.2527 93.7916 46.9512 93.7917 50.4659 90.2769L44.8091 84.6201ZM61.1864 68.2427L44.8091 84.6201L50.4659 90.2769L66.8433 73.8995L61.1864 68.2427ZM83.2207 84.6201L66.8433 68.2427L61.1864 73.8995L77.5639 90.277L83.2207 84.6201ZM84.6349 84.6201C84.2444 85.0107 83.6113 85.0107 83.2207 84.6201L77.5639 90.277C81.0786 93.7917 86.7771 93.7917 90.2918 90.277L84.6349 84.6201ZM84.6349 83.2059C85.0255 83.5964 85.0255 84.2296 84.6349 84.6201L90.2918 90.277C93.8065 86.7623 93.8065 81.0638 90.2918 77.5491L84.6349 83.2059ZM68.2575 66.8285L84.6349 83.2059L90.2918 77.5491L73.9144 61.1716L68.2575 66.8285ZM84.635 44.7942L68.2575 61.1716L73.9144 66.8285L90.2918 50.451L84.635 44.7942Z\\\" fill=\\\"#404040\\\" mask=\\\"url(#path-5-outside-1)\\\"></path></svg>\"","// extracted by mini-css-extract-plugin\nmodule.exports = {\"label\":\"spectating-label__label__3JS5A\"};","module.exports = \"#version 300 es\\nprecision highp float;\\nprecision highp int;\\n\\n// Keep these separate so three only sets them once\\nuniform mat4 viewMatrix;\\nuniform mat4 projectionMatrix;\\n\\nlayout(std140) uniform InstanceData {\\n  mat4 transforms[MAX_INSTANCES];\\n  vec4 colors[MAX_INSTANCES];\\n  vec4 uvTransforms[MAX_INSTANCES];\\n  vec4 mapSettings[MAX_INSTANCES];\\n\\n  vec4 hubs_SweepParams[MAX_INSTANCES];\\n\\n  vec3 hubs_InteractorOnePos;\\n  bool hubs_IsFrozen;\\n\\n  vec3 hubs_InteractorTwoPos;\\n  float hubs_Time;\\n\\n} instanceData;\\n\\nout vec3 hubs_WorldPosition;\\nout float fogDepth;\\n\\nin vec3 position;\\nin vec2 uv;\\n\\n#ifdef PSEUDO_INSTANCING\\nin float instance;\\nflat out uint vInstance;\\n#endif\\n\\n#ifdef VERTEX_COLORS\\nin vec3 color;\\n#endif\\n\\nout vec2 vUv;\\nout vec4 vColor;\\n\\nflat out vec4 vUVTransform;\\nflat out vec4 vMapSettings;\\n\\nvoid main() {\\n  #ifdef PSEUDO_INSTANCING\\n  uint instanceIndex = uint(instance);\\n  #elif\\n  uint instanceIndex = gl_InstanceID;\\n  #endif\\n\\n  vColor = instanceData.colors[instanceIndex];\\n\\n  #ifdef VERTEX_COLORS\\n  vColor *= vec4(color, 1.0);\\n  #endif\\n\\n  vUv = uv;\\n  vUVTransform = instanceData.uvTransforms[instanceIndex];\\n  vMapSettings = instanceData.mapSettings[instanceIndex];\\n\\n  vec4 mvPosition = viewMatrix * instanceData.transforms[instanceIndex] * vec4(position, 1.0);\\n\\n  gl_Position = projectionMatrix * mvPosition;\\n\\n  hubs_WorldPosition = (instanceData.transforms[instanceIndex] * vec4(position, 1.0)).xyz;\\n  vInstance = instanceIndex;\\n\\n  fogDepth = -mvPosition.z;\\n}\\n\"","module.exports = \"#version 300 es\\nprecision highp float;\\nprecision highp int;\\nprecision highp sampler2DArray;\\n\\nlayout(std140) uniform InstanceData {\\n  mat4 transforms[MAX_INSTANCES];\\n  vec4 colors[MAX_INSTANCES];\\n  vec4 uvTransforms[MAX_INSTANCES];\\n  vec4 mapSettings[MAX_INSTANCES];\\n\\n  vec4 hubs_SweepParams[MAX_INSTANCES];\\n\\n  vec3 hubs_InteractorOnePos;\\n  bool hubs_IsFrozen;\\n\\n  vec3 hubs_InteractorTwoPos;\\n  float hubs_Time;\\n\\n} instanceData;\\nin vec3 hubs_WorldPosition;\\n#ifdef PSEUDO_INSTANCING\\nflat in uint vInstance;\\n#endif\\n\\n\\nuniform sampler2DArray map;\\n\\nin float fogDepth;\\nuniform vec3 fogColor;\\n\\n// Fog Type\\n// 0.0 -> disabled\\n// 1.0 -> linear\\n// 2.0 -> exponential\\nuniform vec4 fogOptions; // r = type; g = density; b = near; a = far;\\n\\nin vec2 vUv;\\nin vec4 vColor;\\nflat in vec4 vUVTransform;\\nflat in vec4 vMapSettings;\\n\\nout vec4 outColor;\\n\\nfloat applyWrapping(float value, int mode) {\\n  if (mode == 0) {\\n    // CLAMP_TO_EDGE - default\\n    return clamp(value, 0.0, 1.0);\\n  } else if (mode == 1) {\\n    // REPEAT\\n    return fract(value);\\n  } else {\\n    // MIRRORED_REPEAT\\n    float n = mod(value, 2.0);\\n    return mix(n, 2.0 - n, step(1.0, n));\\n  }\\n}\\n\\nvoid main() {\\n  vec2 uv = vUv;\\n\\n  int wrapS = int(vMapSettings.y);\\n  int wrapT = int(vMapSettings.z);\\n  uv.s = applyWrapping(uv.s, wrapS);\\n  uv.t = applyWrapping(uv.t, wrapT);\\n\\n  vec2 uvMin = vUVTransform.xy;\\n  vec2 uvScale = vUVTransform.zw;\\n  uv = uvMin + uv * uvScale;\\n\\n  int mapIdx = int(vMapSettings.x);\\n  outColor = texture(map, vec3(uv, mapIdx)) * vColor;\\n  if(outColor.a == 0.0) {\\n      discard;\\n  }\\n\\n  bool hubs_HighlightInteractorOne = instanceData.hubs_SweepParams[vInstance].z > 0.0;\\n  bool hubs_HighlightInteractorTwo = instanceData.hubs_SweepParams[vInstance].w > 0.0;\\n  bool hubs_IsFrozen = instanceData.hubs_IsFrozen;\\n\\n  if (hubs_HighlightInteractorOne || hubs_HighlightInteractorTwo || hubs_IsFrozen) {\\n\\n      bool hubs_EnableSweepingEffect = true;\\n      vec2 hubs_SweepParams = instanceData.hubs_SweepParams[vInstance].xy;\\n      float hubs_Time = instanceData.hubs_Time;\\n\\n      float ratio = 0.0;\\n      float size = hubs_SweepParams.t - hubs_SweepParams.s;\\n\\n      if (hubs_EnableSweepingEffect) {\\n          float line = mod(hubs_Time / 500.0 * size, size * 3.0) + hubs_SweepParams.s - size / 3.0;\\n\\n          if (hubs_WorldPosition.y < line) {\\n              // Highlight with a sweeping gradient.\\n              ratio = max(0.0, 1.0 - (line - hubs_WorldPosition.y) / (size * 1.5));\\n          }\\n      }\\n\\n      // Highlight with a gradient falling off with distance.\\n      float pulse = 1.0 / (size + 0.2) * 8.0 + 1.0 / (size + 0.3) * 3.0 * (sin(hubs_Time / 1000.0) + 1.0);\\n\\n      if (hubs_HighlightInteractorOne) {\\n          float dist1 = distance(hubs_WorldPosition, instanceData.hubs_InteractorOnePos);\\n          ratio += -min(1.0, pow(dist1 * pulse, 3.0)) + 1.0;\\n      }\\n\\n      if (hubs_HighlightInteractorTwo) {\\n          float dist2 = distance(hubs_WorldPosition, instanceData.hubs_InteractorTwoPos);\\n          ratio += -min(1.0, pow(dist2 * pulse, 3.0)) + 1.0;\\n      }\\n\\n      ratio = min(1.0, ratio);\\n\\n      // Gamma corrected highlight color\\n      vec3 highlightColor = vec3(0.184, 0.499, 0.933);\\n\\n      outColor = vec4((outColor.rgb * (1.0 - ratio)) + (highlightColor * ratio), outColor.a);\\n  }\\n\\n  float fogType = fogOptions.r;\\n\\n  if (fogType > 0.5) {\\n    float fogFactor = 0.0;\\n\\n    if (fogType < 1.5) {\\n      float fogNear = fogOptions.z;\\n      float fogFar = fogOptions.w;\\n      fogFactor = smoothstep( fogNear, fogFar, fogDepth );\\n    } else {\\n      float fogDensity = fogOptions.y;\\n      fogFactor = 1.0 - exp( - fogDensity * fogDensity * fogDepth * fogDepth );\\n    }\\n\\n    outColor.rgb = mix( outColor.rgb, fogColor, fogFactor );\\n  }\\n}\\n\"","module.exports = __webpack_public_path__ + \"assets/images/spritesheets/sprite-system-action-spritesheet-63df7c855b130ea65c284bd3f8e98afc.png\";","module.exports = __webpack_public_path__ + \"assets/images/spritesheets/sprite-system-notice-spritesheet-0b7026f818dc58d5d33db88931d02c7a.png\";","module.exports = \"attribute vec4 mvCol0;\\nattribute vec4 mvCol1;\\nattribute vec4 mvCol2;\\nattribute vec4 mvCol3;\\nattribute vec3 a_vertices;\\nattribute vec2 a_uvs;\\nvarying vec2 v_uvs;\\nattribute float a_hubs_EnableSweepingEffect;\\nvarying float v_hubs_EnableSweepingEffect;\\nattribute vec2 a_hubs_SweepParams;\\nvarying vec2 v_hubs_SweepParams;\\nvarying vec3 hubs_WorldPosition;\\n\\nvoid main() {\\n  mat4 mv = mat4(mvCol0, mvCol1, mvCol2, mvCol3);\\n  gl_Position = projectionMatrix * modelViewMatrix * mv * vec4(a_vertices, 1.0);\\n  v_uvs = a_uvs;\\n  v_hubs_EnableSweepingEffect = a_hubs_EnableSweepingEffect;\\n  v_hubs_SweepParams = a_hubs_SweepParams;\\n\\n  vec4 wt = vec4(a_vertices, 1.0);\\n  hubs_WorldPosition = (mv * wt).xyz;\\n}\\n\"","module.exports = \"precision mediump float;\\n\\nuniform sampler2D u_spritesheet;\\n\\nvarying vec2 v_uvs;\\n\\nvarying float v_hubs_EnableSweepingEffect;\\nvarying vec2 v_hubs_SweepParams;\\nvarying vec3 hubs_WorldPosition;\\nuniform bool hubs_HighlightInteractorOne;\\nuniform vec3 hubs_InteractorOnePos;\\nuniform bool hubs_HighlightInteractorTwo;\\nuniform vec3 hubs_InteractorTwoPos;\\nuniform float hubs_Time;\\n\\n#define GAMMA_FACTOR 2.2\\n\\nvec4 LinearToGamma( in vec4 value, in float gammaFactor ) {\\n  return vec4( pow( value.rgb, vec3( 1.0 / gammaFactor ) ), value.a );\\n}\\n\\nvec4 linearToOutputTexel( vec4 value ) {\\n  return LinearToGamma( value, float( GAMMA_FACTOR ) );\\n}\\n\\nvoid main() {\\n    vec4 texColor = texture2D(u_spritesheet, v_uvs);\\n\\n    float ratio = 0.0;\\n    if (v_hubs_EnableSweepingEffect > 0.9 ) {\\n        float size = v_hubs_SweepParams.t - v_hubs_SweepParams.s * 1.0;\\n        float line = mod(hubs_Time / 500.0 * size, size * 3.0) + v_hubs_SweepParams.s - size / 3.0;\\n        if (hubs_WorldPosition.y < line) {\\n            ratio = max(0.0, 1.0 - (line - hubs_WorldPosition.y) / (size * 1.5));\\n        }\\n\\n    }\\n    ratio = min(1.0, ratio);\\n\\n    vec4 highlightColor = linearToOutputTexel(vec4(0.184, 0.499, 0.933, 1.0));\\n    gl_FragColor = vec4((texColor.rgb * (1.0 - ratio)) + (highlightColor.rgb * ratio), texColor.a);\\n}\\n\"","import qsTruthy from \"./qs_truthy\";\n\nconst showLog = qsTruthy(\"debug_log\");\n\nif (showLog) {\n  const template = document.createElement(\"template\");\n  template.innerHTML = `\n    <style>\n      #debug-log {\n        position: absolute;\n        top: 13em;\n        background: white;\n        opacity: 0.7;\n        z-index: 1000;\n      }\n      #debug-log, #debug-log-input {\n        font-family: monospace;\n        font-size: 11px;\n        width: 100%;\n      }\n\n      #debug-log-controls {\n        display: flex;\n        padding: 0.2em;\n      }\n\n      #debug-log-eval {\n        display: flex;\n        flex: 1;\n      }\n\n      #debug-log-log {\n        overflow: auto;\n        height: 30vh;\n      }\n      #debug-log-log.minimized {\n        height: auto;\n      }\n      #debug-log-log.minimized .entry {\n        display: none;\n      }\n      #debug-log-log.minimized .entry:last-child {\n        display: block;\n      }\n      #debug-log-log .entry {\n        border: 1px solid grey;\n        margin: 0.2em;\n        padding: 0.2em;\n      }\n      #debug-log-log .entry.error { background-color: pink; }\n      #debug-log-log .entry.warn { background-color: orange; }\n    </style>\n    <div id=\"debug-log\">\n        <div id=\"debug-log-controls\">\n          <form id=\"debug-log-eval\">\n            <input id=\"debug-log-input\" placeholder=\"&gt;&gt;\" autocorrect=\"off\" autocapitalize=\"none\" />\n            <button>&gt;</button>\n          </form>\n          <button id=\"debug-log-minimize\">_</button>\n        </div>\n        <div id=\"debug-log-log\"></div>\n    </div>\n  `;\n\n  document.addEventListener(\"DOMContentLoaded\", () => {\n    document.body.appendChild(template.content);\n  });\n\n  const debugLog = template.content.querySelector(\"#debug-log-log\");\n  debugLog.addEventListener(\"wheel\", e => e.stopPropagation());\n\n  const debugLogInput = template.content.querySelector(\"#debug-log-input\");\n  const debugLogEval = template.content.querySelector(\"#debug-log-eval\");\n  debugLogEval.onsubmit = e => {\n    e.preventDefault();\n    console.log(eval(`(${debugLogInput.value})`));\n  };\n\n  let minimized = false;\n  const debugLogMinimize = template.content.querySelector(\"#debug-log-minimize\");\n  debugLogMinimize.onclick = () => {\n    minimized = !minimized;\n    debugLog.className = minimized ? \"minimized\" : \"\";\n    debugLog.scrollTop = debugLog.scrollHeight - debugLog.clientHeight;\n  };\n\n  const origConsoleInfo = console.info;\n  const origConsoleLog = console.log;\n  const origConsoleError = console.error;\n  const origConsoleWarn = console.warn;\n\n  const log = function(className, objs) {\n    let entry;\n    if (debugLog.childNodes.length > 1000) {\n      entry = debugLog.firstChild;\n    } else {\n      entry = document.createElement(\"div\");\n      entry.classList.add(\"entry\");\n    }\n    entry.classList.remove(\"warn\", \"error\");\n    entry.classList.add(className);\n\n    const arr = Array.from(objs);\n    const firstObj = arr[0];\n    let content;\n    if (typeof firstObj === \"string\" && firstObj.includes(\"%c\")) {\n      content = firstObj.replace(/%c/g, \"\");\n    } else if (firstObj instanceof Error) {\n      content = `${firstObj.message}\\n${firstObj.stack}`;\n    } else {\n      content = arr\n        .map(obj => {\n          if (typeof obj === \"string\") return obj;\n          return JSON.stringify(obj);\n        })\n        .join(\" \");\n    }\n\n    const time = new Date().toISOString().substring(11, 23);\n    entry.textContent = `[${time}] ${content}`;\n\n    const shouldScroll = debugLog.scrollTop === debugLog.scrollHeight - debugLog.clientHeight;\n    debugLog.append(entry);\n    if (shouldScroll) debugLog.scrollTop = debugLog.scrollHeight - debugLog.clientHeight;\n  };\n\n  console.warn = function() {\n    origConsoleWarn.apply(null, arguments);\n    log(\"warn\", arguments);\n  };\n\n  console.error = function() {\n    origConsoleError.apply(null, arguments);\n    log(\"error\", arguments);\n  };\n\n  console.log = function() {\n    origConsoleLog.apply(null, arguments);\n    log(\"log\", arguments);\n  };\n\n  console.info = function() {\n    origConsoleInfo.apply(null, arguments);\n    log(\"info\", arguments);\n  };\n\n  window.onunhandledrejection = e => log(\"error\", [e.reason.message, e.reason.code, e.reason.name]);\n  window.onerror = e => log(\"error\", [e]);\n}\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"ui\":\"hub__ui__3UYRO\",\"ui-dialog\":\"hub__ui-dialog__vlyfc\",\"uiDialog\":\"hub__ui-dialog__vlyfc\",\"ui-interactive\":\"hub__ui-interactive__3bdyc\",\"uiInteractive\":\"hub__ui-interactive__3bdyc\",\"object-list\":\"hub__object-list__Y0_hh\",\"objectList\":\"hub__object-list__Y0_hh\",\"presence-info\":\"hub__presence-info__dqWyo\",\"presenceInfo\":\"hub__presence-info__dqWyo\",\"corner-button\":\"hub__corner-button__2KphD\",\"cornerButton\":\"hub__corner-button__2KphD\",\"profile-entry\":\"hub__profile-entry__1RY0R\",\"profileEntry\":\"hub__profile-entry__1RY0R\",\"form-submit\":\"hub__form-submit__12yem\",\"formSubmit\":\"hub__form-submit__12yem\",\"nag-corner-button\":\"hub__nag-corner-button__lNoyE\",\"nagCornerButton\":\"hub__nag-corner-button__lNoyE\",\"choose-scene-button\":\"hub__choose-scene-button__5Y0Q_\",\"chooseSceneButton\":\"hub__choose-scene-button__5Y0Q_\",\"choose-avatar\":\"hub__choose-avatar__22JJm\",\"chooseAvatar\":\"hub__choose-avatar__22JJm\",\"entry-button-secondary\":\"hub__entry-button-secondary__2ui-g\",\"entryButtonSecondary\":\"hub__entry-button-secondary__2ui-g\",\"entry-panel\":\"hub__entry-panel__cCmIv\",\"entryPanel\":\"hub__entry-panel__cCmIv\",\"button-container\":\"hub__button-container__38FOc\",\"buttonContainer\":\"hub__button-container__38FOc\",\"secondary-action-button\":\"hub__secondary-action-button__2KoCD\",\"secondaryActionButton\":\"hub__secondary-action-button__2KoCD\",\"leave-button\":\"hub__leave-button__1YK4o\",\"leaveButton\":\"hub__leave-button__1YK4o\",\"interstitial\":\"hub__interstitial__3WXbJ\",\"entry-button\":\"hub__entry-button__1e9jM\",\"entryButton\":\"hub__entry-button__1e9jM\",\"action-button\":\"hub__action-button__3zqlu\",\"actionButton\":\"hub__action-button__3zqlu\",\"collapse-button\":\"hub__collapse-button__3N-6b\",\"collapseButton\":\"hub__collapse-button__3N-6b\",\"favorite-button\":\"hub__favorite-button__1Qgbp\",\"favoriteButton\":\"hub__favorite-button__1Qgbp\",\"back\":\"hub__back__3AZh2\",\"form-field-text\":\"hub__form-field-text__tR1Lt\",\"formFieldText\":\"hub__form-field-text__tR1Lt\",\"lobby-label\":\"hub__lobby-label__2ktmo\",\"lobbyLabel\":\"hub__lobby-label__2ktmo\",\"label\":\"hub__label__1kjp1\",\"title\":\"hub__title__ezGEu\",\"name\":\"hub__name__2umw1\",\"rename-button\":\"hub__rename-button__h-4K7\",\"renameButton\":\"hub__rename-button__h-4K7\",\"center\":\"hub__center__1Mvfu\",\"wide-button\":\"hub__wide-button__1yqDc\",\"wideButton\":\"hub__wide-button__1yqDc\",\"screen-sharing\":\"hub__screen-sharing__2VF91\",\"screenSharing\":\"hub__screen-sharing__2VF91\",\"checkbox\":\"hub__checkbox__32dyv\",\"close\":\"hub__close__gWtCN\",\"invite-tip\":\"hub__invite-tip__9enoe\",\"inviteTip\":\"hub__invite-tip__9enoe\",\"loading-text\":\"hub__loading-text__1WDud\",\"loadingText\":\"hub__loading-text__1WDud\",\"streaming-tip\":\"hub__streaming-tip__1LnId\",\"streamingTip\":\"hub__streaming-tip__1LnId\",\"streaming-tip-attach-point\":\"hub__streaming-tip-attach-point__1oCgh\",\"streamingTipAttachPoint\":\"hub__streaming-tip-attach-point__1oCgh\",\"streaming-tip-close\":\"hub__streaming-tip-close__E6fwS\",\"streamingTipClose\":\"hub__streaming-tip-close__E6fwS\",\"streaming-tip-message\":\"hub__streaming-tip-message__XcScW\",\"streamingTipMessage\":\"hub__streaming-tip-message__XcScW\",\"ui-dialog-box-contents\":\"hub__ui-dialog-box-contents__PZ5qP\",\"uiDialogBoxContents\":\"hub__ui-dialog-box-contents__PZ5qP\",\"backgrounded\":\"hub__backgrounded__30IfD\",\"in-room-favorite-button\":\"hub__in-room-favorite-button__2T-zs\",\"inRoomFavoriteButton\":\"hub__in-room-favorite-button__2T-zs\",\"help-button\":\"hub__help-button__3TCSZ\",\"helpButton\":\"hub__help-button__3TCSZ\",\"occupant-count\":\"hub__occupant-count__3eAEj\",\"occupantCount\":\"hub__occupant-count__3eAEj\",\"presence-info-selected\":\"hub__presence-info-selected__FRBSA\",\"presenceInfoSelected\":\"hub__presence-info-selected__FRBSA\",\"camera-mode-exit-button\":\"hub__camera-mode-exit-button__BqKKt\",\"cameraModeExitButton\":\"hub__camera-mode-exit-button__BqKKt\",\"corner-button-selected\":\"hub__corner-button-selected__Cqa93\",\"cornerButtonSelected\":\"hub__corner-button-selected__Cqa93\",\"invite-tip-attach-point\":\"hub__invite-tip-attach-point__2y_bz\",\"inviteTipAttachPoint\":\"hub__invite-tip-attach-point__2y_bz\",\"avatar-editor\":\"hub__avatar-editor__2b8-H\",\"avatarEditor\":\"hub__avatar-editor__2b8-H\",\"logo\":\"hub__logo__3kJSj\",\"form\":\"hub__form__3kQXh\",\"box\":\"hub__box__2SMbn\",\"links\":\"hub__links__1C6Ce\",\"display-name\":\"hub__display-name__36hFZ\",\"displayName\":\"hub__display-name__36hFZ\",\"preview\":\"hub__preview__2UUoU\",\"edit-avatar\":\"hub__edit-avatar__22A53\",\"editAvatar\":\"hub__edit-avatar__22A53\",\"entry-dialog\":\"hub__entry-dialog__2Ljux\",\"entryDialog\":\"hub__entry-dialog__2Ljux\",\"favorited\":\"hub__favorited__3c3lB\",\"icon\":\"hub__icon__1pzf7\",\"bolded\":\"hub__bolded__2MYLZ\",\"subtitle\":\"hub__subtitle__3kYcd\",\"room-subtitle\":\"hub__room-subtitle__GhUCG\",\"roomSubtitle\":\"hub__room-subtitle__GhUCG\",\"lobby\":\"hub__lobby__2VW6G\",\"profile-icon\":\"hub__profile-icon__fwSfD\",\"profileIcon\":\"hub__profile-icon__fwSfD\",\"button-subtitle\":\"hub__button-subtitle__3kkpo\",\"buttonSubtitle\":\"hub__button-subtitle__3kkpo\",\"audio-loader\":\"hub__audio-loader__F5ovU\",\"audioLoader\":\"hub__audio-loader__F5ovU\",\"webvr-link-container\":\"hub__webvr-link-container__1Vq5m\",\"webvrLinkContainer\":\"hub__webvr-link-container__1Vq5m\",\"webvr-link\":\"hub__webvr-link__xW04U\",\"webvrLink\":\"hub__webvr-link__xW04U\",\"secondary\":\"hub__secondary__22yt_\"};","\nAFRAME.registerSystem('my-component', {\n\tinit: function () {\n\t\tconsole.log(`The \"${this.name}\" system is initializing!`)\n\t\tthis.entities = [];\n\t},\n\t\n\tregisterMe: function (el) {\n\t\tthis.entities.push(el);\n\t},\n\t\n\tunregisterMe: function (el) {\n\t\tvar index = this.entities.indexOf(el);\n\t\tthis.entities.splice(index, 1);\n\t}\n});\n\nAFRAME.registerComponent('my-component', {\n\tinit: function () {\n\t\tthis.system.registerMe(this.el);\n\t},\n\t\n\tremove: function () {\n\t\tthis.system.unregisterMe(this.el);\n\t}\n});","/**\n * Chrome and Safari will start Audio contexts in a \"suspended\" state.\n * A user interaction (touch/mouse event) is needed in order to resume the AudioContext.\n */\n\ndocument.addEventListener(\"DOMContentLoaded\", () => {\n  const ctx = THREE.AudioContext.getContext();\n\n  function resume() {\n    ctx.resume();\n\n    setTimeout(function() {\n      if (ctx.state === \"running\") {\n        document.body.removeEventListener(\"touchend\", resume, false);\n        document.body.removeEventListener(\"mouseup\", resume, false);\n      }\n    }, 0);\n  }\n\n  document.body.addEventListener(\"touchend\", resume, false);\n  document.body.addEventListener(\"mouseup\", resume, false);\n});\n","// Monkeypatch to address performance issue with updating panner nodes\n// TODO this needs to be merged into 3.js\n\nTHREE.PositionalAudio.prototype.updateMatrixWorld = (function() {\n  const position = new THREE.Vector3();\n  const quaternion = new THREE.Quaternion();\n\n  const scale = new THREE.Vector3();\n  const orientation = new THREE.Vector3();\n\n  return function updateMatrixWorld(force) {\n    THREE.Object3D.prototype.updateMatrixWorld.call(this, force);\n\n    let setInitial = false;\n\n    if (!this._lastPosition) {\n      setInitial = true;\n      this._lastPosition = new THREE.Vector3();\n      this._lastOrientation = new THREE.Vector3();\n      this._lastListenerPosition = new THREE.Vector3();\n    }\n\n    const panner = this.panner;\n    const listener = panner.context.listener;\n    this.matrixWorld.decompose(position, quaternion, scale);\n    orientation.set(0, 0, 1).applyQuaternion(quaternion);\n\n    // Need to update the position on this node if either the listener moves or this node moves,\n    // because otherwise there are audio artifacts in Chrome.\n    if (\n      setInitial ||\n      Math.abs(position.x - this._lastPosition.x) > Number.EPSILON ||\n      Math.abs(position.y - this._lastPosition.y) > Number.EPSILON ||\n      Math.abs(position.z - this._lastPosition.z) > Number.EPSILON ||\n      Math.abs(orientation.x - this._lastOrientation.x) > Number.EPSILON ||\n      Math.abs(orientation.y - this._lastOrientation.y) > Number.EPSILON ||\n      Math.abs(orientation.z - this._lastOrientation.z) > Number.EPSILON ||\n      (listener.positionX && Math.abs(listener.positionX.value - this._lastListenerPosition.x) > Number.EPSILON) ||\n      (listener.positionY && Math.abs(listener.positionY.value - this._lastListenerPosition.y) > Number.EPSILON) ||\n      (listener.positionZ && Math.abs(listener.positionZ.value - this._lastListenerPosition.z) > Number.EPSILON)\n    ) {\n      panner.setPosition(position.x, position.y, position.z);\n      panner.setOrientation(orientation.x, orientation.y, orientation.z);\n\n      this._lastPosition.x = position.x;\n      this._lastPosition.y = position.y;\n      this._lastPosition.z = position.z;\n\n      this._lastOrientation.x = orientation.x;\n      this._lastOrientation.y = orientation.y;\n      this._lastOrientation.z = orientation.z;\n\n      if (listener.positionX && listener.positionY && listener.positionZ) {\n        this._lastListenerPosition.x = listener.positionX.value;\n        this._lastListenerPosition.y = listener.positionY.value;\n        this._lastListenerPosition.z = listener.positionZ.value;\n      }\n    }\n  };\n})();\n","AFRAME.registerComponent(\"scale-in-screen-space\", {\n  schema: {\n    baseScale: { type: \"vec3\", default: { x: 1, y: 1, z: 1 } },\n    addedScale: { type: \"vec3\", default: { x: 1, y: 1, z: 1 } }\n  },\n\n  play() {\n    if (!this.didRegister) {\n      this.didRegister = true;\n      this.el.sceneEl.systems[\"hubs-systems\"].scaleInScreenSpaceSystem.register(this);\n    }\n  },\n  remove() {\n    if (this.didRegister) {\n      this.el.sceneEl.systems[\"hubs-systems\"].scaleInScreenSpaceSystem.unregister(this);\n    }\n  }\n});\n","/**\n * Toggles the position of 2 bones into \"on\" and \"off\" positions to indicate mute state.\n * @namespace avatar\n * @component bone-mute-state-indicator\n */\nAFRAME.registerComponent(\"bone-mute-state-indicator\", {\n  schema: {\n    unmutedBoneName: { default: \"Watch_Joint_MicON\" },\n    mutedBoneName: { default: \"Watch_Joint_Muted\" },\n    onPos: { default: 0.81 },\n    offPos: { default: 0.5 }\n  },\n\n  init() {\n    this.onStateToggled = this.onStateToggled.bind(this);\n    this.el.addEventListener(\"model-loaded\", () => {\n      this.unmutedBone = this.el.object3D.getObjectByName(this.data.unmutedBoneName);\n      this.mutedBone = this.el.object3D.getObjectByName(this.data.mutedBoneName);\n      this.modelLoaded = true;\n\n      this.updateMuteState();\n    });\n  },\n\n  play() {\n    this.el.sceneEl.addEventListener(\"stateadded\", this.onStateToggled);\n    this.el.sceneEl.addEventListener(\"stateremoved\", this.onStateToggled);\n  },\n\n  pause() {\n    this.el.sceneEl.removeEventListener(\"stateadded\", this.onStateToggled);\n    this.el.sceneEl.removeEventListener(\"stateremoved\", this.onStateToggled);\n  },\n\n  onStateToggled(e) {\n    if (!e.detail.state === \"muted\") return;\n    this.updateMuteState();\n  },\n\n  updateMuteState() {\n    if (!this.modelLoaded) return;\n    const muted = this.el.sceneEl.is(\"muted\");\n    this.mutedBone.position.y = muted ? this.data.onPos : this.data.offPos;\n    this.unmutedBone.position.y = !muted ? this.data.onPos : this.data.offPos;\n    this.mutedBone.matrixNeedsUpdate = true;\n    this.unmutedBone.matrixNeedsUpdate = true;\n  }\n});\n","/**\n * Scales an object to near-zero if the object is invisible. Useful for bones representing avatar body parts.\n * @namespace avatar\n * @component bone-visibility\n */\nAFRAME.registerComponent(\"bone-visibility\", {\n  tick() {\n    const { visible } = this.el.object3D;\n\n    if (this.lastVisible !== visible) {\n      if (visible) {\n        this.el.object3D.scale.set(1, 1, 1);\n      } else {\n        // Three.js doesn't like updating matrices with 0 scale, so we set it to a near zero number.\n        this.el.object3D.scale.set(0.00000001, 0.00000001, 0.00000001);\n      }\n\n      this.lastVisible = visible;\n      this.el.object3D.updateMatrices(true, true);\n      this.el.object3D.updateMatrixWorld(true, true);\n    }\n  }\n});\n","/**\n * Creates a box around the element (assumed to be the camera's PoV) which can be used for fade-to-black.\n */\n\nconst FADE_DURATION_MS = 750;\n\nAFRAME.registerComponent(\"fader\", {\n  schema: {\n    direction: { type: \"string\", default: \"none\" } // \"in\", \"out\", or \"none\"\n  },\n\n  init() {\n    const mesh = new THREE.Mesh(\n      new THREE.BoxGeometry(),\n      new THREE.MeshBasicMaterial({ color: 0x0, side: THREE.BackSide, opacity: 0, transparent: true, fog: false })\n    );\n    mesh.scale.x = mesh.scale.y = mesh.scale.z = 0.16;\n    mesh.matrixNeedsUpdate = true;\n    this.el.object3D.add(mesh);\n    this.mesh = mesh;\n  },\n\n  fadeOut() {\n    return this.beginTransition(\"out\");\n  },\n\n  fadeIn() {\n    return this.beginTransition(\"in\");\n  },\n\n  async beginTransition(direction) {\n    if (this._resolveFinish) {\n      throw new Error(\"Cannot fade while a fade is happening.\");\n    }\n\n    this.el.setAttribute(\"fader\", { direction });\n\n    return new Promise(res => {\n      if (this.mesh.material.opacity === (direction == \"in\" ? 0 : 1)) {\n        res();\n      } else {\n        this._resolveFinish = res;\n      }\n    });\n  },\n\n  tick(t, dt) {\n    const mat = this.mesh.material;\n    this.mesh.visible = this.data.direction === \"out\" || mat.opacity !== 0;\n    if (!this.mesh.visible) return;\n\n    if (this.data.direction === \"in\") {\n      mat.opacity = Math.max(0, mat.opacity - (1.0 / FADE_DURATION_MS) * Math.min(dt, 50));\n    } else if (this.data.direction === \"out\") {\n      mat.opacity = Math.min(1, mat.opacity + (1.0 / FADE_DURATION_MS) * Math.min(dt, 50));\n    }\n\n    if (mat.opacity === 0 || mat.opacity === 1) {\n      if (this.data.direction !== \"none\") {\n        if (this._resolveFinish) {\n          this._resolveFinish();\n          this._resolveFinish = null;\n        }\n      }\n\n      this.el.setAttribute(\"fader\", { direction: \"none\" });\n    }\n  }\n});\n","/**\n * A button with an image, tooltip, hover states.\n * @namespace ui\n * @component icon-button\n */\nAFRAME.registerComponent(\"icon-button\", {\n  schema: {\n    image: { type: \"string\" },\n    hoverImage: { type: \"string\" },\n    activeImage: { type: \"string\" },\n    activeHoverImage: { type: \"string\" },\n    disabledImage: { type: \"string\" },\n    active: { type: \"boolean\" },\n    disabled: { type: \"boolean\" },\n    tooltip: { type: \"selector\" },\n    tooltipText: { type: \"string\" },\n    activeTooltipText: { type: \"string\" }\n  },\n\n  init() {\n    this.el.object3D.matrixNeedsUpdate = true;\n    this.onHover = () => {\n      this.hovering = true;\n      if (this.data.tooltip) {\n        this.data.tooltip.object3D.visible = true;\n      }\n      this.updateButtonState();\n    };\n    this.onHoverOut = () => {\n      this.hovering = false;\n      if (this.data.tooltip) {\n        this.data.tooltip.object3D.visible = false;\n      }\n      this.updateButtonState();\n    };\n  },\n\n  play() {\n    this.updateButtonState();\n    this.el.object3D.addEventListener(\"hovered\", this.onHover);\n    this.el.object3D.addEventListener(\"unhovered\", this.onHoverOut);\n  },\n\n  pause() {\n    this.el.object3D.removeEventListener(\"hovered\", this.onHover);\n    this.el.object3D.removeEventListener(\"unhovered\", this.onHoverOut);\n  },\n\n  update() {\n    this.updateButtonState();\n  },\n\n  updateButtonState() {\n    const hovering = this.hovering;\n    const active = this.data.active;\n    const disabled = this.data.disabled;\n\n    let image;\n    if (disabled) {\n      image = \"disabledImage\";\n    } else if (active) {\n      image = hovering ? \"activeHoverImage\" : \"activeImage\";\n    } else {\n      image = hovering ? \"hoverImage\" : \"image\";\n    }\n\n    if (this.el.components.sprite) {\n      if (this.data[image]) {\n        this.el.setAttribute(\"sprite\", \"name\", this.data[image]);\n      } else {\n        console.warn(`No ${image} image on me.`, this);\n      }\n    } else {\n      console.error(\"No sprite.\");\n    }\n\n    if (this.data.tooltip && hovering) {\n      const tooltipText =\n        (this.data.active ? this.data.activeTooltipText : this.data.tooltipText) + (disabled ? \" Disabled\" : \"\");\n      this.data.tooltip.querySelector(\"[text]\").setAttribute(\"text\", \"value\", tooltipText);\n    }\n  }\n});\n","/**\n * A button with text\n * @namespace ui\n * @component text-button\n */\nAFRAME.registerComponent(\"text-button\", {\n  schema: {\n    textHoverColor: { type: \"string\" },\n    textColor: { type: \"string\" },\n    backgroundHoverColor: { type: \"string\" },\n    backgroundColor: { type: \"string\" }\n  },\n\n  init() {\n    // TODO: This is a bit of a hack to deal with position \"component\" not setting matrixNeedsUpdate. Come up with a better solution.\n    this.el.object3D.matrixNeedsUpdate = true;\n    this.onHover = () => {\n      this.hovering = true;\n      this.updateButtonState();\n    };\n    this.onHoverOut = () => {\n      this.hovering = false;\n      this.updateButtonState();\n    };\n    this.textEl = this.el.querySelector(\"[text]\");\n  },\n\n  play() {\n    this.updateButtonState();\n    this.el.object3D.addEventListener(\"hovered\", this.onHover);\n    this.el.object3D.addEventListener(\"unhovered\", this.onHoverOut);\n  },\n\n  pause() {\n    this.el.object3D.removeEventListener(\"hovered\", this.onHover);\n    this.el.object3D.removeEventListener(\"unhovered\", this.onHoverOut);\n  },\n\n  update() {\n    this.updateButtonState();\n  },\n\n  updateButtonState() {\n    const hovering = this.hovering;\n    this.el.setAttribute(\"slice9\", \"color\", hovering ? this.data.backgroundHoverColor : this.data.backgroundColor);\n\n    if (this.textEl) {\n      this.textEl.setAttribute(\"text\", \"color\", hovering ? this.data.textHoverColor : this.data.textColor);\n    }\n  }\n});\n\nconst noop = function() {};\n// TODO: this should ideally be fixed upstream somehow but its pretty tricky since text is just a geometry not a different type of Object3D, and Object3D is what handles raycast checks.\nAFRAME.registerComponent(\"text-raycast-hack\", {\n  dependencies: [\"text\"],\n  init() {\n    this.el.getObject3D(\"text\").raycast = noop;\n  }\n});\n","/**\n * Registers a click handler and invokes the block method on the NAF adapter for the owner associated with its entity.\n * @namespace network\n * @component block-button\n */\nAFRAME.registerComponent(\"block-button\", {\n  init() {\n    this.onClick = () => {\n      this.block(this.owner);\n    };\n    NAF.utils.getNetworkedEntity(this.el).then(networkedEl => {\n      this.owner = networkedEl.components.networked.data.owner;\n    });\n  },\n\n  play() {\n    this.el.object3D.addEventListener(\"interact\", this.onClick);\n  },\n\n  pause() {\n    this.el.object3D.removeEventListener(\"interact\", this.onClick);\n  },\n\n  block(clientId) {\n    window.APP.hubChannel.hide(clientId);\n  }\n});\n","AFRAME.registerComponent(\"mute-button\", {\n  init() {\n    this.onClick = () => {\n      this.mute(this.owner);\n    };\n    NAF.utils.getNetworkedEntity(this.el).then(networkedEl => {\n      this.owner = networkedEl.components.networked.data.owner;\n    });\n  },\n\n  play() {\n    this.el.object3D.addEventListener(\"interact\", this.onClick);\n  },\n\n  pause() {\n    this.el.object3D.removeEventListener(\"interact\", this.onClick);\n  },\n\n  async mute(clientId) {\n    this.el.sceneEl.emit(\"action_mute_client\", { clientId });\n  }\n});\n","AFRAME.registerComponent(\"kick-button\", {\n  init() {\n    this.onClick = () => {\n      this.kick(this.owner);\n    };\n    NAF.utils.getNetworkedEntity(this.el).then(networkedEl => {\n      this.owner = networkedEl.components.networked.data.owner;\n    });\n  },\n\n  play() {\n    this.el.object3D.addEventListener(\"interact\", this.onClick);\n  },\n\n  pause() {\n    this.el.object3D.removeEventListener(\"interact\", this.onClick);\n  },\n\n  async kick(clientId) {\n    this.el.sceneEl.emit(\"action_kick_client\", { clientId });\n  }\n});\n","AFRAME.registerComponent(\"close-vr-notice-button\", {\n  init() {\n    this.onClick = () => {\n      this.el.sceneEl.emit(\"action_vr_notice_closed\");\n    };\n  },\n\n  play() {\n    this.el.object3D.addEventListener(\"interact\", this.onClick);\n  },\n\n  pause() {\n    this.el.object3D.removeEventListener(\"interact\", this.onClick);\n  }\n});\n","AFRAME.registerComponent(\"leave-room-button\", {\n  init() {\n    this.onClick = () => {\n      this.el.sceneEl.emit(\"leave_room_requested\");\n    };\n  },\n\n  play() {\n    this.el.object3D.addEventListener(\"interact\", this.onClick);\n  },\n\n  pause() {\n    this.el.object3D.removeEventListener(\"interact\", this.onClick);\n  }\n});\n","AFRAME.registerComponent(\"visible-if-permitted\", {\n  schema: {\n    type: \"string\"\n  },\n  init() {\n    this.updateVisibility = this.updateVisibility.bind(this);\n    this.updateVisibility();\n    window.APP.hubChannel.addEventListener(\"permissions_updated\", this.updateVisibility);\n  },\n  updateVisibility() {\n    this.el.object3D.visible = this.el.sceneEl.systems.permissions.canOrWillIfCreator(this.data);\n  },\n  remove() {\n    window.APP.hubChannel.removeEventListener(\"permissions_updated\", this.updateVisibility);\n  }\n});\n","AFRAME.registerComponent(\"visibility-on-content-types\", {\n  schema: {\n    contentTypes: { type: \"string\" }, // Space separate content types. Or partial type, like video/\n    contentSubtype: { type: \"string\" },\n    visible: { type: \"boolean\", default: true }\n  },\n\n  init() {\n    this.updateVisibility = this.updateVisibility.bind(this);\n\n    NAF.utils\n      .getNetworkedEntity(this.el)\n      .then(el => {\n        this.networkedEl = el;\n        el.addEventListener(\"media_resolved\", ({ detail: { contentType } }) => this.updateVisibility(contentType));\n        this.updateVisibility();\n      })\n      .catch(() => {\n        // Non-networked, do not handle for now.\n      });\n  },\n\n  updateVisibility(contentType) {\n    const mediaLoader = this.networkedEl.components[\"media-loader\"];\n    const mediaImage = this.networkedEl.components[\"media-image\"];\n    const mediaVideo = this.networkedEl.components[\"media-video\"];\n    const mediaPdf = this.networkedEl.components[\"media-pdf\"];\n    const currentContentType =\n      contentType ||\n      (mediaVideo && mediaVideo.data.contentType) ||\n      (mediaImage && mediaImage.data.contentType) ||\n      (mediaPdf && mediaPdf.data.contentType);\n\n    let matchesType = !this.data.contentTypes;\n\n    if (this.data.contentTypes && currentContentType) {\n      for (const contentType of this.data.contentTypes.split(\" \")) {\n        const targetContentType = currentContentType.toLowerCase().split(\";\")[0];\n\n        if (\n          targetContentType === contentType ||\n          (contentType.endsWith(\"/\") && targetContentType.startsWith(contentType))\n        ) {\n          matchesType = true;\n          break;\n        }\n      }\n    }\n\n    const matchesSubtype =\n      !this.data.contentSubtype ||\n      (mediaLoader.data.contentSubtype && mediaLoader.data.contentSubtype === this.data.contentSubtype);\n    const matches = !!(matchesType && matchesSubtype);\n    this.el.object3D.visible = this.data.visible ? matches : !matches;\n  }\n});\n","AFRAME.registerComponent(\"hide-when-pinned-and-forbidden\", {\n  schema: {\n    // Hide regardless of being forbidden.\n    whenPinned: { type: \"boolean\" }\n  },\n  init() {\n    this._updateUI = this._updateUI.bind(this);\n    this._updateUIOnStateChange = this._updateUIOnStateChange.bind(this);\n    this.el.sceneEl.addEventListener(\"stateadded\", this._updateUIOnStateChange);\n    this.el.sceneEl.addEventListener(\"stateremoved\", this._updateUIOnStateChange);\n\n    NAF.utils.getNetworkedEntity(this.el).then(networkedEl => {\n      this.targetEl = networkedEl;\n\n      this._updateUI();\n      this.targetEl.addEventListener(\"pinned\", this._updateUI);\n      this.targetEl.addEventListener(\"unpinned\", this._updateUI);\n    });\n  },\n\n  remove() {\n    this.el.sceneEl.removeEventListener(\"stateadded\", this._updateUIOnStateChange);\n    this.el.sceneEl.removeEventListener(\"stateremoved\", this._updateUIOnStateChange);\n\n    if (this.targetEl) {\n      this.targetEl.removeEventListener(\"pinned\", this._updateUI);\n      this.targetEl.removeEventListener(\"unpinned\", this._updateUI);\n    }\n  },\n\n  _updateUIOnStateChange(e) {\n    if (e.detail !== \"frozen\") return;\n    this._updateUI();\n  },\n\n  _updateUI() {\n    if (!this.targetEl) return;\n    const isPinned = this.targetEl.components.pinnable && this.targetEl.components.pinnable.data.pinned;\n\n    if (this.data.whenPinned) {\n      this.el.object3D.visible = !isPinned;\n    } else {\n      const pinnedAndForbidden = isPinned && !window.APP.hubChannel.canOrWillIfCreator(\"pin_objects\");\n      this.el.object3D.visible = !pinnedAndForbidden;\n    }\n  }\n});\n","/**\n * Stores networked avatar state.\n * @namespace avatar\n * @component networked-avatar\n */\nAFRAME.registerComponent(\"networked-avatar\", {\n  schema: {\n    left_hand_pose: { default: 0 },\n    right_hand_pose: { default: 0 }\n  }\n});\n","AFRAME.registerComponent(\"pinnable\", {\n  schema: {\n    pinned: { default: false }\n  },\n\n  init() {\n    this._fireEventsAndAnimate = this._fireEventsAndAnimate.bind(this);\n\n    // Fire pinned events when media is refreshed since the version will be bumped.\n    this.el.addEventListener(\"media_refreshed\", this._fireEventsAndAnimate);\n\n    // Fire pinned events when page changes so we can persist the page.\n    this.el.addEventListener(\"owned-pager-page-changed\", this._fireEventsAndAnimate);\n\n    // Fire pinned events when video state changes so we can persist the page.\n    this.el.addEventListener(\"owned-video-state-changed\", this._fireEventsAndAnimate);\n  },\n\n  update(oldData) {\n    this._fireEventsAndAnimate(oldData);\n  },\n\n  _fireEventsAndAnimate(oldData, force) {\n    // We need to guard against _fireEventsAndAnimate being called during entity initialization,\n    // when the networked component isn't initialized yet.\n    if (!this.el.components.networked || !this.el.components.networked.data) return;\n\n    const isMine = NAF.utils.isMine(this.el);\n\n    // Avoid firing events during initialization by checking if the pin state has changed before doing so.\n    const pinStateChanged = !!oldData.pinned !== this.data.pinned;\n\n    if (this.data.pinned) {\n      if (pinStateChanged || force) {\n        this.el.emit(\"pinned\", { el: this.el });\n      }\n\n      if (isMine) {\n        this.el.removeAttribute(\"animation__pin-start\");\n        this.el.removeAttribute(\"animation__pin-end\");\n        const currentScale = this.el.object3D.scale;\n\n        this.el.setAttribute(\"animation__pin-start\", {\n          property: \"scale\",\n          dur: 200,\n          from: { x: currentScale.x, y: currentScale.y, z: currentScale.z },\n          to: { x: currentScale.x * 1.1, y: currentScale.y * 1.1, z: currentScale.z * 1.1 },\n          easing: \"easeOutElastic\"\n        });\n\n        this.el.setAttribute(\"animation__pin-end\", {\n          property: \"scale\",\n          delay: 200,\n          dur: 200,\n          from: { x: currentScale.x * 1.1, y: currentScale.y * 1.1, z: currentScale.z * 1.1 },\n          to: { x: currentScale.x, y: currentScale.y, z: currentScale.z },\n          easing: \"easeOutElastic\"\n        });\n\n        if (this.el.components[\"body-helper\"] && !this.el.sceneEl.systems.interaction.isHeld(this.el)) {\n          this.el.setAttribute(\"body-helper\", { type: \"kinematic\" });\n        }\n      }\n    } else {\n      if (pinStateChanged || force) {\n        this.el.emit(\"unpinned\", { el: this.el });\n      }\n    }\n  },\n\n  isHeld(el) {\n    const { leftHand, rightHand, rightRemote } = el.sceneEl.systems.interaction.state;\n    return leftHand.held === el || rightHand.held === el || rightRemote.held === el;\n  },\n\n  tick() {\n    const held = this.isHeld(this.el);\n    const isMine = this.el.components.networked && this.el.components.networked.data && NAF.utils.isMine(this.el);\n\n    let didFireThisFrame = false;\n    if (!held && this.wasHeld && isMine) {\n      didFireThisFrame = true;\n      this._fireEventsAndAnimate(this.data, true);\n    }\n\n    this.wasHeld = held;\n\n    this.transformObjectSystem = this.transformObjectSystem || AFRAME.scenes[0].systems[\"transform-selected-object\"];\n    const transforming = this.transformObjectSystem.transforming && this.transformObjectSystem.target.el === this.el;\n    if (!didFireThisFrame && !transforming && this.wasTransforming && isMine) {\n      this._fireEventsAndAnimate(this.data, true);\n    }\n    this.wasTransforming = transforming;\n  }\n});\n","const COLLISION_LAYERS = require(\"../constants\").COLLISION_LAYERS;\n\nAFRAME.registerComponent(\"drop-object-button\", {\n  init() {\n    this.onClick = () => {\n      if (!NAF.utils.isMine(this.targetEl) && !NAF.utils.takeOwnership(this.targetEl)) return;\n\n      this.targetEl.setAttribute(\"floaty-object\", { modifyGravityOnRelease: false });\n      this.targetEl.setAttribute(\"body-helper\", {\n        type: \"dynamic\",\n        gravity: { x: 0, y: -9.8, z: 0 },\n        angularDamping: 0.01,\n        linearDamping: 0.01,\n        linearSleepingThreshold: 1.6,\n        angularSleepingThreshold: 2.5,\n        collisionFilterMask: COLLISION_LAYERS.DEFAULT_INTERACTABLE\n      });\n      if (this.targetEl.components[\"body-helper\"].body) {\n        this.targetEl.components[\"body-helper\"].body.physicsBody.activate();\n      }\n\n      // Remove drop button after using it\n      this.el.parentNode.removeChild(this.el);\n    };\n\n    NAF.utils.getNetworkedEntity(this.el).then(networkedEl => {\n      this.targetEl = networkedEl;\n    });\n  },\n\n  play() {\n    this.el.object3D.addEventListener(\"interact\", this.onClick);\n  },\n\n  pause() {\n    this.el.object3D.removeEventListener(\"interact\", this.onClick);\n  }\n});\n","AFRAME.registerComponent(\"remove-networked-object-button\", {\n  init() {\n    this.onClick = () => {\n      if (!NAF.utils.isMine(this.targetEl) && !NAF.utils.takeOwnership(this.targetEl)) return;\n\n      this.targetEl.setAttribute(\"animation__remove\", {\n        property: \"scale\",\n        dur: 200,\n        to: { x: 0.01, y: 0.01, z: 0.01 },\n        easing: \"easeInQuad\"\n      });\n\n      this.el.parentNode.removeAttribute(\"visibility-while-frozen\");\n      this.el.parentNode.setAttribute(\"visible\", false);\n\n      this.targetEl.addEventListener(\"animationcomplete\", () => {\n        NAF.utils.takeOwnership(this.targetEl);\n        this.targetEl.parentNode.removeChild(this.targetEl);\n      });\n    };\n\n    NAF.utils.getNetworkedEntity(this.el).then(networkedEl => {\n      this.targetEl = networkedEl;\n    });\n  },\n\n  play() {\n    this.el.object3D.addEventListener(\"interact\", this.onClick);\n  },\n\n  pause() {\n    this.el.object3D.removeEventListener(\"interact\", this.onClick);\n  }\n});\n","AFRAME.registerComponent(\"camera-focus-button\", {\n  schema: {\n    track: { default: false },\n    selector: { default: null }\n  },\n\n  init() {\n    this.cameraSystem = this.el.sceneEl.systems[\"camera-tools\"];\n\n    NAF.utils.getNetworkedEntity(this.el).then(networkedEl => {\n      if (this.data.selector) {\n        this.targetEl = networkedEl.querySelector(this.data.selector);\n      } else {\n        this.targetEl = networkedEl;\n      }\n    });\n\n    this.onClick = () => {\n      const myCamera = this.cameraSystem.getMyCamera();\n      if (!myCamera) return;\n\n      myCamera.components[\"camera-tool\"].focus(this.targetEl, this.data.track);\n    };\n  },\n\n  tick() {\n    const isVisible = this.el.object3D.visible;\n    const shouldBeVisible = !!(this.cameraSystem && this.cameraSystem.getMyCamera());\n\n    if (isVisible !== shouldBeVisible) {\n      this.el.setAttribute(\"visible\", shouldBeVisible);\n    }\n  },\n\n  play() {\n    this.el.object3D.addEventListener(\"interact\", this.onClick);\n  },\n\n  pause() {\n    this.el.object3D.removeEventListener(\"interact\", this.onClick);\n  }\n});\n","/**\n * Toggles the visibility of this entity based on networked ownership\n * @namespace ui\n * @component visible-to-owner\n */\nAFRAME.registerComponent(\"visible-to-owner\", {\n  init() {\n    this.onStateChange = e => {\n      this.el.setAttribute(\"visible\", e.detail.newOwner === NAF.clientId);\n    };\n    NAF.utils.getNetworkedEntity(this.el).then(el => {\n      el.addEventListener(\"ownership-changed\", this.onStateChange);\n      this.el.setAttribute(\"visible\", NAF.utils.isMine(el));\n    });\n  }\n});\n","AFRAME.registerComponent(\"emit-state-change\", {\n  multiple: true,\n  schema: {\n    state: { type: \"string\" },\n    transform: { type: \"string\", oneof: [\"rising\", \"falling\"] },\n    event: { type: \"string\" }\n  },\n\n  init() {\n    this.stateadded = this.stateadded.bind(this);\n    this.stateremoved = this.stateremoved.bind(this);\n  },\n\n  stateadded(e) {\n    if (e.detail === this.data.state) {\n      this.el.emit(this.data.event);\n    }\n  },\n  stateremoved(e) {\n    if (e.detail === this.data.state) {\n      this.el.emit(this.data.event);\n    }\n  },\n\n  update() {\n    this.el.removeEventListener(\"stateadded\", this.stateadded);\n    this.el.removeEventListener(\"stateremoved\", this.stateremoved);\n\n    if (this.data.transform === \"rising\") {\n      this.el.addEventListener(\"stateadded\", this.stateadded);\n    }\n    if (this.data.transform === \"falling\") {\n      this.el.addEventListener(\"stateremoved\", this.stateremoved);\n    }\n  }\n});\n","AFRAME.registerComponent(\"action-to-event\", {\n  multiple: true,\n\n  schema: {\n    path: { type: \"string\" },\n    event: { type: \"string\" },\n    withPermission: { type: \"string\" }\n  },\n\n  init() {\n    this.needsPermission = !!this.data.withPermission;\n    this.updatePermissions = () => {\n      if (!this.needsPermission || !window.APP.hubChannel) return;\n      this.hasPermission = window.APP.hubChannel.canOrWillIfCreator(this.data.withPermission);\n    };\n  },\n\n  play() {\n    this.el.sceneEl.systems.permissions.onPermissionsUpdated(this.updatePermissions);\n    this.updatePermissions();\n  },\n\n  pause() {\n    window.APP.hubChannel.removeEventListener(\"permissions_updated\", this.updatePermissions);\n  },\n\n  tick() {\n    if (this.needsPermission && !this.hasPermission) return;\n    const userinput = AFRAME.scenes[0].systems.userinput;\n    if (userinput.get(this.data.path)) {\n      this.el.emit(this.data.event);\n    }\n  }\n});\n","AFRAME.registerComponent(\"action-to-remove\", {\n  multiple: true,\n\n  schema: {\n    path: { type: \"string\" },\n    requireOwnership: { type: \"boolean\", default: true }\n  },\n\n  init() {\n    NAF.utils.getNetworkedEntity(this.el).then(networkedEl => {\n      this.networkedEl = networkedEl;\n    });\n  },\n\n  tick() {\n    const userinput = AFRAME.scenes[0].systems.userinput;\n    if (!userinput.get(this.data.path)) return;\n    if (this.data.requireOwnership && this.networkedEl && !NAF.utils.isMine(this.networkedEl)) return;\n\n    this.el.parentNode.removeChild(this.el);\n  }\n});\n","AFRAME.registerComponent(\"emit-scene-event-on-remove\", {\n  schema: {\n    event: { default: null }\n  },\n\n  remove() {\n    if (this.data.event) {\n      this.el.sceneEl.emit(this.data.event, { el: this.el });\n    }\n  }\n});\n","AFRAME.registerComponent(\"follow-in-fov\", {\n  schema: {\n    target: { type: \"selector\" },\n    offset: { type: \"vec3\" },\n    speed: { type: \"number\", default: 0.003 },\n    angle: { type: \"number\", default: 45 }\n  },\n\n  init() {\n    this.targetPos = new THREE.Vector3();\n    this.offset = new THREE.Vector3();\n    this.offset.copy(this.data.offset);\n\n    this.snappedRot = new THREE.Euler();\n    this.snappedQ = new THREE.Quaternion();\n    this.snappedXForm = new THREE.Matrix4();\n    this.snappedXFormWorld = new THREE.Matrix4();\n    this.tempVector = new THREE.Vector3();\n  },\n\n  tick(t, dt) {\n    if (!this.el.object3D.visible) return;\n    if (!this.data.target) return;\n\n    const obj = this.el.object3D;\n    const target = this.data.target.object3D;\n\n    // Slow updating position if the element or any subelement is hovered.\n    let isHovered = false;\n    const interaction = AFRAME.scenes[0].systems.interaction;\n\n    const hoveredEl = interaction.state.rightRemote.hovered || interaction.state.leftRemote.hovered;\n\n    if (hoveredEl) {\n      let el = hoveredEl;\n\n      while (el) {\n        if (this.el === el) {\n          isHovered = true;\n          break;\n        }\n\n        el = el.parentNode;\n      }\n    }\n\n    if (!isHovered) {\n      this._hoveredFrames = 0;\n    } else {\n      this._hoveredFrames += 1;\n    }\n\n    // Compute position + rotation by projecting offset along a downward ray in target space,\n    // and mask out Z rotation.\n    this._applyMaskedTargetRotation(\n      -this.data.angle * THREE.Math.DEG2RAD,\n      target.rotation.y,\n      0,\n      this.snappedXFormWorld\n    );\n\n    this.targetPos.copy(this.offset);\n    this.targetPos.applyMatrix4(this.snappedXFormWorld);\n\n    if (obj.parent) {\n      obj.parent.worldToLocal(this.targetPos);\n    }\n\n    if (!this.started) {\n      obj.position.copy(this.targetPos);\n      this.started = true;\n    } else {\n      // Slow down movement if hovering by dampening speed each frame.\n      const speed = this._hoveredFrames\n        ? this.data.speed * (1.0 / ((this._hoveredFrames + 5.0) * 0.2))\n        : this.data.speed;\n      const t = speed * dt;\n\n      obj.position.set(\n        obj.position.x + (this.targetPos.x - obj.position.x) * t,\n        obj.position.y + (this.targetPos.y - obj.position.y) * t,\n        obj.position.z + (this.targetPos.z - obj.position.z) * t\n      );\n    }\n\n    this.snappedXFormWorld.decompose(this.tempVector, obj.quaternion, this.tempVector);\n    obj.matrixNeedsUpdate = true;\n  },\n\n  reset() {\n    this.started = false;\n  },\n\n  _applyMaskedTargetRotation(x, y, z, to) {\n    const target = this.data.target.object3D;\n    this.snappedRot.set(x, y, z, target.rotation.order);\n    this.snappedQ.setFromEuler(this.snappedRot);\n\n    this.snappedXForm.compose(\n      target.position,\n      this.snappedQ,\n      target.scale\n    );\n\n    to.multiplyMatrices(target.parent.matrixWorld, this.snappedXForm);\n  }\n});\n","AFRAME.registerComponent(\"matrix-auto-update\", {\n  schema: {\n    target: { type: \"string\" }\n  },\n\n  init: function() {\n    this._updateMatrixAutoUpdate = this._updateMatrixAutoUpdate.bind(this);\n    this._updateMatrixAutoUpdate();\n  },\n\n  play: function() {\n    this.el.sceneEl.addEventListener(\"object3dset\", this._updateMatrixAutoUpdate);\n  },\n\n  pause: function() {\n    this.el.sceneEl.removeEventListener(\"object3dset\", this._updateMatrixAutoUpdate);\n  },\n\n  _updateMatrixAutoUpdate: function() {\n    if (this.data.target) {\n      this.el.getObject3D(this.data.target).matrixAutoUpdate = true;\n    } else {\n      this.el.object3D.matrixAutoUpdate = true;\n    }\n  }\n});\n","AFRAME.registerComponent(\"hover-menu\", {\n  multiple: true,\n  schema: {\n    template: { type: \"selector\" },\n    dirs: { type: \"array\" },\n    dim: { default: true },\n    withPermission: { type: \"string\" }\n  },\n\n  async init() {\n    this.onFrozenStateChange = this.onFrozenStateChange.bind(this);\n    this.hovering = false;\n    await this.getHoverMenu();\n    this.applyHoverState();\n  },\n\n  getHoverMenu() {\n    if (this.menuPromise) return this.menuPromise;\n    return (this.menuPromise = new Promise(resolve => {\n      const menu = this.el.appendChild(document.importNode(this.data.template.content, true).children[0]);\n      // we have to wait a tick for the attach callbacks to get fired for the elements in a template\n      setTimeout(() => {\n        this.menu = menu;\n\n        // HACK workaround for now due to position-at-box-shape-border having problems\n        // with nested entities, when using 'mirror' viewing.\n        //\n        // TODO Revisit once that component is removed/deprecated. If we disable repositioning,\n        // the menu will only appear on the front of the object (which is fine for our purposes)\n        const isMirroredMedia = this.el.parentEl.id === \"media-mirror-target\";\n        const enableRepositioning = !isMirroredMedia;\n\n        if (enableRepositioning) {\n          this.el.setAttribute(\"position-at-box-shape-border\", {\n            target: \".hover-container\",\n            dirs: this.data.dirs,\n            animate: false,\n            scale: false\n          });\n        } else {\n          const hoverContainer = this.el.querySelector(\".hover-container\");\n          hoverContainer.object3D.position.z = 0.001;\n          hoverContainer.object3D.matrixNeedsUpdate = true;\n        }\n\n        resolve(this.menu);\n      });\n    }));\n  },\n\n  onFrozenStateChange(e) {\n    if (!e.detail === \"frozen\") return;\n    this.applyHoverState();\n  },\n\n  applyHoverState() {\n    if (!this.menu) return;\n    const allowed = !this.data.withPermission || window.APP.hubChannel.canOrWillIfCreator(this.data.withPermission);\n    this.menu.object3D.visible = allowed && !this.el.sceneEl.is(\"frozen\") && this.hovering;\n    if (this.data.dim && this.el.object3DMap.mesh && this.el.object3DMap.mesh.material) {\n      this.el.object3DMap.mesh.material.color.setScalar(this.menu.object3D.visible ? 0.5 : 1);\n    }\n  },\n\n  play() {\n    this.el.sceneEl.addEventListener(\"stateadded\", this.onFrozenStateChange);\n    this.el.sceneEl.addEventListener(\"stateremoved\", this.onFrozenStateChange);\n  },\n\n  pause() {\n    this.el.sceneEl.removeEventListener(\"stateadded\", this.onFrozenStateChange);\n    this.el.sceneEl.removeEventListener(\"stateremoved\", this.onFrozenStateChange);\n  }\n});\n","AFRAME.registerComponent(\"disable-frustum-culling\", {\n  init() {\n    this.el.object3D.traverse(o => (o.frustumCulled = false));\n  }\n});\n","AFRAME.registerComponent(\"set-active-camera\", {\n  init() {\n    // This is a hack needed to set the active camera because sometimes A-Frame will create the default camera and set it to the active camera on startup because the query selector to find an existing camera in the scene fails.\n\n    const cameraSystem = this.el.sceneEl.systems.camera;\n    const currentActiveCamera = cameraSystem.activeCameraEl;\n\n    if (currentActiveCamera !== this.el) {\n      cameraSystem.setActiveCamera(this.el);\n\n      // Also A-Frame fails to delete the default camera :P\n      currentActiveCamera.parentNode.removeChild(currentActiveCamera);\n\n      // Look controls leaves behind this CSS class.\n      this.el.sceneEl.canvas.classList.remove(\"a-grab-cursor\");\n    }\n  }\n});\n","AFRAME.registerComponent(\"track-pose\", {\n  schema: {\n    path: { type: \"string\" }\n  },\n\n  play() {\n    if (!this.didRegister) {\n      this.didRegister = true;\n      this.el.sceneEl.systems[\"hubs-systems\"].cursorPoseTrackingSystem.register(this.el.object3D, this.data.path);\n    }\n  },\n  remove() {\n    if (this.didRegister) {\n      this.el.sceneEl.systems[\"hubs-systems\"].cursorPoseTrackingSystem.unregister(this.el.object3D);\n    }\n  }\n});\n","AFRAME.registerComponent(\"replay\", {\n  init: function() {\n    this.playhead = 0;\n    this.poseIndex = 0;\n  },\n\n  tick: function(t, dt) {\n    let overflow = false;\n    while (!overflow && this.playhead >= this.poses[this.poseIndex].timestamp) {\n      this.el.setAttribute(\"position\", this.poses[this.poseIndex].position);\n      this.el.setAttribute(\"rotation\", this.poses[this.poseIndex].rotation);\n      this.el.object3D.matrixNeedsUpdate = true;\n      this.poseIndex += 1;\n      overflow = this.poseIndex === this.poses.length;\n    }\n\n    this.playhead += dt;\n\n    if (overflow) {\n      this.playhead = 0;\n      this.poseIndex = 0;\n    }\n  }\n});\n","AFRAME.registerComponent(\"visibility-by-path\", {\n  schema: {\n    path: { type: \"string\" }\n  },\n  tick() {\n    const userinput = AFRAME.scenes[0].systems.userinput;\n    const shouldBeVisible = !!userinput.get(this.data.path);\n    if (this.el.object3D.visible !== shouldBeVisible) {\n      this.el.setAttribute(\"visible\", shouldBeVisible);\n    }\n  }\n});\n","const isMobileVR = AFRAME.utils.device.isMobileVR();\n\n// Billboard component that only updates visible objects and only those in the camera view on mobile VR.\nAFRAME.registerComponent(\"billboard\", {\n  init: function() {\n    this.target = new THREE.Vector3();\n    this._updateBillboard = this._updateBillboard.bind(this);\n    this._updateIsInView = this._updateIsInView.bind(this);\n\n    if (isMobileVR) {\n      this.el.sceneEl.systems[\"frame-scheduler\"].schedule(this._updateIsInView, \"billboards\");\n    }\n  },\n  remove() {\n    if (isMobileVR) {\n      this.el.sceneEl.systems[\"frame-scheduler\"].unschedule(this._updateIsInView, \"billboards\");\n    }\n  },\n\n  tick() {\n    if (this.isInView || !isMobileVR) {\n      this._updateBillboard();\n    }\n  },\n\n  _updateIsInView: (function() {\n    const frustum = new THREE.Frustum();\n    const frustumMatrix = new THREE.Matrix4();\n    const box = new THREE.Box3();\n    const boxTemp = new THREE.Box3();\n\n    const expandBox = o => {\n      if (o.geometry) {\n        o.updateMatrices();\n        o.geometry.computeBoundingBox();\n        boxTemp.copy(o.geometry.boundingBox).applyMatrix4(o.matrixWorld);\n        box.expandByPoint(boxTemp.min);\n        box.expandByPoint(boxTemp.max);\n      }\n    };\n\n    const isInViewOfCamera = (obj, screenCamera) => {\n      frustumMatrix.multiplyMatrices(screenCamera.projectionMatrix, screenCamera.matrixWorldInverse);\n      frustum.setFromMatrix(frustumMatrix);\n      box.makeEmpty();\n      obj.traverse(expandBox);\n\n      // NOTE: not using box.setFromObject here because text nodes do not have Z values in their geometry buffer,\n      // and that routine ultimately assumes they do.\n      return frustum.intersectsBox(box);\n    };\n\n    return function() {\n      if (!this.el.object3D.visible) {\n        this.isInView = false;\n        return;\n      }\n\n      if (!this.playerCamera) {\n        this.playerCamera = document.getElementById(\"viewing-camera\").getObject3D(\"camera\");\n      }\n\n      if (!this.playerCamera) return;\n\n      this.isInView = this.el.sceneEl.is(\"vr-mode\") ? true : isInViewOfCamera(this.el.object3D, this.playerCamera);\n\n      if (!this.isInView) {\n        // Check in-game camera if rendering to viewfinder and owned\n        const cameraTools = this.el.sceneEl.systems[\"camera-tools\"];\n\n        if (cameraTools) {\n          cameraTools.ifMyCameraRenderingViewfinder(cameraTool => {\n            this.isInView = this.isInView || isInViewOfCamera(this.el.object3D, cameraTool.camera);\n          });\n        }\n      }\n    };\n  })(),\n\n  _updateBillboard: function() {\n    if (!this.el.object3D.visible) return;\n\n    const camera = this.el.sceneEl.camera;\n    const object3D = this.el.object3D;\n\n    if (camera) {\n      // Set the camera world position as the target.\n      this.target.setFromMatrixPosition(camera.matrixWorld);\n      object3D.lookAt(this.target);\n      object3D.matrixNeedsUpdate = true;\n    }\n  }\n});\n","const SYNC_DURATION_MS = 5000;\n\n// HACK this is a hacky component that is used to mitigate the situation where a first sync is missed on critical\n// networked elements. (At the time of this writing, specifically just the user's avatar.) The motivation\n// is that there have been a variety of issues resulting in missed avatar instantiation messages, and\n// this is meant to ensure we recover from those in the cases where they occur.\n//\n// This component, when added, will re-send a isFirstSync message for the networked object is it attached to\n// every SYNC_DURATION_MS milliseconds.\nAFRAME.registerComponent(\"periodic-full-syncs\", {\n  init() {\n    this.lastSync = 0;\n  },\n\n  tick() {\n    const now = performance.now();\n\n    if (now - this.lastSync >= SYNC_DURATION_MS && this.el.components && this.el.components.networked) {\n      this.lastSync = now;\n\n      // Sends an undirected first sync message.\n      this.el.components.networked.syncAll(null, true);\n    }\n  }\n});\n","AFRAME.registerComponent(\"set-max-resolution\", {\n  init() {\n    const store = window.APP.store;\n    this.onStoreChanged = () => {\n      const width =\n        store.state.preferences.maxResolutionWidth === undefined ? 1920 : store.state.preferences.maxResolutionWidth;\n      const height =\n        store.state.preferences.maxResolutionHeight === undefined ? 1920 : store.state.preferences.maxResolutionHeight;\n      this.el.sceneEl.maxCanvasSize = { width, height };\n      this.el.sceneEl.resize();\n    };\n    this.onStoreChanged();\n    store.addEventListener(\"statechanged\", this.onStoreChanged);\n  }\n});\n","// Given a function and a queue name, schedules things so a single function\n// from a given queue will be called per frame.\nAFRAME.registerSystem(\"frame-scheduler\", {\n  init() {\n    // Registry a map from queue name to list of registered functions.\n    this.registry = new Map();\n    this.queues = [];\n    this.frameIndex = 0;\n  },\n\n  schedule(func, queue) {\n    if (!this.registry.has(queue)) {\n      this.queues.push(queue);\n      this.registry.set(queue, []);\n    }\n\n    this.registry.get(queue).push(func);\n  },\n\n  unschedule(func) {\n    for (let i = 0; i < this.queues.length; i++) {\n      const queue = this.queues[i];\n      const entries = this.registry.get(queue);\n      const idx = entries.indexOf(func);\n\n      if (idx >= 0) {\n        entries.splice(idx, 1);\n      }\n    }\n  },\n\n  tick: function() {\n    for (let i = 0; i < this.queues.length; i++) {\n      const queue = this.queues[i];\n      const entries = this.registry.get(queue);\n      if (entries.length === 0) continue;\n\n      entries[this.frameIndex % entries.length]();\n    }\n\n    this.frameIndex++;\n  }\n});\n","/* global AFRAME */\n\n/**\n * Toggle visibility of an entity based on if the user is in vr mode or not\n * @namespace vr-mode\n * @component vr-mode-toggle-visibility\n */\nAFRAME.registerComponent(\"vr-mode-toggle-visibility\", {\n  schema: {\n    invert: { type: \"boolean\", default: false }\n  },\n\n  init() {\n    this.updateComponentState = this.updateComponentState.bind(this);\n  },\n\n  play() {\n    this.updateComponentState();\n    this.el.sceneEl.addEventListener(\"enter-vr\", this.updateComponentState);\n    this.el.sceneEl.addEventListener(\"exit-vr\", this.updateComponentState);\n  },\n\n  pause() {\n    this.el.sceneEl.removeEventListener(\"enter-vr\", this.updateComponentState);\n    this.el.sceneEl.removeEventListener(\"exit-vr\", this.updateComponentState);\n  },\n\n  updateComponentState() {\n    const inVRMode = this.el.sceneEl.is(\"vr-mode\");\n    this.el.setAttribute(\"visible\", inVRMode !== this.data.invert);\n  }\n});\n\n/**\n * Toggle the isPlaying state of a component based on app mode\n * @namespace vr-mode\n * @component vr-mode-toggle-playing\n */\nAFRAME.registerComponent(\"vr-mode-toggle-playing\", {\n  multiple: true,\n  schema: {\n    invert: { type: \"boolean\", default: false }\n  },\n\n  init() {\n    this.updateComponentState = this.updateComponentState.bind(this);\n  },\n\n  play() {\n    this.updateComponentState();\n    this.el.sceneEl.addEventListener(\"enter-vr\", this.updateComponentState);\n    this.el.sceneEl.addEventListener(\"exit-vr\", this.updateComponentState);\n  },\n\n  pause() {\n    this.el.sceneEl.removeEventListener(\"enter-vr\", this.updateComponentState);\n    this.el.sceneEl.removeEventListener(\"exit-vr\", this.updateComponentState);\n  },\n\n  updateComponentState() {\n    const componentName = this.id;\n    const inVRMode = this.el.sceneEl.is(\"vr-mode\");\n    this.el.components[componentName][inVRMode !== this.data.invert ? \"play\" : \"pause\"]();\n  }\n});\n\n/**\n * Toggle a CSS class based upon app mode.\n * @namespace vr-mode\n * @component vr-mode-toggle-class\n */\nAFRAME.registerComponent(\"vr-mode-toggle-class\", {\n  multiple: true,\n  schema: {\n    invert: { type: \"boolean\", default: false },\n    class: { type: \"string\", default: \"\" }\n  },\n\n  init() {\n    this.updateComponentState = this.updateComponentState.bind(this);\n  },\n\n  play() {\n    this.updateComponentState();\n    this.el.sceneEl.addEventListener(\"enter-vr\", this.updateComponentState);\n    this.el.sceneEl.addEventListener(\"exit-vr\", this.updateComponentState);\n  },\n\n  pause() {\n    this.el.sceneEl.removeEventListener(\"enter-vr\", this.updateComponentState);\n    this.el.sceneEl.removeEventListener(\"exit-vr\", this.updateComponentState);\n  },\n\n  updateComponentState() {\n    const inVRMode = this.el.sceneEl.is(\"vr-mode\");\n\n    if (inVRMode) {\n      this.el.classList.add(this.data.class);\n    } else {\n      this.el.classList.remove(this.data.class);\n    }\n  }\n});\n","AFRAME.registerSystem(\"permissions\", {\n  onPermissionsUpdated(handler) {\n    if (window.APP.hubChannel) {\n      window.APP.hubChannel.addEventListener(\"permissions_updated\", handler);\n    } else {\n      window.addEventListener(\n        \"hub_channel_ready\",\n        () => window.APP.hubChannel.addEventListener(\"permissions_updated\", handler),\n        { once: true }\n      );\n    }\n  },\n  can(permissionName) {\n    return !!window.APP.hubChannel.can(permissionName);\n  },\n  canOrWillIfCreator(permissionName) {\n    return !!window.APP.hubChannel.canOrWillIfCreator(permissionName);\n  },\n  fetchPermissions() {\n    return window.APP.hubChannel.fetchPermissions();\n  }\n});\n","/**\n * Emits an \"exit\" event when a user has stopped using the app for a certain period of time\n * @system exit-on-blur\n */\nAFRAME.registerSystem(\"exit-on-blur\", {\n  init() {\n    this.onBlur = this.onBlur.bind(this);\n    this.onFocus = this.onFocus.bind(this);\n    this.onTimeout = this.onTimeout.bind(this);\n    this.onEnterVR = this.onEnterVR.bind(this);\n\n    this.isOculusBrowser = navigator.userAgent.match(/Oculus/);\n    this.enteredVR = false;\n\n    window.addEventListener(\"blur\", this.onBlur);\n    window.addEventListener(\"focus\", this.onFocus);\n    this.el.addEventListener(\"enter-vr\", this.onEnterVR);\n\n    this.lastTimeoutCheck = 0;\n    this.exitTimeout = null;\n  },\n\n  tick(t) {\n    // This is a hack to detect when an Oculus Go user has taken off the headset and the headset has\n    // entered standby mode. Currently Oculus Browser is not emitting a blur, vrdisplaydeactivate,\n    // vrdisplayblur, visibilitychange, or vrdisplaypresentchange event, so we wait 15 seconds after\n    // the last requestAnimationFrame callback to determine if the headset has gone into standby mode.\n    // We also check that you have entered VR so that this timeout does not occur in the setup UI.\n    if (\n      this.isOculusBrowser &&\n      this.enteredVR &&\n      (this.lastTimeoutCheck === 0 || t - this.lastTimeoutCheck >= 1000.0) // Don't do this clear every frame, slow.\n    ) {\n      this.lastTimeoutCheck = t;\n      clearTimeout(this.exitTimeout);\n      this.exitTimeout = setTimeout(this.onTimeout, 30 * 1000);\n    }\n  },\n\n  onEnterVR() {\n    this.enteredVR = true;\n  },\n\n  onBlur() {\n    if (this.el.isMobile) {\n      clearTimeout(this.exitTimeout);\n      this.exitTimeout = setTimeout(this.onTimeout, 30 * 1000);\n    }\n  },\n\n  onFocus() {\n    if (this.el.isMobile) {\n      clearTimeout(this.exitTimeout);\n    }\n  },\n\n  onTimeout() {\n    this.el.dispatchEvent(new CustomEvent(\"exit\"));\n  },\n\n  remove() {\n    clearTimeout(this.exitTimeout);\n    window.removeEventListener(\"blur\", this.onBlur);\n  }\n});\n","// On high-DPI displays, measures the median FPS over time and reduces the\n// pixelRatio if the FPS drops below a threshold.\n\nconst FPS_THRESHOLD = 50;\nconst SKIP_SECONDS_AFTER_SCENE_VISIBLE = 30;\nconst MEASUREMENT_PERIOD_SECONDS = 5;\nconst MIN_PIXEL_RATIO = 1;\nconst REDUCTION_RATE = 1;\n\nAFRAME.registerSystem(\"auto-pixel-ratio\", {\n  init() {\n    // For now let's only enabled this on macs, since they tend to have retina displays.\n    // Note this test will also include iPads running iPadOS.\n    this.enabled = window.devicePixelRatio > 1 && /macintosh/i.test(navigator.userAgent);\n    this.deltas = [];\n    this.secondsSinceMeasurementStart = 0;\n    this.secondsSinceSceneVisible = 0;\n  },\n  tick(time, delta) {\n    if (!this.enabled) return;\n    if (!this.el.is(\"visible\")) return;\n    if (this.secondsSinceSceneVisible < SKIP_SECONDS_AFTER_SCENE_VISIBLE) {\n      this.secondsSinceSceneVisible += delta / 1000;\n      return;\n    }\n    if (document.visibilityState === \"hidden\") return;\n\n    this.deltas.push(delta);\n    this.secondsSinceMeasurementStart += delta / 1000;\n\n    if (this.secondsSinceMeasurementStart > MEASUREMENT_PERIOD_SECONDS) {\n      this.deltas.sort();\n      const medianDelta = this.deltas[Math.floor(this.deltas.length / 2)];\n      const medianFps = 1000 / medianDelta;\n\n      if (medianFps < FPS_THRESHOLD) {\n        const newPixelRatio = this.el.renderer.getPixelRatio() - REDUCTION_RATE;\n        console.info(\n          `Hubs auto-pixel-ratio: Median FPS (${medianFps.toFixed()}) was below ${FPS_THRESHOLD}. ` +\n            `Reducing pixel ratio to ${newPixelRatio}.`\n        );\n        this.el.renderer.setPixelRatio(newPixelRatio);\n\n        if (newPixelRatio <= MIN_PIXEL_RATIO) {\n          this.enabled = false;\n        }\n      }\n\n      // Clear deltas so that we start measuring a new median.\n      this.deltas.length = 0;\n      this.secondsSinceMeasurementStart = 0;\n    }\n  }\n});\n","AFRAME.registerSystem(\"listed-media\", {\n  init: function() {\n    this.els = [];\n  },\n\n  register: function(el) {\n    this.els.push(el);\n    this.el.emit(\"listed_media_changed\");\n  },\n\n  unregister: function(el) {\n    this.els.splice(this.els.indexOf(el), 1);\n    this.el.emit(\"listed_media_changed\");\n  }\n});\n\nAFRAME.registerComponent(\"listed-media\", {\n  init: function() {\n    this.system.register(this.el);\n  },\n\n  remove: function() {\n    this.system.unregister(this.el);\n  }\n});\n","// Provides the idea of \"media linking\" -- if two media objects are linked\n// then updates to one (src, page, etc) will be reflected on the other, and vice versa.\n//\n// When you link a media element from A -> B via registerLinkage, a few notes:\n// - The media is assumed to be of the same kind, ideally created via media-utils/cloneMedia\n// - Sync is bidirectional, however, elB is assumed to be a 'derivate of' elA. this means:\n//   - for the video case, elA will have its volume set to zero and restored if elB is removed\n//   - when elA is removed, elB will be removed (done in media-loader) but not vice-versa\n//\nAFRAME.registerSystem(\"linked-media\", {\n  init: function() {\n    this.handlers = [];\n    this.addLinkageHandler = this.addLinkageHandler.bind(this);\n    this.syncLinkage = this.syncLinkage.bind(this);\n  },\n\n  addLinkageHandler(elA, elB) {\n    const handler = () => {\n      // Since elB will have its event fired here if we change something, ignore it.\n      if (elB._handlingLinkage) return;\n      elA._handlingLinkage = true;\n      this.syncLinkage(elA, elB);\n      elA._handlingLinkage = false;\n    };\n\n    if (elA.components[\"media-loader\"].data) {\n      elA.addEventListener(\"componentchanged\", handler);\n    } else {\n      const waitForMediaLoader = evt => {\n        if (evt.detail.name === \"media-loader\") {\n          elA.removeEventListener(\"componentinitialized\", waitForMediaLoader);\n          elA.addEventListener(\"componentchanged\", handler);\n        }\n      };\n\n      elA.addEventListener(\"componentinitialized\", waitForMediaLoader);\n    }\n\n    return handler;\n  },\n\n  registerLinkage: function(elA, elB) {\n    this.syncLinkage(elA, elB);\n\n    const handlerA = this.addLinkageHandler(elA, elB);\n    const handlerB = this.addLinkageHandler(elB, elA);\n    elA.setAttribute(\"linked-media\", \"\");\n    elB.setAttribute(\"linked-media\", \"\");\n\n    // As a convenience, if elA is a video, we turn its volume off so we don't hear it twice\n    if (elA.components[\"media-video\"]) {\n      elA.setAttribute(\"media-video\", \"volume\", 0);\n    }\n\n    this.handlers.push([elA, elB, handlerA, handlerB]);\n  },\n\n  deregisterLinkage: function(el) {\n    // Deregister elA -> elB, get list of elBs, and remove them\n    for (const [elA, elB, handlerA, handlerB] of this.handlers) {\n      if (el === elA || el === elB) {\n        elA.removeEventListener(\"componentchanged\", handlerA);\n        elB.removeEventListener(\"componentchanged\", handlerB);\n      }\n\n      // As a convenience, if elA is a video, we restore its volume to 50% since we muted it upon link.\n      if (elA.components[\"media-video\"]) {\n        elA.setAttribute(\"media-video\", \"volume\", 0.5);\n      }\n    }\n\n    this.handlers = this.handlers.filter(([elA, elB]) => elA !== el && elB !== el);\n  },\n\n  syncLinkage(elA, elB) {\n    if (elB.components[\"networked\"]) {\n      // Take ownership before updating\n      if (!NAF.utils.isMine(elB) && !NAF.utils.takeOwnership(elB)) return;\n    }\n\n    const { src, version } = elA.components[\"media-loader\"].data;\n\n    // For now, manually sync linkable properties.\n    elB.setAttribute(\"media-loader\", { src, version });\n\n    if (elA.components[\"media-pdf\"]) {\n      const { index } = elA.components[\"media-pdf\"].data;\n      elB.setAttribute(\"media-pdf\", { index });\n    }\n\n    if (elA.components[\"media-video\"]) {\n      const { time, videoPaused, loop, hidePlaybackControls } = elA.components[\"media-video\"].data;\n\n      // Sync time, pause state, playback controls, and tighten sync tolerance since its local\n      const syncedVideoAttributes = { time, videoPaused, loop, hidePlaybackControls };\n\n      const targetIsNetworked = !elB.components.networked;\n      if (targetIsNetworked) {\n        syncedVideoAttributes.syncTolerance = 0.25;\n      }\n\n      elB.setAttribute(\"media-video\", syncedVideoAttributes);\n      elB.components[\"media-video\"].updatePlaybackState(true);\n    }\n  }\n});\n\nAFRAME.registerComponent(\"linked-media\", {\n  remove: function() {\n    this.system.deregisterLinkage(this.el);\n  }\n});\n","/* global AFRAME NAF performance */\nAFRAME.registerComponent(\"owned-object-limiter\", {\n  schema: {\n    counter: { type: \"selector\" }\n  },\n\n  init() {\n    this.counter = this.data.counter.components[\"networked-counter\"];\n  },\n\n  tick() {\n    this._syncCounterRegistration();\n    const isHeld = this.el.sceneEl.systems.interaction.isHeld(this.el);\n    if (!isHeld && this.wasHeld && this.counter.timestamps.has(this.el)) {\n      this.counter.timestamps.set(this.el, performance.now());\n    }\n    this.wasHeld = isHeld;\n  },\n\n  remove() {\n    this.counter.deregister(this.el);\n  },\n\n  _syncCounterRegistration() {\n    if (!this.el.components[\"networked\"]) return;\n\n    const isPinned = this.el.components[\"pinnable\"] && this.el.components[\"pinnable\"].data.pinned;\n\n    if (NAF.utils.isMine(this.el) && !isPinned) {\n      this.counter.register(this.el);\n    } else {\n      this.counter.deregister(this.el);\n    }\n  }\n});\n","/* global performance */\nAFRAME.registerComponent(\"owned-object-cleanup-timeout\", {\n  schema: {\n    counter: { type: \"selector\" },\n    ttl: { default: 0 }\n  },\n\n  init() {\n    this.counter = this.data.counter.components[\"networked-counter\"];\n    this.timeout = Number.POSITIVE_INFINITY;\n  },\n\n  tick() {\n    if (this.el.components[\"networked\"] && NAF.utils.isMine(this.el)) {\n      const isPinned = this.el.components[\"pinnable\"] && this.el.components[\"pinnable\"].data.pinned;\n      if (NAF.utils.isMine(this.el) && !isPinned && performance.now() >= this.timeout) {\n        this.el.parentNode.removeChild(this.el);\n        this.timeout = Number.POSITIVE_INFINITY;\n      }\n    }\n    const isHeld = this.el.sceneEl.systems.interaction.isHeld(this.el);\n    if (!isHeld && this.wasHeld && this.counter.timestamps.has(this.el)) {\n      this.timeout = performance.now() + this.data.ttl * 1000;\n    } else if (isHeld && !this.wasHeld) {\n      this.timeout = Number.POSITIVE_INFINITY;\n    }\n    this.wasHeld = isHeld;\n  }\n});\n","/* global NAF */\nconst COLLISION_LAYERS = require(\"../constants\").COLLISION_LAYERS;\n\nAFRAME.registerComponent(\"set-unowned-body-kinematic\", {\n  init() {\n    this.setBodyKinematic = this.setBodyKinematic.bind(this);\n  },\n  play() {\n    this.el.addEventListener(\"ownership-lost\", this.setBodyKinematic);\n\n    if (!this.didThisOnce) {\n      // Do this in play instead of init so that the ammo-body and networked components are done\n      this.didThisOnce = true;\n\n      if (!this.el.components.networked || !NAF.utils.isMine(this.el)) {\n        this.setBodyKinematic();\n      }\n    }\n  },\n  pause() {\n    this.el.removeEventListener(\"ownership-lost\", this.setBodyKinematic);\n  },\n  setBodyKinematic() {\n    this.el.setAttribute(\"body-helper\", {\n      type: \"kinematic\",\n      collisionFilterMask: COLLISION_LAYERS.UNOWNED_INTERACTABLE\n    });\n    if (this.el.components[\"floaty-object\"]) {\n      this.el.components[\"floaty-object\"].locked = true;\n    }\n  }\n});\n","/* global AFRAME performance */\n/**\n * Limits networked interactables to a maximum number at any given time\n * @namespace network\n * @component networked-counter\n */\nAFRAME.registerComponent(\"networked-counter\", {\n  schema: {\n    max: { default: 3 }\n  },\n\n  init() {\n    this.timestamps = new Map();\n    this.el.object3D.visible = false;\n  },\n\n  remove() {\n    this.timestamps.clear();\n  },\n\n  count() {\n    return this.timestamps.size;\n  },\n\n  register(el) {\n    if (this.data.max <= 0 || this.timestamps.has(el)) return;\n\n    this.timestamps.set(el, performance.now());\n    if (this.timestamps.size > this.data.max) {\n      this._destroyOldest();\n    }\n  },\n\n  deregister(el) {\n    if (!this.timestamps.has(el)) return;\n    this.timestamps.delete(el);\n  },\n\n  _destroyOldest() {\n    const interaction = this.el.sceneEl.systems.interaction;\n    let oldestEl = null,\n      minTs = Number.MAX_VALUE;\n    this.timestamps.forEach((ts, el) => {\n      if (ts < minTs && !interaction.isHeld(el) && NAF.utils.isMine(el)) {\n        oldestEl = el;\n        minTs = ts;\n      }\n    });\n    this._destroy(oldestEl);\n  },\n\n  _destroy(el) {\n    // Pause the entity so that it won't just re-register itself immediately in owned-object-limiter.\n    el.pause();\n    // networked-interactable's remove will also call deregister, but it will happen async so we do it here as well.\n    this.deregister(el);\n    el.parentNode.removeChild(el);\n  }\n});\n","AFRAME.registerComponent(\"set-yxz-order\", {\n  init: function() {\n    this.el.object3D.rotation.order = \"YXZ\";\n  }\n});\n","/**\n * Initializes teleporters when the environment bundle has loaded.\n * @namespace environment\n * @component nav-mesh-helper\n */\nAFRAME.registerComponent(\"nav-mesh-helper\", {\n  init: function() {\n    this.el.addEventListener(\"model-loaded\", () => {\n      const teleporters = document.querySelectorAll(\"[teleporter]\");\n      for (let i = 0; i < teleporters.length; i++) {\n        teleporters[i].components[\"teleporter\"].queryCollisionEntities();\n      }\n    });\n  }\n});\n","/**\n * Drawing Manager\n * Manages what networked-drawings are available to pen components\n * @namespace drawing\n * @component drawing-manager\n */\nAFRAME.registerComponent(\"drawing-manager\", {\n  schema: {\n    penSpawner: { type: \"selector\" }\n  },\n\n  init() {\n    this.el.object3D.visible = false;\n    this.drawingToPen = new Map();\n    this.data.penSpawner.addEventListener(\"spawned-entity-created\", () => {\n      if (!this.drawingEl) {\n        this.createDrawing();\n      }\n    });\n  },\n\n  createDrawing() {\n    if (!this.createDrawingPromise) {\n      this.createDrawingPromise = new Promise(resolve => {\n        this.drawingEl = document.createElement(\"a-entity\");\n        this.drawingEl.setAttribute(\"networked\", \"template: #interactable-drawing\");\n        this.el.sceneEl.appendChild(this.drawingEl);\n\n        const handNetworkedDrawingInit = e => {\n          if (e.detail.name === \"networked-drawing\") {\n            this.drawing = this.drawingEl.components[\"networked-drawing\"];\n            this.drawingEl.removeEventListener(\"componentinitialized\", handNetworkedDrawingInit);\n            resolve();\n          }\n        };\n\n        this.drawingEl.addEventListener(\"componentinitialized\", handNetworkedDrawingInit);\n      });\n    }\n    return this.createDrawingPromise;\n  },\n\n  destroyDrawing(networkedDrawing) {\n    if (this.drawing === networkedDrawing) {\n      this.drawingToPen.delete(this.drawing);\n      this.drawing = null;\n      this.drawingEl = null;\n      this.createDrawingPromise = null;\n      this.getDrawingPromise = null;\n    }\n  },\n\n  getDrawing(pen) {\n    //TODO: future handling of multiple drawings\n    if (!this.getDrawingPromise) {\n      this.getDrawingPromise = new Promise((resolve, reject) => {\n        if (!this.drawingEl) {\n          this.createDrawing().then(() => {\n            this.drawingToPen.set(this.drawing, pen);\n            resolve(this.drawing);\n          });\n        } else if (\n          this.drawing &&\n          (!this.drawingToPen.has(this.drawing) || this.drawingToPen.get(this.drawing) === pen)\n        ) {\n          this.drawingToPen.set(this.drawing, pen);\n          resolve(this.drawing);\n        } else {\n          reject();\n        }\n      });\n    }\n    return this.getDrawingPromise;\n  },\n\n  returnDrawing(pen) {\n    if (this.drawingToPen.has(this.drawing) && this.drawingToPen.get(this.drawing) === pen) {\n      this.drawingToPen.delete(this.drawing);\n    }\n  }\n});\n","import { SOUND_TOGGLE_MIC } from \"../systems/sound-effects-system\";\n\nconst bindAllEvents = function(elements, events, f) {\n  if (!elements || !elements.length) return;\n  for (const el of elements) {\n    events.length &&\n      events.forEach(e => {\n        el.addEventListener(e, f);\n      });\n  }\n};\nconst unbindAllEvents = function(elements, events, f) {\n  if (!elements || !elements.length) return;\n  for (const el of elements) {\n    events.length &&\n      events.forEach(e => {\n        el.removeEventListener(e, f);\n      });\n  }\n};\n\n/**\n * Toggles the microphone on the current network connection based on the given events.\n * @namespace network\n * @component mute-mic\n */\nAFRAME.registerComponent(\"mute-mic\", {\n  schema: {\n    eventSrc: { type: \"selectorAll\" },\n    toggleEvents: { type: \"array\" },\n    muteEvents: { type: \"array\" },\n    unmuteEvents: { type: \"array\" }\n  },\n  init: function() {\n    this.onToggle = this.onToggle.bind(this);\n    this.onMute = this.onMute.bind(this);\n    this.onUnmute = this.onUnmute.bind(this);\n  },\n\n  play: function() {\n    const { eventSrc, toggleEvents, muteEvents, unmuteEvents } = this.data;\n    bindAllEvents(eventSrc, toggleEvents, this.onToggle);\n    bindAllEvents(eventSrc, muteEvents, this.onMute);\n    bindAllEvents(eventSrc, unmuteEvents, this.onUnmute);\n  },\n\n  pause: function() {\n    const { eventSrc, toggleEvents, muteEvents, unmuteEvents } = this.data;\n    unbindAllEvents(eventSrc, toggleEvents, this.onToggle);\n    unbindAllEvents(eventSrc, muteEvents, this.onMute);\n    unbindAllEvents(eventSrc, unmuteEvents, this.onUnmute);\n  },\n\n  onToggle: function() {\n    if (!NAF.connection.adapter) return;\n    if (!this.el.sceneEl.is(\"entered\")) return;\n\n    this.el.sceneEl.systems[\"hubs-systems\"].soundEffectsSystem.playSoundOneShot(SOUND_TOGGLE_MIC);\n    if (this.el.is(\"muted\")) {\n      NAF.connection.adapter.enableMicrophone(true);\n      this.el.removeState(\"muted\");\n    } else {\n      NAF.connection.adapter.enableMicrophone(false);\n      this.el.addState(\"muted\");\n    }\n  },\n\n  onMute: function() {\n    if (!NAF.connection.adapter) return;\n    if (!this.el.is(\"muted\")) {\n      NAF.connection.adapter.enableMicrophone(false);\n      this.el.addState(\"muted\");\n    }\n  },\n\n  onUnmute: function() {\n    if (this.el.is(\"muted\")) {\n      NAF.connection.adapter.enableMicrophone(true);\n      this.el.removeState(\"muted\");\n    }\n  }\n});\n","import { SOUND_SPAWN_PEN } from \"../systems/sound-effects-system\";\n/**\n * HUD panel for muting, freezing, and other controls that don't necessarily have hardware buttons.\n * @namespace ui\n * @component in-world-hud\n */\nAFRAME.registerComponent(\"in-world-hud\", {\n  init() {\n    this.mic = this.el.querySelector(\".mic\");\n    this.spawn = this.el.querySelector(\".spawn\");\n    this.pen = this.el.querySelector(\".penhud\");\n    this.cameraBtn = this.el.querySelector(\".camera-btn\");\n    this.inviteBtn = this.el.querySelector(\".invite-btn\");\n    this.background = this.el.querySelector(\".bg\");\n\n    this.updateButtonStates = () => {\n      this.mic.setAttribute(\"mic-button\", \"active\", this.el.sceneEl.is(\"muted\"));\n      this.pen.setAttribute(\"icon-button\", \"active\", this.el.sceneEl.is(\"pen\"));\n      this.cameraBtn.setAttribute(\"icon-button\", \"active\", this.el.sceneEl.is(\"camera\"));\n      if (window.APP.hubChannel) {\n        this.spawn.setAttribute(\"icon-button\", \"disabled\", !window.APP.hubChannel.can(\"spawn_and_move_media\"));\n        this.pen.setAttribute(\"icon-button\", \"disabled\", !window.APP.hubChannel.can(\"spawn_drawing\"));\n        this.cameraBtn.setAttribute(\"icon-button\", \"disabled\", !window.APP.hubChannel.can(\"spawn_camera\"));\n      }\n    };\n\n    this.onStateChange = evt => {\n      if (!(evt.detail === \"muted\" || evt.detail === \"frozen\" || evt.detail === \"pen\" || evt.detail === \"camera\"))\n        return;\n      this.updateButtonStates();\n    };\n\n    this.onMicClick = () => {\n      this.el.emit(\"action_mute\");\n    };\n\n    this.onSpawnClick = () => {\n      if (!window.APP.hubChannel.can(\"spawn_and_move_media\")) return;\n      this.el.emit(\"action_spawn\");\n    };\n\n    this.onPenClick = e => {\n      if (!window.APP.hubChannel.can(\"spawn_drawing\")) return;\n      this.el.emit(\"spawn_pen\", { object3D: e.object3D });\n      this.el.sceneEl.systems[\"hubs-systems\"].soundEffectsSystem.playSoundOneShot(SOUND_SPAWN_PEN);\n    };\n\n    this.onCameraClick = () => {\n      if (!window.APP.hubChannel.can(\"spawn_camera\")) return;\n      this.el.emit(\"action_toggle_camera\");\n    };\n\n    this.onInviteClick = () => {\n      this.el.emit(\"action_invite\");\n    };\n  },\n\n  play() {\n    this.el.sceneEl.addEventListener(\"stateadded\", this.onStateChange);\n    this.el.sceneEl.addEventListener(\"stateremoved\", this.onStateChange);\n    this.el.sceneEl.systems.permissions.onPermissionsUpdated(this.updateButtonStates);\n    this.updateButtonStates();\n\n    this.mic.object3D.addEventListener(\"interact\", this.onMicClick);\n    this.spawn.object3D.addEventListener(\"interact\", this.onSpawnClick);\n    this.pen.object3D.addEventListener(\"interact\", this.onPenClick);\n    this.cameraBtn.object3D.addEventListener(\"interact\", this.onCameraClick);\n    this.inviteBtn.object3D.addEventListener(\"interact\", this.onInviteClick);\n  },\n\n  pause() {\n    this.el.sceneEl.removeEventListener(\"stateadded\", this.onStateChange);\n    this.el.sceneEl.removeEventListener(\"stateremoved\", this.onStateChange);\n    window.APP.hubChannel.removeEventListener(\"permissions_updated\", this.updateButtonStates);\n\n    this.mic.object3D.removeEventListener(\"interact\", this.onMicClick);\n    this.spawn.object3D.removeEventListener(\"interact\", this.onSpawnClick);\n    this.pen.object3D.removeEventListener(\"interact\", this.onPenClick);\n    this.cameraBtn.object3D.removeEventListener(\"interact\", this.onCameraClick);\n    this.inviteBtn.object3D.removeEventListener(\"interact\", this.onInviteClick);\n  }\n});\n","/* global performance */\n\nimport { SOUND_SPAWN_EMOJI } from \"../systems/sound-effects-system\";\n\nAFRAME.registerComponent(\"emoji\", {\n  schema: {\n    emitDecayTime: { default: 1.5 },\n    emitFadeTime: { default: 0.5 },\n    emitEndTime: { default: 0 },\n    particleEmitterConfig: {\n      default: null,\n      parse: v => (typeof v === \"object\" ? v : JSON.parse(v)),\n      stringify: JSON.stringify\n    }\n  },\n\n  init() {\n    this.data.emitEndTime = performance.now() + this.data.emitDecayTime * 1000;\n  },\n\n  play() {\n    this.lastLinearVelocity = this.el.components[\"body-helper\"].body.physicsBody.getLinearVelocity().length2();\n    this.lastAngularVelocity = this.el.components[\"body-helper\"].body.physicsBody.getAngularVelocity().length2();\n    this.el.sceneEl.systems[\"hubs-systems\"].soundEffectsSystem.playPositionalSoundFollowing(\n      SOUND_SPAWN_EMOJI,\n      this.el.object3D\n    );\n    this.particleEmitter = this.el.querySelector(\".particle-emitter\");\n  },\n\n  update() {\n    if (!this.particleConfig && this.data.particleEmitterConfig) {\n      this.particleConfig = Object.assign({}, this.data.particleEmitterConfig);\n      this.originalParticleCount = this.particleConfig.particleCount;\n    }\n  },\n\n  tick(t, dt) {\n    const isMine = this.el.components.networked.initialized && this.el.components.networked.isMine();\n\n    if (this.particleConfig && isMine) {\n      const now = performance.now();\n\n      const linearVelocity = this.el.components[\"body-helper\"].body.physicsBody.getLinearVelocity().length2();\n      const linearAcceleration = ((linearVelocity - this.lastLinearVelocity) / dt) * 1000;\n      this.lastLinearVelocity = linearVelocity;\n\n      const angularVelocity = this.el.components[\"body-helper\"].body.physicsBody.getAngularVelocity().length2();\n      const angularAcceleration = ((angularVelocity - this.lastAngularVelocity) / dt) * 1000;\n      this.lastAngularVelocity = angularVelocity;\n\n      if (Math.abs(linearAcceleration) > 10000 || Math.abs(angularAcceleration) > 10000) {\n        this.data.emitEndTime = now + this.data.emitDecayTime * 1000;\n      }\n\n      const emitFadeTime = this.data.emitFadeTime * 1000;\n\n      if (now < this.data.emitEndTime && this.particleConfig.startOpacity < 1) {\n        this.particleConfig.particleCount = this.originalParticleCount;\n        this.particleConfig.startOpacity = 1;\n        this.particleConfig.middleOpacity = 1;\n        this.particleEmitter.setAttribute(\"particle-emitter\", this.particleConfig, true);\n      } else if (now >= this.data.emitEndTime && this.particleConfig.startOpacity > 0.001) {\n        const timeSinceStop = Math.min(now - this.data.emitEndTime, emitFadeTime);\n        const opacity = 1 - timeSinceStop / emitFadeTime;\n        const particleCount = opacity < 0.001 && this.particleConfig.particleCount > 0 ? 0 : this.originalParticleCount;\n        this.particleConfig.particleCount = particleCount;\n        this.particleConfig.startOpacity = opacity;\n        this.particleConfig.middleOpacity = opacity;\n        this.particleEmitter.setAttribute(\"particle-emitter\", this.particleConfig, true);\n      }\n    }\n  }\n});\n","import emoji_particle_0 from \"../assets/images/emojis/emoji_0.png\";\nimport emoji_particle_1 from \"../assets/images/emojis/emoji_1.png\";\nimport emoji_particle_2 from \"../assets/images/emojis/emoji_2.png\";\nimport emoji_particle_3 from \"../assets/images/emojis/emoji_3.png\";\nimport emoji_particle_4 from \"../assets/images/emojis/emoji_4.png\";\nimport emoji_particle_5 from \"../assets/images/emojis/emoji_5.png\";\nimport emoji_particle_6 from \"../assets/images/emojis/emoji_6.png\";\n\nimport emoji_0 from \"../assets/models/emojis/emoji_0.glb\";\nimport emoji_1 from \"../assets/models/emojis/emoji_1.glb\";\nimport emoji_2 from \"../assets/models/emojis/emoji_2.glb\";\nimport emoji_3 from \"../assets/models/emojis/emoji_3.glb\";\nimport emoji_4 from \"../assets/models/emojis/emoji_4.glb\";\nimport emoji_5 from \"../assets/models/emojis/emoji_5.glb\";\nimport emoji_6 from \"../assets/models/emojis/emoji_6.glb\";\n\nimport { TYPE } from \"three-ammo/constants\";\n\nconst COLLISION_LAYERS = require(\"../constants\").COLLISION_LAYERS;\n\nconst emojis = [emoji_0, emoji_1, emoji_2, emoji_3, emoji_4, emoji_5, emoji_6];\nconst particles = [\n  emoji_particle_0,\n  emoji_particle_1,\n  emoji_particle_2,\n  emoji_particle_3,\n  emoji_particle_4,\n  emoji_particle_5,\n  emoji_particle_6\n];\n\nfunction setOffsetVector(i, totalNumEmojis, width, spacing, offsetVector) {\n  const sign = i & 1 ? -1 : 1;\n  offsetVector.y = 0;\n  if (totalNumEmojis % 2 === 0) {\n    offsetVector.x = (spacing / 2 + width / 2 + Math.floor(i / 2) * (width + spacing)) * sign;\n    offsetVector.z = (Math.floor(i / 2) * width) / 2;\n  } else if (i !== 0) {\n    offsetVector.x = (width + spacing) * Math.floor((i + 1) / 2) * -sign;\n    offsetVector.z = (Math.floor((i + 1) / 2) * width) / 2;\n  }\n}\n\nAFRAME.registerComponent(\"emoji-hud\", {\n  schema: {\n    spawnerScale: { default: 0.1 },\n    spawnedScale: { default: 0.5 },\n    camera: { type: \"selector\" },\n    hudAngle: { default: -0.5 },\n    minHudAngle: { default: -0.2 },\n    maxHudAngle: { default: 0.7 },\n    hudDistance: { default: 0.4 },\n    spawnerPlatformWidth: { default: 0.0625 },\n    spawnerPlatformSpacing: { default: 0.021 }\n  },\n\n  init: (() => {\n    const cameraWorldPosition = new THREE.Vector3();\n    const offsetVector = new THREE.Vector3();\n    return function() {\n      this._onFrozen = this._onFrozen.bind(this);\n      this._onThaw = this._onThaw.bind(this);\n\n      const width = this.data.spawnerPlatformWidth;\n      const spacing = this.data.spawnerPlatformSpacing;\n\n      this.spawnerEntities = [];\n\n      for (let i = 0; i < emojis.length; i++) {\n        const spawnerEntity = document.createElement(\"a-entity\");\n        const url = new URL(emojis[i], window.location.href).href;\n        spawnerEntity.setAttribute(\"media-loader\", { src: url });\n        spawnerEntity.setAttribute(\"hoverable-visuals\", \"\");\n        spawnerEntity.setAttribute(\"scale\", {\n          x: this.data.spawnerScale,\n          y: this.data.spawnerScale,\n          z: this.data.spawnerScale\n        });\n        spawnerEntity.setAttribute(\"is-remote-hover-target\", \"\");\n        spawnerEntity.setAttribute(\"tags\", { isHandCollisionTarget: false });\n        spawnerEntity.setAttribute(\"visibility-while-frozen\", { requireHoverOnNonMobile: false });\n        spawnerEntity.setAttribute(\"css-class\", \"interactable\");\n        spawnerEntity.setAttribute(\"body-helper\", {\n          mass: 0,\n          type: TYPE.STATIC,\n          collisionFilterGroup: COLLISION_LAYERS.INTERACTABLES,\n          collisionFilterMask: COLLISION_LAYERS.DEFAULT_SPAWNER\n        });\n\n        const particle = new URL(particles[i], window.location.href).href;\n        const particleEmitterConfig = {\n          src: particle,\n          resolve: false,\n          particleCount: 20,\n          startSize: 0.01,\n          endSize: 0.2,\n          sizeRandomness: 0.05,\n          lifetime: 1,\n          lifetimeRandomness: 0.2,\n          ageRandomness: 1,\n          startVelocity: { x: 0, y: 1, z: 0 },\n          endVelocity: { x: 0, y: 0.25, z: 0 },\n          startOpacity: 1,\n          middleOpacity: 1,\n          endOpacity: 0\n        };\n\n        spawnerEntity.addEventListener(\"spawned-entity-created\", e => {\n          if (this.el.sceneEl.is(\"vr-mode\")) {\n            return;\n          }\n          const object3D = e.detail.target.object3D;\n          const cameraObject3D = this.data.camera.object3D;\n          object3D.updateMatrices();\n          cameraObject3D.getWorldPosition(cameraWorldPosition);\n          object3D.lookAt(cameraWorldPosition.x, object3D.position.y, cameraWorldPosition.z);\n          object3D.matrixNeedsUpdate = true;\n        });\n\n        spawnerEntity.addEventListener(\"spawned-entity-loaded\", e => {\n          e.detail.target.querySelector(\".particle-emitter\").setAttribute(\"particle-emitter\", particleEmitterConfig);\n          e.detail.target.setAttribute(\"emoji\", { particleEmitterConfig: particleEmitterConfig });\n        });\n\n        spawnerEntity.setAttribute(\"super-spawner\", {\n          src: url,\n          template: \"#interactable-emoji-media\",\n          spawnScale: { x: this.data.spawnedScale, y: this.data.spawnedScale, z: this.data.spawnedScale }\n        });\n\n        const cylinder = document.createElement(\"a-cylinder\");\n        cylinder.setAttribute(\"visibility-while-frozen\", { requireHoverOnNonMobile: false });\n        cylinder.setAttribute(\"material\", { opacity: 0.2, color: \"#2f7fee\" });\n        cylinder.setAttribute(\"segments-height\", 1);\n        cylinder.setAttribute(\"segments-radial\", 16);\n        cylinder.setAttribute(\"scale\", { x: width / 2, y: width / 20, z: width / 5 });\n        cylinder.setAttribute(\"rotation\", { x: 45, y: 0, z: 0 });\n\n        setOffsetVector(i, emojis.length, width, spacing, offsetVector);\n\n        spawnerEntity.object3D.position.copy(offsetVector);\n        spawnerEntity.object3D.matrixNeedsUpdate = true;\n\n        cylinder.object3D.position.set(offsetVector.x, -width / 2, offsetVector.z + 0.01); //move back to avoid transparency issues with emojis\n        cylinder.object3D.matrixNeedsUpdate = true;\n\n        this.el.appendChild(spawnerEntity);\n        this.el.appendChild(cylinder);\n\n        this.spawnerEntities.push(spawnerEntity);\n      }\n    };\n  })(),\n\n  play() {\n    this.el.sceneEl.addEventListener(\"stateadded\", this._onFrozen);\n    this.el.sceneEl.addEventListener(\"stateremoved\", this._onThaw);\n    this._updateOffset();\n  },\n\n  pause() {\n    this.el.sceneEl.removeEventListener(\"stateadded\", this._onFrozen);\n    this.el.sceneEl.removeEventListener(\"stateremoved\", this._onThaw);\n  },\n\n  _onFrozen(e) {\n    if (e.detail === \"frozen\") {\n      this._updateOffset();\n      for (let i = 0; i < this.spawnerEntities.length; i++) {\n        this.spawnerEntities[i].components.tags.data.isHandCollisionTarget = true;\n      }\n    }\n  },\n\n  _onThaw(e) {\n    if (e.detail === \"frozen\") {\n      for (let i = 0; i < this.spawnerEntities.length; i++) {\n        this.spawnerEntities[i].components.tags.data.isHandCollisionTarget = false;\n      }\n    }\n  },\n\n  _updateOffset: (function() {\n    const targetWorldPos = new THREE.Vector3();\n    const cameraForward = new THREE.Vector3();\n    const projectedCameraForward = new THREE.Vector3();\n    const angledCameraForward = new THREE.Vector3();\n    const defaultRight = new THREE.Vector3(1, 0, 0);\n    return function() {\n      const obj = this.el.object3D;\n      const cameraObject3D = this.data.camera.object3D;\n      cameraObject3D.updateMatrices();\n      cameraForward.set(0, 0, -1);\n      cameraForward.transformDirection(cameraObject3D.matrixWorld);\n      projectedCameraForward.set(0, 0, -1);\n      projectedCameraForward.transformDirection(cameraObject3D.matrixWorld);\n      projectedCameraForward.projectOnPlane(THREE.Object3D.DefaultUp).normalize();\n      const angle =\n        Math.sign(THREE.Object3D.DefaultUp.dot(cameraForward)) * projectedCameraForward.angleTo(cameraForward);\n      const angleOffset = angle - Math.max(this.data.minHudAngle, Math.min(this.data.maxHudAngle, angle));\n      angledCameraForward.set(0, 0, -1);\n      angledCameraForward.applyAxisAngle(defaultRight, this.data.hudAngle - angleOffset);\n      angledCameraForward.multiplyScalar(this.data.hudDistance);\n      cameraObject3D.localToWorld(angledCameraForward);\n      obj.parent.worldToLocal(angledCameraForward);\n      obj.position.copy(angledCameraForward);\n      obj.updateMatrices(true);\n      cameraObject3D.getWorldPosition(targetWorldPos);\n      obj.lookAt(targetWorldPos);\n      obj.matrixNeedsUpdate = true;\n    };\n  })()\n});\n","import nipplejs from \"nipplejs\";\nimport styles from \"./virtual-gamepad-controls.css\";\n\n/**\n * Instantiates 2D virtual gamepads and emits associated events.\n * @namespace user-input\n * @component virtual-gamepad-controls\n */\nAFRAME.registerComponent(\"virtual-gamepad-controls\", {\n  schema: {},\n\n  init() {\n    this.characterController = this.el.sceneEl.systems[\"hubs-systems\"].characterController;\n\n    this.onEnterVr = this.onEnterVr.bind(this);\n    this.onExitVr = this.onExitVr.bind(this);\n    this.onFirstInteraction = this.onFirstInteraction.bind(this);\n    this.onMoveJoystickChanged = this.onMoveJoystickChanged.bind(this);\n    this.onMoveJoystickEnd = this.onMoveJoystickEnd.bind(this);\n    this.onLookJoystickChanged = this.onLookJoystickChanged.bind(this);\n    this.onLookJoystickEnd = this.onLookJoystickEnd.bind(this);\n\n    this.mockJoystickContainer = document.createElement(\"div\");\n    this.mockJoystickContainer.classList.add(styles.mockJoystickContainer);\n    const leftMock = document.createElement(\"div\");\n    leftMock.classList.add(styles.mockJoystick);\n    const leftMockSmall = document.createElement(\"div\");\n    leftMockSmall.classList.add(styles.mockJoystick, styles.inner);\n    leftMock.appendChild(leftMockSmall);\n    this.mockJoystickContainer.appendChild(leftMock);\n    const rightMock = document.createElement(\"div\");\n    rightMock.classList.add(styles.mockJoystick);\n    const rightMockSmall = document.createElement(\"div\");\n    rightMockSmall.classList.add(styles.mockJoystick, styles.inner);\n    rightMock.appendChild(rightMockSmall);\n    this.mockJoystickContainer.appendChild(rightMock);\n    document.body.appendChild(this.mockJoystickContainer);\n\n    this.enableLeft = window.APP.store.state.preferences.enableOnScreenJoystickLeft;\n    if (this.enableLeft) {\n      this.createLeftStick();\n    }\n    this.enableRight = window.APP.store.state.preferences.enableOnScreenJoystickRight;\n    if (this.enableRight) {\n      this.createRightStick();\n    }\n    this.onPreferenceChange = this.onPreferenceChange.bind(this);\n    window.APP.store.addEventListener(\"statechanged\", this.onPreferenceChange);\n\n    this.inVr = false;\n    this.moving = false;\n    this.rotating = false;\n\n    this.displacement = new THREE.Vector3();\n    this.lookDy = 0;\n    this.lookDx = 0;\n\n    this.el.sceneEl.addEventListener(\"enter-vr\", this.onEnterVr);\n    this.el.sceneEl.addEventListener(\"exit-vr\", this.onExitVr);\n  },\n\n  onPreferenceChange() {\n    const newEnableLeft = window.APP.store.state.preferences.enableOnScreenJoystickLeft;\n    const newEnableRight = window.APP.store.state.preferences.enableOnScreenJoystickRight;\n    if (!this.enableLeft && newEnableLeft) {\n      this.createLeftStick();\n    } else if (this.enableLeft && !newEnableLeft) {\n      this.leftStick.destroy();\n      this.leftTouchZone.parentNode.removeChild(this.leftTouchZone);\n      this.leftStick = null;\n      this.leftTouchZone = null;\n    }\n    if (!this.enableRight && newEnableRight) {\n      this.createRightStick();\n    } else if (this.enableRight && !newEnableRight) {\n      this.rightStick.destroy();\n      this.rightTouchZone.parentNode.removeChild(this.rightTouchZone);\n      this.rightStick = null;\n      this.rightTouchZone = null;\n    }\n    this.enableLeft = newEnableLeft;\n    this.enableRight = newEnableRight;\n  },\n\n  createRightStick() {\n    this.rightTouchZone = document.createElement(\"div\");\n    this.rightTouchZone.classList.add(styles.touchZone, styles.right);\n    document.body.appendChild(this.rightTouchZone);\n    this.rightStick = nipplejs.create({\n      zone: this.rightTouchZone,\n      color: \"white\",\n      fadeTime: 0\n    });\n    this.rightStick.on(\"start\", this.onFirstInteraction);\n    this.rightStick.on(\"move\", this.onLookJoystickChanged);\n    this.rightStick.on(\"end\", this.onLookJoystickEnd);\n  },\n\n  createLeftStick() {\n    this.leftTouchZone = document.createElement(\"div\");\n    this.leftTouchZone.classList.add(styles.touchZone, styles.left);\n    document.body.appendChild(this.leftTouchZone);\n    this.leftStick = nipplejs.create({\n      zone: this.leftTouchZone,\n      color: \"white\",\n      fadeTime: 0\n    });\n    this.leftStick.on(\"start\", this.onFirstInteraction);\n    this.leftStick.on(\"move\", this.onMoveJoystickChanged);\n    this.leftStick.on(\"end\", this.onMoveJoystickEnd);\n  },\n\n  onFirstInteraction() {\n    if (this.leftStick) this.leftStick.off(\"start\", this.onFirstInteraction);\n    if (this.rightStick) this.rightStick.off(\"start\", this.onFirstInteraction);\n    if (this.mockJoystickContainer) document.body.removeChild(this.mockJoystickContainer);\n    this.mockJoystickContainer = null;\n  },\n\n  onMoveJoystickChanged(event, joystick) {\n    if (window.APP.preferenceScreenIsVisible) return;\n    const angle = joystick.angle.radian;\n    const force = joystick.force < 1 ? joystick.force : 1;\n    this.displacement.set(Math.cos(angle), 0, Math.sin(angle)).multiplyScalar(force * 1.85);\n    this.moving = true;\n  },\n\n  onMoveJoystickEnd() {\n    this.moving = false;\n    this.displacement.set(0, 0, 0);\n  },\n\n  onLookJoystickChanged(event, joystick) {\n    if (window.APP.preferenceScreenIsVisible) return;\n    // Set pitch and yaw angles on right stick move\n    const angle = joystick.angle.radian;\n    const force = joystick.force < 1 ? joystick.force : 1;\n    const turnStrength = 0.05;\n    this.rotating = true;\n    this.lookDy = -Math.cos(angle) * force * turnStrength;\n    this.lookDx = Math.sin(angle) * force * turnStrength;\n  },\n\n  onLookJoystickEnd() {\n    this.rotating = false;\n    this.lookDx = 0;\n    this.lookDy = 0;\n    this.el.sceneEl.emit(\"rotateX\", this.lookDx);\n  },\n\n  tick() {\n    if (this.inVr) {\n      return;\n    }\n    if (this.moving) {\n      this.characterController.enqueueRelativeMotion(this.displacement);\n    }\n    if (this.rotating) {\n      this.characterController.enqueueInPlaceRotationAroundWorldUp(this.lookDy);\n      this.el.sceneEl.emit(\"rotateX\", this.lookDx);\n    }\n  },\n\n  onEnterVr() {\n    // Hide the joystick controls\n    this.inVr = true;\n    if (this.leftTouchZone) this.leftTouchZone.style.display = \"none\";\n    if (this.rightTouchZone) this.rightTouchZone.style.display = \"none\";\n  },\n\n  onExitVr() {\n    // Show the joystick controls\n    this.inVr = false;\n    if (this.leftTouchZone) this.leftTouchZone.style.display = \"block\";\n    if (this.rightTouchZone) this.rightTouchZone.style.display = \"block\";\n  },\n\n  remove() {\n    this.el.sceneEl.removeEventListener(\"entervr\", this.onEnterVr);\n    this.el.sceneEl.removeEventListener(\"exitvr\", this.onExitVr);\n    document.body.removeChild(this.mockJoystickContainer);\n    if (this.leftTouchZone) document.body.removeChild(this.leftTouchZone);\n    if (this.rightTouchZone) document.body.removeChild(this.rightTouchZone);\n  }\n});\n","import { waitForDOMContentLoaded } from \"../utils/async-utils\";\nconst { Vector3, Quaternion, Matrix4, Euler } = THREE;\n\nfunction quaternionAlmostEquals(epsilon, u, v) {\n  // Note: q and -q represent same rotation\n  return (\n    (Math.abs(u.x - v.x) < epsilon &&\n      Math.abs(u.y - v.y) < epsilon &&\n      Math.abs(u.z - v.z) < epsilon &&\n      Math.abs(u.w - v.w) < epsilon) ||\n    (Math.abs(-u.x - v.x) < epsilon &&\n      Math.abs(-u.y - v.y) < epsilon &&\n      Math.abs(-u.z - v.z) < epsilon &&\n      Math.abs(-u.w - v.w) < epsilon)\n  );\n}\n\n/**\n * Provides access to the end effectors for IK.\n * @namespace avatar\n * @component ik-root\n */\nAFRAME.registerComponent(\"ik-root\", {\n  schema: {\n    camera: { type: \"string\", default: \".camera\" },\n    leftController: { type: \"string\", default: \".left-controller\" },\n    rightController: { type: \"string\", default: \".right-controller\" }\n  },\n  update(oldData) {\n    if (this.data.camera !== oldData.camera) {\n      this.camera = this.el.querySelector(this.data.camera);\n    }\n\n    if (this.data.leftController !== oldData.leftController) {\n      this.leftController = this.el.querySelector(this.data.leftController);\n    }\n\n    if (this.data.rightController !== oldData.rightController) {\n      this.rightController = this.el.querySelector(this.data.rightController);\n    }\n  }\n});\n\nfunction findIKRoot(entity) {\n  while (entity && !(entity.components && entity.components[\"ik-root\"])) {\n    entity = entity.parentNode;\n  }\n  return entity && entity.components[\"ik-root\"];\n}\n\nconst HAND_ROTATIONS = {\n  left: new Matrix4().makeRotationFromEuler(new Euler(-Math.PI / 2, Math.PI / 2, 0)),\n  right: new Matrix4().makeRotationFromEuler(new Euler(-Math.PI / 2, -Math.PI / 2, 0))\n};\n\n/**\n * Performs IK on a hip-rooted skeleton to align the hip, head and hands with camera and controller inputs.\n * @namespace avatar\n * @component ik-controller\n */\nAFRAME.registerComponent(\"ik-controller\", {\n  schema: {\n    leftEye: { type: \"string\", default: \"LeftEye\" },\n    rightEye: { type: \"string\", default: \"RightEye\" },\n    head: { type: \"string\", default: \"Head\" },\n    neck: { type: \"string\", default: \"Neck\" },\n    leftHand: { type: \"string\", default: \"LeftHand\" },\n    rightHand: { type: \"string\", default: \"RightHand\" },\n    chest: { type: \"string\", default: \"Spine\" },\n    rotationSpeed: { default: 5 },\n    alwaysUpdate: { type: \"boolean\", default: false }\n  },\n\n  init() {\n    this._runScheduledWork = this._runScheduledWork.bind(this);\n    this._updateIsInView = this._updateIsInView.bind(this);\n\n    this.flipY = new Matrix4().makeRotationY(Math.PI);\n\n    this.cameraForward = new Matrix4();\n    this.headTransform = new Matrix4();\n    this.hipsPosition = new Vector3();\n\n    this.invHipsToHeadVector = new Vector3();\n\n    this.middleEyeMatrix = new Matrix4();\n    this.middleEyePosition = new Vector3();\n    this.invMiddleEyeToHead = new Matrix4();\n\n    this.cameraYRotation = new Euler();\n    this.cameraYQuaternion = new Quaternion();\n\n    this.invHipsQuaternion = new Quaternion();\n    this.headQuaternion = new Quaternion();\n\n    this.rootToChest = new Matrix4();\n    this.invRootToChest = new Matrix4();\n\n    this.ikRoot = findIKRoot(this.el);\n\n    this.isInView = true;\n    this.hasConvergedHips = false;\n    this.lastCameraTransform = new THREE.Matrix4();\n    waitForDOMContentLoaded().then(() => {\n      this.playerCamera = document.getElementById(\"viewing-camera\").getObject3D(\"camera\");\n    });\n\n    this.el.sceneEl.systems[\"frame-scheduler\"].schedule(this._runScheduledWork, \"ik\");\n    this.forceIkUpdate = true;\n  },\n\n  remove() {\n    this.el.sceneEl.systems[\"frame-scheduler\"].unschedule(this._runScheduledWork, \"ik\");\n  },\n\n  update(oldData) {\n    this.avatar = this.el.object3D;\n\n    if (this.data.leftEye !== oldData.leftEye) {\n      this.leftEye = this.el.object3D.getObjectByName(this.data.leftEye);\n    }\n\n    if (this.data.rightEye !== oldData.rightEye) {\n      this.rightEye = this.el.object3D.getObjectByName(this.data.rightEye);\n    }\n\n    if (this.data.head !== oldData.head) {\n      this.head = this.el.object3D.getObjectByName(this.data.head);\n    }\n\n    if (this.data.neck !== oldData.neck) {\n      this.neck = this.el.object3D.getObjectByName(this.data.neck);\n    }\n\n    if (this.data.leftHand !== oldData.leftHand) {\n      this.leftHand = this.el.object3D.getObjectByName(this.data.leftHand);\n    }\n\n    if (this.data.rightHand !== oldData.rightHand) {\n      this.rightHand = this.el.object3D.getObjectByName(this.data.rightHand);\n    }\n\n    if (this.data.chest !== oldData.chest) {\n      this.chest = this.el.object3D.getObjectByName(this.data.chest);\n    }\n\n    // Set middleEye's position to be right in the middle of the left and right eyes.\n    this.middleEyePosition.addVectors(this.leftEye.position, this.rightEye.position);\n    this.middleEyePosition.divideScalar(2);\n    this.middleEyeMatrix.makeTranslation(this.middleEyePosition.x, this.middleEyePosition.y, this.middleEyePosition.z);\n    this.invMiddleEyeToHead = this.middleEyeMatrix.getInverse(this.middleEyeMatrix);\n\n    this.invHipsToHeadVector\n      .addVectors(this.chest.position, this.neck.position)\n      .add(this.head.position)\n      .negate();\n  },\n\n  tick(time, dt) {\n    if (!this.ikRoot) {\n      return;\n    }\n\n    const root = this.ikRoot.el.object3D;\n    root.updateMatrices();\n    const { camera, leftController, rightController } = this.ikRoot;\n\n    camera.object3D.updateMatrix();\n\n    const hasNewCameraTransform = !this.lastCameraTransform.equals(camera.object3D.matrix);\n\n    // Optimization: if the camera hasn't moved and the hips converged to the target orientation on a previous frame,\n    // then the avatar does not need any IK this frame.\n    //\n    // Update in-view avatars every frame, and update out-of-view avatars via frame scheduler.\n    if (\n      this.data.alwaysUpdate ||\n      this.forceIkUpdate ||\n      (this.isInView && (hasNewCameraTransform || !this.hasConvergedHips))\n    ) {\n      if (hasNewCameraTransform) {\n        this.lastCameraTransform.copy(camera.object3D.matrix);\n      }\n\n      const {\n        avatar,\n        head,\n        neck,\n        chest,\n        cameraForward,\n        headTransform,\n        invMiddleEyeToHead,\n        invHipsToHeadVector,\n        flipY,\n        cameraYRotation,\n        cameraYQuaternion,\n        invHipsQuaternion,\n        rootToChest,\n        invRootToChest\n      } = this;\n\n      // Camera faces the -Z direction. Flip it along the Y axis so that it is +Z.\n      cameraForward.multiplyMatrices(camera.object3D.matrix, flipY);\n\n      // Compute the head position such that the hmd position would be in line with the middleEye\n      headTransform.multiplyMatrices(cameraForward, invMiddleEyeToHead);\n\n      // Then position the avatar such that the head is aligned with headTransform\n      // (which positions middleEye in line with the hmd)\n      //\n      // Note that we position the avatar itself, *not* the hips, since positioning the\n      // hips will use vertex skinning to do the root displacement, which results in\n      // frustum culling errors since three.js does not take into account skinning when\n      // computing frustum culling sphere bounds.\n      avatar.position.setFromMatrixPosition(headTransform).add(invHipsToHeadVector);\n\n      // Animate the hip rotation to follow the Y rotation of the camera with some damping.\n      cameraYRotation.setFromRotationMatrix(cameraForward, \"YXZ\");\n      cameraYRotation.x = 0;\n      cameraYRotation.z = 0;\n      cameraYQuaternion.setFromEuler(cameraYRotation);\n\n      if (this._hadFirstTick) {\n        Quaternion.slerp(\n          avatar.quaternion,\n          cameraYQuaternion,\n          avatar.quaternion,\n          (this.data.rotationSpeed * dt) / 1000\n        );\n      } else {\n        avatar.quaternion.copy(cameraYQuaternion);\n      }\n\n      this.hasConvergedHips = quaternionAlmostEquals(0.0001, cameraYQuaternion, avatar.quaternion);\n\n      // Take the head orientation computed from the hmd, remove the Y rotation already applied to it by the hips,\n      // and apply it to the head\n      invHipsQuaternion.copy(avatar.quaternion).inverse();\n      head.quaternion.setFromRotationMatrix(headTransform).premultiply(invHipsQuaternion);\n\n      avatar.updateMatrix();\n      rootToChest.multiplyMatrices(avatar.matrix, chest.matrix);\n      invRootToChest.getInverse(rootToChest);\n\n      root.matrixNeedsUpdate = true;\n      neck.matrixNeedsUpdate = true;\n      head.matrixNeedsUpdate = true;\n      chest.matrixNeedsUpdate = true;\n    }\n\n    const { leftHand, rightHand } = this;\n\n    if (leftHand) this.updateHand(HAND_ROTATIONS.left, leftHand, leftController.object3D, true, this.isInView);\n    if (rightHand) this.updateHand(HAND_ROTATIONS.right, rightHand, rightController.object3D, false, this.isInView);\n    this.forceIkUpdate = false;\n\n    if (!this._hadFirstTick) {\n      // Ensure the avatar is not shown until we've done our first IK step, to prevent seeing mis-oriented/t-pose pose or our own avatar at the wrong place.\n      this.ikRoot.el.object3D.visible = true;\n      this._hasFirstTick = true;\n    }\n  },\n\n  updateHand(handRotation, handObject3D, controllerObject3D, isLeft, isInView) {\n    const handMatrix = handObject3D.matrix;\n\n    // TODO: This coupling with personal-space-invader is not ideal.\n    // There should be some intermediate thing managing multiple opinions about object visibility\n    const spaceInvader = handObject3D.el.components[\"personal-space-invader\"];\n\n    if (spaceInvader) {\n      // If this hand has an invader, defer to it to manage visibility overall but tell it to hide based upon controller state\n      spaceInvader.setAlwaysHidden(!controllerObject3D.visible);\n    } else {\n      handObject3D.visible = controllerObject3D.visible;\n    }\n\n    // Optimization: skip IK update if not in view and not forced by frame scheduler\n    if (controllerObject3D.visible && (isInView || this.forceIkUpdate || this.data.alwaysUpdate)) {\n      handMatrix.multiplyMatrices(this.invRootToChest, controllerObject3D.matrix);\n\n      handMatrix.multiply(handRotation);\n\n      handObject3D.position.setFromMatrixPosition(handMatrix);\n      handObject3D.rotation.setFromRotationMatrix(handMatrix);\n      handObject3D.matrixNeedsUpdate = true;\n    }\n  },\n\n  _runScheduledWork() {\n    // Every scheduled run, we force an IK update on the next frame (so at most one avatar with forced IK per frame)\n    // and also update the this.isInView bit on the avatar which is used to determine if an IK update should be run\n    // every frame.\n    this.forceIkUpdate = true;\n\n    this._updateIsInView();\n  },\n\n  _updateIsInView: (function() {\n    const frustum = new THREE.Frustum();\n    const frustumMatrix = new THREE.Matrix4();\n    const cameraWorld = new THREE.Vector3();\n    const isInViewOfCamera = (screenCamera, pos) => {\n      frustumMatrix.multiplyMatrices(screenCamera.projectionMatrix, screenCamera.matrixWorldInverse);\n      frustum.setFromMatrix(frustumMatrix);\n      return frustum.containsPoint(pos);\n    };\n\n    return function() {\n      if (!this.playerCamera) return;\n\n      const camera = this.ikRoot.camera.object3D;\n      camera.getWorldPosition(cameraWorld);\n\n      // Check player camera\n      this.isInView = isInViewOfCamera(this.playerCamera, cameraWorld);\n\n      if (!this.isInView) {\n        // Check in-game camera if rendering to viewfinder and owned\n        const cameraTools = this.el.sceneEl.systems[\"camera-tools\"];\n\n        if (cameraTools) {\n          cameraTools.ifMyCameraRenderingViewfinder(cameraTool => {\n            this.isInView = this.isInView || isInViewOfCamera(cameraTool.camera, cameraWorld);\n          });\n        }\n      }\n    };\n  })()\n});\n","import { paths } from \"../systems/userinput/paths\";\n\nconst POSES = {\n  open: \"open\",\n  point: \"point\",\n  fist: \"fist\",\n  hold: \"hold\",\n  thumbUp: \"thumbUp\",\n  thumbDown: \"thumbDown\",\n  indexDown: \"indexDown\",\n  pinch: \"pinch\",\n  mrpDown: \"mrpDown\"\n};\n\n/**\n * Emits events indicating that avatar hands should be posed differently.\n * @namespace user-input\n * @component hand-controls2\n */\nAFRAME.registerComponent(\"hand-controls2\", {\n  schema: { default: \"left\" },\n\n  init() {\n    this.pose = POSES.open;\n  },\n\n  poseForFingers(thumb, index, middleRingPinky) {\n    if (!thumb && !index && !middleRingPinky) {\n      return POSES.open;\n    } else if (thumb && index && middleRingPinky) {\n      return POSES.fist;\n    } else if (!thumb && index && middleRingPinky) {\n      return POSES.thumbUp;\n    } else if (!thumb && !index && middleRingPinky) {\n      return POSES.mrpDown;\n    } else if (!thumb && index && !middleRingPinky) {\n      return POSES.indexDown;\n    } else if (thumb && !index && !middleRingPinky) {\n      return POSES.thumbDown;\n    } else if (thumb && index && !middleRingPinky) {\n      return POSES.pinch;\n    } else if (thumb && !index && middleRingPinky) {\n      return POSES.point;\n    }\n\n    console.warn(`Did not find matching pose for thumb ${thumb}, index ${index}, middleRingPinky ${middleRingPinky}`);\n    return POSES.open;\n  },\n\n  tick() {\n    const hand = this.data;\n    const userinput = AFRAME.scenes[0].systems.userinput;\n    const subpath = hand === \"left\" ? paths.actions.leftHand : paths.actions.rightHand;\n    const thumb = userinput.get(subpath.thumb);\n    const index = userinput.get(subpath.index);\n    const middleRingPinky = userinput.get(subpath.middleRingPinky);\n    const pose = this.poseForFingers(thumb, index, middleRingPinky);\n    if (pose !== this.pose) {\n      this.el.emit(\"hand-pose\", { previous: this.pose, current: pose });\n      this.pose = pose;\n    }\n  }\n});\n","import { showHoverEffect } from \"../utils/permissions-utils\";\n\n/**\n * Applies effects to a hoverer based on hover state.\n * @namespace interactables\n * @component hover-visuals\n */\nAFRAME.registerComponent(\"hover-visuals\", {\n  schema: {\n    hand: { type: \"string\" }\n  },\n  init() {\n    // uniforms are set from the component responsible for loading the mesh.\n    this.handleLeftVisuals = this.handleLeftVisuals.bind(this);\n    this.handleRightVisuals = this.handleRightVisuals.bind(this);\n    this.hadLeftVisualLastFrame = false;\n    this.hadRightVisualLastFrame = false;\n    this.uniforms = null;\n    this.sweepParams = [0, 1.0];\n  },\n  remove() {\n    this.uniforms = null;\n  },\n  tick() {\n    if (!this.uniforms || !this.uniforms.length) return;\n\n    // Push down loops to assist JIT:\n    if (this.data.hand === \"left\") {\n      this.handleLeftVisuals();\n    } else {\n      this.handleRightVisuals();\n    }\n  },\n\n  handleLeftVisuals: function() {\n    const interaction = AFRAME.scenes[0].systems.interaction;\n    const interactingElement = interaction.state.leftHand.held || interaction.state.leftHand.hovered;\n    const hideVisual = !interactingElement || !showHoverEffect(interactingElement);\n\n    // Last frame, we didn't have a visual so no need to update uniforms.\n    if (hideVisual && !this.hadLeftVisualLastFrame) return;\n    this.hadLeftVisualLastFrame = !hideVisual;\n\n    const elements = this.el.object3D.matrixWorld.elements;\n\n    for (let i = 0, l = this.uniforms.length; i < l; i++) {\n      const uniform = this.uniforms[i];\n      uniform.hubs_HighlightInteractorOne.value = !hideVisual;\n      uniform.hubs_InteractorOnePos.value[0] = elements[12];\n      uniform.hubs_InteractorOnePos.value[1] = elements[13];\n      uniform.hubs_InteractorOnePos.value[2] = elements[14];\n    }\n  },\n\n  handleRightVisuals: function() {\n    const interaction = AFRAME.scenes[0].systems.interaction;\n\n    const interactingElement = interaction.state.rightHand.held || interaction.state.rightHand.hovered;\n    const hideVisual = !interactingElement || !showHoverEffect(interactingElement);\n\n    // Last frame, we didn't have a visual so no need to update uniforms.\n    if (hideVisual && !this.hadRightVisualLastFrame) return;\n    this.hadRightVisualLastFrame = !hideVisual;\n\n    const elements = this.el.object3D.matrixWorld.elements;\n\n    for (let i = 0, l = this.uniforms.length; i < l; i++) {\n      const uniform = this.uniforms[i];\n      uniform.hubs_SweepParams.value = this.sweepParams;\n\n      uniform.hubs_HighlightInteractorTwo.value = !hideVisual;\n      uniform.hubs_InteractorTwoPos.value[0] = elements[12];\n      uniform.hubs_InteractorTwoPos.value[1] = elements[13];\n      uniform.hubs_InteractorTwoPos.value[2] = elements[14];\n    }\n  }\n});\n","import { waitForDOMContentLoaded } from \"../utils/async-utils\";\n\n/**\n * Positions an entity relative to a given target when the given event is fired.\n * @component offset-relative-to\n */\nAFRAME.registerComponent(\"offset-relative-to\", {\n  schema: {\n    target: {\n      type: \"selector\"\n    },\n    offset: {\n      type: \"vec3\"\n    },\n    on: {\n      type: \"string\"\n    },\n    orientation: {\n      default: 1 // see doc/image_orientations.gif\n    },\n    selfDestruct: {\n      default: false\n    },\n    lookAt: {\n      default: false\n    }\n  },\n  init() {\n    this.updateOffset = this.updateOffset.bind(this);\n\n    waitForDOMContentLoaded().then(() => {\n      if (this.data.on) {\n        this.el.sceneEl.addEventListener(this.data.on, this.updateOffset);\n      } else {\n        this.updateOffset();\n      }\n    });\n  },\n\n  updateOffset: (function() {\n    const y = new THREE.Vector3(0, 1, 0);\n    const z = new THREE.Vector3(0, 0, -1);\n    const QUARTER_CIRCLE = Math.PI / 2;\n    const offsetVector = new THREE.Vector3();\n    const targetWorldPos = new THREE.Vector3();\n    return function() {\n      const obj = this.el.object3D;\n      const target = this.data.target.object3D;\n      offsetVector.copy(this.data.offset);\n      target.localToWorld(offsetVector);\n      if (obj.parent) {\n        obj.parent.worldToLocal(offsetVector);\n      }\n      obj.position.copy(offsetVector);\n      if (this.data.lookAt) {\n        target.getWorldPosition(targetWorldPos);\n        obj.updateMatrices(true);\n        obj.lookAt(targetWorldPos);\n      } else {\n        target.getWorldQuaternion(obj.quaternion);\n      }\n\n      // See doc/image_orientations.gif\n      switch (this.data.orientation) {\n        case 8:\n          obj.rotateOnAxis(z, 3 * QUARTER_CIRCLE);\n          break;\n        case 7:\n          obj.rotateOnAxis(z, 3 * QUARTER_CIRCLE);\n          obj.rotateOnAxis(y, 2 * QUARTER_CIRCLE);\n          break;\n        case 6:\n          obj.rotateOnAxis(z, QUARTER_CIRCLE);\n          break;\n        case 5:\n          obj.rotateOnAxis(z, QUARTER_CIRCLE);\n          obj.rotateOnAxis(y, 2 * QUARTER_CIRCLE);\n          break;\n        case 4:\n          obj.rotateOnAxis(z, 2 * QUARTER_CIRCLE);\n          obj.rotateOnAxis(y, 2 * QUARTER_CIRCLE);\n          break;\n        case 3:\n          obj.rotateOnAxis(z, 2 * QUARTER_CIRCLE);\n          break;\n        case 2:\n          obj.rotateOnAxis(y, 2 * QUARTER_CIRCLE);\n          break;\n        case 1:\n        default:\n          break;\n      }\n\n      obj.matrixNeedsUpdate = true;\n\n      if (this.data.selfDestruct) {\n        if (this.data.on) {\n          this.el.sceneEl.removeEventListener(this.data.on, this.updateOffset);\n        }\n        this.el.removeAttribute(\"offset-relative-to\");\n      }\n    };\n  })()\n});\n","import { injectCustomShaderChunks } from \"../utils/media-utils\";\nimport { AVATAR_TYPES } from \"../utils/avatar-utils\";\nimport { registerComponentInstance } from \"../utils/component-utils\";\nimport { deregisterComponentInstance } from \"../utils/component-utils\";\n\nfunction ensureAvatarNodes(json) {\n  const { nodes } = json;\n  if (!nodes.some(node => node.name === \"Head\")) {\n    // If the avatar model doesn't have a Head node. The user has probably chosen a custom GLB.\n    // So, we need to construct a suitable hierarchy for avatar functionality to work.\n    // We re-parent the original root node to the Head node and set the scene root to a new AvatarRoot.\n\n    // Note: We assume that the first node in the primary scene is the one we care about.\n    const originalRoot = json.scenes[json.scene].nodes[0];\n    nodes.push({ name: \"LeftEye\", extensions: { MOZ_hubs_components: {} } });\n    nodes.push({ name: \"RightEye\", extensions: { MOZ_hubs_components: {} } });\n    nodes.push({\n      name: \"Head\",\n      children: [originalRoot, nodes.length - 1, nodes.length - 2],\n      extensions: { MOZ_hubs_components: { \"scale-audio-feedback\": \"\" } }\n    });\n    nodes.push({ name: \"Neck\", children: [nodes.length - 1] });\n    nodes.push({ name: \"Spine\", children: [nodes.length - 1] });\n    nodes.push({ name: \"Hips\", children: [nodes.length - 1] });\n    nodes.push({ name: \"AvatarRoot\", children: [nodes.length - 1] });\n    json.scenes[json.scene].nodes[0] = nodes.length - 1;\n  }\n  return json;\n}\n\n/**\n * Sets player info state, including avatar choice and display name.\n * @namespace avatar\n * @component player-info\n */\nAFRAME.registerComponent(\"player-info\", {\n  schema: {\n    avatarSrc: { type: \"string\" },\n    avatarType: { type: \"string\", default: AVATAR_TYPES.SKINNABLE }\n  },\n  init() {\n    this.displayName = null;\n    this.identityName = null;\n    this.isOwner = false;\n    this.isRecording = false;\n    this.applyProperties = this.applyProperties.bind(this);\n    this.updateDisplayName = this.updateDisplayName.bind(this);\n    this.applyDisplayName = this.applyDisplayName.bind(this);\n    this.handleModelError = this.handleModelError.bind(this);\n    this.update = this.update.bind(this);\n\n    this.isLocalPlayerInfo = this.el.id === \"avatar-rig\";\n    this.playerSessionId = null;\n\n    if (!this.isLocalPlayerInfo) {\n      NAF.utils.getNetworkedEntity(this.el).then(networkedEntity => {\n        this.playerSessionId = NAF.utils.getCreator(networkedEntity);\n        const playerPresence = window.APP.hubChannel.presence.state[this.playerSessionId];\n        if (playerPresence) {\n          this.updateDisplayNameFromPresenceMeta(playerPresence.metas[0]);\n        }\n      });\n    }\n    registerComponentInstance(this, \"player-info\");\n  },\n  remove() {\n    deregisterComponentInstance(this, \"player-info\");\n  },\n  play() {\n    this.el.addEventListener(\"model-loaded\", this.applyProperties);\n    this.el.sceneEl.addEventListener(\"presence_updated\", this.updateDisplayName);\n    if (this.isLocalPlayerInfo) {\n      this.el.querySelector(\".model\").addEventListener(\"model-error\", this.handleModelError);\n    }\n    window.APP.store.addEventListener(\"statechanged\", this.update);\n\n    this.el.sceneEl.addEventListener(\"stateadded\", this.update);\n    this.el.sceneEl.addEventListener(\"stateremoved\", this.update);\n  },\n  pause() {\n    this.el.removeEventListener(\"model-loaded\", this.applyProperties);\n    this.el.sceneEl.removeEventListener(\"presence_updated\", this.updateDisplayName);\n    if (this.isLocalPlayerInfo) {\n      this.el.querySelector(\".model\").removeEventListener(\"model-error\", this.handleModelError);\n    }\n    this.el.sceneEl.removeEventListener(\"stateadded\", this.update);\n    this.el.sceneEl.removeEventListener(\"stateremoved\", this.update);\n    window.APP.store.removeEventListener(\"statechanged\", this.update);\n  },\n\n  update() {\n    this.applyProperties();\n  },\n  updateDisplayName(e) {\n    if (!this.playerSessionId && this.isLocalPlayerInfo) {\n      this.playerSessionId = NAF.clientId;\n    }\n    if (!this.playerSessionId) return;\n    if (this.playerSessionId !== e.detail.sessionId) return;\n\n    this.updateDisplayNameFromPresenceMeta(e.detail);\n  },\n  updateDisplayNameFromPresenceMeta(presenceMeta) {\n    this.displayName = presenceMeta.profile.displayName;\n    this.identityName = presenceMeta.profile.identityName;\n    this.isRecording = !!(presenceMeta.streaming || presenceMeta.recording);\n    this.isOwner = !!(presenceMeta.roles && presenceMeta.roles.owner);\n    this.applyDisplayName();\n  },\n  applyDisplayName() {\n    const store = window.APP.store;\n\n    const infoShouldBeHidden =\n      this.isLocalPlayerInfo || (store.state.preferences.onlyShowNametagsInFreeze && !this.el.sceneEl.is(\"frozen\"));\n\n    const nametagEl = this.el.querySelector(\".nametag\");\n    if (this.displayName && nametagEl) {\n      nametagEl.setAttribute(\"text\", { value: this.displayName });\n      nametagEl.object3D.visible = !infoShouldBeHidden;\n    }\n    const identityNameEl = this.el.querySelector(\".identityName\");\n    if (identityNameEl) {\n      if (this.identityName) {\n        identityNameEl.setAttribute(\"text\", { value: this.identityName });\n        identityNameEl.object3D.visible = this.el.sceneEl.is(\"frozen\");\n      }\n    }\n    const recordingBadgeEl = this.el.querySelector(\".recordingBadge\");\n    if (recordingBadgeEl) {\n      recordingBadgeEl.object3D.visible = this.isRecording && !infoShouldBeHidden;\n    }\n\n    const modBadgeEl = this.el.querySelector(\".modBadge\");\n    if (modBadgeEl) {\n      modBadgeEl.object3D.visible = !this.isRecording && this.isOwner && !infoShouldBeHidden;\n    }\n  },\n  applyProperties(e) {\n    this.applyDisplayName();\n\n    const modelEl = this.el.querySelector(\".model\");\n    if (this.data.avatarSrc && modelEl) {\n      modelEl.components[\"gltf-model-plus\"].jsonPreprocessor = ensureAvatarNodes;\n      modelEl.setAttribute(\"gltf-model-plus\", \"src\", this.data.avatarSrc);\n    }\n\n    if (!e || e.target === modelEl) {\n      const uniforms = injectCustomShaderChunks(this.el.object3D);\n      this.el.querySelectorAll(\"[hover-visuals]\").forEach(el => {\n        el.components[\"hover-visuals\"].uniforms = uniforms;\n      });\n    }\n  },\n  handleModelError() {\n    window.APP.store.resetToRandomDefaultAvatar();\n  }\n});\n","import { findAncestorWithComponent } from \"../utils/scene-graph\";\n\nconst POSES = {\n  open: \"allOpen\",\n  thumbDown: \"thumbDown\",\n  indexDown: \"indexDown\",\n  mrpDown: \"mrpDown\",\n  thumbUp: \"thumbsUp\",\n  point: \"point\",\n  fist: \"allGrip\",\n  pinch: \"pinch\"\n};\n\nconst NETWORK_POSES = [\"allOpen\", \"thumbDown\", \"indexDown\", \"mrpDown\", \"thumbsUp\", \"point\", \"allGrip\", \"pinch\"];\n\n/**\n * Animates between poses based on networked pose state using an animation mixer.\n * @namespace avatar\n * @component hand-pose\n */\nAFRAME.registerComponent(\"hand-pose\", {\n  multiple: true,\n\n  init() {\n    this.pose = 0;\n    this.animatePose = this.animatePose.bind(this);\n    const mixerEl = findAncestorWithComponent(this.el, \"animation-mixer\");\n    const suffix = this.id == \"left\" ? \"_L\" : \"_R\";\n    this.mixer = mixerEl && mixerEl.components[\"animation-mixer\"].mixer;\n    if (!this.mixer || !this.mixer.clipAction(POSES.open + suffix)) {\n      console.warn(\"Avatar does not an 'allOpen' animation, disabling hand animations\");\n      this.el.removeAttribute(\"hand-pose\");\n      return;\n    }\n    this.from = this.to = this.mixer.clipAction(POSES.open + suffix);\n    this.from.play();\n    this.networkField = `${this.id}_hand_pose`;\n\n    const getNetworkedAvatar = el => {\n      if (!el) {\n        window.setTimeout(() => {\n          getNetworkedAvatar(this.el);\n        }, 1000);\n        return;\n      }\n      const networkedAvatar = el.components && el.components[\"networked-avatar\"];\n      if (networkedAvatar) {\n        return networkedAvatar;\n      }\n      return getNetworkedAvatar(el.parentEl);\n    };\n    this.networkedAvatar = getNetworkedAvatar(this.el);\n  },\n\n  tick() {\n    if (\n      !this.networkedAvatar ||\n      !this.networkedAvatar.data ||\n      this.networkedAvatar.data[this.networkField] === this.pose\n    ) {\n      return;\n    }\n\n    this.animatePose(NETWORK_POSES[this.pose], NETWORK_POSES[this.networkedAvatar.data[this.networkField]]);\n    this.pose = this.networkedAvatar.data[this.networkField];\n  },\n\n  animatePose(prev, curr) {\n    this.from.stop();\n    this.to.stop();\n\n    const duration = 0.065;\n    const suffix = this.id == \"left\" ? \"_L\" : \"_R\";\n    this.from = this.mixer.clipAction(prev + suffix);\n    this.to = this.mixer.clipAction(curr + suffix);\n\n    this.from.fadeOut(duration);\n    this.to.fadeIn(duration);\n    this.to.play();\n    this.from.play();\n\n    this.mixer.update(0.001);\n  }\n});\n\n/**\n * Sets the networked hand pose state based on hand-pose events.\n * @namespace avatar\n * @component hand-pose-controller\n */\nAFRAME.registerComponent(\"hand-pose-controller\", {\n  multiple: true,\n  schema: {\n    eventSrc: { type: \"selector\" },\n    networkedAvatar: { type: \"selector\" }\n  },\n  init: function() {\n    this.setHandPose = this.setHandPose.bind(this);\n  },\n\n  play: function() {\n    this.data.eventSrc.addEventListener(\"hand-pose\", this.setHandPose);\n  },\n\n  pause: function() {\n    this.data.eventSrc.removeEventListener(\"hand-pose\", this.setHandPose);\n  },\n\n  setHandPose: function(evt) {\n    this.data.networkedAvatar.setAttribute(\n      \"networked-avatar\",\n      `${this.id}_hand_pose`,\n      NETWORK_POSES.indexOf(POSES[evt.detail.current])\n    );\n  }\n});\n","import { CAMERA_MODE_FIRST_PERSON } from \"../systems/camera-system\";\nconst TWOPI = Math.PI * 2;\nfunction deltaAngle(a, b) {\n  const p = Math.abs(b - a) % TWOPI;\n  return p > Math.PI ? TWOPI - p : p;\n}\n\n/**\n * Positions the HUD and toggles app mode based on where the user is looking\n * @namespace ui\n * @component hud-controller\n */\nAFRAME.registerComponent(\"hud-controller\", {\n  schema: {\n    head: { type: \"selector\" },\n    offset: { default: 0.7 }, // distance from hud above head,\n    lookCutoff: { default: 20 }, // angle at which the hud should be \"on\",\n    animRange: { default: 30 }, // degrees over which to animate the hud into view\n    yawCutoff: { default: 50 } // yaw degrees at wich the hud should reoirent even if the user is looking up\n  },\n  init() {\n    this.onChildHovered = this.onChildHovered.bind(this);\n    this.removeHoverEvents = this.removeHoverEvents.bind(this);\n    this.isYLocked = false;\n    this.lockedHeadPositionY = 0;\n    this.lookDir = new THREE.Vector3();\n    this.lookEuler = new THREE.Euler();\n    this.store = window.APP.store;\n    this.hoverableChildren = this.el.querySelectorAll(\"[is-remote-hover-target]\");\n  },\n\n  tick() {\n    const hud = this.el.object3D;\n    const head = this.data.head.object3D;\n\n    const { offset, lookCutoff, animRange, yawCutoff } = this.data;\n\n    const pitch = head.rotation.x * THREE.Math.RAD2DEG;\n    const yawDif = deltaAngle(head.rotation.y, hud.rotation.y) * THREE.Math.RAD2DEG;\n\n    // HUD is always visible until first hover, to increase discoverability.\n    const forceHudVisible = !this.store.state.activity.hasHoveredInWorldHud;\n\n    // animate the hud into place over animRange degrees as the user aproaches the lookCutoff angle\n    let t = 1 - THREE.Math.clamp(lookCutoff - pitch, 0, animRange) / animRange;\n\n    // HUD is locked down while showing tooltip or if forced.\n    if (forceHudVisible) {\n      t = 1;\n    }\n\n    // Once the HUD is in place it should stay in place until you look sufficiently far down\n    if (t === 1) {\n      this.lockedHeadPositionY = head.position.y;\n      this.hudLocked = true;\n    } else if (this.hudLocked && pitch < lookCutoff - animRange / 2) {\n      this.hudLocked = false;\n    }\n\n    if (this.hudLocked) {\n      t = 1;\n    }\n\n    // Reorient the hud only if the user is looking away from the hud, for right now this arbitrarily means the hud is 1/2 way animated away\n    // TODO: come up with better huristics for this that maybe account for the user turning away from the hud \"too far\", also animate the position so that it doesnt just snap.\n    const hudOutOfView = yawDif >= yawCutoff || pitch < lookCutoff - animRange / 2;\n\n    if (hudOutOfView) {\n      this.lookDir.set(0, 0, -1);\n      this.lookDir.applyQuaternion(head.quaternion);\n      this.lookDir.add(head.position);\n      hud.position.x = this.lookDir.x;\n      hud.position.z = this.lookDir.z;\n      hud.rotation.copy(head.rotation);\n      hud.rotation.x = 0;\n      hud.rotation.z = 0;\n    }\n\n    hud.visible =\n      (!hudOutOfView || forceHudVisible) &&\n      this.el.sceneEl.systems[\"hubs-systems\"].cameraSystem.mode === CAMERA_MODE_FIRST_PERSON;\n    hud.position.y = (this.isYLocked ? this.lockedHeadPositionY : head.position.y) + offset + (1 - t) * offset;\n    hud.rotation.x = (1 - t) * THREE.Math.DEG2RAD * 90;\n    hud.matrixNeedsUpdate = true;\n  },\n\n  play() {\n    for (let i = 0; i < this.hoverableChildren.length; i++) {\n      this.hoverableChildren[i].object3D.addEventListener(\"hovered\", this.onChildHovered);\n    }\n  },\n\n  pause() {\n    this.removeHoverEvents();\n  },\n\n  removeHoverEvents() {\n    for (let i = 0; i < this.hoverableChildren.length; i++) {\n      this.hoverableChildren[i].object3D.removeEventListener(\"hovered\", this.onChildHovered);\n    }\n  },\n\n  onChildHovered() {\n    if (!this.store.state.activity.hasHoveredInWorldHud) {\n      this.store.update({ activity: { hasHoveredInWorldHud: true } });\n      this.removeHoverEvents();\n    }\n  }\n});\n","import { paths } from \"../systems/userinput/paths\";\nimport { SOUND_FREEZE, SOUND_THAW } from \"../systems/sound-effects-system\";\nimport { CAMERA_MODE_INSPECT } from \"../systems/camera-system\";\n\n/**\n * Toggles freezing of network traffic on the given event.\n * @namespace network\n * @component freeze-controller\n */\nAFRAME.registerComponent(\"freeze-controller\", {\n  init: function() {\n    this.onToggle = this.onToggle.bind(this);\n  },\n\n  tick: function() {\n    const scene = this.el.sceneEl;\n    if (!scene.is(\"entered\")) return;\n    const inspecting = scene.systems[\"hubs-systems\"].cameraSystem.mode === CAMERA_MODE_INSPECT;\n    if (inspecting) {\n      if (this.el.is(\"frozen\")) {\n        this.onToggle();\n      }\n      if (!NAF.connection.adapter.frozen) {\n        NAF.connection.adapter.toggleFreeze();\n      }\n      this.wasInspecting = true;\n    } else if (this.wasInspecting) {\n      if (NAF.connection.adapter.frozen) {\n        NAF.connection.adapter.toggleFreeze();\n      }\n      this.wasInspecting = false;\n    } else {\n      const userinput = scene.systems.userinput;\n      const ensureFrozen = userinput.get(paths.actions.ensureFrozen);\n      const thaw = userinput.get(paths.actions.thaw);\n      const toggleFreeze = userinput.get(paths.actions.toggleFreeze);\n\n      const toggleFreezeDueToInput =\n        (this.el.is(\"frozen\") && thaw) || (!this.el.is(\"frozen\") && ensureFrozen) || toggleFreeze;\n\n      if (toggleFreezeDueToInput) {\n        this.onToggle();\n      }\n    }\n  },\n\n  onToggle: function() {\n    window.APP.store.update({ activity: { hasFoundFreeze: true } });\n    if (!NAF.connection.adapter) return;\n    NAF.connection.adapter.toggleFreeze();\n    if (NAF.connection.adapter.frozen) {\n      this.el.sceneEl.systems[\"hubs-systems\"].soundEffectsSystem.playSoundOneShot(SOUND_FREEZE);\n      this.el.addState(\"frozen\");\n    } else {\n      this.el.sceneEl.systems[\"hubs-systems\"].soundEffectsSystem.playSoundOneShot(SOUND_THAW);\n      this.el.removeState(\"frozen\");\n    }\n  }\n});\n","import { getLastWorldPosition } from \"../utils/three-utils\";\nimport { waitForDOMContentLoaded } from \"../utils/async-utils\";\n\nconst isMobile = AFRAME.utils.device.isMobile();\n\n/**\n * Toggles the visibility of this entity when the scene is frozen.\n * @namespace ui\n * @component visibility-while-frozen\n */\nAFRAME.registerComponent(\"visibility-while-frozen\", {\n  schema: {\n    withinDistance: { type: \"number\" },\n    visible: { type: \"boolean\", default: true },\n    requireHoverOnNonMobile: { type: \"boolean\", default: true },\n    withPermission: { type: \"string\" },\n    withoutPermission: { type: \"string\" },\n    visibleIfOwned: { type: \"boolean\", default: true }\n  },\n\n  init() {\n    this.updateVisibility = this.updateVisibility.bind(this);\n    this.camWorldPos = new THREE.Vector3();\n    this.objWorldPos = new THREE.Vector3();\n\n    waitForDOMContentLoaded().then(() => {\n      this.cam = document.getElementById(\"avatar-pov-node\").object3D;\n      this.updateVisibility();\n    });\n\n    let hoverableSearch = this.el;\n\n    while (hoverableSearch !== document) {\n      if (hoverableSearch.getAttribute(\"is-remote-hover-target\") !== null) {\n        this.hoverable = hoverableSearch;\n        break;\n      }\n\n      hoverableSearch = hoverableSearch.parentNode;\n    }\n    if (!this.hoverable && this.data.requireHoverOnNonMobile) {\n      console.error(\"Didn't find a remote hover target.\");\n    }\n\n    if (!this.data.visibleIfOwned) {\n      NAF.utils\n        .getNetworkedEntity(this.el)\n        .then(networkedEl => {\n          this.networkedEl = networkedEl;\n        })\n        .then(() => {}); //ignore exception, entity might not be networked\n    }\n\n    this.onStateChange = evt => {\n      if (!evt.detail === \"frozen\") return;\n      this.updateVisibility();\n    };\n    this.updateVisibility();\n  },\n\n  tick() {\n    const isFrozen = this.el.sceneEl.is(\"frozen\");\n    const isVisible = this.el.object3D.visible;\n    const shouldNotBeVisible = isFrozen === !this.data.visible;\n    if (!isVisible && shouldNotBeVisible) return;\n\n    this.updateVisibility();\n  },\n\n  updateVisibility() {\n    if (!this.cam) return;\n    const isFrozen = this.el.sceneEl.is(\"frozen\");\n\n    let isWithinDistance = true;\n    const isVisible = this.el.object3D.visible;\n\n    if (this.data.withinDistance) {\n      if (!isVisible) {\n        // Edge case, if the object is not visible force a matrix update\n        // since the main matrix update loop will not do it.\n        this.el.object3D.updateMatrices(true, true);\n      }\n\n      getLastWorldPosition(this.cam, this.camWorldPos);\n      this.objWorldPos.copy(this.el.object3D.position);\n      this.el.object3D.localToWorld(this.objWorldPos);\n\n      isWithinDistance =\n        this.camWorldPos.distanceToSquared(this.objWorldPos) < this.data.withinDistance * this.data.withinDistance;\n    }\n\n    const isTransforming = this.el.sceneEl.systems[\"transform-selected-object\"].transforming;\n\n    if (this.data.withPermission && this.data.withoutPermission) {\n      throw new Error(\n        \"only withPermission or withoutPermission can be speciifed on visibility-while-frozen, not both.\"\n      );\n    }\n\n    const allowed = !!(\n      (!this.data.withPermission && !this.data.withoutPermission) ||\n      (this.data.withPermission && window.APP.hubChannel.canOrWillIfCreator(this.data.withPermission)) ||\n      (this.data.withoutPermission && !window.APP.hubChannel.canOrWillIfCreator(this.data.withoutPermission))\n    );\n\n    let shouldBeVisible =\n      allowed &&\n      ((isFrozen && this.data.visible) || (!isFrozen && !this.data.visible)) &&\n      isWithinDistance &&\n      !isTransforming;\n\n    if (this.data.requireHoverOnNonMobile && !isMobile) {\n      shouldBeVisible =\n        shouldBeVisible &&\n        ((this.hoverable &&\n          (this.el.sceneEl.systems.interaction.state.rightRemote.hovered === this.hoverable ||\n            this.el.sceneEl.systems.interaction.state.leftRemote.hovered === this.hoverable)) ||\n          isVisible);\n    }\n\n    if (!this.data.visibleIfOwned) {\n      shouldBeVisible = shouldBeVisible && this.networkedEl && !NAF.utils.isMine(this.networkedEl);\n    }\n\n    if (isVisible !== shouldBeVisible) {\n      this.el.setAttribute(\"visible\", shouldBeVisible);\n    }\n  },\n\n  play() {\n    this.el.sceneEl.addEventListener(\"stateadded\", this.onStateChange);\n    this.el.sceneEl.addEventListener(\"stateremoved\", this.onStateChange);\n\n    if (this.hoverable) {\n      this.hoverable.object3D.addEventListener(\"hovered\", this.updateVisibility);\n      this.hoverable.object3D.addEventListener(\"unhovered\", this.updateVisibility);\n    }\n  },\n\n  pause() {\n    this.el.sceneEl.removeEventListener(\"stateadded\", this.onStateChange);\n    this.el.sceneEl.removeEventListener(\"stateremoved\", this.onStateChange);\n\n    if (this.hoverable) {\n      this.hoverable.object3D.addEventListener(\"hovered\", this.updateVisibility);\n      this.hoverable.object3D.addEventListener(\"unhovered\", this.updateVisibility);\n    }\n  }\n});\n\n/**\n * Toggles the interactivity of a UI entity while the scene is frozen.\n * @namespace ui\n * @component ui-class-while-frozen\n */\nAFRAME.registerComponent(\"ui-class-while-frozen\", {\n  init() {\n    this.onStateChange = evt => {\n      if (!evt.detail === \"frozen\") return;\n      this.el.classList.toggle(\"ui\", this.el.sceneEl.is(\"frozen\"));\n    };\n    this.el.classList.toggle(\"ui\", this.el.sceneEl.is(\"frozen\"));\n  },\n\n  play() {\n    this.el.sceneEl.addEventListener(\"stateadded\", this.onStateChange);\n    this.el.sceneEl.addEventListener(\"stateremoved\", this.onStateChange);\n  },\n\n  pause() {\n    this.el.sceneEl.removeEventListener(\"stateadded\", this.onStateChange);\n    this.el.sceneEl.removeEventListener(\"stateremoved\", this.onStateChange);\n  }\n});\n","import \"./stats-plus.css\";\nimport qsTruthy from \"../utils/qs_truthy\";\n\n// Adapted from https://github.com/aframevr/aframe/blob/master/src/components/scene/stats.js\n\nfunction createStats(scene) {\n  const threeStats = new window.threeStats(scene.renderer);\n  const aframeStats = new window.aframeStats(scene);\n  const plugins = scene.isMobile ? [] : [threeStats, aframeStats];\n  return new window.rStats({\n    css: [], // Our stylesheet is injected from AFrame.\n    values: {\n      fps: { caption: \"fps\", below: 30 },\n      batchdraws: { caption: \"Draws\" },\n      batchinstances: { caption: \"Instances\" },\n      batchatlassize: { caption: \"Atlas Size\" }\n    },\n    groups: [\n      { caption: \"Framerate\", values: [\"fps\", \"raf\", \"physics\"] },\n      { caption: \"Batching\", values: [\"batchdraws\", \"batchinstances\", \"batchatlassize\"] }\n    ],\n    plugins: plugins\n  });\n}\n\nconst HIDDEN_CLASS = \"a-hidden\";\n\nAFRAME.registerComponent(\"stats-plus\", {\n  // Whether or not the stats panel is expanded.\n  // Shows FPS counter when collapsed.\n  schema: { default: false },\n  init() {\n    this.onExpand = this.onExpand.bind(this);\n    this.onCollapse = this.onCollapse.bind(this);\n    this.onEnterVr = this.onEnterVr.bind(this);\n    this.onExitVr = this.onExitVr.bind(this);\n\n    const scene = this.el.sceneEl;\n    this.stats = createStats(scene);\n    this.statsEl = document.querySelector(\".rs-base\");\n    // HACK for now in rare case where dom isn't ready, just bail\n    if (!this.statsEl) return;\n\n    // Add header to stats panel so we can collapse it\n    const statsHeaderEl = document.createElement(\"div\");\n    statsHeaderEl.classList.add(\"rs-header\");\n\n    const statsTitleEl = document.createElement(\"h1\");\n    statsTitleEl.innerHTML = \"Stats\";\n    statsHeaderEl.appendChild(statsTitleEl);\n\n    const collapseEl = document.createElement(\"div\");\n    collapseEl.classList.add(\"rs-collapse-btn\");\n    collapseEl.innerHTML = \"X\";\n    collapseEl.addEventListener(\"click\", this.onCollapse);\n    statsHeaderEl.appendChild(collapseEl);\n\n    this.statsEl.insertBefore(statsHeaderEl, this.statsEl.firstChild);\n\n    // Add fps counter to the page\n    this.fpsEl = document.createElement(\"div\");\n    this.fpsEl.addEventListener(\"click\", this.onExpand);\n    this.fpsEl.classList.add(\"rs-fps-counter\");\n    document.body.appendChild(this.fpsEl);\n    this.lastFpsUpdate = performance.now();\n    this.lastFps = 0;\n    this.frameCount = 0;\n    this.inVR = scene.is(\"vr-mode\");\n\n    if (scene.isMobile) {\n      this.statsEl.classList.add(\"rs-mobile\");\n      this.fpsEl.classList.add(\"rs-mobile\");\n    }\n\n    scene.addEventListener(\"enter-vr\", this.onEnterVr);\n    scene.addEventListener(\"exit-vr\", this.onExitVr);\n\n    this.vrStatsEnabled = qsTruthy(\"vrstats\");\n    if (this.vrStatsEnabled) {\n      this.initVRStats();\n    }\n    this.lastUpdate = 0;\n  },\n  initVRStats() {\n    this.vrPanel = document.createElement(\"a-entity\");\n    this.vrPanel.setAttribute(\"text\", { width: 0.5, whiteSpace: \"pre\", value: \"_\", baseline: \"bottom\" });\n    this.vrPanel.addEventListener(\n      \"loaded\",\n      () =>\n        this.vrPanel.object3D.traverse(x => {\n          if (x.material) x.material.depthTest = false;\n        }),\n      { once: true }\n    );\n    this.el.append(this.vrPanel);\n    const background = document.createElement(\"a-plane\");\n    background.setAttribute(\"color\", \"#333333\");\n    background.setAttribute(\"material\", \"shader\", \"flat\");\n    background.setAttribute(\"material\", \"depthTest\", false);\n    background.setAttribute(\"width\", 0.1);\n    background.setAttribute(\"height\", 0.12);\n    background.setAttribute(\"position\", \"-0.2 0.055 0\");\n    this.el.append(background);\n  },\n  toggleVRStats() {\n    if (this.vrStatsEnabled) {\n      this.el.object3D.visible = false;\n      this.vrStatsEnabled = false;\n    } else {\n      if (!this.vrPanel) {\n        this.initVRStats();\n      }\n      this.el.object3D.visible = true;\n      this.vrStatsEnabled = true;\n    }\n  },\n  update(oldData) {\n    if (oldData !== this.data) {\n      if (this.data) {\n        this.statsEl.classList.remove(HIDDEN_CLASS);\n        this.fpsEl.classList.add(HIDDEN_CLASS);\n      } else {\n        this.statsEl.classList.add(HIDDEN_CLASS);\n        this.fpsEl.classList.remove(HIDDEN_CLASS);\n      }\n    }\n  },\n  tick(time) {\n    const stats = this.stats;\n    if (!this.statsEl) return;\n    if (this.data || this.vrStatsEnabled) {\n      // Update rStats\n      stats(\"rAF\").tick();\n      stats(\"FPS\").frame();\n      stats(\"physics\").set(this.el.sceneEl.systems[\"hubs-systems\"].physicsSystem.stepDuration);\n\n      const batchManagerSystem = this.el.sceneEl.systems[\"hubs-systems\"].batchManagerSystem;\n      if (batchManagerSystem.batchingEnabled) {\n        const batchManager = batchManagerSystem.batchManager;\n        stats(\"batchdraws\").set(batchManager.batches.length);\n        stats(\"batchinstances\").set(batchManager.instanceCount);\n        stats(\"batchatlassize\").set(batchManager.atlas.arrayDepth);\n      }\n\n      stats().update();\n    } else if (!this.inVR) {\n      // Update the fps counter\n      const now = performance.now();\n      this.frameCount++;\n\n      // Update the fps counter text once a second\n      if (now >= this.lastFpsUpdate + 1000) {\n        const fps = Math.round(this.frameCount / ((now - this.lastFpsUpdate) / 1000));\n        if (fps !== this.lastFps) {\n          this.fpsEl.innerHTML = Math.round(fps) + \" FPS\";\n          this.lastFps = fps;\n        }\n        this.lastFpsUpdate = now;\n        this.frameCount = 0;\n      }\n    }\n    if (this.vrStatsEnabled && time - this.lastUpdate > 100) {\n      this.vrPanel.setAttribute(\n        \"text\",\n        \"value\",\n        [\n          `f ${stats(\"fps\")\n            .value()\n            .toFixed(0)}`,\n          `r ${stats(\"raf\")\n            .value()\n            .toFixed(0)}`,\n          `p ${stats(\"physics\")\n            .value()\n            .toFixed(0)}`,\n          `c ${this.el.sceneEl.renderer.info.render.calls}`,\n          `t ${(this.el.sceneEl.renderer.info.render.triangles / 1000).toFixed(0)}k`\n        ].join(\"\\n\")\n      );\n      this.lastUpdate = time;\n    }\n  },\n  onEnterVr() {\n    this.inVR = true;\n    // Hide all stats elements when entering VR on mobile\n    if (this.el.sceneEl.isMobile) {\n      this.statsEl.classList.add(HIDDEN_CLASS);\n      this.fpsEl.classList.add(HIDDEN_CLASS);\n    }\n  },\n  onExitVr() {\n    this.inVR = false;\n    // Revert to previous state whe exiting VR on mobile\n    if (this.el.sceneEl.isMobile) {\n      if (this.data) {\n        this.statsEl.classList.remove(HIDDEN_CLASS);\n      } else {\n        this.fpsEl.classList.remove(HIDDEN_CLASS);\n      }\n    }\n  },\n  onExpand() {\n    this.el.setAttribute(this.name, true);\n  },\n  onCollapse() {\n    this.el.setAttribute(this.name, false);\n  },\n  remove() {\n    this.el.sceneEl.removeEventListener(\"enter-vr\", this.hide);\n    this.el.sceneEl.removeEventListener(\"exit-vr\", this.show);\n\n    if (this.statsEl) {\n      this.statsEl.parentNode.removeChild(this.statsEl);\n      this.fpsEl.parentNode.removeChild(this.fpsEl);\n    }\n  }\n});\n","/* global performance THREE AFRAME NAF MediaStream setTimeout */\nimport configs from \"../utils/configs\";\nimport GIFWorker from \"../workers/gifparsing.worker.js\";\nimport errorImageSrc from \"!!url-loader!../assets/images/media-error.gif\";\nimport audioIcon from \"../assets/images/audio.png\";\nimport { paths } from \"../systems/userinput/paths\";\nimport HLS from \"hls.js/dist/hls.light.js\";\nimport { addAndArrangeMedia, createImageTexture } from \"../utils/media-utils\";\nimport { proxiedUrlFor } from \"../utils/media-url-utils\";\nimport { buildAbsoluteURL } from \"url-toolkit\";\nimport { SOUND_CAMERA_TOOL_TOOK_SNAPSHOT } from \"../systems/sound-effects-system\";\nimport { promisifyWorker } from \"../utils/promisify-worker.js\";\nimport pdfjs from \"pdfjs-dist\";\nimport { applyPersistentSync } from \"../utils/permissions-utils\";\n\n// Using external CDN to reduce build size\nif (!pdfjs.GlobalWorkerOptions.workerSrc) {\n  pdfjs.GlobalWorkerOptions.workerSrc =\n    \"https://assets-prod.reticulum.io/assets/js/pdfjs-dist@2.1.266/build/pdf.worker.js\";\n}\n\nconst ONCE_TRUE = { once: true };\nconst TYPE_IMG_PNG = { type: \"image/png\" };\nconst parseGIF = promisifyWorker(new GIFWorker());\n\nconst isIOS = AFRAME.utils.device.isIOS();\nconst isMobileVR = AFRAME.utils.device.isMobileVR();\nconst isFirefoxReality = isMobileVR && navigator.userAgent.match(/Firefox/);\nconst HLS_TIMEOUT = 10000; // HLS can sometimes fail, we re-try after this duration\nconst audioIconTexture = new THREE.TextureLoader().load(audioIcon);\n\nexport const VOLUME_LABELS = [];\nfor (let i = 0; i <= 20; i++) {\n  let s = \"[\";\n  for (let j = 1; j <= 20; j++) {\n    s += i >= j ? \"|\" : \" \";\n  }\n  s += \"]\";\n  VOLUME_LABELS[i] = s;\n}\n\nclass GIFTexture extends THREE.Texture {\n  constructor(frames, delays, disposals) {\n    super(document.createElement(\"canvas\"));\n    this.image.width = frames[0].width;\n    this.image.height = frames[0].height;\n\n    this._ctx = this.image.getContext(\"2d\");\n\n    this.generateMipmaps = false;\n    this.isVideoTexture = true;\n    this.minFilter = THREE.NearestFilter;\n\n    this.frames = frames;\n    this.delays = delays;\n    this.disposals = disposals;\n\n    this.frame = 0;\n    this.frameStartTime = Date.now();\n  }\n\n  update() {\n    if (!this.frames || !this.delays || !this.disposals) return;\n    const now = Date.now();\n    if (now - this.frameStartTime > this.delays[this.frame]) {\n      if (this.disposals[this.frame] === 2) {\n        this._ctx.clearRect(0, 0, this.image.width, this.image.width);\n      }\n      this.frame = (this.frame + 1) % this.frames.length;\n      this.frameStartTime = now;\n      this._ctx.drawImage(this.frames[this.frame], 0, 0, this.image.width, this.image.height);\n      this.needsUpdate = true;\n    }\n  }\n}\n\nasync function createGIFTexture(url) {\n  return new Promise((resolve, reject) => {\n    fetch(url, { mode: \"cors\" })\n      .then(r => r.arrayBuffer())\n      .then(rawImageData => parseGIF(rawImageData, [rawImageData]))\n      .then(result => {\n        const { frames, delayTimes, disposals } = result;\n        let loadCnt = 0;\n        for (let i = 0; i < frames.length; i++) {\n          const img = new Image();\n          img.onload = e => {\n            loadCnt++;\n            frames[i] = e.target;\n            if (loadCnt === frames.length) {\n              const texture = new GIFTexture(frames, delayTimes, disposals);\n              texture.image.src = url;\n              texture.encoding = THREE.sRGBEncoding;\n              texture.minFilter = THREE.LinearFilter;\n              resolve(texture);\n            }\n          };\n          img.src = frames[i];\n        }\n      })\n      .catch(reject);\n  });\n}\n\n/**\n * Create video element to be used as a texture.\n *\n * @param {string} src - Url to a video file.\n * @returns {Element} Video element.\n */\nfunction createVideoOrAudioEl(type) {\n  const el = document.createElement(type);\n  el.setAttribute(\"playsinline\", \"\");\n  el.setAttribute(\"webkit-playsinline\", \"\");\n  // iOS Safari requires the autoplay attribute, or it won't play the video at all.\n  el.autoplay = true;\n  // iOS Safari will not play videos without user interaction. We mute the video so that it can autoplay and then\n  // allow the user to unmute it with an interaction in the unmute-video-button component.\n  el.muted = isIOS;\n  el.preload = \"auto\";\n  el.crossOrigin = \"anonymous\";\n\n  return el;\n}\n\nfunction scaleToAspectRatio(el, ratio) {\n  const width = Math.min(1.0, 1.0 / ratio);\n  const height = Math.min(1.0, ratio);\n  el.object3DMap.mesh.scale.set(width, height, 1);\n  el.object3DMap.mesh.matrixNeedsUpdate = true;\n}\n\nfunction disposeTexture(texture) {\n  if (texture.image instanceof HTMLVideoElement) {\n    const video = texture.image;\n    video.pause();\n    video.src = \"\";\n    video.load();\n  }\n\n  if (texture.hls) {\n    texture.hls.destroy();\n  }\n\n  texture.dispose();\n}\n\nclass TextureCache {\n  cache = new Map();\n\n  key(src, version) {\n    return `${src}_${version}`;\n  }\n\n  set(src, version, texture) {\n    const image = texture.image;\n    this.cache.set(this.key(src, version), {\n      texture,\n      ratio: (image.videoHeight || image.height) / (image.videoWidth || image.width),\n      count: 0\n    });\n    return this.retain(src, version);\n  }\n\n  has(src, version) {\n    return this.cache.has(this.key(src, version));\n  }\n\n  get(src, version) {\n    return this.cache.get(this.key(src, version));\n  }\n\n  retain(src, version) {\n    const cacheItem = this.cache.get(this.key(src, version));\n    cacheItem.count++;\n    // console.log(\"retain\", src, cacheItem.count);\n    return cacheItem;\n  }\n\n  release(src, version) {\n    const cacheItem = this.cache.get(this.key(src, version));\n\n    if (!cacheItem) {\n      console.error(`Releasing uncached texture src ${src}`);\n      return;\n    }\n\n    cacheItem.count--;\n    // console.log(\"release\", src, cacheItem.count);\n    if (cacheItem.count <= 0) {\n      // Unload the video element to prevent it from continuing to play in the background\n      disposeTexture(cacheItem.texture);\n      this.cache.delete(this.key(src, version));\n    }\n  }\n}\n\nconst textureCache = new TextureCache();\nconst inflightTextures = new Map();\n\nconst errorImage = new Image();\nerrorImage.src = errorImageSrc;\nconst errorTexture = new THREE.Texture(errorImage);\nerrorTexture.magFilter = THREE.NearestFilter;\nerrorImage.onload = () => {\n  errorTexture.needsUpdate = true;\n};\nconst errorCacheItem = { texture: errorTexture, ratio: 1 };\n\nfunction timeFmt(t) {\n  let s = Math.floor(t),\n    h = Math.floor(s / 3600);\n  s -= h * 3600;\n  let m = Math.floor(s / 60);\n  s -= m * 60;\n  if (h < 10) h = `0${h}`;\n  if (m < 10) m = `0${m}`;\n  if (s < 10) s = `0${s}`;\n  return h === \"00\" ? `${m}:${s}` : `${h}:${m}:${s}`;\n}\n\nAFRAME.registerComponent(\"media-video\", {\n  schema: {\n    src: { type: \"string\" },\n    audioSrc: { type: \"string\" },\n    contentType: { type: \"string\" },\n    volume: { type: \"number\", default: 0.5 },\n    loop: { type: \"boolean\", default: true },\n    audioType: { type: \"string\", default: \"pannernode\" },\n    hidePlaybackControls: { type: \"boolean\", default: false },\n    distanceModel: { type: \"string\", default: \"inverse\" },\n    rolloffFactor: { type: \"number\", default: 1 },\n    refDistance: { type: \"number\", default: 1 },\n    maxDistance: { type: \"number\", default: 10000 },\n    coneInnerAngle: { type: \"number\", default: 360 },\n    coneOuterAngle: { type: \"number\", default: 0 },\n    coneOuterGain: { type: \"number\", default: 0 },\n    videoPaused: { type: \"boolean\" },\n    projection: { type: \"string\", default: \"flat\" },\n    time: { type: \"number\" },\n    tickRate: { default: 1000 }, // ms interval to send time interval updates\n    syncTolerance: { default: 2 }\n  },\n\n  init() {\n    this.onPauseStateChange = this.onPauseStateChange.bind(this);\n    this.updateHoverMenu = this.updateHoverMenu.bind(this);\n    this.tryUpdateVideoPlaybackState = this.tryUpdateVideoPlaybackState.bind(this);\n    this.ensureOwned = this.ensureOwned.bind(this);\n    this.isMineOrLocal = this.isMineOrLocal.bind(this);\n    this.updateSrc = this.updateSrc.bind(this);\n\n    this.seekForward = this.seekForward.bind(this);\n    this.seekBack = this.seekBack.bind(this);\n    this.volumeUp = this.volumeUp.bind(this);\n    this.volumeDown = this.volumeDown.bind(this);\n    this.snap = this.snap.bind(this);\n    this.changeVolumeBy = this.changeVolumeBy.bind(this);\n    this.togglePlaying = this.togglePlaying.bind(this);\n\n    this.lastUpdate = 0;\n    this.videoMutedAt = 0;\n    this.localSnapCount = 0;\n    this.isSnapping = false;\n    this.videoIsLive = null; // value null until we've determined if the video is live or not.\n    this.onSnapImageLoaded = () => (this.isSnapping = false);\n\n    this.el.setAttribute(\"hover-menu__video\", { template: \"#video-hover-menu\", dirs: [\"forward\", \"back\"] });\n    this.el.components[\"hover-menu__video\"].getHoverMenu().then(menu => {\n      // If we got removed while waiting, do nothing.\n      if (!this.el.parentNode) return;\n\n      this.hoverMenu = menu;\n\n      this.playbackControls = this.el.querySelector(\".video-playback\");\n      this.playPauseButton = this.el.querySelector(\".video-playpause-button\");\n      this.volumeUpButton = this.el.querySelector(\".video-volume-up-button\");\n      this.volumeDownButton = this.el.querySelector(\".video-volume-down-button\");\n      this.seekForwardButton = this.el.querySelector(\".video-seek-forward-button\");\n      this.seekBackButton = this.el.querySelector(\".video-seek-back-button\");\n      this.snapButton = this.el.querySelector(\".video-snap-button\");\n      this.timeLabel = this.el.querySelector(\".video-time-label\");\n      this.volumeLabel = this.el.querySelector(\".video-volume-label\");\n\n      this.playPauseButton.object3D.addEventListener(\"interact\", this.togglePlaying);\n      this.seekForwardButton.object3D.addEventListener(\"interact\", this.seekForward);\n      this.seekBackButton.object3D.addEventListener(\"interact\", this.seekBack);\n      this.volumeUpButton.object3D.addEventListener(\"interact\", this.volumeUp);\n      this.volumeDownButton.object3D.addEventListener(\"interact\", this.volumeDown);\n      this.snapButton.object3D.addEventListener(\"interact\", this.snap);\n\n      this.updateVolumeLabel();\n      this.updateHoverMenu();\n      this.updatePlaybackState();\n    });\n\n    NAF.utils\n      .getNetworkedEntity(this.el)\n      .then(networkedEl => {\n        this.networkedEl = networkedEl;\n        applyPersistentSync(this.networkedEl.components.networked.data.networkId);\n        this.updatePlaybackState();\n\n        this.networkedEl.addEventListener(\"pinned\", this.updateHoverMenu);\n        this.networkedEl.addEventListener(\"unpinned\", this.updateHoverMenu);\n        window.APP.hubChannel.addEventListener(\"permissions_updated\", this.updateHoverMenu);\n\n        // For scene-owned videos, take ownership after a random delay if nobody\n        // else has so there is a timekeeper. Do not due this on iOS because iOS has an\n        // annoying \"auto-pause\" feature that forces one non-autoplaying video to play\n        // at once, which will pause the videos for everyone in the room if owned.\n        if (!isIOS && NAF.utils.getNetworkOwner(this.networkedEl) === \"scene\") {\n          setTimeout(() => {\n            if (NAF.utils.getNetworkOwner(this.networkedEl) === \"scene\") {\n              NAF.utils.takeOwnership(this.networkedEl);\n            }\n          }, 2000 + Math.floor(Math.random() * 2000));\n        }\n      })\n      .catch(() => {\n        // Non-networked\n        this.updatePlaybackState();\n      });\n\n    // from a-sound\n    const sceneEl = this.el.sceneEl;\n    sceneEl.audioListener = sceneEl.audioListener || new THREE.AudioListener();\n    if (sceneEl.camera) {\n      sceneEl.camera.add(sceneEl.audioListener);\n    }\n    sceneEl.addEventListener(\"camera-set-active\", function(evt) {\n      evt.detail.cameraEl.getObject3D(\"camera\").add(sceneEl.audioListener);\n    });\n  },\n\n  isMineOrLocal() {\n    return !this.el.components.networked || (this.networkedEl && NAF.utils.isMine(this.networkedEl));\n  },\n\n  ensureOwned() {\n    return (\n      !this.el.components.networked ||\n      ((this.networkedEl && NAF.utils.isMine(this.networkedEl)) || NAF.utils.takeOwnership(this.networkedEl))\n    );\n  },\n\n  seekForward() {\n    if (!this.videoIsLive && this.ensureOwned()) {\n      this.video.currentTime += 30;\n      this.el.setAttribute(\"media-video\", \"time\", this.video.currentTime);\n    }\n  },\n\n  seekBack() {\n    if (!this.videoIsLive && this.ensureOwned()) {\n      this.video.currentTime -= 10;\n      this.el.setAttribute(\"media-video\", \"time\", this.video.currentTime);\n    }\n  },\n\n  changeVolumeBy(v) {\n    this.el.setAttribute(\"media-video\", \"volume\", THREE.Math.clamp(this.data.volume + v, 0, 1));\n    this.updateVolumeLabel();\n  },\n\n  volumeUp() {\n    this.changeVolumeBy(0.1);\n  },\n\n  volumeDown() {\n    this.changeVolumeBy(-0.1);\n  },\n\n  async snap() {\n    if (this.isSnapping) return;\n    this.isSnapping = true;\n    this.el.sceneEl.systems[\"hubs-systems\"].soundEffectsSystem.playSoundOneShot(SOUND_CAMERA_TOOL_TOOK_SNAPSHOT);\n\n    const canvas = document.createElement(\"canvas\");\n    canvas.width = this.video.videoWidth;\n    canvas.height = this.video.videoHeight;\n    canvas.getContext(\"2d\").drawImage(this.video, 0, 0, canvas.width, canvas.height);\n    const blob = await new Promise(resolve => canvas.toBlob(resolve));\n    const file = new File([blob], \"snap.png\", TYPE_IMG_PNG);\n\n    this.localSnapCount++;\n    const { entity } = addAndArrangeMedia(this.el, file, \"photo-snapshot\", this.localSnapCount);\n    entity.addEventListener(\"image-loaded\", this.onSnapImageLoaded, ONCE_TRUE);\n  },\n\n  togglePlaying() {\n    // See onPauseStateChanged for note about iOS\n    if (isIOS && this.video.paused && this.isMineOrLocal()) {\n      this.video.play();\n      return;\n    }\n\n    if (this.ensureOwned()) {\n      this.tryUpdateVideoPlaybackState(!this.data.videoPaused);\n    }\n  },\n\n  onPauseStateChange() {\n    // iOS Safari will auto-pause other videos if one is manually started (not autoplayed.) So, to keep things\n    // easy to reason about, we *never* broadcast pauses from iOS.\n    //\n    // if an iOS safari user pauses and plays a video they'll pause all the other videos,\n    // which isn't great, but this check will at least ensure they don't pause those videos\n    // for all other users in the room! Of course, if they go and hit play on those videos auto-paused,\n    // they will become the timekeeper, and will seek everyone to where the video was auto-paused.\n    //\n    // This specific case will diverge the network schema and the video player state, so that\n    // this.data.videoPaused is false (so others will keep playing it) but our local player will\n    // have stopped. So we deal with this special case as well when we press the play button.\n    if (isIOS && this.video.paused && this.isMineOrLocal()) {\n      return;\n    }\n\n    // Used in the HACK in hub.js for dealing with auto-pause in Oculus Browser\n    if (this._ignorePauseStateChanges) return;\n\n    this.el.setAttribute(\"media-video\", \"videoPaused\", this.video.paused);\n\n    if (this.networkedEl && NAF.utils.isMine(this.networkedEl)) {\n      this.el.emit(\"owned-video-state-changed\");\n    }\n  },\n\n  updatePlaybackState(force) {\n    this.updateHoverMenu();\n\n    // Only update playback position for videos you don't own\n    if (this.video && (force || (this.networkedEl && !NAF.utils.isMine(this.networkedEl)))) {\n      if (Math.abs(this.data.time - this.video.currentTime) > this.data.syncTolerance) {\n        this.tryUpdateVideoPlaybackState(this.data.videoPaused, this.data.time);\n      } else {\n        this.tryUpdateVideoPlaybackState(this.data.videoPaused);\n      }\n    }\n\n    // Volume is local, always update it\n    if (this.audio) {\n      const globalMediaVolume =\n        window.APP.store.state.preferences.globalMediaVolume !== undefined\n          ? window.APP.store.state.preferences.globalMediaVolume\n          : 100;\n      this.audio.gain.gain.value = (globalMediaVolume / 100) * this.data.volume;\n    }\n  },\n\n  tryUpdateVideoPlaybackState(pause, currentTime) {\n    if (this._playbackStateChangeTimeout) {\n      clearTimeout(this._playbackStateChangeTimeout);\n      delete this._playbackStateChangeTimeout;\n    }\n\n    // Update current time if we've determined this video is not a live stream, since otherwise we may\n    // update the video to currentTime = 0\n    if (this.videoIsLive === false && currentTime !== undefined) {\n      this.video.currentTime = currentTime;\n    }\n\n    if (this.hoverMenu) {\n      this.playPauseButton.setAttribute(\"icon-button\", \"active\", pause);\n    }\n\n    if (pause) {\n      this.video.pause();\n    } else {\n      // Need to deal with the fact play() may fail if user has not interacted with browser yet.\n      this.video.play().catch(() => {\n        if (pause !== this.data.videoPaused) return;\n        this._playbackStateChangeTimeout = setTimeout(() => this.tryUpdateVideoPlaybackState(pause, currentTime), 1000);\n      });\n    }\n  },\n\n  async update(oldData) {\n    const src = this.data.src;\n    this.updatePlaybackState();\n\n    if (!src || src === oldData.src) return;\n    return this.updateSrc(oldData);\n  },\n\n  async updateSrc(oldData) {\n    const { src, linkedVideoTexture, linkedAudioSource, linkedMediaElementAudioSource } = this.data;\n\n    this.cleanUp();\n    if (this.mesh && this.mesh.material) {\n      this.mesh.material.map = null;\n      this.mesh.material.needsUpdate = true;\n    }\n\n    let texture, audioSourceEl;\n    try {\n      if (linkedVideoTexture) {\n        texture = linkedVideoTexture;\n        audioSourceEl = linkedAudioSource;\n      } else {\n        ({ texture, audioSourceEl } = await this.createVideoTextureAudioSourceEl());\n      }\n\n      // No way to cancel promises, so if src has changed while we were creating the texture just throw it away.\n      if (this.data.src !== src) {\n        disposeTexture(texture);\n        return;\n      }\n\n      this.mediaElementAudioSource = null;\n\n      if (!src.startsWith(\"hubs://\")) {\n        // iOS video audio is broken, see: https://github.com/mozilla/hubs/issues/1797\n        if (!isIOS) {\n          // TODO FF error here if binding mediastream: The captured HTMLMediaElement is playing a MediaStream. Applying volume or mute status is not currently supported -- not an issue since we have no audio atm in shared video.\n          const mediaElementAudioSource =\n            linkedMediaElementAudioSource ||\n            this.el.sceneEl.audioListener.context.createMediaElementSource(audioSourceEl);\n\n          if (this.data.audioType === \"pannernode\") {\n            this.audio = new THREE.PositionalAudio(this.el.sceneEl.audioListener);\n            this.audio.setDistanceModel(this.data.distanceModel);\n            this.audio.setRolloffFactor(this.data.rolloffFactor);\n            this.audio.setRefDistance(this.data.refDistance);\n            this.audio.setMaxDistance(this.data.maxDistance);\n            this.audio.panner.coneInnerAngle = this.data.coneInnerAngle;\n            this.audio.panner.coneOuterAngle = this.data.coneOuterAngle;\n            this.audio.panner.coneOuterGain = this.data.coneOuterGain;\n          } else {\n            this.audio = new THREE.Audio(this.el.sceneEl.audioListener);\n          }\n\n          this.mediaElementAudioSource = mediaElementAudioSource;\n          this.audio.setNodeSource(mediaElementAudioSource);\n          this.el.setObject3D(\"sound\", this.audio);\n        }\n      }\n\n      this.video = texture.image;\n      this.video.loop = this.data.loop;\n      this.video.addEventListener(\"pause\", this.onPauseStateChange);\n      this.video.addEventListener(\"play\", this.onPauseStateChange);\n\n      if (texture.hls) {\n        const updateLiveState = () => {\n          if (texture.hls.currentLevel >= 0) {\n            const videoWasLive = !!this.videoIsLive;\n            this.videoIsLive = texture.hls.levels[texture.hls.currentLevel].details.live;\n            this.updateHoverMenu();\n\n            if (!videoWasLive && this.videoIsLive) {\n              // We just determined the video is live (there can be a delay due to autoplay issues, etc)\n              // so catch it up to HEAD.\n              if (!isFirefoxReality) {\n                // HACK this causes live streams to freeze in FxR due to https://github.com/MozillaReality/FirefoxReality/issues/1602, TODO remove once 1.4 ships\n                this.video.currentTime = this.video.duration - 0.01;\n              }\n            }\n          }\n        };\n        texture.hls.on(HLS.Events.LEVEL_LOADED, updateLiveState);\n        texture.hls.on(HLS.Events.LEVEL_SWITCHED, updateLiveState);\n        if (texture.hls.currentLevel >= 0) {\n          updateLiveState();\n        }\n      } else {\n        this.videoIsLive = this.video.duration === Infinity;\n        this.updateHoverMenu();\n      }\n\n      if (isIOS) {\n        const template = document.getElementById(\"video-unmute\");\n        this.el.appendChild(document.importNode(template.content, true));\n        this.el.setAttribute(\"position-at-box-shape-border__unmute-ui\", {\n          target: \".unmute-ui\",\n          dirs: [\"forward\", \"back\"]\n        });\n      }\n\n      this.videoTexture = texture;\n      this.audioSource = audioSourceEl;\n    } catch (e) {\n      console.error(\"Error loading video\", this.data.src, e);\n      texture = errorTexture;\n      this.videoTexture = this.audioSource = null;\n    }\n\n    const projection = this.data.projection;\n\n    if (!this.mesh || projection !== oldData.projection) {\n      const material = new THREE.MeshBasicMaterial();\n\n      let geometry;\n\n      if (projection === \"360-equirectangular\") {\n        geometry = new THREE.SphereBufferGeometry(1, 64, 32);\n        // invert the geometry on the x-axis so that all of the faces point inward\n        geometry.scale(-1, 1, 1);\n      } else {\n        geometry = new THREE.PlaneBufferGeometry();\n        material.side = THREE.DoubleSide;\n      }\n\n      this.mesh = new THREE.Mesh(geometry, material);\n      this.el.setObject3D(\"mesh\", this.mesh);\n    }\n\n    if (this.data.contentType.startsWith(\"audio/\")) {\n      this.mesh.material.map = audioIconTexture;\n    } else {\n      this.mesh.material.map = texture;\n    }\n    this.mesh.material.needsUpdate = true;\n\n    if (projection === \"flat\" && !this.data.contentType.startsWith(\"audio/\")) {\n      scaleToAspectRatio(\n        this.el,\n        (texture.image.videoHeight || texture.image.height) / (texture.image.videoWidth || texture.image.width)\n      );\n    }\n\n    this.updatePlaybackState(true);\n\n    if (this.video && this.video.muted) {\n      this.videoMutedAt = performance.now();\n    }\n\n    this.el.emit(\"video-loaded\", { projection: projection });\n  },\n\n  async createVideoTextureAudioSourceEl() {\n    const url = this.data.src;\n    const contentType = this.data.contentType;\n\n    return new Promise(async (resolve, reject) => {\n      if (this._audioSyncInterval) {\n        clearInterval(this._audioSyncInterval);\n        this._audioSyncInterval = null;\n      }\n\n      const videoEl = createVideoOrAudioEl(\"video\");\n\n      let texture, audioEl, isReady;\n      if (contentType.startsWith(\"audio/\")) {\n        // We want to treat audio almost exactly like video, so we mock a video texture with an image property.\n        texture = new THREE.Texture();\n        texture.image = videoEl;\n        isReady = () => true;\n      } else {\n        texture = new THREE.VideoTexture(videoEl);\n        texture.minFilter = THREE.LinearFilter;\n        texture.encoding = THREE.sRGBEncoding;\n        isReady = () =>\n          (texture.image.videoHeight || texture.image.height) && (texture.image.videoWidth || texture.image.width);\n      }\n\n      // Set src on video to begin loading.\n      if (url.startsWith(\"hubs://\")) {\n        const streamClientId = url.substring(7).split(\"/\")[1]; // /clients/<client id>/video is only URL for now\n        const stream = await NAF.connection.adapter.getMediaStream(streamClientId, \"video\");\n        videoEl.srcObject = new MediaStream(stream.getVideoTracks());\n        // If hls.js is supported we always use it as it gives us better events\n      } else if (AFRAME.utils.material.isHLS(url, contentType)) {\n        if (HLS.isSupported()) {\n          const corsProxyPrefix = `https://${configs.CORS_PROXY_SERVER}/`;\n          const baseUrl = url.startsWith(corsProxyPrefix) ? url.substring(corsProxyPrefix.length) : url;\n          const setupHls = () => {\n            if (texture.hls) {\n              texture.hls.stopLoad();\n              texture.hls.detachMedia();\n              texture.hls.destroy();\n              texture.hls = null;\n            }\n\n            const hls = new HLS({\n              xhrSetup: (xhr, u) => {\n                if (u.startsWith(corsProxyPrefix)) {\n                  u = u.substring(corsProxyPrefix.length);\n                }\n\n                // HACK HLS.js resolves relative urls internally, but our CORS proxying screws it up. Resolve relative to the original unproxied url.\n                // TODO extend HLS.js to allow overriding of its internal resolving instead\n                if (!u.startsWith(\"http\")) {\n                  u = buildAbsoluteURL(baseUrl, u.startsWith(\"/\") ? u : `/${u}`);\n                }\n\n                xhr.open(\"GET\", proxiedUrlFor(u));\n              }\n            });\n\n            texture.hls = hls;\n            hls.loadSource(url);\n            hls.attachMedia(videoEl);\n\n            hls.on(HLS.Events.ERROR, function(event, data) {\n              if (data.fatal) {\n                switch (data.type) {\n                  case HLS.ErrorTypes.NETWORK_ERROR:\n                    // try to recover network error\n                    hls.startLoad();\n                    break;\n                  case HLS.ErrorTypes.MEDIA_ERROR:\n                    hls.recoverMediaError();\n                    break;\n                  default:\n                    reject(event);\n                    return;\n                }\n              }\n            });\n          };\n\n          setupHls();\n\n          // Sometimes for weird streams HLS fails to initialize.\n          const setupInterval = setInterval(() => {\n            // Stop retrying if the src changed.\n            const isNoLongerSrc = this.data.src !== url;\n\n            if (isReady() || isNoLongerSrc) {\n              clearInterval(setupInterval);\n            } else {\n              console.warn(\"HLS failed to read video, trying again\");\n              setupHls();\n            }\n          }, HLS_TIMEOUT);\n          // If not, see if native support will work\n        } else if (videoEl.canPlayType(contentType)) {\n          videoEl.src = url;\n          videoEl.onerror = reject;\n        } else {\n          reject(\"HLS unsupported\");\n        }\n      } else {\n        videoEl.src = url;\n        videoEl.onerror = reject;\n\n        if (this.data.audioSrc) {\n          // If there's an audio src, create an audio element to play it that we keep in sync\n          // with the video while this component is active.\n          audioEl = createVideoOrAudioEl(\"audio\");\n          audioEl.src = this.data.audioSrc;\n          audioEl.onerror = reject;\n\n          this._audioSyncInterval = setInterval(() => {\n            if (Math.abs(audioEl.currentTime - videoEl.currentTime) >= 0.33) {\n              // In Chrome, drift of a few frames seems persistent\n              audioEl.currentTime = videoEl.currentTime;\n            }\n\n            // During pause state change, correct any drift that remains.\n            if (videoEl.paused !== audioEl.paused) {\n              videoEl.paused ? audioEl.pause() : audioEl.play();\n              audioEl.currentTime = videoEl.currentTime;\n            }\n          }, 1000);\n        }\n      }\n\n      // NOTE: We used to use the canplay event here to yield the texture, but that fails to fire on iOS Safari\n      // and also sometimes in Chrome it seems.\n      const poll = () => {\n        if (isReady()) {\n          resolve({ texture, audioSourceEl: audioEl || texture.image });\n        } else {\n          setTimeout(poll, 500);\n        }\n      };\n\n      poll();\n    });\n  },\n\n  updateHoverMenu() {\n    if (!this.hoverMenu) return;\n\n    const pinnableElement = this.el.components[\"media-loader\"].data.linkedEl || this.el;\n    const isPinned = pinnableElement.components.pinnable && pinnableElement.components.pinnable.data.pinned;\n    this.playbackControls.object3D.visible = !this.data.hidePlaybackControls && !!this.video;\n    this.timeLabel.object3D.visible = !this.data.hidePlaybackControls;\n\n    this.snapButton.object3D.visible =\n      !!this.video && !this.data.contentType.startsWith(\"audio/\") && window.APP.hubChannel.can(\"spawn_and_move_media\");\n    this.seekForwardButton.object3D.visible = !!this.video && !this.videoIsLive;\n\n    const mayModifyPlayHead =\n      !!this.video && !this.videoIsLive && (!isPinned || window.APP.hubChannel.can(\"pin_objects\"));\n\n    this.playPauseButton.object3D.visible = this.seekForwardButton.object3D.visible = this.seekBackButton.object3D.visible = mayModifyPlayHead;\n\n    if (this.videoIsLive) {\n      this.timeLabel.setAttribute(\"text\", \"value\", \"LIVE\");\n    }\n  },\n\n  updateVolumeLabel() {\n    this.volumeLabel.setAttribute(\n      \"text\",\n      \"value\",\n      this.data.volume === 0 ? \"MUTE\" : VOLUME_LABELS[Math.floor(this.data.volume / 0.05)]\n    );\n  },\n\n  tick() {\n    if (!this.video) return;\n\n    const userinput = this.el.sceneEl.systems.userinput;\n    const interaction = this.el.sceneEl.systems.interaction;\n    const volumeModRight = userinput.get(paths.actions.cursor.right.mediaVolumeMod);\n    if (interaction.state.rightRemote.hovered === this.el && volumeModRight) {\n      this.changeVolumeBy(volumeModRight);\n    }\n    const volumeModLeft = userinput.get(paths.actions.cursor.left.mediaVolumeMod);\n    if (interaction.state.leftRemote.hovered === this.el && volumeModLeft) {\n      this.changeVolumeBy(volumeModLeft);\n    }\n\n    const isHeld = interaction.isHeld(this.el);\n\n    if (this.wasHeld && !isHeld) {\n      this.localSnapCount = 0;\n    }\n\n    this.wasHeld = isHeld;\n\n    if (this.hoverMenu && this.hoverMenu.object3D.visible && !this.videoIsLive) {\n      this.timeLabel.setAttribute(\n        \"text\",\n        \"value\",\n        `${timeFmt(this.video.currentTime)} / ${timeFmt(this.video.duration)}`\n      );\n    }\n\n    // If a known non-live video is currently playing and we own it, send out time updates\n    if (\n      !this.data.videoPaused &&\n      this.videoIsLive === false &&\n      this.networkedEl &&\n      NAF.utils.isMine(this.networkedEl)\n    ) {\n      const now = performance.now();\n      if (now - this.lastUpdate > this.data.tickRate) {\n        this.el.setAttribute(\"media-video\", \"time\", this.video.currentTime);\n        this.lastUpdate = now;\n      }\n    }\n  },\n\n  cleanUp() {\n    if (this.mesh && this.mesh.material) {\n      if (!this.data.linkedVideoTexture) {\n        disposeTexture(this.mesh.material.map);\n      }\n    }\n  },\n\n  remove() {\n    this.cleanUp();\n\n    if (this._audioSyncInterval) {\n      clearInterval(this._audioSyncInterval);\n      this._audioSyncInterval = null;\n    }\n\n    if (this.audio) {\n      this.el.removeObject3D(\"sound\");\n      this.audio.disconnect();\n      delete this.audio;\n    }\n\n    if (this.networkedEl) {\n      this.networkedEl.removeEventListener(\"pinned\", this.updateHoverMenu);\n      this.networkedEl.removeEventListener(\"unpinned\", this.updateHoverMenu);\n    }\n\n    window.APP.hubChannel.removeEventListener(\"permissions_updated\", this.updateHoverMenu);\n\n    if (this.video) {\n      this.video.removeEventListener(\"pause\", this.onPauseStateChange);\n      this.video.removeEventListener(\"play\", this.onPauseStateChange);\n    }\n\n    if (this.hoverMenu) {\n      this.playPauseButton.object3D.removeEventListener(\"interact\", this.togglePlaying);\n      this.volumeUpButton.object3D.removeEventListener(\"interact\", this.volumeUp);\n      this.volumeDownButton.object3D.removeEventListener(\"interact\", this.volumeDown);\n      this.seekForwardButton.object3D.removeEventListener(\"interact\", this.seekForward);\n      this.seekBackButton.object3D.removeEventListener(\"interact\", this.seekBack);\n    }\n  }\n});\n\nAFRAME.registerComponent(\"media-image\", {\n  schema: {\n    src: { type: \"string\" },\n    version: { type: \"number\" },\n    projection: { type: \"string\", default: \"flat\" },\n    contentType: { type: \"string\" },\n    batch: { default: false }\n  },\n\n  remove() {\n    if (this.data.batch && this.mesh) {\n      this.el.sceneEl.systems[\"hubs-systems\"].batchManagerSystem.removeObject(this.mesh);\n    }\n    if (this.currentSrcIsRetained) {\n      textureCache.release(this.data.src, this.data.version);\n      this.currentSrcIsRetained = false;\n    }\n  },\n\n  async update(oldData) {\n    let texture;\n    let ratio = 1;\n\n    const batchManagerSystem = this.el.sceneEl.systems[\"hubs-systems\"].batchManagerSystem;\n\n    try {\n      const { src, version, contentType } = this.data;\n      if (!src) return;\n\n      this.el.emit(\"image-loading\");\n\n      if (this.mesh && this.mesh.material.map && (src !== oldData.src || version !== oldData.version)) {\n        this.mesh.material.map = null;\n        this.mesh.material.needsUpdate = true;\n        if (this.mesh.material.map !== errorTexture) {\n          textureCache.release(oldData.src, oldData.version);\n          this.currentSrcIsRetained = false;\n        }\n      }\n\n      let cacheItem;\n      if (textureCache.has(src, version)) {\n        if (this.currentSrcIsRetained) {\n          cacheItem = textureCache.get(src, version);\n        } else {\n          cacheItem = textureCache.retain(src, version);\n        }\n      } else {\n        const inflightKey = textureCache.key(src, version);\n\n        if (src === \"error\") {\n          cacheItem = errorCacheItem;\n        } else if (inflightTextures.has(inflightKey)) {\n          await inflightTextures.get(inflightKey);\n          cacheItem = textureCache.retain(src, version);\n        } else {\n          let promise;\n          if (contentType.includes(\"image/gif\")) {\n            promise = createGIFTexture(src);\n          } else if (contentType.startsWith(\"image/\")) {\n            promise = createImageTexture(src);\n          } else {\n            throw new Error(`Unknown image content type: ${contentType}`);\n          }\n          inflightTextures.set(inflightKey, promise);\n          texture = await promise;\n          inflightTextures.delete(inflightKey);\n          cacheItem = textureCache.set(src, version, texture);\n        }\n\n        // No way to cancel promises, so if src has changed or this entity was removed while we were creating the texture just throw it away.\n        if (this.data.src !== src || this.data.version !== version || !this.el.parentNode) {\n          textureCache.release(src, version);\n          return;\n        }\n      }\n\n      texture = cacheItem.texture;\n      ratio = cacheItem.ratio;\n\n      this.currentSrcIsRetained = true;\n    } catch (e) {\n      console.error(\"Error loading image\", this.data.src, e);\n      texture = errorTexture;\n      this.currentSrcIsRetained = false;\n    }\n\n    const projection = this.data.projection;\n\n    if (this.mesh && this.data.batch) {\n      // This is a no-op if the mesh was just created.\n      // Otherwise we want to ensure the texture gets updated.\n      batchManagerSystem.removeObject(this.mesh);\n    }\n\n    if (!this.mesh || projection !== oldData.projection) {\n      const material = new THREE.MeshBasicMaterial();\n\n      let geometry;\n\n      if (projection === \"360-equirectangular\") {\n        geometry = new THREE.SphereBufferGeometry(1, 64, 32);\n        // invert the geometry on the x-axis so that all of the faces point inward\n        geometry.scale(-1, 1, 1);\n\n        // Flip uvs on the geometry\n        if (!texture.flipY) {\n          const uvs = geometry.attributes.uv.array;\n\n          for (let i = 1; i < uvs.length; i += 2) {\n            uvs[i] = 1 - uvs[i];\n          }\n        }\n      } else {\n        geometry = new THREE.PlaneBufferGeometry(1, 1, 1, 1, texture.flipY);\n        material.side = THREE.DoubleSide;\n      }\n\n      this.mesh = new THREE.Mesh(geometry, material);\n      this.el.setObject3D(\"mesh\", this.mesh);\n    }\n\n    // We only support transparency on gifs. Other images will support cutout as part of batching, but not alpha transparency for now\n    this.mesh.material.transparent =\n      !this.data.batch || texture == errorTexture || this.data.contentType.includes(\"image/gif\");\n    this.mesh.material.map = texture;\n    this.mesh.material.needsUpdate = true;\n\n    if (projection === \"flat\") {\n      scaleToAspectRatio(this.el, ratio);\n    }\n\n    if (texture !== errorTexture && this.data.batch) {\n      batchManagerSystem.addObject(this.mesh);\n    }\n\n    this.el.emit(\"image-loaded\", { src: this.data.src, projection: projection });\n  }\n});\n\nAFRAME.registerComponent(\"media-pdf\", {\n  schema: {\n    src: { type: \"string\" },\n    projection: { type: \"string\", default: \"flat\" },\n    contentType: { type: \"string\" },\n    index: { default: 0 },\n    batch: { default: false }\n  },\n\n  init() {\n    this.snap = this.snap.bind(this);\n    this.canvas = document.createElement(\"canvas\");\n    this.canvasContext = this.canvas.getContext(\"2d\");\n    this.localSnapCount = 0;\n    this.isSnapping = false;\n    this.onSnapImageLoaded = () => (this.isSnapping = false);\n    this.texture = new THREE.CanvasTexture(this.canvas);\n\n    this.texture.encoding = THREE.sRGBEncoding;\n    this.texture.minFilter = THREE.LinearFilter;\n\n    this.el.addEventListener(\"pager-snap-clicked\", () => this.snap());\n  },\n\n  async snap() {\n    if (this.isSnapping) return;\n    this.isSnapping = true;\n    this.el.sceneEl.systems[\"hubs-systems\"].soundEffectsSystem.playSoundOneShot(SOUND_CAMERA_TOOL_TOOK_SNAPSHOT);\n\n    const blob = await new Promise(resolve => this.canvas.toBlob(resolve));\n    const file = new File([blob], \"snap.png\", TYPE_IMG_PNG);\n\n    this.localSnapCount++;\n    const { entity } = addAndArrangeMedia(this.el, file, \"photo-snapshot\", this.localSnapCount, false, 1);\n    entity.addEventListener(\"image-loaded\", this.onSnapImageLoaded, ONCE_TRUE);\n  },\n\n  remove() {\n    if (this.data.batch && this.mesh) {\n      this.el.sceneEl.systems[\"hubs-systems\"].batchManagerSystem.removeObject(this.mesh);\n    }\n  },\n\n  async update(oldData) {\n    let texture;\n    let ratio = 1;\n\n    try {\n      const { src, index } = this.data;\n      if (!src) return;\n\n      if (this.renderTask) {\n        await this.renderTask.promise;\n        if (src !== this.data.src || index !== this.data.index) return;\n      }\n\n      this.el.emit(\"pdf-loading\");\n\n      if (src !== oldData.src) {\n        const loadingSrc = this.data.src;\n        const pdf = await pdfjs.getDocument(src);\n        if (loadingSrc !== this.data.src) return;\n\n        this.pdf = pdf;\n        this.el.setAttribute(\"media-pager\", { maxIndex: this.pdf.numPages - 1 });\n      }\n\n      const page = await this.pdf.getPage(index + 1);\n      if (src !== this.data.src || index !== this.data.index) return;\n\n      const viewport = page.getViewport({ scale: 3 });\n      const pw = viewport.width;\n      const ph = viewport.height;\n      texture = this.texture;\n      ratio = ph / pw;\n\n      this.canvas.width = pw;\n      this.canvas.height = ph;\n\n      this.renderTask = page.render({ canvasContext: this.canvasContext, viewport });\n\n      await this.renderTask.promise;\n\n      this.renderTask = null;\n\n      if (src !== this.data.src || index !== this.data.index) return;\n\n      this.currentPageTextureIsRetained = true;\n    } catch (e) {\n      console.error(\"Error loading PDF\", this.data.src, e);\n      texture = errorTexture;\n    }\n\n    if (!this.mesh) {\n      const material = new THREE.MeshBasicMaterial();\n      const geometry = new THREE.PlaneBufferGeometry(1, 1, 1, 1, texture.flipY);\n      material.side = THREE.DoubleSide;\n\n      this.mesh = new THREE.Mesh(geometry, material);\n      this.el.setObject3D(\"mesh\", this.mesh);\n    }\n\n    this.mesh.material.transparent = texture == errorTexture;\n    this.mesh.material.map = texture;\n    this.mesh.material.map.needsUpdate = true;\n    this.mesh.material.needsUpdate = true;\n\n    scaleToAspectRatio(this.el, ratio);\n\n    if (texture !== errorTexture && this.data.batch) {\n      this.el.sceneEl.systems[\"hubs-systems\"].batchManagerSystem.addObject(this.mesh);\n    }\n\n    if (this.el.components[\"media-pager\"] && this.el.components[\"media-pager\"].data.index !== this.data.index) {\n      this.el.setAttribute(\"media-pager\", { index: this.data.index });\n    }\n\n    this.el.emit(\"pdf-loaded\", { src: this.data.src });\n  }\n});\n","import { VOLUME_LABELS } from \"./media-views\";\nconst MAX_VOLUME = 8;\nconst SMALL_STEP = 1 / (VOLUME_LABELS.length / 2);\nconst BIG_STEP = (MAX_VOLUME - 1) / (VOLUME_LABELS.length / 2);\n\nAFRAME.registerComponent(\"avatar-volume-controls\", {\n  schema: {\n    volume: { type: \"number\", default: 1.0 }\n  },\n\n  init() {\n    this.volumeUp = this.volumeUp.bind(this);\n    this.volumeDown = this.volumeDown.bind(this);\n    this.changeVolumeBy = this.changeVolumeBy.bind(this);\n    this.volumeUpButton = this.el.querySelector(\".avatar-volume-up-button\");\n    this.volumeDownButton = this.el.querySelector(\".avatar-volume-down-button\");\n    this.volumeLabel = this.el.querySelector(\".avatar-volume-label\");\n    this.volumeUpButton.object3D.addEventListener(\"interact\", this.volumeUp);\n    this.volumeDownButton.object3D.addEventListener(\"interact\", this.volumeDown);\n    this.update = this.update.bind(this);\n    window.APP.store.addEventListener(\"statechanged\", this.update);\n\n    this.updateVolumeLabel();\n  },\n  remove() {\n    window.APP.store.removeEventListener(\"statechanged\", this.update);\n  },\n\n  changeVolumeBy(v) {\n    this.el.setAttribute(\"avatar-volume-controls\", \"volume\", THREE.Math.clamp(this.data.volume + v, 0, MAX_VOLUME));\n    this.updateVolumeLabel();\n  },\n\n  volumeUp() {\n    const step = this.data.volume > 1 - SMALL_STEP ? BIG_STEP : SMALL_STEP;\n    this.changeVolumeBy(step);\n  },\n\n  volumeDown() {\n    const step = this.data.volume > 1 + SMALL_STEP ? BIG_STEP : SMALL_STEP;\n    this.changeVolumeBy(-1 * step);\n  },\n\n  update() {\n    if (this.audio) {\n      const globalVoiceVolume =\n        window.APP.store.state.preferences.globalVoiceVolume !== undefined\n          ? window.APP.store.state.preferences.globalVoiceVolume\n          : 100;\n      this.audio.gain.gain.value = (globalVoiceVolume / 100) * this.data.volume;\n    }\n  },\n\n  updateVolumeLabel() {\n    const numBars = Math.min(\n      VOLUME_LABELS.length - 1,\n      this.data.volume <= 1.001\n        ? Math.floor(this.data.volume / SMALL_STEP)\n        : Math.floor(VOLUME_LABELS.length / 2 + (this.data.volume - 1) / BIG_STEP)\n    );\n    this.volumeLabel.setAttribute(\"text\", \"value\", this.data.volume === 0 ? \"Muted\" : VOLUME_LABELS[numBars]);\n  },\n\n  tick() {\n    if (this.audio) return;\n\n    // Walk up to Spine and then search down.\n    const source = this.el.parentNode.parentNode.querySelector(\"[networked-audio-source]\");\n    if (!source) return;\n\n    this.audio = source.components[\"networked-audio-source\"].sound;\n    this.update();\n  }\n});\n","import { paths } from \"../systems/userinput/paths\";\n\nAFRAME.registerComponent(\"pinch-to-move\", {\n  schema: {\n    speed: { default: 0.25 }\n  },\n  init() {\n    this.axis = [0, 0];\n  },\n  tick() {\n    const userinput = AFRAME.scenes[0].systems.userinput;\n    const pinch = userinput.get(paths.device.touchscreen.pinchDelta);\n    if (pinch) {\n      this.axis[1] = pinch * this.data.speed;\n      this.el.emit(\"move\", { axis: this.axis });\n    }\n  }\n});\n","import { paths } from \"../systems/userinput/paths\";\n\nconst rotatePitchAndYaw = (function() {\n  const opq = new THREE.Quaternion();\n  const owq = new THREE.Quaternion();\n  const oq = new THREE.Quaternion();\n  const pq = new THREE.Quaternion();\n  const yq = new THREE.Quaternion();\n  const q = new THREE.Quaternion();\n  const right = new THREE.Vector3();\n  const v = new THREE.Vector3();\n  const UP = new THREE.Vector3(0, 1, 0);\n\n  return function rotatePitchAndYaw(o, p, y) {\n    o.parent.updateMatrices();\n    o.updateMatrices();\n    o.parent.getWorldQuaternion(opq);\n    o.getWorldQuaternion(owq);\n    oq.copy(o.quaternion);\n    v.set(0, 1, 0).applyQuaternion(oq);\n    const initialUpDot = v.dot(UP);\n    v.set(0, 0, 1).applyQuaternion(oq);\n    const initialForwardDotUp = Math.abs(v.dot(UP));\n    right.set(1, 0, 0).applyQuaternion(owq);\n    pq.setFromAxisAngle(right, p);\n    yq.setFromAxisAngle(UP, y);\n\n    q.copy(owq)\n      .premultiply(pq)\n      .premultiply(yq)\n      .premultiply(opq.inverse());\n    v.set(0, 1, 0).applyQuaternion(q);\n    const newUpDot = v.dot(UP);\n    v.set(0, 0, 1).applyQuaternion(q);\n    const newForwardDotUp = Math.abs(v.dot(UP));\n    // Ensure our pitch is in an accepted range and our head would not be flipped upside down\n    if ((newForwardDotUp > 0.9 && newForwardDotUp > initialForwardDotUp) || (newUpDot < 0 && newUpDot < initialUpDot)) {\n      // TODO: Apply a partial rotation that does not exceed the bounds for nicer UX\n      return;\n    } else {\n      o.quaternion.copy(q);\n      o.matrixNeedsUpdate = true;\n      o.updateMatrices();\n    }\n  };\n})();\n\nAFRAME.registerComponent(\"pitch-yaw-rotator\", {\n  init() {\n    this.pendingXRotation = 0;\n    this.el.sceneEl.addEventListener(\"rotateX\", e => {\n      this.pendingXRotation += e.detail;\n    });\n    this.on = true;\n  },\n\n  tick() {\n    if (this.on) {\n      const scene = AFRAME.scenes[0];\n      const userinput = scene.systems.userinput;\n      const cameraDelta = userinput.get(\n        scene.is(\"entered\") ? paths.actions.cameraDelta : paths.actions.lobbyCameraDelta\n      );\n      if (cameraDelta) {\n        rotatePitchAndYaw(this.el.object3D, this.pendingXRotation + cameraDelta[1], cameraDelta[0]);\n      } else if (this.pendingXRotation) {\n        rotatePitchAndYaw(this.el.object3D, this.pendingXRotation, 0);\n      }\n    }\n    this.pendingXRotation = 0;\n  }\n});\n","import { getBox } from \"../utils/auto-box-collider.js\";\nimport { getLastWorldPosition } from \"../utils/three-utils\";\nimport { CAMERA_MODE_FIRST_PERSON } from \"../systems/camera-system\";\nimport { waitForDOMContentLoaded } from \"../utils/async-utils\";\n\nconst PI = Math.PI;\nconst HALF_PI = PI / 2;\nconst THREE_HALF_PI = 3 * HALF_PI;\nconst right = new THREE.Vector3(1, 0, 0);\nconst forward = new THREE.Vector3(0, 0, 1);\nconst left = new THREE.Vector3(-1, 0, 0);\nconst back = new THREE.Vector3(0, 0, -1);\nconst zero = new THREE.Vector3(0, 0, 0);\nconst dirs = {\n  left: {\n    dir: left,\n    rotation: THREE_HALF_PI,\n    halfExtent: \"x\"\n  },\n  right: {\n    dir: right,\n    rotation: HALF_PI,\n    halfExtent: \"x\"\n  },\n  forward: {\n    dir: forward,\n    rotation: 0,\n    halfExtent: \"z\"\n  },\n  back: {\n    dir: back,\n    rotation: PI,\n    halfExtent: \"z\"\n  }\n};\n\nAFRAME.registerComponent(\"position-at-box-shape-border\", {\n  multiple: true,\n  schema: {\n    target: { type: \"string\" },\n    dirs: { default: [\"left\", \"right\", \"forward\", \"back\"] },\n    animate: { default: true },\n    scale: { default: true }\n  },\n\n  init() {\n    this.cam = this.el.sceneEl.camera.el.object3D;\n    this._updateBox = this._updateBox.bind(this);\n    this._setupTarget = this._setupTarget.bind(this);\n    this.halfExtents = new THREE.Vector3();\n    this.el.sceneEl.systems[\"frame-scheduler\"].schedule(this._updateBox, \"media-components\");\n\n    this._setupTarget();\n  },\n\n  remove() {\n    this.el.sceneEl.systems[\"frame-scheduler\"].unschedule(this._updateBox, \"media-components\");\n  },\n\n  update() {\n    this.dirs = this.data.dirs.map(d => dirs[d]);\n  },\n\n  async _setupTarget() {\n    await waitForDOMContentLoaded();\n\n    this.targetEl = this.el.querySelector(this.data.target);\n    this.target = this.targetEl.object3D;\n\n    this.targetEl.addEventListener(\"animationcomplete\", () => {\n      this.targetEl.removeAttribute(\"animation__show\");\n    });\n\n    this.target.scale.setScalar(0.01); // To avoid \"pop\" of gigantic button first time\n    this.target.matrixNeedsUpdate = true;\n  },\n\n  tick() {\n    if (!this.target) return;\n\n    if (!this.el.getObject3D(\"mesh\")) {\n      return;\n    }\n\n    const isVisible = this.targetEl.object3D.visible;\n    const opening = isVisible && !this.wasVisible;\n    const scaleChanged =\n      this.el.object3D.scale.x !== this.previousScaleX ||\n      this.el.object3D.scale.y !== this.previousScaleY ||\n      this.el.object3D.scale.z !== this.previousScaleZ;\n    const isAnimating = this.targetEl.getAttribute(\"animation__show\");\n\n    // If the target is being shown or the scale changed while the opening animation is being run,\n    // we need to start or re-start the animation.\n    if (opening || (scaleChanged && isAnimating)) {\n      this._updateBox(this.data.animate, true);\n    }\n\n    this.wasVisible = isVisible;\n    this.previousScaleX = this.el.object3D.scale.x;\n    this.previousScaleY = this.el.object3D.scale.y;\n    this.previousScaleZ = this.el.object3D.scale.z;\n  },\n\n  _updateBox: (function() {\n    const camWorldPos = new THREE.Vector3();\n    const targetPosition = new THREE.Vector3();\n    const pointOnBoxFace = new THREE.Vector3();\n    const pointOnBoxFaceToCamera = new THREE.Vector3();\n    const boxCenter = new THREE.Vector3();\n    const tempParentWorldScale = new THREE.Vector3();\n    const boxFaceNormal = new THREE.Vector3();\n    const min = new THREE.Vector3(0.001, 0.001, 0.001);\n\n    return function(animate, forceNewExtents) {\n      if (forceNewExtents || this.mesh !== this.el.getObject3D(\"mesh\")) {\n        this.mesh = this.el.getObject3D(\"mesh\");\n\n        const box = getBox(this.el, this.mesh);\n        this.halfExtents = box.min\n          .clone()\n          .negate()\n          .add(box.max)\n          .multiplyScalar(0.65);\n\n        this.halfExtents.max(min);\n      }\n\n      if (!this.target) return;\n\n      getLastWorldPosition(this.cam, camWorldPos);\n\n      let targetSquareDistance = Infinity;\n      let targetDir = this.dirs[0].dir;\n      let targetHalfExtentStr = this.dirs[0].halfExtent;\n      let targetHalfExtent = this.halfExtents[targetHalfExtentStr];\n      let targetRotation = this.dirs[0].rotation;\n      let targetCameraDot = -1.1;\n\n      this.el.object3D.updateMatrices();\n\n      for (let i = 0; i < this.dirs.length; i++) {\n        const dir = this.dirs[i].dir;\n        const halfExtentStr = this.dirs[i].halfExtent;\n        const halfExtent = this.halfExtents[halfExtentStr];\n        pointOnBoxFace.copy(dir).multiplyScalar(halfExtent);\n        boxCenter.copy(zero);\n\n        this.el.object3D.localToWorld(pointOnBoxFace);\n        this.el.object3D.localToWorld(boxCenter);\n\n        pointOnBoxFaceToCamera.subVectors(camWorldPos, pointOnBoxFace);\n        pointOnBoxFaceToCamera.normalize();\n\n        boxFaceNormal.subVectors(pointOnBoxFace, boxCenter);\n        boxFaceNormal.normalize();\n\n        // Compute dot between camera + box normal to ensure menus are going to be\n        // somewhat perpendicular to camera frustum\n        const cameraAngleDotBoxNormal = boxFaceNormal.dot(pointOnBoxFaceToCamera);\n\n        const squareDistance = pointOnBoxFace.distanceToSquared(camWorldPos);\n        if (cameraAngleDotBoxNormal > targetCameraDot) {\n          targetSquareDistance = squareDistance;\n          targetDir = dir;\n          targetHalfExtent = halfExtent;\n          targetRotation = this.dirs[i].rotation;\n          targetHalfExtentStr = halfExtentStr;\n          targetCameraDot = cameraAngleDotBoxNormal;\n        }\n      }\n\n      this.target.position.copy(targetPosition.copy(targetDir).multiplyScalar(targetHalfExtent));\n      this.target.rotation.set(0, targetRotation, 0);\n\n      tempParentWorldScale.setFromMatrixScale(this.target.parent.matrixWorld);\n\n      const distance = Math.sqrt(targetSquareDistance);\n      const scale = Math.max(this.halfExtents.x, this.halfExtents.z) * distance;\n      const targetScale = Math.min(\n        this.el.sceneEl.systems[\"hubs-systems\"].cameraSystem.mode === CAMERA_MODE_FIRST_PERSON ? 2.0 : 4.0,\n        Math.max(0.5, scale * tempParentWorldScale.x)\n      );\n      const finalScale = this.data.scale ? targetScale / tempParentWorldScale.x : 1;\n\n      if (animate) {\n        this.targetEl.removeAttribute(\"animation__show\");\n\n        this.targetEl.setAttribute(\"animation__show\", {\n          property: \"scale\",\n          dur: 300,\n          from: { x: finalScale * 0.8, y: finalScale * 0.8, z: finalScale * 0.8 },\n          to: { x: finalScale, y: finalScale, z: finalScale },\n          easing: \"easeOutElastic\"\n        });\n      } else if (!this.targetEl.getAttribute(\"animation__show\")) {\n        this.target.scale.setScalar(finalScale);\n      }\n\n      this.target.matrixNeedsUpdate = true;\n    };\n  })()\n});\n","import { getPromotionTokenForFile } from \"../utils/media-utils\";\nimport { SOUND_PIN } from \"../systems/sound-effects-system\";\nimport { applyThemeToTextButton } from \"../utils/theme\";\n\nAFRAME.registerComponent(\"pin-networked-object-button\", {\n  schema: {\n    // Selector for label informing users about Discord bridging of pins.\n    tipSelector: { type: \"string\" },\n\n    // Selector for label to change when pinned/unpinned, must be sibling of this components element\n    labelSelector: { type: \"string\" }\n  },\n\n  init() {\n    this._updateUI = this._updateUI.bind(this);\n    this._updateUIOnStateChange = this._updateUIOnStateChange.bind(this);\n    this.el.sceneEl.addEventListener(\"stateadded\", this._updateUIOnStateChange);\n    this.el.sceneEl.addEventListener(\"stateremoved\", this._updateUIOnStateChange);\n\n    this.tipEl = this.el.parentNode.querySelector(this.data.tipSelector);\n    this.labelEl = this.el.parentNode.querySelector(this.data.labelSelector);\n\n    NAF.utils.getNetworkedEntity(this.el).then(networkedEl => {\n      this.targetEl = networkedEl;\n\n      this._updateUI();\n      this.targetEl.addEventListener(\"pinned\", this._updateUI);\n      this.targetEl.addEventListener(\"unpinned\", this._updateUI);\n    });\n\n    this.onHovered = () => {\n      this.hovering = true;\n      this._updateUI();\n    };\n\n    this.onUnhovered = () => {\n      this.hovering = false;\n      this._updateUI();\n    };\n\n    this.onClick = () => {\n      if (!NAF.utils.isMine(this.targetEl) && !NAF.utils.takeOwnership(this.targetEl)) return;\n\n      const wasPinned = this.targetEl.components.pinnable && this.targetEl.components.pinnable.data.pinned;\n      this.targetEl.setAttribute(\"pinnable\", \"pinned\", !wasPinned);\n      if (!wasPinned) {\n        this.el.sceneEl.systems[\"hubs-systems\"].soundEffectsSystem.playSoundOneShot(SOUND_PIN);\n      }\n    };\n  },\n\n  play() {\n    this.el.object3D.addEventListener(\"interact\", this.onClick);\n    this.el.object3D.addEventListener(\"hovered\", this.onHovered);\n    this.el.object3D.addEventListener(\"unhovered\", this.onUnhovered);\n  },\n\n  pause() {\n    this.el.object3D.removeEventListener(\"interact\", this.onClick);\n    this.el.object3D.removeEventListener(\"hovered\", this.onHovered);\n    this.el.object3D.removeEventListener(\"unhovered\", this.onUnhovered);\n  },\n\n  remove() {\n    this.el.sceneEl.removeEventListener(\"stateadded\", this._updateUIOnStateChange);\n    this.el.sceneEl.removeEventListener(\"stateremoved\", this._updateUIOnStateChange);\n\n    if (this.targetEl) {\n      this.targetEl.removeEventListener(\"pinned\", this._updateUI);\n      this.targetEl.removeEventListener(\"unpinned\", this._updateUI);\n    }\n  },\n\n  _discordBridges() {\n    return window.APP.hubChannel.discordBridges();\n  },\n\n  _updateUIOnStateChange(e) {\n    if (e.detail !== \"frozen\") return;\n    this._updateUI();\n  },\n\n  _updateUI() {\n    const { fileIsOwned, fileId } = this.targetEl.components[\"media-loader\"].data;\n    const canPin =\n      window.APP.hubChannel.can(\"pin_objects\") && !!(fileIsOwned || (fileId && getPromotionTokenForFile(fileId)));\n    this.el.object3D.visible = canPin;\n    this.labelEl.object3D.visible = canPin;\n\n    const isPinned = this.targetEl.getAttribute(\"pinnable\") && this.targetEl.getAttribute(\"pinnable\").pinned;\n    const discordBridges = this._discordBridges();\n    this.tipEl.object3D.visible = !!(canPin && !isPinned && this.hovering && discordBridges.length > 0);\n\n    if (!canPin) return;\n    this.labelEl.setAttribute(\"text\", \"value\", isPinned ? \"un-pin\" : \"pin\");\n    applyThemeToTextButton(this.el, isPinned);\n  }\n});\n","import { cloneMedia } from \"../utils/media-utils\";\nimport { closeExistingMediaMirror } from \"../utils/media-utils\";\n\nAFRAME.registerComponent(\"mirror-media-button\", {\n  init() {\n    this.updateSrc = () => {\n      if (!this.targetEl.parentNode) return; // If removed\n      this.src = this.targetEl.components[\"media-loader\"].data.src;\n    };\n\n    NAF.utils.getNetworkedEntity(this.el).then(networkedEl => {\n      this.targetEl = networkedEl;\n      this.targetEl.addEventListener(\"media_resolved\", this.updateSrc, { once: true });\n      this.updateSrc();\n    });\n\n    this.onClick = async () => {\n      const mirrorTarget = document.querySelector(\"#media-mirror-target\");\n\n      await closeExistingMediaMirror();\n\n      const { entity } = cloneMedia(this.targetEl, \"#linked-media\", this.src, false, true, mirrorTarget);\n\n      entity.object3D.scale.set(0.75, 0.75, 0.75);\n      entity.object3D.matrixNeedsUpdate = true;\n\n      mirrorTarget.parentEl.components[\"follow-in-fov\"].reset();\n      mirrorTarget.parentEl.object3D.visible = true;\n    };\n  },\n\n  play() {\n    this.el.object3D.addEventListener(\"interact\", this.onClick);\n  },\n\n  pause() {\n    this.el.object3D.removeEventListener(\"interact\", this.onClick);\n  }\n});\n","import { closeExistingMediaMirror } from \"../utils/media-utils\";\n\nAFRAME.registerComponent(\"close-mirrored-media-button\", {\n  init() {\n    this.onClick = async () => {\n      this.el.object3D.visible = false; // Hide button immediately on click\n      await closeExistingMediaMirror();\n      this.el.object3D.visible = true;\n    };\n  },\n\n  play() {\n    this.el.object3D.addEventListener(\"interact\", this.onClick);\n  },\n\n  pause() {\n    this.el.object3D.removeEventListener(\"interact\", this.onClick);\n  }\n});\n","import { findAncestorWithComponent } from \"../utils/scene-graph\";\n\nAFRAME.registerComponent(\"unmute-video-button\", {\n  init() {\n    this.onClick = () => {\n      const videoEl = findAncestorWithComponent(this.el, \"media-video\");\n      const mediaVideo = videoEl.components[\"media-video\"];\n      if (!mediaVideo || !mediaVideo.video || !mediaVideo.videoMutedAt) return;\n\n      // iOS initially plays the sound and *then* mutes it, and sometimes a second video playing\n      // can break all sound in the app. (Likely a Safari bug.) Adding a delay before the unmute\n      // occurs seems to help with reducing this.\n      if (performance.now() - mediaVideo.videoMutedAt < 3000) {\n        return;\n      }\n\n      if (mediaVideo.video.muted) {\n        mediaVideo.video.muted = false;\n        this.el.setAttribute(\"visible\", false);\n      }\n    };\n  },\n\n  play() {\n    // Safari won't accept grab-start or even mousedown as user-initiated gestures,\n    // so we have to use a global touchstart event here.\n    document.addEventListener(\"touchstart\", this.onClick);\n  },\n\n  pause() {\n    document.removeEventListener(\"touchstart\", this.onClick);\n  }\n});\n","import { getLastWorldPosition } from \"../utils/three-utils\";\n\nAFRAME.registerComponent(\"destroy-at-extreme-distances\", {\n  schema: {\n    xMin: { default: -1000 },\n    xMax: { default: 1000 },\n    yMin: { default: -1000 },\n    yMax: { default: 1000 },\n    zMin: { default: -1000 },\n    zMax: { default: 1000 }\n  },\n\n  init() {\n    this._checkForDestroy = this._checkForDestroy.bind(this);\n    this.el.sceneEl.systems[\"frame-scheduler\"].schedule(this._checkForDestroy, \"media-components\");\n  },\n\n  remove() {\n    this.el.sceneEl.systems[\"frame-scheduler\"].unschedule(this._checkForDestroy, \"media-components\");\n  },\n\n  _checkForDestroy: (function() {\n    const pos = new THREE.Vector3();\n    return function() {\n      const { xMin, xMax, yMin, yMax, zMin, zMax } = this.data;\n      getLastWorldPosition(this.el.object3D, pos);\n\n      if (pos.x < xMin || pos.x > xMax || pos.y < yMin || pos.y > yMax || pos.z < zMin || pos.z > zMax) {\n        if (!this.el.components.networked || NAF.utils.isMine(this.el)) {\n          this.el.parentNode.removeChild(this.el);\n        }\n      }\n    };\n  })()\n});\n","import { addAndArrangeMedia } from \"../utils/media-utils\";\nimport { createImageBitmap } from \"../utils/image-bitmap-utils\";\nimport { ObjectTypes } from \"../object-types\";\nimport { paths } from \"../systems/userinput/paths\";\nimport { SOUND_CAMERA_TOOL_TOOK_SNAPSHOT, SOUND_CAMERA_TOOL_COUNTDOWN } from \"../systems/sound-effects-system\";\nimport { getAudioFeedbackScale } from \"./audio-feedback\";\nimport { cloneObject3D } from \"../utils/three-utils\";\nimport { loadModel } from \"./gltf-model-plus\";\nimport { waitForDOMContentLoaded } from \"../utils/async-utils\";\nimport cameraModelSrc from \"../assets/camera_tool.glb\";\nimport anime from \"animejs\";\n\nconst cameraModelPromise = waitForDOMContentLoaded().then(() => loadModel(cameraModelSrc));\n\nconst pathsMap = {\n  \"player-right-controller\": {\n    takeSnapshot: paths.actions.rightHand.takeSnapshot\n  },\n  \"player-left-controller\": {\n    takeSnapshot: paths.actions.leftHand.takeSnapshot\n  },\n  \"right-cursor\": {\n    takeSnapshot: paths.actions.cursor.right.takeSnapshot\n  },\n  \"left-cursor\": {\n    takeSnapshot: paths.actions.cursor.left.takeSnapshot\n  }\n};\n\nconst isMobileVR = AFRAME.utils.device.isMobileVR();\n\nconst VIEWFINDER_FPS = 6;\nconst VIDEO_FPS = 25;\n// Prefer h264 if available due to faster decoding speec on most platforms\nconst videoCodec = [\"h264\", \"vp9,opus\", \"vp8,opus\", \"vp9\", \"vp8\"].find(\n  codec => window.MediaRecorder && MediaRecorder.isTypeSupported(`video/webm; codecs=${codec}`)\n);\nconst videoMimeType = videoCodec ? `video/webm; codecs=${videoCodec}` : null;\nconst hasWebGL2 = !!document.createElement(\"canvas\").getContext(\"webgl2\");\nconst allowVideo = !!videoMimeType && hasWebGL2;\n\nconst CAPTURE_WIDTH = isMobileVR ? 640 : 1280;\nconst CAPTURE_HEIGHT = isMobileVR ? 360 : 720;\nconst RENDER_WIDTH = 1280;\nconst RENDER_HEIGHT = 720;\nconst CAPTURE_DURATIONS = [3, 7, 15, 30, 60, Infinity];\nconst DEFAULT_CAPTURE_DURATION = 7;\nconst COUNTDOWN_DURATION = 3;\nconst VIDEO_LOOPS = 3; // Number of times to loop the videos we spawn before stopping them (for perf)\nconst MAX_DURATION_TO_LIMIT_LOOPS = 31; // Max duration for which we limit loops (eg GIFs vs long form videos)\n\nconst snapCanvas = document.createElement(\"canvas\");\n\nasync function pixelsToPNG(pixels, width, height) {\n  snapCanvas.width = width;\n  snapCanvas.height = height;\n  const context = snapCanvas.getContext(\"2d\");\n\n  const imageData = context.createImageData(width, height);\n  imageData.data.set(pixels);\n  const bitmap = await createImageBitmap(imageData);\n  context.scale(1, -1);\n  context.drawImage(bitmap, 0, -height);\n  const blob = await new Promise(resolve => snapCanvas.toBlob(resolve));\n  return new File([blob], \"snap.png\", { type: \"image/png\" });\n}\n\nfunction blitFramebuffer(renderer, src, srcX0, srcY0, srcX1, srcY1, dest, dstX0, dstY0, dstX1, dstY1) {\n  const gl = renderer.context;\n\n  // Copies from one framebuffer to another. Note that at the end of this function, you need to restore\n  // the original framebuffer via setRenderTarget\n  const srcFramebuffer = renderer.properties.get(src).__webglFramebuffer;\n  const destFramebuffer = renderer.properties.get(dest).__webglFramebuffer;\n\n  if (srcFramebuffer && destFramebuffer) {\n    gl.bindFramebuffer(gl.READ_FRAMEBUFFER, srcFramebuffer);\n    gl.bindFramebuffer(gl.DRAW_FRAMEBUFFER, destFramebuffer);\n\n    if (gl.checkFramebufferStatus(gl.READ_FRAMEBUFFER) === gl.FRAMEBUFFER_COMPLETE) {\n      gl.blitFramebuffer(srcX0, srcY0, srcX1, srcY1, dstX0, dstY0, dstX1, dstY1, gl.COLOR_BUFFER_BIT, gl.LINEAR);\n    }\n  }\n}\n\nAFRAME.registerComponent(\"camera-tool\", {\n  schema: {\n    captureDuration: { default: DEFAULT_CAPTURE_DURATION },\n    captureAudio: { default: false },\n    isSnapping: { default: false },\n    isRecording: { default: false },\n    label: { default: \"\" }\n  },\n\n  init() {\n    this.el.object3D.visible = false; // Make invisible until model ready\n    this.lastUpdate = performance.now();\n    this.localSnapCount = 0; // Counter that is used to arrange photos/videos\n\n    this.showCameraViewfinder = !isMobileVR;\n\n    this.renderTarget = new THREE.WebGLRenderTarget(RENDER_WIDTH, RENDER_HEIGHT, {\n      format: THREE.RGBAFormat,\n      minFilter: THREE.LinearFilter,\n      magFilter: THREE.NearestFilter,\n      encoding: THREE.sRGBEncoding,\n      depth: false,\n      stencil: false\n    });\n\n    this.camera = new THREE.PerspectiveCamera(50, RENDER_WIDTH / RENDER_HEIGHT, 0.1, 30000);\n    this.camera.rotation.set(0, Math.PI, 0);\n    this.camera.position.set(0, 0, 0.05);\n    this.camera.matrixNeedsUpdate = true;\n    this.el.setObject3D(\"camera\", this.camera);\n\n    const material = new THREE.MeshBasicMaterial({\n      map: this.renderTarget.texture\n    });\n\n    // Bit of a hack here to only update the renderTarget when the screens are in view\n    material.map.isVideoTexture = true;\n    material.map.update = () => {\n      if (this.showCameraViewfinder) {\n        this.viewfinderInViewThisFrame = true;\n      }\n    };\n\n    this.el.sceneEl.addEventListener(\"stateadded\", () => this.updateUI());\n    this.el.sceneEl.addEventListener(\"stateremoved\", () => this.updateUI());\n\n    cameraModelPromise.then(model => {\n      const mesh = cloneObject3D(model.scene);\n      mesh.scale.set(2, 2, 2);\n      mesh.matrixNeedsUpdate = true;\n      this.el.setObject3D(\"mesh\", mesh);\n\n      this.el.object3D.visible = true;\n      this.el.object3D.scale.set(0.5, 0.5, 0.5);\n      this.el.object3D.matrixNeedsUpdate = true;\n\n      const obj = this.el.object3D;\n\n      const step = (function() {\n        const lastValue = {};\n        return function(anim) {\n          const value = anim.animatables[0].target;\n\n          value.x = Math.max(Number.MIN_VALUE, value.x);\n          value.y = Math.max(Number.MIN_VALUE, value.y);\n          value.z = Math.max(Number.MIN_VALUE, value.z);\n\n          // For animation timeline.\n          if (value.x === lastValue.x && value.y === lastValue.y && value.z === lastValue.z) {\n            return;\n          }\n\n          lastValue.x = value.x;\n          lastValue.y = value.y;\n          lastValue.z = value.z;\n\n          obj.scale.set(value.x, value.y, value.z);\n          obj.matrixNeedsUpdate = true;\n        };\n      })();\n\n      const config = {\n        duration: 200,\n        easing: \"easeOutQuad\",\n        elasticity: 400,\n        loop: 0,\n        round: false,\n        x: 1,\n        y: 1,\n        z: 1,\n        targets: [{ x: 0.5, y: 0.5, z: 0.5 }],\n        update: anim => step(anim),\n        complete: anim => step(anim)\n      };\n\n      anime(config);\n\n      const width = 0.28;\n      const geometry = new THREE.PlaneBufferGeometry(width, width / this.camera.aspect);\n\n      const environmentMapComponent = this.el.sceneEl.components[\"environment-map\"];\n      if (environmentMapComponent) {\n        environmentMapComponent.applyEnvironmentMap(this.el.object3D);\n      }\n\n      this.screen = new THREE.Mesh(geometry, material);\n      this.screen.rotation.set(0, Math.PI, 0);\n      this.screen.position.set(0, 0, -0.042);\n      this.screen.matrixNeedsUpdate = true;\n      this.el.setObject3D(\"screen\", this.screen);\n\n      this.selfieScreen = new THREE.Mesh(geometry, material);\n      this.selfieScreen.position.set(0, 0.4, 0);\n      this.selfieScreen.scale.set(-2, 2, 2);\n      this.selfieScreen.matrixNeedsUpdate = true;\n      this.el.setObject3D(\"selfieScreen\", this.selfieScreen);\n\n      this.label = this.el.querySelector(\".label\");\n      this.labelActionBackground = this.el.querySelector(\".label-action-background\");\n      this.labelBackground = this.el.querySelector(\".label-background\");\n      this.durationLabel = this.el.querySelector(\".duration\");\n\n      this.recordIcon = this.el.querySelector(\".record-icon\");\n      this.recordAlphaIcon = this.el.querySelector(\".record-alpha-icon\");\n\n      this.label.object3D.visible = false;\n      this.durationLabel.object3D.visible = false;\n\n      this.snapMenu = this.el.querySelector(\".camera-snap-menu\");\n      this.snapButton = this.el.querySelector(\".snap-button\");\n      this.recordButton = this.el.querySelector(\".record-button\");\n\n      this.cancelButton = this.el.querySelector(\".cancel-button\");\n      this.nextDurationButton = this.el.querySelector(\".next-duration\");\n      this.prevDurationButton = this.el.querySelector(\".prev-duration\");\n      this.snapButton.object3D.addEventListener(\"interact\", () => this.snapClicked(true));\n      this.recordButton.object3D.addEventListener(\"interact\", () => this.snapClicked(false));\n      this.cancelButton.object3D.addEventListener(\"interact\", () => this.cancelSnapping());\n      this.nextDurationButton.object3D.addEventListener(\"interact\", () => this.changeDuration(1));\n      this.prevDurationButton.object3D.addEventListener(\"interact\", () => this.changeDuration(-1));\n      this.stopButton = this.el.querySelector(\".stop-button\");\n      this.stopButton.object3D.addEventListener(\"interact\", () => this.stopRecording());\n      this.captureAudioButton = this.el.querySelector(\".capture-audio\");\n      this.captureAudioIcon = this.el.querySelector(\".capture-audio-icon\");\n      this.captureAudioButton.object3D.addEventListener(\"interact\", () =>\n        this.el.setAttribute(\"camera-tool\", \"captureAudio\", !this.data.captureAudio)\n      );\n\n      this.updateUI();\n\n      this.updateRenderTargetNextTick = true;\n\n      this.cameraSystem = this.el.sceneEl.systems[\"camera-tools\"];\n      this.cameraSystem.register(this.el);\n\n      waitForDOMContentLoaded().then(() => {\n        this.playerCamera = document.getElementById(\"viewing-camera\").getObject3D(\"camera\");\n      });\n    });\n  },\n\n  remove() {\n    this.cameraSystem.deregister(this.el);\n    this.el.sceneEl.emit(\"camera_removed\");\n    this.stopRecording();\n  },\n\n  updateViewfinder() {\n    this.updateRenderTargetNextTick = true;\n  },\n\n  changeDuration(delta) {\n    const idx = CAPTURE_DURATIONS.findIndex(d => this.data.captureDuration == d);\n    const newIdx = idx === 0 && delta === -1 ? CAPTURE_DURATIONS.length - 1 : (idx + delta) % CAPTURE_DURATIONS.length;\n    this.el.setAttribute(\"camera-tool\", \"captureDuration\", CAPTURE_DURATIONS[newIdx]);\n  },\n\n  focus(el, track) {\n    if (track) {\n      this.trackTarget = el;\n    } else {\n      this.trackTarget = null;\n    }\n\n    this.lookAt(el);\n  },\n\n  lookAt: (function() {\n    const targetPos = new THREE.Vector3();\n    return function(el) {\n      targetPos.setFromMatrixPosition(el.object3D.matrixWorld);\n      this.el.object3D.lookAt(targetPos);\n      this.el.object3D.matrixNeedsUpdate = true;\n    };\n  })(),\n\n  snapClicked(isPhoto) {\n    if (this.data.isSnapping) return;\n    if (!NAF.utils.isMine(this.el) && !NAF.utils.takeOwnership(this.el)) return;\n\n    this.el.setAttribute(\"camera-tool\", \"isSnapping\", true);\n    this.el.sceneEl.systems[\"hubs-systems\"].soundEffectsSystem.playSoundOneShot(SOUND_CAMERA_TOOL_COUNTDOWN);\n\n    this.snapCountdown = COUNTDOWN_DURATION;\n    this.el.setAttribute(\"camera-tool\", \"label\", `${this.snapCountdown}`);\n\n    this.countdownInterval = setInterval(async () => {\n      if (!NAF.utils.isMine(this.el) && !NAF.utils.takeOwnership(this.el)) {\n        clearInterval(this.countdownInterval);\n        this.countdownInterval = null;\n        return;\n      }\n\n      this.snapCountdown--;\n\n      if (this.snapCountdown === 0) {\n        clearInterval(this.countdownInterval);\n        this.countdownInterval = null;\n\n        if (isPhoto) {\n          this.el.setAttribute(\"camera-tool\", { label: \"\", isSnapping: false });\n          this.takeSnapshotNextTick = true;\n        } else {\n          this.beginRecording(this.data.captureDuration);\n        }\n      } else {\n        this.el.sceneEl.systems[\"hubs-systems\"].soundEffectsSystem.playSoundOneShot(SOUND_CAMERA_TOOL_COUNTDOWN);\n        this.el.setAttribute(\"camera-tool\", \"label\", `${this.snapCountdown}`);\n      }\n    }, 1000);\n  },\n\n  cancelSnapping() {\n    clearInterval(this.countdownInterval);\n    this.stopRecording(true);\n    this.updateUI();\n  },\n\n  update() {\n    this.updateUI();\n  },\n\n  updateUI() {\n    if (!this.label) return;\n\n    const label = this.data.label;\n    const isFrozen = this.el.sceneEl.is(\"frozen\");\n    const hasDuration = this.data.captureDuration !== Infinity;\n\n    const isRecordingUnbound = !hasDuration && this.data.isRecording && this.videoRecorder;\n    this.label.object3D.visible = !!label && !isRecordingUnbound;\n    const showActionLabelBackground = this.label.object3D.visible && this.data.isRecording && !isRecordingUnbound;\n\n    if (label) {\n      this.label.setAttribute(\"text\", { value: label, color: showActionLabelBackground ? \"#fafafa\" : \"#ff3464\" });\n    }\n\n    this.labelActionBackground.object3D.visible = showActionLabelBackground;\n    this.labelBackground.object3D.visible = this.label.object3D.visible && !showActionLabelBackground;\n\n    this.stopButton.object3D.visible = isRecordingUnbound;\n\n    if (hasDuration) {\n      this.durationLabel.setAttribute(\"text\", \"value\", `${this.data.captureDuration}`);\n    }\n\n    this.durationLabel.object3D.visible = hasDuration && !this.data.isSnapping && !isFrozen && allowVideo;\n    this.recordIcon.object3D.visible = !hasDuration && !isFrozen && allowVideo;\n    this.recordAlphaIcon.object3D.visible = hasDuration && !isFrozen && allowVideo;\n    this.snapButton.object3D.visible = !this.data.isSnapping && !isFrozen;\n    this.recordButton.object3D.visible = !this.data.isSnapping && !isFrozen && allowVideo;\n    this.cancelButton.object3D.visible = this.data.isSnapping && !isFrozen;\n    this.prevDurationButton.object3D.visible = this.nextDurationButton.object3D.visible =\n      !this.data.isSnapping && allowVideo && !isFrozen && allowVideo;\n\n    this.captureAudioIcon.setAttribute(\"icon-button\", \"active\", this.data.captureAudio);\n  },\n\n  async beginRecording(duration) {\n    if (!this.videoContext) {\n      this.videoCanvas = document.createElement(\"canvas\");\n      this.videoCanvas.width = CAPTURE_WIDTH;\n      this.videoCanvas.height = CAPTURE_HEIGHT;\n      this.videoContext = this.videoCanvas.getContext(\"2d\");\n      this.videoImageData = this.videoContext.createImageData(CAPTURE_WIDTH, CAPTURE_HEIGHT);\n      this.videoPixels = new Uint8Array(CAPTURE_WIDTH * CAPTURE_HEIGHT * 4);\n      this.videoImageData.data.set(this.videoPixels);\n    }\n\n    const stream = new MediaStream();\n    const track = this.videoCanvas.captureStream(VIDEO_FPS).getVideoTracks()[0];\n\n    // HACK: FF 73+ seems to fail to decode videos with no audio track, so we always include a silent track.\n    // Note that chrome won't generate the video without some data flowing to the track, hence the oscillator.\n    const attachBlankAudio = () => {\n      const context = THREE.AudioContext.getContext();\n      const oscillator = context.createOscillator();\n      const gain = context.createGain();\n      const destination = context.createMediaStreamDestination();\n      gain.gain.setValueAtTime(0.0001, context.currentTime);\n      oscillator.connect(destination);\n      gain.connect(destination);\n      stream.addTrack(destination.stream.getAudioTracks()[0]);\n    };\n\n    if (this.data.captureAudio) {\n      const selfAudio = await NAF.connection.adapter.getMediaStream(NAF.clientId, \"audio\");\n\n      // NOTE: if we don't have a self audio track, we can end up generating an empty video (browser bug?)\n      // if no audio comes through on the listener source. (Eg the room is otherwise silent.)\n      // So for now, if we don't have a track, just disable audio capture.\n      if (selfAudio && selfAudio.getAudioTracks().length > 0) {\n        const context = THREE.AudioContext.getContext();\n        const destination = context.createMediaStreamDestination();\n\n        const listener = this.el.sceneEl.audioListener;\n        if (listener) {\n          // NOTE audio is not captured from camera vantage point for now.\n          listener.getInput().connect(destination);\n        }\n        context.createMediaStreamSource(selfAudio).connect(destination);\n\n        const audio = destination.stream.getAudioTracks()[0];\n        stream.addTrack(audio);\n      } else {\n        attachBlankAudio();\n      }\n    } else {\n      attachBlankAudio();\n    }\n\n    stream.addTrack(track);\n    this.videoRecorder = new MediaRecorder(stream, { mimeType: videoMimeType });\n    const chunks = [];\n    const recordingStartTime = performance.now();\n\n    this.videoRecorder.ondataavailable = e => chunks.push(e.data);\n\n    this.updateRenderTargetNextTick = true;\n\n    this.videoRecorder.start();\n    this.el.setAttribute(\"camera-tool\", { isRecording: true, label: \" \" });\n    this.el.sceneEl.emit(\"action_camera_recording_started\");\n\n    if (duration !== Infinity) {\n      this.videoCountdown = this.data.captureDuration;\n      this.el.setAttribute(\"camera-tool\", \"label\", `${this.videoCountdown}`);\n\n      this.videoCountdownInterval = setInterval(() => {\n        this.videoCountdown--;\n\n        if (this.videoCountdown === 0) {\n          this.stopRecording();\n          this.videoCountdownInterval = null;\n        } else {\n          this.el.setAttribute(\"camera-tool\", \"label\", `${this.videoCountdown}`);\n        }\n      }, 1000);\n    }\n\n    this.videoRecorder._free = () => (chunks.length = 0); // Used for cancelling\n    this.videoRecorder.onstop = async () => {\n      this.el.sceneEl.emit(\"action_camera_recording_ended\");\n\n      if (chunks.length === 0) return;\n      const mimeType = chunks[0].type;\n      const recordingDuration = performance.now() - recordingStartTime;\n      const blob = new Blob(chunks, { type: mimeType });\n\n      chunks.length = 0;\n\n      const { entity, orientation } = addAndArrangeMedia(\n        this.el,\n        new File([blob], \"capture\", { type: mimeType.split(\";\")[0] }), // Drop codec\n        \"video-camera\",\n        this.localSnapCount,\n        !!this.playerIsBehindCamera\n      );\n\n      entity.addEventListener(\n        \"video-loaded\",\n        () => {\n          // If we were recording audio, then pause the video immediately after starting.\n          //\n          // Or, to limit the # of concurrent videos playing, if it was a short clip, let it loop\n          // a few times and then pause it.\n          if (this.data.captureAudio || recordingDuration <= MAX_DURATION_TO_LIMIT_LOOPS * 1000) {\n            setTimeout(() => {\n              if (!NAF.utils.isMine(entity) && !NAF.utils.takeOwnership(entity)) return;\n              entity.components[\"media-video\"].tryUpdateVideoPlaybackState(true);\n            }, this.data.captureAudio ? 0 : recordingDuration * VIDEO_LOOPS + 100);\n          }\n        },\n        { once: true }\n      );\n\n      this.localSnapCount++;\n\n      orientation.then(() => this.el.sceneEl.emit(\"object_spawned\", { objectType: ObjectTypes.CAMERA }));\n    };\n  },\n\n  stopRecording(cancel) {\n    if (this.videoRecorder) {\n      if (cancel) {\n        this.videoRecorder.onstop = () => {};\n        this.videoRecorder._free();\n      }\n\n      this.videoRecorder.stop();\n      this.videoRecorder = null;\n\n      if (!cancel) {\n        this.el.sceneEl.systems[\"hubs-systems\"].soundEffectsSystem.playSoundOneShot(SOUND_CAMERA_TOOL_TOOK_SNAPSHOT);\n      }\n    }\n    clearInterval(this.videoCountdownInterval);\n\n    this.videoCountdownInterval = null;\n    this.el.setAttribute(\"camera-tool\", \"label\", \"\");\n    this.el.setAttribute(\"camera-tool\", { isRecording: false, isSnapping: false });\n  },\n\n  tick() {\n    const interaction = AFRAME.scenes[0].systems.interaction;\n    const userinput = AFRAME.scenes[0].systems.userinput;\n    const heldLeftHand = interaction.state.leftHand.held === this.el;\n    const heldRightHand = interaction.state.rightHand.held === this.el;\n    const heldRightRemote = interaction.state.rightRemote.held === this.el;\n\n    const heldThisFrame =\n      (heldLeftHand && userinput.get(interaction.options.leftHand.grabPath)) ||\n      (heldRightHand && userinput.get(interaction.options.rightHand.grabPath)) ||\n      (heldRightRemote && userinput.get(interaction.options.rightRemote.grabPath));\n\n    const isHolding = heldLeftHand || heldRightHand || heldRightRemote;\n\n    this.updateSnapMenuOrientation();\n\n    if (heldThisFrame) {\n      this.localSnapCount = 0;\n    }\n\n    this.showCameraViewfinder = isHolding || !isMobileVR || this.data.isSnapping || this.videoRecorder;\n\n    if (this.screen && this.selfieScreen) {\n      this.screen.visible = this.selfieScreen.visible = !!this.showCameraViewfinder;\n    }\n\n    // Always draw held, snapping, or recording camera viewfinders with a decent framerate\n    if (\n      (isHolding || this.data.isSnapping || this.videoRecorder) &&\n      performance.now() - this.lastUpdate >= 1000 / (this.videoRecorder ? VIDEO_FPS : VIEWFINDER_FPS)\n    ) {\n      this.updateRenderTargetNextTick = true;\n    }\n\n    const isHoldingTrigger = this.isHoldingSnapshotTrigger();\n    const isPermittedToUse = window.APP.hubChannel.can(\"spawn_camera\");\n\n    if (isPermittedToUse) {\n      // If the user lets go of the trigger before 500ms, take a picture, otherwise record until they let go.\n      if (isHoldingTrigger && !this.data.isSnapping && !this.snapTriggerTimeout) {\n        this.snapTriggerTimeout = setTimeout(() => {\n          if (this.isHoldingSnapshotTrigger()) {\n            this.el.setAttribute(\"camera-tool\", \"isSnapping\", true);\n            this.beginRecording(Infinity);\n\n            const releaseInterval = setInterval(() => {\n              if (this.isHoldingSnapshotTrigger()) return;\n              this.stopRecording();\n              clearInterval(releaseInterval);\n            }, 500);\n          }\n\n          this.snapTriggerTimeout = null;\n        }, 500);\n      } else if (!isHoldingTrigger && !this.data.isSnapping && this.snapTriggerTimeout) {\n        clearTimeout(this.snapTriggerTimeout);\n        this.snapTriggerTimeout = null;\n        this.takeSnapshotNextTick = true;\n      }\n    }\n  },\n\n  tock: (function() {\n    return function tock() {\n      const sceneEl = this.el.sceneEl;\n      const renderer = this.renderer || sceneEl.renderer;\n      const now = performance.now();\n      const playerHead = this.cameraSystem.playerHead;\n\n      // Perform lookAt in tock so it will re-orient after grabs, etc.\n      if (this.trackTarget) {\n        if (this.trackTarget.parentNode) {\n          this.lookAt(this.trackTarget);\n        } else {\n          this.trackTarget = null; // Target removed\n        }\n      }\n\n      if (!this.playerHud) {\n        const hudEl = document.getElementById(\"player-hud\");\n        this.playerHud = hudEl && hudEl.object3D;\n      }\n\n      if (\n        this.takeSnapshotNextTick ||\n        (this.updateRenderTargetNextTick && (this.viewfinderInViewThisFrame || this.videoRecorder))\n      ) {\n        if (playerHead) {\n          // We want to scale our own head in between frames now that we're taking a video/photo.\n          let scale = 1;\n          // TODO: The local-audio-analyser has the non-networked media stream, which is active\n          // even while the user is muted. This should be looking at a different analyser that\n          // has the networked media stream instead.\n          const analyser = this.el.sceneEl.systems[\"local-audio-analyser\"];\n\n          if (analyser && playerHead.el.components[\"scale-audio-feedback\"]) {\n            scale = getAudioFeedbackScale(this.el.object3D, playerHead, 1, 2, analyser.volume);\n          }\n\n          playerHead.visible = true;\n          playerHead.scale.set(scale, scale, scale);\n          playerHead.updateMatrices(true, true);\n          playerHead.updateMatrixWorld(true, true);\n        }\n\n        let playerHudWasVisible = false;\n\n        if (this.playerHud) {\n          playerHudWasVisible = this.playerHud.visible;\n          this.playerHud.visible = false;\n          if (this.el.sceneEl.systems[\"hubs-systems\"]) {\n            for (const mesh of Object.values(this.el.sceneEl.systems[\"hubs-systems\"].spriteSystem.meshes)) {\n              mesh.visible = false;\n            }\n          }\n        }\n\n        const bubbleSystem = this.el.sceneEl.systems[\"personal-space-bubble\"];\n\n        if (bubbleSystem) {\n          for (let i = 0, l = bubbleSystem.invaders.length; i < l; i++) {\n            bubbleSystem.invaders[i].disable();\n          }\n        }\n\n        const tmpVRFlag = renderer.vr.enabled;\n        const tmpOnAfterRender = sceneEl.object3D.onAfterRender;\n        delete sceneEl.object3D.onAfterRender;\n        renderer.vr.enabled = false;\n\n        if (allowVideo && this.videoRecorder && !this.videoRenderTarget) {\n          // Create a separate render target for video becuase we need to flip and (sometimes) downscale it before\n          // encoding it to video.\n          this.videoRenderTarget = new THREE.WebGLRenderTarget(CAPTURE_WIDTH, CAPTURE_HEIGHT, {\n            format: THREE.RGBAFormat,\n            minFilter: THREE.LinearFilter,\n            magFilter: THREE.NearestFilter,\n            encoding: THREE.sRGBEncoding,\n            depth: false,\n            stencil: false\n          });\n\n          // Used to set up framebuffer in three.js as a side effect\n          renderer.setRenderTarget(this.videoRenderTarget);\n        }\n\n        renderer.setRenderTarget(this.renderTarget);\n        renderer.render(sceneEl.object3D, this.camera);\n        renderer.setRenderTarget(null);\n\n        renderer.vr.enabled = tmpVRFlag;\n        sceneEl.object3D.onAfterRender = tmpOnAfterRender;\n        if (playerHead) {\n          playerHead.visible = false;\n          playerHead.scale.set(0.00000001, 0.00000001, 0.00000001);\n          playerHead.updateMatrices(true, true);\n          playerHead.updateMatrixWorld(true, true);\n        }\n\n        if (this.playerHud) {\n          this.playerHud.visible = playerHudWasVisible;\n          if (this.el.sceneEl.systems[\"hubs-systems\"]) {\n            for (const mesh of Object.values(this.el.sceneEl.systems[\"hubs-systems\"].spriteSystem.meshes)) {\n              mesh.visible = true;\n            }\n          }\n        }\n\n        if (bubbleSystem) {\n          for (let i = 0, l = bubbleSystem.invaders.length; i < l; i++) {\n            bubbleSystem.invaders[i].enable();\n          }\n        }\n\n        this.lastUpdate = now;\n\n        if (this.videoRecorder) {\n          // This blit operation will (if necessary) scale/resample the view finder render target and, importantly,\n          // flip the texture on Y\n          blitFramebuffer(\n            renderer,\n            this.renderTarget,\n            0,\n            0,\n            RENDER_WIDTH,\n            RENDER_HEIGHT,\n            this.videoRenderTarget,\n            0,\n            CAPTURE_HEIGHT,\n            CAPTURE_WIDTH,\n            0\n          );\n          renderer.readRenderTargetPixels(\n            this.videoRenderTarget,\n            0,\n            0,\n            CAPTURE_WIDTH,\n            CAPTURE_HEIGHT,\n            this.videoPixels\n          );\n          this.videoImageData.data.set(this.videoPixels);\n          this.videoContext.putImageData(this.videoImageData, 0, 0);\n        }\n\n        this.updateRenderTargetNextTick = false;\n        this.viewfinderInViewThisFrame = false;\n      }\n\n      if (this.takeSnapshotNextTick) {\n        if (!this.snapPixels) {\n          this.snapPixels = new Uint8Array(RENDER_WIDTH * RENDER_HEIGHT * 4);\n        }\n        renderer.readRenderTargetPixels(this.renderTarget, 0, 0, RENDER_WIDTH, RENDER_HEIGHT, this.snapPixels);\n\n        pixelsToPNG(this.snapPixels, RENDER_WIDTH, RENDER_HEIGHT).then(file => {\n          const { orientation } = addAndArrangeMedia(\n            this.el,\n            file,\n            \"photo-camera\",\n            this.localSnapCount,\n            !!this.playerIsBehindCamera\n          );\n\n          orientation.then(() => {\n            this.el.sceneEl.emit(\"object_spawned\", { objectType: ObjectTypes.CAMERA });\n          });\n        });\n        sceneEl.systems[\"hubs-systems\"].soundEffectsSystem.playSoundOneShot(SOUND_CAMERA_TOOL_TOOK_SNAPSHOT);\n        this.takeSnapshotNextTick = false;\n        this.localSnapCount++;\n      }\n    };\n  })(),\n\n  isHoldingSnapshotTrigger: function() {\n    const interaction = AFRAME.scenes[0].systems.interaction;\n    const userinput = AFRAME.scenes[0].systems.userinput;\n    const heldLeftHand = interaction.state.leftHand.held === this.el;\n    const heldRightHand = interaction.state.rightHand.held === this.el;\n    const heldRightRemote = interaction.state.rightRemote.held === this.el;\n    const heldLeftRemote = interaction.state.leftRemote.held === this.el;\n\n    let grabberId;\n    if (heldRightHand) {\n      grabberId = \"player-right-controller\";\n    } else if (heldLeftHand) {\n      grabberId = \"player-left-controller\";\n    } else if (heldRightRemote) {\n      grabberId = \"right-cursor\";\n    } else if (heldLeftRemote) {\n      grabberId = \"left-cursor\";\n    }\n\n    if (grabberId) {\n      const grabberPaths = pathsMap[grabberId];\n      if (userinput.get(grabberPaths.takeSnapshot)) {\n        return true;\n      }\n    }\n\n    return !!userinput.get(paths.actions.takeSnapshot);\n  },\n\n  updateSnapMenuOrientation: (function() {\n    const playerWorld = new THREE.Vector3();\n    const cameraWorld = new THREE.Vector3();\n    const playerToCamera = new THREE.Vector3();\n    const cameraForwardPoint = new THREE.Vector3();\n    const cameraForwardWorld = new THREE.Vector3();\n    return function() {\n      if (!this.playerCamera) return;\n      this.el.object3D.getWorldPosition(cameraWorld);\n      this.playerCamera.getWorldPosition(playerWorld);\n      playerToCamera.subVectors(playerWorld, cameraWorld);\n      cameraForwardPoint.set(0, 0, 1);\n      this.el.object3D.localToWorld(cameraForwardPoint);\n      cameraForwardWorld.subVectors(cameraForwardPoint, cameraWorld);\n      cameraForwardWorld.normalize();\n      playerToCamera.normalize();\n\n      const playerIsBehindCamera = cameraForwardWorld.dot(playerToCamera) < 0;\n\n      if (this.playerIsBehindCamera !== playerIsBehindCamera) {\n        this.playerIsBehindCamera = playerIsBehindCamera;\n        this.snapMenu.object3D.rotation.set(0, this.playerIsBehindCamera ? Math.PI : 0, 0);\n        this.snapMenu.object3D.matrixNeedsUpdate = true;\n      }\n    };\n  })()\n});\n","import { cloneMedia } from \"../utils/media-utils\";\nimport { guessContentType } from \"../utils/media-url-utils\";\n\nAFRAME.registerComponent(\"clone-media-button\", {\n  init() {\n    this.updateSrc = () => {\n      if (!this.targetEl.parentNode) return; // If removed\n      const src = (this.src = this.targetEl.components[\"media-loader\"].data.src);\n      const visible = src && guessContentType(src) !== \"video/vnd.hubs-webrtc\";\n      this.el.object3D.visible = !!visible;\n    };\n\n    NAF.utils.getNetworkedEntity(this.el).then(networkedEl => {\n      this.targetEl = networkedEl;\n      this.targetEl.addEventListener(\"media_resolved\", this.updateSrc, { once: true });\n      this.updateSrc();\n    });\n\n    this.onClick = () => {\n      const { entity } = cloneMedia(this.targetEl, \"#interactable-media\", this.src);\n\n      entity.object3D.scale.copy(this.targetEl.object3D.scale);\n      entity.object3D.matrixNeedsUpdate = true;\n\n      entity.setAttribute(\"offset-relative-to\", {\n        target: \"#avatar-pov-node\",\n        offset: { x: 0, y: 0, z: -1.5 * this.targetEl.object3D.scale.z }\n      });\n    };\n  },\n\n  play() {\n    this.el.object3D.addEventListener(\"interact\", this.onClick);\n  },\n\n  pause() {\n    this.el.object3D.removeEventListener(\"interact\", this.onClick);\n  }\n});\n","import { willRequireUserGesture, showFullScreenIfAvailable } from \"./fullscreen\";\nimport screenfull from \"screenfull\";\n\nlet _isIn2DInterstitial = false;\nlet _exitAction = null;\n\nconst isMobileVR = AFRAME.utils.device.isMobileVR();\n\nconst getUserGesture = () => {\n  return new Promise(resolve => {\n    const scene = document.querySelector(\"a-scene\");\n    scene.addEventListener(\"2d-interstitial-gesture-complete\", resolve, { once: true });\n    scene.emit(\"2d-interstitial-gesture-required\");\n  });\n};\n\nexport async function handleExitTo2DInterstitial(isLower, exitAction, nonFullscreen) {\n  const scene = document.querySelector(\"a-scene\");\n  if (!scene.is(\"vr-mode\")) {\n    if (isMobileVR && willRequireUserGesture()) {\n      await getUserGesture();\n      await showFullScreenIfAvailable();\n    }\n\n    return;\n  }\n\n  _isIn2DInterstitial = true;\n  _exitAction = exitAction;\n\n  if (isMobileVR) {\n    await scene.exitVR();\n\n    if (!nonFullscreen) {\n      await getUserGesture();\n      await showFullScreenIfAvailable();\n    }\n  } else {\n    // Non-immersive browser, show notice\n    const vrNotice = document.querySelector(\".vr-notice\");\n    vrNotice.object3D.visible = true;\n    vrNotice.setAttribute(\"follow-in-fov\", {\n      angle: isLower ? 39 : -15\n    });\n  }\n}\n\nexport async function exit2DInterstitialAndEnterVR(force) {\n  if (!force && !_isIn2DInterstitial) {\n    return;\n  }\n\n  _isIn2DInterstitial = false;\n\n  document.querySelector(\".vr-notice\").object3D.visible = false;\n\n  const scene = document.querySelector(\"a-scene\");\n\n  if (isMobileVR) {\n    if (screenfull.isFullscreen) {\n      await screenfull.exit();\n      await getUserGesture();\n      await scene.enterVR();\n    } else {\n      await scene.enterVR();\n    }\n  } else {\n    if (!scene.is(\"vr-mode\")) {\n      await scene.enterVR();\n    }\n  }\n}\n\nexport function isIn2DInterstitial() {\n  return _isIn2DInterstitial;\n}\n\nexport async function forceExitFrom2DInterstitial() {\n  if (!_isIn2DInterstitial) return;\n\n  if (_exitAction) {\n    _exitAction();\n    _exitAction = null;\n  }\n\n  await exit2DInterstitialAndEnterVR();\n}\n","import { isLocalHubsSceneUrl, isHubsRoomUrl, isLocalHubsAvatarUrl } from \"../utils/media-url-utils\";\nimport { guessContentType } from \"../utils/media-url-utils\";\nimport { handleExitTo2DInterstitial } from \"../utils/vr-interstitial\";\n\nAFRAME.registerComponent(\"open-media-button\", {\n  schema: {\n    onlyOpenLink: { type: \"boolean\" }\n  },\n  init() {\n    this.label = this.el.querySelector(\"[text]\");\n\n    this.updateSrc = async () => {\n      if (!this.targetEl.parentNode) return; // If removed\n      const src = (this.src = this.targetEl.components[\"media-loader\"].data.src);\n      const visible = src && guessContentType(src) !== \"video/vnd.hubs-webrtc\";\n      const mayChangeScene = this.el.sceneEl.systems.permissions.canOrWillIfCreator(\"update_hub\");\n\n      this.el.object3D.visible = !!visible;\n\n      if (visible) {\n        let label = \"open link\";\n        if (!this.data.onlyOpenLink) {\n          if (await isLocalHubsAvatarUrl(src)) {\n            label = \"use avatar\";\n          } else if ((await isLocalHubsSceneUrl(src)) && mayChangeScene) {\n            label = \"use scene\";\n          } else if (await isHubsRoomUrl(src)) {\n            label = \"visit room\";\n          }\n        }\n        this.label.setAttribute(\"text\", \"value\", label);\n      }\n    };\n\n    this.onClick = async () => {\n      const mayChangeScene = this.el.sceneEl.systems.permissions.canOrWillIfCreator(\"update_hub\");\n\n      const exitImmersive = async () => await handleExitTo2DInterstitial(false, () => {}, true);\n\n      if (this.data.onlyOpenLink) {\n        await exitImmersive();\n        window.open(this.src);\n      } else if (await isLocalHubsAvatarUrl(this.src)) {\n        const avatarId = new URL(this.src).pathname.split(\"/\").pop();\n        window.APP.store.update({ profile: { avatarId } });\n        this.el.sceneEl.emit(\"avatar_updated\");\n      } else if ((await isLocalHubsSceneUrl(this.src)) && mayChangeScene) {\n        this.el.sceneEl.emit(\"scene_media_selected\", this.src);\n      } else if (await isHubsRoomUrl(this.src)) {\n        await exitImmersive();\n        location.href = this.src;\n      } else {\n        await exitImmersive();\n        window.open(this.src);\n      }\n    };\n\n    NAF.utils.getNetworkedEntity(this.el).then(networkedEl => {\n      this.targetEl = networkedEl;\n      this.targetEl.addEventListener(\"media_resolved\", this.updateSrc, { once: true });\n      this.updateSrc();\n    });\n  },\n\n  play() {\n    this.el.object3D.addEventListener(\"interact\", this.onClick);\n  },\n\n  pause() {\n    this.el.object3D.removeEventListener(\"interact\", this.onClick);\n  }\n});\n","import { SOUND_MEDIA_LOADING } from \"../systems/sound-effects-system\";\n\nAFRAME.registerComponent(\"refresh-media-button\", {\n  init() {\n    this.updateVisibility = this.updateVisibility.bind(this);\n\n    this.onClick = async () => {\n      const sfx = this.el.sceneEl.systems[\"hubs-systems\"].soundEffectsSystem;\n\n      if (this.targetEl) {\n        this.targetEl.components[\"media-loader\"].refresh();\n\n        // Hide button + do the sound effect here, so only the person who clicked hears it, not everyone.\n        this.el.object3D.visible = false;\n        const loadingSoundEffect = sfx.playPositionalSoundFollowing(SOUND_MEDIA_LOADING, this.targetEl.object3D, true);\n\n        this.targetEl.addEventListener(\n          \"media_refreshed\",\n          () => {\n            sfx.stopPositionalAudio(loadingSoundEffect);\n            this.el.object3D.visible = true;\n            this.updateVisibility();\n          },\n          { once: true }\n        );\n      }\n    };\n\n    NAF.utils.getNetworkedEntity(this.el).then(networkedEl => {\n      this.targetEl = networkedEl;\n\n      window.APP.hubChannel.addEventListener(\"permissions_updated\", this.updateVisibility);\n\n      if (this.targetEl) {\n        this.targetEl.addEventListener(\"pinned\", this.updateVisibility);\n        this.targetEl.addEventListener(\"unpinned\", this.updateVisibility);\n      }\n\n      this.updateVisibility();\n    });\n  },\n\n  updateVisibility() {\n    if (!this.targetEl) return;\n\n    const isPinned = this.targetEl.components.pinnable && this.targetEl.components.pinnable.data.pinned;\n    this.el.object3D.visible =\n      (!isPinned && window.APP.hubChannel.can(\"spawn_and_move_media\")) || window.APP.hubChannel.can(\"pin_objects\");\n  },\n\n  play() {\n    this.el.object3D.addEventListener(\"interact\", this.onClick);\n  },\n\n  pause() {\n    this.el.object3D.removeEventListener(\"interact\", this.onClick);\n  },\n\n  remove() {\n    window.APP.hubChannel.removeEventListener(\"permissions_updated\", this.updateVisibility);\n\n    if (this.targetEl) {\n      this.targetEl.removeEventListener(\"pinned\", this.updateVisibility);\n      this.targetEl.removeEventListener(\"unpinned\", this.updateVisibility);\n    }\n  }\n});\n","import configs from \"../utils/configs\";\n\nAFRAME.registerComponent(\"tweet-media-button\", {\n  init() {\n    NAF.utils\n      .getNetworkedEntity(this.el)\n      .then(networkedEl => {\n        this.targetEl = networkedEl;\n      })\n      .catch(() => {\n        // Non-networked, do not handle for now, and hide button.\n        this.el.object3D.visible = false;\n      });\n\n    this.onClick = () => {\n      const hasDiscordBridges = window.APP.hubChannel && window.APP.hubChannel.discordBridges().length > 0;\n\n      const text = !hasDiscordBridges\n        ? `Taken in ${location.hostname} - ` +\n          `join me now at ${configs.SHORTLINK_DOMAIN}/${window.APP.hubChannel.hubId}! `\n        : `Taken in ${location.hostname} `;\n\n      const { src, contentSubtype } = this.targetEl.components[\"media-loader\"].data;\n      this.el.sceneEl.emit(\"action_media_tweet\", { url: src, contentSubtype, text, el: this.targetEl });\n    };\n  },\n\n  play() {\n    if (!configs.AVAILABLE_INTEGRATIONS.twitter) {\n      this.el.object3D.visible = false;\n      return;\n    }\n    this.el.object3D.addEventListener(\"interact\", this.onClick);\n  },\n\n  pause() {\n    this.el.object3D.removeEventListener(\"interact\", this.onClick);\n  }\n});\n","import { idForAvatarUrl } from \"../utils/media-url-utils\";\nimport { fetchAvatar, remixAvatar } from \"../utils/avatar-utils\";\n\nconst REMIX_LABEL = \"copy avatar\";\nAFRAME.registerComponent(\"remix-avatar-button\", {\n  init() {\n    this.label = this.el.querySelector(\"[text]\");\n    this.label.setAttribute(\"text\", \"value\", REMIX_LABEL);\n    this.updateSrc = async () => {\n      this.src = this.targetEl.components[\"media-loader\"].data.src;\n      try {\n        this.avatar = await fetchAvatar(idForAvatarUrl(this.src));\n        this.el.object3D.visible = this.avatar && this.avatar.allow_remixing && this.avatar.type === \"avatar_listing\";\n      } catch (e) {\n        console.error(e);\n        this.el.object3D.visible = false;\n      }\n    };\n\n    this.onClick = async () => {\n      if (this.copying || !this.avatar) return;\n\n      try {\n        this.copying = true;\n        this.label.setAttribute(\"text\", \"value\", \"Copying...\");\n\n        await remixAvatar(this.avatar.avatar_id, this.avatar.name);\n\n        this.label.setAttribute(\"text\", \"value\", \"Copied!\");\n      } catch (e) {\n        this.label.setAttribute(\"text\", \"value\", \"Error\");\n      }\n\n      setTimeout(() => {\n        this.label.setAttribute(\"text\", \"value\", REMIX_LABEL);\n        this.copying = false;\n      }, 2000);\n    };\n\n    NAF.utils.getNetworkedEntity(this.el).then(networkedEl => {\n      this.targetEl = networkedEl;\n      this.targetEl.addEventListener(\"media_resolved\", this.updateSrc, { once: true });\n      this.updateSrc();\n    });\n  },\n\n  play() {\n    this.el.object3D.addEventListener(\"interact\", this.onClick);\n  },\n\n  pause() {\n    this.el.object3D.removeEventListener(\"interact\", this.onClick);\n  }\n});\n","import { paths } from \"../systems/userinput/paths\";\nimport { waitForDOMContentLoaded } from \"../utils/async-utils\";\nconst COLLISION_LAYERS = require(\"../constants\").COLLISION_LAYERS;\nconst AMMO_BODY_ATTRIBUTES = { type: \"kinematic\", collisionFilterMask: COLLISION_LAYERS.HANDS };\n\nexport const TRANSFORM_MODE = {\n  AXIS: \"axis\",\n  PUPPET: \"puppet\",\n  CURSOR: \"cursor\",\n  ALIGN: \"align\",\n  SCALE: \"scale\"\n};\n\nconst STEP_LENGTH = Math.PI / 10;\nconst CAMERA_WORLD_QUATERNION = new THREE.Quaternion();\nconst CAMERA_WORLD_POSITION = new THREE.Vector3();\nconst TARGET_WORLD_QUATERNION = new THREE.Quaternion();\nconst v = new THREE.Vector3();\nconst v2 = new THREE.Vector3();\nconst q = new THREE.Quaternion();\nconst q2 = new THREE.Quaternion();\n\nconst eps = 0.001;\nfunction qAlmostEquals(a, b) {\n  return (\n    Math.abs(a.x - b.x) < eps && Math.abs(a.y - b.y) < eps && Math.abs(a.z - b.z) < eps && Math.abs(a.w - b.w) < eps\n  );\n}\n\nAFRAME.registerComponent(\"transform-button\", {\n  schema: {\n    mode: {\n      type: \"string\",\n      oneof: Object.values(TRANSFORM_MODE),\n      default: TRANSFORM_MODE.CURSOR\n    },\n    axis: { type: \"vec3\", default: null }\n  },\n  init() {\n    NAF.utils.getNetworkedEntity(this.el).then(networkedEl => {\n      this.targetEl = networkedEl;\n    });\n    let leftHand, rightHand;\n\n    waitForDOMContentLoaded().then(() => {\n      leftHand = document.getElementById(\"player-left-controller\");\n      rightHand = document.getElementById(\"player-right-controller\");\n    });\n    this.onGrabStart = e => {\n      if (!leftHand || !rightHand) return;\n\n      if (!this.targetEl) {\n        return;\n      }\n      if (!NAF.utils.isMine(this.targetEl) && !NAF.utils.takeOwnership(this.targetEl)) {\n        return;\n      }\n      if (this.targetEl.body) {\n        this.targetEl.setAttribute(\"body-helper\", AMMO_BODY_ATTRIBUTES);\n      }\n      this.transformSystem = this.transformSystem || AFRAME.scenes[0].systems[\"transform-selected-object\"];\n      this.transformSystem.startTransform(\n        this.targetEl.object3D,\n        e.object3D.el.id === \"right-cursor\"\n          ? rightHand.object3D\n          : e.object3D.el.id === \"left-cursor\"\n            ? leftHand.object3D\n            : e.object3D,\n        this.data\n      );\n    };\n    this.onGrabEnd = () => {\n      this.transformSystem = this.transformSystem || AFRAME.scenes[0].systems[\"transform-selected-object\"];\n      this.transformSystem.stopTransform();\n    };\n  },\n  play() {\n    this.el.object3D.addEventListener(\"interact\", this.onGrabStart);\n    this.el.object3D.addEventListener(\"holdable-button-down\", this.onGrabStart);\n    this.el.object3D.addEventListener(\"holdable-button-up\", this.onGrabEnd);\n  },\n  pause() {\n    this.el.object3D.removeEventListener(\"interact\", this.onGrabStart);\n    this.el.object3D.removeEventListener(\"holdable-button-down\", this.onGrabStart);\n    this.el.object3D.removeEventListener(\"holdable-button-up\", this.onGrabEnd);\n  }\n});\n\nAFRAME.registerSystem(\"transform-selected-object\", {\n  init() {\n    this.target = null;\n    this.mode = null;\n    this.transforming = false;\n    this.axis = new THREE.Vector3();\n    this.store = window.APP.store;\n    this.startQ = new THREE.Quaternion();\n\n    this.dxStore = 0;\n    this.dxApplied = 0;\n    this.dyAll = 0;\n    this.dyStore = 0;\n    this.dyApplied = 0;\n    this.raycasters = {};\n\n    this.puppet = {\n      initialControllerOrientation: new THREE.Quaternion(),\n      initialControllerOrientation_inverse: new THREE.Quaternion(),\n      initialObjectOrientation: new THREE.Quaternion(),\n      currentControllerOrientation: new THREE.Quaternion(),\n      controllerOrientationDelta: new THREE.Quaternion()\n    };\n\n    this.planarInfo = {\n      plane: new THREE.Mesh(\n        new THREE.PlaneBufferGeometry(100000, 100000, 2, 2),\n        new THREE.MeshBasicMaterial({\n          visible: false,\n          wireframe: true,\n          side: THREE.DoubleSide,\n          transparent: true,\n          opacity: 0.3\n        })\n      ),\n      normal: new THREE.Vector3(),\n      intersections: [],\n      previousPointOnPlane: new THREE.Vector3(),\n      currentPointOnPlane: new THREE.Vector3(),\n      deltaOnPlane: new THREE.Vector3(),\n      finalProjectedVec: new THREE.Vector3()\n    };\n    this.el.object3D.add(this.planarInfo.plane);\n  },\n\n  stopTransform: (function() {\n    const q = new THREE.Quaternion();\n    const PI_AROUND_Y = new THREE.Quaternion(0, 1, 0, 0);\n    const pInv = new THREE.Quaternion();\n    return function stopTransform() {\n      this.transforming = false;\n      if (this.mode === TRANSFORM_MODE.CURSOR) {\n        this.target.getWorldQuaternion(q);\n        if (qAlmostEquals(q, this.startQ)) {\n          q.multiply(PI_AROUND_Y);\n          this.target.parent.getWorldQuaternion(pInv);\n          pInv.inverse();\n          this.target.quaternion.copy(pInv).multiply(q);\n          this.target.matrixNeedsUpdate = true;\n        }\n      }\n    };\n  })(),\n\n  startPlaneCasting() {\n    const { plane, intersections, previousPointOnPlane } = this.planarInfo;\n\n    this.el.camera.getWorldQuaternion(CAMERA_WORLD_QUATERNION);\n    plane.quaternion.copy(CAMERA_WORLD_QUATERNION);\n    this.target.getWorldPosition(plane.position);\n    plane.matrixNeedsUpdate = true;\n    plane.updateMatrixWorld(true);\n\n    intersections.length = 0;\n    this.raycasters.right =\n      this.raycasters.right ||\n      document.getElementById(\"right-cursor-controller\").components[\"cursor-controller\"].raycaster;\n    this.raycasters.left =\n      this.raycasters.left ||\n      document.getElementById(\"left-cursor-controller\").components[\"cursor-controller\"].raycaster;\n    const raycaster = this.hand.el.id === \"player-left-controller\" ? this.raycasters.left : this.raycasters.right;\n    const far = raycaster.far;\n    raycaster.far = 1000;\n    plane.raycast(raycaster, intersections);\n    raycaster.far = far;\n    this.transforming = !!intersections[0];\n    if (!this.transforming) {\n      return;\n    }\n\n    previousPointOnPlane.copy(intersections[0].point);\n\n    this.target.getWorldQuaternion(TARGET_WORLD_QUATERNION);\n\n    v.set(0, 0, -1).applyQuaternion(CAMERA_WORLD_QUATERNION);\n    v2.set(0, 0, -1).applyQuaternion(TARGET_WORLD_QUATERNION);\n    this.sign = v.dot(v2) > 0 ? 1 : -1;\n\n    v.set(0, 1, 0); //.applyQuaternion(this.CAMERA_WORLD_QUATERNION);\n    v2.set(0, 1, 0).applyQuaternion(TARGET_WORLD_QUATERNION);\n    this.sign2 = v.dot(v2) > 0 ? 1 : -1;\n\n    this.dyAll = 0;\n    this.dyStore = 0;\n    this.dyApplied = 0;\n    this.dxAll = 0;\n    this.dxStore = 0;\n    this.dxApplied = 0;\n  },\n\n  startTransform(target, hand, data) {\n    this.target = target;\n    this.hand = hand;\n    this.mode = data.mode;\n    this.transforming = true;\n\n    if (this.mode === TRANSFORM_MODE.ALIGN) {\n      this.store.update({ activity: { hasRecentered: true } });\n      return;\n    } else {\n      this.store.update({ activity: { hasRotated: true } });\n    }\n\n    if (this.mode === TRANSFORM_MODE.CURSOR) {\n      this.target.getWorldQuaternion(this.startQ);\n    }\n\n    if (this.mode === TRANSFORM_MODE.PUPPET) {\n      this.target.getWorldQuaternion(this.puppet.initialObjectOrientation);\n      this.hand.getWorldQuaternion(this.puppet.initialControllerOrientation);\n      this.puppet.initialControllerOrientation_inverse.copy(this.puppet.initialControllerOrientation).inverse();\n      return;\n    }\n\n    if (this.mode === TRANSFORM_MODE.AXIS) {\n      this.axis.copy(data.axis);\n    }\n\n    this.startPlaneCasting();\n  },\n\n  puppetingTick() {\n    const {\n      currentControllerOrientation,\n      controllerOrientationDelta,\n      initialControllerOrientation_inverse,\n      initialObjectOrientation\n    } = this.puppet;\n    this.hand.getWorldQuaternion(currentControllerOrientation);\n    controllerOrientationDelta.copy(initialControllerOrientation_inverse).premultiply(currentControllerOrientation);\n    this.target.quaternion\n      .copy(initialObjectOrientation)\n      .premultiply(controllerOrientationDelta)\n      .premultiply(controllerOrientationDelta);\n    this.target.matrixNeedsUpdate = true;\n  },\n\n  cursorAxisOrScaleTick() {\n    const {\n      plane,\n      normal,\n      intersections,\n      previousPointOnPlane,\n      currentPointOnPlane,\n      deltaOnPlane,\n      finalProjectedVec\n    } = this.planarInfo;\n    this.target.getWorldPosition(plane.position);\n    //    this.el.camera.getWorldQuaternion(plane.quaternion);\n    this.el.camera.getWorldPosition(v);\n    plane.matrixNeedsUpdate = true;\n    const cameraToPlaneDistance = v.sub(plane.position).length();\n\n    intersections.length = 0;\n    const raycaster = this.hand.el.id === \"player-left-controller\" ? this.raycasters.left : this.raycasters.right;\n    const far = raycaster.far;\n    raycaster.far = 1000;\n    plane.raycast(raycaster, intersections);\n    raycaster.far = far;\n    const intersection = intersections[0];\n    if (!intersection) return;\n\n    normal.set(0, 0, -1).applyQuaternion(plane.quaternion);\n\n    currentPointOnPlane.copy(intersection.point);\n    deltaOnPlane.copy(currentPointOnPlane).sub(previousPointOnPlane);\n    const SENSITIVITY = 10;\n    finalProjectedVec\n      .copy(deltaOnPlane)\n      .projectOnPlane(normal)\n      .applyQuaternion(q.copy(plane.quaternion).inverse())\n      .multiplyScalar(SENSITIVITY / cameraToPlaneDistance);\n    if (this.mode === TRANSFORM_MODE.CURSOR) {\n      const modify = AFRAME.scenes[0].systems.userinput.get(paths.actions.transformModifier);\n\n      this.dyAll = this.dyStore + finalProjectedVec.y;\n      this.dyApplied = modify ? this.dyAll : Math.round(this.dyAll / STEP_LENGTH) * STEP_LENGTH;\n      this.dyStore = this.dyAll - this.dyApplied;\n\n      this.dxAll = this.dxStore + finalProjectedVec.x;\n      this.dxApplied = modify ? this.dxAll : Math.round(this.dxAll / STEP_LENGTH) * STEP_LENGTH;\n      this.dxStore = this.dxAll - this.dxApplied;\n\n      if (this.mode === TRANSFORM_MODE.CURSOR) {\n        this.target.getWorldQuaternion(TARGET_WORLD_QUATERNION);\n        v.set(1, 0, 0).applyQuaternion(modify ? CAMERA_WORLD_QUATERNION : TARGET_WORLD_QUATERNION);\n        q.setFromAxisAngle(v, modify ? -this.dyApplied : this.sign2 * this.sign * -this.dyApplied);\n\n        if (modify) {\n          v.set(0, 1, 0).applyQuaternion(CAMERA_WORLD_QUATERNION);\n        } else {\n          v.set(0, 1, 0);\n        }\n        q2.setFromAxisAngle(v, this.dxApplied);\n\n        this.target.quaternion.premultiply(q).premultiply(q2);\n      }\n\n      this.target.matrixNeedsUpdate = true;\n    } else if (this.mode === TRANSFORM_MODE.AXIS) {\n      this.dxAll = this.dxStore + finalProjectedVec.x;\n      this.dxApplied = Math.round(this.dxAll / STEP_LENGTH) * STEP_LENGTH;\n      this.dxStore = this.dxAll - this.dxApplied;\n\n      this.target.quaternion.multiply(q.setFromAxisAngle(this.axis, -this.sign * this.dxApplied));\n      this.target.matrixNeedsUpdate = true;\n    }\n\n    previousPointOnPlane.copy(currentPointOnPlane);\n  },\n\n  tick() {\n    if (!this.transforming) {\n      return;\n    }\n\n    if (this.mode === TRANSFORM_MODE.SCALE) {\n      return; // Taken care of by scale-button\n    }\n\n    if (this.mode === TRANSFORM_MODE.ALIGN) {\n      this.el.camera.getWorldPosition(CAMERA_WORLD_POSITION);\n      this.target.lookAt(CAMERA_WORLD_POSITION);\n      this.transforming = false;\n      return;\n    }\n\n    if (this.mode === TRANSFORM_MODE.PUPPET) {\n      this.puppetingTick();\n      return;\n    }\n    this.cursorAxisOrScaleTick();\n  }\n});\n\nAFRAME.registerComponent(\"transform-button-selector\", {\n  tick() {\n    this.userinput = this.userinput || this.el.sceneEl.systems.userinput;\n    const hasHand = this.userinput.get(paths.actions.rightHand.pose) || this.userinput.get(paths.actions.leftHand.pose);\n    if (!hasHand) {\n      if (this.el.components[\"transform-button\"].data.mode !== TRANSFORM_MODE.CURSOR) {\n        this.el.setAttribute(\"transform-button\", \"mode\", TRANSFORM_MODE.CURSOR);\n      }\n    } else {\n      if (this.el.components[\"transform-button\"].data.mode !== TRANSFORM_MODE.PUPPET) {\n        this.el.setAttribute(\"transform-button\", \"mode\", TRANSFORM_MODE.PUPPET);\n      }\n    }\n  }\n});\n\nconst FORWARD = new THREE.Vector3(0, 0, 1);\nconst TWO_PI = 2 * Math.PI;\nAFRAME.registerComponent(\"visible-if-transforming\", {\n  schema: {\n    hand: { type: \"string\" }\n  },\n  init() {},\n  tick(t) {\n    const shouldBeVisible =\n      AFRAME.scenes[0].systems[\"transform-selected-object\"].transforming &&\n      AFRAME.scenes[0].systems[\"transform-selected-object\"].hand.el.id.indexOf(this.data.hand) !== -1;\n    const visibleNeedsUpdate = this.el.getAttribute(\"visible\") !== shouldBeVisible;\n    if (visibleNeedsUpdate) {\n      this.el.setAttribute(\"visible\", AFRAME.scenes[0].systems[\"transform-selected-object\"].transforming);\n    }\n\n    if (shouldBeVisible) {\n      this.el.object3D.quaternion.setFromAxisAngle(FORWARD, TWO_PI * Math.sin(t / 1000.0));\n      this.el.object3D.matrixNeedsUpdate = true;\n    }\n  }\n});\n","import { setMatrixWorld } from \"../utils/three-utils\";\nimport { TRANSFORM_MODE } from \"./transform-object-button\";\n\nconst calculatePlaneMatrix = (function() {\n  const planeMatrix = new THREE.Matrix4();\n  const planeUp = new THREE.Vector3();\n  const planeForward = new THREE.Vector3();\n  const planeRight = new THREE.Vector3();\n  const planePosition = new THREE.Vector3();\n  const camPosition = new THREE.Vector3();\n\n  return function calculatePlaneMatrix(camera, button) {\n    camera.updateMatrices();\n    camPosition.setFromMatrixPosition(camera.matrixWorld);\n    button.updateMatrices();\n    planePosition.setFromMatrixPosition(button.matrixWorld);\n    planeForward.subVectors(planePosition, camPosition);\n    planeForward.y = 0;\n    planeForward.normalize();\n    planeUp.set(0, 1, 0);\n    planeRight.crossVectors(planeForward, planeUp);\n    planeMatrix.makeBasis(planeRight, planeUp, planeForward.multiplyScalar(-1));\n    planeMatrix.elements[12] = planePosition.x;\n    planeMatrix.elements[13] = planePosition.y;\n    planeMatrix.elements[14] = planePosition.z;\n    return planeMatrix;\n  };\n})();\n\nconst planeForLeftCursor = new THREE.Mesh(\n  new THREE.PlaneBufferGeometry(100000, 100000, 2, 2),\n  new THREE.MeshBasicMaterial({\n    visible: true,\n    wireframe: false,\n    side: THREE.DoubleSide,\n    transparent: true,\n    opacity: 0.3\n  })\n);\nconst planeForRightCursor = new THREE.Mesh(\n  new THREE.PlaneBufferGeometry(100000, 100000, 2, 2),\n  new THREE.MeshBasicMaterial({\n    visible: true,\n    wireframe: false,\n    side: THREE.DoubleSide,\n    transparent: true,\n    opacity: 0.3\n  })\n);\n\nAFRAME.registerComponent(\"scale-button\", {\n  init() {\n    this.isScaling = false;\n    this.planeRotation = new THREE.Matrix4();\n    this.planeUp = new THREE.Vector3();\n    this.planeRight = new THREE.Vector3();\n    this.intersections = [];\n    this.initialIntersectionPoint = new THREE.Vector3();\n    this.intersectionPoint = new THREE.Vector3();\n    this.initialObjectScale = new THREE.Vector3();\n    this.desiredObjectScale = new THREE.Vector3();\n    this.deltaScale = new THREE.Vector3();\n    this.objectMatrix = new THREE.Matrix4();\n    this.dragVector = new THREE.Vector3();\n    this.currentObjectScale = new THREE.Vector3();\n    NAF.utils.getNetworkedEntity(this.el).then(networkedEl => {\n      this.objectToScale = networkedEl.object3D;\n    });\n    const camPosition = new THREE.Vector3();\n    const objectPosition = new THREE.Vector3();\n    const objectToCam = new THREE.Vector3();\n    this.startScaling = e => {\n      if (this.isScaling || !this.objectToScale) {\n        return;\n      }\n      if (!this.didGetObjectReferences) {\n        this.didGetObjectReferences = true;\n        this.leftEventer = document.getElementById(\"left-cursor\").object3D;\n        this.leftCursorController = document.getElementById(\"left-cursor-controller\");\n        this.leftRaycaster = this.leftCursorController.components[\"cursor-controller\"].raycaster;\n        this.rightCursorController = document.getElementById(\"right-cursor-controller\");\n        this.rightRaycaster = this.rightCursorController.components[\"cursor-controller\"].raycaster;\n        this.viewingCamera = document.getElementById(\"viewing-camera\").object3D;\n      }\n      this.plane = e.object3D === this.leftEventer ? planeForLeftCursor : planeForRightCursor;\n      setMatrixWorld(this.plane, calculatePlaneMatrix(this.viewingCamera, this.el.object3D));\n      this.planeRotation.extractRotation(this.plane.matrixWorld);\n      this.planeUp.set(0, 1, 0).applyMatrix4(this.planeRotation);\n      this.planeRight.set(1, 0, 0).applyMatrix4(this.planeRotation);\n      this.raycaster = e.object3D === this.leftEventer ? this.leftRaycaster : this.rightRaycaster;\n      const intersection = this.raycastOnPlane();\n      if (!intersection) return;\n      this.isScaling = true;\n      this.initialIntersectionPoint.copy(intersection.point);\n      this.objectToScale.updateMatrices();\n      this.initialObjectScale.setFromMatrixScale(this.objectToScale.matrixWorld);\n      this.initialDistanceToObject = objectToCam\n        .subVectors(\n          camPosition.setFromMatrixPosition(this.viewingCamera.matrixWorld),\n          objectPosition.setFromMatrixPosition(this.el.object3D.matrixWorld)\n        )\n        .length();\n      window.APP.store.update({ activity: { hasScaled: true } });\n\n      // TODO: Refactor transform-selected-object system so this isn't so awkward\n      this.transformSelectedObjectSystem =\n        this.transformSelectedObjectSystem || this.el.sceneEl.systems[\"transform-selected-object\"];\n      this.transformSelectedObjectSystem.transforming = true;\n      this.transformSelectedObjectSystem.mode = TRANSFORM_MODE.SCALE;\n      this.transformSelectedObjectSystem.target = this.objectToScale;\n      this.transformSelectedObjectSystem.hand =\n        e.object3D === this.leftEventer ? this.leftCursorController.object3D : this.rightCursorController.object3D;\n    };\n    this.endScaling = e => {\n      if (!this.isScaling) {\n        return;\n      }\n      if (\n        (e.object3D === this.leftEventer && this.raycaster === this.leftRaycaster) ||\n        (e.object3D !== this.leftEventer && this.raycaster === this.rightRaycaster)\n      ) {\n        this.isScaling = false;\n        this.transformSelectedObjectSystem =\n          this.transformSelectedObjectSystem || this.el.sceneEl.systems[\"transform-selected-object\"];\n        this.transformSelectedObjectSystem.transforming = false;\n      }\n    };\n    this.el.object3D.addEventListener(\"holdable-button-down\", this.startScaling);\n    this.el.object3D.addEventListener(\"holdable-button-up\", this.endScaling);\n  },\n  raycastOnPlane() {\n    this.intersections.length = 0;\n    const far = this.raycaster.far;\n    this.raycaster.far = 1000;\n    this.plane.raycast(this.raycaster, this.intersections);\n    this.raycaster.far = far;\n    return this.intersections[0];\n  },\n  tick() {\n    if (!this.isScaling) return;\n    const intersection = this.raycastOnPlane();\n    if (!intersection) return;\n    this.intersectionPoint.copy(intersection.point);\n    this.dragVector.subVectors(this.intersectionPoint, this.initialIntersectionPoint);\n    const dotFactor =\n      (this.dragVector.dot(this.planeUp) + this.dragVector.dot(this.planeRight)) / this.initialDistanceToObject;\n\n    let scaleFactor = 1;\n    if (dotFactor > 0) {\n      scaleFactor = 1 + dotFactor;\n    } else if (dotFactor < 0) {\n      scaleFactor = 1 / (1 + Math.abs(dotFactor));\n    }\n    this.desiredObjectScale.copy(this.initialObjectScale).multiplyScalar(scaleFactor);\n    this.objectToScale.updateMatrices();\n    this.currentObjectScale.setFromMatrixScale(this.objectToScale.matrixWorld);\n    this.deltaScale.set(\n      this.desiredObjectScale.x / this.currentObjectScale.x,\n      this.desiredObjectScale.y / this.currentObjectScale.y,\n      this.desiredObjectScale.z / this.currentObjectScale.z\n    );\n    this.objectMatrix.copy(this.objectToScale.matrixWorld);\n    this.objectMatrix.scale(this.deltaScale);\n    setMatrixWorld(this.objectToScale, this.objectMatrix);\n  }\n});\n","import { CYLINDER_TEXTURE } from \"./cylinder-texture\";\nimport { SOUND_TELEPORT_START, SOUND_TELEPORT_END } from \"../systems/sound-effects-system\";\n\nfunction easeIn(t) {\n  return t * t;\n}\n\nfunction easeOutIn(t) {\n  if (t < 0.5) return 0.5 * ((t = t * 2 - 1) * t * t + 1);\n  return 0.5 * (t = t * 2 - 1) * t * t + 0.5;\n}\n\nconst RayCurve = function(numPoints, width) {\n  this.geometry = new THREE.BufferGeometry();\n  this.vertices = new Float32Array(numPoints * 3 * 2);\n  this.uvs = new Float32Array(numPoints * 2 * 2);\n  this.width = width;\n\n  this.geometry.addAttribute(\"position\", new THREE.BufferAttribute(this.vertices, 3).setDynamic(true));\n\n  this.material = new THREE.MeshBasicMaterial({\n    side: THREE.DoubleSide,\n    transparent: true\n  });\n\n  this.mesh = new THREE.Mesh(this.geometry, this.material);\n  this.mesh.drawMode = THREE.TriangleStripDrawMode;\n\n  this.mesh.frustumCulled = false;\n  this.mesh.vertices = this.vertices;\n\n  this.direction = new THREE.Vector3();\n  this.numPoints = numPoints;\n};\n\nRayCurve.prototype = {\n  setDirection: function(direction) {\n    const UP = new THREE.Vector3(0, 1, 0);\n    this.direction\n      .copy(direction)\n      .cross(UP)\n      .normalize()\n      .multiplyScalar(this.width / 2);\n  },\n\n  setWidth: function(width) {\n    this.width = width;\n  },\n\n  setPoint: (function() {\n    const posA = new THREE.Vector3();\n    const posB = new THREE.Vector3();\n\n    return function(i, point) {\n      posA.copy(point).add(this.direction);\n      posB.copy(point).sub(this.direction);\n\n      let idx = 2 * 3 * i;\n      this.vertices[idx++] = posA.x;\n      this.vertices[idx++] = posA.y;\n      this.vertices[idx++] = posA.z;\n\n      this.vertices[idx++] = posB.x;\n      this.vertices[idx++] = posB.y;\n      this.vertices[idx++] = posB.z;\n\n      this.geometry.attributes.position.needsUpdate = true;\n    };\n  })()\n};\n\nfunction parabolicCurve(p0, v0, t, out) {\n  out.x = p0.x + v0.x * t;\n  out.y = p0.y + v0.y * t - 4.9 * t * t;\n  out.z = p0.z + v0.z * t;\n  return out;\n}\n\nfunction isValidNormalsAngle(collisionNormal, referenceNormal, landingMaxAngle) {\n  const angleNormals = referenceNormal.angleTo(collisionNormal);\n  return THREE.Math.RAD2DEG * angleNormals <= landingMaxAngle;\n}\n\nconst checkLineIntersection = (function() {\n  const direction = new THREE.Vector3();\n  return function checkLineIntersection(start, end, meshes, raycaster, referenceNormal, landingMaxAngle, hitPoint) {\n    direction.copy(end).sub(start);\n    const distance = direction.length();\n    raycaster.far = distance;\n    raycaster.set(start, direction.normalize());\n    const intersects = raycaster.intersectObjects(meshes, true);\n    if (intersects.length > 0 && isValidNormalsAngle(intersects[0].face.normal, referenceNormal, landingMaxAngle)) {\n      hitPoint.copy(intersects[0].point);\n      return true;\n    }\n    return false;\n  };\n})();\n\nfunction getMeshes(collisionEntities) {\n  return collisionEntities\n    .map(function(entity) {\n      return entity.getObject3D(\"mesh\");\n    })\n    .filter(function(n) {\n      return n;\n    });\n}\n\nconst MISS_OPACITY = 0.1;\nconst HIT_OPACITY = 0.3;\nconst MISS_COLOR = 0xff0000;\nconst HIT_COLOR = 0x00ff00;\nconst FORWARD = new THREE.Vector3(0, 0, -1);\nconst LANDING_NORMAL = new THREE.Vector3(0, 1, 0);\nconst MAX_LANDING_ANGLE = 45;\nconst DRAW_TIME_MS = 400;\nconst q = new THREE.Quaternion();\nconst vecHelper = new THREE.Vector3();\nconst v = new THREE.Vector3();\n\nAFRAME.registerComponent(\"teleporter\", {\n  schema: {\n    start: { type: \"string\" },\n    confirm: { type: \"string\" },\n    speed: { default: 12 },\n    collisionEntities: { default: \"\" },\n    hitCylinderColor: { type: \"color\", default: \"#99ff99\" },\n    hitCylinderRadius: { default: 0.25, min: 0 },\n    outerRadius: { default: 0.6, min: 0 },\n    hitCylinderHeight: { default: 0.3, min: 0 }\n  },\n\n  init() {\n    this.characterController = this.el.sceneEl.systems[\"hubs-systems\"].characterController;\n    this.isTeleporting = false;\n    this.rayCurve = new RayCurve(20, 0.025);\n    this.rayCurve.mesh.visible = false;\n    this.teleportEntity = document.createElement(\"a-entity\");\n    this.teleportEntity.setObject3D(\"mesh\", this.rayCurve.mesh);\n    this.el.sceneEl.appendChild(this.teleportEntity);\n\n    this.p0 = new THREE.Vector3();\n    this.v0 = new THREE.Vector3();\n    this.parabola = Array.from(new Array(this.rayCurve.numPoints), () => new THREE.Vector3());\n    this.hit = false;\n    this.hitPoint = new THREE.Vector3();\n    this.meshes = [];\n    this.raycaster = new THREE.Raycaster();\n    this.rigWorldPosition = new THREE.Vector3();\n    this.newRigWorldPosition = new THREE.Vector3();\n    this.teleportOriginWorldPosition = new THREE.Vector3();\n\n    this.teleportEventDetail = {\n      oldPosition: this.rigWorldPosition,\n      newPosition: this.newRigWorldPosition,\n      hitPoint: this.hitPoint\n    };\n    this.prevHitHeight = 0;\n    this.direction = new THREE.Vector3();\n    this.hitEntity = this.createHitEntity();\n    this.hitEntity.object3D.visible = false;\n    this.el.sceneEl.appendChild(this.hitEntity);\n    this.queryCollisionEntities();\n  },\n\n  queryCollisionEntities: function() {\n    this.collisionEntities = [].slice.call(this.el.sceneEl.querySelectorAll(this.data.collisionEntities));\n    this.meshes = getMeshes(this.collisionEntities);\n  },\n\n  remove() {\n    this.stopPlayingTeleportSound();\n  },\n\n  stopPlayingTeleportSound() {\n    if (this.teleportingSound) {\n      const sfx = this.el.sceneEl.systems[\"hubs-systems\"].soundEffectsSystem;\n      sfx.stopSoundNode(this.teleportingSound.source);\n      this.teleportingSound = null;\n    }\n  },\n\n  tick(t, dt) {\n    if (!this.el.sceneEl.is(\"entered\")) return;\n    const sfx = this.el.sceneEl.systems[\"hubs-systems\"].soundEffectsSystem;\n    const userinput = AFRAME.scenes[0].systems.userinput;\n    const { start, confirm, speed } = this.data;\n    const object3D = this.el.object3D;\n\n    if (\n      !this.isTeleporting &&\n      userinput.get(start) &&\n      !this.characterController.isTeleportingDisabled &&\n      !window.APP.store.state.preferences.disableTeleporter\n    ) {\n      this.isTeleporting = true;\n      this.timeTeleporting = 0;\n      this.hit = false;\n      this.rayCurve.mesh.visible = true;\n      this.rayCurve.mesh.updateMatrixWorld();\n      this.rayCurve.mesh.material.opacity = MISS_OPACITY;\n      this.rayCurve.mesh.material.color.set(MISS_COLOR);\n      this.rayCurve.mesh.material.needsUpdate = true;\n      this.teleportingSound = sfx.playSoundLoopedWithGain(SOUND_TELEPORT_START);\n      if (this.teleportingSound) {\n        this.teleportingSound.gain.gain.value = 0.005;\n      }\n    }\n\n    if (!this.isTeleporting) {\n      return;\n    }\n    if (this.teleportingSound) {\n      this.teleportingSound.gain.gain.value = Math.min(0.025, this.teleportingSound.gain.gain.value + 0.00002 * dt);\n    }\n\n    if (userinput.get(confirm)) {\n      this.hitEntity.setAttribute(\"visible\", false);\n      this.isTeleporting = false;\n      this.rayCurve.mesh.visible = false;\n\n      if (this.teleportingSound) {\n        this.stopPlayingTeleportSound();\n      }\n\n      if (!this.hit || this.timeTeleporting < DRAW_TIME_MS) {\n        return;\n      }\n\n      this.characterController.teleportTo(this.hitPoint);\n\n      sfx.playSoundOneShot(SOUND_TELEPORT_END);\n      return;\n    }\n\n    this.timeTeleporting += dt;\n    object3D.updateMatrixWorld();\n    object3D.matrixWorld.decompose(this.p0, q, vecHelper);\n    this.direction\n      .copy(FORWARD)\n      .applyQuaternion(q)\n      .normalize();\n    this.rayCurve.setDirection(this.direction);\n    this.el.object3D.updateMatrices();\n    const playerScale = v.setFromMatrixColumn(this.characterController.avatarPOV.object3D.matrixWorld, 1).length();\n    this.v0.copy(this.direction).multiplyScalar(speed * Math.sqrt(playerScale));\n\n    let collidedIndex = this.rayCurve.numPoints - 1;\n\n    this.hit = false;\n    this.parabola[0].copy(this.p0);\n    const timeSegment = 1 / (this.rayCurve.numPoints - 1);\n    for (let i = 1; i < this.rayCurve.numPoints; i++) {\n      const t = i * timeSegment;\n      parabolicCurve(this.p0, this.v0, t, vecHelper);\n      this.parabola[i].copy(vecHelper);\n\n      if (\n        checkLineIntersection(\n          this.parabola[i - 1],\n          this.parabola[i],\n          this.meshes,\n          this.raycaster,\n          LANDING_NORMAL,\n          MAX_LANDING_ANGLE,\n          this.hitPoint\n        )\n      ) {\n        this.hit = true;\n        collidedIndex = i;\n        break;\n      }\n    }\n    if (this.characterController.isTeleportingDisabled) {\n      this.hit = false;\n    }\n\n    const percentToDraw = this.timeTeleporting > DRAW_TIME_MS ? 1 : this.timeTeleporting / DRAW_TIME_MS;\n    const percentRaycasted = collidedIndex / (this.rayCurve.numPoints - 1);\n    const segmentT = (percentToDraw * percentRaycasted) / (this.rayCurve.numPoints - 1);\n\n    for (let i = 0; i < this.rayCurve.numPoints; i++) {\n      const t = i * segmentT;\n      parabolicCurve(this.p0, this.v0, t, vecHelper);\n      this.rayCurve.setPoint(i, vecHelper);\n    }\n\n    const color = this.hit ? HIT_COLOR : MISS_COLOR;\n    const opacity = this.hit && this.timeTeleporting >= DRAW_TIME_MS ? HIT_OPACITY : MISS_OPACITY;\n    this.rayCurve.material.color.set(color);\n    this.rayCurve.material.opacity = opacity;\n\n    this.hitEntity.setAttribute(\"visible\", this.hit);\n    if (this.hit) {\n      this.hitEntity.setAttribute(\"position\", this.hitPoint);\n      this.hitEntity.object3D.traverse(o => {\n        o.matrixNeedsUpdate = true;\n      });\n      const hitEntityOpacity = HIT_OPACITY * easeOutIn(percentToDraw);\n      const dRadii = this.data.outerRadius - this.data.hitCylinderRadius;\n      const outerScale = (this.data.outerRadius - easeIn(percentToDraw) * dRadii) / this.data.outerRadius;\n      this.outerTorus.object3D.scale.set(outerScale, outerScale, 1);\n      this.torus.setAttribute(\"material\", \"opacity\", hitEntityOpacity);\n      this.cylinder.setAttribute(\"material\", \"opacity\", hitEntityOpacity);\n    }\n  },\n\n  createHitEntity() {\n    const data = this.data;\n\n    // Parent.\n    const hitEntity = document.createElement(\"a-entity\");\n    hitEntity.className = \"hitEntity\";\n\n    // Torus.\n    this.torus = document.createElement(\"a-entity\");\n    this.torus.setAttribute(\"geometry\", {\n      primitive: \"torus\",\n      radius: data.hitCylinderRadius,\n      radiusTubular: 0.01,\n      segmentsRadial: 16,\n      segmentsTubular: 18\n    });\n    this.torus.setAttribute(\"rotation\", { x: 90, y: 0, z: 0 });\n    this.torus.setAttribute(\"material\", {\n      shader: \"flat\",\n      color: data.hitCylinderColor,\n      side: \"double\",\n      depthTest: false\n    });\n    hitEntity.appendChild(this.torus);\n\n    // Cylinder.\n    this.cylinder = document.createElement(\"a-entity\");\n    this.cylinder.setAttribute(\"position\", { x: 0, y: data.hitCylinderHeight / 2, z: 0 });\n    this.cylinder.setAttribute(\"geometry\", {\n      primitive: \"cylinder\",\n      segmentsHeight: 1,\n      radius: data.hitCylinderRadius,\n      height: data.hitCylinderHeight,\n      openEnded: true\n    });\n    this.cylinder.setAttribute(\"material\", {\n      shader: \"flat\",\n      color: data.hitCylinderColor,\n      side: \"double\",\n      src: CYLINDER_TEXTURE,\n      transparent: true,\n      depthTest: false\n    });\n    hitEntity.appendChild(this.cylinder);\n\n    // create another torus for animating when the hit destination is ready to go\n    this.outerTorus = document.createElement(\"a-entity\");\n    this.outerTorus.setAttribute(\"geometry\", {\n      primitive: \"torus\",\n      radius: data.outerRadius,\n      radiusTubular: 0.01,\n      segmentsRadial: 16,\n      segmentsTubular: 18\n    });\n    this.outerTorus.setAttribute(\"rotation\", { x: 90, y: 0, z: 0 });\n    this.outerTorus.setAttribute(\"material\", {\n      shader: \"flat\",\n      color: data.hitCylinderColor,\n      side: \"double\",\n      opacity: HIT_OPACITY,\n      depthTest: false\n    });\n    this.outerTorus.setAttribute(\"id\", \"outerTorus\");\n    hitEntity.appendChild(this.outerTorus);\n\n    return hitEntity;\n  }\n});\n","export const CYLINDER_TEXTURE =\n  \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAAQCAYAAADXnxW3AAAACXBIWXMAAAsTAAALEwEAmpwYAAAKT2lDQ1BQaG90b3Nob3AgSUNDIHByb2ZpbGUAAHjanVNnVFPpFj333vRCS4iAlEtvUhUIIFJCi4AUkSYqIQkQSoghodkVUcERRUUEG8igiAOOjoCMFVEsDIoK2AfkIaKOg6OIisr74Xuja9a89+bN/rXXPues852zzwfACAyWSDNRNYAMqUIeEeCDx8TG4eQuQIEKJHAAEAizZCFz/SMBAPh+PDwrIsAHvgABeNMLCADATZvAMByH/w/qQplcAYCEAcB0kThLCIAUAEB6jkKmAEBGAYCdmCZTAKAEAGDLY2LjAFAtAGAnf+bTAICd+Jl7AQBblCEVAaCRACATZYhEAGg7AKzPVopFAFgwABRmS8Q5ANgtADBJV2ZIALC3AMDOEAuyAAgMADBRiIUpAAR7AGDIIyN4AISZABRG8lc88SuuEOcqAAB4mbI8uSQ5RYFbCC1xB1dXLh4ozkkXKxQ2YQJhmkAuwnmZGTKBNA/g88wAAKCRFRHgg/P9eM4Ors7ONo62Dl8t6r8G/yJiYuP+5c+rcEAAAOF0ftH+LC+zGoA7BoBt/qIl7gRoXgugdfeLZrIPQLUAoOnaV/Nw+H48PEWhkLnZ2eXk5NhKxEJbYcpXff5nwl/AV/1s+X48/Pf14L7iJIEyXYFHBPjgwsz0TKUcz5IJhGLc5o9H/LcL//wd0yLESWK5WCoU41EScY5EmozzMqUiiUKSKcUl0v9k4t8s+wM+3zUAsGo+AXuRLahdYwP2SycQWHTA4vcAAPK7b8HUKAgDgGiD4c93/+8//UegJQCAZkmScQAAXkQkLlTKsz/HCAAARKCBKrBBG/TBGCzABhzBBdzBC/xgNoRCJMTCQhBCCmSAHHJgKayCQiiGzbAdKmAv1EAdNMBRaIaTcA4uwlW4Dj1wD/phCJ7BKLyBCQRByAgTYSHaiAFiilgjjggXmYX4IcFIBBKLJCDJiBRRIkuRNUgxUopUIFVIHfI9cgI5h1xGupE7yAAygvyGvEcxlIGyUT3UDLVDuag3GoRGogvQZHQxmo8WoJvQcrQaPYw2oefQq2gP2o8+Q8cwwOgYBzPEbDAuxsNCsTgsCZNjy7EirAyrxhqwVqwDu4n1Y8+xdwQSgUXACTYEd0IgYR5BSFhMWE7YSKggHCQ0EdoJNwkDhFHCJyKTqEu0JroR+cQYYjIxh1hILCPWEo8TLxB7iEPENyQSiUMyJ7mQAkmxpFTSEtJG0m5SI+ksqZs0SBojk8naZGuyBzmULCAryIXkneTD5DPkG+Qh8lsKnWJAcaT4U+IoUspqShnlEOU05QZlmDJBVaOaUt2ooVQRNY9aQq2htlKvUYeoEzR1mjnNgxZJS6WtopXTGmgXaPdpr+h0uhHdlR5Ol9BX0svpR+iX6AP0dwwNhhWDx4hnKBmbGAcYZxl3GK+YTKYZ04sZx1QwNzHrmOeZD5lvVVgqtip8FZHKCpVKlSaVGyovVKmqpqreqgtV81XLVI+pXlN9rkZVM1PjqQnUlqtVqp1Q61MbU2epO6iHqmeob1Q/pH5Z/YkGWcNMw09DpFGgsV/jvMYgC2MZs3gsIWsNq4Z1gTXEJrHN2Xx2KruY/R27iz2qqaE5QzNKM1ezUvOUZj8H45hx+Jx0TgnnKKeX836K3hTvKeIpG6Y0TLkxZVxrqpaXllirSKtRq0frvTau7aedpr1Fu1n7gQ5Bx0onXCdHZ4/OBZ3nU9lT3acKpxZNPTr1ri6qa6UbobtEd79up+6Ynr5egJ5Mb6feeb3n+hx9L/1U/W36p/VHDFgGswwkBtsMzhg8xTVxbzwdL8fb8VFDXcNAQ6VhlWGX4YSRudE8o9VGjUYPjGnGXOMk423GbcajJgYmISZLTepN7ppSTbmmKaY7TDtMx83MzaLN1pk1mz0x1zLnm+eb15vft2BaeFostqi2uGVJsuRaplnutrxuhVo5WaVYVVpds0atna0l1rutu6cRp7lOk06rntZnw7Dxtsm2qbcZsOXYBtuutm22fWFnYhdnt8Wuw+6TvZN9un2N/T0HDYfZDqsdWh1+c7RyFDpWOt6azpzuP33F9JbpL2dYzxDP2DPjthPLKcRpnVOb00dnF2e5c4PziIuJS4LLLpc+Lpsbxt3IveRKdPVxXeF60vWdm7Obwu2o26/uNu5p7ofcn8w0nymeWTNz0MPIQ+BR5dE/C5+VMGvfrH5PQ0+BZ7XnIy9jL5FXrdewt6V3qvdh7xc+9j5yn+M+4zw33jLeWV/MN8C3yLfLT8Nvnl+F30N/I/9k/3r/0QCngCUBZwOJgUGBWwL7+Hp8Ib+OPzrbZfay2e1BjKC5QRVBj4KtguXBrSFoyOyQrSH355jOkc5pDoVQfujW0Adh5mGLw34MJ4WHhVeGP45wiFga0TGXNXfR3ENz30T6RJZE3ptnMU85ry1KNSo+qi5qPNo3ujS6P8YuZlnM1VidWElsSxw5LiquNm5svt/87fOH4p3iC+N7F5gvyF1weaHOwvSFpxapLhIsOpZATIhOOJTwQRAqqBaMJfITdyWOCnnCHcJnIi/RNtGI2ENcKh5O8kgqTXqS7JG8NXkkxTOlLOW5hCepkLxMDUzdmzqeFpp2IG0yPTq9MYOSkZBxQqohTZO2Z+pn5mZ2y6xlhbL+xW6Lty8elQfJa7OQrAVZLQq2QqboVFoo1yoHsmdlV2a/zYnKOZarnivN7cyzytuQN5zvn//tEsIS4ZK2pYZLVy0dWOa9rGo5sjxxedsK4xUFK4ZWBqw8uIq2Km3VT6vtV5eufr0mek1rgV7ByoLBtQFr6wtVCuWFfevc1+1dT1gvWd+1YfqGnRs+FYmKrhTbF5cVf9go3HjlG4dvyr+Z3JS0qavEuWTPZtJm6ebeLZ5bDpaql+aXDm4N2dq0Dd9WtO319kXbL5fNKNu7g7ZDuaO/PLi8ZafJzs07P1SkVPRU+lQ27tLdtWHX+G7R7ht7vPY07NXbW7z3/T7JvttVAVVN1WbVZftJ+7P3P66Jqun4lvttXa1ObXHtxwPSA/0HIw6217nU1R3SPVRSj9Yr60cOxx++/p3vdy0NNg1VjZzG4iNwRHnk6fcJ3/ceDTradox7rOEH0x92HWcdL2pCmvKaRptTmvtbYlu6T8w+0dbq3nr8R9sfD5w0PFl5SvNUyWna6YLTk2fyz4ydlZ19fi753GDborZ752PO32oPb++6EHTh0kX/i+c7vDvOXPK4dPKy2+UTV7hXmq86X23qdOo8/pPTT8e7nLuarrlca7nuer21e2b36RueN87d9L158Rb/1tWeOT3dvfN6b/fF9/XfFt1+cif9zsu72Xcn7q28T7xf9EDtQdlD3YfVP1v+3Njv3H9qwHeg89HcR/cGhYPP/pH1jw9DBY+Zj8uGDYbrnjg+OTniP3L96fynQ89kzyaeF/6i/suuFxYvfvjV69fO0ZjRoZfyl5O/bXyl/erA6xmv28bCxh6+yXgzMV70VvvtwXfcdx3vo98PT+R8IH8o/2j5sfVT0Kf7kxmTk/8EA5jz/GMzLdsAAAAgY0hSTQAAeiUAAICDAAD5/wAAgOkAAHUwAADqYAAAOpgAABdvkl/FRgAAADJJREFUeNpEx7ENgDAAAzArK0JA6f8X9oewlcWStU1wBGdwB08wgjeYm79jc2nbYH0DAC/+CORJxO5fAAAAAElFTkSuQmCC\";\n","export function isTagged(el, tag) {\n  return el && el.components && el.components.tags && el.components.tags.data[tag];\n}\n\nAFRAME.registerComponent(\"tags\", {\n  schema: {\n    isHandCollisionTarget: { default: false },\n    isHoldable: { default: false },\n    offersHandConstraint: { default: false },\n    offersRemoteConstraint: { default: false },\n    togglesHoveredActionSet: { default: false },\n    singleActionButton: { default: false },\n    holdableButton: { default: false },\n    isPen: { default: false },\n    isHoverMenuChild: { default: false },\n    isStatic: { default: false },\n    inspectable: { default: false }\n  },\n  update() {\n    if (this.didUpdateOnce) {\n      console.warn(\"Do not edit tags with .setAttribute\");\n    }\n    this.didUpdateOnce = true;\n  },\n\n  remove() {\n    const interaction = this.el.sceneEl.systems.interaction;\n    if (interaction.isHeld(this.el)) {\n      interaction.release(this.el);\n      this.el.sceneEl.systems[\"hubs-systems\"].constraintsSystem.release(this.el);\n    }\n  }\n});\n","import createTextGeometry from \"three-bmfont-text\";\n\n// 1 to match other A-Frame default widths.\nconst DEFAULT_WIDTH = 1;\n\n// @bryik set anisotropy to 16. Improves look of large amounts of text when viewed from angle.\nconst MAX_ANISOTROPY = 16;\n\n/**\n * Due to using negative scale, we return the opposite side specified.\n * https://github.com/mrdoob/three.js/pull/12787/\n */\nfunction parseSide(side) {\n  switch (side) {\n    case \"back\": {\n      return THREE.FrontSide;\n    }\n    case \"double\": {\n      return THREE.DoubleSide;\n    }\n    default: {\n      return THREE.BackSide;\n    }\n  }\n}\n\n/**\n * Determine wrap pixel count. Either specified or by experimental fudge factor.\n * Note that experimental factor will never be correct for variable width fonts.\n */\nfunction computeWidth(wrapPixels, wrapCount, widthFactor) {\n  return wrapPixels || (0.5 + wrapCount) * widthFactor;\n}\n\n/**\n * Compute default font width factor to use.\n */\nfunction computeFontWidthFactor(font) {\n  let sum = 0;\n  let digitsum = 0;\n  let digits = 0;\n  for (const ch of font.chars) {\n    sum += ch.xadvance;\n    if (ch.id >= 48 && ch.id <= 57) {\n      digits++;\n      digitsum += ch.xadvance;\n    }\n  }\n  return digits ? digitsum / digits : sum / font.chars.length;\n}\n\nfunction loadFont(src) {\n  return fetch(src)\n    .then(resp => resp.json())\n    .then(font => {\n      // Fix negative Y offsets for Roboto MSDF font from tool. Experimentally determined.\n      if (src.indexOf(\"/Roboto-msdf.json\") >= 0) {\n        for (const ch of font.chars) {\n          ch.yoffset += 30;\n        }\n      }\n      font.widthFactor = computeFontWidthFactor(font);\n      return font;\n    });\n}\n\nfunction loadTexture(src) {\n  return new Promise((resolve, reject) => {\n    new THREE.ImageLoader().load(\n      src,\n      image => {\n        const texture = new THREE.Texture();\n        texture.image = image;\n        texture.needsUpdate = true;\n        texture.anisotropy = MAX_ANISOTROPY;\n        resolve(texture);\n      },\n      undefined,\n      err => {\n        console.error(\"Error loading font image\", src, err);\n        reject(null);\n      }\n    );\n  });\n}\n\nconst FONTS = {\n  roboto: {\n    json: loadFont(\"https://cdn.aframe.io/fonts/Roboto-msdf.json\"),\n    texture: loadTexture(\"https://cdn.aframe.io/fonts/Roboto-msdf.png\")\n  }\n};\n\nAFRAME.registerComponent(\"text\", {\n  multiple: true,\n  schema: {\n    align: { type: \"string\", default: \"left\", oneOf: [\"left\", \"right\", \"center\"] },\n    alphaTest: { default: 0.5 },\n    // `anchor` defaults to center to match geometries.\n    anchor: { default: \"center\", oneOf: [\"left\", \"right\", \"center\", \"align\"] },\n    baseline: { default: \"center\", oneOf: [\"top\", \"center\", \"bottom\"] },\n    color: { type: \"color\", default: \"#FFF\" },\n    font: { type: \"string\", default: \"roboto\" },\n    // `height` has no default, will be populated at layout.\n    height: { type: \"number\" },\n    letterSpacing: { type: \"number\", default: 0 },\n    // `lineHeight` defaults to font's `lineHeight` value.\n    lineHeight: { type: \"number\" },\n    // `negate` must be true for fonts generated with older versions of msdfgen (white background).\n    negate: { type: \"boolean\", default: true },\n    opacity: { type: \"number\", default: 1.0 },\n    side: { default: \"front\", oneOf: [\"front\", \"back\", \"double\"] },\n    tabSize: { default: 4 },\n    transparent: { default: true },\n    value: { type: \"string\" },\n    whiteSpace: { default: \"normal\", oneOf: [\"normal\", \"pre\", \"nowrap\"] },\n    // `width` defaults to geometry width if present, else `DEFAULT_WIDTH`.\n    width: { type: \"number\" },\n    // `wrapCount` units are about one default font character. Wrap roughly at this number.\n    wrapCount: { type: \"number\", default: 40 },\n    // `wrapPixels` will wrap using bmfont pixel units (e.g., dejavu's is 32 pixels).\n    wrapPixels: { type: \"number\" },\n    // `xOffset` to add padding.\n    xOffset: { type: \"number\", default: 0 },\n    // `zOffset` will provide a small z offset to avoid z-fighting.\n    zOffset: { type: \"number\", default: 0.001 }\n  },\n\n  init: function() {\n    const shaderData = this.getShaderData(this.data);\n    this.shaderObject = new AFRAME.shaders[\"msdf\"].Shader();\n    this.shaderObject.el = this.el;\n    this.shaderObject.init(shaderData);\n    this.shaderObject.update(shaderData);\n    this.shaderObject.material.transparent = shaderData.transparent; // Apparently, was not set on `init` nor `update`.\n    this.shaderObject.material.side = shaderData.side;\n    this.geometry = createTextGeometry();\n    this.mesh = new THREE.Mesh(this.geometry, this.shaderObject.material);\n    this.el.setObject3D(this.attrName, this.mesh);\n  },\n\n  update: function(oldData) {\n    const data = this.data;\n    const shaderData = this.getShaderData(this.data);\n    this.shaderObject.update(shaderData);\n    this.shaderObject.material.transparent = shaderData.transparent; // Apparently, was not set on `init` nor `update`.\n    this.shaderObject.material.side = shaderData.side;\n\n    // New font. `updateFont` will later change data and layout.\n    if (oldData.font !== data.font) {\n      this.updateFont().catch(err => console.error(err));\n    }\n\n    // Not a new font, but we need to accomodate other changes with the existing font.\n    if (this.currentFont != null) {\n      this.updateGeometry(this.geometry, this.currentFont);\n      this.updateLayout(this.currentFont);\n    }\n  },\n\n  /**\n   * Clean up geometry, material, texture, mesh, objects.\n   */\n  remove: function() {\n    this.geometry.dispose();\n    this.geometry = null;\n    this.el.removeObject3D(this.attrName);\n    this.shaderObject.material.dispose();\n    this.shaderObject.material = null;\n    delete this.shaderObject;\n  },\n\n  getShaderData: (function() {\n    const shaderData = {};\n    return function(data) {\n      shaderData.alphaTest = data.alphaTest;\n      shaderData.color = data.color;\n      shaderData.opacity = data.opacity;\n      shaderData.side = parseSide(data.side);\n      shaderData.transparent = data.transparent;\n      shaderData.negate = data.negate;\n      return shaderData;\n    };\n  })(),\n\n  /**\n   * Load font for geometry, load font image for material, and apply.\n   */\n  updateFont: function() {\n    const data = this.data;\n    const geometry = this.geometry;\n\n    // Make invisible during font swap.\n    this.mesh.visible = false;\n    const fetchFontData = Promise.all([FONTS[data.font].json, FONTS[data.font].texture]);\n    return fetchFontData.then(([font, texture]) => {\n      if (font.pages.length !== 1) {\n        throw new Error(\"Currently only single-page bitmap fonts are supported.\");\n      }\n      this.currentFont = font;\n      this.updateGeometry(geometry, font);\n      this.shaderObject.update({ map: texture });\n      this.updateLayout(font);\n      this.mesh.visible = true;\n    });\n  },\n\n  /**\n   * Update layout with anchor, alignment, baseline, and considering any meshes.\n   */\n  updateLayout: function(font) {\n    const el = this.el;\n    const data = this.data;\n    const geometry = this.geometry;\n    const mesh = this.mesh;\n\n    if (!geometry.layout) {\n      return;\n    }\n\n    // Determine width to use (defined width, geometry's width, or default width).\n    const geometryComponent = el.getAttribute(\"geometry\");\n    const width = data.width || (geometryComponent && geometryComponent.width) || DEFAULT_WIDTH;\n\n    // Determine wrap pixel count. Either specified or by experimental fudge factor.\n    // Note that experimental factor will never be correct for variable width fonts.\n    const textRenderWidth = computeWidth(data.wrapPixels, data.wrapCount, font.widthFactor);\n    const textScale = width / textRenderWidth;\n\n    // Determine height to use.\n    const layout = geometry.layout;\n    const height = textScale * (layout.height + layout.descender);\n\n    // Update geometry dimensions to match text layout if width and height are set to 0.\n    // For example, scales a plane to fit text.\n    if (geometryComponent && geometryComponent.primitive === \"plane\") {\n      if (!geometryComponent.width) {\n        el.setAttribute(\"geometry\", \"width\", width);\n      }\n      if (!geometryComponent.height) {\n        el.setAttribute(\"geometry\", \"height\", height);\n      }\n    }\n\n    // Calculate X position to anchor text left, center, or right.\n    const anchor = data.anchor === \"align\" ? data.align : data.anchor;\n    let x, y;\n    if (anchor === \"left\") {\n      x = 0;\n    } else if (anchor === \"right\") {\n      x = -1 * layout.width;\n    } else if (anchor === \"center\") {\n      x = (-1 * layout.width) / 2;\n    } else {\n      throw new TypeError(\"Invalid text.anchor property value\", anchor);\n    }\n\n    // Calculate Y position to anchor text top, center, or bottom.\n    const baseline = data.baseline;\n    if (baseline === \"bottom\") {\n      y = 0;\n    } else if (baseline === \"top\") {\n      y = -1 * layout.height + layout.ascender;\n    } else if (baseline === \"center\") {\n      y = (-1 * layout.height) / 2;\n    } else {\n      throw new TypeError(\"Invalid text.baseline property value\", baseline);\n    }\n\n    // Position and scale mesh to apply layout.\n    mesh.position.x = x * textScale + data.xOffset;\n    mesh.position.y = y * textScale;\n    // Place text slightly in front to avoid Z-fighting.\n    mesh.position.z = data.zOffset;\n    mesh.scale.set(textScale, -1 * textScale, textScale);\n    mesh.matrixNeedsUpdate = true;\n  },\n\n  /**\n   * Update the text geometry using `three-bmfont-text.update`.\n   */\n  updateGeometry: (function() {\n    const geometryUpdateBase = {};\n    const geometryUpdateData = {};\n    const newLineRegex = /\\\\n/g;\n    const tabRegex = /\\\\t/g;\n\n    return function(geometry, font) {\n      const data = this.data;\n\n      geometryUpdateData.font = font;\n      geometryUpdateData.lineHeight =\n        data.lineHeight && isFinite(data.lineHeight) ? data.lineHeight : font.common.lineHeight;\n      geometryUpdateData.text = data.value\n        .toString()\n        .replace(newLineRegex, \"\\n\")\n        .replace(tabRegex, \"\\t\");\n      geometryUpdateData.width = computeWidth(data.wrapPixels, data.wrapCount, font.widthFactor);\n      geometry.update(Object.assign(geometryUpdateBase, data, geometryUpdateData));\n      geometry.boundingBox = null;\n      geometry.boundingSphere = null;\n    };\n  })()\n});\n","import { getInspectable } from \"../systems/camera-system\";\n\nAFRAME.registerComponent(\"inspect-button\", {\n  tick() {\n    if (!this.initializedInTick) {\n      // initialize in tick so that parent's `tags` component has been initialized\n      this.initializedInTick = true;\n\n      this.inspectable = getInspectable(this.el);\n      if (!this.inspectable) {\n        console.error(\"You put an inspect button but I could not find what you want to inspect.\", this.el);\n        return;\n      }\n      this.el.object3D.addEventListener(\"holdable-button-down\", () => {\n        this.el.sceneEl.systems[\"hubs-systems\"].cameraSystem.inspect(this.inspectable.object3D);\n      });\n      this.el.object3D.addEventListener(\"holdable-button-up\", () => {\n        this.el.sceneEl.systems[\"hubs-systems\"].cameraSystem.uninspect();\n      });\n    }\n  }\n});\n","export const sets = {};\nsets.global = \"global\";\nsets.inputFocused = \"inputFocused\";\nsets.rightCursorHoveringOnPen = \"rightCursorHoveringOnPen\";\nsets.rightCursorHoveringOnCamera = \"rightCursorHoveringOnCamera\";\nsets.rightCursorHoveringOnInteractable = \"rightCursorHoveringOnInteractable\";\nsets.rightCursorHoveringOnUI = \"rightCursorHoveringOnUI\";\nsets.rightCursorHoveringOnVideo = \"rightCursorHoveringOnVideo\";\nsets.rightCursorHoveringOnNothing = \"rightCursorHoveringOnNothing\";\nsets.rightCursorHoldingPen = \"rightCursorHoldingPen\";\nsets.rightCursorHoldingCamera = \"rightCursorHoldingCamera\";\nsets.rightCursorHoldingInteractable = \"rightCursorHoldingInteractable\";\nsets.rightCursorHoldingUI = \"rightCursorHoldingUI\";\nsets.rightCursorHoldingNothing = \"rightCursorHoldingNothing\";\nsets.leftCursorHoveringOnPen = \"leftCursorHoveringOnPen\";\nsets.leftCursorHoveringOnCamera = \"leftCursorHoveringOnCamera\";\nsets.leftCursorHoveringOnInteractable = \"leftCursorHoveringOnInteractable\";\nsets.leftCursorHoveringOnUI = \"leftCursorHoveringOnUI\";\nsets.leftCursorHoveringOnVideo = \"leftCursorHoveringOnVideo\";\nsets.leftCursorHoveringOnNothing = \"leftCursorHoveringOnNothing\";\nsets.leftCursorHoldingPen = \"leftCursorHoldingPen\";\nsets.leftCursorHoldingCamera = \"leftCursorHoldingCamera\";\nsets.leftCursorHoldingInteractable = \"leftCursorHoldingInteractable\";\nsets.leftCursorHoldingUI = \"leftCursorHoldingUI\";\nsets.leftCursorHoldingNothing = \"leftCursorHoldingNothing\";\nsets.rightHandTeleporting = \"rightHandTeleporting\";\nsets.rightHandHoveringOnPen = \"rightHandHoveringOnPen\";\nsets.rightHandHoveringOnCamera = \"rightHandHoveringOnCamera\";\nsets.rightHandHoveringOnInteractable = \"rightHandHoveringOnInteractable\";\nsets.rightHandHoveringOnNothing = \"rightHandHoveringOnNothing\";\nsets.rightHandHoldingPen = \"rightHandHoldingPen\";\nsets.rightHandHoldingCamera = \"rightHandHoldingCamera\";\nsets.rightHandHoldingInteractable = \"rightHandHoldingInteractable\";\nsets.leftHandTeleporting = \"leftHandTeleporting\";\nsets.leftHandHoveringOnPen = \"leftHandHoveringOnPen\";\nsets.leftHandHoveringOnCamera = \"leftHandHoveringOnCamera\";\nsets.leftHandHoveringOnInteractable = \"leftHandHoveringOnInteractable\";\nsets.leftHandHoldingPen = \"leftHandHoldingPen\";\nsets.leftHandHoldingCamera = \"leftHandHoldingCamera\";\nsets.leftHandHoldingInteractable = \"leftHandHoldingInteractable\";\nsets.leftHandHoveringOnNothing = \"leftHandHoveringOnNothing\";\nsets.debugUserInput = \"debugUserInput\";\nsets.inspecting = \"inspecting\";\n","const { detect } = require(\"detect-browser\");\n\nconst browser = detect();\n\n// Precision on device detection is fuzzy -- we can sometimes know if a device is definitely\n// available, or definitely *not* available, and assume it may be available otherwise.\nexport const VR_DEVICE_AVAILABILITY = {\n  yes: \"yes\", // Implies VR can be launched into on this device immediately, in this browser\n  no: \"no\", // Implies this VR device is definitely not supported regardless of browser\n  maybe: \"maybe\" // Implies this device may support this VR platform, but may not be installed or in a compatible browser\n};\n\nfunction isMaybeGearVRCompatibleDevice(ua) {\n  return /\\WAndroid\\W/.test(ua);\n}\n\nfunction isMaybeDaydreamCompatibleDevice(ua) {\n  return /\\WAndroid\\W/.test(ua);\n}\n\n// Blacklist of VR device name regex matchers that we do not want to consider as valid VR devices\n// that can be entered into as a \"generic\" entry flow.\nconst GENERIC_ENTRY_TYPE_DEVICE_BLACKLIST = [/cardboard/i];\n\n// Tries to determine VR entry compatibility regardless of the current browser.\n//\n// For each VR \"entry type\", returns VR_DEVICE_AVAILABILITY.yes if that type can be launched into directly from this browser\n// on this device, returns VR_DEVICE_AVAILABILITY.no if that type is known to not be possible to ever use on this device no matter what,\n// and VR_DEVICE_AVAILABILITY.maybe if the device potentially could support that type if a different browser was running, or if\n// the software was setup, an HMD was purchased, etc.\n//\n// When \"yes\" or \"maybe\", we should present the option. If \"maybe\", when chosen try to get them into a compatible browser.\n// Once in a compatible browser, we should assume it will work (if it doesn't, it's because they don't have the headset,\n// haven't installed the software, our guess about their phone was wrong, etc.)\n//\n// At the time of this writing there are the following VR \"entry types\" that will be validated by this method:\n//\n// - screen: Enter \"on-screen\" in 2D\n// - generic: Generic WebVR (platform/OS agnostic indicator if a general 'Enter VR' option should be presented.)\n// - daydream: Google Daydream\n// - gearvr: Oculus GearVR\n// - cardboard: Google Cardboard\n//\nexport async function getAvailableVREntryTypes() {\n  const ua = navigator.userAgent;\n  const isSamsungBrowser = browser.name === \"chrome\" && /SamsungBrowser/.test(ua);\n  const isMobile = AFRAME.utils.device.isMobile();\n  const isMobileVR = AFRAME.utils.device.isMobileVR();\n\n  // This needs to be kept up-to-date with the latest browsers that can support VR and Hubs.\n  // Checking for navigator.getVRDisplays always passes b/c of polyfill.\n  const isWebVRCapableBrowser = window.hasNativeWebVRImplementation;\n\n  const isDaydreamCapableBrowser = !!(isWebVRCapableBrowser && browser.name === \"chrome\" && !isSamsungBrowser);\n  const isIDevice = AFRAME.utils.device.isIOS();\n  const isFirefoxBrowser = browser.name === \"firefox\";\n  const isUIWebView = typeof navigator.mediaDevices === \"undefined\";\n\n  const safari = isIDevice\n    ? !isUIWebView\n      ? VR_DEVICE_AVAILABILITY.yes\n      : VR_DEVICE_AVAILABILITY.maybe\n    : VR_DEVICE_AVAILABILITY.no;\n\n  const isCardboardCapableBrowser = !!(isMobile && !isIDevice && browser.name === \"chrome\" && !isSamsungBrowser);\n\n  let displays = [];\n  try {\n    // Skip getVRDisplays on desktop Chrome since the API is in a broken state there.\n    // See https://github.com/mozilla/hubs/issues/892\n    if (browser.name !== \"chrome\" || isMobile) {\n      // We pull the displays on non-WebVR capable mobile browsers so we can pick up cardboard.\n      displays = isWebVRCapableBrowser || isCardboardCapableBrowser ? await navigator.getVRDisplays() : [];\n    }\n  } catch (e) {\n    console.warn(\"navigator.getVRDisplays() failed\", e);\n  }\n\n  const isOculusBrowser = /Oculus/.test(ua);\n\n  const screen = isMobileVR\n    ? VR_DEVICE_AVAILABILITY.no\n    : isIDevice && isUIWebView\n      ? VR_DEVICE_AVAILABILITY.maybe\n      : VR_DEVICE_AVAILABILITY.yes;\n\n  // HACK -- we prompt the user to install firefox if they click the VR button on a non-WebVR compatible\n  // browser. once we change this (ie when Chrome has VR support) then this check can be removed. Without this\n  // check if you have FF on Mac/Linux you'll get the confusing flow of having a VR button but then\n  // being asked to download FF.\n  const isNonWebVRFirefox = !isWebVRCapableBrowser && isFirefoxBrowser;\n  let generic = isMobile || isNonWebVRFirefox ? VR_DEVICE_AVAILABILITY.no : VR_DEVICE_AVAILABILITY.maybe;\n  let cardboard = VR_DEVICE_AVAILABILITY.no;\n\n  // We only consider GearVR support as \"maybe\" and never \"yes\". The only browser\n  // that will detect GearVR outside of VR is Samsung Internet, and we'd prefer to launch into Oculus\n  // Browser for now since Samsung Internet requires an additional WebVR installation + flag, so return \"maybe\".\n  //\n  // If we are in Oculus Browser (ie, we are literally wearing a GearVR) then return 'yes'.\n  let gearvr = VR_DEVICE_AVAILABILITY.no;\n  if (isMaybeGearVRCompatibleDevice(ua)) {\n    gearvr = isOculusBrowser ? VR_DEVICE_AVAILABILITY.yes : VR_DEVICE_AVAILABILITY.maybe;\n  }\n\n  // For daydream detection, we first check if they are on an Android compatible device, and assume they\n  // may support daydream *unless* this browser has WebVR capabilities, in which case we can do better.\n  let daydream =\n    isMaybeDaydreamCompatibleDevice(ua) && !isMobileVR ? VR_DEVICE_AVAILABILITY.maybe : VR_DEVICE_AVAILABILITY.no;\n\n  cardboard =\n    isCardboardCapableBrowser && displays.find(d => d.capabilities.canPresent && /cardboard/i.test(d.displayName))\n      ? VR_DEVICE_AVAILABILITY.yes\n      : VR_DEVICE_AVAILABILITY.no;\n\n  if (isWebVRCapableBrowser) {\n    // Generic is supported for non-blacklisted devices and presentable HMDs.\n    generic = displays.find(\n      d => d.capabilities.canPresent && !GENERIC_ENTRY_TYPE_DEVICE_BLACKLIST.find(r => r.test(d.displayName))\n    )\n      ? VR_DEVICE_AVAILABILITY.yes\n      : VR_DEVICE_AVAILABILITY.no;\n\n    // For daydream detection, in a WebVR browser we can increase confidence in daydream compatibility.\n    const hasDaydreamWebVRDevice = displays.find(d => /daydream/i.test(d.displayName));\n\n    if (hasDaydreamWebVRDevice) {\n      // If we detected daydream via WebVR\n      daydream = VR_DEVICE_AVAILABILITY.yes;\n      generic = VR_DEVICE_AVAILABILITY.no;\n    } else if (isDaydreamCapableBrowser) {\n      // If we didn't detect daydream in a daydream capable browser, we definitely can't run daydream at all.\n      daydream = VR_DEVICE_AVAILABILITY.no;\n    }\n  }\n\n  return { screen, generic, gearvr, daydream, cardboard, safari };\n}\n","const isMobileVR = AFRAME.utils.device.isMobileVR();\n\nexport function canShare() {\n  // TODO, fix up when OB/FxR support sharing\n  return navigator.share && !isMobileVR;\n}\n\n/**\n * Wraps navigator.share with a fallback to twitter for unsupported browsers\n */\nexport function share(opts) {\n  if (canShare()) {\n    return navigator.share(opts);\n  } else {\n    const { title, url } = opts;\n    const width = 550;\n    const height = 420;\n    const left = (screen.width - width) / 2;\n    const top = (screen.height - height) / 2;\n    const params = `scrollbars=no,menubar=no,toolbar=no,status=no,width=${width},height=${height},top=${top},left=${left}`;\n    const tweetLink = `https://twitter.com/intent/tweet?url=${encodeURIComponent(url)}&text=${encodeURIComponent(\n      title\n    )}`;\n    window.open(tweetLink, \"_blank\", params);\n    return Promise.resolve();\n  }\n}\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport { Route } from \"react-router\";\n\n/**\n * A react-router Route that looks for a key/value pair in the state to render something.\n */\nclass StateRoute extends React.Component {\n  static propTypes = {\n    stateKey: PropTypes.string,\n    stateValue: PropTypes.string,\n    history: PropTypes.object\n  };\n\n  render() {\n    const { history, stateKey, stateValue, ...routeProps } = this.props;\n\n    if (\n      (!history.location.state && !stateValue) ||\n      (history.location.state &&\n        (history.location.state[stateKey] === stateValue || (!history.location.state[stateKey] && !stateValue)))\n    ) {\n      return <Route path=\"/\" {...routeProps} />;\n    }\n\n    return null;\n  }\n}\n\nexport default StateRoute;\n","import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport { FormattedMessage } from \"react-intl\";\n\nimport styles from \"../assets/stylesheets/promote-client-dialog.scss\";\nimport DialogContainer from \"./dialog-container\";\n\nexport default class PromoteClientDialog extends Component {\n  static propTypes = {\n    displayName: PropTypes.string,\n    onConfirm: PropTypes.func,\n    onClose: PropTypes.func\n  };\n\n  render() {\n    return (\n      <DialogContainer title=\"Promote User\" {...this.props}>\n        <div className={styles.message}>\n          <FormattedMessage id=\"promote.message\" />\n        </div>\n        <button\n          className={styles.confirmButton}\n          onClick={() => {\n            this.props.onConfirm();\n            this.props.onClose();\n          }}\n        >\n          <FormattedMessage id=\"promote.confirm-prefix\" />\n          <span>{this.props.displayName}</span>\n        </button>\n        <button className={styles.cancelButton} onClick={() => this.props.onClose()}>\n          <FormattedMessage id=\"promote.cancel\" />\n        </button>\n      </DialogContainer>\n    );\n  }\n}\n","import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport DialogContainer from \"./dialog-container.js\";\nimport PromoteClientDialog from \"./promote-client-dialog.js\";\nimport styles from \"../assets/stylesheets/client-info-dialog.scss\";\nimport { FormattedMessage } from \"react-intl\";\nimport { sluglessPath } from \"../utils/history\";\nimport { getAvatarThumbnailUrl } from \"../utils/avatar-utils\";\n\nexport function getClientInfoClientId(location) {\n  const { search } = location;\n  const urlParams = new URLSearchParams(search);\n  const pathname = sluglessPath(location);\n\n  if (!pathname.startsWith(\"/client\") && !urlParams.get(\"client_id\")) return null;\n  return urlParams.get(\"client_id\") || pathname.substring(9);\n}\n\nexport default class ClientInfoDialog extends Component {\n  static propTypes = {\n    clientId: PropTypes.string,\n    history: PropTypes.object,\n    hubChannel: PropTypes.object,\n    presences: PropTypes.object,\n    performConditionalSignIn: PropTypes.func,\n    onClose: PropTypes.func,\n    showNonHistoriedDialog: PropTypes.func\n  };\n\n  state = {\n    avatarThumbnailUrl: null\n  };\n\n  kick() {\n    const { clientId, performConditionalSignIn, hubChannel, onClose } = this.props;\n\n    performConditionalSignIn(\n      () => hubChannel.can(\"kick_users\"),\n      async () => await hubChannel.kick(clientId),\n      \"kick-user\"\n    );\n\n    onClose();\n  }\n\n  hide() {\n    const { clientId, onClose, hubChannel } = this.props;\n    hubChannel.hide(clientId);\n    onClose();\n  }\n\n  mute() {\n    const { clientId, performConditionalSignIn, hubChannel, onClose } = this.props;\n\n    performConditionalSignIn(\n      () => hubChannel.can(\"mute_users\"),\n      async () => await hubChannel.mute(clientId),\n      \"mute-user\"\n    );\n\n    onClose();\n  }\n\n  addOwner() {\n    const { clientId, performConditionalSignIn, hubChannel, onClose } = this.props;\n    const { profile } = this.getPresenceEntry();\n\n    performConditionalSignIn(\n      () => hubChannel.can(\"update_roles\"),\n      async () => {\n        onClose();\n\n        this.props.showNonHistoriedDialog(PromoteClientDialog, {\n          displayName: profile.displayName,\n          onConfirm: () => hubChannel.addOwner(clientId)\n        });\n      },\n      \"add-owner\"\n    );\n  }\n\n  removeOwner() {\n    const { clientId, performConditionalSignIn, hubChannel, onClose } = this.props;\n\n    performConditionalSignIn(\n      () => hubChannel.can(\"update_roles\"),\n      async () => await hubChannel.removeOwner(clientId),\n      \"remove-owner\"\n    );\n\n    onClose();\n  }\n\n  unhide() {\n    const { clientId, hubChannel, onClose } = this.props;\n    hubChannel.unhide(clientId);\n    onClose();\n  }\n\n  getPresenceEntry() {\n    if (!this.props.presences) return null;\n\n    const presence = Object.entries(this.props.presences).find(([k]) => k === this.props.clientId);\n    if (!presence) return { profile: {}, roles: {} };\n\n    const metas = presence[1].metas;\n    return metas[metas.length - 1];\n  }\n\n  componentDidMount() {\n    const { profile } = this.getPresenceEntry();\n    if (profile.avatarId) {\n      getAvatarThumbnailUrl(profile.avatarId).then(avatarThumbnailUrl => this.setState({ avatarThumbnailUrl }));\n    }\n  }\n\n  render() {\n    const { profile, roles } = this.getPresenceEntry();\n\n    const { displayName, identityName } = profile;\n    const { hubChannel, clientId, onClose } = this.props;\n    const title = (\n      <div className={styles.title}>\n        {displayName}\n        <div className={styles.identityName}>{identityName}</div>\n      </div>\n    );\n    const mayKick = hubChannel.canOrWillIfCreator(\"kick_users\");\n    const mayMute = hubChannel.canOrWillIfCreator(\"mute_users\");\n    const targetIsOwner = !!roles.owner;\n    const targetIsCreator = !!roles.creator;\n    const targetIsSignedIn = !!roles.signed_in;\n    const mayAddOwner = hubChannel.canOrWillIfCreator(\"update_roles\") && !targetIsOwner && !targetIsCreator;\n    const mayRemoveOwner = hubChannel.canOrWillIfCreator(\"update_roles\") && targetIsOwner && !targetIsCreator;\n    const isHidden = hubChannel.isHidden(clientId);\n\n    return (\n      <DialogContainer className={styles.clientInfoDialog} title={title} wide={true} {...this.props}>\n        <div className={styles.roomInfo}>\n          <div className={styles.clientProfileImage}>\n            <img src={this.state.avatarThumbnailUrl} />\n          </div>\n          <div className={styles.primaryActionButtons}>\n            {mayAddOwner && (\n              <button\n                onClick={() => this.addOwner()}\n                disabled={!targetIsSignedIn}\n                title={targetIsSignedIn ? \"Promote\" : `${profile.displayName} is signed out.`}\n              >\n                <img className={styles.buttonIcon} src=\"../assets/images/add-owner.png\" />\n                <FormattedMessage id=\"client-info.add-owner\" />\n              </button>\n            )}\n            {mayRemoveOwner && (\n              <button onClick={() => this.removeOwner()}>\n                <img className={styles.buttonIcon} src=\"../assets/images/remove-owner.png\" />\n                <FormattedMessage id=\"client-info.remove-owner\" />\n              </button>\n            )}\n            {!isHidden && (\n              <button onClick={() => this.hide()}>\n                <FormattedMessage id=\"client-info.hide-button\" />\n              </button>\n            )}\n            {isHidden && (\n              <button onClick={() => this.unhide()}>\n                <FormattedMessage id=\"client-info.unhide-button\" />\n              </button>\n            )}\n            {mayMute && (\n              <button onClick={() => this.mute()}>\n                <FormattedMessage id=\"client-info.mute-button\" />\n              </button>\n            )}\n            {mayKick && (\n              <button onClick={() => this.kick()}>\n                <FormattedMessage id=\"client-info.kick-button\" />\n              </button>\n            )}\n            <button className={styles.cancel} onClick={onClose}>\n              <FormattedMessage id=\"client-info.cancel\" />\n            </button>\n          </div>\n        </div>\n      </DialogContainer>\n    );\n  }\n}\n","import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport { IntlProvider, FormattedMessage } from \"react-intl\";\nimport UnlessFeature from \"./unless-feature\";\n\nimport configs from \"../utils/configs\";\nimport { lang, messages } from \"../utils/i18n\";\nimport loaderStyles from \"../assets/stylesheets/loader.scss\";\n\nclass Loader extends Component {\n  static propTypes = {\n    scene: PropTypes.object,\n    finished: PropTypes.bool,\n    onLoaded: PropTypes.func\n  };\n\n  doneWithInitialLoad = false;\n  state = {\n    loadingNum: 0,\n    loadedNum: 0\n  };\n\n  componentDidMount() {\n    this.props.scene.addEventListener(\"model-loading\", this.onObjectLoading);\n    this.props.scene.addEventListener(\"image-loading\", this.onObjectLoading);\n    this.props.scene.addEventListener(\"pdf-loading\", this.onObjectLoading);\n    this.props.scene.addEventListener(\"model-loaded\", this.onObjectLoaded);\n    this.props.scene.addEventListener(\"image-loaded\", this.onObjectLoaded);\n    this.props.scene.addEventListener(\"pdf-loaded\", this.onObjectLoaded);\n    this.props.scene.addEventListener(\"model-error\", this.onObjectLoaded);\n    this.props.scene.addEventListener(\n      \"environment-scene-loaded\",\n      () => {\n        this.environmentSceneLoaded = true;\n        this.tryFinishLoading();\n      },\n      { once: true }\n    );\n  }\n\n  componentWillUnmount() {\n    this.props.scene.removeEventListener(\"model-loading\", this.onObjectLoading);\n    this.props.scene.removeEventListener(\"image-loading\", this.onObjectLoading);\n    this.props.scene.removeEventListener(\"pdf-loading\", this.onObjectLoading);\n    this.props.scene.removeEventListener(\"model-loaded\", this.onObjectLoaded);\n    this.props.scene.removeEventListener(\"image-loaded\", this.onObjectLoaded);\n    this.props.scene.removeEventListener(\"pdf-loaded\", this.onObjectLoaded);\n    this.props.scene.removeEventListener(\"model-error\", this.onObjectLoaded);\n  }\n\n  onObjectLoading = () => {\n    if (!this.doneWithInitialLoad && this.loadingTimeout) {\n      window.clearTimeout(this.loadingTimeout);\n      this.loadingTimeout = null;\n    }\n\n    this.setState(state => {\n      return { loadingNum: state.loadingNum + 1 };\n    });\n  };\n\n  onObjectLoaded = () => {\n    this.setState(state => {\n      return { loadedNum: state.loadedNum + 1 };\n    });\n\n    this.tryFinishLoading();\n  };\n\n  tryFinishLoading = () => {\n    if (!this.doneWithInitialLoad && this.loadingTimeout) window.clearTimeout(this.loadingTimeout);\n\n    if (this.environmentSceneLoaded) {\n      this.loadingTimeout = window.setTimeout(() => {\n        this.doneWithInitialLoad = true;\n        if (this.props.onLoaded) {\n          this.props.onLoaded();\n        }\n      }, 1500);\n    }\n  };\n\n  render() {\n    const nomore = (\n      <h4 className={loaderStyles.loadingText}>\n        <FormattedMessage id=\"loader.entering_lobby\" />\n      </h4>\n    );\n    const progress =\n      this.state.loadingNum === 0\n        ? \" \"\n        : `${Math.min(this.state.loadedNum, this.state.loadingNum)} / ${this.state.loadingNum} `;\n    const usual = (\n      <h4 className={loaderStyles.loadingText}>\n        <FormattedMessage id=\"loader.loading\" />\n        {progress}\n        <FormattedMessage id={this.state.loadingNum !== 1 ? \"loader.objects\" : \"loader.object\"} />\n        ...\n      </h4>\n    );\n    return (\n      <IntlProvider locale={lang} messages={messages}>\n        <div className=\"loading-panel\">\n          <img className=\"loading-panel__logo\" src={configs.image(\"logo\")} />\n          <UnlessFeature name=\"hide_powered_by\">\n            <div className=\"loading-panel__powered-by\">\n              <span className=\"loading-panel__powered-by__prefix\">\n                <FormattedMessage id=\"home.powered_by_prefix\" />\n              </span>\n              <a href=\"https://github.com/mozilla/hubs-cloud\">\n                <FormattedMessage id=\"home.powered_by_link\" />\n              </a>\n            </div>\n          </UnlessFeature>\n\n          {this.props.finished ? nomore : usual}\n\n          <div className=\"loader-wrap loader-bottom\">\n            <div className=\"loader\">\n              <div className=\"loader-center\" />\n            </div>\n          </div>\n        </div>\n      </IntlProvider>\n    );\n  }\n}\n\nexport default Loader;\n","import React from \"react\";\nimport { FormattedMessage } from \"react-intl\";\nimport PropTypes from \"prop-types\";\n\nimport { WithHoverSound } from \"./wrap-with-audio\";\n\nconst AutoExitWarning = props => (\n  <div className=\"autoexit-panel\">\n    <div className=\"autoexit-panel__title\">\n      <FormattedMessage id=\"autoexit.title\" />\n      <span>{props.secondsRemaining}</span>\n      <FormattedMessage id=\"autoexit.title_units\" />\n    </div>\n    <div className=\"autoexit-panel__subtitle\">\n      <FormattedMessage id={props.message} />\n    </div>\n    <WithHoverSound>\n      <div className=\"autoexit-panel__cancel-button\" onClick={props.onCancel}>\n        <FormattedMessage id=\"autoexit.cancel\" />\n      </div>\n    </WithHoverSound>\n  </div>\n);\n\nAutoExitWarning.propTypes = {\n  message: PropTypes.string,\n  secondsRemaining: PropTypes.number,\n  onCancel: PropTypes.func\n};\n\nexport default AutoExitWarning;\n","import PropTypes from \"prop-types\";\nimport React from \"react\";\n\nfunction InlineSVG(props) {\n  const filteredProps = { ...props };\n  delete filteredProps.src;\n  return <div {...filteredProps} dangerouslySetInnerHTML={{ __html: props.src }} />;\n}\n\nInlineSVG.propTypes = {\n  src: PropTypes.string\n};\n\nfunction InlineSVGButton(props) {\n  const filteredProps = { ...props };\n  delete filteredProps.src;\n  return <button {...filteredProps} dangerouslySetInnerHTML={{ __html: props.src }} />;\n}\n\nInlineSVGButton.propTypes = {\n  src: PropTypes.string\n};\n\nexport { InlineSVG, InlineSVGButton };\n","import React from \"react\";\nimport { FormattedMessage } from \"react-intl\";\nimport PropTypes from \"prop-types\";\n\nimport MobileScreenEntryImg from \"../assets/images/mobile_screen_entry.svgi\";\nimport DesktopScreenEntryImg from \"../assets/images/desktop_screen_entry.svgi\";\nimport GenericVREntryImg from \"../assets/images/generic_vr_entry.svgi\";\nimport GearVREntryImg from \"../assets/images/gearvr_entry.svgi\";\nimport DaydreamEntryImg from \"../assets/images/daydream_entry.svgi\";\nimport styles from \"../assets/stylesheets/entry.scss\";\nimport { WithHoverSound } from \"./wrap-with-audio\";\nimport cx from \"classnames\";\nimport { InlineSVG } from \"./svgi\";\n\nconst EntryButton = props => {\n  return (\n    <WithHoverSound>\n      <button\n        autoFocus={props.autoFocus}\n        className={cx([{ [styles.entryButton]: true, [styles.entryButtonSecondary]: props.secondary }])}\n        onClick={props.onClick}\n      >\n        <InlineSVG src={props.iconSrc} className={styles.icon} />\n        <div className={styles.label}>\n          <div className={styles.contents}>\n            <span>\n              <FormattedMessage id={props.prefixMessageId} />\n            </span>\n            <span className={styles.bolded}>\n              <FormattedMessage id={props.mediumMessageId} />\n            </span>\n            {props.subtitle && (\n              <div className={styles.subtitle}>\n                <FormattedMessage id={props.subtitle} />\n              </div>\n            )}\n          </div>\n        </div>\n      </button>\n    </WithHoverSound>\n  );\n};\n\nEntryButton.propTypes = {\n  onClick: PropTypes.func,\n  autoFocus: PropTypes.bool,\n  iconSrc: PropTypes.string,\n  secondary: PropTypes.bool,\n  prefixMessageId: PropTypes.string,\n  mediumMessageId: PropTypes.string,\n  subtitle: PropTypes.string,\n  isInHMD: PropTypes.bool\n};\n\nconst isMobile = AFRAME.utils.device.isMobile() || AFRAME.utils.device.isMobileVR();\n\nexport const TwoDEntryButton = props => {\n  const entryButtonProps = {\n    ...props,\n    iconSrc: isMobile ? MobileScreenEntryImg : DesktopScreenEntryImg,\n    prefixMessageId: \"entry.screen-prefix\",\n    mediumMessageId: isMobile ? \"entry.mobile-screen\" : \"entry.desktop-screen\"\n  };\n\n  return <EntryButton {...entryButtonProps} />;\n};\n\nexport const GenericEntryButton = props => {\n  const entryButtonProps = {\n    ...props,\n    iconSrc: GenericVREntryImg,\n    prefixMessageId: \"entry.generic-prefix\",\n    mediumMessageId: \"entry.generic-medium\",\n    subtitle: isMobile ? null : \"entry.generic-subtitle-desktop\"\n  };\n\n  return <EntryButton {...entryButtonProps} />;\n};\n\nexport const GearVREntryButton = props => {\n  const entryButtonProps = {\n    ...props,\n    iconSrc: GearVREntryImg,\n    prefixMessageId: \"entry.gearvr-prefix\",\n    mediumMessageId: \"entry.gearvr-medium\"\n  };\n\n  return <EntryButton {...entryButtonProps} />;\n};\n\nexport const DaydreamEntryButton = props => {\n  const entryButtonProps = {\n    ...props,\n    iconSrc: DaydreamEntryImg,\n    prefixMessageId: \"entry.daydream-prefix\",\n    mediumMessageId: \"entry.daydream-medium\"\n  };\n\n  return <EntryButton {...entryButtonProps} />;\n};\n","import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport { injectIntl, FormattedMessage } from \"react-intl\";\nimport classNames from \"classnames\";\nimport { faPencilAlt } from \"@fortawesome/free-solid-svg-icons/faPencilAlt\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\n\nimport configs from \"../utils/configs\";\nimport IfFeature from \"./if-feature\";\nimport { SCHEMA } from \"../storage/store\";\nimport styles from \"../assets/stylesheets/profile.scss\";\nimport { fetchAvatar } from \"../utils/avatar-utils\";\nimport { handleTextFieldFocus, handleTextFieldBlur } from \"../utils/focus-utils\";\nimport { replaceHistoryState } from \"../utils/history\";\nimport StateLink from \"./state-link\";\nimport { faTimes } from \"@fortawesome/free-solid-svg-icons/faTimes\";\n\nimport AvatarPreview from \"./avatar-preview\";\n\nclass ProfileEntryPanel extends Component {\n  static propTypes = {\n    displayNameOverride: PropTypes.string,\n    store: PropTypes.object,\n    mediaSearchStore: PropTypes.object,\n    messages: PropTypes.object,\n    finished: PropTypes.func,\n    intl: PropTypes.object,\n    history: PropTypes.object,\n    avatarId: PropTypes.string,\n    onClose: PropTypes.func\n  };\n\n  state = {\n    avatarId: null,\n    displayName: null,\n    avatar: null\n  };\n\n  constructor(props) {\n    super(props);\n    this.state = this.getStateFromProfile();\n    if (props.avatarId) {\n      this.state.avatarId = props.avatarId;\n    }\n    this.props.store.addEventListener(\"statechanged\", this.storeUpdated);\n    this.scene = document.querySelector(\"a-scene\");\n  }\n\n  getStateFromProfile = () => {\n    const { displayName, avatarId } = this.props.store.state.profile;\n    return { displayName, avatarId };\n  };\n\n  storeUpdated = () => this.setState(this.getStateFromProfile());\n\n  saveStateAndFinish = e => {\n    e && e.preventDefault();\n\n    const { displayName } = this.props.store.state.profile;\n    const { hasChangedName } = this.props.store.state.activity;\n\n    const hasChangedNowOrPreviously = hasChangedName || this.state.displayName !== displayName;\n    this.props.store.update({\n      activity: {\n        hasChangedName: hasChangedNowOrPreviously,\n        hasAcceptedProfile: true\n      },\n      profile: {\n        displayName: this.state.displayName,\n        avatarId: this.state.avatarId\n      }\n    });\n    this.props.finished();\n    this.scene.emit(\"avatar_updated\");\n  };\n\n  stopPropagation = e => {\n    e.stopPropagation();\n  };\n\n  setAvatarFromMediaResult = ({ detail: { entry, selectAction } }) => {\n    if ((entry.type !== \"avatar\" && entry.type !== \"avatar_listing\") || selectAction !== \"use\") return;\n\n    this.setState({ avatarId: entry.id });\n    // Replace history state with the current avatar id since this component gets destroyed when we open the\n    // avatar editor and we want the back button to work. We read the history state back via the avatarId prop.\n    // We read the current state key from history since it could be \"overlay\" or \"entry_step\".\n    replaceHistoryState(this.props.history, this.props.history.location.state.key, \"profile\", { avatarId: entry.id });\n  };\n\n  componentDidMount() {\n    if (this.nameInput) {\n      // stop propagation so that avatar doesn't move when wasd'ing during text input.\n      this.nameInput.addEventListener(\"keydown\", this.stopPropagation);\n      this.nameInput.addEventListener(\"keypress\", this.stopPropagation);\n      this.nameInput.addEventListener(\"keyup\", this.stopPropagation);\n    }\n    this.scene.addEventListener(\"action_selected_media_result_entry\", this.setAvatarFromMediaResult);\n    // This handles editing avatars in the entry_step, since this component remains mounted with the same avatarId\n    this.scene.addEventListener(\"action_avatar_saved\", this.refetchAvatar);\n\n    this.refetchAvatar();\n  }\n\n  componentDidUpdate(_prevProps, prevState) {\n    if (prevState.avatarId !== this.state.avatarId) {\n      this.refetchAvatar();\n    }\n  }\n\n  componentWillUnmount() {\n    this.props.store.removeEventListener(\"statechanged\", this.storeUpdated);\n    if (this.nameInput) {\n      this.nameInput.removeEventListener(\"keydown\", this.stopPropagation);\n      this.nameInput.removeEventListener(\"keypress\", this.stopPropagation);\n      this.nameInput.removeEventListener(\"keyup\", this.stopPropagation);\n    }\n    this.scene.removeEventListener(\"action_selected_media_result_entry\", this.setAvatarFromMediaResult);\n    this.scene.removeEventListener(\"action_avatar_saved\", this.refetchAvatar);\n  }\n\n  refetchAvatar = async () => {\n    const avatar = await fetchAvatar(this.state.avatarId);\n    if (this.state.avatarId !== avatar.avatar_id) return; // This is an old result, ignore it\n    this.setState({ avatar });\n  };\n\n  render() {\n    const { formatMessage } = this.props.intl;\n\n    return (\n      <div className={styles.profileEntry}>\n        <div className={styles.close}>\n          <button autoFocus onClick={() => this.props.onClose()}>\n            <i>\n              <FontAwesomeIcon icon={faTimes} />\n            </i>\n          </button>\n        </div>\n        <form onSubmit={this.saveStateAndFinish} className={styles.form}>\n          <div className={classNames([styles.box])}>\n            <label htmlFor=\"#profile-entry-display-name\" className={styles.title}>\n              <FormattedMessage id=\"profile.header\" />\n            </label>\n            {this.props.displayNameOverride ? (\n              <span className={styles.displayName}>{this.props.displayNameOverride}</span>\n            ) : (\n              <input\n                id=\"profile-entry-display-name\"\n                className={styles.formFieldText}\n                value={this.state.displayName}\n                onFocus={e => handleTextFieldFocus(e.target)}\n                onBlur={() => handleTextFieldBlur()}\n                onChange={e => this.setState({ displayName: e.target.value })}\n                required\n                spellCheck=\"false\"\n                pattern={SCHEMA.definitions.profile.properties.displayName.pattern}\n                title={formatMessage({ id: \"profile.display_name.validation_warning\" })}\n                ref={inp => (this.nameInput = inp)}\n              />\n            )}\n\n            {this.state.avatar ? (\n              <div className={styles.preview}>\n                <AvatarPreview avatarGltfUrl={this.state.avatar.gltf_url} />\n\n                {this.state.avatar.account_id === this.props.store.credentialsAccountId && (\n                  <StateLink\n                    stateKey=\"overlay\"\n                    stateValue=\"avatar-editor\"\n                    stateDetail={{ avatarId: this.state.avatarId, hideDelete: true, returnToProfile: true }}\n                    history={this.props.history}\n                    className={styles.editAvatar}\n                  >\n                    <FontAwesomeIcon icon={faPencilAlt} />\n                  </StateLink>\n                )}\n\n                <div className={styles.chooseAvatar}>\n                  <a onClick={() => this.props.mediaSearchStore.sourceNavigateWithNoNav(\"avatars\", \"use\")}>\n                    <FormattedMessage id=\"profile.choose_avatar\" />\n                  </a>\n                </div>\n              </div>\n            ) : (\n              <div className={styles.preview}>\n                <AvatarPreview />\n                <div className={styles.chooseAvatar}>\n                  <a onClick={() => this.props.mediaSearchStore.sourceNavigateWithNoNav(\"avatars\", \"use\")}>\n                    <FormattedMessage id=\"profile.choose_avatar\" />\n                  </a>\n                </div>\n              </div>\n            )}\n\n            <input className={styles.formSubmit} type=\"submit\" value={formatMessage({ id: \"profile.save\" })} />\n            <div className={styles.links}>\n              <IfFeature name=\"show_terms\">\n                <a\n                  target=\"_blank\"\n                  rel=\"noopener noreferrer\"\n                  href={configs.link(\"terms_of_use\", \"https://github.com/mozilla/hubs/blob/master/TERMS.md\")}\n                >\n                  <FormattedMessage id=\"profile.terms_of_use\" />\n                </a>\n              </IfFeature>\n\n              <IfFeature name=\"show_privacy\">\n                <a\n                  target=\"_blank\"\n                  rel=\"noopener noreferrer\"\n                  href={configs.link(\"privacy_notice\", \"https://github.com/mozilla/hubs/blob/master/PRIVACY.md\")}\n                >\n                  <FormattedMessage id=\"profile.privacy_notice\" />\n                </a>\n              </IfFeature>\n            </div>\n          </div>\n        </form>\n        <img className={styles.logo} src={configs.image(\"logo\")} />\n      </div>\n    );\n  }\n}\n\nexport default injectIntl(ProfileEntryPanel);\n","import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport { injectIntl, FormattedMessage } from \"react-intl\";\nimport classNames from \"classnames\";\nimport { faAngleRight } from \"@fortawesome/free-solid-svg-icons/faAngleRight\";\nimport { faSearch } from \"@fortawesome/free-solid-svg-icons/faSearch\";\nimport { faStar } from \"@fortawesome/free-solid-svg-icons/faStar\";\nimport { faCloudUploadAlt } from \"@fortawesome/free-solid-svg-icons/faCloudUploadAlt\";\nimport { faLink } from \"@fortawesome/free-solid-svg-icons/faLink\";\nimport { faTimes } from \"@fortawesome/free-solid-svg-icons/faTimes\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\n\nimport configs from \"../utils/configs\";\nimport IfFeature from \"./if-feature\";\nimport styles from \"../assets/stylesheets/media-browser.scss\";\nimport { pushHistoryPath, pushHistoryState, sluglessPath } from \"../utils/history\";\nimport { SOURCES } from \"../storage/media-search-store\";\nimport { handleTextFieldFocus, handleTextFieldBlur } from \"../utils/focus-utils\";\nimport { showFullScreenIfWasFullScreen } from \"../utils/fullscreen\";\nimport MediaTiles from \"./media-tiles\";\n\nconst isMobile = AFRAME.utils.device.isMobile();\nconst isMobileVR = AFRAME.utils.device.isMobileVR();\n\nconst PRIVACY_POLICY_LINKS = {\n  videos: \"https://privacy.microsoft.com/en-us/privacystatement\",\n  images: \"https://privacy.microsoft.com/en-us/privacystatement\",\n  gifs: \"https://tenor.com/legal-privacy\",\n  sketchfab: \"https://sketchfab.com/privacy\",\n  poly: \"https://policies.google.com/privacy\",\n  youtube: \"https://policies.google.com/privacy\",\n  twitch: \"https://www.twitch.tv/p/legal/privacy-policy/\"\n};\n\nconst DEFAULT_FACETS = {\n  sketchfab: [\n    { text: \"Featured\", params: { filter: \"featured\" } },\n    { text: \"Animals\", params: { filter: \"animals-pets\" } },\n    { text: \"Architecture\", params: { filter: \"architecture\" } },\n    { text: \"Art\", params: { filter: \"art-abstract\" } },\n    { text: \"Vehicles\", params: { filter: \"cars-vehicles\" } },\n    { text: \"Characters\", params: { filter: \"characters-creatures\" } },\n    { text: \"Culture\", params: { filter: \"cultural-heritage-history\" } },\n    { text: \"Gadgets\", params: { filter: \"electronics-gadgets\" } },\n    { text: \"Fashion\", params: { filter: \"fashion-style\" } },\n    { text: \"Food\", params: { filter: \"food-drink\" } },\n    { text: \"Furniture\", params: { filter: \"furniture-home\" } },\n    { text: \"Music\", params: { filter: \"music\" } },\n    { text: \"Nature\", params: { filter: \"nature-plants\" } },\n    { text: \"News\", params: { filter: \"news-politics\" } },\n    { text: \"People\", params: { filter: \"people\" } },\n    { text: \"Places\", params: { filter: \"places-travel\" } },\n    { text: \"Science\", params: { filter: \"science-technology\" } },\n    { text: \"Sports\", params: { filter: \"sports-fitness\" } },\n    { text: \"Weapons\", params: { filter: \"weapons-military\" } }\n  ],\n  poly: [\n    { text: \"Featured\", params: { filter: \"\" } },\n    { text: \"Animals\", params: { filter: \"animals\" } },\n    { text: \"Architecture\", params: { filter: \"architecture\" } },\n    { text: \"Art\", params: { filter: \"art\" } },\n    { text: \"Food\", params: { filter: \"food\" } },\n    { text: \"Nature\", params: { filter: \"nature\" } },\n    { text: \"Objects\", params: { filter: \"objects\" } },\n    { text: \"People\", params: { filter: \"people\" } },\n    { text: \"Scenes\", params: { filter: \"scenes\" } },\n    { text: \"Transport\", params: { filter: \"transport\" } }\n  ],\n  avatars: [\n    { text: \"Featured\", params: { filter: \"featured\" } },\n    { text: \"My Avatars\", params: { filter: \"my-avatars\" } },\n    { text: \"Newest\", params: { filter: \"\" } }\n  ],\n  favorites: [],\n  scenes: [{ text: \"Featured\", params: { filter: \"featured\" } }, { text: \"My Scenes\", params: { filter: \"my-scenes\" } }]\n};\n\nclass MediaBrowser extends Component {\n  static propTypes = {\n    mediaSearchStore: PropTypes.object,\n    history: PropTypes.object,\n    intl: PropTypes.object,\n    hubChannel: PropTypes.object,\n    onMediaSearchResultEntrySelected: PropTypes.func,\n    performConditionalSignIn: PropTypes.func\n  };\n\n  state = { query: \"\", facets: [], showNav: true, selectNextResult: false, clearStashedQueryOnClose: false };\n\n  constructor(props) {\n    super(props);\n    this.state = this.getStoreAndHistoryState(props);\n    this.props.mediaSearchStore.addEventListener(\"statechanged\", this.storeUpdated);\n    this.props.mediaSearchStore.addEventListener(\"sourcechanged\", this.sourceChanged);\n  }\n\n  componentDidMount() {}\n\n  componentWillUnmount() {\n    this.props.mediaSearchStore.removeEventListener(\"statechanged\", this.storeUpdated);\n    this.props.mediaSearchStore.removeEventListener(\"sourcechanged\", this.sourceChanged);\n  }\n\n  storeUpdated = () => {\n    const newState = this.getStoreAndHistoryState(this.props);\n    this.setState(newState);\n\n    if (this.state.selectNextResult) {\n      if (newState.result && newState.result.entries.length > 0) {\n        this.selectEntry(newState.result.entries[0]);\n      } else {\n        this.close();\n      }\n    }\n  };\n\n  sourceChanged = () => {\n    if (this.inputRef && !isMobile && !isMobileVR) {\n      this.inputRef.focus();\n    }\n  };\n\n  getUrlSource = searchParams =>\n    searchParams.get(\"media_source\") || sluglessPath(this.props.history.location).substring(7);\n\n  getStoreAndHistoryState = props => {\n    const searchParams = new URLSearchParams(props.history.location.search);\n    const result = props.mediaSearchStore.result;\n\n    const newState = { result, query: this.state.query || searchParams.get(\"q\") || \"\" };\n    const urlSource = this.getUrlSource(searchParams);\n    newState.showNav = !!(searchParams.get(\"media_nav\") !== \"false\");\n    newState.selectAction = searchParams.get(\"selectAction\") || \"spawn\";\n\n    if (result && result.suggestions && result.suggestions.length > 0) {\n      newState.facets = result.suggestions.map(s => {\n        return { text: s, params: { q: s } };\n      });\n    } else {\n      newState.facets = DEFAULT_FACETS[urlSource] || [];\n    }\n\n    return newState;\n  };\n\n  handleQueryUpdated = (query, forceNow) => {\n    this.setState({ result: null });\n\n    if (this._sendQueryTimeout) {\n      clearTimeout(this._sendQueryTimeout);\n      this._sendQueryTimeout = null;\n    }\n\n    if (forceNow) {\n      this.props.mediaSearchStore.filterQueryNavigate(\"\", query);\n    } else {\n      // Don't update search on every keystroke, but buffer for some ms.\n      this._sendQueryTimeout = setTimeout(() => {\n        // Drop filter for now, so entering text drops into \"search all\" mode\n        this.props.mediaSearchStore.filterQueryNavigate(\"\", query);\n        this._sendQueryTimeout = null;\n      }, 500);\n    }\n\n    this.setState({ query });\n  };\n\n  handleEntryClicked = (evt, entry) => {\n    evt.preventDefault();\n\n    if (!entry.lucky_query) {\n      this.selectEntry(entry);\n    } else {\n      // Entry has a pointer to another \"i'm feeling lucky\" query -- used for trending videos\n      //\n      // Also, mark the browser to clear the stashed query on close, since this is a temporary\n      // query we are running to get the result we want.\n      this.setState({ clearStashedQueryOnClose: true });\n      this.handleQueryUpdated(entry.lucky_query, true);\n    }\n  };\n\n  onCopyAvatar = () => {\n    this.handleFacetClicked({ params: { filter: \"my-avatars\" } });\n  };\n\n  onCopyScene = () => {\n    this.handleFacetClicked({ params: { filter: \"my-scenes\" } });\n  };\n\n  onShowSimilar = (id, name) => {\n    this.handleFacetClicked({ params: { similar_to: id, similar_name: name } });\n  };\n\n  selectEntry = entry => {\n    if (!this.props.onMediaSearchResultEntrySelected) return;\n    this.props.onMediaSearchResultEntrySelected(entry, this.state.selectAction);\n    this.close();\n  };\n\n  handleSourceClicked = source => {\n    this.props.mediaSearchStore.sourceNavigate(source);\n  };\n\n  handleFacetClicked = facet => {\n    this.setState({ query: \"\" }, () => {\n      const searchParams = this.getSearchClearedSearchParams(true, true, true);\n\n      for (const [k, v] of Object.entries(facet.params)) {\n        searchParams.set(k, v);\n      }\n\n      pushHistoryPath(this.props.history, this.props.history.location.pathname, searchParams.toString());\n    });\n  };\n\n  getSearchClearedSearchParams = (keepSource, keepNav, keepSelectAction) => {\n    return this.props.mediaSearchStore.getSearchClearedSearchParams(\n      this.props.history.location,\n      keepSource,\n      keepNav,\n      keepSelectAction\n    );\n  };\n\n  pushExitMediaBrowserHistory = (stashLastSearchParams = true) => {\n    this.props.mediaSearchStore.pushExitMediaBrowserHistory(this.props.history, stashLastSearchParams);\n  };\n\n  showCustomMediaDialog = source => {\n    const isSceneApiType = source === \"scenes\";\n    const isAvatarApiType = source === \"avatars\";\n    this.pushExitMediaBrowserHistory(!isAvatarApiType);\n    const dialog = isSceneApiType ? \"change_scene\" : isAvatarApiType ? \"avatar_url\" : \"create\";\n    pushHistoryState(this.props.history, \"modal\", dialog);\n  };\n\n  close = () => {\n    showFullScreenIfWasFullScreen();\n    const urlSource = this.getUrlSource(new URLSearchParams(this.props.history.location.search));\n    this.pushExitMediaBrowserHistory(urlSource !== \"avatars\" && urlSource !== \"favorites\");\n    if (this.state.clearStashedQueryOnClose) {\n      this.props.mediaSearchStore.clearStashedQuery();\n    }\n  };\n\n  handlePager = delta => {\n    this.setState({ result: null });\n    this.props.mediaSearchStore.pageNavigate(delta);\n    this.browserDiv.scrollTop = 0;\n  };\n\n  render() {\n    const { formatMessage } = this.props.intl;\n    const searchParams = new URLSearchParams(this.props.history.location.search);\n    const urlSource = this.getUrlSource(searchParams);\n    const isSceneApiType = urlSource === \"scenes\";\n    const isFavorites = urlSource === \"favorites\";\n    const showCustomOption =\n      !isFavorites && (!isSceneApiType || this.props.hubChannel.canOrWillIfCreator(\"update_hub\"));\n    const entries = (this.state.result && this.state.result.entries) || [];\n    const hideSearch = urlSource === \"favorites\";\n    const showEmptyStringOnNoResult = urlSource !== \"avatars\" && urlSource !== \"scenes\";\n\n    const facets = this.state.facets && this.state.facets.length > 0 && this.state.facets;\n\n    // Don't render anything if we just did a feeling lucky query and are waiting on result.\n    if (this.state.selectNextResult) return <div />;\n    const handleCustomClicked = urlSource => {\n      const isAvatarApiType = urlSource === \"avatars\";\n      if (isAvatarApiType) {\n        this.showCustomMediaDialog(urlSource);\n      } else {\n        this.props.performConditionalSignIn(\n          () => !isSceneApiType || this.props.hubChannel.can(\"update_hub\"),\n          () => this.showCustomMediaDialog(urlSource),\n          \"change-scene\"\n        );\n      }\n    };\n\n    const activeFilter =\n      searchParams.get(\"filter\") || (searchParams.get(\"similar_to\") && \"similar\") || (!searchParams.get(\"q\") && \"\");\n\n    const meta = this.state.result && this.state.result.meta;\n    const hasNext = !!(meta && meta.next_cursor);\n    const hasPrevious = searchParams.get(\"cursor\");\n    const page = (meta && meta.page) || 0;\n    const apiSource = (meta && meta.source) || null;\n    const isVariableWidth = [\"bing_images\", \"tenor\"].includes(apiSource);\n\n    return (\n      <div className={styles.mediaBrowser} ref={browserDiv => (this.browserDiv = browserDiv)}>\n        <div className={classNames([styles.box, styles.darkened])}>\n          <div className={classNames(styles.header, { [styles.noSearch]: hideSearch })}>\n            <div className={styles.headerLeft}>\n              <button onClick={() => this.close()}>\n                <i>\n                  <FontAwesomeIcon icon={faTimes} />\n                </i>\n              </button>\n            </div>\n            <div className={styles.headerCenter}>\n              {urlSource === \"favorites\" && (\n                <div className={styles.favoritesHeader}>\n                  <i>\n                    <FontAwesomeIcon icon={faStar} />\n                  </i>\n                  <FormattedMessage id=\"media-browser.favorites-header\" />\n                </div>\n              )}\n              {!hideSearch && (\n                <div className={styles.search}>\n                  <i className={styles.searchIcon}>\n                    <FontAwesomeIcon icon={faSearch} />\n                  </i>\n                  <input\n                    type=\"text\"\n                    autoFocus={!isMobile && !isMobileVR}\n                    ref={r => (this.inputRef = r)}\n                    placeholder={formatMessage({\n                      id: `media-browser.search-placeholder.${urlSource}`\n                    })}\n                    onFocus={e => handleTextFieldFocus(e.target)}\n                    onBlur={() => handleTextFieldBlur()}\n                    onKeyDown={e => {\n                      if (e.key === \"Enter\" && e.ctrlKey) {\n                        if (entries.length > 0 && !this._sendQueryTimeout) {\n                          this.handleEntryClicked(e, entries[0]);\n                        } else if (this.state.query.trim() !== \"\") {\n                          this.handleQueryUpdated(this.state.query, true);\n                          this.setState({ selectNextResult: true });\n                        } else {\n                          this.close();\n                        }\n                      } else if (e.key === \"Escape\" || (e.key === \"Enter\" && isMobile)) {\n                        e.target.blur();\n                      }\n                    }}\n                    value={this.state.query}\n                    onChange={e => this.handleQueryUpdated(e.target.value)}\n                  />\n                  <i className={styles.searchClear} onClick={() => this.handleQueryUpdated(\"\", true)}>\n                    <FontAwesomeIcon icon={faTimes} />\n                  </i>\n                </div>\n              )}\n              <div className={styles.engineAttribution}>\n                {!hideSearch &&\n                  urlSource !== \"scenes\" &&\n                  urlSource !== \"avatars\" &&\n                  urlSource !== \"favorites\" && (\n                    <div className={styles.engineAttributionContents}>\n                      <FormattedMessage id={`media-browser.powered_by.${urlSource}`} />\n                      {PRIVACY_POLICY_LINKS[urlSource] && (\n                        <a href={PRIVACY_POLICY_LINKS[urlSource]} target=\"_blank\" rel=\"noreferrer noopener\">\n                          <FormattedMessage id=\"media-browser.privacy_policy\" />\n                        </a>\n                      )}\n                    </div>\n                  )}\n                {urlSource === \"scenes\" && (\n                  <div className={styles.engineAttributionContents}>\n                    <IfFeature name=\"enable_spoke\">\n                      <FormattedMessage id={`media-browser.powered_by.${urlSource}`} />\n                      <a href=\"/spoke\" target=\"_blank\" rel=\"noreferrer noopener\">\n                        <FormattedMessage id=\"editor-name\" />\n                      </a>\n                    </IfFeature>\n                    {configs.feature(\"enable_spoke\") && configs.feature(\"show_issue_report_link\") && \"|\"}\n                    <IfFeature name=\"show_issue_report_link\">\n                      <a target=\"_blank\" rel=\"noopener noreferrer\" href={configs.link(\"issue_report\", \"/#/report\")}>\n                        <FormattedMessage id=\"media-browser.report_issue\" />\n                      </a>\n                    </IfFeature>\n                  </div>\n                )}\n              </div>\n            </div>\n            <div className={styles.headerRight}>\n              {showCustomOption && (\n                <a onClick={() => handleCustomClicked(urlSource)} className={styles.createButton}>\n                  <i>\n                    <FontAwesomeIcon icon={[\"scenes\", \"avatars\"].includes(urlSource) ? faLink : faCloudUploadAlt} />\n                  </i>\n                </a>\n              )}\n              {showCustomOption && (\n                <a onClick={() => handleCustomClicked(urlSource)} className={styles.createLink}>\n                  <FormattedMessage\n                    id={`media-browser.add_custom_${\n                      this.state.result && isSceneApiType ? \"scene\" : urlSource === \"avatars\" ? \"avatar\" : \"object\"\n                    }`}\n                  />\n                </a>\n              )}\n            </div>\n          </div>\n\n          {this.state.showNav && (\n            <div className={styles.nav}>\n              {SOURCES.map(s => (\n                <a\n                  onClick={() => this.handleSourceClicked(s)}\n                  key={s}\n                  className={classNames({ [styles.navSource]: true, [styles.navSourceSelected]: urlSource === s })}\n                >\n                  <FormattedMessage id={`media-browser.nav_title.${s}`} />\n                </a>\n              ))}\n              <div className={styles.navRightPad}>&nbsp;</div>\n              <div className={styles.navScrollArrow}>\n                <FontAwesomeIcon icon={faAngleRight} />\n              </div>\n            </div>\n          )}\n\n          {(facets || activeFilter === \"similar\") && (\n            <div className={styles.facets}>\n              {facets &&\n                facets.map((s, i) => (\n                  <a\n                    onClick={() => this.handleFacetClicked(s)}\n                    key={i}\n                    className={classNames(styles.facet, { selected: s.params.filter === activeFilter })}\n                  >\n                    {s.text}\n                  </a>\n                ))}\n              {activeFilter === \"similar\" && (\n                <a className={classNames(styles.facet, \"selected\")}>\n                  <FormattedMessage\n                    id=\"media-browser.similar-to-facet\"\n                    values={{ name: searchParams.get(\"similar_name\") }}\n                  />\n                </a>\n              )}\n            </div>\n          )}\n\n          {this.props.mediaSearchStore.isFetching ||\n          this._sendQueryTimeout ||\n          entries.length > 0 ||\n          !showEmptyStringOnNoResult ? (\n            <MediaTiles\n              entries={entries}\n              hasNext={hasNext}\n              hasPrevious={hasPrevious}\n              page={page}\n              isVariableWidth={isVariableWidth}\n              history={this.props.history}\n              urlSource={urlSource}\n              handleEntryClicked={this.handleEntryClicked}\n              onCopyAvatar={this.onCopyAvatar}\n              onCopyScene={this.onCopyScene}\n              onShowSimilar={this.onShowSimilar}\n              handlePager={this.handlePager}\n            />\n          ) : (\n            <div className={styles.emptyString}>\n              <FormattedMessage id={`media-browser.empty.${urlSource}`} />\n            </div>\n          )}\n        </div>\n      </div>\n    );\n  }\n}\n\nexport default injectIntl(MediaBrowser);\n","import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport cx from \"classnames\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport { faPaperclip } from \"@fortawesome/free-solid-svg-icons/faPaperclip\";\nimport { faTimes } from \"@fortawesome/free-solid-svg-icons/faTimes\";\n\nimport { messages } from \"../utils/i18n\";\nimport configs from \"../utils/configs\";\nimport IfFeature from \"./if-feature\";\nimport giphyLogo from \"../assets/images/giphy_logo.png\";\nimport styles from \"../assets/stylesheets/create-object-dialog.scss\";\nimport ducky from \"../assets/models/DuckyMesh.glb\";\nimport DialogContainer from \"./dialog-container.js\";\nimport { handleTextFieldFocus, handleTextFieldBlur } from \"../utils/focus-utils\";\nimport { getAbsoluteHref } from \"../utils/media-url-utils\";\nimport { WithHoverSound } from \"./wrap-with-audio\";\n\nconst attributionHostnames = {\n  \"giphy.com\": giphyLogo,\n  \"media.giphy.com\": giphyLogo\n};\n\nconst isMobile = AFRAME.utils.device.isMobile() || AFRAME.utils.device.isMobileVR();\nconst instructions = \"Paste a URL to an image, video, model, scene, or upload.\";\nconst desktopTips = `Tip: You can paste URLs directly into ${messages[\"app-name\"]} with Ctrl+V`;\nconst references = (\n  <span>\n    For models, try{\" \"}\n    <a href=\"https://sketchfab.com/search?features=downloadable&type=models\" target=\"_blank\" rel=\"noopener noreferrer\">\n      Sketchfab\n    </a>{\" \"}\n    and{\" \"}\n    <a href=\"http://poly.google.com/\" target=\"_blank\" rel=\"noopener noreferrer\">\n      Google Poly\n    </a>\n    <IfFeature name=\"show_model_collection_link\">\n      , or our{\" \"}\n      <a\n        href={configs.link(\"model_collection\", \"https://sketchfab.com/mozillareality\")}\n        target=\"_blank\"\n        rel=\"noopener noreferrer\"\n      >\n        collection\n      </a>\n    </IfFeature>.\n  </span>\n);\n\nconst mobileInstructions = (\n  <div>\n    <p>{instructions}</p>\n    <p>{references}</p>\n  </div>\n);\nconst desktopInstructions = (\n  <div>\n    <p>{instructions}</p>\n    <p>{references}</p>\n    <p>{desktopTips}</p>\n  </div>\n);\n\nlet lastUrl = \"\";\nconst fileInputId = \"file-input\";\n\nexport default class CreateObjectDialog extends Component {\n  state = {\n    url: \"\",\n    file: null,\n    fileName: \"\"\n  };\n\n  static propTypes = {\n    onCreate: PropTypes.func,\n    onClose: PropTypes.func\n  };\n\n  componentDidMount() {\n    this.setState({ url: lastUrl });\n  }\n\n  componentWillUnmount() {\n    lastUrl = this.state.url;\n  }\n\n  onUrlChange = e => {\n    let attributionImage = this.state.attributionImage;\n    if (e.target && e.target.value && e.target.validity.valid) {\n      const url = new URL(e.target.value);\n      attributionImage = attributionHostnames[url.hostname];\n    }\n    this.setState({\n      url: e.target && e.target.value,\n      attributionImage: attributionImage\n    });\n  };\n\n  onFileChange = e => {\n    this.setState({\n      file: e.target.files[0],\n      fileName: e.target.files[0].name\n    });\n  };\n\n  reset = e => {\n    e.preventDefault();\n    this.setState({\n      url: \"\",\n      file: null,\n      fileName: \"\"\n    });\n    this.fileInput.value = null;\n  };\n\n  onCreateClicked = e => {\n    e.preventDefault();\n    this.props.onCreate(this.state.file || this.state.url || getAbsoluteHref(location.href, ducky));\n    this.props.onClose();\n  };\n\n  render() {\n    const { onCreate, onClose, ...other } = this.props; // eslint-disable-line no-unused-vars\n\n    const cancelButton = (\n      <WithHoverSound>\n        <label className={cx(styles.smallButton, styles.cancelIcon)} onClick={this.reset}>\n          <FontAwesomeIcon icon={faTimes} />\n        </label>\n      </WithHoverSound>\n    );\n    const uploadButton = (\n      <WithHoverSound>\n        <label htmlFor={fileInputId} className={cx(styles.smallButton, styles.uploadIcon)}>\n          <FontAwesomeIcon icon={faPaperclip} />\n        </label>\n      </WithHoverSound>\n    );\n    const filenameLabel = <label className={cx(styles.leftSideOfInput)}>{this.state.fileName}</label>;\n    const urlInput = (\n      <input\n        className={cx(styles.leftSideOfInput)}\n        placeholder=\"Image/Video/glTF URL\"\n        onFocus={e => handleTextFieldFocus(e.target)}\n        onBlur={() => handleTextFieldBlur()}\n        onChange={this.onUrlChange}\n        type=\"url\"\n        value={this.state.url}\n      />\n    );\n\n    return (\n      <DialogContainer title=\"Create Object\" onClose={this.props.onClose} {...other}>\n        <div>\n          {isMobile ? mobileInstructions : desktopInstructions}\n          <form onSubmit={this.onCreateClicked}>\n            <div className={styles.addMediaForm}>\n              <input\n                id={fileInputId}\n                ref={f => (this.fileInput = f)}\n                className={styles.hideFileInput}\n                type=\"file\"\n                onChange={this.onFileChange}\n              />\n              <div className={styles.inputBorder}>\n                {this.state.file ? filenameLabel : urlInput}\n                {this.state.url || this.state.fileName ? cancelButton : uploadButton}\n              </div>\n              <div className={styles.buttons}>\n                <WithHoverSound>\n                  <button className={styles.actionButton}>\n                    <span>Create</span>\n                  </button>\n                </WithHoverSound>\n              </div>\n              {this.state.attributionImage ? (\n                <div>\n                  <img src={this.state.attributionImage} />\n                </div>\n              ) : null}\n            </div>\n          </form>\n        </div>\n      </DialogContainer>\n    );\n  }\n}\n","import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport { FormattedMessage } from \"react-intl\";\nimport cx from \"classnames\";\n\nimport IfFeature from \"./if-feature\";\nimport styles from \"../assets/stylesheets/change-scene-dialog.scss\";\nimport DialogContainer from \"./dialog-container.js\";\nimport { handleTextFieldFocus, handleTextFieldBlur } from \"../utils/focus-utils\";\nimport { messages } from \"../utils/i18n\";\nimport { isValidSceneUrl } from \"../utils/scene-url-utils\";\n\nexport default class ChangeSceneDialog extends Component {\n  state = {\n    url: \"\",\n    submitting: false\n  };\n\n  static propTypes = {\n    onChange: PropTypes.func,\n    onClose: PropTypes.func\n  };\n\n  constructor(props) {\n    super(props);\n    this.urlValidationPromise = null;\n  }\n\n  onUrlChange = e => {\n    const urlInput = e.target;\n    const url = urlInput.value;\n    this.setState({ url });\n\n    urlInput.setCustomValidity(\"\");\n\n    this.urlValidationPromise = new Promise(async resolve => {\n      urlInput.setCustomValidity((await isValidSceneUrl(url.trim())) ? \"\" : messages[\"invalid-scene-url\"]);\n      resolve();\n    });\n  };\n\n  reset = e => {\n    e.preventDefault();\n    this.setState({ url: \"\" });\n  };\n\n  onSubmit = async e => {\n    e.preventDefault();\n\n    this.setState({ submitting: true });\n\n    const form = e.target;\n\n    if (this.state.url) {\n      await this.urlValidationPromise;\n      if (form.checkValidity()) {\n        this.props.onChange(this.state.url.trim());\n        this.props.onClose();\n      } else {\n        form.reportValidity();\n        this.setState({ submitting: false });\n      }\n    }\n  };\n\n  render() {\n    const { onChange, onClose } = this.props; // eslint-disable-line no-unused-vars\n\n    return (\n      <DialogContainer title=\"Custom Scene\" onClose={this.props.onClose}>\n        <div>\n          <div>\n            <p>\n              Paste a URL to a{\" \"}\n              <IfFeature name=\"enable_spoke\">\n                <a href=\"/spoke\" target=\"_blank\" rel=\"noopener noreferrer\">\n                  <FormattedMessage id=\"editor-name\" />\n                </a>{\" \"}\n              </IfFeature>\n              scene or a URL to a{\" \"}\n              <a href=\"https://en.wikipedia.org/wiki/GlTF#GLB\" target=\"_blank\" rel=\"noopener noreferrer\">\n                GLB\n              </a>.\n            </p>\n          </div>\n          <form onSubmit={this.onSubmit}>\n            <div className={styles.changeSceneForm}>\n              <div className={styles.inputBorder}>\n                <input\n                  className={cx(styles.leftSideOfInput)}\n                  placeholder=\"Scene URL\"\n                  onFocus={e => handleTextFieldFocus(e.target)}\n                  onBlur={() => handleTextFieldBlur()}\n                  onChange={this.onUrlChange}\n                  type=\"url\"\n                  value={this.state.url}\n                />\n              </div>\n              <div className={styles.buttons}>\n                <button className={styles.actionButton} disabled={this.state.submitting}>\n                  <FormattedMessage id=\"change-scene-dialog.change-scene\" />\n                </button>\n              </div>\n              <IfFeature name=\"enable_spoke\">\n                <div className={styles.spokeCreate}>\n                  <div>\n                    <FormattedMessage id=\"change-scene-dialog.create-in-spoke\" />\n                  </div>\n                  <a className={styles.spokeLaunch} href=\"/spoke/new\" target=\"_blank\" rel=\"noopener noreferrer\">\n                    <FormattedMessage id=\"change-scene-dialog.new-spoke-project\" />\n                  </a>\n                </div>\n              </IfFeature>\n            </div>\n          </form>\n        </div>\n      </DialogContainer>\n    );\n  }\n}\n","import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport { FormattedMessage } from \"react-intl\";\n\nimport styles from \"../assets/stylesheets/avatar-url-dialog.scss\";\nimport DialogContainer from \"./dialog-container.js\";\nimport { handleTextFieldFocus, handleTextFieldBlur } from \"../utils/focus-utils\";\n\nexport default class AvatarUrlDialog extends Component {\n  state = {\n    url: \"\"\n  };\n\n  static propTypes = {\n    onChange: PropTypes.func,\n    onClose: PropTypes.func\n  };\n\n  onUrlChange = e => {\n    this.setState({\n      url: e.target && e.target.value\n    });\n  };\n\n  onChangeClicked = e => {\n    e.preventDefault();\n\n    if (this.state.url) {\n      this.props.onChange(this.state.url);\n    }\n\n    this.props.onClose();\n  };\n\n  render() {\n    return (\n      <DialogContainer title=\"Custom Avatar URL\" className={styles.avatarUrlDialog} onClose={this.props.onClose}>\n        <p>\n          Paste a URL to a{\" \"}\n          <a href=\"https://en.wikipedia.org/wiki/GlTF#GLB\" target=\"_blank\" rel=\"noopener noreferrer\">\n            GLB\n          </a>.\n        </p>\n        <form className=\"form\" onSubmit={this.onChangeClicked}>\n          <input\n            className=\"url-field\"\n            placeholder=\"Avatar GLB URL\"\n            onFocus={e => handleTextFieldFocus(e.target)}\n            onBlur={() => handleTextFieldBlur()}\n            onChange={this.onUrlChange}\n            type=\"url\"\n            value={this.state.url}\n          />\n          <button className=\"submit\">\n            <FormattedMessage id=\"avatar-url-dialog.apply\" />\n          </button>\n        </form>\n      </DialogContainer>\n    );\n  }\n}\n","import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport copy from \"copy-to-clipboard\";\nimport classNames from \"classnames\";\nimport { FormattedMessage } from \"react-intl\";\nimport { faTimes } from \"@fortawesome/free-solid-svg-icons/faTimes\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport configs from \"../utils/configs\";\n\nimport { messages } from \"../utils/i18n\";\nimport { share, canShare } from \"../utils/share\";\n\nimport { WithHoverSound } from \"./wrap-with-audio\";\nimport styles from \"../assets/stylesheets/invite-dialog.scss\";\n\nfunction pad(num, size) {\n  let s = `${num}`;\n  while (s.length < size) s = `0${s}`;\n  return s;\n}\n\nexport default class InviteDialog extends Component {\n  static propTypes = {\n    entryCode: PropTypes.number,\n    hubId: PropTypes.string,\n    allowShare: PropTypes.bool,\n    isModal: PropTypes.bool,\n    onClose: PropTypes.func,\n    hasPush: PropTypes.bool,\n    isSubscribed: PropTypes.bool,\n    onSubscribeChanged: PropTypes.func,\n    embedUrl: PropTypes.string\n  };\n\n  state = {\n    copyButtonActive: false,\n    shareButtonActive: false\n  };\n\n  shareClicked = url => {\n    this.setState({ shareButtonActive: true });\n    share({ url, title: `Join me now in ${messages[\"share-hashtag\"]}!` }).then(() => {\n      this.setState({ shareButtonActive: false });\n    });\n  };\n\n  copyClicked = link => {\n    this.setState({ copyButtonActive: true });\n    setTimeout(() => this.setState({ copyButtonActive: false }), 5000);\n\n    copy(link);\n  };\n\n  render() {\n    const { entryCode, embedUrl } = this.props;\n\n    const entryCodeString = pad(entryCode, 6);\n    const shortLinkText = `${configs.SHORTLINK_DOMAIN}/${this.props.hubId}`;\n    const shortLink = \"https://\" + shortLinkText;\n    const embedText = `<iframe src=\"${embedUrl}\" style=\"width: 1024px; height: 768px;\" allow=\"microphone; camera; vr; speaker;\"></iframe>`;\n\n    return (\n      <div className={classNames({ [styles.dialog]: true, [styles.modal]: this.props.isModal })}>\n        {!this.props.isModal && <div className={styles.attachPoint} />}\n        <div>\n          <FormattedMessage id={`invite.or_visit${this.props.isModal ? \"_modal\" : \"\"}`} />\n        </div>\n        <div className={styles.domain}>\n          <input type=\"text\" readOnly onFocus={e => e.target.select()} value={shortLinkText} />\n        </div>\n        <div className={styles.buttons}>\n          <WithHoverSound>\n            <button className={styles.linkButton} onClick={this.copyClicked.bind(this, shortLink)}>\n              <span>{this.state.copyButtonActive ? \"copied!\" : \"copy\"}</span>\n            </button>\n          </WithHoverSound>\n          {this.props.allowShare &&\n            canShare() && (\n              <WithHoverSound>\n                <button className={styles.linkButton} onClick={this.shareClicked.bind(this, shortLink)}>\n                  <span>{this.state.shareButtonActive ? \"sharing...\" : \"share\"}</span>\n                </button>\n              </WithHoverSound>\n            )}\n          {this.props.allowShare &&\n            !canShare() && (\n              <WithHoverSound>\n                <button className={styles.linkButton} onClick={this.shareClicked.bind(this, shortLink)}>\n                  <FormattedMessage id=\"invite.tweet\" />\n                </button>\n              </WithHoverSound>\n            )}\n        </div>\n        <WithHoverSound>\n          <button className={styles.close} onClick={() => this.props.onClose()}>\n            <i>\n              <FontAwesomeIcon icon={faTimes} />\n            </i>\n          </button>\n        </WithHoverSound>\n        <div className={styles.linkCode}>\n          <FormattedMessage id={`invite.enter_via${this.props.isModal ? \"_modal\" : \"\"}`} />\n          <a\n            href={`https://${configs.SHORTLINK_DOMAIN}`}\n            target=\"_blank\"\n            className={styles.hubLinkLink}\n            rel=\"noopener noreferrer\"\n          >\n            {configs.SHORTLINK_DOMAIN}\n          </a>\n          {/* <div className={styles.linkcode}> */}\n          <FormattedMessage id=\"invite.and_enter_code\" />\n          {/* </div> */}\n        </div>\n        <div className={styles.code}>\n          {entryCodeString.split(\"\").map((d, i) => (\n            <div className={classNames({ [styles.digit]: true, [styles[`digit_${i}`]]: true })} key={`link_code_${i}`}>\n              {d}\n            </div>\n          ))}\n        </div>\n        <div className={styles.codeDuration}>\n          <FormattedMessage id=\"invite.duration_of_code\" />\n        </div>\n        {embedUrl && (\n          <div className={styles.embed}>\n            <div>\n              <FormattedMessage id={`invite.embed`} />\n            </div>\n            <div className={styles.embedText}>\n              <input\n                type=\"text\"\n                readOnly\n                onFocus={e => {\n                  e.target.select();\n                  this.setState({ showEmbedTip: true });\n                }}\n                onBlur={() => this.setState({ showEmbedTip: false })}\n                value={embedText}\n              />\n            </div>\n            {this.state.showEmbedTip && (\n              <div className={styles.embedTipWrap}>\n                <div className={styles.embedTip}>\n                  <div className={styles.embedTipAttachPoint} />\n                  <FormattedMessage id=\"invite.embed-tip\" />\n                </div>\n              </div>\n            )}\n          </div>\n        )}\n        {this.props.hasPush && (\n          <div className={styles.subscribe}>\n            <input\n              id=\"subscribe\"\n              type=\"checkbox\"\n              onChange={() => this.props.onSubscribeChanged()}\n              checked={this.props.isSubscribed}\n            />\n            <label htmlFor=\"subscribe\">\n              <FormattedMessage id=\"entry.notify_me\" />\n            </label>\n          </div>\n        )}\n\n        {this.props.isModal && (\n          <button className={styles.enterVrButton} onClick={() => this.props.onClose()}>\n            <FormattedMessage id=\"entry.return-to-vr\" />\n          </button>\n        )}\n      </div>\n    );\n  }\n}\n","import React, { Component } from \"react\";\nimport DialogContainer from \"./dialog-container.js\";\nimport PropTypes from \"prop-types\";\nimport { WithHoverSound } from \"./wrap-with-audio\";\n\nexport default class InviteTeamDialog extends Component {\n  static propTypes = {\n    hubChannel: PropTypes.object\n  };\n\n  state = {\n    inviteButtonText: \"invite a hubs team member\"\n  };\n\n  constructor(props) {\n    super(props);\n  }\n\n  inviteClicked = () => {\n    this.setState({ inviteButtonText: \"OK! We'll be there shortly.\" });\n    this.props.hubChannel.requestSupport();\n  };\n\n  render() {\n    return (\n      <DialogContainer title=\"Let's Chat!\" {...this.props}>\n        <div>\n          <div>\n            <p>Have an idea for Hubs? Having trouble?</p>\n            <p>We&apos;d love to chat. Someone from our team will join you in just a few minutes.</p>\n          </div>\n          <div className=\"invite-team-form\">\n            <div className=\"invite-team-form__buttons\">\n              <WithHoverSound>\n                <button className=\"invite-team-form__action-button\" onClick={this.inviteClicked}>\n                  <span>{this.state.inviteButtonText}</span>\n                </button>\n              </WithHoverSound>\n            </div>\n          </div>\n        </div>\n      </DialogContainer>\n    );\n  }\n}\n","import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport classNames from \"classnames\";\nimport { FormattedMessage } from \"react-intl\";\n\nimport configs from \"../utils/configs\";\nimport LinkDialogHeader from \"../assets/images/link_dialog_header.svg\";\nimport { WithHoverSound } from \"./wrap-with-audio\";\n\nimport styles from \"../assets/stylesheets/link-dialog.scss\";\n\nexport default class LinkDialog extends Component {\n  static propTypes = {\n    linkCode: PropTypes.string,\n    onClose: PropTypes.func\n  };\n\n  render() {\n    const { linkCode } = this.props;\n\n    return (\n      <div className={styles.dialog}>\n        <WithHoverSound>\n          <div className={styles.close} onClick={() => this.props.onClose()}>\n            <span>×</span>\n          </div>\n        </WithHoverSound>\n        <div>\n          {!linkCode && (\n            <div>\n              <div className={classNames(\"loading-panel\", styles.codeLoadingPanel)}>\n                <div className=\"loader-wrap\">\n                  <div className=\"loader\">\n                    <div className=\"loader-center\" />\n                  </div>\n                </div>\n              </div>\n            </div>\n          )}\n          {linkCode && (\n            <div className={styles.contents}>\n              <img className={styles.imageHeader} src={LinkDialogHeader} />\n              <div className={styles.header}>\n                <FormattedMessage id=\"link.connect_headset\" />\n              </div>\n              <div>\n                <FormattedMessage id=\"link.in_your_browser\" />\n              </div>\n              <a\n                href={`https://${configs.SHORTLINK_DOMAIN}`}\n                className={styles.domain}\n                target=\"_blank\"\n                rel=\"noopener noreferrer\"\n              >\n                {configs.SHORTLINK_DOMAIN}\n              </a>\n              <div>\n                <FormattedMessage id=\"link.enter_code\" />\n              </div>\n              {linkCode && (\n                <div className={styles.code}>\n                  {linkCode.split(\"\").map((d, i) => (\n                    <span className={styles.digit} key={`link_code_${i}`}>\n                      {d}\n                    </span>\n                  ))}\n                </div>\n              )}\n              <div className={styles.keepOpen}>\n                <FormattedMessage id=\"link.do_not_close\" />\n              </div>\n              <WithHoverSound>\n                <button className={styles.closeButton} onClick={() => this.props.onClose()}>\n                  <FormattedMessage id=\"link.cancel\" />\n                </button>\n              </WithHoverSound>\n            </div>\n          )}\n        </div>\n      </div>\n    );\n  }\n}\n","import React, { Component } from \"react\";\nimport copy from \"copy-to-clipboard\";\n\nimport { messages } from \"../utils/i18n\";\nimport DialogContainer from \"./dialog-container.js\";\nimport { WithHoverSound } from \"./wrap-with-audio\";\n\nexport default class SafariDialog extends Component {\n  state = {\n    copyLinkButtonText: \"copy\"\n  };\n\n  copyLinkClicked = link => {\n    copy(link);\n    this.setState({ copyLinkButtonText: \"copied!\" });\n  };\n\n  render() {\n    const onCopyClicked = this.copyLinkClicked.bind(this, document.location);\n    return (\n      <DialogContainer title=\"Open in Safari\" {...this.props}>\n        <div>\n          <div>\n            {messages[\"app-name\"]} does not support your current browser on iOS. Copy and paste this link directly in\n            Safari.\n          </div>\n          <div className=\"invite-form\">\n            <input\n              type=\"text\"\n              readOnly\n              onFocus={e => e.target.select()}\n              value={document.location}\n              className=\"invite-form__link_field\"\n            />\n            <div className=\"invite-form__buttons\">\n              <WithHoverSound>\n                <button className=\"invite-form__action-button\" onClick={onCopyClicked}>\n                  <span>{this.state.copyLinkButtonText}</span>\n                </button>\n              </WithHoverSound>\n            </div>\n          </div>\n        </div>\n      </DialogContainer>\n    );\n  }\n}\n","import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport cx from \"classnames\";\nimport { FormattedMessage } from \"react-intl\";\nimport { handleTextFieldFocus, handleTextFieldBlur } from \"../utils/focus-utils\";\n\nimport styles from \"../assets/stylesheets/room-settings-dialog.scss\";\nimport DialogContainer from \"./dialog-container\";\n\nexport default class RoomSettingsDialog extends Component {\n  static propTypes = {\n    initialSettings: PropTypes.object,\n    onChange: PropTypes.func,\n    onClose: PropTypes.func,\n    showRoomAccessSettings: PropTypes.bool\n  };\n\n  constructor(props) {\n    super(props);\n    this.state = props.initialSettings;\n  }\n\n  onSubmit = e => {\n    e.preventDefault();\n    e.stopPropagation();\n    this.props.onChange(this.state);\n    this.props.onClose();\n  };\n\n  onRoomAccessSettingsChange = e =>\n    this.setState({\n      allow_promotion: e.target.value === \"public\"\n    });\n\n  renderCheckbox(member_permission, disabled, onChange) {\n    return (\n      <label className={cx(styles.permission, { [styles.permissionDisabled]: disabled })} key={member_permission}>\n        <input\n          type=\"checkbox\"\n          checked={this.state.member_permissions[member_permission]}\n          disabled={disabled}\n          onChange={\n            onChange ||\n            (e =>\n              this.setState({\n                member_permissions: { ...this.state.member_permissions, [member_permission]: e.target.checked }\n              }))\n          }\n        />\n        <FormattedMessage id={`room-settings.${member_permission}`} />\n      </label>\n    );\n  }\n\n  render() {\n    const { showRoomAccessSettings } = this.props;\n    return (\n      <DialogContainer title=\"Room Settings\" {...this.props}>\n        <form onSubmit={this.onSubmit} className={styles.roomSettingsForm}>\n          <span className={styles.subtitle}>\n            <FormattedMessage id=\"room-settings.name-subtitle\" />\n          </span>\n          <input\n            name=\"name\"\n            type=\"text\"\n            required\n            autoComplete=\"off\"\n            placeholder=\"Room name\"\n            value={this.state.name}\n            onFocus={e => handleTextFieldFocus(e.target)}\n            onBlur={() => handleTextFieldBlur()}\n            onChange={e => this.setState({ name: e.target.value })}\n            className={styles.nameField}\n          />\n          <span className={styles.subtitle}>\n            <FormattedMessage id=\"room-settings.description-subtitle\" />\n          </span>\n          <textarea\n            name=\"description\"\n            rows=\"5\"\n            autoComplete=\"off\"\n            placeholder=\"Room description\"\n            value={this.state.description}\n            onFocus={e => handleTextFieldFocus(e.target)}\n            onBlur={() => handleTextFieldBlur()}\n            onChange={e => this.setState({ description: e.target.value })}\n            className={styles.descriptionField}\n          />\n          {showRoomAccessSettings && (\n            <>\n              <span className={styles.subtitle}>\n                <FormattedMessage id=\"room-settings.room-access-subtitle\" />\n              </span>\n              <div className={styles.selectContainer}>\n                <label>\n                  <input\n                    type=\"radio\"\n                    value=\"private\"\n                    checked={!this.state.allow_promotion}\n                    onChange={this.onRoomAccessSettingsChange}\n                  />\n                  <div>\n                    <FormattedMessage id=\"room-settings.access-private\" />\n                    <span>\n                      <FormattedMessage id=\"room-settings.access-private-subtitle\" />\n                    </span>\n                  </div>\n                </label>\n                <label>\n                  <input\n                    type=\"radio\"\n                    value=\"public\"\n                    checked={this.state.allow_promotion}\n                    onChange={this.onRoomAccessSettingsChange}\n                  />\n                  <div>\n                    <FormattedMessage id=\"room-settings.access-public\" />\n                    <span>\n                      <FormattedMessage id=\"room-settings.access-public-subtitle\" />\n                    </span>\n                  </div>\n                </label>\n              </div>\n            </>\n          )}\n          <span className={styles.subtitle}>\n            <FormattedMessage id=\"room-settings.permissions-subtitle\" />\n          </span>\n          <div className={styles.permissions}>\n            {this.renderCheckbox(\"spawn_and_move_media\", false, e => {\n              const newMemberPermissions = {\n                spawn_and_move_media: e.target.checked\n              };\n              if (!e.target.checked) {\n                newMemberPermissions.spawn_camera = false;\n                newMemberPermissions.pin_objects = false;\n              }\n              this.setState({ member_permissions: { ...this.state.member_permissions, ...newMemberPermissions } });\n            })}\n            <div className={styles.permissionsGroup}>\n              {this.renderCheckbox(\"spawn_camera\", !this.state.member_permissions.spawn_and_move_media)}\n              {this.renderCheckbox(\"pin_objects\", !this.state.member_permissions.spawn_and_move_media)}\n            </div>\n            {this.renderCheckbox(\"spawn_drawing\")}\n          </div>\n          <button type=\"submit\" className={styles.nextButton}>\n            <FormattedMessage id=\"room-settings.apply\" />\n          </button>\n        </form>\n      </DialogContainer>\n    );\n  }\n}\n","import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport { FormattedMessage } from \"react-intl\";\n\nimport styles from \"../assets/stylesheets/close-room-dialog.scss\";\nimport DialogContainer from \"./dialog-container\";\n\nexport default class CloseRoomDialog extends Component {\n  static propTypes = {\n    onConfirm: PropTypes.func,\n    onClose: PropTypes.func\n  };\n\n  render() {\n    return (\n      <DialogContainer title=\"Close Room\" {...this.props}>\n        <div className={styles.message}>\n          <FormattedMessage id=\"close-room.message\" />\n        </div>\n        <button\n          className={styles.confirmButton}\n          onClick={() => {\n            this.props.onConfirm();\n            this.props.onClose();\n          }}\n        >\n          <FormattedMessage id=\"close-room.confirm\" />\n        </button>\n        <button className={styles.cancelButton} onClick={() => this.props.onClose()}>\n          <FormattedMessage id=\"close-room.cancel\" />\n        </button>\n      </DialogContainer>\n    );\n  }\n}\n","import { sets } from \"./userinput/sets\";\nimport { paths } from \"./userinput/paths\";\n\n// The output of this system is activeTips which shows, if any, the tips to show at the top\n// and bottom of the screen. There are named tips (eg locomotion) that each have validators.\n//\n// Each frame we run all the non-finished validators and take the first tip (by order)\n// which is VALID. Any tip that returns FINISHED will no longer be considered without\n// a local storage reset.\n\n// Validators can return these values:\n//\n// INVALID - Tip is not valid to show\n// VALID - Tip is valid to show\n// FINISH - Tip should always be assumed INVALID going forward\n//\n//\n// Tips have \"scope\", which is a certain context within which the validators are run (right now,\n// just the top of bottom of the screen.) They are also platform-local.\nconst INVALID = 0;\nconst VALID = 1;\nconst FINISH = 2;\n\nconst LOCAL_STORAGE_KEY = \"__hubs_finished_tips\";\n\nconst TIPS = {\n  desktop: {\n    top: [\"pen_mode\", \"video_share_mode\", \"mute_mode\"],\n    bottom: [\n      \"look\",\n      \"locomotion\",\n      \"turning\",\n      \"spawn_menu\",\n      \"object_grab\",\n      \"object_zoom\",\n      \"object_scale\",\n      \"freeze_gesture\",\n      \"menu_hover\",\n      \"object_rotate_button\",\n      \"object_scale_button\",\n      \"object_pin\",\n      \"invite\",\n      \"pen_color\",\n      \"pen_size\",\n      \"feedback\"\n    ]\n  },\n  mobile: {\n    top: [\"pen_mode\", \"video_share_mode\", \"freeze_mode\", \"mute_mode\"],\n    bottom: [\n      \"look\",\n      \"locomotion\",\n      \"spawn_menu\",\n      \"object_grab\",\n      \"freeze_gesture\",\n      \"object_rotate_button\",\n      \"object_scale_button\",\n      \"object_pin\",\n      \"invite\",\n      \"feedback\"\n    ]\n  },\n  standalone: { top: [], bottom: [] }\n};\n\n// These tips, if closed, will only clear themselves, not all tips.\nconst LOCAL_CLOSE_TIPS = [\"feedback\", \"invite\", \"object_pin\"];\n\n// These tips will remain active even if the user closes the tips globally.\nconst KEEP_ACTIVE_AFTER_GLOBAL_CLOSE = [\"freeze_gesture\", \"menu_hover\", \"feedback\"];\n\nlet localStorageCache = null;\nlet finishedScopes = {}; // Optimization, lets system skip scopes altogether once finished.\n\nconst isMobile = AFRAME.utils.device.isMobile();\nconst isMobileVR = AFRAME.utils.device.isMobileVR();\n\nconst tipPlatform = () => {\n  if (isMobileVR) return \"standalone\";\n  return isMobile ? \"mobile\" : \"desktop\";\n};\n\nconst platformTips = TIPS[tipPlatform()];\n\nconst isTipFinished = tip => {\n  if (localStorageCache === null) {\n    localStorageCache = JSON.parse(localStorage.getItem(LOCAL_STORAGE_KEY));\n  }\n\n  return !!(localStorageCache[tip] && localStorageCache[tip].finished);\n};\n\nexport const markTipFinished = tip => {\n  const storeData = JSON.parse(localStorage.getItem(LOCAL_STORAGE_KEY));\n  storeData[tip] = { finished: true };\n  localStorage.setItem(LOCAL_STORAGE_KEY, JSON.stringify(storeData));\n  localStorageCache = null;\n};\n\nexport const handleTipClose = (fullTip, scope) => {\n  const tip = fullTip.split(\".\")[1];\n\n  // Invite and pinning tips should be locally cleared, others should clear all remaining tips.\n  const tips = LOCAL_CLOSE_TIPS.includes(tip) ? [tip] : platformTips[scope];\n\n  for (let i = 0; i < tips.length; i++) {\n    const t = tips[i];\n\n    if (!KEEP_ACTIVE_AFTER_GLOBAL_CLOSE.includes(t) || t === tip) {\n      markTipFinished(t);\n    }\n  }\n};\n\nexport const resetTips = () => {\n  localStorage.setItem(LOCAL_STORAGE_KEY, JSON.stringify({}));\n  localStorageCache = null;\n  window.APP.store.resetTipActivityFlags();\n  window.APP.store.resetConfirmedBroadcastedRooms();\n  finishedScopes = {};\n};\n\nconst VALIDATORS = {\n  look: function(userinput) {\n    if (\n      userinput.activeSets.includes(sets.rightCursorHoldingPen) ||\n      userinput.activeSets.includes(sets.leftCursorHoldingPen)\n    )\n      return INVALID;\n    const cameraDelta = userinput.get(\n      isMobile ? paths.device.touchscreen.touchCameraDelta : paths.device.smartMouse.cameraDelta\n    );\n    return cameraDelta ? FINISH : VALID;\n  },\n  locomotion: function(userinput) {\n    if (\n      userinput.activeSets.includes(sets.rightCursorHoldingPen) ||\n      userinput.activeSets.includes(sets.leftCursorHoldingPen)\n    )\n      return INVALID;\n    const accel = userinput.get(paths.actions.characterAcceleration);\n\n    // User moved\n    return accel && (accel[0] !== 0 || accel[1] !== 0) ? FINISH : VALID;\n  },\n  turning: function(userinput) {\n    if (\n      userinput.activeSets.includes(sets.rightCursorHoldingPen) ||\n      userinput.activeSets.includes(sets.leftCursorHoldingPen)\n    )\n      return INVALID;\n    if (userinput.get(paths.actions.snapRotateLeft) || userinput.get(paths.actions.snapRotateRight)) return FINISH;\n    return VALID;\n  },\n  spawn_menu: function(userinput, scene, mediaCounter) {\n    if (\n      userinput.activeSets.includes(sets.rightCursorHoldingPen) ||\n      userinput.activeSets.includes(sets.leftCursorHoldingPen)\n    )\n      return INVALID;\n    if (mediaCounter.count() === 0) return VALID;\n    return FINISH;\n  },\n  freeze_gesture: function(userinput, scene, mediaCounter) {\n    if (mediaCounter.count() === 0) return INVALID;\n    if (userinput.activeSets.includes(sets.rightCursorHoldingInteractable)) return INVALID;\n    if (userinput.activeSets.includes(sets.rightCursorHoldingPen)) return INVALID;\n    if (userinput.activeSets.includes(sets.leftCursorHoldingInteractable)) return INVALID;\n    if (userinput.activeSets.includes(sets.leftCursorHoldingPen)) return INVALID;\n    if (\n      scene.is(\"frozen\") &&\n      (userinput.activeSets.includes(sets.rightCursorHoveringOnInteractable) ||\n        userinput.activeSets.includes(sets.leftCursorHoveringOnInteractable))\n    )\n      return FINISH;\n    return scene.is(\"frozen\") ? INVALID : VALID;\n  },\n  menu_hover: function(userinput, scene, mediaCounter) {\n    if (mediaCounter.count() === 0) return INVALID;\n    if (!scene.is(\"frozen\")) return INVALID;\n    if (userinput.activeSets.includes(sets.rightCursorHoldingPen)) return INVALID;\n    if (userinput.activeSets.includes(sets.leftCursorHoldingPen)) return INVALID;\n    if (\n      scene.is(\"frozen\") &&\n      (userinput.activeSets.includes(sets.rightCursorHoveringOnInteractable) ||\n        userinput.activeSets.includes(sets.leftCursorHoveringOnInteractable))\n    )\n      return FINISH;\n    return VALID;\n  },\n  invite: function(userinput, scene) {\n    if (userinput.activeSets.includes(sets.rightCursorHoldingPen)) return INVALID;\n    if (userinput.activeSets.includes(sets.rightCursorHoldingCamera)) return INVALID;\n    if (userinput.activeSets.includes(sets.rightCursorHoldingInteractable)) return INVALID;\n    if (userinput.activeSets.includes(sets.leftCursorHoldingPen)) return INVALID;\n    if (userinput.activeSets.includes(sets.leftCursorHoldingCamera)) return INVALID;\n    if (userinput.activeSets.includes(sets.leftCursorHoldingInteractable)) return INVALID;\n    return scene.is(\"copresent\") ? FINISH : VALID;\n  },\n  object_grab: function(userinput, scene, mediaCounter) {\n    if (scene.is(\"frozen\")) return INVALID;\n    if (mediaCounter.count() === 0) return INVALID;\n    if (userinput.activeSets.includes(sets.rightCursorHoldingPen)) return INVALID;\n    if (userinput.activeSets.includes(sets.rightCursorHoldingCamera)) return INVALID;\n    if (userinput.activeSets.includes(sets.rightCursorHoldingInteractable)) return FINISH;\n    if (userinput.activeSets.includes(sets.leftCursorHoldingPen)) return INVALID;\n    if (userinput.activeSets.includes(sets.leftCursorHoldingCamera)) return INVALID;\n    if (userinput.activeSets.includes(sets.leftCursorHoldingInteractable)) return FINISH;\n    return VALID;\n  },\n  object_rotate_button: function(userinput, scene, mediaCounter, store) {\n    if (!scene.is(\"frozen\")) return INVALID;\n    if (mediaCounter.count() === 0) return INVALID;\n    if (store && store.state.activity.hasRotated) return FINISH;\n    return VALID;\n  },\n  object_scale_button: function(userinput, scene, mediaCounter, store) {\n    if (!scene.is(\"frozen\")) return INVALID;\n    if (mediaCounter.count() === 0) return INVALID;\n    if (store && store.state.activity.hasScaled) return FINISH;\n    return VALID;\n  },\n  object_recenter_button: function(userinput, scene, mediaCounter, store) {\n    if (!scene.is(\"frozen\")) return INVALID;\n    if (mediaCounter.count() === 0) return INVALID;\n    if (store && store.state.activity.hasRecentered) return FINISH;\n    return VALID;\n  },\n  object_pin: function(userinput, scene, mediaCounter, store) {\n    if (!scene.is(\"frozen\")) return INVALID;\n    if (mediaCounter.count() === 0) return INVALID;\n    if (store && store.state.activity.hasPinned) return FINISH;\n    return VALID;\n  },\n  object_zoom: function(userinput, scene) {\n    if (scene.is(\"frozen\")) return INVALID;\n    if (userinput.activeSets.includes(sets.rightCursorHoldingPen)) return INVALID;\n    if (userinput.activeSets.includes(sets.rightCursorHoldingCamera)) return INVALID;\n    if (\n      !(\n        userinput.activeSets.includes(sets.rightCursorHoldingInteractable) ||\n        userinput.activeSets.includes(sets.leftCursorHoldingInteractable)\n      )\n    )\n      return INVALID;\n    if (userinput.activeSets.includes(sets.leftCursorHoldingPen)) return INVALID;\n    if (userinput.activeSets.includes(sets.leftCursorHoldingCamera)) return INVALID;\n    if (userinput.get(paths.actions.cursor.right.modDelta)) return FINISH;\n    if (userinput.get(paths.actions.cursor.left.modDelta)) return FINISH;\n    return VALID;\n  },\n  object_scale: function(userinput, scene) {\n    if (scene.is(\"frozen\")) return INVALID;\n    if (userinput.activeSets.includes(sets.rightCursorHoldingPen)) return INVALID;\n    if (userinput.activeSets.includes(sets.rightCursorHoldingCamera)) return INVALID;\n    if (userinput.activeSets.includes(sets.leftCursorHoldingPen)) return INVALID;\n    if (userinput.activeSets.includes(sets.leftCursorHoldingCamera)) return INVALID;\n    if (\n      !(\n        userinput.activeSets.includes(sets.rightCursorHoldingInteractable) ||\n        userinput.activeSets.includes(sets.leftCursorHoldingInteractable)\n      )\n    )\n      return INVALID;\n    if (\n      userinput.get(paths.actions.cursor.right.scaleGrabbedGrabbable) ||\n      userinput.get(paths.actions.cursor.left.scaleGrabbedGrabbable)\n    )\n      return FINISH;\n    return VALID;\n  },\n  pen_color: function(userinput) {\n    if (\n      !(\n        userinput.activeSets.includes(sets.rightCursorHoldingPen) ||\n        userinput.activeSets.includes(sets.leftCursorHoldingPen)\n      )\n    )\n      return INVALID;\n    if (\n      userinput.get(paths.actions.cursor.right.penNextColor) ||\n      userinput.get(paths.actions.cursor.right.penPrevColor)\n    ) {\n      return FINISH;\n    }\n    if (\n      userinput.get(paths.actions.cursor.left.penNextColor) ||\n      userinput.get(paths.actions.cursor.left.penPrevColor)\n    ) {\n      return FINISH;\n    }\n    return VALID;\n  },\n  pen_size: function(userinput) {\n    if (\n      !(\n        userinput.activeSets.includes(sets.rightCursorHoldingPen) ||\n        userinput.activeSets.includes(sets.leftCursorHoldingPen)\n      )\n    )\n      return INVALID;\n    if (userinput.get(paths.actions.cursor.right.scalePenTip) || userinput.get(paths.actions.cursor.left.scalePenTip))\n      return FINISH;\n    return VALID;\n  },\n  pen_mode: function(userinput) {\n    if (\n      !userinput.activeSets.includes(sets.rightCursorHoldingPen) &&\n      !userinput.activeSets.includes(sets.leftCursorHoldingPen)\n    )\n      return INVALID;\n    return VALID;\n  },\n  freeze_mode: function(userinput, scene) {\n    return scene.is(\"frozen\") ? VALID : INVALID;\n  },\n  video_share_mode: function(userinput, scene) {\n    return scene.is(\"sharing_video\") ? VALID : INVALID;\n  },\n  mute_mode: function(userinput, scene) {\n    return scene.is(\"muted\") ? VALID : INVALID;\n  },\n  feedback: function(/*userinput, scene, mediaCounter, store*/) {\n    /*if (configs.feature(\"show_feedback_ui\") && store && store.state.activity.entryCount >= NUM_ENTRIES_FOR_FEEDBACK_TIP)\n      return VALID;*/\n    return INVALID;\n  }\n};\n\nAFRAME.registerSystem(\"tips\", {\n  init: function() {\n    this.activeTips = {};\n    this._finishedScopes = {};\n    this._performStep = this._performStep.bind(this);\n\n    if (localStorage.getItem(LOCAL_STORAGE_KEY) === null) {\n      localStorage.setItem(LOCAL_STORAGE_KEY, JSON.stringify({}));\n    }\n  },\n\n  tick: function() {\n    if (isMobileVR) return; // Optimization for now, don't bother with this on mobile VR until we have real tips\n\n    if (!this._userinput) {\n      this._userinput = this.el.systems.userinput;\n\n      if (!this._userinput) return;\n    }\n\n    if (!this._mediaCounter) {\n      this._mediaCounter =\n        document.querySelector(\"#media-counter\") &&\n        document.querySelector(\"#media-counter\").components[\"networked-counter\"];\n\n      if (!this._mediaCounter) return;\n    }\n\n    const tips = platformTips;\n\n    const prevTop = this.activeTips.top;\n    const prevBottom = this.activeTips.bottom;\n\n    this._performStep(tips.top, \"top\");\n    this._performStep(tips.bottom, \"bottom\");\n\n    if (prevTop !== this.activeTips.top || prevBottom !== this.activeTips.bottom) {\n      this.el.emit(\"tips_changed\", this.activeTips);\n    }\n  },\n\n  _performStep: function(tips, scope) {\n    if (finishedScopes[scope]) return;\n\n    let chosenTip = null;\n    let finishCount = 0;\n\n    for (let i = 0; i < tips.length; i++) {\n      const tip = tips[i];\n      if (isTipFinished(tip)) {\n        finishCount++;\n        continue;\n      }\n\n      switch (VALIDATORS[tip](this._userinput, this.el, this._mediaCounter, window.APP.store)) {\n        case FINISH:\n          markTipFinished(tip);\n          break;\n        case VALID:\n          chosenTip = `${tipPlatform()}.${tip}`;\n          break;\n      }\n\n      if (chosenTip) break;\n    }\n\n    this.activeTips[scope] = chosenTip;\n\n    if (finishCount === tips.length) {\n      // Optimization: Tips are completed for this scope, no need to re-walk.\n      finishedScopes[scope] = true;\n    }\n  }\n});\n","import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport { FormattedMessage } from \"react-intl\";\nimport classNames from \"classnames\";\nimport styles from \"../assets/stylesheets/tip.scss\";\nimport { faTimes } from \"@fortawesome/free-solid-svg-icons/faTimes\";\nimport { handleTipClose } from \"../systems/tips.js\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\n\nexport default class Tip extends Component {\n  static propTypes = {\n    history: PropTypes.object,\n    tip: PropTypes.string,\n    tipRegion: PropTypes.string,\n    broadcastTarget: PropTypes.string,\n    pushHistoryState: PropTypes.func,\n    onClose: PropTypes.func\n  };\n\n  render() {\n    const { tip, tipRegion, broadcastTarget, pushHistoryState } = this.props;\n    const rootStyles = [styles.tipRoot];\n    let tipBody;\n\n    if ([\".spawn_menu\", \"_button\"].find(x => tip.endsWith(x))) {\n      rootStyles.push(styles.tourTipRoot);\n      tipBody = (\n        <div className={styles.splitTip}>\n          <FormattedMessage id={`tips.${tip}-pre`} />\n          <div\n            className={classNames({\n              [styles.splitTipIcon]: true,\n              [styles[tip.split(\".\")[1] + \"-icon\"]]: true\n            })}\n          />\n          <FormattedMessage id={`tips.${tip}-post`} />\n        </div>\n      );\n    } else if (tip === \"discord\") {\n      tipBody = (\n        <div className={styles.tip}>\n          <span>{`Chat in this room is being bridged to ${broadcastTarget} on Discord.`}</span>\n        </div>\n      );\n    } else if (tip === \"embed\") {\n      tipBody = (\n        <div className={styles.tip}>\n          <FormattedMessage id=\"embed.presence-warning\" />\n        </div>\n      );\n    } else if (tip.endsWith(\".feedback\")) {\n      tipBody = (\n        <div className={styles.tip}>\n          <FormattedMessage id={`tips.${tip}`} />\n          &nbsp;\n          <button\n            className={styles.tipLink}\n            onClick={() => {\n              handleTipClose(tip, tipRegion);\n              pushHistoryState(\"modal\", \"feedback\");\n            }}\n          >\n            <FormattedMessage id={`tips.${tip}-link`} />\n          </button>\n        </div>\n      );\n    } else {\n      rootStyles.push(styles.tourTipRoot);\n      tipBody = (\n        <div className={styles.tip}>\n          <FormattedMessage id={`tips.${tip}`} />\n        </div>\n      );\n    }\n\n    return (\n      <div className={classNames(rootStyles)}>\n        <button\n          className={styles.tipCancel}\n          onClick={() => (this.props.onClose ? this.props.onClose(tip, tipRegion) : handleTipClose(tip, tipRegion))}\n        >\n          <i>\n            <FontAwesomeIcon icon={faTimes} />\n          </i>\n        </button>\n        {tipBody}\n      </div>\n    );\n  }\n}\n","import React, { Component } from \"react\";\n\nimport { messages } from \"../utils/i18n\";\nimport DialogContainer from \"./dialog-container.js\";\n\nexport default class WebRTCScreenshareUnsupportedDialog extends Component {\n  render() {\n    return (\n      <DialogContainer title=\"Share Screen\" {...this.props}>\n        <div style={{ display: \"flex\", flexDirection: \"column\", alignItems: \"center\" }}>\n          <p>\n            Your browser doesn&apos;t seem to support screen sharing.\n            <br />\n            To share your screen in ${messages[\"app-name\"]}, you can use Firefox.\n          </p>\n          <a\n            className=\"info-dialog--action-button\"\n            target=\"_blank\"\n            rel=\"noreferrer noopener\"\n            href=\"https://www.mozilla.org/firefox\"\n          >\n            Download Firefox\n          </a>\n          <p style={{ fontSize: \"0.8em\" }}>\n            You can try&nbsp;\n            <a\n              href=\"https://www.webrtc-experiment.com/screen-sharing/#5591174797993739\"\n              target=\"_blank\"\n              rel=\"noopener noreferrer\"\n            >\n              testing WebRTC screen sharing\n            </a>&nbsp;in your browser.\n          </p>\n        </div>\n      </DialogContainer>\n    );\n  }\n}\n","import React, { Component } from \"react\";\nimport DialogContainer from \"./dialog-container.js\";\n\nexport default class WebAssemblyUnsupportedDialog extends Component {\n  render() {\n    return (\n      <DialogContainer title=\"WebAssembly Unsupported\" {...this.props}>\n        <div style={{ display: \"flex\", flexDirection: \"column\", alignItems: \"center\" }}>\n          <p>\n            Your browser doesn&apos;t seem to support WebAssembly.\n            <br />\n            Please update or switch to a newer browser.\n          </p>\n        </div>\n      </DialogContainer>\n    );\n  }\n}\n","import React, { Component } from \"react\";\nimport DialogContainer from \"./dialog-container.js\";\nimport { WithHoverSound } from \"./wrap-with-audio\";\n\nexport default class WebVRRecommendDialog extends Component {\n  render() {\n    return (\n      <DialogContainer title=\"Enter in VR\" {...this.props}>\n        <div style={{ display: \"flex\", flexDirection: \"column\", alignItems: \"center\" }}>\n          <p>To enter with Oculus or SteamVR, you can use Firefox.</p>\n          <WithHoverSound>\n            <a\n              className=\"info-dialog--action-button\"\n              href=\"https://www.mozilla.org/firefox\"\n              target=\"_blank\"\n              rel=\"noreferrer noopener\"\n            >\n              Download Firefox\n            </a>\n          </WithHoverSound>\n          <p style={{ fontSize: \"0.8em\" }}>\n            For a list of browsers with experimental VR support, visit{\" \"}\n            <WithHoverSound>\n              <a href=\"https://webvr.rocks\" target=\"_blank\" rel=\"noopener noreferrer\">\n                WebVR Rocks\n              </a>\n            </WithHoverSound>\n          </p>\n        </div>\n      </DialogContainer>\n    );\n  }\n}\n","import React, { Component } from \"react\";\nimport DialogContainer from \"./dialog-container.js\";\nimport styles from \"../assets/stylesheets/feedback-dialog.scss\";\n\nexport default class FeedbackDialog extends Component {\n  render() {\n    return (\n      <DialogContainer wide={true} title=\"\" {...this.props}>\n        <iframe\n          className={styles.formFrame}\n          src=\"https://docs.google.com/forms/d/e/1FAIpQLSe1C-7hCA1XMT8IL8XBnjlxMAU1JXrwAW8YkbmbBJ4B3pDSsw/viewform?embedded=true\"\n          frameBorder=\"0\"\n          marginHeight=\"0\"\n          marginWidth=\"0\"\n        >\n          Loading...\n        </iframe>\n      </DialogContainer>\n    );\n  }\n}\n","import React, { Component } from \"react\";\nimport DialogContainer from \"./dialog-container.js\";\nimport PropTypes from \"prop-types\";\nimport styles from \"../assets/stylesheets/help-dialog.scss\";\nimport configs from \"../utils/configs\";\nimport { messages } from \"../utils/i18n\";\nimport { resetTips } from \"../systems/tips\";\n\nexport default class HelpDialog extends Component {\n  static propTypes = {\n    onClose: PropTypes.func\n  };\n  render() {\n    return (\n      <DialogContainer title=\"Help\" {...this.props}>\n        <div className={styles.helpDialog}>\n          <div>To get started, you can take a tour.</div>\n          <div>\n            Or, you can{\" \"}\n            <a href={configs.link(\"features\", messages[\"help.docs_url\"])} rel=\"noreferrer noopener\" target=\"_blank\">\n              browse the documentation\n            </a>.\n          </div>\n          <button\n            className={styles.tourButton}\n            onClick={e => {\n              e.preventDefault();\n              resetTips();\n              this.props.onClose();\n            }}\n          >\n            Start Tour\n          </button>\n          <a\n            className={styles.docsLink}\n            href={configs.link(\"features\", messages[\"help.docs_url\"])}\n            rel=\"noreferrer noopener\"\n            target=\"_blank\"\n          >\n            Browse Documentation\n          </a>\n        </div>\n      </DialogContainer>\n    );\n  }\n}\n","import React, { Component } from \"react\";\nimport DialogContainer from \"./dialog-container.js\";\nimport styles from \"../assets/stylesheets/leave-room-dialog.scss\";\nimport { FormattedMessage } from \"react-intl\";\nimport PropTypes from \"prop-types\";\n\nexport default class LeaveRoomDialog extends Component {\n  static propTypes = {\n    messageType: PropTypes.string,\n    destinationUrl: PropTypes.string\n  };\n\n  render() {\n    return (\n      <DialogContainer title=\"Leave Room\" {...this.props}>\n        <div className={styles.leaveRoom}>\n          <div>\n            <FormattedMessage id={`leave-room-dialog.${this.props.messageType}.message`} />\n          </div>\n          <a href={this.props.destinationUrl} rel=\"noopener noreferrer\">\n            <FormattedMessage id={`leave-room-dialog.${this.props.messageType}.confirm`} />\n          </a>\n        </div>\n      </DialogContainer>\n    );\n  }\n}\n","export const SORT_ORDER_VIDEO = 0;\nexport const SORT_ORDER_AUDIO = 1;\nexport const SORT_ORDER_IMAGE = 2;\nexport const SORT_ORDER_PDF = 3;\nexport const SORT_ORDER_MODEL = 4;\nexport const SORT_ORDER_UNIDENTIFIED = 5;\n\nexport function mediaSortOrder(el) {\n  if (el.components[\"media-video\"] && el.components[\"media-video\"].data.contentType.startsWith(\"audio/\")) {\n    return SORT_ORDER_AUDIO;\n  }\n  if (el.components[\"media-video\"]) return SORT_ORDER_VIDEO;\n  if (el.components[\"media-image\"]) return SORT_ORDER_IMAGE;\n  if (el.components[\"media-pdf\"]) return SORT_ORDER_PDF;\n  if (el.components[\"gltf-model-plus\"]) return SORT_ORDER_MODEL;\n  return SORT_ORDER_UNIDENTIFIED;\n}\n\nexport function mediaSort(el1, el2) {\n  return mediaSortOrder(el1) - mediaSortOrder(el2);\n}\n","import React, { Component } from \"react\";\nimport { rotateInPlaceAroundWorldUp, affixToWorldUp } from \"../utils/three-utils\";\nimport PropTypes from \"prop-types\";\nimport DialogContainer from \"./dialog-container.js\";\nimport styles from \"../assets/stylesheets/client-info-dialog.scss\";\nimport { FormattedMessage } from \"react-intl\";\nimport { faTimes } from \"@fortawesome/free-solid-svg-icons/faTimes\";\nimport { faChevronLeft } from \"@fortawesome/free-solid-svg-icons/faChevronLeft\";\nimport { faChevronRight } from \"@fortawesome/free-solid-svg-icons/faChevronRight\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport entryStyles from \"../assets/stylesheets/entry.scss\";\nimport { mediaSort } from \"../utils/media-sorting.js\";\n\nexport default class ObjectInfoDialog extends Component {\n  static propTypes = {\n    scene: PropTypes.object,\n    el: PropTypes.object,\n    pinned: PropTypes.bool,\n    src: PropTypes.string,\n    onClose: PropTypes.func,\n    onPinChanged: PropTypes.func,\n    onNavigated: PropTypes.func,\n    hubChannel: PropTypes.object\n  };\n\n  state = {\n    enableLights: false,\n    mediaEntities: []\n  };\n\n  componentDidMount() {\n    this.updateMediaEntities = this.updateMediaEntities.bind(this);\n    this.navigateNext = this.navigateNext.bind(this);\n    this.navigatePrev = this.navigatePrev.bind(this);\n    this.navigate = this.navigate.bind(this);\n    this.viewingCamera = document.getElementById(\"viewing-camera\");\n    this.pin = this.pin.bind(this);\n    this.unpin = this.unpin.bind(this);\n    this.props.scene.addEventListener(\"uninspect\", this.props.onClose);\n    const cameraSystem = this.props.scene.systems[\"hubs-systems\"].cameraSystem;\n    this.setState({ enableLights: cameraSystem.enableLights });\n    this.updateMediaEntities();\n    this.props.scene.addEventListener(\"listed_media_changed\", () => this.updateMediaEntities());\n  }\n\n  updateMediaEntities() {\n    const mediaEntities = [...this.props.scene.systems[\"listed-media\"].els];\n    mediaEntities.sort(mediaSort);\n    this.setState({ mediaEntities });\n  }\n\n  pin() {\n    if (!NAF.utils.isMine(this.props.el) && !NAF.utils.takeOwnership(this.props.el)) return;\n    this.props.el.setAttribute(\"pinnable\", \"pinned\", true);\n    this.props.el.emit(\"pinned\", { el: this.props.el });\n    this.props.onPinChanged && this.props.onPinChanged();\n  }\n\n  unpin() {\n    if (!NAF.utils.isMine(this.props.el) && !NAF.utils.takeOwnership(this.props.el)) return;\n    this.props.el.setAttribute(\"pinnable\", \"pinned\", false);\n    this.props.el.emit(\"unpinned\", { el: this.props.el });\n    this.props.onPinChanged && this.props.onPinChanged();\n  }\n\n  toggleLights() {\n    const cameraSystem = this.props.scene.systems[\"hubs-systems\"].cameraSystem;\n    cameraSystem.enableLights = !cameraSystem.enableLights;\n    localStorage.setItem(\"show-background-while-inspecting\", cameraSystem.enableLights.toString());\n    this.setState({ enableLights: cameraSystem.enableLights });\n    if (cameraSystem.enableLights) {\n      cameraSystem.showEverythingAsNormal();\n    } else {\n      cameraSystem.hideEverythingButThisObject(this.props.el.object3D);\n    }\n  }\n\n  enqueueWaypointTravel = (function() {\n    const targetMatrix = new THREE.Matrix4();\n    const translation = new THREE.Matrix4();\n    return function enqueueWaypointTravel() {\n      this.viewingCamera.object3D.updateMatrices();\n      targetMatrix.copy(this.viewingCamera.object3D.matrixWorld);\n      affixToWorldUp(targetMatrix, targetMatrix);\n      translation.makeTranslation(0, -1.6, 0.15);\n      targetMatrix.multiply(translation);\n      rotateInPlaceAroundWorldUp(targetMatrix, Math.PI, targetMatrix);\n\n      this.props.scene.systems[\"hubs-systems\"].characterController.enqueueWaypointTravelTo(targetMatrix, true, {\n        willDisableMotion: false,\n        willDisableTeleporting: false,\n        snapToNavMesh: false,\n        willMaintainInitialOrientation: false\n      });\n      this.props.onClose();\n    };\n  })().bind(this);\n\n  navigateNext() {\n    this.navigate(1);\n  }\n\n  navigatePrev() {\n    this.navigate(-1);\n  }\n\n  navigate(direction) {\n    const { mediaEntities } = this.state;\n    let targetIndex = (mediaEntities.indexOf(this.props.el) + direction) % mediaEntities.length;\n    targetIndex = targetIndex === -1 ? mediaEntities.length - 1 : targetIndex;\n    this.props.onNavigated && this.props.onNavigated(mediaEntities[targetIndex]);\n  }\n\n  remove() {\n    if (this._isRemoving) return;\n    this._isRemoving = true;\n\n    const targetEl = this.props.el;\n\n    if (!NAF.utils.isMine(targetEl) && !NAF.utils.takeOwnership(targetEl)) return;\n\n    targetEl.setAttribute(\"animation__remove\", {\n      property: \"scale\",\n      dur: 200,\n      to: { x: 0.01, y: 0.01, z: 0.01 },\n      easing: \"easeInQuad\"\n    });\n\n    targetEl.addEventListener(\"animationcomplete\", () => {\n      const exitAfterRemove = this.state.mediaEntities.length <= 1;\n      this.props.scene.systems[\"hubs-systems\"].cameraSystem.uninspect();\n      NAF.utils.takeOwnership(targetEl);\n      targetEl.parentNode.removeChild(targetEl);\n\n      if (exitAfterRemove) {\n        this.props.onClose();\n      } else {\n        this.navigateNext();\n      }\n\n      this._isRemoving = false;\n    });\n  }\n\n  render() {\n    const { pinned, onClose } = this.props;\n    const isStatic = this.props.el.components.tags && this.props.el.components.tags.data.isStatic;\n\n    return (\n      <DialogContainer noOverlay={true} wide={true} {...this.props}>\n        <div className={styles.roomInfo}>\n          <div className={styles.titleAndClose}>\n            <button autoFocus className={entryStyles.collapseButton} onClick={onClose}>\n              <i>\n                <FontAwesomeIcon icon={faTimes} />\n              </i>\n            </button>\n            <a className={styles.objectDisplayString} href={this.props.src} target=\"_blank\" rel=\"noopener noreferrer\">\n              <FormattedMessage id={`object-info.open-link`} />\n            </a>\n          </div>\n          <div className={styles.actionButtonSections}>\n            <div className={styles.leftActionButtons}>\n              {this.state.mediaEntities.length > 1 && (\n                <button className={styles.navigationButton} onClick={this.navigatePrev}>\n                  <i>\n                    <FontAwesomeIcon icon={faChevronLeft} />\n                  </i>\n                </button>\n              )}\n            </div>\n            <div className={styles.primaryActionButtons}>\n              <button onClick={this.toggleLights.bind(this)}>\n                <FormattedMessage id={`object-info.${this.state.enableLights ? \"lower\" : \"raise\"}-lights`} />\n              </button>\n              {this.props.scene.is(\"entered\") && (\n                <button onClick={this.enqueueWaypointTravel}>\n                  <FormattedMessage id=\"object-info.waypoint\" />\n                </button>\n              )}\n              {this.props.scene.is(\"entered\") &&\n              !pinned &&\n              !isStatic &&\n              this.props.hubChannel &&\n              this.props.hubChannel.can(\"spawn_and_move_media\") ? (\n                <button onClick={this.remove.bind(this)}>\n                  <FormattedMessage id=\"object-info.remove-button\" />\n                </button>\n              ) : (\n                <div className={styles.actionButtonPlaceholder} />\n              )}\n              {this.props.scene.is(\"entered\") &&\n                !isStatic &&\n                this.props.hubChannel &&\n                this.props.hubChannel.can(\"pin_objects\") && (\n                  <button className={pinned ? \"\" : styles.primaryActionButton} onClick={pinned ? this.unpin : this.pin}>\n                    <FormattedMessage id={`object-info.${pinned ? \"unpin-button\" : \"pin-button\"}`} />\n                  </button>\n                )}\n              <a className={styles.cancelText} href=\"#\" onClick={onClose}>\n                <FormattedMessage id=\"client-info.cancel\" />\n              </a>\n            </div>\n            <div className={styles.rightActionButtons}>\n              {this.state.mediaEntities.length > 1 && (\n                <button className={styles.navigationButton} onClick={this.navigateNext}>\n                  <i>\n                    <FontAwesomeIcon icon={faChevronRight} />\n                  </i>\n                </button>\n              )}\n            </div>\n          </div>\n        </div>\n      </DialogContainer>\n    );\n  }\n}\n","import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport { FormattedMessage } from \"react-intl\";\nimport classNames from \"classnames\";\n\nimport configs from \"../utils/configs\";\nimport IfFeature from \"./if-feature\";\nimport DialogContainer from \"./dialog-container.js\";\nimport styles from \"../assets/stylesheets/oauth-dialog.scss\";\n\nexport default class OAuthDialog extends Component {\n  static propTypes = {\n    oauthInfo: PropTypes.array\n  };\n  renderSignInDisclaimer(type) {\n    return (\n      <div>\n        <div>\n          You&apos;ll need to sign in to <span className={styles.oauthTypeName}>{type}</span> to access this room.\n        </div>\n        <br />\n        <div>We&apos;ll ask for access to your e-mail address so you can skip signing in next time.</div>\n        <p className={styles.privacyNotice}>\n          By proceeding, you agree to the{\" \"}\n          <IfFeature name=\"show_terms\">\n            <a\n              rel=\"noopener noreferrer\"\n              target=\"_blank\"\n              href={configs.link(\"terms_of_use\", \"https://github.com/mozilla/hubs/blob/master/TERMS.md\")}\n            >\n              terms of use\n            </a>{\" \"}\n          </IfFeature>\n          {configs.feature(\"show_terms\") && configs.feature(\"show_privacy\") && \"and \"}\n          <IfFeature name=\"show_privacy\">\n            <a\n              rel=\"noopener noreferrer\"\n              target=\"_blank\"\n              href={configs.link(\"privacy_notice\", \"https://github.com/mozilla/hubs/blob/master/PRIVACY.md\")}\n            >\n              privacy notice\n            </a>\n          </IfFeature>.\n        </p>\n      </div>\n    );\n  }\n\n  renderTweetDisclaimer() {\n    return (\n      <div className={styles.twitterMessage}>\n        <FormattedMessage id=\"oauth-dialog.message.twitter\" />\n      </div>\n    );\n  }\n\n  render() {\n    const info = this.props.oauthInfo && this.props.oauthInfo[0];\n    const closable = info && info.type === \"twitter\"; // NOTE: for now, allow closing dialog if doing Twitter sign in (currently just for sharing)\n\n    return (\n      <DialogContainer title=\"\" closable={closable} {...this.props}>\n        <div>\n          {info && (info.type === \"twitter\" ? this.renderTweetDisclaimer() : this.renderSignInDisclaimer(info.type))}\n          <div className=\"invite-form\">\n            <div className={`invite-form__buttons ${styles.oauthButtons}`}>\n              {info ? (\n                <a\n                  href={info.url}\n                  key={info.type}\n                  className={classNames({\n                    [styles.oauthButton]: true,\n                    [styles.oauthTwitterButton]: info.type === \"twitter\",\n                    [styles.oauthDiscordButton]: info.type === \"discord\"\n                  })}\n                >\n                  <FormattedMessage id={`oauth-dialog.sign-in.${info.type}`} />\n                </a>\n              ) : (\n                <div className=\"loader-wrap loader-mid\">\n                  <div className=\"loader\">\n                    <div className=\"loader-center\" />\n                  </div>\n                </div>\n              )}\n            </div>\n          </div>\n        </div>\n      </DialogContainer>\n    );\n  }\n}\n","import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport DialogContainer from \"./dialog-container.js\";\nimport styles from \"../assets/stylesheets/tweet-dialog.scss\";\nimport Editor, { createEditorStateWithText } from \"draft-js-plugins-editor\";\nimport { FormattedMessage } from \"react-intl\";\nimport { fetchReticulumAuthenticated } from \"../utils/phoenix-utils\";\nimport createEmojiPlugin from \"draft-js-emoji-plugin\";\nimport createHashtagPlugin from \"draft-js-hashtag-plugin\";\nimport createLinkifyPlugin from \"draft-js-linkify-plugin\";\nimport createCounterPlugin from \"draft-js-counter-plugin\";\nimport classNames from \"classnames\";\nimport { scaledThumbnailUrlFor } from \"../utils/media-url-utils\";\nimport { Modifier, EditorState } from \"draft-js\";\nimport \"draft-js-emoji-plugin/lib/plugin.css\";\nimport \"draft-js-hashtag-plugin/lib/plugin.css\";\nimport \"draft-js-linkify-plugin/lib/plugin.css\";\nimport \"draft-js-counter-plugin/lib/plugin.css\";\n\nconst emojiPlugin = createEmojiPlugin();\nconst hashtagPlugin = createHashtagPlugin();\nconst linkifyPlugin = createLinkifyPlugin();\nconst counterPlugin = createCounterPlugin();\n\n// Taken from draft-js-emoji\nconst addEmoji = (emoji, editorState) => {\n  const contentState = editorState.getCurrentContent();\n  const contentStateWithEntity = contentState.createEntity(\"emoji\", \"IMMUTABLE\", { emojiUnicode: emoji });\n  const entityKey = contentStateWithEntity.getLastCreatedEntityKey();\n  const currentSelectionState = editorState.getSelection();\n\n  let emojiAddedContent;\n  let emojiEndPos = 0;\n  let blockSize = 0;\n\n  // in case text is selected it is removed and then the emoji is added\n  const afterRemovalContentState = Modifier.removeRange(contentState, currentSelectionState, \"backward\");\n\n  // deciding on the position to insert emoji\n  const targetSelection = afterRemovalContentState.getSelectionAfter();\n\n  emojiAddedContent = Modifier.insertText(afterRemovalContentState, targetSelection, emoji, null, entityKey);\n\n  emojiEndPos = targetSelection.getAnchorOffset();\n  const blockKey = targetSelection.getAnchorKey();\n  blockSize = contentState.getBlockForKey(blockKey).getLength();\n\n  // If the emoji is inserted at the end, a space is appended right after for\n  // a smooth writing experience.\n  if (emojiEndPos === blockSize) {\n    emojiAddedContent = Modifier.insertText(emojiAddedContent, emojiAddedContent.getSelectionAfter(), \" \");\n  }\n\n  const newEditorState = EditorState.push(editorState, emojiAddedContent, \"insert-emoji\");\n  return EditorState.forceSelection(newEditorState, emojiAddedContent.getSelectionAfter());\n};\n\nexport default class TweetDialog extends Component {\n  static propTypes = {\n    history: PropTypes.object,\n    onClose: PropTypes.func\n  };\n\n  constructor(props) {\n    super();\n\n    this.state = {\n      editorState: createEditorStateWithText(props.history.location.state.detail.text || \"\"),\n      suggestions: []\n    };\n  }\n\n  componentDidMount() {\n    // Calling this immediately seems to break editor initialization\n    setTimeout(() => {\n      this.editorRef.focus();\n\n      // Other attempts at doing this resulted in no visible cursor or weird editor behavior:\n      this.setState({ editorState: addEmoji(\"🐤\", this.state.editorState) });\n    });\n  }\n\n  async sendTweet() {\n    // For now assume url is a stored file media url\n    const media_stored_file_url = this.props.history.location.state.detail.url;\n    const body = this.state.editorState.getCurrentContent().getPlainText();\n\n    const payload = { media_stored_file_url, body };\n    this.setState({ posting: true });\n    await fetchReticulumAuthenticated(\"/api/v1/twitter/tweets\", \"POST\", payload);\n    this.setState({ posting: false, posted: true });\n  }\n\n  renderPostedDialog() {\n    return (\n      <DialogContainer wide={true} allowOverflow={true} closable={false} title=\"\" {...this.props}>\n        <div className={styles.posted}>\n          <div className={styles.message}>\n            <FormattedMessage id=\"tweet-dialog.posted\" />\n          </div>\n\n          <div className={styles.buttons}>\n            <button className={styles.tweetButton} onClick={() => this.props.onClose()}>\n              <FormattedMessage id=\"tweet-dialog.close\" />\n            </button>\n          </div>\n        </div>\n      </DialogContainer>\n    );\n  }\n\n  renderTweetDialog() {\n    const { EmojiSuggestions, EmojiSelect } = emojiPlugin;\n    const { CharCounter } = counterPlugin;\n    const { url, contentSubtype } = this.props.history.location.state.detail;\n\n    return (\n      <DialogContainer\n        wide={true}\n        allowOverflow={true}\n        title=\"\"\n        additionalClass={styles.dialogBackground}\n        {...this.props}\n      >\n        <div className={styles.tweet}>\n          <div className={styles.editor} onClick={() => this.editorRef.focus()}>\n            <div className={styles.editorInner}>\n              <Editor\n                ref={r => (this.editorRef = r)}\n                editorState={this.state.editorState}\n                onChange={editorState => this.setState({ editorState })}\n                plugins={[emojiPlugin, hashtagPlugin, linkifyPlugin, counterPlugin]}\n              />\n            </div>\n\n            <div className={styles.emojiButton}>\n              <EmojiSelect />\n            </div>\n\n            <div className={styles.emojiSuggestions}>\n              <EmojiSuggestions />\n            </div>\n\n            {this.state.editorState.getCurrentContent().getPlainText().length > 200 && (\n              <div className={styles.counter}>\n                <CharCounter editorState={this.state.editorState} limit={280} /> / 280\n              </div>\n            )}\n\n            <div className={styles.media}>\n              {contentSubtype && contentSubtype.startsWith(\"video\") ? (\n                <video src={url} width={450} height={255} controls />\n              ) : (\n                <img src={scaledThumbnailUrlFor(url, 450, 255)} />\n              )}\n            </div>\n          </div>\n\n          {!this.state.posting ? (\n            <div className={styles.buttons}>\n              <button\n                className={styles.tweetButton}\n                onClick={() => this.sendTweet()}\n                disabled={this.state.editorState.getCurrentContent().getPlainText().length > 280}\n              >\n                <FormattedMessage id=\"tweet-dialog.tweet\" />\n              </button>\n            </div>\n          ) : (\n            <div className={classNames([\"loader-wrap\", \"loader-mid\", styles.tweetLoader])}>\n              <div className=\"loader\">\n                <div className=\"loader-center\" />\n              </div>\n            </div>\n          )}\n        </div>\n      </DialogContainer>\n    );\n  }\n\n  render() {\n    if (this.state.posted) {\n      return this.renderPostedDialog();\n    } else {\n      return this.renderTweetDialog();\n    }\n  }\n}\n","import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport classNames from \"classnames\";\nimport styles from \"../assets/stylesheets/message-entry.scss\";\nimport { WithHoverSound } from \"./wrap-with-audio\";\nimport { handleTextFieldFocus, handleTextFieldBlur } from \"../utils/focus-utils\";\nimport sendMessageIcon from \"../assets/images/send_message.svgi\";\nimport { InlineSVGButton } from \"./svgi\";\n\nclass LobbyChatBox extends Component {\n  static propTypes = {\n    discordBridges: PropTypes.array,\n    occupantCount: PropTypes.number,\n    onSendMessage: PropTypes.func\n  };\n\n  state = {\n    pendingMessage: \"\"\n  };\n\n  sendMessage = e => {\n    e.preventDefault();\n    if (this.props.onSendMessage) {\n      this.props.onSendMessage(this.state.pendingMessage);\n    }\n    this.setState({ pendingMessage: \"\" });\n  };\n\n  render() {\n    const textRows = this.state.pendingMessage.split(\"\\n\").length;\n    const pendingMessageTextareaHeight = textRows * 28 + \"px\";\n    const pendingMessageFieldHeight = textRows * 28 + 20 + \"px\";\n    const discordSnippet = this.props.discordBridges.map(ch => \"#\" + ch).join(\", \");\n    const occupantSnippet = `${this.props.occupantCount - 1} other${this.props.occupantCount > 2 ? \"s\" : \"\"}`;\n    const messageEntryPlaceholder =\n      this.props.occupantCount <= 1\n        ? \"Nobody is here yet...\"\n        : this.props.discordBridges.length\n          ? `Send message to ${occupantSnippet} and ${discordSnippet}...`\n          : `Send message to ${occupantSnippet}...`;\n\n    return (\n      <form onSubmit={this.sendMessage}>\n        <div\n          className={classNames({\n            [styles.messageEntry]: true,\n            [styles.messageEntryDisabled]: this.props.occupantCount <= 1\n          })}\n          style={{ height: pendingMessageFieldHeight }}\n        >\n          <textarea\n            className={classNames([styles.messageEntryInput, \"chat-focus-target\"])}\n            value={this.state.pendingMessage}\n            rows={textRows}\n            style={{ height: pendingMessageTextareaHeight }}\n            onFocus={e => handleTextFieldFocus(e.target)}\n            onBlur={() => handleTextFieldBlur()}\n            onChange={e => this.setState({ pendingMessage: e.target.value })}\n            disabled={this.props.occupantCount <= 1 ? true : false}\n            onKeyDown={e => {\n              if (e.key === \"Enter\" && !e.shiftKey) {\n                this.sendMessage(e);\n              } else if (e.key === \"Escape\") {\n                e.target.blur();\n              }\n            }}\n            placeholder={messageEntryPlaceholder}\n          />\n          <WithHoverSound>\n            <InlineSVGButton\n              className={classNames([styles.messageEntryButton, styles.messageEntrySubmit])}\n              disabled={this.props.occupantCount <= 1 ? true : false}\n              type=\"submit\"\n              src={sendMessageIcon}\n            />\n          </WithHoverSound>\n        </div>\n      </form>\n    );\n  }\n}\n\nexport default LobbyChatBox;\n","import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport styles from \"../assets/stylesheets/chat-command-help.scss\";\nimport classNames from \"classnames\";\nimport { FormattedMessage } from \"react-intl\";\nimport qsTruthy from \"../utils/qs_truthy\";\n\nexport default class ChatCommandHelp extends Component {\n  static propTypes = {\n    matchingPrefix: PropTypes.string,\n    onTop: PropTypes.bool\n  };\n\n  render() {\n    const commands = [\n      \"leave\",\n      \"fly\",\n      \"grow\",\n      \"shrink\",\n      \"duck\",\n      \"debug\",\n      \"vrstats\",\n      \"scene <scene url>\",\n      \"rename <new name>\"\n    ];\n\n    if (qsTruthy(\"video_capture\")) {\n      commands.push(\"capture [stop]\");\n    }\n\n    return (\n      <div className={classNames({ [styles.commandHelp]: true, [styles.commandHelpOnTop]: this.props.onTop })}>\n        {commands.map(\n          c =>\n            (this.props.matchingPrefix === \"\" ||\n              c.split(\" \")[0].startsWith(this.props.matchingPrefix.split(\" \")[0])) && (\n              <div className={styles.entry} key={c}>\n                <div className={styles.command}>/{c}</div>\n                <div>\n                  <FormattedMessage id={`commands.${c.split(\" \")[0]}`} />\n                </div>\n              </div>\n            )\n        )}\n      </div>\n    );\n  }\n}\n","// https://stackoverflow.com/questions/6209161/extract-the-current-dom-and-print-it-as-a-string-with-styles-intact\n//\n// Mapping between tag names and css default values lookup tables. This allows to exclude default values in the result.\nconst defaultStylesByTagName = {};\n\n// Styles inherited from style sheets will not be rendered for elements with these tag names\nconst noStyleTags = {\n  BASE: true,\n  HEAD: true,\n  HTML: true,\n  META: true,\n  NOFRAME: true,\n  NOSCRIPT: true,\n  PARAM: true,\n  SCRIPT: true,\n  STYLE: true,\n  TITLE: true\n};\n\n// This list determines which css default values lookup tables are precomputed at load time\n// Lookup tables for other tag names will be automatically built at runtime if needed\nconst tagNames = [\n  \"A\",\n  \"ABBR\",\n  \"ADDRESS\",\n  \"AREA\",\n  \"ARTICLE\",\n  \"ASIDE\",\n  \"AUDIO\",\n  \"B\",\n  \"BASE\",\n  \"BDI\",\n  \"BDO\",\n  \"BLOCKQUOTE\",\n  \"BODY\",\n  \"BR\",\n  \"BUTTON\",\n  \"CANVAS\",\n  \"CAPTION\",\n  \"CENTER\",\n  \"CITE\",\n  \"CODE\",\n  \"COL\",\n  \"COLGROUP\",\n  \"COMMAND\",\n  \"DATALIST\",\n  \"DD\",\n  \"DEL\",\n  \"DETAILS\",\n  \"DFN\",\n  \"DIV\",\n  \"DL\",\n  \"DT\",\n  \"EM\",\n  \"EMBED\",\n  \"FIELDSET\",\n  \"FIGCAPTION\",\n  \"FIGURE\",\n  \"FONT\",\n  \"FOOTER\",\n  \"FORM\",\n  \"H1\",\n  \"H2\",\n  \"H3\",\n  \"H4\",\n  \"H5\",\n  \"H6\",\n  \"HEAD\",\n  \"HEADER\",\n  \"HGROUP\",\n  \"HR\",\n  \"HTML\",\n  \"I\",\n  \"IFRAME\",\n  \"IMG\",\n  \"INPUT\",\n  \"INS\",\n  \"KBD\",\n  \"KEYGEN\",\n  \"LABEL\",\n  \"LEGEND\",\n  \"LI\",\n  \"LINK\",\n  \"MAP\",\n  \"MARK\",\n  \"MATH\",\n  \"MENU\",\n  \"META\",\n  \"METER\",\n  \"NAV\",\n  \"NOBR\",\n  \"NOSCRIPT\",\n  \"OBJECT\",\n  \"OL\",\n  \"OPTION\",\n  \"OPTGROUP\",\n  \"OUTPUT\",\n  \"P\",\n  \"PARAM\",\n  \"PRE\",\n  \"PROGRESS\",\n  \"Q\",\n  \"RP\",\n  \"RT\",\n  \"RUBY\",\n  \"S\",\n  \"SAMP\",\n  \"SCRIPT\",\n  \"SECTION\",\n  \"SELECT\",\n  \"SMALL\",\n  \"SOURCE\",\n  \"SPAN\",\n  \"STRONG\",\n  \"STYLE\",\n  \"SUB\",\n  \"SUMMARY\",\n  \"SUP\",\n  \"SVG\",\n  \"TABLE\",\n  \"TBODY\",\n  \"TD\",\n  \"TEXTAREA\",\n  \"TFOOT\",\n  \"TH\",\n  \"THEAD\",\n  \"TIME\",\n  \"TITLE\",\n  \"TR\",\n  \"TRACK\",\n  \"U\",\n  \"UL\",\n  \"VAR\",\n  \"VIDEO\",\n  \"WBR\"\n];\n\nfunction computeDefaultStyleByTagName(tagName) {\n  const defaultStyle = {};\n  const element = document.body.appendChild(document.createElement(tagName));\n  const computedStyle = getComputedStyle(element);\n  for (let i = 0; i < computedStyle.length; i++) {\n    defaultStyle[computedStyle[i]] = computedStyle[computedStyle[i]];\n  }\n  document.body.removeChild(element);\n  return defaultStyle;\n}\n\nfunction getDefaultStyleByTagName(tagName) {\n  tagName = tagName.toUpperCase();\n  if (!defaultStylesByTagName[tagName]) {\n    defaultStylesByTagName[tagName] = computeDefaultStyleByTagName(tagName);\n  }\n  return defaultStylesByTagName[tagName];\n}\n\nexport function warmSerializeElement() {\n  for (let i = 0; i < tagNames.length; i++) {\n    if (!noStyleTags[tagNames[i]]) {\n      defaultStylesByTagName[tagNames[i]] = computeDefaultStyleByTagName(tagNames[i]);\n    }\n  }\n}\n\nexport default function serializeElement(el) {\n  if (Object.keys(defaultStylesByTagName).length === 0) {\n    // Precompute the lookup tables.\n    warmSerializeElement();\n  }\n\n  if (el.nodeType !== Node.ELEMENT_NODE) {\n    throw new TypeError();\n  }\n  const cssTexts = [];\n  const elements = el.querySelectorAll(\"*\");\n  for (let i = 0; i < elements.length; i++) {\n    const e = elements[i];\n    if (!noStyleTags[e.tagName]) {\n      const computedStyle = getComputedStyle(e);\n      const defaultStyle = getDefaultStyleByTagName(e.tagName);\n      cssTexts[i] = e.style.cssText;\n      for (let ii = 0; ii < computedStyle.length; ii++) {\n        const cssPropName = computedStyle[ii];\n\n        // Skip non-standard CSS for now, because it overwrites things like color\n        if (cssPropName.startsWith(\"-webkit\")) continue;\n\n        if (computedStyle[cssPropName] !== defaultStyle[cssPropName]) {\n          e.style[cssPropName] = computedStyle[cssPropName];\n        }\n      }\n    }\n  }\n  const result = el.outerHTML;\n  for (let i = 0; i < elements.length; i++) {\n    elements[i].style.cssText = cssTexts[i];\n  }\n  return result;\n}\n","import configs from \"../utils/configs\";\nimport React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport { FormattedMessage } from \"react-intl\";\nimport classNames from \"classnames\";\n\nimport rootStyles from \"../assets/stylesheets/ui-root.scss\";\nimport styles from \"../assets/stylesheets/presence-list.scss\";\nimport maskEmail from \"../utils/mask-email\";\nimport StateLink from \"./state-link.js\";\nimport { WithHoverSound } from \"./wrap-with-audio\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport { faUsers } from \"@fortawesome/free-solid-svg-icons/faUsers\";\nimport { faPencilAlt } from \"@fortawesome/free-solid-svg-icons/faPencilAlt\";\nimport { faDesktop } from \"@fortawesome/free-solid-svg-icons/faDesktop\";\nimport { faVideo } from \"@fortawesome/free-solid-svg-icons/faVideo\";\nimport discordIcon from \"../assets/images/discord.svgi\";\nimport hmdIcon from \"../assets/images/hmd-icon.svgi\";\nimport { faMobileAlt } from \"@fortawesome/free-solid-svg-icons/faMobileAlt\";\nimport { pushHistoryPath, withSlug } from \"../utils/history\";\nimport { hasReticulumServer } from \"../utils/phoenix-utils\";\nimport { InlineSVG } from \"./svgi\";\n\nfunction getPresenceIcon(ctx) {\n  if (ctx && ctx.hmd) {\n    return <InlineSVG src={hmdIcon} />;\n  } else if (ctx && ctx.mobile) {\n    return <FontAwesomeIcon icon={faMobileAlt} />;\n  } else if (ctx && ctx.discord) {\n    return <InlineSVG src={discordIcon} />;\n  } else {\n    return <FontAwesomeIcon icon={faDesktop} />;\n  }\n}\n\nexport function navigateToClientInfo(history, clientId) {\n  const currentParams = new URLSearchParams(history.location.search);\n\n  if (hasReticulumServer() && document.location.host !== configs.RETICULUM_SERVER) {\n    currentParams.set(\"client_id\", clientId);\n    pushHistoryPath(history, history.location.pathname, currentParams.toString());\n  } else {\n    pushHistoryPath(history, withSlug(history.location, `/clients/${clientId}`), currentParams.toString());\n  }\n}\n\nexport default class PresenceList extends Component {\n  static propTypes = {\n    presences: PropTypes.object,\n    history: PropTypes.object,\n    sessionId: PropTypes.string,\n    signedIn: PropTypes.bool,\n    email: PropTypes.string,\n    onSignIn: PropTypes.func,\n    onSignOut: PropTypes.func,\n    expanded: PropTypes.bool,\n    onExpand: PropTypes.func\n  };\n\n  navigateToClientInfo = clientId => {\n    navigateToClientInfo(this.props.history, clientId);\n  };\n\n  domForPresence = ([sessionId, data]) => {\n    const meta = data.metas[data.metas.length - 1];\n    const context = meta.context;\n    const profile = meta.profile;\n    const recording = meta.streaming || meta.recording;\n    const icon = recording ? <FontAwesomeIcon icon={faVideo} /> : getPresenceIcon(context);\n    const isBot = context && context.discord;\n    const isOwner = meta.roles && meta.roles.owner;\n    const badge = isOwner && (\n      <span className={styles.moderatorBadge} title=\"Moderator\">\n        &#x2605;\n      </span>\n    );\n\n    return (\n      <WithHoverSound key={sessionId}>\n        <div className={styles.row}>\n          <div className={styles.icon}>\n            <i>{icon}</i>\n          </div>\n          <div\n            className={classNames({\n              [styles.listItem]: true\n            })}\n          >\n            {sessionId === this.props.sessionId ? (\n              <StateLink className={styles.self} stateKey=\"overlay\" stateValue=\"profile\" history={this.props.history}>\n                {profile && profile.displayName}\n                {badge}\n                <i>\n                  <FontAwesomeIcon icon={faPencilAlt} />\n                </i>\n              </StateLink>\n            ) : (\n              <div>\n                {!isBot ? (\n                  <button className={styles.clientLink} onClick={() => this.navigateToClientInfo(sessionId)}>\n                    {profile && profile.displayName}\n                  </button>\n                ) : (\n                  <span>{profile && profile.displayName}</span>\n                )}\n                {badge}\n              </div>\n            )}\n          </div>\n          <div className={styles.presence}>\n            <FormattedMessage id={`presence.in_${meta.presence}`} />\n          </div>\n        </div>\n      </WithHoverSound>\n    );\n  };\n\n  componentDidMount() {\n    document.querySelector(\".a-canvas\").addEventListener(\n      \"mouseup\",\n      () => {\n        this.props.onExpand(false);\n      },\n      { once: true }\n    );\n  }\n\n  renderExpandedList() {\n    return (\n      <div className={styles.presenceList}>\n        <div className={styles.attachPoint} />\n        <div className={styles.contents}>\n          <div className={styles.rows}>\n            {Object.entries(this.props.presences || {})\n              .filter(([k]) => k === this.props.sessionId)\n              .map(this.domForPresence)}\n            {Object.entries(this.props.presences || {})\n              .filter(([k]) => k !== this.props.sessionId)\n              .map(this.domForPresence)}\n          </div>\n          <div className={styles.signIn}>\n            {this.props.signedIn ? (\n              <div>\n                <span>\n                  <FormattedMessage id=\"sign-in.as\" /> {maskEmail(this.props.email)}\n                </span>{\" \"}\n                <a onClick={this.props.onSignOut}>\n                  <FormattedMessage id=\"sign-in.out\" />\n                </a>\n              </div>\n            ) : (\n              <a onClick={this.props.onSignIn}>\n                <FormattedMessage id=\"sign-in.in\" />\n              </a>\n            )}\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n  render() {\n    const occupantCount = this.props.presences ? Object.entries(this.props.presences).length : 0;\n    return (\n      <div>\n        <div\n          title={\"Members\"}\n          onClick={() => {\n            this.props.onExpand(!this.props.expanded);\n          }}\n          className={classNames({\n            [rootStyles.presenceInfo]: true,\n            [rootStyles.presenceInfoSelected]: this.props.expanded\n          })}\n        >\n          <FontAwesomeIcon icon={faUsers} />\n          <span className={rootStyles.occupantCount}>{occupantCount}</span>\n        </div>\n        {this.props.expanded && this.renderExpandedList()}\n      </div>\n    );\n  }\n}\n","import React from \"react\";\nimport ReactDOM from \"react-dom\";\nimport PropTypes from \"prop-types\";\nimport styles from \"../assets/stylesheets/presence-log.scss\";\nimport classNames from \"classnames\";\nimport Linkify from \"react-linkify\";\nimport { toArray as toEmojis } from \"react-emoji-render\";\nimport serializeElement from \"../utils/serialize-element\";\nimport { navigateToClientInfo } from \"./presence-list\";\nimport { coerceToUrl } from \"../utils/media-utils\";\n\nconst messageCanvas = document.createElement(\"canvas\");\n\nconst emojiRegex = /(?:[\\u2700-\\u27bf]|(?:\\ud83c[\\udde6-\\uddff]){2}|[\\ud800-\\udbff][\\udc00-\\udfff]|[\\u0023-\\u0039]\\ufe0f?\\u20e3|\\u3299|\\u3297|\\u303d|\\u3030|\\u24c2|\\ud83c[\\udd70-\\udd71]|\\ud83c[\\udd7e-\\udd7f]|\\ud83c\\udd8e|\\ud83c[\\udd91-\\udd9a]|\\ud83c[\\udde6-\\uddff]|[\\ud83c[\\ude01-\\ude02]|\\ud83c\\ude1a|\\ud83c\\ude2f|[\\ud83c[\\ude32-\\ude3a]|[\\ud83c[\\ude50-\\ude51]|\\u203c|\\u2049|[\\u25aa-\\u25ab]|\\u25b6|\\u25c0|[\\u25fb-\\u25fe]|\\u00a9|\\u00ae|\\u2122|\\u2139|\\ud83c\\udc04|[\\u2600-\\u26FF]|\\u2b05|\\u2b06|\\u2b07|\\u2b1b|\\u2b1c|\\u2b50|\\u2b55|\\u231a|\\u231b|\\u2328|\\u23cf|[\\u23e9-\\u23f3]|[\\u23f8-\\u23fa]|\\ud83c\\udccf|\\u2934|\\u2935|[\\u2190-\\u21ff])/;\nconst textureLoader = new THREE.TextureLoader();\n\nconst CHAT_MESSAGE_TEXTURE_SIZE = 1024;\n\n// Hacky word wrapping, needed because the SVG conversion doesn't properly deal\n// with wrapping in Firefox for some reason. (The CSS white-space is set to pre)\nconst wordWrap = body => {\n  const maxCharsPerLine = 40;\n  const words = body.split(\" \");\n  const outWords = [];\n  let c = 0;\n\n  for (let i = 0; i < words.length; i++) {\n    const word = words[i];\n\n    if (word.startsWith(\":\") && word.endsWith(\":\")) {\n      c++;\n    } else {\n      c += word.length;\n    }\n\n    outWords.push(word);\n\n    if (c >= maxCharsPerLine) {\n      c = 0;\n      outWords.push(\"\\n\");\n    }\n  }\n\n  return outWords.join(\" \");\n};\n\nconst messageBodyDom = (body, from, fromSessionId, includeFromLink, history) => {\n  // Support wrapping text in ` to get monospace, and multiline.\n  const multiLine = body.split(\"\\n\").length > 1;\n  const wrapStyle = multiLine ? styles.messageWrapMulti : styles.messageWrap;\n  const mono = body.startsWith(\"`\") && body.endsWith(\"`\");\n  const messageBodyClasses = {\n    [styles.messageBody]: true,\n    [styles.messageBodyMulti]: multiLine,\n    [styles.messageBodyMono]: mono\n  };\n  const includeClientLink = includeFromLink && fromSessionId && history && NAF.clientId !== fromSessionId;\n  const onFromClick = includeClientLink ? () => navigateToClientInfo(history, fromSessionId) : () => {};\n\n  if (!multiLine) {\n    body = wordWrap(body);\n  }\n\n  const cleanedBody = (mono ? body.substring(1, body.length - 1) : body).trim();\n\n  return (\n    <div className={wrapStyle}>\n      {from && (\n        <div\n          onClick={onFromClick}\n          className={classNames({ [styles.messageSource]: true, [styles.messageSourceLink]: includeClientLink })}\n        >\n          {from}:\n        </div>\n      )}\n      <div className={classNames(messageBodyClasses)}>\n        <Linkify properties={{ target: \"_blank\", rel: \"noopener referrer\" }}>{toEmojis(cleanedBody)}</Linkify>\n      </div>\n    </div>\n  );\n};\n\nfunction renderChatMessage(body, from, allowEmojiRender) {\n  const isOneLine = body.split(\"\\n\").length === 1;\n  const context = messageCanvas.getContext(\"2d\");\n  const emoji = toEmojis(body);\n  const isEmoji =\n    allowEmojiRender &&\n    emoji.length === 1 &&\n    emoji[0].props &&\n    emoji[0].props.children.match &&\n    emoji[0].props.children.match(emojiRegex);\n\n  const el = document.createElement(\"div\");\n  el.setAttribute(\"xmlns\", \"http://www.w3.org/1999/xhtml\");\n  el.setAttribute(\"class\", `${styles.presenceLog} ${styles.presenceLogSpawn}`);\n\n  // The element is added to the DOM in order to have layout compute the width & height,\n  // and then it is removed after being rendered.\n  document.body.appendChild(el);\n\n  const entryDom = (\n    <div\n      className={classNames({\n        [styles.presenceLogEntry]: !isEmoji,\n        [styles.presenceLogEntryOneLine]: !isEmoji && isOneLine,\n        [styles.presenceLogEmoji]: isEmoji\n      })}\n    >\n      {messageBodyDom(body, from)}\n    </div>\n  );\n\n  return new Promise(resolve => {\n    ReactDOM.render(entryDom, el, () => {\n      const width = el.offsetWidth;\n      const height = el.offsetHeight;\n      const ratio = height / width;\n      const scale = (CHAT_MESSAGE_TEXTURE_SIZE * Math.min(1.0, 1.0 / ratio)) / el.offsetWidth;\n      messageCanvas.width = width * scale;\n      messageCanvas.height = height * scale;\n\n      const xhtml = encodeURIComponent(`\n          <svg xmlns=\"http://www.w3.org/2000/svg\" width=\"${messageCanvas.width}px\" height=\"${messageCanvas.height}px\">\n            <foreignObject width=\"100%\" height=\"100%\" style=\"transform: scale(${scale});\">\n              ${serializeElement(el)}\n            </foreignObject>\n          </svg>\n    `);\n      const img = new Image();\n\n      img.onload = () => {\n        context.drawImage(img, 0, 0);\n        ReactDOM.unmountComponentAtNode(el);\n        el.remove();\n        img.onload = null;\n        img.src = \"\";\n        messageCanvas.toBlob(blob => resolve([blob, width, height]));\n      };\n\n      img.src = \"data:image/svg+xml,\" + xhtml;\n    });\n  });\n}\n\nexport async function createInWorldLogMessage({ name, type, body }) {\n  if (type !== \"chat\") return;\n\n  const [blob, width, height] = await renderChatMessage(body, name, false);\n  const entity = document.createElement(\"a-entity\");\n  const meshEntity = document.createElement(\"a-entity\");\n\n  document.querySelector(\"a-scene\").appendChild(entity);\n\n  entity.appendChild(meshEntity);\n  entity.setAttribute(\"class\", \"ui\");\n  entity.setAttribute(\"is-remote-hover-target\", {});\n  entity.setAttribute(\"follow-in-fov\", {\n    target: \"#avatar-pov-node\",\n    offset: { x: 0, y: 0.0, z: -0.8 }\n  });\n\n  const blobUrl = URL.createObjectURL(blob);\n\n  meshEntity.setAttribute(\"animation__float\", {\n    property: \"position\",\n    dur: 10000,\n    from: { x: 0, y: 0, z: 0 },\n    to: { x: 0, y: 0.05, z: -0.05 },\n    easing: \"easeOutQuad\"\n  });\n\n  entity.setAttribute(\"animation__spawn\", {\n    property: \"scale\",\n    dur: 200,\n    from: { x: 0.1, y: 0.1, z: 0.1 },\n    to: { x: 1, y: 1, z: 1 },\n    easing: \"easeOutElastic\"\n  });\n\n  meshEntity.setAttribute(\"animation__opacity\", {\n    property: \"meshMaterial.opacity\",\n    isRawProperty: true,\n    delay: 3000,\n    dur: 8000,\n    from: 1.0,\n    to: 0.0,\n    easing: \"easeInQuad\"\n  });\n\n  meshEntity.addEventListener(\"animationcomplete__opacity\", () => {\n    entity.parentNode.removeChild(entity);\n  });\n\n  textureLoader.load(blobUrl, texture => {\n    const material = new THREE.MeshBasicMaterial();\n    material.transparent = true;\n    material.map = texture;\n    material.generateMipmaps = false;\n    material.needsUpdate = true;\n\n    const geometry = new THREE.PlaneBufferGeometry(1, 1, 1, 1, texture.flipY);\n    const mesh = new THREE.Mesh(geometry, material);\n    meshEntity.setObject3D(\"mesh\", mesh);\n    meshEntity.meshMaterial = material;\n    const scaleFactor = 400;\n    meshEntity.object3DMap.mesh.scale.set(width / scaleFactor, height / scaleFactor, 1);\n  });\n}\n\nexport async function spawnChatMessage(body, from) {\n  if (body.length === 0) return;\n\n  try {\n    const url = new URL(coerceToUrl(body));\n    if (url.host) {\n      document.querySelector(\"a-scene\").emit(\"add_media\", body);\n      return;\n    }\n  } catch (e) {\n    // Ignore parse error\n  }\n\n  // If not a URL, spawn as a text bubble\n\n  const [blob] = await renderChatMessage(body, from, true);\n  document.querySelector(\"a-scene\").emit(\"add_media\", new File([blob], \"message.png\", { type: \"image/png\" }));\n}\n\nexport default function ChatMessage(props) {\n  return (\n    <div className={props.className}>\n      {props.maySpawn && (\n        <button\n          className={classNames(styles.iconButton, styles.spawnMessage)}\n          onClick={() => spawnChatMessage(props.body)}\n        />\n      )}\n      {messageBodyDom(props.body, props.name, props.sessionId, props.includeFromLink, props.history)}\n    </div>\n  );\n}\n\nChatMessage.propTypes = {\n  name: PropTypes.string,\n  maySpawn: PropTypes.bool,\n  body: PropTypes.string,\n  sessionId: PropTypes.string,\n  history: PropTypes.object,\n  className: PropTypes.string,\n  includeFromLink: PropTypes.bool\n};\n","import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport classNames from \"classnames\";\nimport styles from \"../assets/stylesheets/message-entry.scss\";\nimport ChatCommandHelp from \"./chat-command-help\";\nimport sendMessageIcon from \"../assets/images/send_message.svgi\";\nimport spawnMessageIcon from \"../assets/images/spawn_message.svgi\";\nimport { faCamera } from \"@fortawesome/free-solid-svg-icons/faCamera\";\nimport { faPlus } from \"@fortawesome/free-solid-svg-icons/faPlus\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport { handleTextFieldFocus, handleTextFieldBlur } from \"../utils/focus-utils\";\nimport { spawnChatMessage } from \"./chat-message\";\nimport { pushHistoryState } from \"../utils/history\";\nimport { InlineSVGButton } from \"./svgi\";\n\nconst isMobile = AFRAME.utils.device.isMobile();\n\nclass InWorldChatBox extends Component {\n  static propTypes = {\n    discordBridges: PropTypes.array,\n    onSendMessage: PropTypes.func,\n    onObjectCreated: PropTypes.func,\n    history: PropTypes.object,\n    enableSpawning: PropTypes.bool\n  };\n\n  state = {\n    pendingMessage: \"\"\n  };\n\n  sendMessage = e => {\n    e.preventDefault();\n    if (this.props.onSendMessage) {\n      this.props.onSendMessage(this.state.pendingMessage);\n    }\n    this.setState({ pendingMessage: \"\" });\n  };\n\n  render() {\n    const textRows = this.state.pendingMessage.split(\"\\n\").length;\n    const pendingMessageTextareaHeight = textRows * 28 + \"px\";\n    const pendingMessageFieldHeight = textRows * 28 + 20 + \"px\";\n    const discordSnippet = this.props.discordBridges.map(ch => \"#\" + ch).join(\", \");\n\n    return (\n      <form onSubmit={this.sendMessage}>\n        <div\n          className={classNames({ [styles.messageEntryInRoom]: true, [styles.messageEntryOnMobile]: isMobile })}\n          style={{ height: pendingMessageFieldHeight }}\n        >\n          {this.state.pendingMessage.startsWith(\"/\") && (\n            <ChatCommandHelp matchingPrefix={this.state.pendingMessage.substring(1)} />\n          )}\n          <input\n            id=\"message-entry-media-input\"\n            type=\"file\"\n            style={{ display: \"none\" }}\n            accept={isMobile ? \"image/*\" : \"*\"}\n            multiple\n            onChange={e => {\n              if (this.props.onObjectCreated) {\n                for (const file of e.target.files) {\n                  this.props.onObjectCreated(file);\n                }\n              }\n            }}\n          />\n          {this.props.enableSpawning && (\n            <label\n              htmlFor=\"message-entry-media-input\"\n              title={\"Upload\"}\n              className={classNames([\n                styles.messageEntryButton,\n                styles.messageEntryButtonInRoom,\n                styles.messageEntryUpload\n              ])}\n            >\n              <i>\n                <FontAwesomeIcon icon={isMobile ? faCamera : faPlus} />\n              </i>\n            </label>\n          )}\n          <textarea\n            style={{ height: pendingMessageTextareaHeight }}\n            className={classNames([\n              styles.messageEntryInput,\n              styles.messageEntryInputInRoom,\n              \"chat-focus-target\",\n              !this.props.enableSpawning && styles.messageEntryInputNoSpawn\n            ])}\n            value={this.state.pendingMessage}\n            rows={textRows}\n            onFocus={e => {\n              handleTextFieldFocus(e.target);\n            }}\n            onBlur={() => {\n              handleTextFieldBlur();\n            }}\n            onChange={e => {\n              e.stopPropagation();\n              this.setState({ pendingMessage: e.target.value });\n            }}\n            onKeyDown={e => {\n              if (e.key === \"Enter\" && !e.ctrlKey && !e.shiftKey) {\n                this.sendMessage(e);\n              } else if (e.key === \"Enter\" && e.ctrlKey) {\n                spawnChatMessage(e.target.value);\n                this.setState({ pendingMessage: \"\" });\n                e.target.blur();\n              } else if (e.key === \"Escape\") {\n                e.target.blur();\n              }\n            }}\n            placeholder={this.props.discordBridges.length ? `Send to room and ${discordSnippet}...` : \"Send to room...\"}\n          />\n          {this.props.enableSpawning && (\n            <InlineSVGButton\n              title={\"Create\"}\n              className={classNames([styles.messageEntrySpawn])}\n              src={spawnMessageIcon}\n              onClick={() => {\n                if (this.state.pendingMessage.length > 0) {\n                  spawnChatMessage(this.state.pendingMessage);\n                  this.setState({ pendingMessage: \"\" });\n                } else {\n                  pushHistoryState(this.props.history, \"modal\", \"create\");\n                }\n              }}\n            />\n          )}\n          <InlineSVGButton\n            type=\"submit\"\n            title={\"Submit\"}\n            className={classNames([\n              styles.messageEntryButton,\n              styles.messageEntryButtonInRoom,\n              styles.messageEntrySubmit\n            ])}\n            src={sendMessageIcon}\n          />\n        </div>\n      </form>\n    );\n  }\n}\n\nexport default InWorldChatBox;\n","import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport { FormattedMessage } from \"react-intl\";\nimport classNames from \"classnames\";\nimport { faTimes } from \"@fortawesome/free-solid-svg-icons/faTimes\";\nimport { faCloudUploadAlt } from \"@fortawesome/free-solid-svg-icons/faCloudUploadAlt\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\n\nimport { messages } from \"../utils/i18n\";\nimport configs from \"../utils/configs\";\nimport IfFeature from \"./if-feature\";\nimport { fetchReticulumAuthenticated } from \"../utils/phoenix-utils\";\nimport { upload } from \"../utils/media-utils\";\nimport { ensureAvatarMaterial } from \"../utils/avatar-utils\";\n\nimport AvatarPreview from \"./avatar-preview\";\nimport styles from \"../assets/stylesheets/avatar-editor.scss\";\n\nconst AVATARS_API = \"/api/v1/avatars\";\n\nconst defaultEditors = [\n  {\n    name: \"Quilt\",\n    url: \"https://tryquilt.io/?gltf=$AVATAR_GLTF\"\n  }\n];\nconst useEditorWhitelist = true;\nconst editorWhitelist = [\n  ...defaultEditors,\n  {\n    name: \"Skindex Editor\",\n    url: \"https://www.minecraftskins.com/skin-editor\"\n  },\n  {\n    name: \"MinecraftSkins.net Editor\",\n    url: \"https://www.minecraftskins.net/skineditor\"\n  }\n];\n\nconst fetchAvatar = async avatarId => {\n  const { avatars } = await fetchReticulumAuthenticated(`${AVATARS_API}/${avatarId}`);\n  return avatars[0];\n};\n\nexport default class AvatarEditor extends Component {\n  static propTypes = {\n    avatarId: PropTypes.string,\n    onSignIn: PropTypes.func,\n    onSave: PropTypes.func,\n    onClose: PropTypes.func,\n    signedIn: PropTypes.bool,\n    hideDelete: PropTypes.bool,\n    debug: PropTypes.bool,\n    className: PropTypes.string\n  };\n\n  state = {\n    baseAvatarResults: [],\n    editorLinks: defaultEditors,\n    previewGltfUrl: null\n  };\n\n  constructor(props) {\n    super(props);\n    this.inputFiles = {};\n  }\n\n  componentDidMount = async () => {\n    if (this.props.avatarId) {\n      const avatar = await fetchAvatar(this.props.avatarId);\n      avatar.creatorAttribution = (avatar.attributions && avatar.attributions.creator) || \"\";\n      Object.assign(this.inputFiles, avatar.files);\n      this.setState({ avatar, previewGltfUrl: avatar.base_gltf_url });\n    } else {\n      const { entries } = await fetchReticulumAuthenticated(`/api/v1/media/search?filter=base&source=avatar_listings`);\n      const baseAvatarResults = entries.map(e => ({ id: e.id, name: e.name, gltfs: e.gltfs, images: e.images }));\n      if (baseAvatarResults.length) {\n        const randomAvatarResult = baseAvatarResults[Math.floor(Math.random() * baseAvatarResults.length)];\n        this.setState({\n          baseAvatarResults,\n          avatar: {\n            name: \"My Avatar\",\n            files: {},\n            base_gltf_url: randomAvatarResult.gltfs.base,\n            parent_avatar_listing_id: randomAvatarResult.id\n          },\n          previewGltfUrl: randomAvatarResult.gltfs.avatar\n        });\n      } else {\n        this.setState({\n          avatar: {\n            name: \"My Avatar\",\n            files: {}\n          }\n        });\n      }\n    }\n  };\n\n  createOrUpdateAvatar = avatar => {\n    return fetchReticulumAuthenticated(\n      avatar.avatar_id ? `${AVATARS_API}/${avatar.avatar_id}` : AVATARS_API,\n      avatar.avatar_id ? \"PUT\" : \"POST\",\n      { avatar }\n    ).then(({ avatars }) => avatars[0]);\n  };\n\n  uploadAvatar = async e => {\n    e.preventDefault();\n\n    if (this.inputFiles.glb && this.inputFiles.glb instanceof File) {\n      const gltfLoader = new THREE.GLTFLoader();\n      const gltfUrl = URL.createObjectURL(this.inputFiles.glb);\n      const onProgress = console.log;\n      const parser = await new Promise((resolve, reject) =>\n        gltfLoader.createParser(gltfUrl, resolve, onProgress, reject)\n      );\n      URL.revokeObjectURL(gltfUrl);\n\n      const { body } = parser.extensions.KHR_binary_glTF;\n      const content = JSON.stringify(ensureAvatarMaterial(parser.json));\n      // Inject hubs components on upload. Used to create base avatar\n      // const gltf = parser.json;\n      // Object.assign(gltf.scenes[0], {\n      //   extensions: {\n      //     MOZ_hubs_components: {\n      //       \"loop-animation\": {\n      //         clip: \"idle_eyes\"\n      //       }\n      //     }\n      //   }\n      // });\n      // Object.assign(gltf.nodes.find(n => n.name === \"Head\"), {\n      //   extensions: {\n      //     MOZ_hubs_components: {\n      //       \"scale-audio-feedback\": \"\"\n      //     }\n      //   }\n      // });\n      // content = JSON.stringify(gltf);\n\n      this.inputFiles.gltf = new File([content], \"file.gltf\", {\n        type: \"model/gltf\"\n      });\n      this.inputFiles.bin = new File([body], \"file.bin\", {\n        type: \"application/octet-stream\"\n      });\n    }\n\n    this.inputFiles.thumbnail = new File([await this.preview.getWrappedInstance().snapshot()], \"thumbnail.png\", {\n      type: \"image/png\"\n    });\n\n    const filesToUpload = [\"gltf\", \"bin\", \"base_map\", \"emissive_map\", \"normal_map\", \"orm_map\", \"thumbnail\"].filter(\n      k => this.inputFiles[k] === null || this.inputFiles[k] instanceof File\n    );\n\n    this.setState({ uploading: true });\n\n    const fileUploads = await Promise.all(filesToUpload.map(f => this.inputFiles[f] && upload(this.inputFiles[f])));\n    const avatar = {\n      ...this.state.avatar,\n      attributions: {\n        creator: this.state.avatar.creatorAttribution\n      },\n      files: fileUploads\n        .map((resp, i) => [filesToUpload[i], resp && [resp.file_id, resp.meta.access_token, resp.meta.promotion_token]])\n        .reduce((o, [k, v]) => ({ ...o, [k]: v }), {})\n    };\n\n    await this.createOrUpdateAvatar(avatar);\n\n    this.setState({ uploading: false });\n\n    if (this.props.onSave) this.props.onSave();\n  };\n\n  deleteAvatar = async e => {\n    e.preventDefault();\n    await fetchReticulumAuthenticated(`${AVATARS_API}/${this.state.avatar.avatar_id}`, \"DELETE\");\n    if (this.props.onSave) this.props.onSave();\n  };\n\n  fileField = (name, label, accept, disabled = false, title) => (\n    <div className={classNames(\"file-input-row\", { disabled })} key={name} title={title}>\n      <label htmlFor={`avatar-file_${name}`}>\n        <div className=\"img-box\" />\n        <span>{label}</span>\n      </label>\n      <input\n        id={`avatar-file_${name}`}\n        type=\"file\"\n        accept={accept}\n        disabled={disabled}\n        onChange={e => {\n          const file = e.target.files[0];\n          e.target.value = null;\n          this.inputFiles[name] = file;\n          URL.revokeObjectURL(this.state.previewGltfUrl);\n          const previewGltfUrl = URL.createObjectURL(this.inputFiles.glb);\n          this.setState({\n            previewGltfUrl,\n            avatar: {\n              ...this.state.avatar,\n              files: {\n                ...this.state.avatar.files,\n                [name]: URL.createObjectURL(file)\n              }\n            }\n          });\n        }}\n      />\n      {this.state.avatar.files[name] && (\n        <a\n          onClick={() => {\n            this.inputFiles[name] = null;\n            URL.revokeObjectURL(this.state.avatar.files[name]);\n            this.setState(\n              {\n                avatar: {\n                  ...this.state.avatar,\n                  files: {\n                    ...this.state.avatar.files,\n                    [name]: null\n                  }\n                }\n              },\n              () => this.setState({ previewGltfUrl: this.getPreviewUrl() })\n            );\n          }}\n        >\n          <i>\n            <FontAwesomeIcon icon={faTimes} />\n          </i>\n        </a>\n      )}\n    </div>\n  );\n\n  mapField = (name, label, accept, disabled = false, title) => (\n    <div className=\"file-input-row\" key={name} title={title}>\n      <label htmlFor={`avatar-file_${name}`}>\n        <div className=\"img-box\">\n          {this.state.avatar.files[name] ? (\n            <img src={this.state.avatar.files[name]} />\n          ) : (\n            <FontAwesomeIcon icon={faCloudUploadAlt} />\n          )}\n        </div>\n        <span>{label}</span>\n      </label>\n      <input\n        id={`avatar-file_${name}`}\n        type=\"file\"\n        accept={accept}\n        disabled={disabled}\n        onChange={e => {\n          const file = e.target.files[0];\n          e.target.value = null;\n          this.inputFiles[name] = file;\n          URL.revokeObjectURL(this.state.avatar.files[name]);\n          this.setState({\n            avatar: {\n              ...this.state.avatar,\n              files: {\n                ...this.state.avatar.files,\n                [name]: URL.createObjectURL(file)\n              }\n            }\n          });\n        }}\n      />\n      {this.state.avatar.files[name] && (\n        <a\n          onClick={() => {\n            this.inputFiles[name] = null;\n            URL.revokeObjectURL(this.state.avatar.files[name]);\n            this.setState({\n              avatar: {\n                ...this.state.avatar,\n                files: {\n                  ...this.state.avatar.files,\n                  [name]: null\n                }\n              }\n            });\n          }}\n        >\n          <i>\n            <FontAwesomeIcon icon={faTimes} />\n          </i>\n        </a>\n      )}\n    </div>\n  );\n\n  textField = (name, placeholder, disabled, required) => (\n    <div className=\"text-field-container\">\n      <label htmlFor={`#avatar-${name}`}>{placeholder}</label>\n      <input\n        id={`avatar-${name}`}\n        type=\"text\"\n        disabled={disabled}\n        required={required}\n        placeholder={placeholder}\n        className=\"text-field\"\n        value={this.state.avatar[name] || \"\"}\n        onChange={e => this.setState({ avatar: { ...this.state.avatar, [name]: e.target.value } })}\n      />\n    </div>\n  );\n\n  // Return the gltf for the selected base avatar, the locally modified glb, or the avatar's base_gltf_url\n  getPreviewUrl = baseSid => {\n    if (baseSid) {\n      const avatarResult = this.state.baseAvatarResults.find(a => a.id === baseSid);\n      if (avatarResult) return avatarResult.gltfs.avatar;\n    }\n\n    return this.inputFiles.glb ? URL.createObjectURL(this.inputFiles.glb) : this.state.avatar.base_gltf_url;\n  };\n\n  selectListingField = (propName, placeholder) => (\n    <div className=\"select-container\">\n      <label htmlFor={`#avatar-${propName}`}>{placeholder}</label>\n      <select\n        id={`avatar-${propName}`}\n        value={this.state.avatar[propName] || \"\"}\n        onChange={async e => {\n          const sid = e.target.value;\n          this.setState({ avatar: { ...this.state.avatar, [propName]: sid }, previewGltfUrl: this.getPreviewUrl(sid) });\n        }}\n        placeholder={placeholder}\n        className=\"select\"\n      >\n        {this.state.baseAvatarResults.map(a => (\n          <option key={a.id} value={a.id}>\n            {a.name}\n          </option>\n        ))}\n        <option value=\"\">Custom GLB...</option>\n      </select>\n      <img\n        className=\"arrow\"\n        src=\"../assets/images/dropdown_arrow.png\"\n        srcSet=\"../assets/images/dropdown_arrow@2x.png 2x\"\n      />\n    </div>\n  );\n\n  selectListingGrid = (propName, placeholder) => (\n    <div className=\"select-grid-container\">\n      <label htmlFor={`#avatar-${propName}`}>{placeholder}</label>\n      <div className=\"select-grid\">\n        {this.state.baseAvatarResults.map(a => (\n          <div\n            onClick={() =>\n              this.setState({\n                avatar: { ...this.state.avatar, [propName]: a.id },\n                previewGltfUrl: this.getPreviewUrl(a.id)\n              })\n            }\n            key={a.id}\n            className={classNames(\"item\", { selected: a.id === this.state.avatar[propName] })}\n            style={{ paddingBottom: `${(a.images.preview.width / a.images.preview.height) * 100}%` }}\n          >\n            <img src={a.images.preview.url} />\n          </div>\n        ))}\n      </div>\n      <input\n        id=\"avatar-file_glb\"\n        type=\"file\"\n        accept=\"model/gltf+binary,.glb\"\n        onChange={e => {\n          const file = e.target.files[0];\n          e.target.value = null;\n          this.inputFiles[\"glb\"] = file;\n          URL.revokeObjectURL(this.state.avatar.files[\"glb\"]);\n          this.setState({\n            avatar: {\n              ...this.state.avatar,\n              [propName]: \"\",\n              files: {\n                ...this.state.avatar.files,\n                glb: URL.createObjectURL(file)\n              }\n            },\n            previewGltfUrl: this.getPreviewUrl(\"\")\n          });\n        }}\n      />\n      <label\n        htmlFor=\"avatar-file_glb\"\n        className={classNames(\"item\", \"custom\", { selected: \"\" === this.state.avatar[propName] })}\n      >\n        <FontAwesomeIcon icon={faCloudUploadAlt} />\n        &nbsp; Custom GLB\n      </label>\n    </div>\n  );\n\n  textarea = (name, placeholder, disabled) => (\n    <div>\n      <textarea\n        id={`avatar-${name}`}\n        disabled={disabled}\n        placeholder={placeholder}\n        className=\"textarea\"\n        value={this.state.avatar[name] || \"\"}\n        onChange={e => this.setState({ avatar: { ...this.state.avatar, [name]: e.target.value } })}\n      />\n    </div>\n  );\n\n  checkbox = (name, title, children, disabled) => (\n    <div className=\"checkbox-container\" title={title}>\n      <input\n        id={`avatar-${name}`}\n        type=\"checkbox\"\n        className=\"checkbox\"\n        disabled={disabled}\n        checked={!!this.state.avatar[name]}\n        onChange={e => this.setState({ avatar: { ...this.state.avatar, [name]: e.target.checked } })}\n      />\n      <label htmlFor={`#avatar-${name}`}>{children}</label>\n    </div>\n  );\n\n  handleGltfLoaded = gltf => {\n    const ext = gltf.parser.json.extensions && gltf.parser.json.extensions[\"MOZ_hubs_avatar\"];\n    let editorLinks = (ext && ext.editors) || defaultEditors;\n    if (useEditorWhitelist) {\n      editorLinks = editorLinks.filter(e => editorWhitelist.some(w => w.name === e.name && w.url === e.url));\n    }\n    this.setState({ editorLinks });\n  };\n\n  render() {\n    const { debug } = this.props;\n    const { avatar } = this.state;\n\n    return (\n      <div className={classNames(styles.avatarEditor, this.props.className)}>\n        {this.props.onClose && (\n          <a className=\"close-button\" onClick={this.props.onClose}>\n            <i>\n              <FontAwesomeIcon icon={faTimes} />\n            </i>\n          </a>\n        )}\n        {!this.state.avatar ? (\n          <div className=\"loader\">\n            <div className=\"loader-center\" />\n          </div>\n        ) : this.props.signedIn ? (\n          <form onSubmit={this.uploadAvatar} className=\"center\">\n            {this.textField(\"name\", \"Name\", false, true)}\n            <div className=\"split\">\n              <div className=\"form-body\">\n                {debug && this.textField(\"avatar_id\", \"Avatar ID\", true)}\n                {debug && this.textField(\"parent_avatar_id\", \"Parent Avatar ID\")}\n                {debug && this.textField(\"parent_avatar_listing_id\", \"Parent Avatar Listing ID\")}\n                {debug && this.textarea(\"description\", \"Description\")}\n                {!!this.state.baseAvatarResults.length && this.selectListingGrid(\"parent_avatar_listing_id\", \"Model\")}\n\n                <label>Skin</label>\n                {this.mapField(\"base_map\", \"Base Map\", \"image/*\")}\n                <details>\n                  <summary>Advanced</summary>\n                  {this.mapField(\"emissive_map\", \"Emissive Map\", \"image/*\")}\n                  {this.mapField(\"normal_map\", \"Normal Map\", \"image/*\")}\n                  {this.mapField(\"orm_map\", \"ORM Map\", \"image/*\", false, \"Occlussion (r), Roughness (g), Metallic (b)\")}\n                </details>\n\n                <label>Share Settings</label>\n                {this.checkbox(\n                  \"allow_promotion\",\n                  `Allow ${messages[\"company-name\"]} to promote your avatar, and show it in search results.`,\n                  <span>\n                    Allow{\" \"}\n                    <a\n                      href={configs.link(\"promotion\", \"https://github.com/mozilla/hubs/blob/master/PROMOTION.md\")}\n                      target=\"_blank\"\n                      rel=\"noopener noreferrer\"\n                    >\n                      Promotion\n                    </a>\n                  </span>\n                )}\n                {this.checkbox(\n                  \"allow_remixing\",\n                  \"Allow others to edit and re-publish your avatar as long as they give you credit.\",\n                  <span>\n                    Allow{\" \"}\n                    <a\n                      href={configs.link(\"remixing\", \"https://github.com/mozilla/hubs/blob/master/REMIXING.md\")}\n                      target=\"_blank\"\n                      rel=\"noopener noreferrer\"\n                    >\n                      Remixing\n                    </a>{\" \"}\n                    <span className=\"license\">\n                      (under{\" \"}\n                      <a href=\"https://creativecommons.org/licenses/by/3.0/\" target=\"_blank\" rel=\"noopener noreferrer\">\n                        CC-BY 3.0\n                      </a>)\n                    </span>\n                  </span>\n                )}\n                {this.textField(\"creatorAttribution\", \"Attribution (optional)\", false, false)}\n                {/* {this.mapField(\"ao_map\", \"AO Map\", \"images/\\*\", true)} */}\n                {/* {this.mapField(\"metallic_map\", \"Metallic Map\", \"image/\\*\", true)} */}\n                {/* {this.mapField(\"roughness_map\", \"Roughness Map\", \"image/\\*\", true)} */}\n              </div>\n              <AvatarPreview\n                className=\"preview\"\n                avatarGltfUrl={this.state.previewGltfUrl}\n                onGltfLoaded={this.handleGltfLoaded}\n                {...this.inputFiles}\n                ref={p => (this.preview = p)}\n              />\n            </div>\n            <div className=\"info\">\n              <IfFeature name=\"show_avatar_editor_link\">\n                <p>\n                  <FormattedMessage id=\"avatar-editor.external-editor-info\" />\n                  {this.state.editorLinks.map(({ name, url }) => (\n                    <a\n                      key={name}\n                      target=\"_blank\"\n                      rel=\"noopener noreferrer\"\n                      href={url.replace(\"$AVATAR_GLTF\", encodeURIComponent(this.state.previewGltfUrl))}\n                    >\n                      {name}\n                    </a>\n                  ))}\n                </p>\n              </IfFeature>\n              <IfFeature name=\"show_avatar_pipelines_link\">\n                <p>\n                  <FormattedMessage id=\"avatar-editor.info\" />\n                  <a\n                    target=\"_blank\"\n                    rel=\"noopener noreferrer\"\n                    href=\"https://github.com/MozillaReality/hubs-avatar-pipelines\"\n                  >\n                    <FormattedMessage id=\"avatar-editor.info-link\" />\n                  </a>\n                </p>\n              </IfFeature>\n            </div>\n            <div>\n              <input\n                disabled={this.state.uploading}\n                className=\"form-submit\"\n                type=\"submit\"\n                value={this.state.uploading ? \"Uploading...\" : \"Save\"}\n              />\n            </div>\n            {!this.props.hideDelete && (\n              <div className=\"delete-avatar\">\n                {this.state.confirmDelete ? (\n                  <span>\n                    are you sure? <a onClick={this.deleteAvatar}>yes</a> /{\" \"}\n                    <a onClick={() => this.setState({ confirmDelete: false })}>no</a>\n                  </span>\n                ) : (\n                  <a\n                    onClick={() => this.setState({ confirmDelete: true })}\n                    title={\n                      avatar.has_listings\n                        ? \"Other users already using this avatar will still be able to use it, but it will be removed from 'My Avatars' and search results.\"\n                        : \"\"\n                    }\n                  >\n                    {avatar.has_listings ? \"delist\" : \"delete\"} avatar\n                  </a>\n                )}\n              </div>\n            )}\n          </form>\n        ) : (\n          <a onClick={this.props.onSignIn}>\n            <FormattedMessage id=\"sign-in.in\" />\n          </a>\n        )}\n      </div>\n    );\n  }\n}\n","import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport { FormattedMessage } from \"react-intl\";\nimport MovingAverage from \"moving-average\";\n\nexport default class MicLevelWidget extends Component {\n  static propTypes = {\n    hasAudioTrack: PropTypes.bool,\n    muteOnEntry: PropTypes.bool,\n    scene: PropTypes.object\n  };\n\n  state = {\n    volume: 0\n  };\n\n  componentDidMount() {\n    this.startAnalyser();\n  }\n\n  componentWillUnmount() {\n    this.stopAnalyser();\n  }\n\n  stopAnalyser() {\n    if (this.micUpdateInterval != null) {\n      clearInterval(this.micUpdateInterval);\n    }\n  }\n\n  startAnalyser() {\n    if (this.micUpdateInterval) {\n      clearInterval(this.micUpdateInterval);\n    }\n    const micLevelMovingAverage = MovingAverage(100);\n    let max = 0;\n    this.micUpdateInterval = setInterval(() => {\n      const analyser = this.props.scene.systems[\"local-audio-analyser\"];\n      max = Math.max(analyser.volume, max);\n      // We use a moving average to smooth out the visual animation or else it would twitch too fast for\n      // the css renderer to keep up.\n      micLevelMovingAverage.push(Date.now(), analyser.volume);\n      const average = micLevelMovingAverage.movingAverage();\n      const volume = max === 0 ? 0 : average / max;\n      if (Math.abs(this.state.volume - volume) > 0.05) {\n        this.setState({ volume });\n      }\n    }, 50);\n  }\n\n  render() {\n    const maxLevelHeight = 111;\n\n    const micClip = {\n      clip: `rect(${maxLevelHeight - Math.floor(this.state.volume * maxLevelHeight)}px, 111px, 111px, 0px)`\n    };\n\n    return (\n      <div className=\"audio-setup-panel__levels__icon\">\n        {!this.props.muteOnEntry && (\n          <svg width=\"111\" height=\"111\" viewBox=\"0 0 111 111\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n            <circle cx=\"55.5\" cy=\"55.5\" r=\"55.5\" fill=\"currentColor\" fillOpacity=\"0.8\" />\n          </svg>\n        )}\n        {!this.props.muteOnEntry && (\n          <div className=\"audio-setup-panel__levels__icon__talking\" style={micClip}>\n            <svg width=\"111\" height=\"111\" viewBox=\"0 0 111 111\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n              <circle cx=\"55.5\" cy=\"55.5\" r=\"55.5\" fill=\"currentColor\" fillOpacity=\"0.8\" />\n            </svg>\n          </div>\n        )}\n        {this.props.hasAudioTrack && !this.props.muteOnEntry ? (\n          <img\n            src=\"../assets/images/mic_level.png\"\n            srcSet=\"../assets/images/mic_level@2x.png 2x\"\n            className=\"audio-setup-panel__levels__icon-part\"\n          />\n        ) : (\n          <img\n            src=\"../assets/images/mic_denied.png\"\n            srcSet=\"../assets/images/mic_denied@2x.png 2x\"\n            className=\"audio-setup-panel__levels__icon-part\"\n          />\n        )}\n        {this.props.hasAudioTrack &&\n          !this.props.muteOnEntry && (\n            <div className=\"audio-setup-panel__levels__test_label\">\n              <FormattedMessage id=\"audio.talk_to_test\" />\n            </div>\n          )}\n      </div>\n    );\n  }\n}\n","import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport classNames from \"classnames\";\n\nimport styles from \"../assets/stylesheets/preferences-screen.scss\";\n\nexport class NumberRangeSelector extends Component {\n  static propTypes = {\n    min: PropTypes.number,\n    max: PropTypes.number,\n    currentValue: PropTypes.number,\n    onChange: PropTypes.func\n  };\n  state = {\n    isDragging: false\n  };\n  constructor(props) {\n    super(props);\n    this.myRoot = React.createRef();\n    this.stopDragging = this.stopDragging.bind(this);\n    this.drag = this.drag.bind(this);\n    window.addEventListener(\"mouseup\", this.stopDragging);\n    window.addEventListener(\"mousemove\", this.drag);\n  }\n  componentWillUnmount() {\n    window.removeEventListener(\"mouseup\", this.stopDragging);\n    window.removeEventListener(\"mousemove\", this.drag);\n  }\n\n  stopDragging() {\n    this.setState({ isDragging: false });\n  }\n\n  drag(e) {\n    if (!this.state.isDragging) return;\n    const t = Math.max(0, Math.min((e.clientX - this.myRoot.current.offsetLeft) / this.myRoot.current.clientWidth, 1));\n    this.props.onChange(this.props.min + t * (this.props.max - this.props.min));\n  }\n\n  render() {\n    return (\n      <div className={classNames(styles.numberWithRange)}>\n        <div className={classNames(styles.numberInNumberWithRange)}>\n          <input\n            type=\"text\"\n            value={this.props.currentValue.toFixed(2)}\n            onClick={e => {\n              e.preventDefault();\n              e.target.focus();\n              e.target.select();\n            }}\n            onChange={e => {\n              const num = parseInt(e.target.value);\n              this.props.onChange(num ? num : 0, true);\n            }}\n          />\n        </div>\n        <div\n          ref={this.myRoot}\n          className={classNames(styles.rangeSlider)}\n          onMouseDown={e => {\n            e.preventDefault();\n            this.setState({ isDragging: true });\n            const t = Math.max(\n              0,\n              Math.min((e.clientX - this.myRoot.current.offsetLeft) / this.myRoot.current.clientWidth, 1)\n            );\n            this.props.onChange(this.props.min + t * (this.props.max - this.props.min));\n          }}\n        >\n          <input\n            type=\"range\"\n            min={this.props.min}\n            max={this.props.max}\n            value={this.props.currentValue}\n            onChange={e => {\n              this.props.onChange(e.target.value);\n            }}\n          />\n        </div>\n      </div>\n    );\n  }\n}\n","import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport classNames from \"classnames\";\nimport { FormattedMessage } from \"react-intl\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport { faUndo } from \"@fortawesome/free-solid-svg-icons/faUndo\";\n\nimport styles from \"../assets/stylesheets/preferences-screen.scss\";\nimport { waitForDOMContentLoaded } from \"../utils/async-utils\";\nimport { SOUND_PREFERENCE_MENU_SELECT } from \"../systems/sound-effects-system\";\nimport { NumberRangeSelector } from \"./number-range-selector.js\";\n\nexport const PREFERENCE_LIST_ITEM_TYPE = {\n  CHECK_BOX: 1,\n  SELECT: 2,\n  NUMBER_WITH_RANGE: 3,\n  MAX_RESOLUTION: 4\n};\n\nexport class MaxResolutionPreferenceItem extends Component {\n  static propTypes = {\n    store: PropTypes.object\n  };\n  render() {\n    return (\n      <div className={classNames(styles.maxResolutionPreferenceItem)}>\n        <input\n          tabIndex=\"0\"\n          type=\"number\"\n          step=\"1\"\n          min=\"0\"\n          value={\n            this.props.store.state.preferences.maxResolutionWidth === undefined\n              ? 1920\n              : this.props.store.state.preferences.maxResolutionWidth\n          }\n          onClick={e => {\n            e.preventDefault();\n            e.target.focus();\n            e.target.select();\n          }}\n          onChange={e => {\n            const num = parseInt(e.target.value);\n            this.props.store.update({\n              preferences: { maxResolutionWidth: num ? num : 0 }\n            });\n          }}\n        />\n        &nbsp;x&nbsp;\n        <input\n          tabIndex=\"0\"\n          type=\"number\"\n          step=\"1\"\n          min=\"0\"\n          value={\n            this.props.store.state.preferences.maxResolutionHeight === undefined\n              ? 1920\n              : this.props.store.state.preferences.maxResolutionHeight\n          }\n          onClick={e => {\n            e.preventDefault();\n            e.target.focus();\n            e.target.select();\n          }}\n          onChange={e => {\n            const num = parseInt(e.target.value);\n            this.props.store.update({\n              preferences: { maxResolutionHeight: num ? num : 0 }\n            });\n          }}\n        />\n      </div>\n    );\n  }\n}\nexport class PreferenceListItem extends Component {\n  static propTypes = {\n    store: PropTypes.object,\n    storeKey: PropTypes.string,\n    prefType: PropTypes.number,\n    min: PropTypes.number,\n    max: PropTypes.number,\n    onChange: PropTypes.func,\n    options: PropTypes.array,\n    defaultNumber: PropTypes.number,\n    defaultString: PropTypes.string,\n    defaultBool: PropTypes.bool\n  };\n  state = {\n    hovered: false,\n    selectHovered: false\n  };\n  UNSAFE_componentWillMount() {\n    this.renderControls = this.renderControls.bind(this);\n    this.props.store.addEventListener(\"statechanged\", this.storeUpdated);\n    waitForDOMContentLoaded().then(() => {\n      this.sfx = AFRAME.scenes[0].systems[\"hubs-systems\"].soundEffectsSystem;\n    });\n  }\n  componentWillUnmount() {\n    this.props.store.removeEventListener(\"statechanged\", this.storeUpdated);\n  }\n\n  storeUpdated = () => {\n    this.forceUpdate();\n  };\n\n  renderControls() {\n    let options;\n    let storedPref;\n    switch (this.props.prefType) {\n      case PREFERENCE_LIST_ITEM_TYPE.CHECK_BOX:\n        storedPref = this.props.store.state.preferences[this.props.storeKey];\n        return (\n          <div className={classNames(styles.checkbox)}>\n            <input\n              tabIndex=\"0\"\n              type=\"checkbox\"\n              checked={storedPref === undefined ? this.props.defaultBool : storedPref}\n              onChange={() => {\n                this.props.store.update({\n                  preferences: { [this.props.storeKey]: !this.props.store.state.preferences[this.props.storeKey] }\n                });\n              }}\n            />\n          </div>\n        );\n      case PREFERENCE_LIST_ITEM_TYPE.MAX_RESOLUTION:\n        return <MaxResolutionPreferenceItem store={this.props.store} />;\n      case PREFERENCE_LIST_ITEM_TYPE.SELECT:\n        options = this.props.options.map((o, i) => {\n          const opts = {};\n          const storedPref = this.props.store.state.preferences[this.props.storeKey];\n          if (\n            o.value === storedPref ||\n            ((storedPref === undefined || storedPref === \"\") && o.value === this.props.defaultString)\n          ) {\n            opts.selected = \"selected\";\n          }\n\n          return (\n            <option key={`${this.props.storeKey}_${i}`} value={o.value} {...opts}>\n              {o.text}\n            </option>\n          );\n        });\n        return (\n          <div className={styles.dropdown}>\n            <select\n              tabIndex=\"0\"\n              className={classNames({\n                [styles.hovered]: this.state.hovered,\n                [styles.selectHovered]: this.state.selectHovered\n              })}\n              onMouseEnter={() => {\n                this.setState({ selectHovered: true });\n              }}\n              onMouseLeave={() => {\n                this.setState({ selectHovered: false });\n              }}\n              onChange={e => {\n                this.props.store.update({ preferences: { [this.props.storeKey]: e.target.value } });\n              }}\n            >\n              {options}\n            </select>\n            <img\n              className={styles.dropdownArrow}\n              src=\"../assets/images/dropdown_arrow.png\"\n              srcSet=\"../assets/images/dropdown_arrow@2x.png 2x\"\n            />\n          </div>\n        );\n      case PREFERENCE_LIST_ITEM_TYPE.NUMBER_WITH_RANGE:\n        return (\n          <NumberRangeSelector\n            min={this.props.min}\n            max={this.props.max}\n            currentValue={\n              this.props.store.state.preferences[this.props.storeKey] !== undefined\n                ? this.props.store.state.preferences[this.props.storeKey]\n                : this.props.defaultNumber\n            }\n            onChange={(value, playSound) => {\n              this.props.store.update({\n                preferences: { [this.props.storeKey]: Number.parseFloat(value) }\n              });\n              playSound && this.sfx && this.sfx.playSoundOneShot(SOUND_PREFERENCE_MENU_SELECT);\n            }}\n          />\n        );\n      default:\n        return <div />;\n    }\n  }\n\n  render() {\n    const isCheckbox = this.props.prefType === PREFERENCE_LIST_ITEM_TYPE.CHECK_BOX;\n\n    return (\n      <div\n        className={classNames(\n          { [styles.hovered]: this.state.hovered },\n          styles.preferenceListItem,\n          !isCheckbox && styles.preferenceListNonCheckbox\n        )}\n        onMouseEnter={() => {\n          this.setState({ hovered: true });\n        }}\n        onMouseLeave={() => {\n          this.setState({ hovered: false });\n        }}\n      >\n        <div className={classNames(styles.checkboxMargin)}>\n          {isCheckbox ? this.renderControls() : <span>&nbsp;</span>}\n        </div>\n        <div className={classNames(styles.part, styles.left, styles.label)}>\n          <FormattedMessage id={`preferences.${this.props.storeKey}`} />\n        </div>\n        <div className={classNames(styles.part, styles.right)}>\n          {!isCheckbox && this.renderControls()}\n          <button\n            className={classNames(styles.resetToDefaultButton)}\n            onClick={() => {\n              switch (this.props.prefType) {\n                case PREFERENCE_LIST_ITEM_TYPE.MAX_RESOLUTION:\n                  this.props.store.update({\n                    preferences: {\n                      maxResolutionWidth: undefined,\n                      maxResolutionHeight: undefined\n                    }\n                  });\n                  break;\n                default:\n                  this.props.store.update({ preferences: { [this.props.storeKey]: undefined } });\n                  break;\n              }\n              this.forceUpdate();\n            }}\n          >\n            <i title=\"Reset to default\">\n              <FontAwesomeIcon icon={faUndo} />\n            </i>\n          </button>\n        </div>\n      </div>\n    );\n  }\n}\n","import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport classNames from \"classnames\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport { faTimes } from \"@fortawesome/free-solid-svg-icons/faTimes\";\nimport { IntlProvider, addLocaleData } from \"react-intl\";\nimport en from \"react-intl/locale-data/en\";\n\nimport styles from \"../assets/stylesheets/preferences-screen.scss\";\nimport { lang, messages } from \"../utils/i18n\";\nimport { PreferenceListItem, PREFERENCE_LIST_ITEM_TYPE } from \"./preference-list-item\";\n\naddLocaleData([...en]);\n\nconst isMobile = AFRAME.utils.device.isMobile() || AFRAME.utils.device.isMobileVR();\n\nexport default class PreferencesScreen extends Component {\n  static propTypes = {\n    onClose: PropTypes.func,\n    store: PropTypes.object\n  };\n\n  UNSAFE_componentWillMount() {\n    window.APP.preferenceScreenIsVisible = true;\n  }\n  componentWillUnmount() {\n    window.APP.preferenceScreenIsVisible = false;\n  }\n\n  render() {\n    const preferenceListItem = props => {\n      return (\n        <PreferenceListItem\n          key={props.key}\n          store={this.props.store}\n          storeKey={props.key}\n          prefType={props.prefType}\n          min={props.min}\n          max={props.max}\n          currentValue={props.currentValue}\n          onChange={props.onChange}\n          options={props.options}\n          defaultNumber={props.defaultNumber}\n          defaultString={props.defaultString}\n          defaultBool={props.defaultBool}\n        />\n      );\n    };\n    // TODO: Add search text field and sort rows by fuzzy search\n    const general = [\n      { key: \"muteMicOnEntry\", prefType: PREFERENCE_LIST_ITEM_TYPE.CHECK_BOX, defaultBool: false },\n      { key: \"onlyShowNametagsInFreeze\", prefType: PREFERENCE_LIST_ITEM_TYPE.CHECK_BOX, defaultBool: false },\n      { key: \"allowMultipleHubsInstances\", prefType: PREFERENCE_LIST_ITEM_TYPE.CHECK_BOX, defaultBool: false },\n      { key: \"maxResolution\", prefType: PREFERENCE_LIST_ITEM_TYPE.MAX_RESOLUTION },\n      {\n        key: \"materialQualitySetting\",\n        prefType: PREFERENCE_LIST_ITEM_TYPE.SELECT,\n        options: [{ value: \"low\", text: \"Low\" }, { value: \"high\", text: \"High\" }],\n        defaultString: isMobile ? \"low\" : \"high\"\n      },\n      {\n        key: \"globalVoiceVolume\",\n        prefType: PREFERENCE_LIST_ITEM_TYPE.NUMBER_WITH_RANGE,\n        min: 0,\n        max: 200,\n        defaultNumber: 100\n      },\n      {\n        key: \"globalMediaVolume\",\n        prefType: PREFERENCE_LIST_ITEM_TYPE.NUMBER_WITH_RANGE,\n        min: 0,\n        max: 200,\n        defaultNumber: 100\n      },\n      {\n        key: \"snapRotationDegrees\",\n        prefType: PREFERENCE_LIST_ITEM_TYPE.NUMBER_WITH_RANGE,\n        min: 0,\n        max: 90,\n        defaultNumber: 45\n      },\n      { key: \"disableMovement\", prefType: PREFERENCE_LIST_ITEM_TYPE.CHECK_BOX, defaultBool: false },\n      { key: \"disableBackwardsMovement\", prefType: PREFERENCE_LIST_ITEM_TYPE.CHECK_BOX, defaultBool: false },\n      { key: \"disableStrafing\", prefType: PREFERENCE_LIST_ITEM_TYPE.CHECK_BOX, defaultBool: false },\n      { key: \"disableTeleporter\", prefType: PREFERENCE_LIST_ITEM_TYPE.CHECK_BOX, defaultBool: false }\n    ].map(preferenceListItem);\n\n    const touchscreen = [\n      { key: \"enableOnScreenJoystickLeft\", prefType: PREFERENCE_LIST_ITEM_TYPE.CHECK_BOX, defaultBool: false },\n      { key: \"enableOnScreenJoystickRight\", prefType: PREFERENCE_LIST_ITEM_TYPE.CHECK_BOX, defaultBool: false }\n    ].map(preferenceListItem);\n\n    return (\n      <IntlProvider locale={lang} messages={messages}>\n        <div className={classNames(styles.preferencesPanel)}>\n          <div className={classNames(styles.panelMargin)}>\n            <button autoFocus className={classNames(styles.closeButton)} onClick={e => this.props.onClose(e)}>\n              <i>\n                <FontAwesomeIcon icon={faTimes} />\n              </i>\n            </button>\n\n            <div className={classNames(styles.contentContainer)}>\n              <div className={classNames(styles.sectionBar)}>\n                <div className={classNames(styles.sectionTitle)}>\n                  <span>General</span>\n                </div>\n              </div>\n              <div className={classNames(styles.scrollingContent)}>{general}</div>\n              <div className={classNames(styles.sectionBar)}>\n                <div className={classNames(styles.sectionTitle)}>\n                  <span>Touchscreen</span>\n                </div>\n              </div>\n              <div className={classNames(styles.scrollingContent)}>{touchscreen}</div>\n            </div>\n          </div>\n        </div>\n      </IntlProvider>\n    );\n  }\n}\n","import React, { Component } from \"react\";\nimport { FormattedMessage } from \"react-intl\";\nimport { WithHoverSound } from \"./wrap-with-audio\";\n\nimport webmTone from \"../assets/sfx/tone.webm\";\nimport mp3Tone from \"../assets/sfx/tone.mp3\";\nimport oggTone from \"../assets/sfx/tone.ogg\";\nimport wavTone from \"../assets/sfx/tone.wav\";\n\nexport default class OutputLevelWidget extends Component {\n  state = {\n    tonePlaying: false\n  };\n\n  constructor(props) {\n    super(props);\n    this.playTestTone = this.playTestTone.bind(this);\n    this.toneClip = document.createElement(\"audio\");\n    if (this.toneClip.canPlayType(\"audio/webm\")) {\n      this.toneClip.src = webmTone;\n    } else if (this.toneClip.canPlayType(\"audio/mpeg\")) {\n      this.toneClip.src = mp3Tone;\n    } else if (this.toneClip.canPlayType(\"audio/ogg\")) {\n      this.toneClip.src = oggTone;\n    } else {\n      this.toneClip.src = wavTone;\n    }\n  }\n\n  componentWillUnmount() {\n    this.toneClip.pause();\n    this.toneClip.currentTime = 0;\n    if (this.testToneTimeout != null) {\n      clearTimeout(this.testToneTimeout);\n    }\n  }\n\n  playTestTone() {\n    if (this.testToneTimeout != null) {\n      clearTimeout(this.testToneTimeout);\n    }\n    this.toneClip.currentTime = 0;\n    this.toneClip.play();\n    this.setState({ tonePlaying: true });\n    this.testToneTimeout = setTimeout(() => {\n      this.setState({ tonePlaying: false });\n    }, 1393);\n  }\n\n  render() {\n    const iconClass = `audio-setup-panel__levels__icon_clickable__${this.state.tonePlaying ? \"playing\" : \"pending\"}`;\n\n    return (\n      <WithHoverSound>\n        <div className=\"audio-setup-panel__levels__icon_clickable\" onClick={this.playTestTone}>\n          <img\n            src=\"../assets/images/speaker_level.png\"\n            srcSet=\"../assets/images/speaker_level@2x.png 2x\"\n            className=\"audio-setup-panel__levels__icon-part\"\n          />\n          <div className={iconClass}>\n            <svg width=\"111\" height=\"111\" viewBox=\"0 0 111 111\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n              <circle cx=\"55.5\" cy=\"55.5\" r=\"55.5\" fill=\"currentColor\" fillOpacity=\"0.8\" />\n            </svg>\n          </div>\n          <div className=\"audio-setup-panel__levels__test_label\">\n            <FormattedMessage id=\"audio.click_to_test\" />\n          </div>\n        </div>\n      </WithHoverSound>\n    );\n  }\n}\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\n\nimport { messages } from \"../utils/i18n\";\nimport styles from \"../assets/stylesheets/presence-log.scss\";\nimport configs from \"../utils/configs\";\nimport classNames from \"classnames\";\n\nimport { share } from \"../utils/share\";\nimport { getLandingPageForPhoto } from \"../utils/phoenix-utils\";\n\nexport default function PhotoMessage({ name, body: { src: url }, className, maySpawn, hubId }) {\n  const landingPageUrl = getLandingPageForPhoto(url);\n  const onShareClicked = share.bind(null, {\n    url: landingPageUrl,\n    title: `Taken in ${messages[\"share-hashtag\"]}, join me at https://${configs.SHORTLINK_DOMAIN}/${hubId}`\n  });\n  return (\n    <div className={className}>\n      {maySpawn && <button className={classNames(styles.iconButton, styles.share)} onClick={onShareClicked} />}\n      <div className={styles.mediaBody}>\n        <span>\n          <b>{name}</b>\n        </span>\n        <span>\n          {\"took a \"}\n          <b>\n            <a href={landingPageUrl} target=\"_blank\" rel=\"noopener noreferrer\">\n              photo\n            </a>\n          </b>.\n        </span>\n      </div>\n      <a href={landingPageUrl} target=\"_blank\" rel=\"noopener noreferrer\">\n        <img src={url} />\n      </a>\n    </div>\n  );\n}\nPhotoMessage.propTypes = {\n  name: PropTypes.string,\n  maySpawn: PropTypes.bool,\n  body: PropTypes.object,\n  className: PropTypes.string,\n  hubId: PropTypes.string\n};\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport configs from \"../utils/configs\";\n\nimport { messages } from \"../utils/i18n\";\nimport styles from \"../assets/stylesheets/presence-log.scss\";\nimport classNames from \"classnames\";\n\nimport { share } from \"../utils/share\";\n\nexport default function VideoMessage({ name, body: { src: url }, className, maySpawn, hubId }) {\n  const onShareClicked = share.bind(null, {\n    url: url,\n    title: `Taken in ${messages[\"share-hashtag\"]}, join me at https://${configs.SHORTLINK_DOMAIN}/${hubId}`\n  });\n  return (\n    <div className={className}>\n      {maySpawn && <button className={classNames(styles.iconButton, styles.share)} onClick={onShareClicked} />}\n      <div className={styles.mediaBody}>\n        <span>\n          <b>{name}</b>\n        </span>\n        <span>\n          {\"took a \"}\n          <b>\n            <a href={url} target=\"_blank\" rel=\"noopener noreferrer\">\n              video\n            </a>\n          </b>.\n        </span>\n      </div>\n    </div>\n  );\n}\nVideoMessage.propTypes = {\n  name: PropTypes.string,\n  maySpawn: PropTypes.bool,\n  body: PropTypes.object,\n  className: PropTypes.string,\n  hubId: PropTypes.string\n};\n","import React from \"react\";\nimport PropTypes from \"prop-types\";\nimport styles from \"../assets/stylesheets/presence-log.scss\";\nimport classNames from \"classnames\";\nimport { proxiedUrlFor } from \"../utils/media-url-utils\";\n\nfunction spawnImage(url) {\n  document.querySelector(\"a-scene\").emit(\"add_media\", url);\n}\n\nexport default function ImageMessage({ name, body: { src: url }, className, maySpawn }) {\n  return (\n    <div className={className}>\n      {maySpawn && (\n        <button className={classNames(styles.iconButton, styles.spawnMessage)} onClick={() => spawnImage(url)} />\n      )}\n      <div className={styles.mediaBody}>{name && <div className={styles.messageSource}>{name}:</div>}</div>\n      <a href={url} target=\"_blank\" rel=\"noopener noreferrer\">\n        <img src={proxiedUrlFor(url)} />\n      </a>\n    </div>\n  );\n}\n\nImageMessage.propTypes = {\n  name: PropTypes.string,\n  maySpawn: PropTypes.bool,\n  body: PropTypes.object,\n  className: PropTypes.string\n};\n","import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport styles from \"../assets/stylesheets/presence-log.scss\";\nimport classNames from \"classnames\";\nimport { FormattedMessage } from \"react-intl\";\n\nimport ChatMessage from \"./chat-message\";\nimport PhotoMessage from \"./photo-message\";\nimport VideoMessage from \"./video-message\";\nimport ImageMessage from \"./image-message\";\nimport { getPresenceContextForSession } from \"../utils/phoenix-utils\";\n\nexport default class PresenceLog extends Component {\n  static propTypes = {\n    entries: PropTypes.array,\n    inRoom: PropTypes.bool,\n    hubId: PropTypes.string,\n    history: PropTypes.object,\n    presences: PropTypes.object\n  };\n\n  constructor(props) {\n    super(props);\n  }\n\n  domForEntry = e => {\n    const entryClasses = {\n      [styles.presenceLogEntry]: true,\n      [styles.presenceLogEntryWithButton]: (e.type === \"chat\" || e.type === \"image\") && e.maySpawn,\n      [styles.presenceLogChat]: e.type === \"chat\",\n      [styles.expired]: !!e.expired\n    };\n\n    const presenceContext = e.sessionId ? getPresenceContextForSession(this.props.presences, e.sessionId) : {};\n    const isBot = !!presenceContext.discord;\n\n    switch (e.type) {\n      case \"join\":\n      case \"entered\":\n        return (\n          <div key={e.key} className={classNames(entryClasses)}>\n            <b>{e.name}</b>&nbsp;<FormattedMessage id={`presence.${e.type}_${e.presence}`} />\n          </div>\n        );\n      case \"leave\":\n        return (\n          <div key={e.key} className={classNames(entryClasses)}>\n            <b>{e.name}</b>&nbsp;<FormattedMessage id={`presence.${e.type}`} />\n          </div>\n        );\n      case \"display_name_changed\":\n        return (\n          <div key={e.key} className={classNames(entryClasses)}>\n            <b>{e.oldName}</b>&nbsp;<FormattedMessage id=\"presence.name_change\" />&nbsp;<b>{e.newName}</b>.\n          </div>\n        );\n      case \"scene_changed\":\n        return (\n          <div key={e.key} className={classNames(entryClasses)}>\n            <b>{e.name}</b>&nbsp;<FormattedMessage id=\"presence.scene_change\" />&nbsp;<b>{e.sceneName}</b>.\n          </div>\n        );\n      case \"hub_name_changed\":\n        return (\n          <div key={e.key} className={classNames(entryClasses)}>\n            <b>{e.name}</b>&nbsp;<FormattedMessage id=\"presence.hub_name_change\" />&nbsp;<b>{e.hubName}</b>.\n          </div>\n        );\n      case \"chat\":\n        return (\n          <ChatMessage\n            key={e.key}\n            name={e.name}\n            className={classNames(entryClasses)}\n            body={e.body}\n            maySpawn={e.maySpawn}\n            sessionId={e.sessionId}\n            includeFromLink={this.props.inRoom && !isBot}\n            history={this.props.history}\n          />\n        );\n      case \"image\":\n        return (\n          <ImageMessage\n            key={e.key}\n            name={e.name}\n            className={classNames(entryClasses, styles.media)}\n            body={e.body}\n            maySpawn={e.maySpawn}\n          />\n        );\n      case \"photo\":\n        return (\n          <PhotoMessage\n            key={e.key}\n            name={e.name}\n            className={classNames(entryClasses, styles.media)}\n            body={e.body}\n            maySpawn={e.maySpawn}\n            hubId={this.props.hubId}\n          />\n        );\n      case \"video\":\n        return (\n          <VideoMessage\n            key={e.key}\n            name={e.name}\n            className={classNames(entryClasses, styles.media)}\n            body={e.body}\n            maySpawn={e.maySpawn}\n            hubId={this.props.hubId}\n          />\n        );\n      case \"log\":\n        return (\n          <div key={e.key} className={classNames(entryClasses)}>\n            {e.body}\n          </div>\n        );\n    }\n  };\n\n  render() {\n    const presenceClasses = {\n      [styles.presenceLog]: true,\n      [styles.presenceLogInRoom]: this.props.inRoom\n    };\n\n    return <div className={classNames(presenceClasses)}>{this.props.entries.map(this.domForEntry)}</div>;\n  }\n}\n","import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport classNames from \"classnames\";\nimport rootStyles from \"../assets/stylesheets/ui-root.scss\";\nimport styles from \"../assets/stylesheets/presence-list.scss\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport { faCubes } from \"@fortawesome/free-solid-svg-icons/faCubes\";\nimport { faCube } from \"@fortawesome/free-solid-svg-icons/faCube\";\nimport { faVideo } from \"@fortawesome/free-solid-svg-icons/faVideo\";\nimport { faMusic } from \"@fortawesome/free-solid-svg-icons/faMusic\";\nimport { faImage } from \"@fortawesome/free-solid-svg-icons/faImage\";\nimport { faNewspaper } from \"@fortawesome/free-solid-svg-icons/faNewspaper\";\nimport { faQuestion } from \"@fortawesome/free-solid-svg-icons/faQuestion\";\nimport {\n  SORT_ORDER_VIDEO,\n  SORT_ORDER_AUDIO,\n  SORT_ORDER_IMAGE,\n  SORT_ORDER_PDF,\n  SORT_ORDER_MODEL,\n  SORT_ORDER_UNIDENTIFIED,\n  mediaSortOrder,\n  mediaSort\n} from \"../utils/media-sorting.js\";\n\nconst THUMBNAIL_TITLE = new Map([\n  [SORT_ORDER_VIDEO, \"Video\"],\n  [SORT_ORDER_AUDIO, \"Audio\"],\n  [SORT_ORDER_IMAGE, \"Image\"],\n  [SORT_ORDER_PDF, \"PDF\"],\n  [SORT_ORDER_UNIDENTIFIED, \"Unknown Media Type\"],\n  [SORT_ORDER_MODEL, \"Model\"]\n]);\n\nconst DISPLAY_IMAGE = new Map([\n  [SORT_ORDER_VIDEO, faVideo],\n  [SORT_ORDER_AUDIO, faMusic],\n  [SORT_ORDER_IMAGE, faImage],\n  [SORT_ORDER_PDF, faNewspaper],\n  [SORT_ORDER_UNIDENTIFIED, faQuestion],\n  [SORT_ORDER_MODEL, faCube]\n]);\n\nfunction getDisplayString(el) {\n  const url = el.components[\"media-loader\"].data.src;\n  const split = url.split(\"/\");\n  const resourceName = split[split.length - 1].split(\"?\")[0];\n  let httpIndex = -1;\n  for (let i = 0; i < split.length; i++) {\n    if (split[i].indexOf(\"http\") !== -1) {\n      httpIndex = i;\n    }\n  }\n\n  let host = \"\";\n  let lessHost = \"\";\n  if (httpIndex !== -1 && split.length > httpIndex + 3) {\n    host = split[httpIndex + 2];\n    const hostSplit = host.split(\".\");\n    if (hostSplit.length > 1) {\n      lessHost = `${hostSplit[hostSplit.length - 2]}.${hostSplit[hostSplit.length - 1]}`;\n    }\n  }\n\n  const firstPart =\n    url.indexOf(\"poly.google\") !== -1\n      ? \"Google Poly\"\n      : url.indexOf(\"sketchfab.com\") !== -1\n        ? \"Sketchfab\"\n        : url.indexOf(\"youtube.com\") !== -1\n          ? \"YouTube\"\n          : lessHost;\n\n  return `${firstPart} ... ${resourceName.substr(0, 4)}`;\n}\n\nexport default class ObjectList extends Component {\n  static propTypes = {\n    onInspectObject: PropTypes.func,\n    onExpand: PropTypes.func,\n    scene: PropTypes.object,\n    expanded: PropTypes.bool\n  };\n\n  state = {\n    inspecting: false,\n    mediaEntities: []\n  };\n\n  componentDidMount() {\n    document.querySelector(\".a-canvas\").addEventListener(\"mouseup\", () => {\n      if (this.props.expanded) {\n        this.props.onExpand(false, true);\n      }\n    });\n    this.updateMediaEntities = this.updateMediaEntities.bind(this);\n    this.updateMediaEntities();\n    this.props.scene.addEventListener(\"listed_media_changed\", () => this.updateMediaEntities());\n  }\n\n  updateMediaEntities() {\n    const mediaEntities = [...this.props.scene.systems[\"listed-media\"].els];\n    mediaEntities.sort(mediaSort);\n    this.setState({ mediaEntities });\n  }\n\n  componentDidUpdate() {}\n\n  domForEntity(el, i) {\n    return (\n      <div\n        key={i}\n        className={styles.rowNoMargin}\n        onMouseDown={() => {\n          this.props.onExpand(false, false);\n          this.props.onInspectObject(el);\n        }}\n        onMouseOut={() => {\n          if (this.props.expanded && !AFRAME.utils.device.isMobileVR()) {\n            AFRAME.scenes[0].systems[\"hubs-systems\"].cameraSystem.uninspect();\n          }\n        }}\n        onMouseOver={() => {\n          AFRAME.scenes[0].systems[\"hubs-systems\"].cameraSystem.uninspect();\n          AFRAME.scenes[0].systems[\"hubs-systems\"].cameraSystem.inspect(el.object3D, 1.5, true);\n        }}\n      >\n        <div title={THUMBNAIL_TITLE.get(mediaSortOrder(el))} className={styles.icon}>\n          <FontAwesomeIcon icon={DISPLAY_IMAGE.get(mediaSortOrder(el))} />\n        </div>\n        <div className={classNames({ [styles.listItem]: true })}>\n          <div className={styles.presence}>\n            <p>{getDisplayString(el)}</p>\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n  renderExpandedList() {\n    return (\n      <div className={styles.presenceList}>\n        <div className={styles.contents}>\n          <div className={styles.rows}>{this.state.mediaEntities.map(this.domForEntity.bind(this))}</div>\n        </div>\n      </div>\n    );\n  }\n\n  render() {\n    return (\n      <div>\n        <div\n          title={\"Media\"}\n          onClick={() => {\n            this.props.onExpand(\n              !this.props.expanded && this.state.mediaEntities.length > 0,\n              !AFRAME.utils.device.isMobileVR()\n            );\n          }}\n          className={classNames({\n            [rootStyles.objectList]: true,\n            [rootStyles.presenceInfoSelected]: this.props.expanded\n          })}\n        >\n          <FontAwesomeIcon icon={faCubes} />\n          <span className={rootStyles.occupantCount}>{this.state.mediaEntities.length}</span>\n        </div>\n        {this.props.expanded && this.renderExpandedList()}\n      </div>\n    );\n  }\n}\n","import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport { FormattedMessage } from \"react-intl\";\nimport classNames from \"classnames\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport { faImage } from \"@fortawesome/free-solid-svg-icons/faImage\";\nimport { faUserAlt } from \"@fortawesome/free-solid-svg-icons/faUserAlt\";\nimport { faStar } from \"@fortawesome/free-solid-svg-icons/faStar\";\nimport { faCog } from \"@fortawesome/free-solid-svg-icons/faCog\";\nimport { faDoorClosed } from \"@fortawesome/free-solid-svg-icons/faDoorClosed\";\nimport { faPencilAlt } from \"@fortawesome/free-solid-svg-icons/faPencilAlt\";\nimport { faInfoCircle } from \"@fortawesome/free-solid-svg-icons/faInfoCircle\";\nimport { faBars } from \"@fortawesome/free-solid-svg-icons/faBars\";\nimport { faPlus } from \"@fortawesome/free-solid-svg-icons/faPlus\";\nimport { faVideo } from \"@fortawesome/free-solid-svg-icons/faVideo\";\nimport { faTimes } from \"@fortawesome/free-solid-svg-icons/faTimes\";\n\nimport configs from \"../utils/configs\";\nimport { messages } from \"../utils/i18n\";\nimport IfFeature from \"./if-feature\";\nimport StateLink from \"./state-link.js\";\nimport { resetTips } from \"../systems/tips\";\nimport { showFullScreenIfAvailable } from \"../utils/fullscreen\";\nimport LeaveRoomDialog from \"./leave-room-dialog.js\";\n\nimport styles from \"../assets/stylesheets/settings-menu.scss\";\nimport rootStyles from \"../assets/stylesheets/ui-root.scss\";\n\nexport default class SettingsMenu extends Component {\n  static propTypes = {\n    history: PropTypes.object,\n    isStreaming: PropTypes.bool,\n    toggleStreamerMode: PropTypes.func,\n    mediaSearchStore: PropTypes.object,\n    scene: PropTypes.object,\n    showAsOverlay: PropTypes.bool, // Shows the settings as an overlay menu, instead of a dropdown\n    onCloseOverlay: PropTypes.func,\n    hubScene: PropTypes.object,\n    hubChannel: PropTypes.object,\n    performConditionalSignIn: PropTypes.func,\n    showNonHistoriedDialog: PropTypes.func,\n    showPreferencesScreen: PropTypes.func,\n    pushHistoryState: PropTypes.func\n  };\n\n  state = {\n    expanded: false\n  };\n\n  unexpand() {\n    if (this.state.expanded && !this.props.showAsOverlay) {\n      this.setState({ expanded: false });\n    }\n  }\n\n  componentDidMount() {\n    this.onMouseUp = () => this.unexpand();\n    this.acanvas = document.querySelector(\".a-canvas\");\n    this.acanvas.addEventListener(\"mouseup\", this.onMouseUp);\n  }\n\n  componentWillUnmount() {\n    this.acanvas.removeEventListener(\"mouseup\", this.onMouseUp);\n  }\n\n  renderExpandedMenu() {\n    const rowClasses = classNames([styles.row, styles.settingsRow]);\n    const rowHeader = classNames([styles.row, styles.settingsRow, styles.rowHeader]);\n\n    // When showing as overlay, hide some menu items for now since the overlay mode is intended for immersive\n    // mode browsers which have limited vertical screen real estate.\n    //\n    // The reason I didn't do this with CSS is because this changes available functionality, so being more\n    // explicit in code seems like a wise idea.\n    const hideExtranousItems = this.props.showAsOverlay;\n\n    const showRoomSettings = !!this.props.hubChannel.canOrWillIfCreator(\"update_hub\");\n    const showCloseRoom = !!this.props.hubChannel.canOrWillIfCreator(\"close_hub\");\n    const showRoomInfo = !!this.props.hubScene && !hideExtranousItems;\n    const showRoomSection = showRoomSettings || showRoomInfo || showCloseRoom;\n    const showStreamerMode =\n      this.props.scene.is(\"entered\") && !!this.props.hubChannel.canOrWillIfCreator(\"kick_users\") && !hideExtranousItems;\n\n    // Draw self first\n    return (\n      <div\n        className={classNames({\n          [styles.settingsMenuDrop]: !this.props.showAsOverlay,\n          [styles.settingsMenuOverlay]: this.props.showAsOverlay\n        })}\n      >\n        {!this.props.showAsOverlay && <div className={styles.attachPoint} />}\n        <div className={styles.contents}>\n          {this.props.showAsOverlay && (\n            <button autoFocus className={styles.closeButton} onClick={() => this.props.onCloseOverlay()}>\n              <i>\n                <FontAwesomeIcon icon={faTimes} />\n              </i>\n            </button>\n          )}\n          <div className={styles.rows}>\n            {!hideExtranousItems && (\n              <div className={rowHeader}>\n                <FormattedMessage id=\"settings.row-profile\" />\n              </div>\n            )}\n            <div className={rowClasses}>\n              <div className={styles.icon}>\n                <i>\n                  <FontAwesomeIcon icon={faUserAlt} />\n                </i>\n              </div>\n              <div className={styles.listItem}>\n                <StateLink\n                  stateKey=\"overlay\"\n                  stateValue=\"profile\"\n                  history={this.props.history}\n                  onClick={() => this.unexpand()}\n                >\n                  <FormattedMessage id=\"settings.change-avatar\" />\n                </StateLink>\n              </div>\n            </div>\n            <div className={rowClasses}>\n              <div className={styles.icon}>\n                <i>\n                  <FontAwesomeIcon icon={faStar} />\n                </i>\n              </div>\n              <div className={styles.listItem}>\n                <div\n                  className={styles.listItemLink}\n                  onClick={() => {\n                    this.props.performConditionalSignIn(\n                      () => this.props.hubChannel.signedIn,\n                      () => {\n                        showFullScreenIfAvailable();\n                        this.props.mediaSearchStore.sourceNavigateWithNoNav(\"favorites\", \"use\");\n                      },\n                      \"favorite-rooms\"\n                    );\n                  }}\n                >\n                  <FormattedMessage id=\"settings.favorites\" />\n                </div>\n              </div>\n            </div>\n            <div className={rowClasses}>\n              <div className={styles.icon}>\n                <i>\n                  <FontAwesomeIcon icon={faCog} />\n                </i>\n              </div>\n              <div className={styles.listItem}>\n                <div\n                  className={styles.listItemLink}\n                  onClick={() => {\n                    this.props.showPreferencesScreen();\n                  }}\n                >\n                  <FormattedMessage id=\"settings.preferences\" />\n                </div>\n              </div>\n            </div>\n            {showRoomSection &&\n              !hideExtranousItems && (\n                <div className={rowHeader}>\n                  <FormattedMessage id=\"settings.row-room\" />\n                </div>\n              )}\n            {showRoomSettings && (\n              <div className={rowClasses}>\n                <div className={styles.icon}>\n                  <i>\n                    <FontAwesomeIcon icon={faImage} />\n                  </i>\n                </div>\n                <div className={styles.listItem}>\n                  <div\n                    className={styles.listItemLink}\n                    onClick={() => {\n                      this.props.performConditionalSignIn(\n                        () => this.props.hubChannel.can(\"update_hub\"),\n                        () => {\n                          showFullScreenIfAvailable();\n                          this.props.mediaSearchStore.sourceNavigateWithNoNav(\"scenes\", \"use\");\n                          this.unexpand();\n                        },\n                        \"change-scene\"\n                      );\n                    }}\n                  >\n                    <FormattedMessage id=\"settings.change-scene\" />\n                  </div>\n                </div>\n              </div>\n            )}\n            {showRoomSettings && (\n              <div className={rowClasses}>\n                <div className={styles.icon}>\n                  <i>\n                    <FontAwesomeIcon icon={faPencilAlt} />\n                  </i>\n                </div>\n                <div className={styles.listItem}>\n                  <a\n                    href=\"#\"\n                    onClick={e => {\n                      e.preventDefault();\n\n                      this.props.performConditionalSignIn(\n                        () => this.props.hubChannel.can(\"update_hub\"),\n                        () => {\n                          this.props.pushHistoryState(\"modal\", \"room_settings\");\n                          this.unexpand();\n                        },\n                        \"room-settings\"\n                      );\n                    }}\n                  >\n                    <FormattedMessage id=\"settings.room-settings\" />\n                  </a>\n                </div>\n              </div>\n            )}\n            {showCloseRoom && (\n              <div className={rowClasses}>\n                <div className={styles.icon}>\n                  <i>\n                    <FontAwesomeIcon icon={faDoorClosed} />\n                  </i>\n                </div>\n                <div className={styles.listItem}>\n                  <a\n                    href=\"#\"\n                    onClick={e => {\n                      e.preventDefault();\n\n                      this.props.performConditionalSignIn(\n                        () => this.props.hubChannel.can(\"update_hub\"),\n                        () => {\n                          this.props.pushHistoryState(\"modal\", \"close_room\");\n                          this.unexpand();\n                        },\n                        \"close-room\"\n                      );\n                    }}\n                  >\n                    <FormattedMessage id=\"settings.close-room\" />\n                  </a>\n                </div>\n              </div>\n            )}\n            {showRoomInfo && (\n              <div className={rowClasses}>\n                <div className={styles.icon}>\n                  <i>\n                    <FontAwesomeIcon icon={faInfoCircle} />\n                  </i>\n                </div>\n                <div className={styles.listItem}>\n                  <StateLink\n                    stateKey=\"modal\"\n                    stateValue=\"room_info\"\n                    history={this.props.history}\n                    onClick={() => this.unexpand()}\n                  >\n                    <FormattedMessage id=\"settings.room-info\" />\n                  </StateLink>\n                </div>\n              </div>\n            )}\n            {!hideExtranousItems && (\n              <div className={rowClasses}>\n                <div className={styles.icon}>\n                  <i>\n                    <FontAwesomeIcon icon={faPlus} />\n                  </i>\n                </div>\n                <div className={styles.listItem}>\n                  <a\n                    href=\"#\"\n                    onClick={e => {\n                      e.preventDefault();\n                      this.props.showNonHistoriedDialog(LeaveRoomDialog, {\n                        destinationUrl: \"/\",\n                        messageType: \"create-room\"\n                      });\n                      this.unexpand();\n                    }}\n                  >\n                    <FormattedMessage id=\"settings.create-room\" />\n                  </a>\n                </div>\n              </div>\n            )}\n            {showStreamerMode && !hideExtranousItems ? (\n              <div className={rowHeader}>\n                <FormattedMessage id=\"settings.row-tools\" />\n              </div>\n            ) : (\n              <div />\n            )}\n            {showStreamerMode ? (\n              <div className={rowClasses}>\n                <div className={styles.icon}>\n                  <i>\n                    <FontAwesomeIcon icon={faVideo} />\n                  </i>\n                </div>\n                <div className={styles.listItem}>\n                  <div\n                    className={styles.listItemLink}\n                    onClick={() => {\n                      this.props.toggleStreamerMode(true);\n                      this.unexpand();\n                    }}\n                  >\n                    <FormattedMessage id=\"settings.enable-streamer-mode\" />\n                  </div>\n                </div>\n              </div>\n            ) : (\n              <div />\n            )}\n            {this.props.showAsOverlay && (\n              <div className={rowClasses}>\n                <div className={classNames([styles.listItem, styles.secondaryLinkItem])}>\n                  <div className={styles.secondaryButton} onClick={() => this.props.onCloseOverlay()}>\n                    <FormattedMessage id=\"settings.return-to-vr\" />\n                  </div>\n                </div>\n              </div>\n            )}\n            {!hideExtranousItems && (\n              <div className={classNames([styles.bottomLinksMain])}>\n                <IfFeature name=\"show_whats_new_link\">\n                  <a href=\"/whats-new\" target=\"_blank\" rel=\"noreferrer noopener\">\n                    <FormattedMessage id=\"settings.whats-new\" />\n                  </a>\n                </IfFeature>\n                <button\n                  onClick={e => {\n                    e.preventDefault();\n                    resetTips();\n                    this.setState({ expanded: false });\n                  }}\n                >\n                  <FormattedMessage id=\"settings.tips\" />\n                </button>\n                <IfFeature name=\"show_controls_link\">\n                  <a\n                    href={configs.link(\"controls\", \"https://github.com/mozilla/hubs/wiki/Hubs-Controls\")}\n                    target=\"_blank\"\n                    rel=\"noreferrer noopener\"\n                  >\n                    <FormattedMessage id=\"settings.controls\" />\n                  </a>\n                </IfFeature>\n              </div>\n            )}\n            {!hideExtranousItems && (\n              <div className={classNames([styles.bottomLinks])}>\n                <IfFeature name=\"show_features_link\">\n                  <a\n                    href={configs.link(\"features\", messages[\"help.docs_url\"])}\n                    target=\"_blank\"\n                    rel=\"noreferrer noopener\"\n                  >\n                    <FormattedMessage id=\"settings.features\" />\n                  </a>\n                </IfFeature>\n                <IfFeature name=\"show_community_link\">\n                  <a\n                    href={configs.link(\"community\", \"https://discord.gg/wHmY4nd\")}\n                    target=\"_blank\"\n                    rel=\"noreferrer noopener\"\n                  >\n                    <FormattedMessage id=\"settings.community\" />\n                  </a>\n                </IfFeature>\n                <IfFeature name=\"show_feedback_ui\">\n                  <button\n                    onClick={e => {\n                      e.preventDefault();\n                      this.props.pushHistoryState(\"modal\", \"feedback\");\n                    }}\n                  >\n                    <FormattedMessage id=\"settings.send-feedback\" />\n                  </button>\n                </IfFeature>\n                <IfFeature name=\"show_issue_report_link\">\n                  <a\n                    className={styles.bottomLink}\n                    href={configs.link(\"issue_report\", \"/#/report\")}\n                    target=\"_blank\"\n                    rel=\"noreferrer noopener\"\n                  >\n                    <FormattedMessage id=\"settings.report\" />\n                  </a>\n                </IfFeature>\n                <IfFeature name=\"show_terms\">\n                  <a\n                    className={styles.bottomLink}\n                    href={configs.link(\"terms_of_use\", \"https://github.com/mozilla/hubs/blob/master/TERMS.md\")}\n                    target=\"_blank\"\n                    rel=\"noreferrer noopener\"\n                  >\n                    <FormattedMessage id=\"settings.terms\" />\n                  </a>\n                </IfFeature>\n                <IfFeature name=\"show_privacy\">\n                  <a\n                    className={styles.bottomLink}\n                    href={configs.link(\"privacy_notice\", \"https://github.com/mozilla/hubs/blob/master/PRIVACY.md\")}\n                    target=\"_blank\"\n                    rel=\"noreferrer noopener\"\n                  >\n                    <FormattedMessage id=\"settings.privacy\" />\n                  </a>\n                </IfFeature>\n              </div>\n            )}\n          </div>\n        </div>\n      </div>\n    );\n  }\n\n  render() {\n    return (\n      <div>\n        {!this.props.showAsOverlay && (\n          <FontAwesomeIcon\n            icon={faBars}\n            onClick={() => this.setState({ expanded: !this.state.expanded })}\n            className={classNames({\n              [rootStyles.cornerButton]: true,\n              [rootStyles.cornerButtonSelected]: this.state.expanded\n            })}\n          />\n        )}\n        {this.props.showAsOverlay ? (\n          <div className={styles.settingsMenuOverlayWrap}>{this.renderExpandedMenu()}</div>\n        ) : (\n          this.state.expanded && this.renderExpandedMenu()\n        )}\n      </div>\n    );\n  }\n}\n","import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport { FormattedMessage } from \"react-intl\";\n\nimport configs from \"../utils/configs\";\nimport styles from \"../assets/stylesheets/preload-overlay.scss\";\n\nconst isMobile = AFRAME.utils.device.isMobile();\n\nexport default class PreloadOverlay extends Component {\n  static propTypes = {\n    hubName: PropTypes.string,\n    hubScene: PropTypes.object,\n    baseUrl: PropTypes.string,\n    onLoadClicked: PropTypes.func\n  };\n\n  render() {\n    return (\n      <div className={styles.treatment}>\n        <div className={styles.screenshot}>\n          {this.props.hubScene && <img className={styles.screenshot} src={this.props.hubScene.screenshot_url} />}\n        </div>\n        <a href=\"/\" target=\"_blank\" rel=\"noopener noreferrer\" className={styles.logo}>\n          <img src={configs.image(\"logo\")} />\n        </a>\n        <div className={styles.mainPanel}>\n          <div className={styles.hubName}>{this.props.hubName}</div>\n          {this.props.onLoadClicked &&\n            (!isMobile ? (\n              <button className={styles.loadButton} onClick={this.props.onLoadClicked}>\n                <FormattedMessage id=\"embed.load-button\" />\n              </button>\n            ) : (\n              <a href={this.props.baseUrl} target=\"_blank\" className={styles.loadButton} rel=\"noreferrer noopener\">\n                <FormattedMessage id=\"embed.load-button\" />\n              </a>\n            ))}\n        </div>\n      </div>\n    );\n  }\n}\n","import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport cx from \"classnames\";\n\nimport styles from \"../assets/stylesheets/2d-hud.scss\";\nimport uiStyles from \"../assets/stylesheets/ui-root.scss\";\nimport { FormattedMessage } from \"react-intl\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\nimport { faTimes } from \"@fortawesome/free-solid-svg-icons/faTimes\";\nimport { micLevelForVolume } from \"../components/audio-feedback\";\nimport SpawnIcon from \"../assets/images/spawn.svgi\";\nimport ShareScreenIconActive from \"../assets/images/share_screen_active.svgi\";\nimport ShareScreenIcon from \"../assets/images/share_screen.svgi\";\nimport ShareCameraIconActive from \"../assets/images/share_camera_active.svgi\";\nimport ShareCameraIcon from \"../assets/images/share_camera.svgi\";\nimport PenIcon from \"../assets/images/pen.svgi\";\nimport PenIconActive from \"../assets/images/pen_active.svgi\";\nimport CameraIcon from \"../assets/images/camera.svgi\";\nimport CameraIconActive from \"../assets/images/camera_active.svgi\";\nimport Mic0 from \"../assets/images/mic-0.svgi\";\nimport Mic1 from \"../assets/images/mic-1.svgi\";\nimport Mic2 from \"../assets/images/mic-2.svgi\";\nimport Mic3 from \"../assets/images/mic-3.svgi\";\nimport Mic4 from \"../assets/images/mic-4.svgi\";\nimport Mic5 from \"../assets/images/mic-5.svgi\";\nimport Mic6 from \"../assets/images/mic-6.svgi\";\nimport Mic7 from \"../assets/images/mic-7.svgi\";\nimport MicOff0 from \"../assets/images/mic-off-0.svgi\";\nimport MicOff1 from \"../assets/images/mic-off-1.svgi\";\nimport MicOff2 from \"../assets/images/mic-off-2.svgi\";\nimport MicOff3 from \"../assets/images/mic-off-3.svgi\";\nimport MicOff4 from \"../assets/images/mic-off-4.svgi\";\nimport MicOff5 from \"../assets/images/mic-off-5.svgi\";\nimport MicOff6 from \"../assets/images/mic-off-6.svgi\";\nimport MicOff7 from \"../assets/images/mic-off-7.svgi\";\n\nimport { InlineSVG } from \"./svgi\";\n\nconst MIC_ICONS = {\n  on: [Mic0, Mic1, Mic2, Mic3, Mic4, Mic5, Mic6, Mic7],\n  off: [MicOff0, MicOff1, MicOff2, MicOff3, MicOff4, MicOff5, MicOff6, MicOff7]\n};\n\nconst noop = () => {};\n\nclass TopHUD extends Component {\n  static propTypes = {\n    scene: PropTypes.object,\n    muted: PropTypes.bool,\n    isCursorHoldingPen: PropTypes.bool,\n    hasActiveCamera: PropTypes.bool,\n    frozen: PropTypes.bool,\n    watching: PropTypes.bool,\n    onWatchEnded: PropTypes.func,\n    videoShareMediaSource: PropTypes.string,\n    showVideoShareFailed: PropTypes.bool,\n    hideVideoShareFailedTip: PropTypes.func,\n    activeTip: PropTypes.string,\n    history: PropTypes.object,\n    onToggleMute: PropTypes.func,\n    onSpawnPen: PropTypes.func,\n    onSpawnCamera: PropTypes.func,\n    onShareVideo: PropTypes.func,\n    onEndShareVideo: PropTypes.func,\n    onShareVideoNotCapable: PropTypes.func,\n    mediaSearchStore: PropTypes.object,\n    isStreaming: PropTypes.bool,\n    showStreamingTip: PropTypes.bool,\n    hideStreamingTip: PropTypes.func\n  };\n\n  state = {\n    showVideoShareOptions: false,\n    lastActiveMediaSource: null,\n    micLevel: 0,\n    cameraDisabled: false,\n    penDisabled: false,\n    mediaDisabled: false\n  };\n\n  constructor(props) {\n    super(props);\n    this.state.cameraDisabled = !window.APP.hubChannel.can(\"spawn_camera\");\n    this.state.penDisabled = !window.APP.hubChannel.can(\"spawn_drawing\");\n    this.state.mediaDisabled = !window.APP.hubChannel.can(\"spawn_and_move_media\");\n  }\n\n  onPermissionsUpdated = () => {\n    this.setState({\n      cameraDisabled: !window.APP.hubChannel.can(\"spawn_camera\"),\n      penDisabled: !window.APP.hubChannel.can(\"spawn_drawing\"),\n      mediaDisabled: !window.APP.hubChannel.can(\"spawn_and_move_media\")\n    });\n  };\n\n  componentDidMount = () => {\n    let max = 0;\n    if (this.micUpdateInterval) {\n      clearInterval(this.micUpdateInterval);\n    }\n    this.micUpdateInterval = setInterval(() => {\n      const volume = this.props.scene.systems[\"local-audio-analyser\"].volume;\n      max = Math.max(volume, max);\n      const micLevel = micLevelForVolume(volume, max);\n      if (micLevel !== this.state.micLevel) {\n        this.setState({ micLevel });\n      }\n    }, 50);\n    window.APP.hubChannel.addEventListener(\"permissions_updated\", this.onPermissionsUpdated);\n    this.onPermissionsUpdated();\n  };\n\n  componentWillUnmount = () => {\n    if (this.micUpdateInterval) {\n      clearInterval(this.micUpdateInterval);\n    }\n    window.APP.hubChannel.removeEventListener(\"permissions_updated\", this.onPermissionsUpdated);\n  };\n\n  handleVideoShareClicked = source => {\n    if (source === \"screen\" && !navigator.mediaDevices.getDisplayMedia) {\n      this.props.onShareVideoNotCapable();\n      return;\n    }\n\n    if (this.props.videoShareMediaSource) {\n      this.props.onEndShareVideo();\n    } else {\n      this.props.onShareVideo(source);\n      this.setState({ lastActiveMediaSource: source });\n    }\n  };\n\n  buildVideoSharingButtons = () => {\n    const isMobile = AFRAME.utils.device.isMobile() || AFRAME.utils.device.isMobileVR();\n\n    const videoShareExtraOptionTypes = [];\n    const primaryVideoShareType =\n      this.props.videoShareMediaSource || this.state.lastActiveMediaSource || (isMobile ? \"camera\" : \"screen\");\n\n    if (this.state.showVideoShareOptions) {\n      videoShareExtraOptionTypes.push(primaryVideoShareType);\n\n      [\"screen\", \"camera\"].forEach(t => {\n        if (videoShareExtraOptionTypes.indexOf(t) === -1) {\n          videoShareExtraOptionTypes.push(t);\n        }\n      });\n    }\n\n    const showExtrasOnHover = () => {\n      if (isMobile) return;\n\n      clearTimeout(this.hideVideoSharingButtonTimeout);\n\n      if (!this.props.videoShareMediaSource) {\n        this.setState({ showVideoShareOptions: true });\n      }\n    };\n\n    const hideExtrasOnOut = () => {\n      this.hideVideoSharingButtonTimeout = setTimeout(() => {\n        this.setState({ showVideoShareOptions: false });\n      }, 250);\n    };\n\n    const maybeHandlePrimaryShare = () => {\n      if (!this.state.showVideoShareOptions) {\n        this.handleVideoShareClicked(primaryVideoShareType);\n      }\n    };\n\n    const capitalize = str => str[0].toUpperCase() + str.slice(1);\n    const iconForType = (type, active) => {\n      if (active) {\n        return type === \"screen\" ? ShareScreenIconActive : ShareCameraIconActive;\n      } else {\n        return type === \"screen\" ? ShareScreenIcon : ShareCameraIcon;\n      }\n    };\n\n    return (\n      <div\n        className={cx(styles.iconButton, {\n          [styles.disabled]: this.state.mediaDisabled,\n          [styles.videoShare]: true\n        })}\n        title={\n          this.props.videoShareMediaSource !== null\n            ? \"Stop sharing\"\n            : `Share ${capitalize(primaryVideoShareType)}${this.state.mediaDisabled ? \" Disabled\" : \"\"}`\n        }\n        onClick={this.state.mediaDisabled ? noop : maybeHandlePrimaryShare}\n        onMouseOver={this.state.mediaDisabled ? noop : showExtrasOnHover}\n      >\n        <InlineSVG\n          className={cx(styles.iconButtonIcon)}\n          src={iconForType(primaryVideoShareType, this.props.videoShareMediaSource === primaryVideoShareType)}\n        />\n        {videoShareExtraOptionTypes.length > 0 && (\n          <div className={cx(styles.videoShareExtraOptions)} onMouseOut={hideExtrasOnOut}>\n            {videoShareExtraOptionTypes.map(type => (\n              <div\n                key={type}\n                className={cx(styles.iconButton, {\n                  [styles.disabled]: this.state.mediaDisabled\n                })}\n                title={\n                  this.props.videoShareMediaSource === type\n                    ? \"Stop sharing\"\n                    : `Share ${capitalize(type)}${this.state.mediaDisabled ? \" Disabled\" : \"\"}`\n                }\n                onClick={this.state.mediaDisabled ? noop : () => this.handleVideoShareClicked(type)}\n                onMouseOver={this.state.mediaDisabled ? noop : showExtrasOnHover}\n              >\n                <InlineSVG\n                  className={cx(styles.iconButtonIcon)}\n                  src={iconForType(type, this.props.videoShareMediaSource === type)}\n                />\n              </div>\n            ))}\n          </div>\n        )}\n      </div>\n    );\n  };\n\n  render() {\n    const videoSharingButtons = this.buildVideoSharingButtons();\n    const isMobile = AFRAME.utils.device.isMobile();\n    const tipDivForType = (type, cancelFunc) => (\n      <div className={cx(styles.topTip)}>\n        {cancelFunc && (\n          <button className={styles.tipCancel} onClick={cancelFunc}>\n            <i>\n              <FontAwesomeIcon icon={faTimes} />\n            </i>\n          </button>\n        )}\n        {!this.props.frozen && <div className={cx([styles.attachPoint, styles[`attach_${type.split(\".\")[1]}`]])} />}\n        <FormattedMessage id={`tips.${type}`} />\n      </div>\n    );\n\n    let tip;\n\n    if (this.props.watching) {\n      tip = (\n        <div className={cx([styles.topTip, styles.topTipNoHud])}>\n          <button className={styles.tipCancel} onClick={() => this.props.onWatchEnded()}>\n            <i>\n              <FontAwesomeIcon icon={faTimes} />\n            </i>\n          </button>\n          <FormattedMessage id={`tips.${isMobile ? \"mobile\" : \"desktop\"}.watching`} />\n          {!isMobile && (\n            <button className={styles.tipCancelText} onClick={() => this.props.onWatchEnded()}>\n              <FormattedMessage id=\"tips.watching.back\" />\n            </button>\n          )}\n        </div>\n      );\n    } else if (this.props.showVideoShareFailed) {\n      tip = tipDivForType(`${isMobile ? \"mobile\" : \"desktop\"}.video_share_failed`, this.props.hideVideoShareFailedTip);\n    } else if (this.props.activeTip) {\n      tip = tipDivForType(this.props.activeTip);\n    }\n\n    const micLevel = this.state.micLevel;\n    const micIcon = MIC_ICONS[this.props.muted ? \"off\" : \"on\"][micLevel];\n    // Hide buttons when frozen.\n    return (\n      <div className={cx(styles.container, styles.top, styles.unselectable, uiStyles.uiInteractive)}>\n        {this.props.frozen || this.props.watching ? (\n          <div className={cx(uiStyles.uiInteractive, styles.panel)}>{tip}</div>\n        ) : (\n          <div className={cx(uiStyles.uiInteractive, styles.panel)}>\n            {tip}\n            {videoSharingButtons}\n            <div\n              className={cx(styles.iconButton)}\n              title={this.props.muted ? \"Unmute Mic\" : \"Mute Mic\"}\n              onClick={this.props.onToggleMute}\n            >\n              <InlineSVG className={cx(styles.iconButtonIcon)} src={micIcon} />\n            </div>\n            <div\n              className={cx(styles.iconButton, {\n                [styles.disabled]: this.state.mediaDisabled\n              })}\n              title={`Create${this.state.mediaDisabled ? \" Disabled\" : \"\"}`}\n              onClick={\n                this.state.mediaDisabled ? noop : () => this.props.mediaSearchStore.sourceNavigateToDefaultSource()\n              }\n            >\n              <InlineSVG className={cx(styles.iconButtonIcon, styles.spawn)} src={SpawnIcon} />\n            </div>\n            <div\n              className={cx(styles.iconButton, {\n                [styles.disabled]: this.state.penDisabled\n              })}\n              title={`Pen${this.state.penDisabled ? \" Disabled\" : \"\"}`}\n              onClick={this.state.penDisabled ? noop : this.props.onSpawnPen}\n            >\n              <InlineSVG\n                className={cx(styles.iconButtonIcon)}\n                src={this.props.isCursorHoldingPen ? PenIconActive : PenIcon}\n              />\n            </div>\n            <div\n              className={cx(styles.iconButton, {\n                [styles.disabled]: this.state.cameraDisabled\n              })}\n              title={`Camera${this.state.cameraDisabled ? \" Disabled\" : \"\"}`}\n              onClick={this.state.cameraDisabled ? noop : this.props.onSpawnCamera}\n            >\n              <InlineSVG\n                className={cx(styles.iconButtonIcon)}\n                src={this.props.hasActiveCamera ? CameraIconActive : CameraIcon}\n              />\n            </div>\n          </div>\n        )}\n      </div>\n    );\n  }\n}\n\nexport default { TopHUD };\n","import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport styles from \"../assets/stylesheets/spectating-label.scss\";\nimport { FormattedMessage } from \"react-intl\";\n\nexport class SpectatingLabel extends Component {\n  static propTypes = {\n    name: PropTypes.string\n  };\n\n  render() {\n    return (\n      <div className={styles.label}>\n        <FormattedMessage id=\"lobby.watching\" />\n        <b>{this.props.name}</b>\n      </div>\n    );\n  }\n}\n","import React, { Component } from \"react\";\nimport PropTypes from \"prop-types\";\nimport classNames from \"classnames\";\nimport copy from \"copy-to-clipboard\";\nimport { IntlProvider, FormattedMessage, addLocaleData } from \"react-intl\";\nimport en from \"react-intl/locale-data/en\";\nimport screenfull from \"screenfull\";\n\nimport configs from \"../utils/configs\";\nimport IfFeature from \"./if-feature\";\nimport UnlessFeature from \"./unless-feature\";\nimport { VR_DEVICE_AVAILABILITY } from \"../utils/vr-caps-detect\";\nimport { canShare } from \"../utils/share\";\nimport styles from \"../assets/stylesheets/ui-root.scss\";\nimport entryStyles from \"../assets/stylesheets/entry.scss\";\nimport inviteStyles from \"../assets/stylesheets/invite-dialog.scss\";\nimport { ReactAudioContext } from \"./wrap-with-audio\";\nimport {\n  pushHistoryState,\n  clearHistoryState,\n  popToBeginningOfHubHistory,\n  navigateToPriorPage,\n  sluglessPath\n} from \"../utils/history\";\nimport StateRoute from \"./state-route.js\";\nimport { getPresenceProfileForSession, discordBridgesForPresences } from \"../utils/phoenix-utils\";\nimport { getClientInfoClientId } from \"./client-info-dialog\";\nimport { getCurrentStreamer } from \"../utils/component-utils\";\n\nimport { lang, messages } from \"../utils/i18n\";\nimport Loader from \"./loader\";\nimport AutoExitWarning from \"./auto-exit-warning\";\nimport { TwoDEntryButton, GenericEntryButton, DaydreamEntryButton } from \"./entry-buttons.js\";\nimport ProfileEntryPanel from \"./profile-entry-panel\";\nimport MediaBrowser from \"./media-browser\";\n\nimport CreateObjectDialog from \"./create-object-dialog.js\";\nimport ChangeSceneDialog from \"./change-scene-dialog.js\";\nimport AvatarUrlDialog from \"./avatar-url-dialog.js\";\nimport InviteDialog from \"./invite-dialog.js\";\nimport InviteTeamDialog from \"./invite-team-dialog.js\";\nimport LinkDialog from \"./link-dialog.js\";\nimport SafariDialog from \"./safari-dialog.js\";\nimport SignInDialog from \"./sign-in-dialog.js\";\nimport RoomSettingsDialog from \"./room-settings-dialog.js\";\nimport CloseRoomDialog from \"./close-room-dialog.js\";\nimport Tip from \"./tip.js\";\nimport WebRTCScreenshareUnsupportedDialog from \"./webrtc-screenshare-unsupported-dialog.js\";\nimport WebAssemblyUnsupportedDialog from \"./webassembly-unsupported-dialog.js\";\nimport WebVRRecommendDialog from \"./webvr-recommend-dialog.js\";\nimport FeedbackDialog from \"./feedback-dialog.js\";\nimport HelpDialog from \"./help-dialog.js\";\nimport LeaveRoomDialog from \"./leave-room-dialog.js\";\nimport RoomInfoDialog from \"./room-info-dialog.js\";\nimport ClientInfoDialog from \"./client-info-dialog.js\";\nimport ObjectInfoDialog from \"./object-info-dialog.js\";\nimport OAuthDialog from \"./oauth-dialog.js\";\nimport TweetDialog from \"./tweet-dialog.js\";\nimport LobbyChatBox from \"./lobby-chat-box.js\";\nimport InWorldChatBox from \"./in-world-chat-box.js\";\nimport AvatarEditor from \"./avatar-editor\";\nimport MicLevelWidget from \"./mic-level-widget.js\";\nimport PreferencesScreen from \"./preferences-screen.js\";\nimport OutputLevelWidget from \"./output-level-widget.js\";\nimport PresenceLog from \"./presence-log.js\";\nimport PresenceList from \"./presence-list.js\";\nimport ObjectList from \"./object-list.js\";\nimport SettingsMenu from \"./settings-menu.js\";\nimport PreloadOverlay from \"./preload-overlay.js\";\nimport TwoDHUD from \"./2d-hud\";\nimport { SpectatingLabel } from \"./spectating-label\";\nimport { showFullScreenIfAvailable, showFullScreenIfWasFullScreen } from \"../utils/fullscreen\";\nimport { exit2DInterstitialAndEnterVR, isIn2DInterstitial } from \"../utils/vr-interstitial\";\n\nimport { faTimes } from \"@fortawesome/free-solid-svg-icons/faTimes\";\nimport { faQuestion } from \"@fortawesome/free-solid-svg-icons/faQuestion\";\nimport { faStar } from \"@fortawesome/free-solid-svg-icons/faStar\";\nimport { faArrowLeft } from \"@fortawesome/free-solid-svg-icons/faArrowLeft\";\nimport { FontAwesomeIcon } from \"@fortawesome/react-fontawesome\";\n\nimport qsTruthy from \"../utils/qs_truthy\";\nimport { CAMERA_MODE_INSPECT } from \"../systems/camera-system\";\nconst avatarEditorDebug = qsTruthy(\"avatarEditorDebug\");\n\naddLocaleData([...en]);\n\n// This is a list of regexes that match the microphone labels of HMDs.\n//\n// If entering VR mode, and if any of these regexes match an audio device,\n// the user will be prevented from entering VR until one of those devices is\n// selected as the microphone.\n//\n// Note that this doesn't have to be exhaustive: if no devices match any regex\n// then we rely upon the user to select the proper mic.\nconst HMD_MIC_REGEXES = [/\\Wvive\\W/i, /\\Wrift\\W/i];\n\nconst IN_ROOM_MODAL_ROUTER_PATHS = [\"/media\"];\nconst IN_ROOM_MODAL_QUERY_VARS = [\"media_source\"];\n\nconst LOBBY_MODAL_ROUTER_PATHS = [\"/media/scenes\", \"/media/avatars\", \"/media/favorites\"];\nconst LOBBY_MODAL_QUERY_VARS = [\"media_source\"];\nconst LOBBY_MODAL_QUERY_VALUES = [\"scenes\", \"avatars\", \"favorites\"];\n\nasync function grantedMicLabels() {\n  const mediaDevices = await navigator.mediaDevices.enumerateDevices();\n  return mediaDevices.filter(d => d.label && d.kind === \"audioinput\").map(d => d.label);\n}\n\nconst isMobile = AFRAME.utils.device.isMobile();\nconst isMobileVR = AFRAME.utils.device.isMobileVR();\nconst isMobilePhoneOrVR = isMobile || isMobileVR;\n\nconst AUTO_EXIT_TIMER_SECONDS = 10;\n\nclass UIRoot extends Component {\n  willCompileAndUploadMaterials = false;\n\n  static propTypes = {\n    enterScene: PropTypes.func,\n    exitScene: PropTypes.func,\n    onSendMessage: PropTypes.func,\n    disableAutoExitOnIdle: PropTypes.bool,\n    forcedVREntryType: PropTypes.string,\n    isBotMode: PropTypes.bool,\n    store: PropTypes.object,\n    mediaSearchStore: PropTypes.object,\n    scene: PropTypes.object,\n    authChannel: PropTypes.object,\n    hubChannel: PropTypes.object,\n    linkChannel: PropTypes.object,\n    hubEntryCode: PropTypes.number,\n    availableVREntryTypes: PropTypes.object,\n    environmentSceneLoaded: PropTypes.bool,\n    entryDisallowed: PropTypes.bool,\n    roomUnavailableReason: PropTypes.string,\n    platformUnsupportedReason: PropTypes.string,\n    hubId: PropTypes.string,\n    hubName: PropTypes.string,\n    hubDescription: PropTypes.string,\n    hubAllowPromotion: PropTypes.bool,\n    hubMemberPermissions: PropTypes.object,\n    hubScene: PropTypes.object,\n    hubIsBound: PropTypes.bool,\n    isSupportAvailable: PropTypes.bool,\n    presenceLogEntries: PropTypes.array,\n    presences: PropTypes.object,\n    sessionId: PropTypes.string,\n    subscriptions: PropTypes.object,\n    initialIsSubscribed: PropTypes.bool,\n    initialIsFavorited: PropTypes.bool,\n    showSignInDialog: PropTypes.bool,\n    signInMessageId: PropTypes.string,\n    signInCompleteMessageId: PropTypes.string,\n    signInContinueTextId: PropTypes.string,\n    onContinueAfterSignIn: PropTypes.func,\n    showSafariDialog: PropTypes.bool,\n    showWebAssemblyDialog: PropTypes.bool,\n    showOAuthDialog: PropTypes.bool,\n    onCloseOAuthDialog: PropTypes.func,\n    oauthInfo: PropTypes.array,\n    isCursorHoldingPen: PropTypes.bool,\n    hasActiveCamera: PropTypes.bool,\n    onMediaSearchResultEntrySelected: PropTypes.func,\n    onAvatarSaved: PropTypes.func,\n    activeTips: PropTypes.object,\n    location: PropTypes.object,\n    history: PropTypes.object,\n    showInterstitialPrompt: PropTypes.bool,\n    onInterstitialPromptClicked: PropTypes.func,\n    performConditionalSignIn: PropTypes.func,\n    hide: PropTypes.bool,\n    showPreload: PropTypes.bool,\n    onPreloadLoadClicked: PropTypes.func,\n    embed: PropTypes.bool,\n    embedToken: PropTypes.string,\n    onLoaded: PropTypes.func\n  };\n\n  state = {\n    enterInVR: false,\n    entered: false,\n    dialog: null,\n    showShareDialog: false,\n    broadcastTipDismissed: false,\n    linkCode: null,\n    linkCodeCancel: null,\n    miniInviteActivated: false,\n\n    didConnectToNetworkedScene: false,\n    noMoreLoadingUpdates: false,\n    hideLoader: false,\n    showPrefs: false,\n    watching: false,\n    isStreaming: false,\n    showStreamingTip: false,\n\n    waitingOnAudio: false,\n    mediaStream: null,\n    audioTrack: null,\n    audioTrackClone: null,\n    micDevices: [],\n\n    autoExitTimerStartedAt: null,\n    autoExitTimerInterval: null,\n    autoExitMessage: null,\n    secondsRemainingBeforeAutoExit: Infinity,\n\n    muted: false,\n    frozen: false,\n\n    exited: false,\n\n    signedIn: false,\n    videoShareMediaSource: null,\n    showVideoShareFailed: false,\n\n    objectInfo: null,\n    objectSrc: \"\",\n    isObjectListExpanded: false,\n    isPresenceListExpanded: false\n  };\n\n  constructor(props) {\n    super(props);\n\n    if (props.showSafariDialog) {\n      this.state.dialog = <SafariDialog closable={false} />;\n    }\n    if (props.showWebAssemblyDialog) {\n      this.state.dialog = <WebAssemblyUnsupportedDialog closable={false} />;\n    }\n\n    props.mediaSearchStore.setHistory(props.history);\n\n    // An exit handler that discards event arguments and can be cleaned up.\n    this.exitEventHandler = () => this.exit();\n  }\n\n  componentDidUpdate(prevProps) {\n    const { hubChannel, showSignInDialog } = this.props;\n    if (hubChannel) {\n      const { signedIn } = hubChannel;\n      if (signedIn !== this.state.signedIn) {\n        this.setState({ signedIn });\n      }\n    }\n    if (prevProps.showSignInDialog !== showSignInDialog) {\n      if (showSignInDialog) {\n        this.showContextualSignInDialog();\n      } else {\n        this.closeDialog();\n      }\n    }\n    if (!this.willCompileAndUploadMaterials && this.state.noMoreLoadingUpdates) {\n      this.willCompileAndUploadMaterials = true;\n      // We want to ensure that react and the browser have had the chance to render / update.\n      // See https://stackoverflow.com/a/34999925 , although our solution flipped setTimeout and requestAnimationFrame\n      window.requestAnimationFrame(() => {\n        window.setTimeout(() => {\n          if (!this.props.isBotMode) {\n            try {\n              this.props.scene.renderer.compileAndUploadMaterials(this.props.scene.object3D, this.props.scene.camera);\n            } catch {\n              this.exit(\"scene_error\"); // https://github.com/mozilla/hubs/issues/1950\n            }\n          }\n\n          if (!this.state.hideLoader) {\n            this.setState({ hideLoader: true });\n          }\n        }, 0);\n      });\n    }\n  }\n\n  onConcurrentLoad = () => {\n    if (qsTruthy(\"allow_multi\") || this.props.store.state.preferences[\"allowMultipleHubsInstances\"]) return;\n    this.startAutoExitTimer(\"autoexit.concurrent_subtitle\");\n  };\n\n  onIdleDetected = () => {\n    if (this.props.disableAutoExitOnIdle || this.state.isStreaming) return;\n    this.startAutoExitTimer(\"autoexit.idle_subtitle\");\n  };\n\n  onActivityDetected = () => {\n    if (this.state.autoExitTimerInterval) {\n      this.endAutoExitTimer();\n    }\n  };\n\n  componentDidMount() {\n    window.addEventListener(\"concurrentload\", this.onConcurrentLoad);\n    window.addEventListener(\"idle_detected\", this.onIdleDetected);\n    window.addEventListener(\"activity_detected\", this.onActivityDetected);\n    document.querySelector(\".a-canvas\").addEventListener(\"mouseup\", () => {\n      if (this.state.showShareDialog) {\n        this.setState({ showShareDialog: false });\n      }\n    });\n\n    this.props.scene.addEventListener(\n      \"didConnectToNetworkedScene\",\n      () => {\n        this.setState({ didConnectToNetworkedScene: true });\n      },\n      { once: true }\n    );\n    this.props.scene.addEventListener(\"loaded\", this.onSceneLoaded);\n    this.props.scene.addEventListener(\"stateadded\", this.onAframeStateChanged);\n    this.props.scene.addEventListener(\"stateremoved\", this.onAframeStateChanged);\n    this.props.scene.addEventListener(\"share_video_enabled\", this.onShareVideoEnabled);\n    this.props.scene.addEventListener(\"share_video_disabled\", this.onShareVideoDisabled);\n    this.props.scene.addEventListener(\"share_video_failed\", this.onShareVideoFailed);\n    this.props.scene.addEventListener(\"exit\", this.exitEventHandler);\n    this.props.scene.addEventListener(\"action_exit_watch\", () => this.setState({ watching: false, hide: false }));\n    this.props.scene.addEventListener(\"action_toggle_ui\", () => this.setState({ hide: !this.state.hide }));\n\n    const scene = this.props.scene;\n\n    this.props.store.addEventListener(\"statechanged\", this.onStoreChanged);\n\n    const unsubscribe = this.props.history.listen((location, action) => {\n      const state = location.state;\n\n      // If we just hit back into the entry flow, just go back to the page before the room landing page.\n      if (action === \"POP\" && state && state.entry_step && this.state.entered) {\n        unsubscribe();\n        navigateToPriorPage(this.props.history);\n        return;\n      }\n    });\n\n    // If we refreshed the page with any state history (eg if we were in the entry flow\n    // or had a modal/overlay open) just reset everything to the beginning of the flow by\n    // erasing all history that was accumulated for this room (including across refreshes.)\n    //\n    // We don't do this for the media browser case, since we want to be able to share\n    // links to the browser pages\n    if (this.props.history.location.state && !sluglessPath(this.props.history.location).startsWith(\"/media\")) {\n      popToBeginningOfHubHistory(this.props.history);\n    }\n\n    this.setState({\n      audioContext: {\n        playSound: sound => {\n          scene.emit(sound);\n        },\n        onMouseLeave: () => {\n          //          scene.emit(\"play_sound-hud_mouse_leave\");\n        }\n      }\n    });\n\n    if (this.props.forcedVREntryType && this.props.forcedVREntryType.endsWith(\"_now\")) {\n      this.props.scene.addEventListener(\n        \"loading_finished\",\n        () => {\n          setTimeout(() => this.handleForceEntry(), 1000);\n        },\n        { once: true }\n      );\n    }\n\n    this.playerRig = scene.querySelector(\"#avatar-rig\");\n  }\n\n  UNSAFE_componentWillMount() {\n    this.props.store.addEventListener(\"statechanged\", this.storeUpdated);\n  }\n\n  componentWillUnmount() {\n    this.props.scene.removeEventListener(\"loaded\", this.onSceneLoaded);\n    this.props.scene.removeEventListener(\"exit\", this.exitEventHandler);\n    this.props.scene.removeEventListener(\"share_video_enabled\", this.onShareVideoEnabled);\n    this.props.scene.removeEventListener(\"share_video_disabled\", this.onShareVideoDisabled);\n    this.props.scene.removeEventListener(\"share_video_failed\", this.onShareVideoFailed);\n    this.props.store.removeEventListener(\"statechanged\", this.storeUpdated);\n  }\n\n  storeUpdated = () => {\n    this.forceUpdate();\n  };\n\n  showContextualSignInDialog = () => {\n    const {\n      signInMessageId,\n      authChannel,\n      signInCompleteMessageId,\n      signInContinueTextId,\n      onContinueAfterSignIn\n    } = this.props;\n\n    this.showNonHistoriedDialog(SignInDialog, {\n      message: messages[signInMessageId],\n      onSignIn: async email => {\n        const { authComplete } = await authChannel.startAuthentication(email, this.props.hubChannel);\n\n        this.showNonHistoriedDialog(SignInDialog, { authStarted: true, onClose: onContinueAfterSignIn });\n\n        await authComplete;\n\n        this.setState({ signedIn: true });\n        this.showNonHistoriedDialog(SignInDialog, {\n          authComplete: true,\n          message: messages[signInCompleteMessageId],\n          continueText: messages[signInContinueTextId],\n          onClose: onContinueAfterSignIn,\n          onContinue: onContinueAfterSignIn\n        });\n      },\n      onClose: onContinueAfterSignIn\n    });\n  };\n\n  updateSubscribedState = () => {\n    const isSubscribed = this.props.subscriptions && this.props.subscriptions.isSubscribed();\n    this.setState({ isSubscribed });\n  };\n\n  toggleFavorited = () => {\n    this.props.performConditionalSignIn(\n      () => this.props.hubChannel.signedIn,\n      () => {\n        const isFavorited = this.isFavorited();\n\n        this.props.hubChannel[isFavorited ? \"unfavorite\" : \"favorite\"]();\n        this.setState({ isFavorited: !isFavorited });\n      },\n      \"favorite-room\"\n    );\n  };\n\n  isFavorited = () => {\n    return this.state.isFavorited !== undefined ? this.state.isFavorited : this.props.initialIsFavorited;\n  };\n\n  onLoadingFinished = () => {\n    this.setState({ noMoreLoadingUpdates: true });\n    this.props.scene.emit(\"loading_finished\");\n    this.props.scene.addState(\"loaded\");\n\n    if (this.props.onLoaded) {\n      this.props.onLoaded();\n    }\n  };\n\n  onSceneLoaded = () => {\n    this.setState({ sceneLoaded: true });\n  };\n\n  // TODO: we need to come up with a cleaner way to handle the shared state between aframe and react than emmitting events and setting state on the scene\n  onAframeStateChanged = e => {\n    if (!(e.detail === \"muted\" || e.detail === \"frozen\")) return;\n    this.setState({\n      [e.detail]: this.props.scene.is(e.detail)\n    });\n  };\n\n  onShareVideoEnabled = e => {\n    this.setState({ videoShareMediaSource: e.detail.source });\n  };\n\n  onShareVideoDisabled = () => {\n    this.setState({ videoShareMediaSource: null });\n  };\n\n  onShareVideoFailed = () => {\n    this.setState({ showVideoShareFailed: true });\n  };\n\n  toggleMute = () => {\n    this.props.scene.emit(\"action_mute\");\n  };\n\n  shareVideo = mediaSource => {\n    this.props.scene.emit(`action_share_${mediaSource}`);\n  };\n\n  endShareVideo = () => {\n    this.props.scene.emit(\"action_end_video_sharing\");\n  };\n\n  spawnPen = () => {\n    this.props.scene.emit(\"penButtonPressed\");\n  };\n\n  onSubscribeChanged = async () => {\n    if (!this.props.subscriptions) return;\n\n    await this.props.subscriptions.toggle();\n    this.updateSubscribedState();\n  };\n\n  handleForceEntry = () => {\n    if (!this.props.forcedVREntryType) return;\n\n    if (this.props.forcedVREntryType.startsWith(\"daydream\")) {\n      this.enterDaydream();\n    } else if (this.props.forcedVREntryType.startsWith(\"vr\")) {\n      this.enterVR();\n    } else if (this.props.forcedVREntryType.startsWith(\"2d\")) {\n      this.enter2D();\n    }\n  };\n\n  startAutoExitTimer = autoExitMessage => {\n    if (this.state.autoExitTimerInterval) return;\n\n    const autoExitTimerInterval = setInterval(() => {\n      let secondsRemainingBeforeAutoExit = Infinity;\n\n      if (this.state.autoExitTimerStartedAt) {\n        const secondsSinceStart = (new Date() - this.state.autoExitTimerStartedAt) / 1000;\n        secondsRemainingBeforeAutoExit = Math.max(0, Math.floor(AUTO_EXIT_TIMER_SECONDS - secondsSinceStart));\n      }\n\n      this.setState({ secondsRemainingBeforeAutoExit });\n      this.checkForAutoExit();\n    }, 500);\n\n    this.setState({ autoExitTimerStartedAt: new Date(), autoExitTimerInterval, autoExitMessage });\n  };\n\n  checkForAutoExit = () => {\n    if (this.state.secondsRemainingBeforeAutoExit !== 0) return;\n    this.endAutoExitTimer();\n    this.exit();\n  };\n\n  exit = reason => {\n    window.removeEventListener(\"concurrentload\", this.onConcurrentLoad);\n    window.removeEventListener(\"idle_detected\", this.onIdleDetected);\n    window.removeEventListener(\"activity_detected\", this.onActivityDetected);\n\n    if (this.props.exitScene) {\n      this.props.exitScene(reason);\n    }\n\n    this.setState({ exited: true });\n  };\n\n  isWaitingForAutoExit = () => {\n    return this.state.secondsRemainingBeforeAutoExit <= AUTO_EXIT_TIMER_SECONDS;\n  };\n\n  endAutoExitTimer = () => {\n    clearInterval(this.state.autoExitTimerInterval);\n    this.setState({\n      autoExitTimerStartedAt: null,\n      autoExitTimerInterval: null,\n      autoExitMessage: null,\n      secondsRemainingBeforeAutoExit: Infinity\n    });\n  };\n\n  performDirectEntryFlow = async enterInVR => {\n    this.setState({ enterInVR, waitingOnAudio: true });\n\n    const hasGrantedMic = (await grantedMicLabels()).length > 0;\n\n    if (hasGrantedMic) {\n      await this.setMediaStreamToDefault();\n      this.beginOrSkipAudioSetup();\n    } else {\n      this.pushHistoryState(\"entry_step\", \"mic_grant\");\n    }\n\n    this.setState({ waitingOnAudio: false });\n  };\n\n  enter2D = async () => {\n    await this.performDirectEntryFlow(false);\n  };\n\n  enterVR = async () => {\n    if (this.props.forcedVREntryType || this.props.availableVREntryTypes.generic !== VR_DEVICE_AVAILABILITY.maybe) {\n      await this.performDirectEntryFlow(true);\n    } else {\n      this.pushHistoryState(\"modal\", \"webvr\");\n    }\n  };\n\n  enterDaydream = async () => {\n    await this.performDirectEntryFlow(true);\n  };\n\n  micDeviceChanged = async ev => {\n    const constraints = { audio: { deviceId: { exact: [ev.target.value] } } };\n    await this.fetchAudioTrack(constraints);\n    await this.setupNewMediaStream();\n  };\n\n  setMediaStreamToDefault = async () => {\n    let hasAudio = false;\n    const { lastUsedMicDeviceId } = this.props.store.state.settings;\n\n    // Try to fetch last used mic, if there was one.\n    if (lastUsedMicDeviceId) {\n      hasAudio = await this.fetchAudioTrack({ audio: { deviceId: { ideal: lastUsedMicDeviceId } } });\n    } else {\n      hasAudio = await this.fetchAudioTrack({ audio: true });\n    }\n\n    await this.setupNewMediaStream();\n\n    return { hasAudio };\n  };\n\n  fetchAudioTrack = async constraints => {\n    if (this.state.audioTrack) {\n      this.state.audioTrack.stop();\n    }\n    if (this.state.audioTrackClone) {\n      this.state.audioTrackClone.stop();\n    }\n\n    try {\n      const mediaStream = await navigator.mediaDevices.getUserMedia(constraints);\n      const audioTrack = mediaStream.getAudioTracks()[0];\n      this.setState({ audioTrack });\n\n      if (/Oculus/.test(navigator.userAgent)) {\n        // HACK Oculus Browser 6 seems to randomly end the microphone audio stream. This re-creates it.\n        // Note the ended event will only fire if some external event ends the stream, not if we call stop().\n        const recreateAudioStream = async () => {\n          console.warn(\n            \"Oculus Browser 6 bug hit: Audio stream track ended without calling stop. Recreating audio stream.\"\n          );\n\n          const mediaStream = await navigator.mediaDevices.getUserMedia(constraints);\n          const audioTrack = mediaStream.getAudioTracks()[0];\n          const audioTrackClone = audioTrack.clone();\n\n          await NAF.connection.adapter.setLocalMediaStream(mediaStream);\n\n          if (this.props.scene.is(\"muted\")) {\n            console.warn(\"re-muting microphone\");\n            NAF.connection.adapter.enableMicrophone(false);\n            audioTrack.enabled = false;\n          }\n\n          this.setState({ mediaStream, audioTrack, audioTrackClone });\n\n          const mediaStreamForMicAnalysis = new MediaStream();\n          mediaStreamForMicAnalysis.addTrack(audioTrackClone);\n          this.props.scene.emit(\"local-media-stream-created\", { mediaStream: mediaStreamForMicAnalysis });\n          audioTrack.addEventListener(\"ended\", recreateAudioStream, { once: true });\n        };\n\n        audioTrack.addEventListener(\"ended\", recreateAudioStream, { once: true });\n      }\n\n      return true;\n    } catch (e) {\n      // Error fetching audio track, most likely a permission denial.\n      this.setState({ audioTrack: null });\n      return false;\n    }\n  };\n\n  setupNewMediaStream = async () => {\n    const mediaStream = new MediaStream();\n\n    await this.fetchMicDevices();\n\n    // we should definitely have an audioTrack at this point unless they denied mic access\n    if (this.state.audioTrack) {\n      mediaStream.addTrack(this.state.audioTrack);\n      const micDeviceId = this.micDeviceIdForMicLabel(this.micLabelForMediaStream(mediaStream));\n      if (micDeviceId) {\n        this.props.store.update({ settings: { lastUsedMicDeviceId: micDeviceId } });\n      }\n      const mediaStreamForMicAnalysis = new MediaStream();\n      const audioTrackClone = this.state.audioTrack.clone();\n      this.setState({ audioTrackClone });\n      mediaStreamForMicAnalysis.addTrack(audioTrackClone);\n      this.props.scene.emit(\"local-media-stream-created\", { mediaStream: mediaStreamForMicAnalysis });\n    }\n\n    this.setState({ mediaStream });\n  };\n\n  onMicGrantButton = async () => {\n    if (this.props.location.state && this.props.location.state.entry_step === \"mic_grant\") {\n      const { hasAudio } = await this.setMediaStreamToDefault();\n\n      if (hasAudio) {\n        this.pushHistoryState(\"entry_step\", \"mic_granted\");\n      } else {\n        this.beginOrSkipAudioSetup();\n      }\n    } else {\n      this.beginOrSkipAudioSetup();\n    }\n  };\n\n  beginOrSkipAudioSetup = () => {\n    const skipAudioSetup = this.props.forcedVREntryType && this.props.forcedVREntryType.endsWith(\"_now\");\n\n    if (skipAudioSetup) {\n      this.onAudioReadyButton();\n    } else {\n      this.pushHistoryState(\"entry_step\", \"audio\");\n    }\n  };\n\n  fetchMicDevices = () => {\n    return new Promise(resolve => {\n      navigator.mediaDevices.enumerateDevices().then(mediaDevices => {\n        this.setState(\n          {\n            micDevices: mediaDevices\n              .filter(d => d.kind === \"audioinput\")\n              .map(d => ({ deviceId: d.deviceId, label: d.label }))\n          },\n          resolve\n        );\n      });\n    });\n  };\n\n  shouldShowHmdMicWarning = () => {\n    if (isMobile || AFRAME.utils.device.isMobileVR()) return false;\n    if (!this.state.enterInVR) return false;\n    if (!this.hasHmdMicrophone()) return false;\n\n    return !HMD_MIC_REGEXES.find(r => this.selectedMicLabel().match(r));\n  };\n\n  hasHmdMicrophone = () => {\n    return !!this.state.micDevices.find(d => HMD_MIC_REGEXES.find(r => d.label.match(r)));\n  };\n\n  micLabelForMediaStream = mediaStream => {\n    return (mediaStream && mediaStream.getAudioTracks().length > 0 && mediaStream.getAudioTracks()[0].label) || \"\";\n  };\n\n  selectedMicLabel = () => {\n    return this.micLabelForMediaStream(this.state.mediaStream);\n  };\n\n  micDeviceIdForMicLabel = label => {\n    return this.state.micDevices.filter(d => d.label === label).map(d => d.deviceId)[0];\n  };\n\n  selectedMicDeviceId = () => {\n    return this.micDeviceIdForMicLabel(this.selectedMicLabel());\n  };\n\n  shouldShowFullScreen = () => {\n    // Disable full screen on iOS, since Safari's fullscreen mode does not let you prevent native pinch-to-zoom gestures.\n    return (\n      (isMobile || AFRAME.utils.device.isMobileVR()) &&\n      !AFRAME.utils.device.isIOS() &&\n      !this.state.enterInVR &&\n      screenfull.enabled\n    );\n  };\n\n  onAudioReadyButton = async () => {\n    if (!this.state.enterInVR) {\n      await showFullScreenIfAvailable();\n    }\n\n    // Push the new history state before going into VR, otherwise menu button will take us back\n    clearHistoryState(this.props.history);\n\n    const muteOnEntry = this.props.store.state.preferences[\"muteMicOnEntry\"] || false;\n    await this.props.enterScene(this.state.mediaStream, this.state.enterInVR, muteOnEntry);\n\n    this.setState({ entered: true, showShareDialog: false });\n\n    const mediaStream = this.state.mediaStream;\n\n    if (mediaStream) {\n      if (mediaStream.getAudioTracks().length > 0) {\n        console.log(`Using microphone: ${mediaStream.getAudioTracks()[0].label}`);\n      }\n\n      if (mediaStream.getVideoTracks().length > 0) {\n        console.log(\"Screen sharing enabled.\");\n      }\n    }\n  };\n\n  attemptLink = async () => {\n    this.pushHistoryState(\"overlay\", \"link\");\n    const { code, cancel, onFinished } = await this.props.linkChannel.generateCode();\n    this.setState({ linkCode: code, linkCodeCancel: cancel });\n    onFinished.then(() => {\n      this.setState({ log: false, linkCode: null, linkCodeCancel: null });\n      this.exit();\n    });\n  };\n\n  showShareDialog = () => {\n    this.props.store.update({ activity: { hasOpenedShare: true } });\n    this.setState({ showShareDialog: true });\n  };\n\n  toggleShareDialog = async () => {\n    this.props.store.update({ activity: { hasOpenedShare: true } });\n    this.setState({ showShareDialog: !this.state.showShareDialog });\n  };\n\n  createObject = media => {\n    this.props.scene.emit(\"add_media\", media);\n  };\n\n  changeScene = url => {\n    this.props.hubChannel.updateScene(url);\n  };\n\n  setAvatarUrl = url => {\n    this.props.store.update({ profile: { ...this.props.store.state.profile, ...{ avatarId: url } } });\n    this.props.scene.emit(\"avatar_updated\");\n  };\n\n  closeDialog = () => {\n    if (this.state.dialog) {\n      this.setState({ dialog: null });\n    } else {\n      this.props.history.goBack();\n    }\n\n    if (isIn2DInterstitial()) {\n      exit2DInterstitialAndEnterVR();\n    } else {\n      showFullScreenIfWasFullScreen();\n    }\n  };\n\n  showNonHistoriedDialog = (DialogClass, props = {}) => {\n    this.setState({\n      dialog: <DialogClass {...{ onClose: this.closeDialog, ...props }} />\n    });\n  };\n\n  toggleStreamerMode = enable => {\n    this.props.scene.systems[\"hubs-systems\"].characterController.fly = enable;\n\n    if (enable) {\n      this.props.hubChannel.beginStreaming();\n      this.setState({ isStreaming: true, showStreamingTip: true });\n    } else {\n      this.props.hubChannel.endStreaming();\n      this.setState({ isStreaming: false });\n    }\n  };\n\n  renderDialog = (DialogClass, props = {}) => <DialogClass {...{ onClose: this.closeDialog, ...props }} />;\n\n  showSignInDialog = () => {\n    this.showNonHistoriedDialog(SignInDialog, {\n      message: messages[\"sign-in.prompt\"],\n      onSignIn: async email => {\n        const { authComplete } = await this.props.authChannel.startAuthentication(email, this.props.hubChannel);\n\n        this.showNonHistoriedDialog(SignInDialog, { authStarted: true });\n\n        await authComplete;\n\n        this.setState({ signedIn: true });\n        this.closeDialog();\n      }\n    });\n  };\n\n  signOut = async () => {\n    await this.props.authChannel.signOut(this.props.hubChannel);\n    this.setState({ signedIn: false });\n  };\n\n  showWebRTCScreenshareUnsupportedDialog = () => {\n    this.pushHistoryState(\"modal\", \"webrtc-screenshare\");\n  };\n\n  onMiniInviteClicked = () => {\n    const link = `https://${configs.SHORTLINK_DOMAIN}/${this.props.hubId}`;\n\n    this.setState({ miniInviteActivated: true });\n    setTimeout(() => {\n      this.setState({ miniInviteActivated: false });\n    }, 5000);\n\n    if (canShare()) {\n      navigator.share({ title: document.title, url: link });\n    } else {\n      copy(link);\n    }\n  };\n\n  sendMessage = msg => {\n    this.props.onSendMessage(msg);\n  };\n\n  occupantCount = () => {\n    return this.props.presences ? Object.entries(this.props.presences).length : 0;\n  };\n\n  onStoreChanged = () => {\n    const broadcastedRoomConfirmed = this.props.store.state.confirmedBroadcastedRooms.includes(this.props.hubId);\n    if (broadcastedRoomConfirmed !== this.state.broadcastTipDismissed) {\n      this.setState({ broadcastTipDismissed: broadcastedRoomConfirmed });\n    }\n  };\n\n  confirmBroadcastedRoom = () => {\n    this.props.store.update({ confirmedBroadcastedRooms: [this.props.hubId] });\n  };\n\n  discordBridges = () => {\n    if (!this.props.presences) {\n      return [];\n    } else {\n      return discordBridgesForPresences(this.props.presences);\n    }\n  };\n\n  hasEmbedPresence = () => {\n    if (!this.props.presences) {\n      return false;\n    } else {\n      for (const p of Object.values(this.props.presences)) {\n        for (const m of p.metas) {\n          if (m.context && m.context.embed) {\n            return true;\n          }\n        }\n      }\n    }\n\n    return false;\n  };\n\n  pushHistoryState = (k, v) => pushHistoryState(this.props.history, k, v);\n\n  renderInterstitialPrompt = () => {\n    return (\n      <IntlProvider locale={lang} messages={messages}>\n        <div className={styles.interstitial} onClick={() => this.props.onInterstitialPromptClicked()}>\n          <div>\n            <FormattedMessage id=\"interstitial.prompt\" />\n          </div>\n        </div>\n      </IntlProvider>\n    );\n  };\n\n  renderExitedPane = () => {\n    let subtitle = null;\n    if (this.props.roomUnavailableReason === \"closed\") {\n      // TODO i18n, due to links and markup\n      subtitle = (\n        <div>\n          Sorry, this room is no longer available.\n          <p />\n          <IfFeature name=\"show_terms\">\n            A room may be closed if we receive reports that it violates our{\" \"}\n            <a\n              target=\"_blank\"\n              rel=\"noreferrer noopener\"\n              href={configs.link(\"terms_of_use\", \"https://github.com/mozilla/hubs/blob/master/TERMS.md\")}\n            >\n              Terms of Use\n            </a>\n            .<br />\n          </IfFeature>\n          If you have questions, contact us at{\" \"}\n          <a href={`mailto:${messages[\"contact-email\"]}`}>\n            <FormattedMessage id=\"contact-email\" />\n          </a>\n          .<p />\n          <IfFeature name=\"show_source_link\">\n            If you&apos;d like to run your own server, Hubs&apos;s source code is available on{\" \"}\n            <a href=\"https://github.com/mozilla/hubs\">GitHub</a>\n            .\n          </IfFeature>\n        </div>\n      );\n    } else if (this.props.platformUnsupportedReason === \"no_data_channels\") {\n      // TODO i18n, due to links and markup\n      subtitle = (\n        <div>\n          Your browser does not support{\" \"}\n          <a\n            href=\"https://developer.mozilla.org/en-US/docs/Web/API/RTCPeerConnection/createDataChannel#Browser_compatibility\"\n            rel=\"noreferrer noopener\"\n          >\n            WebRTC Data Channels\n          </a>\n          , which is required to use {messages[\"app-name\"]}.\n          <br />\n          If you&quot;d like to use {messages[\"app-name\"]} with Oculus or SteamVR, you can{\" \"}\n          <a href=\"https://www.mozilla.org/firefox\" rel=\"noreferrer noopener\">\n            Download Firefox\n          </a>\n          .\n        </div>\n      );\n    } else {\n      const reason = this.props.roomUnavailableReason || this.props.platformUnsupportedReason;\n      const exitSubtitleId = `exit.subtitle.${reason || \"exited\"}`;\n      subtitle = (\n        <div>\n          <FormattedMessage id={exitSubtitleId} />\n          <p />\n          {![\"left\", \"disconnected\", \"scene_error\"].includes(this.props.roomUnavailableReason) && (\n            <div>\n              You can also <a href=\"/\">create a new room</a>\n              .\n            </div>\n          )}\n        </div>\n      );\n    }\n\n    return (\n      <IntlProvider locale={lang} messages={messages}>\n        <div className=\"exited-panel\">\n          <img className=\"exited-panel__logo\" src={configs.image(\"logo\")} />\n          <div className=\"exited-panel__subtitle\">{subtitle}</div>\n        </div>\n      </IntlProvider>\n    );\n  };\n\n  renderBotMode = () => {\n    return (\n      <div className=\"loading-panel\">\n        <img className=\"loading-panel__logo\" src={configs.image(\"logo\")} />\n        <input type=\"file\" id=\"bot-audio-input\" accept=\"audio/*\" />\n        <input type=\"file\" id=\"bot-data-input\" accept=\"application/json\" />\n      </div>\n    );\n  };\n\n  renderEntryStartPanel = () => {\n    const { hasAcceptedProfile, hasChangedName } = this.props.store.state.activity;\n    const promptForNameAndAvatarBeforeEntry = this.props.hubIsBound ? !hasAcceptedProfile : !hasChangedName;\n\n    return (\n      <div className={entryStyles.entryPanel}>\n        <div className={entryStyles.name}>\n          {this.props.hubChannel.canOrWillIfCreator(\"update_hub\") ? (\n            <button\n              className={entryStyles.renameButton}\n              onClick={() =>\n                this.props.performConditionalSignIn(\n                  () => this.props.hubChannel.can(\"update_hub\"),\n                  () => this.pushHistoryState(\"modal\", \"room_settings\"),\n                  \"room-settings\"\n                )\n              }\n            >\n              {this.props.hubName}\n            </button>\n          ) : (\n            <span>{this.props.hubName}</span>\n          )}\n          <button onClick={() => this.setState({ watching: true })} className={entryStyles.collapseButton}>\n            <i>\n              <FontAwesomeIcon icon={faTimes} />\n            </i>\n          </button>\n\n          <button\n            onClick={() => this.toggleFavorited()}\n            className={classNames({\n              [entryStyles.entryFavoriteButton]: true,\n              [entryStyles.favoriteButton]: true,\n              [entryStyles.favorited]: this.isFavorited()\n            })}\n          >\n            <i title=\"Favorite\">\n              <FontAwesomeIcon icon={faStar} />\n            </i>\n          </button>\n        </div>\n\n        <div className={entryStyles.roomSubtitle}>\n          <FormattedMessage id=\"entry.lobby\" />\n        </div>\n\n        <div className={entryStyles.center}>\n          <LobbyChatBox\n            occupantCount={this.occupantCount()}\n            discordBridges={this.discordBridges()}\n            onSendMessage={this.sendMessage}\n          />\n        </div>\n\n        {!this.state.waitingOnAudio &&\n          !this.props.entryDisallowed && (\n            <div className={entryStyles.buttonContainer}>\n              {!isMobileVR && (\n                <button\n                  onClick={e => {\n                    e.preventDefault();\n                    this.attemptLink();\n                  }}\n                  className={classNames([entryStyles.secondaryActionButton, entryStyles.wideButton])}\n                >\n                  <FormattedMessage id=\"entry.device-medium\" />\n                  <div className={entryStyles.buttonSubtitle}>\n                    <FormattedMessage\n                      id={isMobile ? \"entry.device-subtitle-mobile\" : \"entry.device-subtitle-desktop\"}\n                    />\n                  </div>\n                </button>\n              )}\n              <button\n                autoFocus\n                onClick={e => {\n                  e.preventDefault();\n\n                  if (promptForNameAndAvatarBeforeEntry || !this.props.forcedVREntryType) {\n                    this.props.hubChannel.sendEnteringEvent();\n\n                    const stateValue = promptForNameAndAvatarBeforeEntry ? \"profile\" : \"device\";\n                    this.pushHistoryState(\"entry_step\", stateValue);\n                  } else {\n                    this.handleForceEntry();\n                  }\n                }}\n                className={classNames([entryStyles.actionButton, entryStyles.wideButton])}\n              >\n                <FormattedMessage id=\"entry.enter-room\" />\n              </button>\n            </div>\n          )}\n        {this.props.entryDisallowed &&\n          !this.state.waitingOnAudio && (\n            <div className={entryStyles.buttonContainer}>\n              <a\n                onClick={e => {\n                  e.preventDefault();\n                  this.setState({ watching: true });\n                }}\n                className={classNames([entryStyles.secondaryActionButton, entryStyles.wideButton])}\n              >\n                <FormattedMessage id=\"entry.entry-disallowed\" />\n                <div className={entryStyles.buttonSubtitle}>\n                  <FormattedMessage id=\"entry.entry-disallowed-subtitle\" />\n                </div>\n              </a>\n            </div>\n          )}\n        {this.state.waitingOnAudio && (\n          <div>\n            <div className=\"loader-wrap loader-mid\">\n              <div className=\"loader\">\n                <div className=\"loader-center\" />\n              </div>\n            </div>\n          </div>\n        )}\n      </div>\n    );\n  };\n\n  renderDevicePanel = () => {\n    return (\n      <div className={entryStyles.entryPanel}>\n        <div\n          onClick={() => {\n            this.props.hubChannel.sendEnteringCancelledEvent();\n            this.props.history.goBack();\n          }}\n          className={entryStyles.back}\n        >\n          <i>\n            <FontAwesomeIcon icon={faArrowLeft} />\n          </i>\n          <FormattedMessage id=\"entry.back\" />\n        </div>\n\n        <div className={entryStyles.title}>\n          <FormattedMessage id=\"entry.choose-device\" />\n        </div>\n\n        {!this.state.waitingOnAudio ? (\n          <div className={entryStyles.buttonContainer}>\n            {this.props.availableVREntryTypes.cardboard !== VR_DEVICE_AVAILABILITY.no && (\n              <div className={entryStyles.secondary} onClick={this.enterVR}>\n                <FormattedMessage id=\"entry.cardboard\" />\n              </div>\n            )}\n            {this.props.availableVREntryTypes.generic !== VR_DEVICE_AVAILABILITY.no && (\n              <GenericEntryButton secondary={true} onClick={this.enterVR} />\n            )}\n            {this.props.availableVREntryTypes.daydream === VR_DEVICE_AVAILABILITY.yes && (\n              <DaydreamEntryButton secondary={true} onClick={this.enterDaydream} subtitle={null} />\n            )}\n            {this.props.availableVREntryTypes.screen === VR_DEVICE_AVAILABILITY.yes && (\n              <TwoDEntryButton autoFocus={true} onClick={this.enter2D} />\n            )}\n          </div>\n        ) : (\n          <div className={entryStyles.audioLoader}>\n            <div className=\"loader-wrap loader-mid\">\n              <div className=\"loader\">\n                <div className=\"loader-center\" />\n              </div>\n            </div>\n          </div>\n        )}\n      </div>\n    );\n  };\n\n  renderMicPanel = granted => {\n    return (\n      <div className=\"mic-grant-panel\">\n        <div onClick={() => this.props.history.goBack()} className={entryStyles.back}>\n          <i>\n            <FontAwesomeIcon icon={faArrowLeft} />\n          </i>\n          <FormattedMessage id=\"entry.back\" />\n        </div>\n\n        <div className=\"mic-grant-panel__grant-container\">\n          <div className=\"mic-grant-panel__title\">\n            <FormattedMessage id={granted ? \"audio.granted-title\" : \"audio.grant-title\"} />\n          </div>\n          <div className=\"mic-grant-panel__subtitle\">\n            <FormattedMessage id={granted ? \"audio.granted-subtitle\" : \"audio.grant-subtitle\"} />\n          </div>\n          <div className=\"mic-grant-panel__button-container\">\n            {granted ? (\n              <button autoFocus className=\"mic-grant-panel__button\" onClick={this.onMicGrantButton}>\n                <img src=\"../assets/images/mic_granted.png\" srcSet=\"../assets/images/mic_granted@2x.png 2x\" />\n              </button>\n            ) : (\n              <button autoFocus className=\"mic-grant-panel__button\" onClick={this.onMicGrantButton}>\n                <img src=\"../assets/images/mic_denied.png\" srcSet=\"../assets/images/mic_denied@2x.png 2x\" />\n              </button>\n            )}\n          </div>\n          <div className=\"mic-grant-panel__next-container\">\n            <button autoFocus className={classNames(\"mic-grant-panel__next\")} onClick={this.onMicGrantButton}>\n              <FormattedMessage id=\"audio.granted-next\" />\n            </button>\n          </div>\n        </div>\n      </div>\n    );\n  };\n\n  renderAudioSetupPanel = () => {\n    const subtitleId = isMobilePhoneOrVR ? \"audio.subtitle-mobile\" : \"audio.subtitle-desktop\";\n    const muteOnEntry = this.props.store.state.preferences[\"muteMicOnEntry\"] || false;\n    return (\n      <div className=\"audio-setup-panel\">\n        <div\n          onClick={() => {\n            // If we forced a VR entry type, then we skipped the device panel\n            // and hence going back from the audio setup panel will bring you back to the lobby.\n            if (this.props.forcedVREntryType) {\n              this.props.hubChannel.sendEnteringCancelledEvent();\n            }\n\n            this.props.history.goBack();\n          }}\n          className={entryStyles.back}\n        >\n          <i>\n            <FontAwesomeIcon icon={faArrowLeft} />\n          </i>\n          <FormattedMessage id=\"entry.back\" />\n        </div>\n\n        <div>\n          <div className=\"audio-setup-panel__title\">\n            <FormattedMessage id=\"audio.title\" />\n          </div>\n          <div className=\"audio-setup-panel__subtitle\">\n            {(isMobilePhoneOrVR || this.state.enterInVR) && <FormattedMessage id={subtitleId} />}\n          </div>\n          <div className=\"audio-setup-panel__levels\">\n            <MicLevelWidget\n              scene={this.props.scene}\n              hasAudioTrack={!!this.state.audioTrack}\n              muteOnEntry={muteOnEntry}\n            />\n            <OutputLevelWidget />\n          </div>\n          {this.state.audioTrack && this.state.micDevices.length > 1 ? (\n            <div className=\"audio-setup-panel__device-chooser\">\n              <select\n                className=\"audio-setup-panel__device-chooser__dropdown\"\n                value={this.selectedMicDeviceId()}\n                onChange={this.micDeviceChanged}\n              >\n                {this.state.micDevices.map(d => (\n                  <option key={d.deviceId} value={d.deviceId}>\n                    &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;\n                    {d.label}\n                  </option>\n                ))}\n              </select>\n              <img\n                className=\"audio-setup-panel__device-chooser__mic-icon\"\n                src=\"../assets/images/mic_small.png\"\n                srcSet=\"../assets/images/mic_small@2x.png 2x\"\n              />\n              <img\n                className=\"audio-setup-panel__device-chooser__dropdown-arrow\"\n                src=\"../assets/images/dropdown_arrow.png\"\n                srcSet=\"../assets/images/dropdown_arrow@2x.png 2x\"\n              />\n            </div>\n          ) : (\n            <div />\n          )}\n          {this.shouldShowHmdMicWarning() && (\n            <div className=\"audio-setup-panel__hmd-mic-warning\">\n              <img\n                src=\"../assets/images/warning_icon.png\"\n                srcSet=\"../assets/images/warning_icon@2x.png 2x\"\n                className=\"audio-setup-panel__hmd-mic-warning__icon\"\n              />\n              <span className=\"audio-setup-panel__hmd-mic-warning__label\">\n                <FormattedMessage id=\"audio.hmd-mic-warning\" />\n              </span>\n            </div>\n          )}\n        </div>\n        <div className=\"audio-setup-panel__mute-container\">\n          <input\n            id=\"mute-on-entry\"\n            type=\"checkbox\"\n            onChange={() =>\n              this.props.store.update({\n                preferences: { muteMicOnEntry: !this.props.store.state.preferences[\"muteMicOnEntry\"] }\n              })\n            }\n            checked={this.props.store.state.preferences[\"muteMicOnEntry\"] || false}\n          />\n          <label htmlFor=\"mute-on-entry\">\n            <FormattedMessage id=\"entry.mute-on-entry\" />\n          </label>\n        </div>\n        <div className=\"audio-setup-panel__enter-button-container\">\n          <button autoFocus className=\"audio-setup-panel__enter-button\" onClick={this.onAudioReadyButton}>\n            <FormattedMessage id=\"audio.enter-now\" />\n          </button>\n        </div>\n      </div>\n    );\n  };\n\n  isInModalOrOverlay = () => {\n    if (\n      this.state.entered &&\n      (IN_ROOM_MODAL_ROUTER_PATHS.find(x => sluglessPath(this.props.history.location).startsWith(x)) ||\n        IN_ROOM_MODAL_QUERY_VARS.find(x => new URLSearchParams(this.props.history.location.search).get(x)))\n    ) {\n      return true;\n    }\n\n    if (\n      !this.state.entered &&\n      (LOBBY_MODAL_ROUTER_PATHS.find(x => sluglessPath(this.props.history.location).startsWith(x)) ||\n        LOBBY_MODAL_QUERY_VARS.find(\n          (x, i) => new URLSearchParams(this.props.history.location.search).get(x) === LOBBY_MODAL_QUERY_VALUES[i]\n        ))\n    ) {\n      return true;\n    }\n\n    if (this.state.objectInfo && this.state.objectInfo.object3D) {\n      return true; // TODO: Get object info dialog to use history\n    }\n\n    return !!(\n      (this.props.history &&\n        this.props.history.location.state &&\n        (this.props.history.location.state.modal || this.props.history.location.state.overlay)) ||\n      this.state.dialog\n    );\n  };\n\n  render() {\n    if (this.props.hide || this.state.hide) return <div />;\n\n    const isExited = this.state.exited || this.props.roomUnavailableReason || this.props.platformUnsupportedReason;\n    const preload = this.props.showPreload;\n\n    const isLoading =\n      !preload &&\n      (!this.state.hideLoader || !this.state.didConnectToNetworkedScene) &&\n      !(this.props.showSafariDialog || this.props.showWebAssemblyDialog);\n\n    const rootStyles = {\n      [styles.ui]: true,\n      \"ui-root\": true,\n      \"in-modal-or-overlay\": this.isInModalOrOverlay()\n    };\n    const hasPush = navigator.serviceWorker && \"PushManager\" in window;\n\n    if (this.props.showOAuthDialog && !this.props.showInterstitialPrompt)\n      return (\n        <IntlProvider locale={lang} messages={messages}>\n          <div className={classNames(rootStyles)}>\n            <OAuthDialog onClose={this.props.onCloseOAuthDialog} oauthInfo={this.props.oauthInfo} />\n          </div>\n        </IntlProvider>\n      );\n    if (isExited) return this.renderExitedPane();\n    if (isLoading && this.state.showPrefs) {\n      return (\n        <div>\n          <Loader\n            scene={this.props.scene}\n            finished={this.state.noMoreLoadingUpdates}\n            onLoaded={this.onLoadingFinished}\n          />\n          <PreferencesScreen\n            onClose={() => {\n              this.setState({ showPrefs: false });\n            }}\n            store={this.props.store}\n          />\n        </div>\n      );\n    }\n    if (isLoading) {\n      return (\n        <Loader scene={this.props.scene} finished={this.state.noMoreLoadingUpdates} onLoaded={this.onLoadingFinished} />\n      );\n    }\n    if (this.state.showPrefs) {\n      return (\n        <PreferencesScreen\n          onClose={() => {\n            this.setState({ showPrefs: false });\n          }}\n          store={this.props.store}\n        />\n      );\n    }\n\n    if (this.props.showInterstitialPrompt) return this.renderInterstitialPrompt();\n    if (this.props.isBotMode) return this.renderBotMode();\n\n    const embed = this.props.embed;\n    const entered = this.state.entered;\n    const watching = this.state.watching;\n    const enteredOrWatching = entered || watching;\n    const enteredOrWatchingOrPreload = entered || watching || preload;\n    const baseUrl = `${location.protocol}//${location.host}${location.pathname}`;\n    const inEntryFlow = !!(\n      this.props.history &&\n      this.props.history.location.state &&\n      this.props.history.location.state.entry_step\n    );\n\n    const entryDialog =\n      this.props.availableVREntryTypes &&\n      !preload &&\n      (this.isWaitingForAutoExit() ? (\n        <AutoExitWarning\n          message={this.state.autoExitMessage}\n          secondsRemaining={this.state.secondsRemainingBeforeAutoExit}\n          onCancel={this.endAutoExitTimer}\n        />\n      ) : (\n        <div className={entryStyles.entryDialog}>\n          <StateRoute stateKey=\"entry_step\" stateValue=\"device\" history={this.props.history}>\n            {this.renderDevicePanel()}\n          </StateRoute>\n          <StateRoute stateKey=\"entry_step\" stateValue=\"mic_grant\" history={this.props.history}>\n            {this.renderMicPanel(false)}\n          </StateRoute>\n          <StateRoute stateKey=\"entry_step\" stateValue=\"mic_granted\" history={this.props.history}>\n            {this.renderMicPanel(true)}\n          </StateRoute>\n          <StateRoute stateKey=\"entry_step\" stateValue=\"audio\" history={this.props.history}>\n            {this.renderAudioSetupPanel()}\n          </StateRoute>\n          <StateRoute stateKey=\"entry_step\" stateValue=\"\" history={this.props.history}>\n            {this.renderEntryStartPanel()}\n          </StateRoute>\n        </div>\n      ));\n\n    const dialogBoxContentsClassNames = classNames({\n      [styles.uiInteractive]: !this.isInModalOrOverlay(),\n      [styles.uiDialogBoxContents]: true,\n      [styles.backgrounded]: this.isInModalOrOverlay()\n    });\n\n    // MobileVR browsers always show settings panel as an overlay when exiting immersive mode.\n    const showSettingsAsOverlay = entered && isMobileVR;\n\n    const presenceLogEntries = this.props.presenceLogEntries || [];\n\n    const switchToInspectingObject = el => {\n      const src = el.components[\"media-loader\"].data.src;\n      this.setState({ objectInfo: el, objectSrc: src });\n      const cameraSystem = this.props.scene.systems[\"hubs-systems\"].cameraSystem;\n      cameraSystem.uninspect();\n      cameraSystem.inspect(el.object3D, 1.5, true);\n    };\n\n    const mediaSource = this.props.mediaSearchStore.getUrlMediaSource(this.props.history.location);\n\n    // Allow scene picker pre-entry, otherwise wait until entry\n    const showMediaBrowser =\n      mediaSource && ([\"scenes\", \"avatars\", \"favorites\"].includes(mediaSource) || this.state.entered);\n    const hasTopTip = (this.props.activeTips && this.props.activeTips.top) || this.state.showVideoShareFailed;\n\n    const clientInfoClientId = getClientInfoClientId(this.props.history.location);\n    const showClientInfo = !!clientInfoClientId;\n    const showObjectInfo = !!(this.state.objectInfo && this.state.objectInfo.object3D);\n\n    const discordBridges = this.discordBridges();\n    const discordSnippet = discordBridges.map(ch => \"#\" + ch).join(\", \");\n    const hasEmbedPresence = this.hasEmbedPresence();\n    const hasDiscordBridges = discordBridges.length > 0;\n    const showBroadcastTip =\n      (hasDiscordBridges || (hasEmbedPresence && !this.props.embed)) && !this.state.broadcastTipDismissed;\n\n    const showInviteTip =\n      !hasTopTip &&\n      !entered &&\n      !embed &&\n      !preload &&\n      !watching &&\n      !hasTopTip &&\n      !inEntryFlow &&\n      !this.props.store.state.activity.hasOpenedShare &&\n      this.occupantCount() <= 1;\n\n    const showChooseSceneButton =\n      !entered &&\n      !embed &&\n      !preload &&\n      !watching &&\n      !showInviteTip &&\n      !this.state.showShareDialog &&\n      this.props.hubChannel &&\n      this.props.hubChannel.canOrWillIfCreator(\"update_hub\");\n\n    const displayNameOverride = this.props.hubIsBound\n      ? getPresenceProfileForSession(this.props.presences, this.props.sessionId).displayName\n      : null;\n\n    const streaming = this.state.isStreaming;\n    const streamingTip = streaming &&\n      this.state.showStreamingTip && (\n        <div className={classNames([styles.streamingTip])}>\n          <div className={classNames([styles.streamingTipAttachPoint])} />\n          <button\n            title=\"Dismiss\"\n            className={styles.streamingTipClose}\n            onClick={() => this.setState({ showStreamingTip: false })}\n          >\n            <FontAwesomeIcon icon={faTimes} />\n          </button>\n\n          <div className={styles.streamingTipMessage}>\n            <FormattedMessage id=\"tips.streaming\" />\n          </div>\n        </div>\n      );\n\n    const streamer = getCurrentStreamer();\n    const streamerName = streamer && streamer.displayName;\n\n    return (\n      <ReactAudioContext.Provider value={this.state.audioContext}>\n        <IntlProvider locale={lang} messages={messages}>\n          <div className={classNames(rootStyles)}>\n            {this.state.dialog}\n            {preload && (\n              <PreloadOverlay\n                hubName={this.props.hubName}\n                hubScene={this.props.hubScene}\n                baseUrl={baseUrl}\n                onLoadClicked={this.props.onPreloadLoadClicked}\n              />\n            )}\n            <StateRoute\n              stateKey=\"overlay\"\n              stateValue=\"profile\"\n              history={this.props.history}\n              render={props => (\n                <ProfileEntryPanel\n                  {...props}\n                  displayNameOverride={displayNameOverride}\n                  finished={() => this.pushHistoryState()}\n                  onClose={() => this.pushHistoryState()}\n                  store={this.props.store}\n                  mediaSearchStore={this.props.mediaSearchStore}\n                  avatarId={props.location.state.detail && props.location.state.detail.avatarId}\n                />\n              )}\n            />\n            <StateRoute\n              stateKey=\"overlay\"\n              stateValue=\"avatar-editor\"\n              history={this.props.history}\n              render={props => (\n                <AvatarEditor\n                  className={styles.avatarEditor}\n                  signedIn={this.state.signedIn}\n                  onSignIn={this.showSignInDialog}\n                  onSave={() => {\n                    if (props.location.state.detail && props.location.state.detail.returnToProfile) {\n                      this.props.history.goBack();\n                    } else {\n                      this.props.history.goBack();\n                      // We are returning to the media browser. Trigger an update so that the filter switches to\n                      // my-avatars, now that we've saved an avatar.\n                      this.props.mediaSearchStore.sourceNavigateWithNoNav(\"avatars\", \"use\");\n                    }\n                    this.props.onAvatarSaved();\n                  }}\n                  onClose={() => this.props.history.goBack()}\n                  store={this.props.store}\n                  debug={avatarEditorDebug}\n                  avatarId={props.location.state.detail && props.location.state.detail.avatarId}\n                  hideDelete={props.location.state.detail && props.location.state.detail.hideDelete}\n                />\n              )}\n            />\n            {showMediaBrowser && (\n              <MediaBrowser\n                history={this.props.history}\n                mediaSearchStore={this.props.mediaSearchStore}\n                hubChannel={this.props.hubChannel}\n                onMediaSearchResultEntrySelected={(entry, selectAction) => {\n                  if (entry.type === \"room\") {\n                    this.showNonHistoriedDialog(LeaveRoomDialog, {\n                      destinationUrl: entry.url,\n                      messageType: \"join-room\"\n                    });\n                  } else {\n                    this.props.onMediaSearchResultEntrySelected(entry, selectAction);\n                  }\n                }}\n                performConditionalSignIn={this.props.performConditionalSignIn}\n              />\n            )}\n            <StateRoute\n              stateKey=\"entry_step\"\n              stateValue=\"profile\"\n              history={this.props.history}\n              render={props => (\n                <ProfileEntryPanel\n                  {...props}\n                  displayNameOverride={displayNameOverride}\n                  finished={() => {\n                    if (this.props.forcedVREntryType) {\n                      this.pushHistoryState();\n                      this.handleForceEntry();\n                    } else {\n                      this.pushHistoryState(\"entry_step\", \"device\");\n                    }\n                  }}\n                  onClose={() => this.pushHistoryState()}\n                  store={this.props.store}\n                  mediaSearchStore={this.props.mediaSearchStore}\n                  avatarId={props.location.state.detail && props.location.state.detail.avatarId}\n                />\n              )}\n            />\n            <StateRoute\n              stateKey=\"modal\"\n              stateValue=\"room_settings\"\n              history={this.props.history}\n              render={() =>\n                this.renderDialog(RoomSettingsDialog, {\n                  showRoomAccessSettings: this.props.hubChannel.can(\"update_hub_promotion\"),\n                  initialSettings: {\n                    name: this.props.hubName,\n                    description: this.props.hubDescription,\n                    member_permissions: this.props.hubMemberPermissions,\n                    allow_promotion: this.props.hubAllowPromotion\n                  },\n                  onChange: settings => this.props.hubChannel.updateHub(settings)\n                })\n              }\n            />\n            <StateRoute\n              stateKey=\"modal\"\n              stateValue=\"close_room\"\n              history={this.props.history}\n              render={() => this.renderDialog(CloseRoomDialog, { onConfirm: () => this.props.hubChannel.closeHub() })}\n            />\n            <StateRoute\n              stateKey=\"modal\"\n              stateValue=\"support\"\n              history={this.props.history}\n              render={() => this.renderDialog(InviteTeamDialog, { hubChannel: this.props.hubChannel })}\n            />\n            <StateRoute\n              stateKey=\"modal\"\n              stateValue=\"create\"\n              history={this.props.history}\n              render={() => this.renderDialog(CreateObjectDialog, { onCreate: this.createObject })}\n            />\n            <StateRoute\n              stateKey=\"modal\"\n              stateValue=\"change_scene\"\n              history={this.props.history}\n              render={() => this.renderDialog(ChangeSceneDialog, { onChange: this.changeScene })}\n            />\n            <StateRoute\n              stateKey=\"modal\"\n              stateValue=\"avatar_url\"\n              history={this.props.history}\n              render={() => this.renderDialog(AvatarUrlDialog, { onChange: this.setAvatarUrl })}\n            />\n            <StateRoute\n              stateKey=\"modal\"\n              stateValue=\"webvr\"\n              history={this.props.history}\n              render={() => this.renderDialog(WebVRRecommendDialog)}\n            />\n            <StateRoute\n              stateKey=\"modal\"\n              stateValue=\"webrtc-screenshare\"\n              history={this.props.history}\n              render={() => this.renderDialog(WebRTCScreenshareUnsupportedDialog)}\n            />\n            <StateRoute\n              stateKey=\"modal\"\n              stateValue=\"room_info\"\n              history={this.props.history}\n              render={() => {\n                return this.renderDialog(RoomInfoDialog, {\n                  store: this.props.store,\n                  scene: this.props.hubScene,\n                  hubName: this.props.hubName,\n                  hubDescription: this.props.hubDescription\n                });\n              }}\n            />\n            <StateRoute\n              stateKey=\"modal\"\n              stateValue=\"feedback\"\n              history={this.props.history}\n              render={() =>\n                this.renderDialog(FeedbackDialog, {\n                  history: this.props.history,\n                  onClose: () => this.pushHistoryState(\"modal\", null)\n                })\n              }\n            />\n            <StateRoute\n              stateKey=\"modal\"\n              stateValue=\"help\"\n              history={this.props.history}\n              render={() =>\n                this.renderDialog(HelpDialog, {\n                  history: this.props.history,\n                  onClose: () => this.pushHistoryState(\"modal\", null)\n                })\n              }\n            />\n            <StateRoute\n              stateKey=\"modal\"\n              stateValue=\"tweet\"\n              history={this.props.history}\n              render={() => this.renderDialog(TweetDialog, { history: this.props.history, onClose: this.closeDialog })}\n            />\n            {showClientInfo && (\n              <ClientInfoDialog\n                clientId={clientInfoClientId}\n                onClose={this.closeDialog}\n                history={this.props.history}\n                presences={this.props.presences}\n                hubChannel={this.props.hubChannel}\n                showNonHistoriedDialog={this.showNonHistoriedDialog}\n                performConditionalSignIn={this.props.performConditionalSignIn}\n              />\n            )}\n            {showObjectInfo && (\n              <ObjectInfoDialog\n                scene={this.props.scene}\n                el={this.state.objectInfo}\n                src={this.state.objectSrc}\n                pinned={this.state.objectInfo && this.state.objectInfo.components[\"networked\"].data.persistent}\n                hubChannel={this.props.hubChannel}\n                onPinChanged={() => switchToInspectingObject(this.state.objectInfo)}\n                onNavigated={el => switchToInspectingObject(el)}\n                onClose={() => {\n                  if (this.props.scene.systems[\"hubs-systems\"].cameraSystem.mode === CAMERA_MODE_INSPECT) {\n                    this.props.scene.systems[\"hubs-systems\"].cameraSystem.uninspect();\n                  }\n                  this.setState({ isObjectListExpanded: false, objectInfo: null });\n                }}\n              />\n            )}\n            {((!enteredOrWatching && !this.state.isObjectListExpanded && !showObjectInfo) ||\n              this.isWaitingForAutoExit()) && (\n              <div className={styles.uiDialog}>\n                <PresenceLog\n                  entries={presenceLogEntries}\n                  presences={this.props.presences}\n                  hubId={this.props.hubId}\n                  history={this.props.history}\n                />\n                <div className={dialogBoxContentsClassNames}>{entryDialog}</div>\n              </div>\n            )}\n            {enteredOrWatchingOrPreload && (\n              <PresenceLog\n                inRoom={true}\n                presences={this.props.presences}\n                entries={presenceLogEntries}\n                hubId={this.props.hubId}\n                history={this.props.history}\n              />\n            )}\n            {entered &&\n              this.props.activeTips &&\n              this.props.activeTips.bottom &&\n              (!presenceLogEntries || presenceLogEntries.length === 0) &&\n              !showBroadcastTip && (\n                <Tip tip={this.props.activeTips.bottom} tipRegion=\"bottom\" pushHistoryState={this.pushHistoryState} />\n              )}\n            {enteredOrWatchingOrPreload &&\n              showBroadcastTip && (\n                <Tip\n                  tip={hasDiscordBridges ? \"discord\" : \"embed\"}\n                  broadcastTarget={discordSnippet}\n                  onClose={() => this.confirmBroadcastedRoom()}\n                />\n              )}\n            {enteredOrWatchingOrPreload &&\n              !this.state.objectInfo &&\n              !this.state.frozen && (\n                <InWorldChatBox\n                  discordBridges={discordBridges}\n                  onSendMessage={this.sendMessage}\n                  onObjectCreated={this.createObject}\n                  enableSpawning={entered}\n                  history={this.props.history}\n                />\n              )}\n            {this.state.frozen && (\n              <button className={styles.leaveButton} onClick={() => this.exit(\"left\")}>\n                <FormattedMessage id=\"entry.leave-room\" />\n              </button>\n            )}\n            {!this.state.frozen &&\n              !watching &&\n              !preload && (\n                <div\n                  className={classNames({\n                    [inviteStyles.inviteContainer]: true,\n                    [inviteStyles.inviteContainerBelowHud]: entered,\n                    [inviteStyles.inviteContainerInverted]: this.state.showShareDialog\n                  })}\n                >\n                  {!embed &&\n                    !streaming && (\n                      <button\n                        className={classNames({\n                          [inviteStyles.inviteButton]: true,\n                          [inviteStyles.hideSmallScreens]: this.occupantCount() > 1 && entered,\n                          [inviteStyles.inviteButtonLowered]: hasTopTip\n                        })}\n                        onClick={() => this.toggleShareDialog()}\n                      >\n                        <FormattedMessage id=\"entry.share-button\" />\n                      </button>\n                    )}\n                  {showChooseSceneButton && (\n                    <button\n                      className={classNames([styles.chooseSceneButton])}\n                      onClick={() => {\n                        this.props.performConditionalSignIn(\n                          () => this.props.hubChannel.can(\"update_hub\"),\n                          () => {\n                            showFullScreenIfAvailable();\n                            this.props.mediaSearchStore.sourceNavigateWithNoNav(\"scenes\", \"use\");\n                          },\n                          \"change-scene\"\n                        );\n                      }}\n                    >\n                      <FormattedMessage id=\"entry.change-scene\" />\n                    </button>\n                  )}\n\n                  {showInviteTip && (\n                    <div className={styles.inviteTip}>\n                      <div className={styles.inviteTipAttachPoint} />\n                      <FormattedMessage id={`entry.${isMobile ? \"mobile\" : \"desktop\"}.invite-tip`} />\n                    </div>\n                  )}\n                  {!embed &&\n                    this.occupantCount() > 1 &&\n                    !hasTopTip &&\n                    entered &&\n                    !streaming && (\n                      <button onClick={this.onMiniInviteClicked} className={inviteStyles.inviteMiniButton}>\n                        <span>\n                          {this.state.miniInviteActivated\n                            ? navigator.share\n                              ? \"sharing...\"\n                              : \"copied!\"\n                            : `${configs.SHORTLINK_DOMAIN}/` + this.props.hubId}\n                        </span>\n                      </button>\n                    )}\n                  {embed && (\n                    <a href={baseUrl} className={inviteStyles.enterButton} target=\"_blank\" rel=\"noopener noreferrer\">\n                      <FormattedMessage id=\"entry.open-in-window\" />\n                    </a>\n                  )}\n                  {this.state.showShareDialog && (\n                    <InviteDialog\n                      allowShare={!isMobileVR}\n                      entryCode={this.props.hubEntryCode}\n                      embedUrl={\n                        this.props.embedToken && !isMobilePhoneOrVR\n                          ? `${baseUrl}?embed_token=${this.props.embedToken}`\n                          : null\n                      }\n                      hasPush={hasPush}\n                      isSubscribed={\n                        this.state.isSubscribed === undefined ? this.props.initialIsSubscribed : this.state.isSubscribed\n                      }\n                      onSubscribeChanged={() => this.onSubscribeChanged()}\n                      hubId={this.props.hubId}\n                      onClose={() => this.setState({ showShareDialog: false })}\n                    />\n                  )}\n                </div>\n              )}\n            <StateRoute\n              stateKey=\"overlay\"\n              stateValue=\"invite\"\n              history={this.props.history}\n              render={() => (\n                <InviteDialog\n                  allowShare={!!navigator.share}\n                  entryCode={this.props.hubEntryCode}\n                  hubId={this.props.hubId}\n                  isModal={true}\n                  onClose={() => {\n                    this.props.history.goBack();\n                    exit2DInterstitialAndEnterVR();\n                  }}\n                />\n              )}\n            />\n            <StateRoute\n              stateKey=\"overlay\"\n              stateValue=\"link\"\n              history={this.props.history}\n              render={() => (\n                <LinkDialog\n                  linkCode={this.state.linkCode}\n                  onClose={() => {\n                    this.state.linkCodeCancel();\n                    this.setState({ linkCode: null, linkCodeCancel: null });\n                    this.props.history.goBack();\n                  }}\n                />\n              )}\n            />\n            {streaming && (\n              <button\n                title=\"Exit Camera Mode\"\n                onClick={() => this.toggleStreamerMode(false)}\n                className={classNames([styles.cornerButton, styles.cameraModeExitButton])}\n              >\n                <FontAwesomeIcon icon={faTimes} />\n              </button>\n            )}\n            {streamingTip}\n\n            <ObjectList\n              scene={this.props.scene}\n              onExpand={(expand, uninspect) => {\n                if (expand) {\n                  this.setState({ isPresenceListExpanded: false, isObjectListExpanded: expand });\n                } else {\n                  this.setState({ isObjectListExpanded: expand });\n                }\n\n                if (uninspect) {\n                  this.setState({ objectInfo: null });\n                  if (this.props.scene.systems[\"hubs-systems\"].cameraSystem.mode === CAMERA_MODE_INSPECT) {\n                    this.props.scene.systems[\"hubs-systems\"].cameraSystem.uninspect();\n                  }\n                }\n              }}\n              expanded={this.state.isObjectListExpanded && !this.state.isPresenceListExpanded}\n              onInspectObject={el => switchToInspectingObject(el)}\n            />\n\n            <PresenceList\n              history={this.props.history}\n              presences={this.props.presences}\n              sessionId={this.props.sessionId}\n              signedIn={this.state.signedIn}\n              email={this.props.store.state.credentials.email}\n              onSignIn={this.showSignInDialog}\n              onSignOut={this.signOut}\n              expanded={!this.state.isObjectListExpanded && this.state.isPresenceListExpanded}\n              onExpand={expand => {\n                if (expand) {\n                  this.setState({ isPresenceListExpanded: expand, isObjectListExpanded: false });\n                } else {\n                  this.setState({ isPresenceListExpanded: expand });\n                }\n              }}\n            />\n\n            {!streaming &&\n              !preload && (\n                <SettingsMenu\n                  history={this.props.history}\n                  mediaSearchStore={this.props.mediaSearchStore}\n                  isStreaming={streaming}\n                  toggleStreamerMode={this.toggleStreamerMode}\n                  hubChannel={this.props.hubChannel}\n                  hubScene={this.props.hubScene}\n                  scene={this.props.scene}\n                  showAsOverlay={showSettingsAsOverlay}\n                  onCloseOverlay={() => exit2DInterstitialAndEnterVR(true)}\n                  performConditionalSignIn={this.props.performConditionalSignIn}\n                  showNonHistoriedDialog={this.showNonHistoriedDialog}\n                  showPreferencesScreen={() => {\n                    this.setState({ showPrefs: true });\n                  }}\n                  pushHistoryState={this.pushHistoryState}\n                />\n              )}\n            {!entered && !streaming && !isMobile && streamerName && <SpectatingLabel name={streamerName} />}\n            {enteredOrWatching && (\n              <div className={styles.topHud}>\n                <TwoDHUD.TopHUD\n                  scene={this.props.scene}\n                  history={this.props.history}\n                  mediaSearchStore={this.props.mediaSearchStore}\n                  muted={this.state.muted}\n                  frozen={this.state.frozen}\n                  watching={this.state.watching}\n                  onWatchEnded={() => this.setState({ watching: false })}\n                  videoShareMediaSource={this.state.videoShareMediaSource}\n                  showVideoShareFailed={this.state.showVideoShareFailed}\n                  hideVideoShareFailedTip={() => this.setState({ showVideoShareFailed: false })}\n                  activeTip={this.props.activeTips && this.props.activeTips.top}\n                  isCursorHoldingPen={this.props.isCursorHoldingPen}\n                  hasActiveCamera={this.props.hasActiveCamera}\n                  onToggleMute={this.toggleMute}\n                  onSpawnPen={this.spawnPen}\n                  onSpawnCamera={() => this.props.scene.emit(\"action_toggle_camera\")}\n                  onShareVideo={this.shareVideo}\n                  onEndShareVideo={this.endShareVideo}\n                  onShareVideoNotCapable={() => this.showWebRTCScreenshareUnsupportedDialog()}\n                  isStreaming={streaming}\n                  showStreamingTip={this.state.showStreamingTip}\n                  hideStreamingTip={() => {\n                    this.setState({ showStreamingTip: false });\n                  }}\n                />\n                {!watching && !streaming ? (\n                  <UnlessFeature name=\"show_feedback_ui\">\n                    <div className={styles.nagCornerButton}>\n                      <button onClick={() => this.pushHistoryState(\"modal\", \"help\")} className={styles.helpButton}>\n                        <i>\n                          <FontAwesomeIcon icon={faQuestion} />\n                        </i>\n                      </button>\n                    </div>\n                  </UnlessFeature>\n                ) : (\n                  <div className={styles.nagCornerButton}>\n                    <button onClick={() => this.setState({ hide: true })}>\n                      <FormattedMessage id=\"hide-ui.prompt\" />\n                    </button>\n                  </div>\n                )}\n                {!watching &&\n                  !streaming && (\n                    <IfFeature name=\"show_feedback_ui\">\n                      <div className={styles.nagCornerButton}>\n                        <button onClick={() => this.pushHistoryState(\"modal\", \"feedback\")}>\n                          <FormattedMessage id=\"feedback.prompt\" />\n                        </button>\n                      </div>\n                    </IfFeature>\n                  )}\n\n                {!streaming && (\n                  <button\n                    onClick={() => this.toggleFavorited()}\n                    className={classNames({\n                      [entryStyles.favorited]: this.isFavorited(),\n                      [styles.inRoomFavoriteButton]: true\n                    })}\n                  >\n                    <i title=\"Favorite\">\n                      <FontAwesomeIcon icon={faStar} />\n                    </i>\n                  </button>\n                )}\n              </div>\n            )}\n          </div>\n        </IntlProvider>\n      </ReactAudioContext.Provider>\n    );\n  }\n}\n\nexport default UIRoot;\n","import jwtDecode from \"jwt-decode\";\nimport { EventTarget } from \"event-target-shim\";\nimport { Presence } from \"phoenix\";\nimport { migrateChannelToSocket, discordBridgesForPresences } from \"./phoenix-utils\";\nimport configs from \"./configs\";\n\nconst MS_PER_DAY = 1000 * 60 * 60 * 24;\nconst MS_PER_MONTH = 1000 * 60 * 60 * 24 * 30;\n\nfunction isSameMonth(da, db) {\n  return da.getFullYear() == db.getFullYear() && da.getMonth() == db.getMonth();\n}\n\nfunction isSameDay(da, db) {\n  return isSameMonth(da, db) && da.getDate() == db.getDate();\n}\n\n// Permissions that will be assumed if the user becomes the creator.\nconst HUB_CREATOR_PERMISSIONS = [\n  \"update_hub\",\n  \"update_hub_promotion\",\n  \"update_roles\",\n  \"close_hub\",\n  \"mute_users\",\n  \"kick_users\"\n];\nconst VALID_PERMISSIONS =\n  HUB_CREATOR_PERMISSIONS + [\"tweet\", \"spawn_camera\", \"spawn_drawing\", \"spawn_and_move_media\", \"pin_objects\"];\n\nexport default class HubChannel extends EventTarget {\n  constructor(store, hubId) {\n    super();\n    this.store = store;\n    this.hubId = hubId;\n    this._signedIn = !!this.store.state.credentials.token;\n    this._permissions = {};\n    this._blockedSessionIds = new Set();\n  }\n\n  get signedIn() {\n    return this._signedIn;\n  }\n\n  // Returns true if this current session has the given permission.\n  can(permission) {\n    if (!VALID_PERMISSIONS.includes(permission)) throw new Error(`Invalid permission name: ${permission}`);\n    return this._permissions && this._permissions[permission];\n  }\n\n  // Returns true if the current session has the given permission, *or* will get the permission\n  // if they sign in and become the creator.\n  canOrWillIfCreator(permission) {\n    if (this._getCreatorAssignmentToken() && HUB_CREATOR_PERMISSIONS.includes(permission)) return true;\n    return this.can(permission);\n  }\n\n  // Migrates this hub channel to a new phoenix channel and presence\n  async migrateToSocket(socket, params) {\n    let presenceBindings;\n\n    // Unbind presence, and then set up bindings after reconnect\n    if (this.presence) {\n      presenceBindings = {\n        onJoin: this.presence.caller.onJoin,\n        onLeave: this.presence.caller.onLeave,\n        onSync: this.presence.caller.onSync\n      };\n\n      this.presence.onJoin(function() {});\n      this.presence.onLeave(function() {});\n      this.presence.onSync(function() {});\n    }\n\n    this.channel = await migrateChannelToSocket(this.channel, socket, params);\n    this.presence = new Presence(this.channel);\n\n    if (presenceBindings) {\n      this.presence.onJoin(presenceBindings.onJoin);\n      this.presence.onLeave(presenceBindings.onLeave);\n      this.presence.onSync(presenceBindings.onSync);\n    }\n  }\n\n  setPhoenixChannel = channel => {\n    this.channel = channel;\n    this.presence = new Presence(channel);\n  };\n\n  setPermissionsFromToken = token => {\n    // Note: token is not verified.\n    this._permissions = jwtDecode(token);\n    configs.setIsAdmin(this._permissions.postgrest_role === \"ret_admin\");\n    this.dispatchEvent(new CustomEvent(\"permissions_updated\"));\n\n    // Refresh the token 1 minute before it expires.\n    const nextRefresh = new Date(this._permissions.exp * 1000 - 60 * 1000) - new Date();\n    setTimeout(async () => {\n      const result = await this.fetchPermissions();\n      this.dispatchEvent(new CustomEvent(\"permissions-refreshed\", { detail: result }));\n    }, nextRefresh);\n  };\n\n  sendEnteringEvent = async () => {\n    this.channel.push(\"events:entering\", {});\n  };\n\n  sendEnteringCancelledEvent = async () => {\n    this.channel.push(\"events:entering_cancelled\", {});\n  };\n\n  sendEnteredEvent = async () => {\n    if (!this.channel) {\n      console.warn(\"No phoenix channel initialized before room entry.\");\n      return;\n    }\n\n    let entryDisplayType = \"Screen\";\n\n    if (navigator.getVRDisplays) {\n      const vrDisplay = (await navigator.getVRDisplays()).find(d => d.isPresenting);\n\n      if (vrDisplay) {\n        entryDisplayType = vrDisplay.displayName;\n      }\n    }\n\n    // This is fairly hacky, but gets the # of initial occupants\n    let initialOccupantCount = 0;\n\n    if (NAF.connection.adapter && NAF.connection.adapter.publisher) {\n      initialOccupantCount = NAF.connection.adapter.publisher.initialOccupants.length;\n    }\n\n    const entryTimingFlags = this.getEntryTimingFlags();\n\n    const entryEvent = {\n      ...entryTimingFlags,\n      initialOccupantCount,\n      entryDisplayType,\n      userAgent: navigator.userAgent\n    };\n\n    this.channel.push(\"events:entered\", entryEvent);\n  };\n\n  beginStreaming() {\n    this.channel.push(\"events:begin_streaming\", {});\n  }\n\n  endStreaming() {\n    this.channel.push(\"events:end_streaming\", {});\n  }\n\n  beginRecording() {\n    this.channel.push(\"events:begin_recording\", {});\n  }\n\n  endRecording() {\n    this.channel.push(\"events:end_recording\", {});\n  }\n\n  getEntryTimingFlags = () => {\n    const entryTimingFlags = { isNewDaily: true, isNewMonthly: true, isNewDayWindow: true, isNewMonthWindow: true };\n    const storedLastEnteredAt = this.store.state.activity.lastEnteredAt;\n\n    if (!storedLastEnteredAt) {\n      return entryTimingFlags;\n    }\n\n    const now = new Date();\n    const lastEntered = new Date(storedLastEnteredAt);\n    const msSinceLastEntered = now - lastEntered;\n\n    // note that new daily and new monthly is based on client local time\n    entryTimingFlags.isNewDaily = !isSameDay(now, lastEntered);\n    entryTimingFlags.isNewMonthly = !isSameMonth(now, lastEntered);\n    entryTimingFlags.isNewDayWindow = msSinceLastEntered > MS_PER_DAY;\n    entryTimingFlags.isNewMonthWindow = msSinceLastEntered > MS_PER_MONTH;\n\n    return entryTimingFlags;\n  };\n\n  sendObjectSpawnedEvent = objectType => {\n    if (!this.channel) {\n      console.warn(\"No phoenix channel initialized before object spawn.\");\n      return;\n    }\n\n    const spawnEvent = {\n      object_type: objectType\n    };\n\n    this.channel.push(\"events:object_spawned\", spawnEvent);\n  };\n\n  sendProfileUpdate = () => {\n    this.channel.push(\"events:profile_updated\", { profile: this.store.state.profile });\n  };\n\n  updateScene = url => {\n    if (!this._permissions.update_hub) return \"unauthorized\";\n    this.channel.push(\"update_scene\", { url });\n  };\n\n  updateHub = settings => {\n    if (!this._permissions.update_hub) return \"unauthorized\";\n    this.channel.push(\"update_hub\", settings);\n  };\n\n  closeHub = () => {\n    if (!this._permissions.close_hub) return \"unauthorized\";\n    this.channel.push(\"close_hub\", {});\n  };\n\n  subscribe = subscription => {\n    this.channel.push(\"subscribe\", { subscription });\n  };\n\n  // If true, will tell the server to not send us any NAF traffic\n  allowNAFTraffic = allow => {\n    this.channel.push(allow ? \"unblock_naf\" : \"block_naf\", {});\n  };\n\n  unsubscribe = subscription => {\n    return new Promise(resolve => this.channel.push(\"unsubscribe\", { subscription }).receive(\"ok\", resolve));\n  };\n\n  sendMessage = (body, type = \"chat\") => {\n    if (!body) return;\n    this.channel.push(\"message\", { body, type });\n  };\n\n  _getCreatorAssignmentToken = () => {\n    const creatorAssignmentTokenEntry =\n      this.store.state.creatorAssignmentTokens &&\n      this.store.state.creatorAssignmentTokens.find(t => t.hubId === this.hubId);\n\n    return creatorAssignmentTokenEntry && creatorAssignmentTokenEntry.creatorAssignmentToken;\n  };\n\n  signIn = token => {\n    return new Promise((resolve, reject) => {\n      const creator_assignment_token = this._getCreatorAssignmentToken();\n\n      this.channel\n        .push(\"sign_in\", { token, creator_assignment_token })\n        .receive(\"ok\", ({ perms_token }) => {\n          this.setPermissionsFromToken(perms_token);\n          this._signedIn = true;\n          resolve();\n        })\n        .receive(\"error\", err => {\n          if (err.reason === \"invalid_token\") {\n            console.warn(\"sign in failed\", err);\n            // Token expired or invalid TODO purge from storage if possible\n            resolve();\n          } else {\n            console.error(\"sign in failed\", err);\n            reject();\n          }\n        });\n    });\n  };\n\n  signOut = () => {\n    return new Promise((resolve, reject) => {\n      this.channel\n        .push(\"sign_out\")\n        .receive(\"ok\", async () => {\n          this._signedIn = false;\n          const params = this.channel.params();\n          delete params.auth_token;\n          delete params.perms_token;\n          await this.fetchPermissions();\n          resolve();\n        })\n        .receive(\"error\", reject);\n    });\n  };\n\n  getHost = () => {\n    return new Promise((resolve, reject) => {\n      this.channel\n        .push(\"get_host\")\n        .receive(\"ok\", res => {\n          resolve(res.host);\n        })\n        .receive(\"error\", reject);\n    });\n  };\n\n  getTwitterOAuthURL = () => {\n    return new Promise((resolve, reject) => {\n      this.channel\n        .push(\"oauth\", { type: \"twitter\" })\n        .receive(\"ok\", res => {\n          resolve(res.oauth_url);\n        })\n        .receive(\"error\", reject);\n    });\n  };\n\n  discordBridges = () => {\n    if (!this.presence || !this.presence.state) return [];\n    return discordBridgesForPresences(this.presence.state);\n  };\n\n  pin = (id, gltfNode, fileId, fileAccessToken, promotionToken) => {\n    const payload = { id, gltf_node: gltfNode };\n    if (fileId && promotionToken) {\n      payload.file_id = fileId;\n      payload.file_access_token = fileAccessToken;\n      payload.promotion_token = promotionToken;\n    }\n    return new Promise((resolve, reject) => {\n      this.channel\n        .push(\"pin\", payload)\n        .receive(\"ok\", resolve)\n        .receive(\"error\", reject);\n    });\n  };\n\n  unpin = (id, fileId) => {\n    const payload = { id };\n    if (fileId) {\n      payload.file_id = fileId;\n    }\n    this.channel.push(\"unpin\", payload);\n  };\n\n  fetchPermissions = () => {\n    return new Promise((resolve, reject) => {\n      this.channel\n        .push(\"refresh_perms_token\")\n        .receive(\"ok\", res => {\n          this.setPermissionsFromToken(res.perms_token);\n          resolve({ permsToken: res.perms_token, permissions: this._permissions });\n        })\n        .receive(\"error\", reject);\n    });\n  };\n\n  mute = sessionId => this.channel.push(\"mute\", { session_id: sessionId });\n  addOwner = sessionId => this.channel.push(\"add_owner\", { session_id: sessionId });\n  removeOwner = sessionId => this.channel.push(\"remove_owner\", { session_id: sessionId });\n\n  hide = sessionId => {\n    NAF.connection.adapter.block(sessionId);\n    this.channel.push(\"block\", { session_id: sessionId });\n    this._blockedSessionIds.add(sessionId);\n  };\n\n  unhide = sessionId => {\n    if (!this._blockedSessionIds.has(sessionId)) return;\n    NAF.connection.adapter.unblock(sessionId);\n    NAF.connection.entities.completeSync(sessionId);\n    this.channel.push(\"unblock\", { session_id: sessionId });\n    this._blockedSessionIds.delete(sessionId);\n  };\n\n  isHidden = sessionId => this._blockedSessionIds.has(sessionId);\n\n  kick = async sessionId => {\n    const permsToken = await this.fetchPermissions();\n    NAF.connection.adapter.kick(sessionId, permsToken);\n    this.channel.push(\"kick\", { session_id: sessionId });\n  };\n\n  requestSupport = () => this.channel.push(\"events:request_support\", {});\n  favorite = () => this.channel.push(\"favorite\", {});\n  unfavorite = () => this.channel.push(\"unfavorite\", {});\n\n  disconnect = () => {\n    if (this.channel) {\n      this.channel.socket.disconnect();\n    }\n  };\n}\n","import { SHAPE, FIT } from \"three-ammo/constants\";\n\nfunction exceedsDensityThreshold(count, subtree) {\n  const bounds = subtree.boundingData;\n  const triangleThreshold = 1000;\n  const minimumVolume = 0.1;\n  const minimumTriangles = 100;\n  const dx = bounds[3] - bounds[0];\n  const dy = bounds[4] - bounds[1];\n  const dz = bounds[5] - bounds[2];\n  const volume = dx * dy * dz;\n\n  if (volume < minimumVolume) {\n    return false;\n  }\n\n  if (count < minimumTriangles) {\n    return false;\n  }\n\n  return count / volume > triangleThreshold;\n}\n\nfunction isHighDensity(subtree) {\n  if (subtree.count) {\n    const result = exceedsDensityThreshold(subtree.count, subtree);\n    return result === true ? true : subtree.count;\n  } else {\n    const leftResult = isHighDensity(subtree.left);\n    if (leftResult === true) return true;\n    const rightResult = isHighDensity(subtree.right);\n    if (rightResult === true) return true;\n\n    const count = leftResult + rightResult;\n    const result = exceedsDensityThreshold(count, subtree);\n    return result === true ? true : count;\n  }\n}\n\nfunction isGeometryHighDensity(geo) {\n  const bvh = geo.boundsTree;\n  const roots = bvh._roots;\n  for (let i = 0; i < roots.length; ++i) {\n    return isHighDensity(roots[i]) === true;\n  }\n  return false;\n}\n\nexport const traverseMeshesAndAddShapes = (function() {\n  const shapePrefix = \"shape-helper__\";\n  const shapes = [];\n  return function(el) {\n    const meshRoot = el.object3DMap.mesh;\n    while (shapes.length > 0) {\n      const { id, entity } = shapes.pop();\n      entity.removeAttribute(id);\n    }\n\n    console.group(\"traverseMeshesAndAddShapes\");\n\n    if (document.querySelector([\"[shape-helper__trimesh]\", \"[shape-helper__heightfield]\"])) {\n      console.log(\"heightfield or trimesh found on scene\");\n    } else {\n      console.log(\"collision not found in scene\");\n\n      let isHighDensity = false;\n      meshRoot.traverse(o => {\n        if (\n          o.isMesh &&\n          (!THREE.Sky || o.__proto__ != THREE.Sky.prototype) &&\n          !o.name.startsWith(\"Floor_Plan\") &&\n          !o.name.startsWith(\"Ground_Plane\") &&\n          o.geometry.boundsTree\n        ) {\n          if (isGeometryHighDensity(o.geometry)) {\n            isHighDensity = true;\n            return;\n          }\n        }\n      });\n\n      let navMesh = null;\n\n      if (isHighDensity) {\n        console.log(\"mesh contains high triangle density region\");\n        navMesh = document.querySelector(\"[nav-mesh]\");\n      }\n\n      if (navMesh) {\n        console.log(`mesh density exceeded, using floor plan only`);\n        navMesh.setAttribute(shapePrefix + \"floorPlan\", {\n          type: SHAPE.MESH,\n          margin: 0.01,\n          fit: FIT.ALL,\n          includeInvisible: true\n        });\n        shapes.push({ id: shapePrefix + \"floorPlan\", entity: navMesh });\n      } else if (!isHighDensity) {\n        el.setAttribute(shapePrefix + \"environment\", {\n          type: SHAPE.MESH,\n          margin: 0.01,\n          fit: FIT.ALL\n        });\n        shapes.push({ id: shapePrefix + \"environment\", entity: el });\n        console.log(\"adding mesh shape for all visible meshes\");\n      } else {\n        el.setAttribute(shapePrefix + \"defaultFloor\", {\n          type: SHAPE.BOX,\n          margin: 0.01,\n          halfExtents: { x: 4000, y: 0.5, z: 4000 },\n          offset: { x: 0, y: -0.5, z: 0 },\n          fit: FIT.MANUAL\n        });\n        shapes.push({ id: shapePrefix + \"defaultFloor\", entity: el });\n        console.log(\"adding default floor collision\");\n      }\n    }\n    console.groupEnd();\n  };\n})();\n","import \"./utils/configs\";\nimport { getAbsoluteHref } from \"./utils/media-url-utils\";\nimport { isValidSceneUrl } from \"./utils/scene-url-utils\";\nimport { messages } from \"./utils/i18n\";\nimport { spawnChatMessage } from \"./react-components/chat-message\";\nimport { SOUND_QUACK, SOUND_SPECIAL_QUACK } from \"./systems/sound-effects-system\";\nimport ducky from \"./assets/models/DuckyMesh.glb\";\n\n// Handles user-entered messages\nexport default class MessageDispatch {\n  constructor(scene, entryManager, hubChannel, addToPresenceLog, remountUI, mediaSearchStore) {\n    this.scene = scene;\n    this.entryManager = entryManager;\n    this.hubChannel = hubChannel;\n    this.addToPresenceLog = addToPresenceLog;\n    this.remountUI = remountUI;\n    this.mediaSearchStore = mediaSearchStore;\n  }\n\n  log = body => {\n    this.addToPresenceLog({ type: \"log\", body });\n  };\n\n  dispatch = message => {\n    if (message.startsWith(\"/\")) {\n      const commandParts = message.substring(1).split(/\\s+/);\n      this.dispatchCommand(commandParts[0], ...commandParts.slice(1));\n      document.activeElement.blur(); // Commands should blur\n    } else {\n      this.hubChannel.sendMessage(message);\n    }\n  };\n\n  dispatchCommand = async (command, ...args) => {\n    const entered = this.scene.is(\"entered\");\n\n    if (!entered) {\n      this.addToPresenceLog({ type: \"log\", body: \"You must enter the room to use this command.\" });\n      return;\n    }\n\n    const avatarRig = document.querySelector(\"#avatar-rig\");\n    const scales = [0.0625, 0.125, 0.25, 0.5, 1.0, 1.5, 3, 5, 7.5, 12.5];\n    const curScale = avatarRig.object3D.scale;\n    let err;\n    let physicsSystem;\n    const captureSystem = this.scene.systems[\"capture-system\"];\n\n    switch (command) {\n      case \"fly\":\n        if (this.scene.systems[\"hubs-systems\"].characterController.fly) {\n          this.scene.systems[\"hubs-systems\"].characterController.fly = false;\n          this.addToPresenceLog({ type: \"log\", body: \"Fly mode disabled.\" });\n        } else {\n          this.scene.systems[\"hubs-systems\"].characterController.fly = true;\n          this.addToPresenceLog({ type: \"log\", body: \"Fly mode enabled.\" });\n        }\n        break;\n      case \"grow\":\n        for (let i = 0; i < scales.length; i++) {\n          if (scales[i] > curScale.x) {\n            avatarRig.object3D.scale.set(scales[i], scales[i], scales[i]);\n            avatarRig.object3D.matrixNeedsUpdate = true;\n            break;\n          }\n        }\n\n        break;\n      case \"shrink\":\n        for (let i = scales.length - 1; i >= 0; i--) {\n          if (curScale.x > scales[i]) {\n            avatarRig.object3D.scale.set(scales[i], scales[i], scales[i]);\n            break;\n          }\n        }\n\n        break;\n      case \"leave\":\n        this.entryManager.exitScene();\n        this.remountUI({ roomUnavailableReason: \"left\" });\n        break;\n      case \"duck\":\n        spawnChatMessage(getAbsoluteHref(location.href, ducky));\n        if (Math.random() < 0.01) {\n          this.scene.systems[\"hubs-systems\"].soundEffectsSystem.playSoundOneShot(SOUND_SPECIAL_QUACK);\n        } else {\n          this.scene.systems[\"hubs-systems\"].soundEffectsSystem.playSoundOneShot(SOUND_QUACK);\n        }\n        break;\n      case \"debug\":\n        physicsSystem = document.querySelector(\"a-scene\").systems[\"hubs-systems\"].physicsSystem;\n        physicsSystem.setDebug(!physicsSystem.debugEnabled);\n        break;\n      case \"vrstats\":\n        document.getElementById(\"stats\").components[\"stats-plus\"].toggleVRStats();\n        break;\n      case \"scene\":\n        if (args[0]) {\n          if (await isValidSceneUrl(args[0])) {\n            err = this.hubChannel.updateScene(args[0]);\n            if (err === \"unauthorized\") {\n              this.addToPresenceLog({ type: \"log\", body: \"You do not have permission to change the scene.\" });\n            }\n          } else {\n            this.addToPresenceLog({ type: \"log\", body: messages[\"invalid-scene-url\"] });\n          }\n        } else if (this.hubChannel.canOrWillIfCreator(\"update_hub\")) {\n          this.mediaSearchStore.sourceNavigateWithNoNav(\"scenes\", \"use\");\n        }\n\n        break;\n      case \"rename\":\n        err = this.hubChannel.rename(args.join(\" \"));\n        if (err === \"unauthorized\") {\n          this.addToPresenceLog({ type: \"log\", body: \"You do not have permission to rename this room.\" });\n        }\n        break;\n      case \"capture\":\n        if (!captureSystem.available()) {\n          this.log(\"Capture unavailable.\");\n          break;\n        }\n        if (args[0] === \"stop\") {\n          if (captureSystem.started()) {\n            captureSystem.stop();\n            this.log(\"Capture stopped.\");\n          } else {\n            this.log(\"Capture already stopped.\");\n          }\n        } else {\n          if (captureSystem.started()) {\n            this.log(\"Capture already running.\");\n          } else {\n            captureSystem.start();\n            this.log(\"Capture started.\");\n          }\n        }\n        break;\n    }\n  };\n}\n","import qsTruthy from \"./utils/qs_truthy\";\nimport nextTick from \"./utils/next-tick\";\nimport pinnedEntityToGltf from \"./utils/pinned-entity-to-gltf\";\nimport { hackyMobileSafariTest } from \"./utils/detect-touchscreen\";\n\nconst isBotMode = qsTruthy(\"bot\");\nconst isMobile = AFRAME.utils.device.isMobile();\nconst forceEnableTouchscreen = hackyMobileSafariTest();\nconst isMobileVR = AFRAME.utils.device.isMobileVR();\nconst isDebug = qsTruthy(\"debug\");\nconst qs = new URLSearchParams(location.search);\n\nimport { addMedia, getPromotionTokenForFile } from \"./utils/media-utils\";\nimport {\n  isIn2DInterstitial,\n  handleExitTo2DInterstitial,\n  exit2DInterstitialAndEnterVR,\n  forceExitFrom2DInterstitial\n} from \"./utils/vr-interstitial\";\nimport { ObjectContentOrigins } from \"./object-types\";\nimport { getAvatarSrc, getAvatarType } from \"./utils/avatar-utils\";\nimport { pushHistoryState } from \"./utils/history\";\nimport { SOUND_ENTER_SCENE } from \"./systems/sound-effects-system\";\n\nconst isIOS = AFRAME.utils.device.isIOS();\n\nexport default class SceneEntryManager {\n  constructor(hubChannel, authChannel, availableVREntryTypes, history) {\n    this.hubChannel = hubChannel;\n    this.authChannel = authChannel;\n    this.availableVREntryTypes = availableVREntryTypes;\n    this.store = window.APP.store;\n    this.mediaSearchStore = window.APP.mediaSearchStore;\n    this.scene = document.querySelector(\"a-scene\");\n    this.rightCursorController = document.getElementById(\"right-cursor-controller\");\n    this.leftCursorController = document.getElementById(\"left-cursor-controller\");\n    this.avatarRig = document.getElementById(\"avatar-rig\");\n    this._entered = false;\n    this.performConditionalSignIn = () => {};\n    this.history = history;\n  }\n\n  init = () => {\n    this.whenSceneLoaded(() => {\n      this.rightCursorController.components[\"cursor-controller\"].enabled = false;\n      this.leftCursorController.components[\"cursor-controller\"].enabled = false;\n    });\n  };\n\n  hasEntered = () => {\n    return this._entered;\n  };\n\n  enterScene = async (mediaStream, enterInVR, muteOnEntry) => {\n    document.getElementById(\"viewing-camera\").removeAttribute(\"scene-preview-camera\");\n    const waypointSystem = this.scene.systems[\"hubs-systems\"].waypointSystem;\n    waypointSystem.moveToSpawnPoint();\n\n    if (isDebug) {\n      NAF.connection.adapter.session.options.verbose = true;\n    }\n\n    if (enterInVR) {\n      // This specific scene state var is used to check if the user went through the\n      // entry flow and chose VR entry, and is used to preempt VR mode on refreshes.\n      this.scene.addState(\"vr-entered\");\n\n      // HACK - A-Frame calls getVRDisplays at module load, we want to do it here to\n      // force gamepads to become live.\n      navigator.getVRDisplays();\n\n      await exit2DInterstitialAndEnterVR(true);\n    }\n\n    if (isMobile || forceEnableTouchscreen || qsTruthy(\"mobile\")) {\n      this.avatarRig.setAttribute(\"virtual-gamepad-controls\", {});\n    }\n\n    this._setupPlayerRig();\n    this._setupBlocking();\n    this._setupKicking();\n    this._setupMedia(mediaStream);\n    this._setupCamera();\n\n    if (qsTruthy(\"offline\")) return;\n\n    this._spawnAvatar();\n\n    this.scene.systems[\"hubs-systems\"].soundEffectsSystem.playSoundOneShot(SOUND_ENTER_SCENE);\n\n    if (isBotMode) {\n      this._runBot(mediaStream);\n      this.scene.addState(\"entered\");\n      return;\n    }\n\n    if (mediaStream) {\n      await NAF.connection.adapter.setLocalMediaStream(mediaStream);\n    }\n\n    this.scene.classList.remove(\"hand-cursor\");\n    this.scene.classList.add(\"no-cursor\");\n\n    this.rightCursorController.components[\"cursor-controller\"].enabled = true;\n    this.leftCursorController.components[\"cursor-controller\"].enabled = true;\n    this._entered = true;\n\n    // Delay sending entry event telemetry until VR display is presenting.\n    (async () => {\n      while (enterInVR && !(await navigator.getVRDisplays()).find(d => d.isPresenting)) {\n        await nextTick();\n      }\n\n      this.hubChannel.sendEnteredEvent().then(() => {\n        this.store.update({ activity: { lastEnteredAt: new Date().toISOString() } });\n      });\n    })();\n\n    // Bump stored entry count after 30s\n    setTimeout(() => this.store.bumpEntryCount(), 30000);\n\n    this.scene.addState(\"entered\");\n\n    if (muteOnEntry) {\n      this.scene.emit(\"action_mute\");\n    }\n  };\n\n  whenSceneLoaded = callback => {\n    if (this.scene.hasLoaded) {\n      callback();\n    } else {\n      this.scene.addEventListener(\"loaded\", callback);\n    }\n  };\n\n  enterSceneWhenLoaded = (mediaStream, enterInVR) => {\n    this.whenSceneLoaded(() => this.enterScene(mediaStream, enterInVR));\n  };\n\n  exitScene = () => {\n    this.scene.exitVR();\n    if (NAF.connection.adapter && NAF.connection.adapter.localMediaStream) {\n      NAF.connection.adapter.localMediaStream.getTracks().forEach(t => t.stop());\n    }\n    if (this.hubChannel) {\n      this.hubChannel.disconnect();\n    }\n    if (this.scene.renderer) {\n      this.scene.renderer.setAnimationLoop(null); // Stop animation loop, TODO A-Frame should do this\n    }\n    this.scene.parentNode.removeChild(this.scene);\n  };\n\n  _setupPlayerRig = () => {\n    this._setPlayerInfoFromProfile();\n\n    // Explict user action changed avatar or updated existing avatar.\n    this.scene.addEventListener(\"avatar_updated\", () => this._setPlayerInfoFromProfile(true));\n\n    // Store updates can occur to avatar id in cases like error, auth reset, etc.\n    this.store.addEventListener(\"statechanged\", () => this._setPlayerInfoFromProfile());\n\n    const avatarScale = parseInt(qs.get(\"avatar_scale\"), 10);\n    if (avatarScale) {\n      this.avatarRig.setAttribute(\"scale\", { x: avatarScale, y: avatarScale, z: avatarScale });\n    }\n  };\n\n  _setPlayerInfoFromProfile = async (force = false) => {\n    const avatarId = this.store.state.profile.avatarId;\n    if (!force && this._lastFetchedAvatarId === avatarId) return; // Avoid continually refetching based upon state changing\n\n    this._lastFetchedAvatarId = avatarId;\n    const avatarSrc = await getAvatarSrc(avatarId);\n\n    this.avatarRig.setAttribute(\"player-info\", { avatarSrc, avatarType: getAvatarType(avatarId) });\n  };\n\n  _setupKicking = () => {\n    // This event is only received by the kicker\n    document.body.addEventListener(\"kicked\", ({ detail }) => {\n      const { clientId: kickedClientId } = detail;\n      const { entities } = NAF.connection.entities;\n      for (const id in entities) {\n        const entity = entities[id];\n        if (NAF.utils.getCreator(entity) !== kickedClientId) continue;\n\n        if (entity.components.networked.data.persistent) {\n          NAF.utils.takeOwnership(entity);\n          this._unpinElement(entity);\n          entity.parentNode.removeChild(entity);\n        } else {\n          NAF.entities.removeEntity(id);\n        }\n      }\n    });\n  };\n\n  _setupBlocking = () => {\n    document.body.addEventListener(\"blocked\", ev => {\n      NAF.connection.entities.removeEntitiesOfClient(ev.detail.clientId);\n    });\n\n    document.body.addEventListener(\"unblocked\", ev => {\n      NAF.connection.entities.completeSync(ev.detail.clientId, true);\n    });\n  };\n\n  _pinElement = async el => {\n    const { networkId } = el.components.networked.data;\n\n    const { fileId, src } = el.components[\"media-loader\"].data;\n\n    let fileAccessToken, promotionToken;\n    if (fileId) {\n      fileAccessToken = new URL(src).searchParams.get(\"token\");\n      const storedPromotionToken = getPromotionTokenForFile(fileId);\n      if (storedPromotionToken) {\n        promotionToken = storedPromotionToken.promotionToken;\n      }\n    }\n\n    const gltfNode = pinnedEntityToGltf(el);\n    if (!gltfNode) return;\n    el.setAttribute(\"networked\", { persistent: true });\n    el.setAttribute(\"media-loader\", { fileIsOwned: true });\n\n    try {\n      await this.hubChannel.pin(networkId, gltfNode, fileId, fileAccessToken, promotionToken);\n      this.store.update({ activity: { hasPinned: true } });\n    } catch (e) {\n      if (e.reason === \"invalid_token\") {\n        await this.authChannel.signOut(this.hubChannel);\n        this._signInAndPinOrUnpinElement(el);\n      } else {\n        console.warn(\"Pin failed for unknown reason\", e);\n      }\n    }\n  };\n\n  _signInAndPinOrUnpinElement = (el, pin) => {\n    const action = pin\n      ? () => this._pinElement(el)\n      : async () => {\n          await this._unpinElement(el);\n        };\n\n    this.performConditionalSignIn(() => this.hubChannel.signedIn, action, pin ? \"pin\" : \"unpin\", () => {\n      // UI pins/un-pins the entity optimistically, so we undo that here.\n      // Note we have to disable the sign in flow here otherwise this will recurse.\n      this._disableSignInOnPinAction = true;\n      el.setAttribute(\"pinnable\", \"pinned\", !pin);\n      this._disableSignInOnPinAction = false;\n    });\n  };\n\n  _unpinElement = el => {\n    const components = el.components;\n    const networked = components.networked;\n\n    if (!networked || !networked.data || !NAF.utils.isMine(el)) return;\n\n    const networkId = components.networked.data.networkId;\n    el.setAttribute(\"networked\", { persistent: false });\n\n    const mediaLoader = components[\"media-loader\"];\n    const fileId = mediaLoader.data && mediaLoader.data.fileId;\n\n    this.hubChannel.unpin(networkId, fileId);\n  };\n\n  _setupMedia = mediaStream => {\n    const offset = { x: 0, y: 0, z: -1.5 };\n    const spawnMediaInfrontOfPlayer = (src, contentOrigin) => {\n      if (!this.hubChannel.can(\"spawn_and_move_media\")) return;\n      const { entity, orientation } = addMedia(\n        src,\n        \"#interactable-media\",\n        contentOrigin,\n        null,\n        !(src instanceof MediaStream),\n        true\n      );\n      orientation.then(or => {\n        entity.setAttribute(\"offset-relative-to\", {\n          target: \"#avatar-pov-node\",\n          offset,\n          orientation: or\n        });\n      });\n\n      return entity;\n    };\n\n    this.scene.addEventListener(\"add_media\", e => {\n      const contentOrigin = e.detail instanceof File ? ObjectContentOrigins.FILE : ObjectContentOrigins.URL;\n\n      spawnMediaInfrontOfPlayer(e.detail, contentOrigin);\n    });\n\n    const handlePinEvent = (e, pinned) => {\n      if (this._disableSignInOnPinAction) return;\n      const el = e.detail.el;\n\n      if (NAF.utils.isMine(el)) {\n        this._signInAndPinOrUnpinElement(e.detail.el, pinned);\n      }\n    };\n\n    this.scene.addEventListener(\"pinned\", e => handlePinEvent(e, true));\n    this.scene.addEventListener(\"unpinned\", e => handlePinEvent(e, false));\n\n    this.scene.addEventListener(\"object_spawned\", e => {\n      this.hubChannel.sendObjectSpawnedEvent(e.detail.objectType);\n    });\n\n    this.scene.addEventListener(\"action_spawn\", () => {\n      handleExitTo2DInterstitial(false, () => window.APP.mediaSearchStore.pushExitMediaBrowserHistory());\n      window.APP.mediaSearchStore.sourceNavigateToDefaultSource();\n    });\n\n    this.scene.addEventListener(\"action_invite\", () => {\n      handleExitTo2DInterstitial(false, () => this.history.goBack());\n      pushHistoryState(this.history, \"overlay\", \"invite\");\n    });\n\n    this.scene.addEventListener(\"action_kick_client\", ({ detail: { clientId } }) => {\n      this.performConditionalSignIn(\n        () => this.hubChannel.can(\"kick_users\"),\n        async () => await window.APP.hubChannel.kick(clientId),\n        \"kick-user\"\n      );\n    });\n\n    this.scene.addEventListener(\"action_mute_client\", ({ detail: { clientId } }) => {\n      this.performConditionalSignIn(\n        () => this.hubChannel.can(\"mute_users\"),\n        () => window.APP.hubChannel.mute(clientId),\n        \"mute-user\"\n      );\n    });\n\n    this.scene.addEventListener(\"action_vr_notice_closed\", () => forceExitFrom2DInterstitial());\n\n    document.addEventListener(\"paste\", e => {\n      if (\n        (e.target.matches(\"input, textarea\") || e.target.contentEditable === \"true\") &&\n        document.activeElement === e.target\n      )\n        return;\n\n      // Never paste into scene if dialog is open\n      const uiRoot = document.querySelector(\".ui-root\");\n      if (uiRoot && uiRoot.classList.contains(\"in-modal-or-overlay\")) return;\n\n      const url = e.clipboardData.getData(\"text\");\n      const files = e.clipboardData.files && e.clipboardData.files;\n      if (url) {\n        spawnMediaInfrontOfPlayer(url, ObjectContentOrigins.URL);\n      } else {\n        for (const file of files) {\n          spawnMediaInfrontOfPlayer(file, ObjectContentOrigins.CLIPBOARD);\n        }\n      }\n    });\n\n    document.addEventListener(\"dragover\", e => e.preventDefault());\n\n    document.addEventListener(\"drop\", e => {\n      e.preventDefault();\n\n      let url = e.dataTransfer.getData(\"url\");\n\n      if (!url) {\n        // Sometimes dataTransfer text contains a valid URL, so try for that.\n        try {\n          url = new URL(e.dataTransfer.getData(\"text\")).href;\n        } catch (e) {\n          // Nope, not this time.\n        }\n      }\n\n      const files = e.dataTransfer.files;\n\n      if (url) {\n        spawnMediaInfrontOfPlayer(url, ObjectContentOrigins.URL);\n      } else {\n        for (const file of files) {\n          spawnMediaInfrontOfPlayer(file, ObjectContentOrigins.FILE);\n        }\n      }\n    });\n\n    let currentVideoShareEntity;\n    let isHandlingVideoShare = false;\n\n    const shareVideoMediaStream = async (constraints, isDisplayMedia) => {\n      if (isHandlingVideoShare) return;\n      isHandlingVideoShare = true;\n\n      let newStream;\n\n      try {\n        if (isDisplayMedia) {\n          newStream = await navigator.mediaDevices.getDisplayMedia(constraints);\n        } else {\n          newStream = await navigator.mediaDevices.getUserMedia(constraints);\n        }\n      } catch (e) {\n        isHandlingVideoShare = false;\n        this.scene.emit(\"share_video_failed\");\n        return;\n      }\n\n      const videoTracks = newStream ? newStream.getVideoTracks() : [];\n\n      if (videoTracks.length > 0) {\n        newStream.getVideoTracks().forEach(track => mediaStream.addTrack(track));\n        await NAF.connection.adapter.setLocalMediaStream(mediaStream);\n        currentVideoShareEntity = spawnMediaInfrontOfPlayer(mediaStream, undefined);\n\n        // Wire up custom removal event which will stop the stream.\n        currentVideoShareEntity.setAttribute(\"emit-scene-event-on-remove\", \"event:action_end_video_sharing\");\n      }\n\n      this.scene.emit(\"share_video_enabled\", { source: isDisplayMedia ? \"screen\" : \"camera\" });\n      this.scene.addState(\"sharing_video\");\n      isHandlingVideoShare = false;\n    };\n\n    this.scene.addEventListener(\"action_share_camera\", () => {\n      shareVideoMediaStream({\n        video: {\n          mediaSource: \"camera\",\n          width: isIOS ? { max: 1280 } : { max: 1280, ideal: 720 },\n          frameRate: 30\n        }\n      });\n    });\n\n    this.scene.addEventListener(\"action_share_screen\", () => {\n      shareVideoMediaStream(\n        {\n          video: {\n            // Work around BMO 1449832 by calculating the width. This will break for multi monitors if you share anything\n            // other than your current monitor that has a different aspect ratio.\n            width: 720 * (screen.width / screen.height),\n            height: 720,\n            frameRate: 30\n          },\n          audio: true\n        },\n        true\n      );\n    });\n\n    this.scene.addEventListener(\"action_end_video_sharing\", async () => {\n      if (isHandlingVideoShare) return;\n      isHandlingVideoShare = true;\n\n      if (currentVideoShareEntity && currentVideoShareEntity.parentNode) {\n        NAF.utils.takeOwnership(currentVideoShareEntity);\n        currentVideoShareEntity.parentNode.removeChild(currentVideoShareEntity);\n      }\n\n      for (const track of mediaStream.getVideoTracks()) {\n        mediaStream.removeTrack(track);\n      }\n\n      await NAF.connection.adapter.setLocalMediaStream(mediaStream);\n      currentVideoShareEntity = null;\n\n      this.scene.emit(\"share_video_disabled\");\n      this.scene.removeState(\"sharing_video\");\n      isHandlingVideoShare = false;\n    });\n\n    this.scene.addEventListener(\"action_selected_media_result_entry\", async e => {\n      // TODO spawn in space when no rights\n      const { entry, selectAction } = e.detail;\n      if (selectAction !== \"spawn\") return;\n\n      const delaySpawn = isIn2DInterstitial() && !isMobileVR;\n      await exit2DInterstitialAndEnterVR();\n\n      // If user has HMD lifted up or gone through interstitial, delay spawning for now. eventually show a modal\n      if (delaySpawn) {\n        setTimeout(() => {\n          spawnMediaInfrontOfPlayer(entry.url, ObjectContentOrigins.URL);\n        }, 3000);\n      } else {\n        spawnMediaInfrontOfPlayer(entry.url, ObjectContentOrigins.URL);\n      }\n    });\n\n    this.mediaSearchStore.addEventListener(\"media-exit\", () => {\n      exit2DInterstitialAndEnterVR();\n    });\n  };\n\n  _setupCamera = () => {\n    this.scene.addEventListener(\"action_toggle_camera\", () => {\n      if (!this.hubChannel.can(\"spawn_camera\")) return;\n      const myCamera = this.scene.systems[\"camera-tools\"].getMyCamera();\n\n      if (myCamera) {\n        myCamera.parentNode.removeChild(myCamera);\n        this.scene.removeState(\"camera\");\n      } else {\n        const entity = document.createElement(\"a-entity\");\n        entity.setAttribute(\"networked\", { template: \"#interactable-camera\" });\n        entity.setAttribute(\"offset-relative-to\", {\n          target: \"#avatar-pov-node\",\n          offset: { x: 0, y: 0, z: -1.5 }\n        });\n        this.scene.appendChild(entity);\n        this.scene.addState(\"camera\");\n      }\n\n      // Need to wait a frame so camera is registered with system.\n      setTimeout(() => this.scene.emit(\"camera_toggled\"));\n    });\n\n    this.scene.addEventListener(\"photo_taken\", e => this.hubChannel.sendMessage({ src: e.detail }, \"photo\"));\n    this.scene.addEventListener(\"video_taken\", e => this.hubChannel.sendMessage({ src: e.detail }, \"video\"));\n  };\n\n  _spawnAvatar = () => {\n    this.avatarRig.setAttribute(\"networked\", \"template: #remote-avatar; attachTemplateToLocal: false;\");\n    this.avatarRig.setAttribute(\"networked-avatar\", \"\");\n    this.avatarRig.emit(\"entered\");\n  };\n\n  _runBot = async mediaStream => {\n    const audioEl = document.createElement(\"audio\");\n    let audioInput;\n    let dataInput;\n\n    // Wait for startup to render form\n    do {\n      audioInput = document.querySelector(\"#bot-audio-input\");\n      dataInput = document.querySelector(\"#bot-data-input\");\n      await nextTick();\n    } while (!audioInput || !dataInput);\n\n    const getAudio = () => {\n      audioEl.loop = true;\n      audioEl.muted = true;\n      audioEl.crossorigin = \"anonymous\";\n      audioEl.src = URL.createObjectURL(audioInput.files[0]);\n      document.body.appendChild(audioEl);\n    };\n\n    if (audioInput.files && audioInput.files.length > 0) {\n      getAudio();\n    } else {\n      audioInput.onchange = getAudio;\n    }\n\n    const camera = document.querySelector(\"#avatar-pov-node\");\n    const leftController = document.querySelector(\"#player-left-controller\");\n    const rightController = document.querySelector(\"#player-right-controller\");\n    const getRecording = () => {\n      fetch(URL.createObjectURL(dataInput.files[0]))\n        .then(resp => resp.json())\n        .then(recording => {\n          camera.setAttribute(\"replay\", \"\");\n          camera.components[\"replay\"].poses = recording.camera.poses;\n\n          leftController.setAttribute(\"replay\", \"\");\n          leftController.components[\"replay\"].poses = recording.left.poses;\n          leftController.removeAttribute(\"visibility-by-path\");\n          leftController.removeAttribute(\"track-pose\");\n          leftController.setAttribute(\"visible\", true);\n\n          rightController.setAttribute(\"replay\", \"\");\n          rightController.components[\"replay\"].poses = recording.right.poses;\n          rightController.removeAttribute(\"visibility-by-path\");\n          rightController.removeAttribute(\"track-pose\");\n          rightController.setAttribute(\"visible\", true);\n        });\n    };\n\n    if (dataInput.files && dataInput.files.length > 0) {\n      getRecording();\n    } else {\n      dataInput.onchange = getRecording;\n    }\n\n    await new Promise(resolve => audioEl.addEventListener(\"canplay\", resolve));\n    mediaStream.addTrack(\n      audioEl.captureStream\n        ? audioEl.captureStream().getAudioTracks()[0]\n        : audioEl.mozCaptureStream\n          ? audioEl.mozCaptureStream().getAudioTracks()[0]\n          : null\n    );\n    await NAF.connection.adapter.setLocalMediaStream(mediaStream);\n    audioEl.play();\n  };\n}\n","export default function pinnedEntityToGltf(el) {\n  if (!NAF.utils.isMine(el)) return;\n\n  // Construct a GLTF node from this entity\n  const object3D = el.object3D;\n  const components = el.components;\n  const networkId = components.networked.data.networkId;\n\n  const gltfComponents = {};\n  // TODO: Move to MOZ_hubs_components and include version number. Requires migration of existing room objects.\n  // Please do this before making a breaking change to the data stored here.\n  const gltfNode = { name: networkId, extensions: { HUBS_components: gltfComponents } };\n\n  // Adapted from three.js GLTFExporter\n  const equalArray = (x, y) => x.length === y.length && x.every((v, i) => v === y[i]);\n  const rotation = object3D.quaternion.toArray();\n  const position = object3D.position.toArray();\n  const scale = object3D.scale.toArray();\n\n  if (!equalArray(rotation, [0, 0, 0, 1])) gltfNode.rotation = rotation;\n  if (!equalArray(position, [0, 0, 0])) gltfNode.translation = position;\n  if (!equalArray(scale, [1, 1, 1])) gltfNode.scale = scale;\n\n  if (components[\"media-loader\"]) {\n    const mediaSrc = components[\"media-loader\"].data.src;\n    const mediaVersion = components[\"media-loader\"].data.version;\n    const mediaContentSubtype = components[\"media-loader\"].data.contentSubtype;\n\n    if (mediaSrc.startsWith(\"hubs://\") && mediaSrc.endsWith(\"/video\")) {\n      // Do not persist hubs client video urls\n      return null;\n    }\n\n    gltfComponents.media = { src: mediaSrc, version: mediaVersion, contentSubtype: mediaContentSubtype, id: networkId };\n\n    if (components[\"media-pdf\"]) {\n      gltfComponents.media.pageIndex = components[\"media-pdf\"].data.index;\n    }\n\n    if (components[\"media-video\"] && components[\"media-video\"].data.videoPaused) {\n      gltfComponents.media.paused = true;\n      gltfComponents.media.time = components[\"media-video\"].data.time;\n    }\n  }\n\n  gltfComponents.pinnable = { pinned: true };\n\n  return gltfNode;\n}\n","import nextTick from \"./utils/next-tick.js\";\nconst INIT_TIMEOUT_MS = 5000;\n\n// Manages web push subscriptions\n//\nfunction urlBase64ToUint8Array(base64String) {\n  const padding = \"=\".repeat((4 - (base64String.length % 4)) % 4);\n  const base64 = (base64String + padding).replace(/-/g, \"+\").replace(/_/g, \"/\");\n\n  const rawData = window.atob(base64);\n  const outputArray = new Uint8Array(rawData.length);\n\n  for (let i = 0; i < rawData.length; ++i) {\n    outputArray[i] = rawData.charCodeAt(i);\n  }\n  return outputArray;\n}\n\nexport default class Subscriptions {\n  constructor(hubId) {\n    this.hubId = hubId;\n  }\n\n  setHubChannel = hubChannel => {\n    this.hubChannel = hubChannel;\n  };\n\n  setRegistration = registration => {\n    this.registration = registration;\n  };\n\n  setRegistrationFailed = () => {\n    this.registration = null;\n  };\n\n  setVapidPublicKey = vapidPublicKey => {\n    this.vapidPublicKey = vapidPublicKey;\n  };\n\n  setSubscribed = isSubscribed => {\n    this._isSubscribed = isSubscribed;\n  };\n\n  isSubscribed = () => {\n    return this._isSubscribed;\n  };\n\n  getCurrentEndpoint = async () => {\n    if (!navigator.serviceWorker) return null;\n    const startedAt = performance.now();\n\n    // registration becomes null if failed, non null if registered\n    while (this.registration === undefined && performance.now() - startedAt < INIT_TIMEOUT_MS) await nextTick();\n    if (performance.now() - startedAt >= INIT_TIMEOUT_MS) console.warn(\"Service worker registration timed out.\");\n    if (!this.registration || !this.registration.pushManager) return null;\n\n    while (this.vapidPublicKey === undefined) await nextTick();\n    if (this.vapidPublicKey === null) return null;\n\n    try {\n      const convertedVapidKey = urlBase64ToUint8Array(this.vapidPublicKey);\n\n      if (\n        (await this.registration.pushManager.permissionState({\n          userVisibleOnly: true,\n          applicationServerKey: convertedVapidKey\n        })) !== \"granted\"\n      )\n        return null;\n    } catch (e) {\n      return null; // Chrome can throw here complaining about userVisible if push is not right\n    }\n    const sub = await this.registration.pushManager.getSubscription();\n    if (!sub) return null;\n\n    return sub.endpoint;\n  };\n\n  toggle = async () => {\n    if (!this.registration) return;\n\n    if (this._isSubscribed) {\n      const pushSubscription = await this.registration.pushManager.getSubscription();\n      const res = await this.hubChannel.unsubscribe(pushSubscription);\n\n      if (res && res.has_remaining_subscriptions === false) {\n        pushSubscription.unsubscribe();\n      }\n    } else {\n      let pushSubscription = await this.registration.pushManager.getSubscription();\n\n      if (!pushSubscription) {\n        const convertedVapidKey = urlBase64ToUint8Array(this.vapidPublicKey);\n\n        pushSubscription = await this.registration.pushManager.subscribe({\n          userVisibleOnly: true,\n          applicationServerKey: convertedVapidKey\n        });\n      }\n\n      this.hubChannel.subscribe(pushSubscription);\n    }\n\n    this._isSubscribed = !this._isSubscribed;\n  };\n}\n","import { forEachMaterial } from \"../utils/material-utils\";\nimport qsTruthy from \"../utils/qs_truthy\";\n\nconst invaderPos = new AFRAME.THREE.Vector3();\nconst bubblePos = new AFRAME.THREE.Vector3();\nconst isDebug = qsTruthy(\"debug\");\nconst isMobileVR = AFRAME.utils.device.isMobileVR();\n\n/**\n * Updates invaders every tick, doing one per frame on mobile VR.\n * testing multiline things\n * @namespace avatar/personal-space-bubble\n * @system personal-space-bubble\n */\nAFRAME.registerSystem(\"personal-space-bubble\", {\n  schema: {\n    debug: { default: false },\n    enabled: { default: true }\n  },\n\n  init() {\n    this.invaders = [];\n    this.bubbles = [];\n    this.tickCount = 0;\n    this._updateInvaders = this._updateInvaders.bind(this);\n  },\n\n  registerBubble(bubble) {\n    this.bubbles.push(bubble);\n  },\n\n  unregisterBubble(bubble) {\n    const index = this.bubbles.indexOf(bubble);\n\n    if (index !== -1) {\n      this.bubbles.splice(index, 1);\n    }\n  },\n\n  registerInvader(invader) {\n    NAF.utils.getNetworkedEntity(invader.el).then(networkedEl => {\n      const owner = NAF.utils.getNetworkOwner(networkedEl);\n\n      if (owner !== NAF.clientId) {\n        this.invaders.push(invader);\n      }\n    });\n  },\n\n  unregisterInvader(invader) {\n    const index = this.invaders.indexOf(invader);\n\n    if (index !== -1) {\n      this.invaders.splice(index, 1);\n    }\n  },\n\n  update() {\n    for (let i = 0; i < this.bubbles.length; i++) {\n      this.bubbles[i].updateDebug();\n    }\n\n    for (let i = 0; i < this.invaders.length; i++) {\n      this.invaders[i].updateDebug();\n      if (!this.data.enabled) {\n        this.invaders[i].setInvading(false);\n      }\n    }\n\n    if (this.data.enabled) {\n      this.el.addState(\"spacebubble\");\n    } else {\n      this.el.removeState(\"spacebubble\");\n    }\n  },\n\n  tick() {\n    this._updateInvaders();\n    this.tickCount++;\n  },\n\n  _updateInvaders: (function() {\n    const tempInvasionFlags = [];\n\n    const setInvaderFlag = (i, invaders, bubble) => {\n      // Hide the invader if inside the bubble\n      const invader = invaders[i];\n      invaderPos.setFromMatrixPosition(invader.el.object3D.matrixWorld);\n\n      const distanceSquared = bubblePos.distanceToSquared(invaderPos);\n      const radiusSum = bubble.data.radius + invader.data.radius;\n\n      if (distanceSquared < radiusSum * radiusSum) {\n        tempInvasionFlags[i] = true;\n      }\n    };\n\n    const flushInvadingFlagsForIndex = (i, invaders) => {\n      if (invaders[i].invading !== tempInvasionFlags[i]) {\n        invaders[i].setInvading(tempInvasionFlags[i]);\n      }\n    };\n\n    return function() {\n      if (!this.data.enabled) return;\n      if (this.invaders.length === 0) return;\n\n      tempInvasionFlags.length = 0;\n\n      // precondition for this stuff -- the bubbles and invaders need updated world matrices.\n      // right now this is satisfied because we update the world matrices in the character controller\n      for (let i = 0; i < this.invaders.length; i++) {\n        this.invaders[i].el.object3D.updateMatrices(); // We read matrixWorld below, update matrices here\n        tempInvasionFlags[i] = false;\n      }\n\n      // Loop through all of the space bubbles (usually one)\n      for (let i = 0; i < this.bubbles.length; i++) {\n        const bubble = this.bubbles[i];\n\n        bubble.el.object3D.updateMatrices();\n        bubblePos.setFromMatrixPosition(bubble.el.object3D.matrixWorld);\n\n        if (!isMobileVR) {\n          for (let j = 0; j < this.invaders.length; j++) {\n            setInvaderFlag(j, this.invaders, bubble);\n          }\n        } else {\n          // Optimization: update one invader per frame on mobile VR\n          setInvaderFlag(this.tickCount % this.invaders.length, this.invaders, bubble);\n        }\n      }\n\n      if (!isMobileVR) {\n        for (let i = 0; i < this.invaders.length; i++) {\n          flushInvadingFlagsForIndex(i, this.invaders);\n        }\n      } else {\n        flushInvadingFlagsForIndex(this.tickCount % this.invaders.length, this.invaders);\n      }\n    };\n  })()\n});\n\nfunction createSphereGizmo(radius) {\n  const geometry = new THREE.SphereBufferGeometry(radius, 10, 10);\n  const wireframe = new THREE.WireframeGeometry(geometry);\n  const line = new THREE.LineSegments(wireframe);\n  line.material.opacity = 0.5;\n  line.material.transparent = true;\n  return line;\n}\n\n// TODO: we need to come up with a more generic way of doing this as this is very specific to our avatars.\n/**\n * Specifies a mesh associated with an invader.\n * @namespace avatar/personal-space-bubble\n * @component space-invader-mesh\n */\nAFRAME.registerComponent(\"space-invader-mesh\", {\n  schema: {\n    meshName: { type: \"string\" }\n  },\n  update() {\n    this.targetMesh = this.el.object3D.getObjectByName(this.data.meshName);\n  }\n});\n\nfunction findInvaderMesh(entity) {\n  while (entity && !(entity.components && entity.components[\"space-invader-mesh\"])) {\n    entity = entity.parentNode;\n  }\n  return entity && entity.components[\"space-invader-mesh\"].targetMesh;\n}\n\nconst DEBUG_OBJ = \"psb-debug\";\n\n/**\n * Represents an entity that can invade a personal space bubble\n * @namespace avatar/personal-space-bubble\n * @component personal-space-invader\n */\nAFRAME.registerComponent(\"personal-space-invader\", {\n  schema: {\n    radius: { type: \"number\", default: 0.1 },\n    useMaterial: { default: false },\n    debug: { default: false },\n    invadingOpacity: { default: 0.3 }\n  },\n\n  init() {\n    const system = this.el.sceneEl.systems[\"personal-space-bubble\"];\n    system.registerInvader(this);\n    if (this.data.useMaterial) {\n      const mesh = findInvaderMesh(this.el);\n      if (mesh) {\n        this.targetMesh = mesh;\n      }\n    }\n    this.invading = false;\n    this.alwaysHidden = false;\n  },\n\n  update() {\n    this.radiusSquared = this.data.radius * this.data.radius;\n    this.updateDebug();\n  },\n\n  // Allow external callers to tell this invader to always hide this element, regardless of invasion state\n  setAlwaysHidden(alwaysHidden) {\n    this.alwaysHidden = alwaysHidden;\n    this.applyInvasionToMesh(this.invading);\n  },\n\n  updateDebug() {\n    const system = this.el.sceneEl.systems[\"personal-space-bubble\"];\n    if (system.data.debug || this.data.debug) {\n      !this.el.object3DMap[DEBUG_OBJ] && this.el.setObject3D(DEBUG_OBJ, createSphereGizmo(this.data.radius));\n    } else if (this.el.object3DMap[DEBUG_OBJ]) {\n      this.el.removeObject3D(DEBUG_OBJ);\n    }\n  },\n\n  remove() {\n    this.el.sceneEl.systems[\"personal-space-bubble\"].unregisterInvader(this);\n  },\n\n  setInvading(invading) {\n    if (this.invading === invading) return;\n\n    this.applyInvasionToMesh(invading);\n    this.invading = invading;\n  },\n\n  disable() {\n    if (this.invading) {\n      this.applyInvasionToMesh(false);\n    }\n\n    this.disabled = true;\n    this.updateBoneVisibility();\n  },\n\n  enable() {\n    this.disabled = false;\n    this.applyInvasionToMesh(this.invading);\n    this.updateBoneVisibility();\n  },\n\n  updateBoneVisibility() {\n    // HACK, bone visibility typically takes a tick to update, but since we want to be able\n    // to have enable() and disable() be reflected this frame, we need to do it immediately.\n    this.el.components[\"bone-visibility\"] && this.el.components[\"bone-visibility\"].tick();\n  },\n\n  applyInvasionToMesh(invading) {\n    if (this.disabled) return;\n\n    if (this.targetMesh && this.targetMesh.material && !this.alwaysHidden) {\n      forEachMaterial(this.targetMesh, material => {\n        material.opacity = invading ? this.data.invadingOpacity : 1;\n        material.transparent = invading;\n      });\n    } else {\n      this.el.object3D.visible = !invading && !this.alwaysHidden;\n    }\n  }\n});\n\n/**\n * Represents a personal space bubble on an entity.\n * @namespace avatar/personal-space-bubble\n * @component personal-space-bubble\n */\nAFRAME.registerComponent(\"personal-space-bubble\", {\n  schema: {\n    radius: { type: \"number\", default: 0.8 },\n    debug: { default: false }\n  },\n  init() {\n    this.system.registerBubble(this);\n  },\n\n  update() {\n    this.radiusSquared = this.data.radius * this.data.radius;\n    this.updateDebug();\n  },\n\n  updateDebug() {\n    if (!isDebug) return;\n\n    if (this.system.data.debug || this.data.debug) {\n      !this.el.object3DMap[DEBUG_OBJ] && this.el.setObject3D(DEBUG_OBJ, createSphereGizmo(this.data.radius));\n    } else if (this.el.object3DMap[DEBUG_OBJ]) {\n      this.el.removeObject3D(DEBUG_OBJ);\n    }\n  },\n\n  remove() {\n    this.system.unregisterBubble(this);\n  }\n});\n","import { paths } from \"./userinput/paths\";\nconst qs = new URLSearchParams(location.search);\nconst IDLE_TIMEOUT_MS = (parseInt(qs.get(\"idle_timeout\"), 10) || 2 * 60 * 60) * 1000;\nconst INPUT_CHECK_INTERVAL_MS = 1000;\n\nconst CHARACTER_ACCELERATION_PATH = paths.actions.characterAcceleration;\nconst BASIC_ACTIVITY_PATHS = [\n  paths.actions.startGazeTeleport,\n  paths.actions.rightHand.startTeleport,\n  paths.actions.leftHand.startTeleport,\n  paths.actions.snapRotateRight,\n  paths.actions.snapRotateLeft,\n  paths.actions.cursor.right.grab,\n  paths.actions.cursor.left.grab,\n  paths.actions.rightHand.grab,\n  paths.actions.leftHand.grab,\n  paths.actions.angularVelocity\n];\n\nAFRAME.registerSystem(\"idle-detector\", {\n  init() {\n    this.resetTimeout = this.resetTimeout.bind(this);\n    this.idleTimeout = null;\n    this.lastInputCheck = 0;\n\n    const events = [\"click\", \"pointerdown\", \"touchstart\", \"keyup\"];\n\n    for (const event of events) {\n      window.addEventListener(event, this.resetTimeout);\n    }\n\n    this.resetTimeout();\n  },\n  resetTimeout() {\n    if (this.idleTimeout) clearTimeout(this.idleTimeout);\n    this.idleTimeout = setTimeout(this.onIdleTimeout, IDLE_TIMEOUT_MS);\n    window.dispatchEvent(new CustomEvent(\"activity_detected\"));\n  },\n  onIdleTimeout() {\n    window.dispatchEvent(new CustomEvent(\"idle_detected\"));\n  },\n  tick(time) {\n    if (time - this.lastInputCheck < INPUT_CHECK_INTERVAL_MS) return;\n\n    const userinput = this.el.systems.userinput;\n\n    let basicActivity = false;\n    for (const activityPath of BASIC_ACTIVITY_PATHS) {\n      basicActivity = basicActivity || !!userinput.get(activityPath);\n    }\n\n    const characterAcceleration = userinput.get(CHARACTER_ACCELERATION_PATH);\n\n    const active =\n      basicActivity ||\n      !!(characterAcceleration && characterAcceleration[0]) ||\n      !!(characterAcceleration && characterAcceleration[1]);\n\n    if (active) {\n      this.resetTimeout();\n    }\n  },\n  remove() {}\n});\n","import { waitForDOMContentLoaded } from \"../utils/async-utils\";\n\nconst CAMERA_UPDATE_FRAME_DELAY = 10; // Update one camera every N'th frame\n\n// Used for tracking and managing camera tools in the scene\nAFRAME.registerSystem(\"camera-tools\", {\n  init() {\n    this.cameraEls = [];\n    this.cameraUpdateCount = 0;\n    this.ticks = 0;\n    this.updateMyCamera = this.updateMyCamera.bind(this);\n\n    waitForDOMContentLoaded().then(() => {\n      const playerModelEl = document.querySelector(\"#avatar-rig .model\");\n      playerModelEl.addEventListener(\"model-loading\", () => (this.playerHead = null));\n      playerModelEl.addEventListener(\"model-loaded\", this.updatePlayerHead.bind(this));\n      this.updatePlayerHead();\n      this.updateMyCamera();\n    });\n  },\n\n  updatePlayerHead() {\n    const headEl = document.getElementById(\"avatar-head\");\n    this.playerHead = headEl && headEl.object3D;\n  },\n\n  register(el) {\n    this.cameraEls.push(el);\n    el.addEventListener(\"ownership-changed\", this.updateMyCamera);\n    this.updateMyCamera();\n  },\n\n  deregister(el) {\n    this.cameraEls = this.cameraEls.filter(c => c !== el);\n    el.removeEventListener(\"ownership-changed\", this.updateMyCamera);\n    this.updateMyCamera();\n  },\n\n  getMyCamera() {\n    return this.myCamera;\n  },\n\n  ifMyCameraRenderingViewfinder(f) {\n    if (!this.myCamera) return;\n\n    const myCameraTool = this.myCamera.components[\"camera-tool\"];\n\n    if (myCameraTool && myCameraTool.showCameraViewfinder && myCameraTool.camera) {\n      f(myCameraTool);\n    }\n  },\n\n  updateMyCamera() {\n    if (!this.cameraEls) {\n      this.myCamera = null;\n    } else {\n      this.myCamera = this.cameraEls.find(NAF.utils.isMine);\n    }\n  },\n\n  tick() {\n    this.ticks++;\n\n    // We update at most one camera viewfinder per frame.\n    if (this.ticks % CAMERA_UPDATE_FRAME_DELAY === 0) {\n      if (this.cameraEls.length == 0) return;\n\n      this.cameraUpdateCount++;\n      this.cameraEls[this.cameraUpdateCount % this.cameraEls.length].components[\"camera-tool\"].updateViewfinder();\n    }\n  }\n});\n","import { paths } from \"../paths\";\n\n// TODO: Where do these values (500, 10, 2) come from?\nconst modeMod = {\n  [WheelEvent.DOM_DELTA_PIXEL]: 500,\n  [WheelEvent.DOM_DELTA_LINE]: 10,\n  [WheelEvent.DOM_DELTA_PAGE]: 2\n};\n\nconst isInModal = (() => {\n  let uiRoot = null;\n\n  return function() {\n    if (!uiRoot) {\n      uiRoot = document.querySelector(\".ui-root\");\n    }\n\n    return uiRoot && uiRoot.classList.contains(\"in-modal-or-overlay\");\n  };\n})();\n\nexport class MouseDevice {\n  constructor() {\n    this.events = [];\n    this.coords = [0, 0]; // normalized screenspace coordinates in [(-1, 1), (-1, 1)]\n    this.movementXY = [0, 0]; // deltas\n    this.buttonLeft = false;\n    this.buttonRight = false;\n    this.buttonMiddle = false;\n    this.wheel = 0; // delta\n\n    const queueEvent = this.events.push.bind(this.events);\n    const canvas = document.querySelector(\"canvas\");\n    canvas.addEventListener(\"contextmenu\", e => {\n      if (e.button === 2) {\n        e.preventDefault();\n        e.stopPropagation();\n        return false;\n      }\n    });\n    [\"mousedown\", \"wheel\"].map(x => canvas.addEventListener(x, queueEvent, { passive: false }));\n    [\"mousemove\", \"mouseup\"].map(x => window.addEventListener(x, queueEvent, { passive: false }));\n\n    document.addEventListener(\n      \"wheel\",\n      e => {\n        // Do not capture wheel events if they are being sent to an modal/overlay\n        if (!isInModal() && !window.APP.preferenceScreenIsVisible) {\n          e.preventDefault();\n        }\n      },\n      { passive: false }\n    );\n  }\n\n  process(event) {\n    if (event.type === \"wheel\") {\n      this.wheel += (event.deltaX + event.deltaY) / modeMod[event.deltaMode];\n      return true;\n    }\n\n    const left = event.button === 0;\n    const middle = event.button === 1;\n    const right = event.button === 2;\n    this.coords[0] = (event.clientX / window.innerWidth) * 2 - 1;\n    this.coords[1] = -(event.clientY / window.innerHeight) * 2 + 1;\n    this.movementXY[0] += event.movementX;\n    this.movementXY[1] += event.movementY;\n    if (event.type === \"mousedown\" && left) {\n      this.mouseDownLeftThisFrame = true;\n      this.buttonLeft = true;\n    } else if (event.type === \"mousedown\" && right) {\n      this.mouseDownRightThisFrame = true;\n      this.buttonRight = true;\n    } else if (event.type === \"mousedown\" && middle) {\n      this.mouseDownMiddleThisFrame = true;\n      this.buttonMiddle = true;\n    } else if (event.type === \"mouseup\" && left) {\n      if (this.mouseDownLeftThisFrame) {\n        return false;\n      }\n      this.buttonLeft = false;\n    } else if (event.type === \"mouseup\" && right) {\n      if (this.mouseDownRightThisFrame) {\n        return false;\n      }\n      this.buttonRight = false;\n    } else if (event.type === \"mouseup\" && middle) {\n      if (this.mouseDownMiddleThisFrame) {\n        return false;\n      }\n      this.buttonMiddle = false;\n    }\n    return true;\n  }\n\n  write(frame) {\n    this.movementXY[0] = 0; // deltas\n    this.movementXY[1] = 0; // deltas\n    this.wheel = 0; // delta\n\n    this.didStopProcessingEarly = false;\n    this.mouseDownLeftThisFrame = false;\n    this.mouseDownRightThisFrame = false;\n    this.mouseDownMiddleThisFrame = false;\n\n    for (let i = 0; i < this.events.length; i++) {\n      const event = this.events[i];\n      if (!this.process(event)) {\n        this.didStopProcessingEarly = true;\n        this.events.splice(0, i);\n        break;\n      }\n    }\n\n    if (!this.didStopProcessingEarly) {\n      this.events.length = 0;\n    }\n\n    frame.setVector2(paths.device.mouse.coords, this.coords[0], this.coords[1]);\n    frame.setVector2(paths.device.mouse.movementXY, this.movementXY[0], this.movementXY[1]);\n    frame.setValueType(paths.device.mouse.buttonLeft, this.buttonLeft);\n    frame.setValueType(paths.device.mouse.buttonRight, this.buttonRight);\n    frame.setValueType(paths.device.mouse.buttonMiddle, this.buttonMiddle);\n    frame.setValueType(paths.device.mouse.wheel, this.wheel);\n  }\n}\n\nwindow.oncontextmenu = e => {\n  if (!isInModal()) {\n    e.preventDefault();\n  }\n};\n","// You might prefer to use this over a Set because iterating over a set allocates memory\nexport function ArrayBackedSet(initialItems) {\n  return {\n    items: initialItems || [],\n    has(item) {\n      return this.items.indexOf(item) !== -1;\n    },\n    add(item) {\n      if (!this.has(item)) {\n        this.items.push(item);\n      }\n    },\n    delete(item) {\n      const index = this.items.indexOf(item);\n      if (index !== -1) {\n        this.items[index] = this.items[this.items.length - 1];\n        this.items.pop();\n      }\n    },\n    clear() {\n      this.items.length = 0;\n    }\n  };\n}\n","import { paths } from \"../paths\";\nimport { ArrayBackedSet } from \"../array-backed-set\";\nexport class KeyboardDevice {\n  constructor() {\n    this.seenKeys = new ArrayBackedSet();\n    this.keys = {};\n    this.events = [];\n\n    [\"keydown\", \"keyup\"].map(x =>\n      document.addEventListener(x, e => {\n        if (!e.key) return;\n        this.events.push(e);\n\n        // Block browser hotkeys for chat command, media browser and freeze\n        if (\n          (e.type === \"keydown\" &&\n            e.key === \"/\" &&\n            ![\"TEXTAREA\", \"INPUT\"].includes(document.activeElement && document.activeElement.nodeName) &&\n            !(document.activeElement && document.activeElement.contentEditable === \"true\")) ||\n          (e.ctrlKey &&\n            (e.key === \"1\" ||\n              e.key === \"2\" ||\n              e.key === \"3\" ||\n              e.key === \"4\" ||\n              e.key === \"5\" ||\n              e.key === \"6\" ||\n              e.key === \"7\" ||\n              e.key === \"8\" ||\n              e.key === \"9\" ||\n              e.key === \"0\")) ||\n          (e.key === \"Tab\" && !(window.APP && window.APP.preferenceScreenIsVisible))\n        ) {\n          e.preventDefault();\n          return false;\n        }\n      })\n    );\n    [\"blur\"].map(x => window.addEventListener(x, this.events.push.bind(this.events)));\n  }\n\n  write(frame) {\n    for (let i = 0; i < this.events.length; i++) {\n      const event = this.events[i];\n      if (event.type === \"blur\") {\n        this.keys = {};\n        this.seenKeys.clear();\n      } else {\n        const key = event.key.toLowerCase();\n        this.keys[key] = event.type === \"keydown\";\n        this.seenKeys.add(key);\n      }\n    }\n\n    this.events.length = 0;\n\n    for (let i = 0; i < this.seenKeys.items.length; i++) {\n      const key = this.seenKeys.items[i];\n      const path = paths.device.keyboard.key(key);\n      frame.setValueType(path, this.keys[key]);\n    }\n  }\n}\n","import { paths } from \"../paths\";\n\nexport class HudDevice {\n  constructor() {\n    this.events = [];\n    document.querySelector(\"a-scene\").addEventListener(\"penButtonPressed\", this.events.push.bind(this.events));\n  }\n\n  write(frame) {\n    frame.setValueType(paths.device.hud.penButton, this.events.length !== 0);\n    while (this.events.length) {\n      this.events.pop();\n    }\n  }\n}\n","import { paths } from \"../paths\";\n\nexport class XboxControllerDevice {\n  constructor(gamepad) {\n    this.gamepad = gamepad;\n    this.buttonMap = [\n      { name: \"a\", buttonId: 0 },\n      { name: \"b\", buttonId: 1 },\n      { name: \"x\", buttonId: 2 },\n      { name: \"y\", buttonId: 3 },\n      { name: \"leftBumper\", buttonId: 4 },\n      { name: \"rightBumper\", buttonId: 5 },\n      { name: \"leftTrigger\", buttonId: 6 },\n      { name: \"rightTrigger\", buttonId: 7 },\n      { name: \"back\", buttonId: 8 },\n      { name: \"start\", buttonId: 9 },\n      { name: \"leftJoystick\", buttonId: 10 },\n      { name: \"rightJoystick\", buttonId: 11 },\n      { name: \"dpadUp\", buttonId: 12 },\n      { name: \"dpadDown\", buttonId: 13 },\n      { name: \"dpadLeft\", buttonId: 14 },\n      { name: \"dpadRight\", buttonId: 15 }\n    ];\n    this.axisMap = [\n      { name: \"leftJoystickHorizontal\", axisId: 0 },\n      { name: \"leftJoystickVertical\", axisId: 1 },\n      { name: \"rightJoystickHorizontal\", axisId: 2 },\n      { name: \"rightJoystickVertical\", axisId: 3 }\n    ];\n  }\n\n  write(frame) {\n    this.gamepad = navigator.getGamepads()[this.gamepad.index];\n    if (this.gamepad.connected) {\n      const xboxPaths = paths.device.xbox;\n      this.buttonMap.forEach(b => {\n        const path = xboxPaths.button(b.name);\n        const button = this.gamepad.buttons[b.buttonId];\n        frame.setValueType(path.pressed, !!button.pressed);\n        frame.setValueType(path.touched, !!button.touched);\n        frame.setValueType(path.value, button.value);\n      });\n      frame.setValueType(xboxPaths.axesSum, 0);\n      this.axisMap.forEach(axis => {\n        frame.setValueType(xboxPaths.axis(axis.name), this.gamepad.axes[axis.axisId]);\n        frame.setValueType(xboxPaths.axesSum, frame.get(xboxPaths.axesSum) + Math.abs(this.gamepad.axes[axis.axisId]));\n      });\n\n      if (this.gamepad.hapticActuators && this.gamepad.hapticActuators[0]) {\n        frame.setValueType(paths.haptics.actuators[this.gamepad.hand], this.gamepad.hapticActuators[0]);\n      }\n    }\n  }\n}\n","const THREE = typeof window !== \"undefined\" && window.THREE;\nconst Vector3 = (THREE && THREE.Vector3) || function() {};\nconst Quaternion = (THREE && THREE.Quaternion) || function() {};\nconst forward = typeof window !== \"undefined\" && window.THREE && new THREE.Vector3(0, 0, -1);\nexport function Pose() {\n  return {\n    position: new Vector3(),\n    direction: new Vector3(),\n    orientation: new Quaternion(),\n    fromOriginAndDirection: function(origin, direction) {\n      this.position = origin;\n      this.direction = direction;\n      this.orientation = this.orientation.setFromUnitVectors(forward, direction);\n      return this;\n    },\n    fromCameraProjection: function(camera, normalizedX, normalizedY) {\n      this.position.setFromMatrixPosition(camera.matrixWorld);\n      this.direction\n        .set(normalizedX, normalizedY, 0.5)\n        .unproject(camera)\n        .sub(this.position)\n        .normalize();\n      this.fromOriginAndDirection(this.position, this.direction);\n      return this;\n    },\n    copy: function(pose) {\n      this.position.copy(pose.position);\n      this.direction.copy(pose.direction);\n      this.orientation.copy(pose.orientation);\n    }\n  };\n}\n","// Vector from eyes to elbow (divided by user height).\nconst EYES_TO_ELBOW = { x: 0.175, y: -0.3, z: -0.03 };\n// Vector from eyes to elbow (divided by user height).\nconst FOREARM = { x: 0, y: 0, z: -0.175 };\n\nexport const applyArmModel = (function() {\n  const controllerEuler = new THREE.Euler();\n  const deltaControllerPosition = new THREE.Vector3();\n  const controllerQuaternion = new THREE.Quaternion();\n  const controllerPosition = new THREE.Vector3();\n  return function applyArmModel(gamepadPose, hand, headObject3D, userHeight) {\n    headObject3D.updateMatrices();\n    controllerPosition.copy(headObject3D.position);\n    controllerPosition.y = controllerPosition.y - userHeight;\n    deltaControllerPosition.set(\n      EYES_TO_ELBOW.x * (hand === \"left\" ? -1 : hand === \"right\" ? 1 : 0),\n      EYES_TO_ELBOW.y,\n      EYES_TO_ELBOW.z\n    );\n    deltaControllerPosition.multiplyScalar(userHeight);\n    deltaControllerPosition.applyAxisAngle(headObject3D.up, headObject3D.rotation.y);\n    controllerPosition.add(deltaControllerPosition);\n    deltaControllerPosition.set(FOREARM.x, FOREARM.y, FOREARM.z);\n    deltaControllerPosition.multiplyScalar(userHeight);\n    controllerQuaternion.fromArray(gamepadPose.orientation);\n    controllerEuler.setFromQuaternion(controllerQuaternion);\n    controllerEuler.set(controllerEuler.x, controllerEuler.y, 0);\n    deltaControllerPosition.applyEuler(controllerEuler);\n    controllerPosition.add(deltaControllerPosition);\n    return controllerPosition;\n  };\n})();\n","export const copySittingToStandingTransform = function copySittingToStandingTransform(matrix) {\n  navigator.getVRDisplays &&\n    navigator.getVRDisplays().then(displays => {\n      if (displays[0] && displays[0].stageParameters && displays[0].stageParameters.sittingToStandingTransform) {\n        matrix.fromArray(displays[0].stageParameters.sittingToStandingTransform);\n      } else {\n        setTimeout(() => {\n          copySittingToStandingTransform(matrix);\n        }, 1000); // Try again when the display is ready\n      }\n    });\n};\n","import { paths } from \"../paths\";\nimport { Pose } from \"../pose\";\nimport { applyArmModel } from \"../arm-model.js\";\nimport { copySittingToStandingTransform } from \"./copy-sitting-to-standing-transform\";\nimport { waitForDOMContentLoaded } from \"../../../utils/async-utils\";\n\nconst ONES = new THREE.Vector3(1, 1, 1);\nconst m = new THREE.Matrix4();\n\nconst TOUCHPAD = paths.device.oculusgo.touchpad;\nconst TRIGGER = paths.device.oculusgo.trigger;\n\nexport class OculusGoControllerDevice {\n  constructor(gamepad) {\n    this.gamepad = gamepad;\n    this.rayObjectRotation = new THREE.Quaternion();\n    this.pose = new Pose();\n    this.q = new THREE.Quaternion();\n    this.sittingToStandingMatrix = new THREE.Matrix4().makeTranslation(0, 1.6, 0);\n    copySittingToStandingTransform(this.sittingToStandingMatrix);\n    this.matrix = new THREE.Matrix4();\n    this.orientation = new THREE.Quaternion();\n\n    // TODO ideally we should just be getting pose from the gamepad\n    // TODO if controller is set to left hand, we still use right hand query here\n    // because otherwise things break.\n    waitForDOMContentLoaded().then(() => {\n      this.rayObject = document.querySelector(\"#player-right-controller\").object3D;\n      this.headObject3D = document.querySelector(\"#avatar-pov-node\").object3D;\n    });\n\n    navigator.getGamepads();\n  }\n\n  write(frame) {\n    if (!this.rayObject || !this.headObject3D) return;\n\n    // Have to call navigator.getGamepads() in order for the gamepad object to update.\n    navigator.getGamepads();\n    if (this.gamepad.connected) {\n      frame.setValueType(TOUCHPAD.axisX, this.gamepad.axes[0]);\n      frame.setValueType(TOUCHPAD.axisY, this.gamepad.axes[1]);\n      frame.setValueType(TOUCHPAD.pressed, this.gamepad.buttons[0].pressed);\n      frame.setValueType(TOUCHPAD.touched, this.gamepad.buttons[0].touched);\n      frame.setValueType(TOUCHPAD.value, this.gamepad.buttons[0].value);\n      frame.setValueType(TRIGGER.pressed, this.gamepad.buttons[1].pressed);\n      frame.setValueType(TRIGGER.touched, this.gamepad.buttons[1].touched);\n      frame.setValueType(TRIGGER.value, this.gamepad.buttons[1].value);\n\n      this.rayObject.updateMatrices();\n      this.rayObject.getWorldQuaternion(this.q);\n      frame.setValueType(paths.actions.rayObjectRotation, this.q);\n      const rayMatrixWorld = this.rayObject.matrixWorld;\n      this.rayObjectRotation.setFromRotationMatrix(m.extractRotation(this.rayObject.matrixWorld));\n\n      this.pose.position.setFromMatrixPosition(rayMatrixWorld);\n      this.pose.direction.set(0, 0, -1).applyQuaternion(this.rayObjectRotation);\n      this.pose.fromOriginAndDirection(this.pose.position, this.pose.direction);\n      frame.setPose(paths.device.oculusgo.pose, this.pose);\n\n      if (this.gamepad.pose.orientation) {\n        // TODO if controller is set to left hand, we still draw right hand until\n        // bindings are overhauled to handle primary/secondary hands.\n        frame.setMatrix4(\n          paths.device.oculusgo.matrix,\n          this.matrix\n            .compose(\n              applyArmModel(this.gamepad.pose, this.gamepad.hand, this.headObject3D, 1.6),\n              this.orientation.fromArray(this.gamepad.pose.orientation),\n              ONES\n            )\n            .premultiply(this.sittingToStandingMatrix)\n        );\n      }\n    }\n  }\n}\n","import { paths } from \"../paths\";\nimport { Pose } from \"../pose\";\nimport { applyArmModel } from \"../arm-model.js\";\nimport { copySittingToStandingTransform } from \"./copy-sitting-to-standing-transform\";\n\nconst ONES = new THREE.Vector3(1, 1, 1);\n\nconst TOUCHPAD = paths.device.gearVRController.button(\"touchpad\");\nconst TRIGGER = paths.device.gearVRController.button(\"trigger\");\nconst TOUCHPAD_X = paths.device.gearVRController.axis(\"touchpadX\");\nconst TOUCHPAD_Y = paths.device.gearVRController.axis(\"touchpadY\");\n\nconst m = new THREE.Matrix4();\n\nexport class GearVRControllerDevice {\n  constructor(gamepad) {\n    this.gamepad = gamepad;\n    this.buttonMap = [{ name: \"touchpad\", buttonId: 0 }, { name: \"trigger\", buttonId: 1 }];\n    this.axisMap = [{ name: \"touchpadX\", axisId: 0 }, { name: \"touchpadY\", axisId: 1 }];\n\n    this.rayObjectRotation = new THREE.Quaternion();\n    this.selector = `#player-${gamepad.hand}-controller`;\n    this.pose = new Pose();\n    this.sittingToStandingMatrix = new THREE.Matrix4().makeTranslation(0, 1.6, 0);\n    copySittingToStandingTransform(this.sittingToStandingMatrix);\n\n    this.matrix = new THREE.Matrix4();\n    this.orientation = new THREE.Quaternion();\n  }\n\n  write(frame) {\n    // Chrome requires a call to getGamepads() for the gamepad state to update.\n    navigator.getGamepads();\n    if (this.gamepad.connected) {\n      const touchpad = this.gamepad.buttons[0];\n      frame.setValueType(TOUCHPAD.pressed, !!touchpad.pressed);\n      frame.setValueType(TOUCHPAD.touched, !!touchpad.touched);\n      frame.setValueType(TOUCHPAD.value, !!touchpad.value);\n\n      const trigger = this.gamepad.buttons[1];\n      frame.setValueType(TRIGGER.pressed, !!trigger.pressed);\n      frame.setValueType(TRIGGER.touched, !!trigger.touched);\n      frame.setValueType(TRIGGER.value, !!trigger.value);\n\n      frame.setValueType(TOUCHPAD_X, this.gamepad.axes[0]);\n      frame.setValueType(TOUCHPAD_Y, this.gamepad.axes[1]);\n\n      // TODO we should just be getting pose from the gamepad\n      if (!this.rayObject) {\n        this.rayObject = document.querySelector(this.selector).object3D;\n      }\n      this.rayObject.updateMatrixWorld();\n      this.rayObjectRotation.setFromRotationMatrix(m.extractRotation(this.rayObject.matrixWorld));\n      this.pose.position.setFromMatrixPosition(this.rayObject.matrixWorld);\n      this.pose.direction.set(0, 0, -1).applyQuaternion(this.rayObjectRotation);\n      this.pose.fromOriginAndDirection(this.pose.position, this.pose.direction);\n      frame.setPose(paths.device.gearVRController.pose, this.pose);\n      this.headObject3D = this.headObject3D || document.querySelector(\"#avatar-pov-node\").object3D;\n      if (this.gamepad.pose.orientation) {\n        frame.setMatrix4(\n          paths.device.gearVRController.matrix,\n          this.matrix\n            .compose(\n              applyArmModel(this.gamepad.pose, this.gamepad.hand, this.headObject3D, 1.6),\n              this.orientation.fromArray(this.gamepad.pose.orientation),\n              ONES\n            )\n            .premultiply(this.sittingToStandingMatrix)\n        );\n      }\n    }\n  }\n}\n","import { paths } from \"../paths\";\nimport { Pose } from \"../pose\";\nimport { copySittingToStandingTransform } from \"./copy-sitting-to-standing-transform\";\n\nconst ONES = new THREE.Vector3(1, 1, 1);\n\nexport const leftOculusTouchButtonMap = [\n  { name: \"thumbStick\", buttonId: 0 },\n  { name: \"trigger\", buttonId: 1 },\n  { name: \"grip\", buttonId: 2 },\n  { name: \"x\", buttonId: 3 },\n  { name: \"y\", buttonId: 4 }\n];\nexport const rightOculusTouchButtonMap = [\n  { name: \"thumbStick\", buttonId: 0 },\n  { name: \"trigger\", buttonId: 1 },\n  { name: \"grip\", buttonId: 2 },\n  { name: \"a\", buttonId: 3 },\n  { name: \"b\", buttonId: 4 }\n];\n\nconst LEFT_HAND_OFFSET = new THREE.Matrix4().makeTranslation(-0.025, -0.03, 0.1);\nconst RIGHT_HAND_OFFSET = new THREE.Matrix4().makeTranslation(0.025, -0.03, 0.1);\n\nconst m = new THREE.Matrix4();\n\nexport class OculusTouchControllerDevice {\n  constructor(gamepad) {\n    this.rayObjectRotation = new THREE.Quaternion();\n\n    // wake the gamepad api up. otherwise it does not report touch controllers.\n    // in chrome it still won't unless you enter vr.\n    navigator.getVRDisplays();\n\n    const buttonMaps = {\n      left: leftOculusTouchButtonMap,\n      right: rightOculusTouchButtonMap\n    };\n\n    const devicePaths = {\n      left: paths.device.leftOculusTouch,\n      right: paths.device.rightOculusTouch\n    };\n\n    this.gamepad = gamepad;\n    this.pose = new Pose();\n    this.buttonMap = buttonMaps[gamepad.hand];\n    this.axisMap = [{ name: \"joyX\", axisId: 0 }, { name: \"joyY\", axisId: 1 }];\n    this.sittingToStandingMatrix = new THREE.Matrix4().makeTranslation(0, 1.6, 0);\n    copySittingToStandingTransform(this.sittingToStandingMatrix);\n    this.matrix = new THREE.Matrix4();\n    this.path = devicePaths[gamepad.hand];\n    this.selector = `#player-${gamepad.hand}-controller`;\n\n    this.position = new THREE.Vector3();\n    this.orientation = new THREE.Quaternion();\n    this.handOffset = this.gamepad.hand === \"left\" ? LEFT_HAND_OFFSET : RIGHT_HAND_OFFSET;\n  }\n\n  write(frame) {\n    if (!this.gamepad) return;\n    this.gamepad = navigator.getGamepads()[this.gamepad.index];\n    if (!this.gamepad || !this.gamepad.connected) return;\n\n    this.buttonMap.forEach(b => {\n      const path = this.path.button(b.name);\n      const button = this.gamepad.buttons[b.buttonId];\n      frame.setValueType(path.pressed, !!button.pressed);\n      frame.setValueType(path.touched, !!button.touched);\n      frame.setValueType(path.value, button.value);\n    });\n    frame.setValueType(this.path.axesSum, 0);\n    this.axisMap.forEach(axis => {\n      frame.setValueType(this.path.axis(axis.name), this.gamepad.axes[axis.axisId]);\n      frame.setValueType(this.path.axesSum, frame.get(this.path.axesSum) + Math.abs(this.gamepad.axes[axis.axisId]));\n    });\n\n    this.rayObject = this.rayObject || document.querySelector(this.selector).object3D;\n    this.rayObject.updateMatrixWorld();\n    this.rayObjectRotation.setFromRotationMatrix(m.extractRotation(this.rayObject.matrixWorld));\n    this.pose.position.setFromMatrixPosition(this.rayObject.matrixWorld);\n    this.pose.direction.set(0, 0, -1).applyQuaternion(this.rayObjectRotation);\n    this.pose.orientation.copy(this.rayObjectRotation);\n\n    frame.setPose(this.path.pose, this.pose);\n    if (this.gamepad.pose.position && this.gamepad.pose.orientation) {\n      frame.setMatrix4(\n        this.path.matrix,\n        this.matrix\n          .compose(\n            this.position.fromArray(this.gamepad.pose.position),\n            this.orientation.fromArray(this.gamepad.pose.orientation),\n            ONES\n          )\n          .premultiply(this.sittingToStandingMatrix)\n          .multiply(this.handOffset)\n      );\n    }\n    if (this.gamepad.hapticActuators && this.gamepad.hapticActuators[0]) {\n      frame.setValueType(paths.haptics.actuators[this.gamepad.hand], this.gamepad.hapticActuators[0]);\n    }\n  }\n}\n","import { paths } from \"../paths\";\nimport { Pose } from \"../pose\";\nimport { applyArmModel } from \"../arm-model\";\nimport { copySittingToStandingTransform } from \"./copy-sitting-to-standing-transform\";\n\nconst ONES = new THREE.Vector3(1, 1, 1);\nconst HAND_OFFSET = new THREE.Matrix4().makeTranslation(0, 0, -0.04);\nconst m = new THREE.Matrix4();\n\nconst TOUCHPAD = paths.device.daydream.button(\"touchpad\");\nconst TOUCHPAD_X = paths.device.daydream.axis(\"touchpadX\");\nconst TOUCHPAD_Y = paths.device.daydream.axis(\"touchpadY\");\nconst POSE = paths.device.daydream.pose;\nconst MATRIX = paths.device.daydream.matrix;\n\nexport class DaydreamControllerDevice {\n  constructor(gamepad) {\n    this.gamepad = gamepad;\n\n    this.rayObjectRotation = new THREE.Quaternion();\n    this.selector = `#player-${gamepad.hand || \"right\"}-controller`;\n    this.pose = new Pose();\n    this.sittingToStandingMatrix = new THREE.Matrix4().makeTranslation(0, 1.6, 0);\n    copySittingToStandingTransform(this.sittingToStandingMatrix);\n    this.matrix = new THREE.Matrix4();\n    this.orientation = new THREE.Quaternion();\n  }\n\n  write(frame) {\n    this.gamepad = navigator.getGamepads()[0];\n    if (this.gamepad && this.gamepad.connected) {\n      const button = this.gamepad.buttons[0];\n      frame.setValueType(TOUCHPAD.pressed, !!button.pressed);\n      frame.setValueType(TOUCHPAD.touched, !!button.touched);\n      frame.setValueType(TOUCHPAD.value, !!button.value);\n\n      frame.setValueType(TOUCHPAD_X, this.gamepad.axes[0]);\n      frame.setValueType(TOUCHPAD_Y, this.gamepad.axes[1]);\n\n      // TODO ideally we should just be getting pose from the gamepad\n      if (!this.rayObject) {\n        this.rayObject = document.querySelector(this.selector).object3D;\n      }\n      this.rayObject.updateMatrixWorld();\n      this.rayObjectRotation.setFromRotationMatrix(m.extractRotation(this.rayObject.matrixWorld));\n      this.pose.position.setFromMatrixPosition(this.rayObject.matrixWorld);\n      this.pose.direction.set(0, 0, -1).applyQuaternion(this.rayObjectRotation);\n      this.pose.fromOriginAndDirection(this.pose.position, this.pose.direction);\n      frame.setPose(POSE, this.pose);\n\n      this.headObject3D = this.headObject3D || document.querySelector(\"#avatar-pov-node\").object3D;\n\n      if (this.gamepad.pose.orientation) {\n        frame.setMatrix4(\n          MATRIX,\n          this.matrix\n            .compose(\n              applyArmModel(this.gamepad.pose, this.gamepad.hand, this.headObject3D, 1.6),\n              this.orientation.fromArray(this.gamepad.pose.orientation),\n              ONES\n            )\n            .premultiply(this.sittingToStandingMatrix)\n            .multiply(HAND_OFFSET)\n        );\n      }\n    }\n  }\n}\n","import { paths } from \"../paths\";\nimport { Pose } from \"../pose\";\nimport { copySittingToStandingTransform } from \"./copy-sitting-to-standing-transform\";\n\nconst ONES = new THREE.Vector3(1, 1, 1);\nconst HAND_OFFSET = new THREE.Matrix4().compose(\n  new THREE.Vector3(0, 0, 0.13),\n  new THREE.Quaternion().setFromEuler(new THREE.Euler(-40 * THREE.Math.DEG2RAD, 0, 0)),\n  new THREE.Vector3(1, 1, 1)\n);\nconst RAY_ROTATION = new THREE.Quaternion();\nconst m = new THREE.Matrix4();\n\nexport class ViveControllerDevice {\n  constructor(gamepad) {\n    // wake the gamepad api up. otherwise it does not report touch controllers.\n    // in chrome it still won't unless you enter vr.\n    navigator.getVRDisplays();\n    this.gamepad = gamepad;\n\n    if (this.gamepad.id === \"OpenVR Cosmos\") {\n      RAY_ROTATION.setFromAxisAngle(new THREE.Vector3(1, 0, 0), -Math.PI / 12);\n      this.buttonMap = [\n        { name: \"trigger\", buttonId: 0 },\n        { name: \"grip\", buttonId: 1 },\n        { name: \"primary\", buttonId: 2 },\n        { name: \"secondary\", buttonId: 3 },\n        { name: \"joystick\", buttonId: 4 },\n        { name: \"bumper\", buttonId: 5 }\n      ];\n      this.axisMap = [{ name: \"joyX\", axisId: 0 }, { name: \"joyY\", axisId: 1 }];\n    } else if (this.gamepad.id === \"HTC Vive Focus Plus Controller\") {\n      RAY_ROTATION.setFromAxisAngle(new THREE.Vector3(1, 0, 0), Math.PI / 15);\n      this.buttonMap = [\n        { name: \"touchpad\", buttonId: 0 },\n        { name: \"trigger\", buttonId: 1 },\n        { name: \"grip\", buttonId: 2 }\n      ];\n      this.axisMap = [{ name: \"touchX\", axisId: 0 }, { name: \"touchY\", axisId: 1 }];\n    } else if (this.gamepad.axes.length === 4) {\n      RAY_ROTATION.setFromAxisAngle(new THREE.Vector3(1, 0, 0), -Math.PI / 12);\n      this.buttonMap = [\n        { name: \"touchpad\", buttonId: 0 },\n        { name: \"trigger\", buttonId: 1 },\n        { name: \"grip\", buttonId: 2 },\n        { name: \"primary\", buttonId: 3 },\n        { name: \"secondary\", buttonId: 4 },\n        { name: \"joystick\", buttonId: 5 },\n        { name: \"index\", buttonId: 6 },\n        { name: \"middle\", buttonId: 7 },\n        { name: \"ring\", buttonId: 8 },\n        { name: \"pinky\", buttonId: 9 }\n      ];\n      this.axisMap = [\n        { name: \"touchX\", axisId: 0 },\n        { name: \"touchY\", axisId: 1 },\n        { name: \"joyX\", axisId: 2 },\n        { name: \"joyY\", axisId: 3 }\n      ];\n    } else {\n      RAY_ROTATION.setFromAxisAngle(new THREE.Vector3(1, 0, 0), -Math.PI / 12);\n      this.buttonMap = [\n        { name: \"touchpad\", buttonId: 0 },\n        { name: \"trigger\", buttonId: 1 },\n        { name: \"grip\", buttonId: 2 },\n        { name: \"primary\", buttonId: 3 }\n      ];\n      this.axisMap = [{ name: \"touchX\", axisId: 0 }, { name: \"touchY\", axisId: 1 }];\n    }\n\n    this.pose = new Pose();\n    this.rayObjectRotation = new THREE.Quaternion();\n    this.path = paths.device.vive[gamepad.hand || \"right\"];\n    this.sittingToStandingMatrix = new THREE.Matrix4().makeTranslation(0, 1.6, 0);\n    copySittingToStandingTransform(this.sittingToStandingMatrix);\n\n    this.matrix = new THREE.Matrix4();\n    this.position = new THREE.Vector3();\n    this.orientation = new THREE.Quaternion();\n  }\n\n  write(frame) {\n    const gamepads = navigator.getGamepads();\n    if (gamepads.length < this.gamepad.index + 1) {\n      //workaround for: https://bugzilla.mozilla.org/show_bug.cgi?id=1568076\n      return;\n    }\n    this.gamepad = gamepads[this.gamepad.index];\n    if (!this.gamepad.connected) return;\n\n    this.buttonMap.forEach(b => {\n      const path = this.path.button(b.name);\n      const button = this.gamepad.buttons[b.buttonId];\n      frame.setValueType(path.pressed, !!button.pressed);\n      frame.setValueType(path.touched, !!button.touched);\n      frame.setValueType(path.value, button.value);\n    });\n    frame.setValueType(this.path.axesSum, 0);\n    this.axisMap.forEach(axis => {\n      frame.setValueType(this.path.axis(axis.name), this.gamepad.axes[axis.axisId]);\n      frame.setValueType(this.path.axesSum, frame.get(this.path.axesSum) + Math.abs(this.gamepad.axes[axis.axisId]));\n    });\n\n    if (!this.selector) {\n      if (this.gamepad.hand) {\n        this.path = paths.device.vive[this.gamepad.hand];\n        this.selector = `#player-${this.gamepad.hand}-controller`;\n        console.warn(\"gamepad hand eventually specified\");\n      } else {\n        return;\n      }\n    }\n    const el = document.querySelector(this.selector);\n    const rayObject = el.object3D;\n    rayObject.updateMatrixWorld();\n    this.rayObjectRotation.setFromRotationMatrix(m.extractRotation(rayObject.matrixWorld));\n    this.pose.position.setFromMatrixPosition(rayObject.matrixWorld);\n    this.pose.direction\n      .set(0, 0, -1)\n      .applyQuaternion(RAY_ROTATION)\n      .applyQuaternion(this.rayObjectRotation);\n    this.pose.fromOriginAndDirection(this.pose.position, this.pose.direction);\n    frame.setPose(this.path.pose, this.pose);\n\n    if (this.gamepad.pose.position && this.gamepad.pose.orientation) {\n      frame.setMatrix4(\n        this.path.matrix,\n        this.matrix\n          .compose(\n            this.position.fromArray(this.gamepad.pose.position),\n            this.orientation.fromArray(this.gamepad.pose.orientation),\n            ONES\n          )\n          .premultiply(this.sittingToStandingMatrix)\n          .multiply(HAND_OFFSET)\n      );\n    }\n\n    if (this.gamepad.hapticActuators && this.gamepad.hapticActuators[0]) {\n      frame.setValueType(paths.haptics.actuators[this.gamepad.hand], this.gamepad.hapticActuators[0]);\n    }\n  }\n}\n","import { paths } from \"../paths\";\nimport { Pose } from \"../pose\";\nimport { copySittingToStandingTransform } from \"./copy-sitting-to-standing-transform\";\nconst ONES = new THREE.Vector3(1, 1, 1);\nconst HAND_OFFSET = new THREE.Matrix4().compose(\n  new THREE.Vector3(0, -0.017, 0.13),\n  new THREE.Quaternion().setFromEuler(new THREE.Euler(-40 * THREE.Math.DEG2RAD, 0, 0)),\n  new THREE.Vector3(1, 1, 1)\n);\nconst m = new THREE.Matrix4();\n\nexport class WindowsMixedRealityControllerDevice {\n  constructor(gamepad) {\n    this.rayObject = null;\n    this.rayObjectRotation = new THREE.Quaternion();\n\n    // wake the gamepad api up. otherwise it does not report touch controllers.\n    // in chrome it still won't unless you enter vr.\n    navigator.getVRDisplays();\n\n    this.gamepad = gamepad;\n    this.pose = new Pose();\n\n    if (gamepad.hand) {\n      this.selector = `#player-${gamepad.hand}-controller`;\n    }\n\n    this.sittingToStandingMatrix = new THREE.Matrix4().makeTranslation(0, 1.6, 0);\n    copySittingToStandingTransform(this.sittingToStandingMatrix);\n    this.matrix = new THREE.Matrix4();\n    this.position = new THREE.Vector3();\n    this.orientation = new THREE.Quaternion();\n  }\n  write(frame) {\n    if (!this.gamepad) return;\n    this.gamepad = navigator.getGamepads()[this.gamepad.index];\n    if (!this.gamepad || !this.gamepad.connected) return;\n\n    const path = paths.device.wmr[this.gamepad.hand || \"right\"];\n\n    frame.setValueType(path.touchpad.pressed, this.gamepad.buttons[0].pressed);\n    frame.setValueType(path.touchpad.touched, this.gamepad.buttons[0].touched);\n    frame.setValueType(path.touchpad.value, this.gamepad.buttons[0].value);\n\n    frame.setValueType(path.trigger.pressed, this.gamepad.buttons[1].pressed);\n    frame.setValueType(path.trigger.touched, this.gamepad.buttons[1].touched);\n    frame.setValueType(path.trigger.value, this.gamepad.buttons[1].value);\n\n    frame.setValueType(path.grip.pressed, this.gamepad.buttons[2].pressed);\n    frame.setValueType(path.grip.touched, this.gamepad.buttons[2].touched);\n    frame.setValueType(path.grip.value, this.gamepad.buttons[2].value);\n\n    frame.setValueType(path.menu.pressed, this.gamepad.buttons[3].pressed);\n    frame.setValueType(path.menu.touched, this.gamepad.buttons[3].touched);\n    frame.setValueType(path.menu.value, this.gamepad.buttons[3].value);\n\n    frame.setValueType(path.touchpad.axisX, this.gamepad.axes[0]);\n    frame.setValueType(path.touchpad.axisY, this.gamepad.axes[1]);\n    frame.setValueType(path.joystick.axisX, this.gamepad.axes[2]);\n    frame.setValueType(path.joystick.axisY, this.gamepad.axes[3]);\n\n    if (!this.selector) {\n      if (!this.gamepad.hand) return;\n      this.selector = `#player-${this.gamepad.hand}-controller`;\n    }\n\n    this.rayObject = this.rayObject || document.querySelector(this.selector).object3D;\n    this.rayObject.updateMatrixWorld();\n    this.rayObjectRotation.setFromRotationMatrix(m.extractRotation(this.rayObject.matrixWorld));\n\n    this.pose.position.setFromMatrixPosition(this.rayObject.matrixWorld);\n    this.pose.direction.set(0, 0, -1).applyQuaternion(this.rayObjectRotation);\n    this.pose.fromOriginAndDirection(this.pose.position, this.pose.direction);\n    frame.setPose(path.pose, this.pose);\n\n    if (this.gamepad.pose.position && this.gamepad.pose.orientation) {\n      frame.setMatrix4(\n        path.matrix,\n        this.matrix\n          .compose(\n            this.position.fromArray(this.gamepad.pose.position),\n            this.orientation.fromArray(this.gamepad.pose.orientation),\n            ONES\n          )\n          .premultiply(this.sittingToStandingMatrix)\n          .multiply(HAND_OFFSET)\n      );\n    }\n\n    if (this.gamepad.hapticActuators && this.gamepad.hapticActuators[0]) {\n      frame.setValueType(paths.haptics.actuators[this.gamepad.hand], this.gamepad.hapticActuators[0]);\n    }\n  }\n}\n","import { paths } from \"../paths\";\n\nconst TWOPI = Math.PI * 2;\n\nclass CircularBuffer {\n  constructor(length) {\n    this.items = new Array(length).fill(0);\n    this.writePtr = 0;\n  }\n\n  push(item) {\n    this.items[this.writePtr] = item;\n    this.writePtr = (this.writePtr + 1) % this.items.length;\n  }\n}\n\nconst abs = Math.abs;\n// Input: two numbers between [-Math.PI, Math.PI]\n// Output: difference between them, where -Math.PI === Math.PI\nconst difference = (curr, prev) => {\n  const a = curr - prev;\n  const b = curr + TWOPI - prev;\n  const c = curr - (prev + TWOPI);\n  if (abs(a) < abs(b)) {\n    if (abs(a) < abs(c)) {\n      return a;\n    }\n  }\n  if (abs(b) < abs(c)) {\n    return b;\n  }\n\n  return c;\n};\n\nconst average = a => {\n  let sum = 0;\n  for (let i = 0; i < a.length; i++) {\n    const n = a[i];\n    sum += n;\n  }\n  return sum / a.length;\n};\n\nexport class GyroDevice {\n  constructor() {\n    this.hmdEuler = new THREE.Euler();\n    this.hmdQuaternion = new THREE.Quaternion();\n    this.prevX = this.hmdEuler.x;\n    this.prevY = this.hmdEuler.y;\n    this.dXBuffer = new CircularBuffer(6);\n    this.dYBuffer = new CircularBuffer(6);\n    this.hasPolyfill = window.webvrpolyfill;\n    if (this.hasPolyfill) {\n      this.vrDisplay = window.webvrpolyfill.getPolyfillDisplays()[0];\n      this.frameData = new window.webvrpolyfill.constructor.VRFrameData();\n    }\n  }\n\n  write(frame) {\n    if (!this.hasPolyfill || !this.vrDisplay || !this.frameData) {\n      return;\n    }\n    const hmdEuler = this.hmdEuler;\n    this.vrDisplay.getFrameData(this.frameData);\n    if (this.frameData.pose.orientation !== null) {\n      this.hmdQuaternion.fromArray(this.frameData.pose.orientation);\n      hmdEuler.setFromQuaternion(this.hmdQuaternion, \"YXZ\");\n    }\n\n    // Don't use gyro values when device is lying flat\n    if (hmdEuler.x < -Math.PI * 0.475) return;\n\n    const dX = difference(hmdEuler.x, this.prevX);\n    const dY = difference(hmdEuler.y, this.prevY);\n\n    this.dXBuffer.push(Math.abs(dX) < 0.001 ? 0 : dX);\n    this.dYBuffer.push(Math.abs(dY) < 0.001 ? 0 : dY);\n\n    this.averageDeltaX = average(this.dXBuffer.items);\n    this.averageDeltaY = average(this.dYBuffer.items);\n\n    this.prevX = hmdEuler.x;\n    this.prevY = hmdEuler.y;\n    frame.setValueType(paths.device.gyro.averageDeltaX, this.averageDeltaX);\n    frame.setValueType(paths.device.gyro.averageDeltaY, this.averageDeltaY);\n  }\n}\n","/* global AFRAME Ammo NAF */\nimport { paths } from \"./userinput/paths\";\nimport { waitForDOMContentLoaded } from \"../utils/async-utils\";\nimport { canMove } from \"../utils/permissions-utils\";\nimport { isTagged } from \"../components/tags\";\n\nfunction findHandCollisionTargetForHand(body) {\n  const world = this.el.sceneEl.systems[\"hubs-systems\"].physicsSystem.world;\n\n  if (world) {\n    const handPtr = Ammo.getPointer(body.physicsBody);\n    const handCollisions = world.collisions.get(handPtr);\n    if (handCollisions) {\n      for (let i = 0; i < handCollisions.length; i++) {\n        const object3D = world.object3Ds.get(handCollisions[i]);\n        if (isTagged(object3D.el, \"isHandCollisionTarget\")) {\n          return object3D.el;\n        }\n      }\n    }\n  }\n\n  return null;\n}\n\nconst notRemoteHoverTargets = new Map();\nconst remoteHoverTargets = new Map();\nexport function findRemoteHoverTarget(object3D) {\n  if (!object3D) return null;\n  if (notRemoteHoverTargets.get(object3D)) return null;\n  const target = remoteHoverTargets.get(object3D);\n  return target || findRemoteHoverTarget(object3D.parent);\n}\nAFRAME.registerComponent(\"is-remote-hover-target\", {\n  init: function() {\n    remoteHoverTargets.set(this.el.object3D, this.el);\n  },\n  remove: function() {\n    remoteHoverTargets.delete(this.el.object3D);\n  }\n});\nAFRAME.registerComponent(\"is-not-remote-hover-target\", {\n  init: function() {\n    notRemoteHoverTargets.set(this.el.object3D, this.el);\n  },\n  remove: function() {\n    notRemoteHoverTargets.delete(this.el.object3D);\n  }\n});\n\nexport function isUI(el) {\n  return isTagged(el, \"singleActionButton\") || isTagged(el, \"holdableButton\");\n}\n\nAFRAME.registerSystem(\"interaction\", {\n  updateCursorIntersection: function(intersection, left) {\n    if (!left) {\n      this.rightRemoteHoverTarget = intersection && findRemoteHoverTarget(intersection.object);\n      return this.rightRemoteHoverTarget;\n    }\n\n    this.leftRemoteHoverTarget = intersection && findRemoteHoverTarget(intersection.object);\n    return this.leftRemoteHoverTarget;\n  },\n\n  isHeld(el) {\n    return (\n      this.state.leftHand.held === el ||\n      this.state.rightHand.held === el ||\n      this.state.rightRemote.held === el ||\n      this.state.leftRemote.held === el\n    );\n  },\n\n  release(el) {\n    if (this.state.leftHand.held === el) {\n      this.state.leftHand.held = null;\n    }\n    if (this.state.leftHand.hovered === el) {\n      this.state.leftHand.hovered = null;\n    }\n    if (this.state.leftHand.held === el) {\n      this.state.leftHand.held = null;\n    }\n    if (this.state.rightHand.hovered === el) {\n      this.state.rightHand.hovered = null;\n    }\n    if (this.state.rightRemote.held === el) {\n      this.state.rightRemote.held = null;\n    }\n    if (this.state.rightRemote.hovered === el) {\n      this.state.rightRemote.hovered = null;\n    }\n    if (this.state.leftRemote.held === el) {\n      this.state.leftRemote.held = null;\n    }\n    if (this.state.leftRemote.hovered === el) {\n      this.state.leftRemote.hovered = null;\n    }\n  },\n\n  getRightRemoteHoverTarget() {\n    return this.rightRemoteHoverTarget;\n  },\n\n  getLeftRemoteHoverTarget() {\n    return this.leftRemoteHoverTarget;\n  },\n\n  init: function() {\n    this.options = {\n      leftHand: {\n        entity: null,\n        grabPath: paths.actions.leftHand.grab,\n        dropPath: paths.actions.leftHand.drop,\n        hoverFn: findHandCollisionTargetForHand\n      },\n      rightHand: {\n        entity: null,\n        grabPath: paths.actions.rightHand.grab,\n        dropPath: paths.actions.rightHand.drop,\n        hoverFn: findHandCollisionTargetForHand\n      },\n      rightRemote: {\n        entity: null,\n        grabPath: paths.actions.cursor.right.grab,\n        dropPath: paths.actions.cursor.right.drop,\n        hoverFn: this.getRightRemoteHoverTarget\n      },\n      leftRemote: {\n        entity: null,\n        grabPath: paths.actions.cursor.left.grab,\n        dropPath: paths.actions.cursor.left.drop,\n        hoverFn: this.getLeftRemoteHoverTarget\n      }\n    };\n    this.state = {\n      leftHand: {\n        hovered: null,\n        held: null,\n        spawning: null\n      },\n      rightHand: {\n        hovered: null,\n        held: null,\n        spawning: null\n      },\n      rightRemote: {\n        hovered: null,\n        held: null,\n        spawning: null\n      },\n      leftRemote: {\n        hovered: null,\n        held: null,\n        spawning: null\n      }\n    };\n    this.previousState = {\n      leftHand: {\n        hovered: null,\n        held: null,\n        spawning: null\n      },\n      rightHand: {\n        hovered: null,\n        held: null,\n        spawning: null\n      },\n      rightRemote: {\n        hovered: null,\n        held: null,\n        spawning: null\n      },\n      leftRemote: {\n        hovered: null,\n        held: null,\n        spawning: null\n      }\n    };\n    waitForDOMContentLoaded().then(() => {\n      this.options.leftHand.entity = document.getElementById(\"player-left-controller\");\n      this.options.rightHand.entity = document.getElementById(\"player-right-controller\");\n      this.options.rightRemote.entity = document.getElementById(\"right-cursor\");\n      this.options.leftRemote.entity = document.getElementById(\"left-cursor\");\n      this.ready = true;\n    });\n  },\n\n  tickInteractor(options, state) {\n    const userinput = AFRAME.scenes[0].systems.userinput;\n    if (state.held) {\n      const networked = state.held.components[\"networked\"];\n      const lostOwnership = networked && networked.data && networked.data.owner !== NAF.clientId;\n      if (userinput.get(options.dropPath) || lostOwnership) {\n        state.held = null;\n      }\n    } else {\n      state.hovered = options.hoverFn.call(\n        this,\n        options.entity.components[\"body-helper\"] && options.entity.components[\"body-helper\"].body\n          ? options.entity.components[\"body-helper\"].body\n          : null\n      );\n      if (state.hovered) {\n        const entity = state.hovered;\n        const isFrozen = this.el.is(\"frozen\");\n        const isPinned = entity.components.pinnable && entity.components.pinnable.data.pinned;\n        if (\n          isTagged(entity, \"isHoldable\") &&\n          userinput.get(options.grabPath) &&\n          (isFrozen || !isPinned) &&\n          canMove(entity)\n        ) {\n          state.held = entity;\n        }\n      }\n    }\n  },\n\n  tick2() {\n    if (!this.el.is(\"entered\")) {\n      return;\n    }\n\n    Object.assign(this.previousState.rightHand, this.state.rightHand);\n    Object.assign(this.previousState.rightRemote, this.state.rightRemote);\n    Object.assign(this.previousState.leftHand, this.state.leftHand);\n    Object.assign(this.previousState.leftRemote, this.state.leftRemote);\n\n    if (this.options.leftHand.entity.object3D.visible && !this.state.leftRemote.held) {\n      this.tickInteractor(this.options.leftHand, this.state.leftHand);\n    }\n    if (this.options.rightHand.entity.object3D.visible && !this.state.rightRemote.held) {\n      this.tickInteractor(this.options.rightHand, this.state.rightHand);\n    }\n    if (!this.state.rightHand.held && !this.state.rightHand.hovered) {\n      this.tickInteractor(this.options.rightRemote, this.state.rightRemote);\n    }\n    if (!this.state.leftHand.held && !this.state.leftHand.hovered) {\n      this.tickInteractor(this.options.leftRemote, this.state.leftRemote);\n    }\n  }\n});\n","import { sets } from \"../sets\";\nimport { paths } from \"../paths\";\nimport { Pose } from \"../pose\";\nimport { findRemoteHoverTarget } from \"../../interactions\";\nimport { canMove } from \"../../../utils/permissions-utils\";\n\nconst calculateCursorPose = function(camera, coords, origin, direction, cursorPose) {\n  origin.setFromMatrixPosition(camera.matrixWorld);\n  direction\n    .set(coords[0], coords[1], 0.5)\n    .unproject(camera)\n    .sub(origin)\n    .normalize();\n  cursorPose.fromOriginAndDirection(origin, direction);\n  return cursorPose;\n};\n\nexport class AppAwareMouseDevice {\n  constructor() {\n    this.prevButtonLeft = false;\n    this.clickedOnAnything = false;\n    this.cursorPose = new Pose();\n    this.prevCursorPose = new Pose();\n    this.origin = new THREE.Vector3();\n    this.prevOrigin = new THREE.Vector3();\n    this.direction = new THREE.Vector3();\n    this.prevDirection = new THREE.Vector3();\n  }\n\n  write(frame) {\n    this.prevCursorPose.copy(this.cursorPose);\n    this.prevOrigin.copy(this.origin);\n    this.prevDirection.copy(this.prevDirection);\n\n    if (!this.cursorController) {\n      const rightCursorController = document.getElementById(\"right-cursor-controller\");\n\n      if (rightCursorController && rightCursorController.components) {\n        this.cursorController = rightCursorController.components[\"cursor-controller\"];\n      }\n    }\n\n    if (!this.camera) {\n      const viewingCamera = document.getElementById(\"viewing-camera\");\n\n      if (viewingCamera && viewingCamera.components) {\n        this.camera = viewingCamera.components.camera.camera;\n      }\n    }\n\n    const buttonLeft = frame.get(paths.device.mouse.buttonLeft);\n    const buttonRight = frame.get(paths.device.mouse.buttonRight);\n    if (buttonLeft && !this.prevButtonLeft && this.cursorController) {\n      const rawIntersections = [];\n      this.cursorController.raycaster.intersectObjects(\n        AFRAME.scenes[0].systems[\"hubs-systems\"].cursorTargettingSystem.targets,\n        true,\n        rawIntersections\n      );\n      const intersection = rawIntersections.find(x => x.object.el);\n      const remoteHoverTarget = intersection && findRemoteHoverTarget(intersection.object);\n      const userinput = AFRAME.scenes[0].systems.userinput;\n      const isInteractable =\n        intersection &&\n        intersection.object.el.matches(\n          \".interactable, .interactable *, .occupiable-waypoint-icon, .teleport-waypoint-icon\"\n        );\n      const isPinned =\n        remoteHoverTarget && remoteHoverTarget.components.pinnable && remoteHoverTarget.components.pinnable.data.pinned;\n      const isFrozen = AFRAME.scenes[0].is(\"frozen\");\n      const template =\n        remoteHoverTarget &&\n        remoteHoverTarget.components.networked &&\n        remoteHoverTarget.components.networked.data.template;\n      const isStaticControlledMedia = template && template === \"#static-controlled-media\";\n      const isStaticMedia = template && template === \"#static-media\";\n      this.clickedOnAnything =\n        (isInteractable &&\n          (isFrozen || !isPinned) &&\n          (remoteHoverTarget && canMove(remoteHoverTarget)) &&\n          !isStaticControlledMedia &&\n          !isStaticMedia) ||\n        userinput.activeSets.includes(sets.rightCursorHoldingPen) ||\n        userinput.activeSets.includes(sets.rightCursorHoldingInteractable) ||\n        userinput.activeSets.includes(sets.rightCursorHoldingCamera);\n    }\n    this.prevButtonLeft = buttonLeft;\n\n    if (!buttonLeft) {\n      this.clickedOnAnything = false;\n    }\n\n    if ((!this.clickedOnAnything && buttonLeft) || buttonRight) {\n      const movementXY = frame.get(paths.device.mouse.movementXY);\n      if (movementXY) {\n        frame.setVector2(paths.device.smartMouse.cameraDelta, movementXY[0], movementXY[1]);\n      }\n      frame.setValueType(paths.device.smartMouse.shouldMoveCamera, true);\n    }\n\n    if (this.camera) {\n      const coords = frame.get(paths.device.mouse.coords);\n      frame.setPose(\n        paths.device.smartMouse.cursorPose,\n        calculateCursorPose(this.camera, coords, this.origin, this.direction, this.cursorPose)\n      );\n    }\n  }\n}\n","export function touchIsAssigned(touch, assignments) {\n  return (\n    assignments.find(assignment => {\n      return assignment.touch.identifier === touch.identifier;\n    }) !== undefined\n  );\n}\n\nexport function jobIsAssigned(job, assignments) {\n  return (\n    assignments.find(assignment => {\n      return assignment.job === job;\n    }) !== undefined\n  );\n}\n\nexport function assign(touch, job, assignments) {\n  if (touchIsAssigned(touch, assignments) || jobIsAssigned(job, assignments)) {\n    console.error(\"cannot reassign touches or jobs. unassign first\");\n    return undefined;\n  }\n  const assignment = { job, touch };\n  assignments.push(assignment);\n  return assignment;\n}\n\nexport function unassign(touch, job, assignments) {\n  function match(assignment) {\n    return assignment.touch.identifier === touch.identifier && assignment.job === job;\n  }\n  assignments.splice(assignments.findIndex(match), 1);\n}\n\nexport function findByJob(job, assignments) {\n  return assignments.find(assignment => {\n    return assignment.job === job;\n  });\n}\n\nexport function findByTouch(touch, assignments) {\n  return assignments.find(assignment => {\n    return assignment.touch.identifier === touch.identifier;\n  });\n}\n","import { paths } from \"../paths\";\nimport { Pose } from \"../pose\";\nimport { touchIsAssigned, jobIsAssigned, assign, unassign, findByJob, findByTouch } from \"./touchscreen/assignments\";\nimport { findRemoteHoverTarget } from \"../../interactions\";\nimport { canMove } from \"../../../utils/permissions-utils\";\n\nconst MOVE_CURSOR_JOB = \"MOVE CURSOR\";\nconst MOVE_CAMERA_JOB = \"MOVE CAMERA\";\nconst FIRST_PINCHER_JOB = \"FIRST PINCHER\";\nconst SECOND_PINCHER_JOB = \"SECOND PINCHER\";\n\nconst TAP_PATHS = [\n  paths.device.touchscreen.tap1,\n  paths.device.touchscreen.tap2,\n  paths.device.touchscreen.tap3,\n  paths.device.touchscreen.tap4,\n  paths.device.touchscreen.tap5\n];\n\nfunction distance(x1, y1, x2, y2) {\n  const dx = x1 - x2;\n  const dy = y1 - y2;\n  return Math.sqrt(dx * dx + dy * dy);\n}\n\nconst getPlayerCamera = (() => {\n  let playerCamera;\n\n  return function() {\n    if (!playerCamera) {\n      playerCamera = document.getElementById(\"viewing-camera\").components.camera.camera;\n    }\n\n    return playerCamera;\n  };\n})();\n\nfunction shouldMoveCursor(touch, raycaster) {\n  const isCursorGrabbing = !!AFRAME.scenes[0].systems.interaction.state.rightRemote.held;\n  if (isCursorGrabbing) {\n    return true;\n  }\n  const rawIntersections = [];\n  raycaster.setFromCamera(\n    {\n      x: (touch.clientX / window.innerWidth) * 2 - 1,\n      y: -(touch.clientY / window.innerHeight) * 2 + 1\n    },\n    getPlayerCamera()\n  );\n  raycaster.intersectObjects(\n    AFRAME.scenes[0].systems[\"hubs-systems\"].cursorTargettingSystem.targets,\n    true,\n    rawIntersections\n  );\n  const intersection = rawIntersections.find(x => x.object.el);\n  const isInteractable =\n    intersection &&\n    intersection.object.el.matches(\n      \".interactable, .interactable *, .occupiable-waypoint-icon, .teleport-waypoint-icon\"\n    );\n  const remoteHoverTarget = intersection && findRemoteHoverTarget(intersection.object);\n  const isPinned =\n    remoteHoverTarget && remoteHoverTarget.components.pinnable && remoteHoverTarget.components.pinnable.data.pinned;\n  const isFrozen = AFRAME.scenes[0].is(\"frozen\");\n\n  const template =\n    remoteHoverTarget && remoteHoverTarget.components.networked && remoteHoverTarget.components.networked.data.template;\n  const isStaticControlledMedia = template && template === \"#static-controlled-media\";\n  const isStaticMedia = template && template === \"#static-media\";\n  return (\n    isInteractable &&\n    (isFrozen || !isPinned) &&\n    !isStaticControlledMedia &&\n    !isStaticMedia &&\n    (remoteHoverTarget && canMove(remoteHoverTarget))\n  );\n}\n\nexport class AppAwareTouchscreenDevice {\n  constructor() {\n    this.raycaster = new THREE.Raycaster(new THREE.Vector3(), new THREE.Vector3(), 0, 100);\n    this.assignments = [];\n    this.pinch = { initialDistance: 0, currentDistance: 0, delta: 0 };\n\n    // When touches appear, this timestamps and then watches for the high water mark of # of touches\n    this.pendingTap = { maxTouchCount: 0, startedAt: 0 };\n    this.tapIndexToWriteNextFrame = 0;\n\n    this.events = [];\n    [\"touchstart\", \"touchend\", \"touchmove\", \"touchcancel\"].map(x =>\n      document.querySelector(\"canvas\").addEventListener(x, this.events.push.bind(this.events))\n    );\n  }\n\n  end(touch) {\n    if (!touchIsAssigned(touch, this.assignments)) {\n      console.warn(\"touch does not have a job\", touch);\n    } else {\n      const assignment = findByTouch(touch, this.assignments);\n      switch (assignment.job) {\n        case MOVE_CURSOR_JOB:\n        case MOVE_CAMERA_JOB:\n          // If grab was being delayed, we should fire the initial grab and also delay the unassignment\n          // to ensure we write at least two frames with the grab down (since the action set will change)\n          // and otherwise we'd not see the falling xform.\n          if (assignment.framesUntilGrab >= 0) {\n            assignment.framesUntilUnassign = assignment.framesUntilGrab + 2;\n          } else {\n            unassign(assignment.touch, assignment.job, this.assignments);\n          }\n\n          break;\n        case FIRST_PINCHER_JOB:\n          unassign(assignment.touch, assignment.job, this.assignments);\n          this.pinch = { initialDistance: 0, currentDistance: 0, delta: 0 };\n\n          if (jobIsAssigned(SECOND_PINCHER_JOB, this.assignments)) {\n            const second = findByJob(SECOND_PINCHER_JOB, this.assignments);\n            unassign(second.touch, second.job, this.assignments);\n            if (jobIsAssigned(MOVE_CAMERA_JOB, this.assignments)) {\n              // reassign secondPincher to firstPincher\n              const first = assign(second.touch, FIRST_PINCHER_JOB, this.assignments);\n              first.clientX = second.clientX;\n              first.clientY = second.clientY;\n            } else {\n              // reassign secondPincher to moveCamera\n              const cameraMover = assign(second.touch, MOVE_CAMERA_JOB, this.assignments);\n              cameraMover.clientX = second.clientX;\n              cameraMover.clientY = second.clientY;\n              cameraMover.delta = [0, 0];\n            }\n          }\n          break;\n        case SECOND_PINCHER_JOB:\n          unassign(assignment.touch, assignment.job, this.assignments);\n          this.pinch = { initialDistance: 0, currentDistance: 0, delta: 0 };\n          if (jobIsAssigned(FIRST_PINCHER_JOB, this.assignments) && !jobIsAssigned(MOVE_CAMERA_JOB, this.assignments)) {\n            //reassign firstPincher to moveCamera\n            const first = findByJob(FIRST_PINCHER_JOB, this.assignments);\n            unassign(first.touch, first.job, this.assignments);\n            const cameraMover = assign(first.touch, MOVE_CAMERA_JOB, this.assignments);\n            cameraMover.clientX = first.clientX;\n            cameraMover.clientY = first.clientY;\n            cameraMover.delta = [0, 0];\n          }\n          break;\n      }\n    }\n\n    // Touches cleared, determine what to do with pending tap\n    if (this.assignments.length === 0) {\n      if (this.pendingTap.maxTouchCount > 0 && performance.now() - this.pendingTap.startedAt <= 125) {\n        this.tapIndexToWriteNextFrame = this.pendingTap.maxTouchCount;\n      }\n\n      this.pendingTap = { maxTouchCount: 0 };\n    }\n  }\n\n  move(touch) {\n    if (!touchIsAssigned(touch, this.assignments)) {\n      if (!touch.target.classList[0] || !touch.target.classList[0].startsWith(\"virtual-gamepad-controls\")) {\n        console.warn(\"touch does not have job\", touch);\n      }\n      return;\n    }\n\n    const assignment = findByTouch(touch, this.assignments);\n    switch (assignment.job) {\n      case MOVE_CURSOR_JOB:\n        assignment.cursorPose.fromCameraProjection(\n          getPlayerCamera(),\n          (touch.clientX / window.innerWidth) * 2 - 1,\n          -(touch.clientY / window.innerHeight) * 2 + 1\n        );\n        break;\n      case MOVE_CAMERA_JOB:\n        assignment.delta[0] += touch.clientX - assignment.clientX;\n        assignment.delta[1] += touch.clientY - assignment.clientY;\n        assignment.clientX = touch.clientX;\n        assignment.clientY = touch.clientY;\n        break;\n      case FIRST_PINCHER_JOB:\n      case SECOND_PINCHER_JOB:\n        assignment.clientX = touch.clientX;\n        assignment.clientY = touch.clientY;\n        if (jobIsAssigned(FIRST_PINCHER_JOB, this.assignments) && jobIsAssigned(SECOND_PINCHER_JOB, this.assignments)) {\n          const first = findByJob(FIRST_PINCHER_JOB, this.assignments);\n          const second = findByJob(SECOND_PINCHER_JOB, this.assignments);\n          const currentDistance = distance(first.clientX, first.clientY, second.clientX, second.clientY);\n          this.pinch.delta += currentDistance - this.pinch.currentDistance;\n          this.pinch.currentDistance = currentDistance;\n        }\n        break;\n    }\n  }\n\n  start(touch) {\n    if (touchIsAssigned(touch, this.assignments)) {\n      console.error(\"touch already has a job\");\n      return;\n    }\n\n    const isFirstTouch = this.assignments.length === 0;\n    const isSecondTouch = this.assignments.length === 1;\n    const isThirdTouch = this.assignments.length === 2;\n\n    const hasSecondPinch = !!findByJob(SECOND_PINCHER_JOB, this.assignments);\n\n    if (isFirstTouch || (isThirdTouch && hasSecondPinch)) {\n      let assignment;\n\n      // First touch or third touch and other two fingers were pinching\n      if (shouldMoveCursor(touch, this.raycaster)) {\n        assignment = assign(touch, MOVE_CURSOR_JOB, this.assignments);\n\n        // Grabbing objects is delayed by several frames:\n        // - We don't want the physics constraint to be applied too early, which results in crazy velocities\n        // - We don't want to mis-trigger grabs if the user is about to put down a second finger.\n        assignment.framesUntilGrab = 2;\n      } else {\n        assignment = assign(touch, MOVE_CAMERA_JOB, this.assignments);\n        assignment.delta = [0, 0];\n      }\n\n      assignment.clientX = touch.clientX;\n      assignment.clientY = touch.clientY;\n\n      // On touch down, we always move the cursor on the first frame, but the MOVE_CURSOR_JOB indicates\n      // the touch will then track the cursor (instead of the camera)\n      assignment.cursorPose = new Pose().fromCameraProjection(\n        getPlayerCamera(),\n        (touch.clientX / window.innerWidth) * 2 - 1,\n        -(touch.clientY / window.innerHeight) * 2 + 1\n      );\n    } else if (isSecondTouch || isThirdTouch) {\n      const cursorJob = findByJob(MOVE_CURSOR_JOB, this.assignments);\n\n      if (isSecondTouch && cursorJob && cursorJob.framesUntilGrab < 0) {\n        // The second touch is happening after grab activated, so assign this touch to first pinch.\n        const first = assign(touch, FIRST_PINCHER_JOB, this.assignments);\n        first.clientX = touch.clientX;\n        first.clientY = touch.clientY;\n      } else {\n        // Second or third touch, but third touch only if not pinching\n        if (isSecondTouch) {\n          // The second touch is happening before the grab activated, so re-assign the first\n          // to the first pinch, and effectively cancel the grab.\n          const previousAssignment = this.assignments[0];\n          unassign(previousAssignment.touch, previousAssignment.job, this.assignments);\n          const first = assign(previousAssignment.touch, FIRST_PINCHER_JOB, this.assignments);\n          first.clientX = previousAssignment.clientX;\n          first.clientY = previousAssignment.clientY;\n        }\n\n        const first = findByJob(FIRST_PINCHER_JOB, this.assignments);\n\n        if (!first) {\n          const first = assign(touch, FIRST_PINCHER_JOB, this.assignments);\n          first.clientX = touch.clientX;\n          first.clientY = touch.clientY;\n          return;\n        } else {\n          const second = assign(touch, SECOND_PINCHER_JOB, this.assignments);\n          second.clientX = touch.clientX;\n          second.clientY = touch.clientY;\n\n          const initialDistance = distance(first.clientX, first.clientY, second.clientX, second.clientY);\n\n          this.pinch = {\n            initialDistance,\n            currentDistance: initialDistance,\n            delta: 0\n          };\n        }\n      }\n    }\n\n    if (this.pendingTap.maxTouchCount === 0 && this.assignments.length > 0) {\n      this.pendingTap.startedAt = performance.now();\n    }\n\n    this.pendingTap.maxTouchCount = Math.max(this.pendingTap.maxTouchCount, this.assignments.length);\n  }\n\n  process(event) {\n    switch (event.type) {\n      case \"touchstart\":\n        for (const touch of event.changedTouches) {\n          this.start(touch);\n        }\n        break;\n      case \"touchmove\":\n        for (const touch of event.touches) {\n          this.move(touch);\n        }\n        break;\n      case \"touchend\":\n      case \"touchcancel\":\n        for (const touch of event.changedTouches) {\n          this.end(touch);\n        }\n        break;\n    }\n  }\n\n  write(frame) {\n    if (this.pinch) {\n      this.pinch.delta = 0;\n    }\n    const cameraMover =\n      jobIsAssigned(MOVE_CAMERA_JOB, this.assignments) && findByJob(MOVE_CAMERA_JOB, this.assignments);\n    if (cameraMover) {\n      cameraMover.delta[0] = 0;\n      cameraMover.delta[1] = 0;\n    }\n\n    this.events.forEach(event => {\n      this.process(event);\n    });\n    while (this.events.length) {\n      this.events.pop();\n    }\n\n    const path = paths.device.touchscreen;\n    const hasCursorJob = jobIsAssigned(MOVE_CURSOR_JOB, this.assignments);\n    const hasCameraJob = jobIsAssigned(MOVE_CAMERA_JOB, this.assignments);\n\n    if (hasCursorJob || hasCameraJob) {\n      frame.setValueType(path.isTouching, true);\n\n      const assignment = findByJob(MOVE_CURSOR_JOB, this.assignments) || findByJob(MOVE_CAMERA_JOB, this.assignments);\n      frame.setPose(path.cursorPose, assignment.cursorPose);\n    }\n\n    frame.setValueType(path.isTouchingGrabbable, false);\n\n    if (hasCursorJob) {\n      const assignment = findByJob(MOVE_CURSOR_JOB, this.assignments);\n      frame.setValueType(path.isTouchingGrabbable, assignment.framesUntilGrab <= 0);\n      assignment.framesUntilGrab--;\n\n      if (assignment.framesUntilUnassign >= 0) {\n        if (assignment.framesUntilUnassign === 0) {\n          unassign(assignment.touch, assignment.job, this.assignments);\n        }\n\n        assignment.framesUntilUnassign--;\n      }\n    }\n\n    if (hasCameraJob) {\n      const delta = findByJob(MOVE_CAMERA_JOB, this.assignments).delta;\n      frame.setVector2(path.touchCameraDelta, delta[0] / window.innerWidth, delta[1] / window.innerHeight);\n    }\n\n    frame.setValueType(path.pinch.delta, this.pinch.delta);\n    frame.setValueType(path.pinch.initialDistance, this.pinch.initialDistance);\n    frame.setValueType(path.pinch.currentDistance, this.pinch.currentDistance);\n\n    if (this.tapIndexToWriteNextFrame && this.tapIndexToWriteNextFrame < TAP_PATHS.length) {\n      // write to tap-X path if we had an X-fingered tap\n      frame.setValueType(TAP_PATHS[this.tapIndexToWriteNextFrame - 1], true);\n    }\n\n    this.tapIndexToWriteNextFrame = 0;\n\n    frame.setValueType(path.anything, this.assignments.length !== 0);\n  }\n}\n","import { Pose } from \"../pose\";\nimport { angleTo4Direction } from \"../../../utils/dpad\";\n\nexport const xforms = {\n  noop: function() {},\n  copy: function(frame, src, dest) {\n    frame.setValueType(dest.value, frame.get(src.value));\n  },\n  scale: function(scalar) {\n    return function scale(frame, src, dest) {\n      if (frame.get(src.value) !== undefined) {\n        frame.setValueType(dest.value, frame.get(src.value) * scalar);\n      }\n    };\n  },\n  scaleExp: function(scalar, exp = 1) {\n    return function scale(frame, src, dest) {\n      if (frame.get(src.value) !== undefined) {\n        if (exp === 1) {\n          frame.setValueType(dest.value, frame.get(src.value) * scalar);\n        } else {\n          frame.setValueType(dest.value, Math.pow(frame.get(src.value), exp) * scalar);\n        }\n      }\n    };\n  },\n  deadzone: function(deadzoneSize) {\n    return function deadzone(frame, src, dest) {\n      frame.setValueType(dest.value, Math.abs(frame.get(src.value)) < deadzoneSize ? 0 : frame.get(src.value));\n    };\n  },\n  split_vec2: function(frame, src, dest) {\n    const value = frame.get(src.value);\n    if (value !== undefined) {\n      frame.setValueType(dest.x, value[0]);\n      frame.setValueType(dest.y, value[1]);\n    }\n  },\n  compose_vec2: function(frame, src, dest) {\n    const x = frame.get(src.x);\n    const y = frame.get(src.y);\n    if (x !== undefined && y !== undefined) {\n      frame.setVector2(dest.value, x, y);\n    }\n  },\n  negate: function(frame, src, dest) {\n    frame.setValueType(dest.value, -frame.get(src.value));\n  },\n  copyIfFalse: function(frame, src, dest) {\n    frame.setValueType(dest.value, frame.get(src.bool) ? undefined : frame.get(src.value));\n  },\n  copyIfTrue: function(frame, src, dest) {\n    frame.setValueType(dest.value, frame.get(src.bool) ? frame.get(src.value) : undefined);\n  },\n  copyVec2IfTrue: function(frame, src, dest) {\n    if (frame.get(src.bool)) {\n      const v2 = frame.get(src.value);\n      frame.setVector2(dest.value, v2[0], v2[1]);\n    }\n  },\n  zeroIfDefined: function(frame, src, dest) {\n    frame.setValueType(dest.value, frame.get(src.bool) !== undefined ? 0 : frame.get(src.value));\n  },\n  true: function(frame, src, dest) {\n    frame.setValueType(dest.value, true);\n  },\n  rising: function rising(frame, src, dest, prevState) {\n    frame.setValueType(dest.value, frame.get(src.value) && prevState === false);\n    return !!frame.get(src.value);\n  },\n  risingWithFrameDelay: function(n) {\n    return function risingWithFrameDelay(frame, src, dest, state = { values: new Array(n) }) {\n      frame.setValueType(dest.value, state.values.shift());\n      state.values.push(frame.get(src.value) && !state.prev);\n      state.prev = frame.get(src.value);\n      return state;\n    };\n  },\n  falling: function falling(frame, src, dest, prevState) {\n    frame.setValueType(dest.value, !frame.get(src.value) && prevState);\n    return !!frame.get(src.value);\n  },\n  vec2Zero: function(frame, _, dest) {\n    frame.setVector2(dest.value, 0, 0);\n  },\n  poseFromCameraProjection: function() {\n    let camera;\n    const pose = new Pose();\n    return function poseFromCameraProjection(frame, src, dest) {\n      if (!camera) {\n        camera = document.getElementById(\"viewing-camera\").components.camera.camera;\n      }\n      const value = frame.get(src.value);\n      frame.setPose(dest.value, pose.fromCameraProjection(camera, value[0], value[1]));\n    };\n  },\n  vec2dpad: function(deadzoneRadius, invertX = false, invertY = false) {\n    const deadzoneRadiusSquared = deadzoneRadius * deadzoneRadius;\n\n    return function vec2dpad(frame, src, dest) {\n      if (!frame.get(src.value)) return;\n      const [x, y] = frame.get(src.value);\n      const inCenter = x * x + y * y < deadzoneRadiusSquared;\n      const direction = inCenter ? \"center\" : angleTo4Direction(Math.atan2(invertX ? -x : x, invertY ? -y : y));\n      if (!dest[direction]) return;\n      frame.setValueType(dest[direction], true);\n    };\n  },\n  always: function(constValue) {\n    return function always(frame, _, dest) {\n      frame.setValueType(dest.value, constValue);\n    };\n  },\n  wasd_to_vec2: function(frame, { w, a, s, d }, { vec2 }) {\n    let x = 0;\n    let y = 0;\n    if (frame.get(a)) x -= 1;\n    if (frame.get(d)) x += 1;\n    if (frame.get(w)) y += 1;\n    if (frame.get(s)) y -= 1;\n    frame.setVector2(vec2, x, y);\n  },\n  add_vec2: function(frame, src, dest) {\n    const first = frame.get(src.first);\n    const second = frame.get(src.second);\n    if (first && second) {\n      frame.setVector2(dest.value, first[0] + second[0], first[1] + second[1]);\n    } else if (second) {\n      frame.setVector2(dest.value, second[0], second[1]);\n    } else if (first) {\n      frame.setVector2(dest.value, first[0], first[1]);\n    }\n  },\n  max_vec2: function(frame, src, dest) {\n    const first = frame.get(src.first);\n    const second = frame.get(src.second);\n    if (first && second) {\n      const max =\n        first[0] * first[0] + first[1] * first[1] > second[0] * second[0] + second[1] * second[1] ? first : second;\n      frame.setVector2(dest.value, max[0], max[1]);\n    } else if (second) {\n      frame.setVector2(dest.value, second[0], second[1]);\n    } else if (first) {\n      frame.setVector2(dest.value, first[0], first[1]);\n    }\n  },\n  normalize_vec2: function(frame, src, dest) {\n    const vec2 = frame.get(src.value);\n    if (vec2) {\n      if (vec2[0] === 0 && vec2[0] === 0) {\n        frame.setVector2(dest.value, vec2[0], vec2[1]);\n      } else {\n        const l = Math.sqrt(vec2[0] * vec2[0] + vec2[1] * vec2[1]);\n        frame.setVector2(dest.value, vec2[0] / l, vec2[1] / l);\n      }\n    }\n  },\n  all: function(frame, src, dest) {\n    for (let i = 0, l = src.length; i < l; i++) {\n      const path = src[i];\n      if (!frame.get(path)) {\n        frame.setValueType(dest.value, false);\n        return;\n      }\n    }\n    frame.setValueType(dest.value, true);\n  },\n  any: function(frame, src, dest) {\n    for (let i = 0, l = src.length; i < l; i++) {\n      const path = src[i];\n      if (frame.get(path)) {\n        frame.setValueType(dest.value, true);\n        return;\n      }\n    }\n    frame.setValueType(dest.value, false);\n  },\n  touch_axis_scroll(scale = 1, snap_to) {\n    return function touch_axis_scroll(frame, src, dest, state = { value: 0, touching: false }) {\n      if (snap_to === undefined || Math.abs(frame.get(src.value) - state.value) >= snap_to) {\n        frame.setValueType(\n          dest.value,\n          state.touching && frame.get(src.touching) ? scale * (frame.get(src.value) - state.value) : 0\n        );\n      }\n\n      state.value = frame.get(src.value);\n      state.touching = frame.get(src.touching);\n\n      return state;\n    };\n  },\n  diff_vec2: function diff_vec2(frame, src, dest, state = [0, 0]) {\n    const v2 = frame.get(src.value);\n    if (v2) {\n      frame.setVector2(dest.value, v2[0] - state[0], v2[1] - state[1]);\n      state[0] = v2[0];\n      state[1] = v2[1];\n    }\n    return state;\n  }\n};\n","export function angleTo4Direction(angle) {\n  angle = (angle * THREE.Math.RAD2DEG + 180 + 45) % 360;\n  if (angle > 0 && angle < 90) {\n    return \"north\";\n  } else if (angle >= 90 && angle < 180) {\n    return \"west\";\n  } else if (angle >= 180 && angle < 270) {\n    return \"south\";\n  } else {\n    return \"east\";\n  }\n}\n\nexport function angleTo8Direction(angle) {\n  angle = (angle * THREE.Math.RAD2DEG + 180 + 45) % 360;\n  let direction = \"\";\n  if ((angle >= 0 && angle < 120) || angle >= 330) {\n    direction += \"north\";\n  }\n  if (angle >= 150 && angle < 300) {\n    direction += \"south\";\n  }\n  if (angle >= 60 && angle < 210) {\n    direction += \"west\";\n  }\n  if ((angle >= 240 && angle < 360) || angle < 30) {\n    direction += \"east\";\n  }\n  return direction;\n}\n","export const addSetsToBindings = mapping => {\n  for (const setName in mapping) {\n    for (const binding of mapping[setName]) {\n      if (!binding.sets) {\n        binding.sets = [];\n      }\n      binding.sets.push(setName);\n    }\n  }\n  return mapping;\n};\n","import { paths } from \"../paths\";\nimport { sets } from \"../sets\";\nimport { xforms } from \"./xforms\";\nimport { addSetsToBindings } from \"./utils\";\n\n// import { Pose } from \"../pose\";\n\nconst wasd_vec2 = \"/var/mouse-and-keyboard/wasd_vec2\";\nconst keyboardCharacterAcceleration = \"/var/mouse-and-keyboard/keyboardCharacterAcceleration\";\nconst arrows_vec2 = \"/var/mouse-and-keyboard/arrows_vec2\";\nconst togglePenWithRMB = \"/vars/mouse-and-keyboard/drop_pen_with_RMB\";\nconst togglePenWithEsc = \"/vars/mouse-and-keyboard/drop_pen_with_esc\";\nconst togglePenWithP = \"/vars/mouse-and-keyboard/drop_pen_with_p\";\nconst togglePenWithHud = \"/vars/mouse-and-keyboard/drop_pen_with_hud\";\nconst togglePen = \"/vars/mouse-and-keyboard/togglePen\";\nconst startInspectingViaMouse = \"/vars/mouse-and-keyboard/startInspectingViaMouse\";\nconst startInspectingViaKeyboard = \"/vars/mouse-and-keyboard/startInspectingViaKeyboard\";\nconst stopInspectingViaMouse = \"/vars/mouse-and-keyboard/stopInspectingViaMouse\";\nconst stopInspectingViaKeyboardEscape = \"/vars/mouse-and-keyboard/stopInspectingViaKeyboardEscape\";\nconst stopInspectingViaKeyboardFocusRelease = \"/vars/mouse-and-keyboard/stopInspectingViaKeyboardFocusRelease\";\n\nconst qs = new URLSearchParams(location.search);\nconst inspectZoomSpeed = parseFloat(qs.get(\"izs\")) || -10.0;\n\nconst k = name => {\n  return `/keyboard-mouse-user/keyboard-var/${name}`;\n};\n\nexport const keyboardMouseUserBindings = addSetsToBindings({\n  [sets.global]: [\n    {\n      src: {},\n      dest: { value: paths.actions.cursor.right.hideLine },\n      xform: xforms.always(true)\n    },\n    {\n      src: {},\n      dest: { value: paths.actions.cursor.right.wake },\n      xform: xforms.always(true)\n    },\n    {\n      src: {},\n      dest: { value: paths.actions.cursor.left.wake },\n      xform: xforms.always(false)\n    },\n    {\n      src: {\n        w: paths.device.keyboard.key(\"arrowup\"),\n        a: paths.device.keyboard.key(\"arrowleft\"),\n        s: paths.device.keyboard.key(\"arrowdown\"),\n        d: paths.device.keyboard.key(\"arrowright\")\n      },\n      dest: { vec2: arrows_vec2 },\n      xform: xforms.wasd_to_vec2\n    },\n    {\n      src: {\n        w: paths.device.keyboard.key(\"w\"),\n        a: paths.device.keyboard.key(\"a\"),\n        s: paths.device.keyboard.key(\"s\"),\n        d: paths.device.keyboard.key(\"d\")\n      },\n      dest: { vec2: wasd_vec2 },\n      xform: xforms.wasd_to_vec2\n    },\n    {\n      src: {\n        first: wasd_vec2,\n        second: arrows_vec2\n      },\n      dest: { value: keyboardCharacterAcceleration },\n      xform: xforms.max_vec2\n    },\n    {\n      src: { value: keyboardCharacterAcceleration },\n      dest: { value: paths.actions.characterAcceleration },\n      xform: xforms.normalize_vec2\n    },\n    {\n      src: { value: paths.device.mouse.wheel },\n      dest: { value: paths.actions.dCharSpeed },\n      xform: xforms.scale(-0.3)\n    },\n    {\n      src: { value: paths.device.keyboard.key(\"shift\") },\n      dest: { value: paths.actions.boost },\n      xform: xforms.copy,\n      priority: 1\n    },\n    {\n      src: { value: paths.device.keyboard.key(\"Escape\") },\n      dest: { value: paths.actions.camera.exitMirror },\n      xform: xforms.falling\n    },\n    {\n      src: { value: paths.device.keyboard.key(\"q\") },\n      dest: { value: paths.actions.snapRotateLeft },\n      xform: xforms.rising\n    },\n    {\n      src: { value: paths.device.keyboard.key(\"g\") },\n      dest: { value: paths.actions.toggleFly },\n      xform: xforms.rising\n    },\n    {\n      src: { value: paths.device.keyboard.key(\"`\") },\n      dest: { value: paths.actions.toggleUI },\n      xform: xforms.rising\n    },\n    {\n      src: { value: paths.device.keyboard.key(\"e\") },\n      dest: { value: paths.actions.snapRotateRight },\n      xform: xforms.rising\n    },\n    {\n      src: { value: paths.device.keyboard.key(\"Tab\") },\n      dest: { value: paths.actions.toggleFreeze },\n      xform: xforms.rising\n    },\n    {\n      src: { value: paths.device.keyboard.key(\" \") },\n      dest: { value: paths.actions.ensureFrozen },\n      xform: xforms.copy\n    },\n    {\n      src: { value: paths.device.keyboard.key(\" \") },\n      dest: { value: paths.actions.thaw },\n      xform: xforms.falling\n    },\n    {\n      src: { value: paths.device.keyboard.key(\"p\") },\n      dest: { value: togglePenWithP },\n      xform: xforms.rising\n    },\n    {\n      src: { value: paths.device.hud.penButton },\n      dest: { value: togglePenWithHud },\n      xform: xforms.rising\n    },\n    {\n      src: [togglePenWithHud, togglePenWithP],\n      dest: { value: togglePen },\n      xform: xforms.any\n    },\n    {\n      src: { value: togglePen },\n      dest: { value: paths.actions.spawnPen },\n      xform: xforms.rising,\n      priority: 100\n    },\n    {\n      src: { value: paths.device.keyboard.key(\"c\") },\n      dest: { value: paths.actions.toggleCamera },\n      xform: xforms.rising\n    },\n    {\n      src: { value: paths.device.keyboard.key(\"x\") },\n      dest: { value: paths.actions.takeSnapshot },\n      xform: xforms.copy\n    },\n    {\n      src: { value: paths.device.smartMouse.cursorPose },\n      dest: { value: paths.actions.cursor.right.pose },\n      xform: xforms.copy\n    },\n    {\n      src: { value: paths.device.mouse.coords },\n      dest: { value: \"/var/mouseCoordsDelta\" },\n      xform: xforms.diff_vec2\n    },\n    {\n      src: { value: \"/var/mouseCoordsDelta\" },\n      dest: { x: \"/var/mouseCoordsX\", y: \"/var/mouseCoordsY\" },\n      xform: xforms.split_vec2\n    },\n    {\n      src: { value: \"/var/mouseCoordsX\" },\n      dest: { value: \"/var/mouseCoordsXScaled\" },\n      xform: xforms.scale(-Math.PI)\n    },\n    {\n      src: { value: \"/var/mouseCoordsY\" },\n      dest: { value: \"/var/mouseCoordsYScaled\" },\n      xform: xforms.scale((2 * Math.PI) / 3)\n    },\n    {\n      src: { x: \"/var/mouseCoordsXScaled\", y: \"/var/mouseCoordsYScaled\" },\n      dest: { value: \"/var/actions/cameraDelta\" },\n      xform: xforms.compose_vec2\n    },\n    {\n      src: {\n        value: \"/var/actions/cameraDelta\",\n        bool: paths.device.smartMouse.shouldMoveCamera\n      },\n      dest: { value: paths.actions.cameraDelta },\n      xform: xforms.copyVec2IfTrue\n    },\n    {\n      src: { value: paths.actions.cameraDelta },\n      dest: { value: paths.actions.lobbyCameraDelta },\n      xform: xforms.copy\n    },\n    {\n      src: {\n        value: paths.device.keyboard.key(\"m\")\n      },\n      dest: {\n        value: paths.actions.muteMic\n      },\n      xform: xforms.rising\n    },\n    {\n      src: {\n        value: paths.device.keyboard.key(\"t\")\n      },\n      dest: {\n        value: paths.actions.focusChat\n      },\n      xform: xforms.rising\n    },\n    {\n      src: {\n        value: paths.device.keyboard.key(\"/\")\n      },\n      dest: {\n        value: paths.actions.focusChatCommand\n      },\n      xform: xforms.rising\n    },\n    {\n      src: { value: paths.device.keyboard.key(\"Escape\") },\n      dest: { value: paths.actions.mediaExit },\n      xform: xforms.rising\n    },\n    {\n      src: {\n        bool: paths.device.keyboard.key(\"control\"),\n        value: paths.device.keyboard.key(\"1\")\n      },\n      dest: { value: \"/var/shift+1\" },\n      priority: 1001,\n      xform: xforms.copyIfTrue\n    },\n    {\n      src: { value: \"/var/shift+1\" },\n      dest: { value: paths.actions.mediaSearch1 },\n      xform: xforms.rising\n    },\n    {\n      src: {\n        bool: paths.device.keyboard.key(\"control\"),\n        value: paths.device.keyboard.key(\"2\")\n      },\n      dest: { value: \"/var/shift+2\" },\n      priority: 1001,\n      xform: xforms.copyIfTrue\n    },\n    {\n      src: { value: \"/var/shift+2\" },\n      dest: { value: paths.actions.mediaSearch2 },\n      xform: xforms.rising\n    },\n    {\n      src: {\n        bool: paths.device.keyboard.key(\"control\"),\n        value: paths.device.keyboard.key(\"3\")\n      },\n      dest: { value: \"/var/shift+3\" },\n      priority: 1001,\n      xform: xforms.copyIfTrue\n    },\n    {\n      src: { value: \"/var/shift+3\" },\n      dest: { value: paths.actions.mediaSearch3 },\n      xform: xforms.rising\n    },\n    {\n      src: {\n        bool: paths.device.keyboard.key(\"control\"),\n        value: paths.device.keyboard.key(\"4\")\n      },\n      dest: { value: \"/var/shift+4\" },\n      priority: 1001,\n      xform: xforms.copyIfTrue\n    },\n    {\n      src: { value: \"/var/shift+4\" },\n      dest: { value: paths.actions.mediaSearch4 },\n      xform: xforms.rising\n    },\n    {\n      src: {\n        bool: paths.device.keyboard.key(\"control\"),\n        value: paths.device.keyboard.key(\"5\")\n      },\n      dest: { value: \"/var/shift+5\" },\n      priority: 1001,\n      xform: xforms.copyIfTrue\n    },\n    {\n      src: { value: \"/var/shift+5\" },\n      dest: { value: paths.actions.mediaSearch5 },\n      xform: xforms.rising\n    },\n    {\n      src: {\n        bool: paths.device.keyboard.key(\"control\"),\n        value: paths.device.keyboard.key(\"6\")\n      },\n      dest: { value: \"/var/shift+6\" },\n      priority: 1001,\n      xform: xforms.copyIfTrue\n    },\n    {\n      src: { value: \"/var/shift+6\" },\n      dest: { value: paths.actions.mediaSearch6 },\n      xform: xforms.rising\n    },\n    {\n      src: {\n        bool: paths.device.keyboard.key(\"control\"),\n        value: paths.device.keyboard.key(\"7\")\n      },\n      dest: { value: \"/var/shift+7\" },\n      priority: 1001,\n      xform: xforms.copyIfTrue\n    },\n    {\n      src: { value: \"/var/shift+7\" },\n      dest: { value: paths.actions.mediaSearch7 },\n      xform: xforms.rising\n    },\n    {\n      src: {\n        bool: paths.device.keyboard.key(\"control\"),\n        value: paths.device.keyboard.key(\"8\")\n      },\n      dest: { value: \"/var/shift+8\" },\n      priority: 1001,\n      xform: xforms.copyIfTrue\n    },\n    {\n      src: { value: \"/var/shift+8\" },\n      dest: { value: paths.actions.mediaSearch8 },\n      xform: xforms.rising\n    },\n    {\n      src: {\n        value: paths.device.keyboard.key(\"l\")\n      },\n      dest: {\n        value: paths.actions.logDebugFrame\n      },\n      xform: xforms.rising\n    },\n    {\n      src: {\n        value: paths.device.keyboard.key(\"k\")\n      },\n      dest: {\n        value: paths.actions.logInteractionState\n      },\n      xform: xforms.rising\n    },\n    {\n      src: {\n        value: paths.device.mouse.buttonRight\n      },\n      dest: {\n        value: paths.actions.startGazeTeleport\n      },\n      xform: xforms.rising,\n      priority: 100\n    },\n    {\n      src: {\n        value: paths.device.mouse.buttonRight\n      },\n      dest: {\n        value: paths.actions.stopGazeTeleport\n      },\n      xform: xforms.falling,\n      priority: 100\n    },\n    {\n      src: { value: paths.device.keyboard.key(\"o\") },\n      dest: { value: paths.actions.nextCameraMode },\n      xform: xforms.rising\n    }\n\n    // Helpful bindings for debugging hands in 2D\n    // {\n    //   src: {},\n    //   dest: { value: paths.actions.rightHand.matrix },\n    //   xform: xforms.always(\n    //     new THREE.Matrix4().compose(\n    //       new THREE.Vector3(0.2, 1.3, -0.8),\n    //       new THREE.Quaternion(0, 0, 0, 0),\n    //       new THREE.Vector3(1, 1, 1)\n    //     )\n    //   )\n    // },\n    // {\n    //   src: {},\n    //   dest: { value: paths.actions.leftHand.matrix },\n    //   xform: xforms.always(\n    //     new THREE.Matrix4().compose(\n    //       new THREE.Vector3(-0.2, 1.4, -0.8),\n    //       new THREE.Quaternion(0, 0, 0, 0),\n    //       new THREE.Vector3(1, 1, 1)\n    //     )\n    //   )\n    // }\n  ],\n\n  [sets.rightCursorHoldingPen]: [\n    {\n      src: {\n        bool: paths.device.keyboard.key(\"shift\"),\n        value: paths.device.keyboard.key(\"q\")\n      },\n      dest: { value: \"/var/shift+q\" },\n      xform: xforms.copyIfTrue,\n      priority: 1\n    },\n    {\n      src: { value: \"/var/shift+q\" },\n      dest: { value: paths.actions.cursor.right.penPrevColor },\n      xform: xforms.rising\n    },\n    {\n      src: {\n        bool: paths.device.keyboard.key(\"shift\"),\n        value: paths.device.keyboard.key(\"e\")\n      },\n      dest: { value: \"/var/shift+e\" },\n      xform: xforms.copyIfTrue,\n      priority: 1\n    },\n    {\n      src: { value: \"/var/shift+e\" },\n      dest: { value: paths.actions.cursor.right.penNextColor },\n      xform: xforms.rising\n    },\n    {\n      src: {\n        bool: paths.device.keyboard.key(\"shift\"),\n        value: paths.device.keyboard.key(\"q\")\n      },\n      dest: { value: \"/var/notshift+q\" },\n      xform: xforms.copyIfFalse,\n      priority: 1\n    },\n    {\n      src: { value: \"/var/notshift+q\" },\n      dest: { value: paths.actions.snapRotateLeft },\n      xform: xforms.rising,\n      priority: 200\n    },\n    {\n      src: {\n        bool: paths.device.keyboard.key(\"shift\"),\n        value: paths.device.keyboard.key(\"e\")\n      },\n      dest: { value: \"/var/notshift+e\" },\n      xform: xforms.copyIfFalse,\n      priority: 1\n    },\n    {\n      src: { value: \"/var/notshift+e\" },\n      dest: { value: paths.actions.snapRotateRight },\n      xform: xforms.rising,\n      priority: 200\n    },\n    {\n      src: { value: paths.device.mouse.buttonLeft },\n      dest: { value: paths.actions.cursor.right.startDrawing },\n      xform: xforms.rising,\n      priority: 3\n    },\n    {\n      src: { value: paths.device.mouse.buttonLeft },\n      dest: { value: paths.actions.cursor.right.stopDrawing },\n      xform: xforms.falling,\n      priority: 3\n    },\n    {\n      src: {\n        value: k(\"wheelWithShift\")\n      },\n      dest: { value: \"/var/cursorScalePenTipWheel\" },\n      xform: xforms.copy,\n      priority: 200\n    },\n    {\n      src: { value: \"/var/cursorScalePenTipWheel\" },\n      dest: { value: paths.actions.cursor.right.scalePenTip },\n      xform: xforms.scale(0.03)\n    },\n    {\n      src: { value: paths.device.mouse.buttonRight },\n      dest: { value: togglePenWithRMB },\n      xform: xforms.falling,\n      priority: 200\n    },\n    {\n      src: { value: paths.device.keyboard.key(\"Escape\") },\n      dest: { value: togglePenWithEsc },\n      xform: xforms.rising\n    },\n    {\n      src: [togglePenWithRMB, togglePenWithEsc, togglePenWithP, togglePenWithHud],\n      dest: { value: togglePen },\n      xform: xforms.any\n    },\n    {\n      src: {\n        bool: paths.device.keyboard.key(\"control\"),\n        value: paths.device.keyboard.key(\"z\")\n      },\n      dest: { value: paths.actions.cursor.right.undoDrawing },\n      priority: 1001,\n      xform: xforms.rising\n    },\n    {\n      src: { value: togglePen },\n      dest: { value: paths.actions.cursor.right.drop },\n      xform: xforms.rising,\n      priority: 200\n    },\n    {\n      src: { value: togglePen },\n      dest: { value: paths.actions.pen.remove },\n      xform: xforms.rising,\n      priority: 200\n    }\n  ],\n\n  [sets.rightCursorHoldingCamera]: [\n    {\n      src: { value: paths.device.mouse.buttonLeft },\n      dest: { value: paths.actions.cursor.right.drop },\n      xform: xforms.falling,\n      priority: 2\n    },\n    {\n      src: {\n        value: k(\"wheelWithShift\")\n      },\n      dest: { value: paths.actions.cursor.right.scaleGrabbedGrabbable },\n      xform: xforms.noop,\n      priority: 2\n    }\n  ],\n\n  [sets.rightCursorHoldingInteractable]: [\n    {\n      src: {\n        bool: paths.device.keyboard.key(\"shift\"),\n        value: paths.device.mouse.wheel\n      },\n      dest: {\n        value: k(\"wheelWithShift\")\n      },\n      xform: xforms.copyIfTrue,\n      priority: 1\n    },\n    {\n      src: {\n        bool: paths.device.keyboard.key(\"shift\"),\n        value: paths.device.mouse.wheel\n      },\n      dest: {\n        value: k(\"wheelWithoutShift\")\n      },\n      xform: xforms.copyIfFalse,\n      priority: 1\n    },\n    {\n      src: {\n        value: k(\"wheelWithoutShift\")\n      },\n      dest: { value: paths.actions.cursor.right.modDelta },\n      xform: xforms.copy\n    },\n    {\n      src: {\n        value: k(\"wheelWithShift\")\n      },\n      dest: { value: paths.actions.cursor.right.scaleGrabbedGrabbable },\n      xform: xforms.copy\n    },\n    {\n      src: { value: paths.device.mouse.buttonLeft },\n      dest: { value: paths.actions.cursor.right.drop },\n      xform: xforms.falling,\n      priority: 2\n    }\n  ],\n  [sets.rightCursorHoldingUI]: [\n    {\n      src: { value: paths.device.mouse.buttonLeft },\n      dest: { value: paths.actions.cursor.right.drop },\n      xform: xforms.falling,\n      priority: 3\n    },\n    {\n      src: { value: paths.device.keyboard.key(\"shift\") },\n      dest: { value: paths.actions.transformModifier },\n      xform: xforms.copy,\n      priority: 1\n    }\n  ],\n  [sets.rightCursorHoveringOnInteractable]: [\n    {\n      src: { value: paths.device.mouse.buttonLeft },\n      dest: { value: paths.actions.cursor.right.grab },\n      xform: xforms.rising,\n      priority: 1\n    },\n    {\n      src: { value: paths.device.mouse.buttonRight },\n      dest: { value: startInspectingViaMouse },\n      xform: xforms.rising,\n      priority: 200\n    },\n    {\n      src: { value: paths.device.keyboard.key(\"f\") },\n      dest: { value: startInspectingViaKeyboard },\n      xform: xforms.rising,\n      priority: 200\n    },\n    {\n      src: [startInspectingViaMouse, startInspectingViaKeyboard],\n      dest: { value: paths.actions.startInspecting },\n      xform: xforms.any,\n      priority: 201\n    }\n  ],\n  [sets.rightCursorHoveringOnVideo]: [\n    {\n      src: { value: paths.device.mouse.wheel },\n      dest: { value: paths.actions.cursor.right.mediaVolumeMod },\n      xform: xforms.scale(-0.3),\n      priority: 1\n    }\n  ],\n  [sets.inputFocused]: [\n    {\n      src: { value: \"/device/keyboard\" },\n      dest: { value: paths.noop },\n      xform: xforms.noop,\n      priority: 1000\n    }\n  ],\n\n  [sets.rightCursorHoveringOnUI]: [\n    {\n      src: { value: paths.device.mouse.buttonLeft },\n      dest: { value: paths.actions.cursor.right.grab },\n      xform: xforms.rising\n    }\n  ],\n  [sets.inspecting]: [\n    {\n      src: { value: paths.device.keyboard.key(\"space\") },\n      dest: { value: k(\"space-rising\") },\n      xform: xforms.rising\n    },\n    {\n      src: [\n        paths.device.keyboard.key(\"w\"),\n        paths.device.keyboard.key(\"a\"),\n        paths.device.keyboard.key(\"s\"),\n        paths.device.keyboard.key(\"d\"),\n        paths.device.keyboard.key(\"q\"),\n        paths.device.keyboard.key(\"e\"),\n        k(\"space-rising\")\n      ],\n      dest: { value: stopInspectingViaKeyboardEscape },\n      xform: xforms.any\n    },\n    {\n      src: { value: paths.device.mouse.wheel },\n      dest: { value: paths.actions.inspectZoom },\n      xform: xforms.scale(inspectZoomSpeed),\n      priority: 1\n    },\n    {\n      src: { value: paths.device.mouse.movementXY },\n      dest: { x: \"/var/movementX\", y: \"/var/movementY\" },\n      xform: xforms.split_vec2\n    },\n    {\n      src: { bool: paths.device.mouse.buttonMiddle, value: \"/var/movementY\" },\n      dest: { value: \"/var/middle-mouse-move-y\" },\n      xform: xforms.copyIfTrue\n    },\n    {\n      src: { value: \"/var/middle-mouse-move-y\" },\n      dest: { value: paths.actions.inspectPanY },\n      xform: xforms.scale(0.001)\n    },\n    {\n      src: { value: paths.device.keyboard.key(\"f\") },\n      dest: { value: stopInspectingViaKeyboardFocusRelease },\n      xform: xforms.falling\n    },\n    {\n      src: { value: paths.device.mouse.buttonRight },\n      dest: { value: stopInspectingViaMouse },\n      xform: xforms.falling,\n      priority: 101\n    },\n    {\n      src: [stopInspectingViaMouse, stopInspectingViaKeyboardEscape, stopInspectingViaKeyboardFocusRelease],\n      dest: { value: paths.actions.stopInspecting },\n      xform: xforms.any\n    }\n  ],\n  [sets.debugUserInput]: [\n    {\n      src: { value: paths.device.keyboard.key(\"m\") },\n      dest: { value: paths.actions.debugUserInput.describeCurrentMasks },\n      xform: xforms.rising,\n      priority: 10\n    }\n  ]\n});\n","import { paths } from \"../paths\";\nimport { sets } from \"../sets\";\nimport { xforms } from \"./xforms\";\nimport { addSetsToBindings } from \"./utils\";\n\nconst zero = \"/vars/touchscreen/zero\";\nconst forward = \"/vars/touchscreen/pinchDeltaForward\";\nconst touchCamDelta = \"vars/touchscreen/touchCameraDelta\";\nconst touchCamDeltaX = \"vars/touchscreen/touchCameraDelta/x\";\nconst touchCamDeltaY = \"vars/touchscreen/touchCameraDelta/y\";\nconst touchCamDeltaXScaled = \"vars/touchscreen/touchCameraDelta/x/scaled\";\nconst touchCamDeltaYScaled = \"vars/touchscreen/touchCameraDelta/y/scaled\";\nconst gyroCamDelta = \"vars/gyro/gyroCameraDelta\";\nconst gyroCamDeltaXScaled = \"vars/gyro/gyroCameraDelta/x/scaled\";\nconst gyroCamDeltaYScaled = \"vars/gyro/gyroCameraDelta/y/scaled\";\nconst togglePen = \"/vars/touchscreen/togglePen\";\n\nexport const touchscreenUserBindings = addSetsToBindings({\n  [sets.global]: [\n    {\n      src: {},\n      dest: { value: paths.actions.cursor.right.hideLine },\n      xform: xforms.always(true)\n    },\n    {\n      src: { value: paths.device.touchscreen.pinch.delta },\n      dest: { value: forward },\n      xform: xforms.scale(0.25)\n    },\n    {\n      src: { value: paths.device.touchscreen.tap2 },\n      dest: { value: paths.actions.toggleFreeze },\n      xform: xforms.copy\n    },\n    {\n      src: {},\n      dest: { value: zero },\n      xform: xforms.always(0)\n    },\n    {\n      src: { x: zero, y: forward },\n      dest: { value: paths.actions.characterAcceleration },\n      xform: xforms.compose_vec2\n    },\n    {\n      src: { value: paths.device.touchscreen.cursorPose },\n      dest: { value: paths.actions.cursor.right.pose },\n      xform: xforms.copy\n    },\n    {\n      src: { value: paths.device.touchscreen.touchCameraDelta },\n      dest: { x: touchCamDeltaX, y: touchCamDeltaY },\n      xform: xforms.split_vec2\n    },\n    {\n      src: { value: touchCamDeltaX },\n      dest: { value: touchCamDeltaXScaled },\n      xform: xforms.scale(Math.PI)\n    },\n    {\n      src: { value: touchCamDeltaY },\n      dest: { value: touchCamDeltaYScaled },\n      xform: xforms.scale(Math.PI / 2)\n    },\n    {\n      src: { x: touchCamDeltaXScaled, y: touchCamDeltaYScaled },\n      dest: { value: touchCamDelta },\n      xform: xforms.compose_vec2\n    },\n    {\n      src: { value: paths.device.gyro.averageDeltaX },\n      dest: { value: gyroCamDeltaXScaled },\n      xform: xforms.scale(1.0)\n    },\n    {\n      src: { value: paths.device.gyro.averageDeltaY },\n      dest: { value: gyroCamDeltaYScaled },\n      xform: xforms.scale(1.0)\n    },\n    {\n      src: { x: gyroCamDeltaYScaled, y: gyroCamDeltaXScaled },\n      dest: { value: gyroCamDelta },\n      xform: xforms.compose_vec2\n    },\n    {\n      src: {\n        first: touchCamDelta,\n        second: gyroCamDelta\n      },\n      dest: { value: paths.actions.cameraDelta },\n      xform: xforms.add_vec2\n    },\n    {\n      src: { value: touchCamDelta },\n      dest: { value: paths.actions.lobbyCameraDelta },\n      xform: xforms.copy\n    },\n    {\n      src: { value: paths.device.touchscreen.isTouchingGrabbable },\n      dest: { value: paths.actions.cursor.right.grab },\n      xform: xforms.rising\n    },\n    {\n      src: { value: paths.device.hud.penButton },\n      dest: { value: togglePen },\n      xform: xforms.rising\n    },\n    {\n      src: { value: togglePen },\n      dest: { value: paths.actions.spawnPen },\n      xform: xforms.rising,\n      priority: 2\n    }\n  ],\n  [sets.rightCursorHoldingInteractable]: [\n    {\n      src: { value: paths.device.touchscreen.isTouchingGrabbable },\n      dest: { value: paths.actions.cursor.right.drop },\n      xform: xforms.falling,\n      priority: 1\n    }\n  ],\n\n  [sets.rightCursorHoveringOnPen]: [],\n  [sets.rightCursorHoldingPen]: [\n    {\n      src: { value: paths.device.touchscreen.isTouchingGrabbable },\n      dest: { value: paths.actions.cursor.right.startDrawing },\n      xform: xforms.risingWithFrameDelay(5),\n      priority: 2\n    },\n    {\n      src: { value: paths.device.touchscreen.isTouchingGrabbable },\n      dest: { value: paths.actions.cursor.right.stopDrawing },\n      xform: xforms.falling,\n      priority: 2\n    },\n    {\n      src: { value: togglePen },\n      dest: { value: paths.actions.cursor.right.drop },\n      xform: xforms.rising,\n      priority: 3\n    },\n    {\n      src: { value: togglePen },\n      dest: { value: paths.actions.pen.remove },\n      xform: xforms.rising,\n      priority: 3\n    }\n  ],\n\n  [sets.inspecting]: [\n    {\n      src: { value: paths.device.touchscreen.anything },\n      dest: { value: paths.actions.stopInspecting },\n      xform: xforms.rising\n    },\n    {\n      src: { value: paths.device.touchscreen.pinch.delta },\n      dest: { value: paths.actions.inspectZoom },\n      xform: xforms.scale(0.025),\n      priority: 1\n    }\n  ]\n});\n","import { paths } from \"../paths\";\nimport { sets } from \"../sets\";\nimport { xforms } from \"./xforms\";\nimport { addSetsToBindings } from \"./utils\";\n\nexport const keyboardDebuggingBindings = addSetsToBindings({\n  [sets.global]: [\n    {\n      src: {\n        value: paths.device.keyboard.key(\"l\")\n      },\n      dest: {\n        value: paths.actions.logDebugFrame\n      },\n      xform: xforms.rising\n    }\n  ]\n});\n","import { paths } from \"../paths\";\nimport { sets } from \"../sets\";\nimport { xforms } from \"./xforms\";\nimport { addSetsToBindings } from \"./utils\";\n\nconst name = \"/touch/var/\";\n\nconst leftButton = paths.device.leftOculusTouch.button;\nconst leftAxis = paths.device.leftOculusTouch.axis;\nconst leftPose = paths.device.leftOculusTouch.pose;\nconst rightButton = paths.device.rightOculusTouch.button;\nconst rightAxis = paths.device.rightOculusTouch.axis;\nconst rightPose = paths.device.rightOculusTouch.pose;\n\nconst wakeLeft = `${name}left/wake`;\nconst wakeRight = `${name}right/wake`;\nconst leftJoyXDeadzoned = `${name}left/joy/x/deadzoned`;\nconst leftJoyYDeadzoned = `${name}left/joy/y/deadzoned`;\nconst scaledLeftJoyX = `${name}left/scaledJoyX`;\nconst scaledLeftJoyY = `${name}left/scaledJoyY`;\nconst cursorDrop2 = `${name}right/cursorDrop2`;\nconst cursorDrop1 = `${name}right/cursorDrop1`;\nconst leftCursorDrop2 = `${name}left/cursorDrop2`;\nconst leftCursorDrop1 = `${name}left/cursorDrop1`;\nconst rightHandDrop2 = `${name}right/rightHandDrop2`;\nconst rightGripRisingGrab = `${name}right/grip/RisingGrab`;\nconst rightTriggerRisingGrab = `${name}right/trigger/RisingGrab`;\nconst leftGripRisingGrab = `${name}left/grip/RisingGrab`;\nconst leftTriggerRisingGrab = `${name}left/trigger/RisingGrab`;\nconst rightDpadNorth = `${name}rightDpad/north`;\nconst rightDpadSouth = `${name}rightDpad/south`;\nconst rightDpadEast = `${name}rightDpad/east`;\nconst rightDpadWest = `${name}rightDpad/west`;\nconst rightDpadCenter = `${name}rightDpad/center`;\nconst rightJoy = `${name}right/joy`;\nconst rightJoyY1 = `${name}right/joyY1`;\nconst rightJoyY2 = `${name}right/joyY2`;\nconst rightJoyYDeadzoned = `${name}right/joy/y/deadzoned`;\nconst leftDpadNorth = `${name}leftDpad/north`;\nconst leftDpadSouth = `${name}leftDpad/south`;\nconst leftDpadEast = `${name}leftDpad/east`;\nconst leftDpadWest = `${name}leftDpad/west`;\nconst leftDpadCenter = `${name}leftDpad/center`;\nconst leftJoy = `${name}left/joy`;\nconst oculusTouchCharacterAcceleration = `${name}characterAcceleration`;\nconst keyboardCharacterAcceleration = \"/var/keyboard/characterAcceleration\";\nconst characterAcceleration = \"/var/oculus-touch/nonNormalizedCharacterAcceleration\";\nconst wasd_vec2 = \"/var/keyboard/wasd_vec2\";\nconst arrows_vec2 = \"/var/keyboard/arrows_vec2\";\nconst keyboardBoost = \"/var/keyboard-oculus/boost\";\nconst rightBoost = \"/var/right-oculus/boost\";\nconst leftBoost = \"/var/left-oculus/boost\";\nconst rightTouchSnapRight = `${name}/right/snap-right`;\nconst rightTouchSnapLeft = `${name}/right/snap-left`;\nconst keyboardSnapRight = `${name}/keyboard/snap-right`;\nconst keyboardSnapLeft = `${name}/keyboard/snap-left`;\n\nconst lowerButtons = `${name}buttons/lower`;\nconst upperButtons = `${name}buttons/upper`;\n\nconst ensureFrozenViaButtons = `${name}buttons/ensureFrozen`;\nconst ensureFrozenViaKeyboard = `${name}keyboard/ensureFrozen`;\n\nconst thawViaButtons = `${name}buttons/thaw`;\nconst thawViaKeyboard = `${name}keyboard/thaw`;\n\nconst v = s => {\n  return \"/oculus-touch-user-vars/\" + s;\n};\nconst leftGripPressed1 = v(\"leftGripPressed1\");\nconst leftGripPressed2 = v(\"leftGripPressed2\");\nconst rightGripPressed1 = v(\"rightGripPressed1\");\nconst rightGripPressed2 = v(\"rightGripPressed2\");\nconst leftTriggerPressed1 = v(\"leftTriggerPressed1\");\nconst leftTriggerPressed2 = v(\"leftTriggerPressed2\");\nconst rightTriggerPressed1 = v(\"rightTriggerPressed1\");\nconst rightTriggerPressed2 = v(\"rightTriggerPressed2\");\n\nexport const oculusTouchUserBindings = addSetsToBindings({\n  [sets.global]: [\n    {\n      src: {\n        value: paths.device.leftOculusTouch.matrix\n      },\n      dest: {\n        value: paths.actions.leftHand.matrix\n      },\n      xform: xforms.copy\n    },\n    {\n      src: {\n        value: paths.device.rightOculusTouch.matrix\n      },\n      dest: {\n        value: paths.actions.rightHand.matrix\n      },\n      xform: xforms.copy\n    },\n    {\n      src: [ensureFrozenViaButtons, ensureFrozenViaKeyboard],\n      dest: { value: paths.actions.ensureFrozen },\n      xform: xforms.any\n    },\n    {\n      src: [thawViaButtons, thawViaKeyboard],\n      dest: { value: paths.actions.thaw },\n      xform: xforms.any\n    },\n    {\n      src: {\n        value: leftButton(\"grip\").pressed\n      },\n      dest: {\n        value: leftGripPressed1\n      },\n      xform: xforms.copy\n    },\n    {\n      src: {\n        value: leftButton(\"grip\").pressed\n      },\n      dest: {\n        value: leftGripPressed2\n      },\n      xform: xforms.copy\n    },\n    {\n      src: {\n        value: leftGripPressed1\n      },\n      dest: {\n        value: paths.actions.leftHand.middleRingPinky\n      },\n      xform: xforms.copy\n    },\n    {\n      src: [leftButton(\"x\").touched, leftButton(\"y\").touched, leftButton(\"thumbStick\").touched],\n      dest: {\n        value: paths.actions.leftHand.thumb\n      },\n      xform: xforms.any\n    },\n    {\n      src: { value: leftButton(\"trigger\").pressed },\n      dest: {\n        value: leftTriggerPressed1\n      },\n      xform: xforms.copy\n    },\n    {\n      src: { value: leftButton(\"trigger\").pressed },\n      dest: {\n        value: leftTriggerPressed2\n      },\n      xform: xforms.copy\n    },\n    {\n      src: { value: leftTriggerPressed1 },\n      dest: {\n        value: paths.actions.leftHand.index\n      },\n      xform: xforms.copy\n    },\n    {\n      src: {\n        value: rightButton(\"grip\").pressed\n      },\n      dest: {\n        value: rightGripPressed1\n      },\n      xform: xforms.copy\n    },\n    {\n      src: {\n        value: rightButton(\"grip\").pressed\n      },\n      dest: {\n        value: rightGripPressed2\n      },\n      xform: xforms.copy\n    },\n    {\n      src: {\n        value: rightGripPressed1\n      },\n      dest: {\n        value: paths.actions.rightHand.middleRingPinky\n      },\n      xform: xforms.copy\n    },\n    {\n      src: [rightButton(\"a\").touched, rightButton(\"b\").touched, rightButton(\"thumbStick\").touched],\n      dest: {\n        value: paths.actions.rightHand.thumb\n      },\n      xform: xforms.any\n    },\n    {\n      src: { value: rightButton(\"trigger\").pressed },\n      dest: {\n        value: rightTriggerPressed1\n      },\n      xform: xforms.copy\n    },\n    {\n      src: { value: rightButton(\"trigger\").pressed },\n      dest: {\n        value: rightTriggerPressed2\n      },\n      xform: xforms.copy\n    },\n    {\n      src: { value: rightTriggerPressed1 },\n      dest: {\n        value: paths.actions.rightHand.index\n      },\n      xform: xforms.copy\n    },\n    {\n      src: {\n        x: leftAxis(\"joyX\"),\n        y: leftAxis(\"joyY\")\n      },\n      dest: {\n        value: leftJoy\n      },\n      xform: xforms.compose_vec2\n    },\n    {\n      src: {\n        value: leftJoy\n      },\n      dest: {\n        north: leftDpadNorth,\n        south: leftDpadSouth,\n        east: leftDpadEast,\n        west: leftDpadWest,\n        center: leftDpadCenter\n      },\n      xform: xforms.vec2dpad(0.2, false, true)\n    },\n    {\n      src: {\n        value: rightAxis(\"joyY\")\n      },\n      dest: { value: rightJoyY1 },\n      xform: xforms.copy\n    },\n    {\n      src: {\n        value: rightAxis(\"joyY\")\n      },\n      dest: { value: rightJoyY2 },\n      xform: xforms.copy\n    },\n    {\n      src: {\n        x: rightAxis(\"joyX\"),\n        y: rightJoyY1\n      },\n      dest: {\n        value: rightJoy\n      },\n      xform: xforms.compose_vec2\n    },\n    {\n      src: {\n        value: rightJoy\n      },\n      dest: {\n        north: rightDpadNorth,\n        south: rightDpadSouth,\n        east: rightDpadEast,\n        west: rightDpadWest,\n        center: rightDpadCenter\n      },\n      xform: xforms.vec2dpad(0.2, false, true)\n    },\n    {\n      src: {\n        value: rightDpadEast\n      },\n      dest: {\n        value: rightTouchSnapRight\n      },\n      xform: xforms.rising,\n      priority: 1\n    },\n    {\n      src: { value: paths.device.keyboard.key(\"e\") },\n      dest: { value: keyboardSnapRight },\n      xform: xforms.rising\n    },\n    {\n      src: [rightTouchSnapRight, keyboardSnapRight],\n      dest: { value: paths.actions.snapRotateRight },\n      xform: xforms.any\n    },\n    {\n      src: { value: paths.device.keyboard.key(\"Tab\") },\n      dest: { value: paths.actions.toggleFreeze },\n      xform: xforms.rising\n    },\n    {\n      src: { value: paths.device.keyboard.key(\" \") },\n      dest: { value: ensureFrozenViaKeyboard },\n      xform: xforms.copy\n    },\n    {\n      src: [leftButton(\"x\").pressed, rightButton(\"a\").pressed],\n      dest: { value: lowerButtons },\n      xform: xforms.any\n    },\n    {\n      src: [leftButton(\"y\").pressed, rightButton(\"b\").pressed],\n      dest: { value: upperButtons },\n      xform: xforms.any\n    },\n    {\n      src: { value: lowerButtons },\n      dest: { value: ensureFrozenViaButtons },\n      xform: xforms.copy\n    },\n    {\n      src: { value: lowerButtons },\n      dest: { value: thawViaButtons },\n      xform: xforms.falling\n    },\n    {\n      src: { value: paths.device.keyboard.key(\" \") },\n      dest: { value: thawViaKeyboard },\n      xform: xforms.falling\n    },\n    {\n      src: {\n        value: rightDpadWest\n      },\n      dest: {\n        value: rightTouchSnapLeft\n      },\n      xform: xforms.rising,\n      priority: 1\n    },\n    {\n      src: { value: paths.device.keyboard.key(\"q\") },\n      dest: { value: keyboardSnapLeft },\n      xform: xforms.rising\n    },\n    {\n      src: [rightTouchSnapLeft, keyboardSnapLeft],\n      dest: { value: paths.actions.snapRotateLeft },\n      xform: xforms.any\n    },\n    {\n      src: {\n        value: leftAxis(\"joyY\")\n      },\n      dest: {\n        value: leftJoyYDeadzoned\n      },\n      xform: xforms.deadzone(0.1)\n    },\n    {\n      src: {\n        value: leftJoyYDeadzoned\n      },\n      dest: {\n        value: scaledLeftJoyY\n      },\n      xform: xforms.scale(-1.5) // horizontal character speed modifier\n    },\n    {\n      src: {\n        value: leftAxis(\"joyX\")\n      },\n      dest: {\n        value: leftJoyXDeadzoned\n      },\n      xform: xforms.deadzone(0.1)\n    },\n    {\n      src: {\n        value: leftJoyXDeadzoned\n      },\n      dest: {\n        value: scaledLeftJoyX\n      },\n      xform: xforms.scale(1.5) // horizontal character speed modifier\n    },\n    {\n      src: {\n        x: scaledLeftJoyX,\n        y: scaledLeftJoyY\n      },\n      dest: { value: oculusTouchCharacterAcceleration },\n      xform: xforms.compose_vec2\n    },\n    {\n      src: {\n        w: paths.device.keyboard.key(\"arrowup\"),\n        a: paths.device.keyboard.key(\"arrowleft\"),\n        s: paths.device.keyboard.key(\"arrowdown\"),\n        d: paths.device.keyboard.key(\"arrowright\")\n      },\n      dest: { vec2: arrows_vec2 },\n      xform: xforms.wasd_to_vec2\n    },\n    {\n      src: {\n        w: paths.device.keyboard.key(\"w\"),\n        a: paths.device.keyboard.key(\"a\"),\n        s: paths.device.keyboard.key(\"s\"),\n        d: paths.device.keyboard.key(\"d\")\n      },\n      dest: { vec2: wasd_vec2 },\n      xform: xforms.wasd_to_vec2\n    },\n    {\n      src: {\n        first: wasd_vec2,\n        second: arrows_vec2\n      },\n      dest: { value: keyboardCharacterAcceleration },\n      xform: xforms.max_vec2\n    },\n    {\n      src: {\n        first: oculusTouchCharacterAcceleration,\n        second: keyboardCharacterAcceleration\n      },\n      dest: {\n        value: characterAcceleration\n      },\n      xform: xforms.max_vec2\n    },\n    {\n      src: {\n        value: characterAcceleration,\n        override: \"/device/overrides/foo\"\n      },\n      dest: { value: paths.actions.characterAcceleration },\n      xform: xforms.copy\n    },\n    {\n      src: { value: paths.device.keyboard.key(\"shift\") },\n      dest: { value: keyboardBoost },\n      xform: xforms.copy\n    },\n    {\n      src: {\n        value: leftButton(\"y\").pressed\n      },\n      dest: {\n        value: leftBoost\n      },\n      xform: xforms.copy\n    },\n    {\n      src: {\n        value: rightButton(\"b\").pressed\n      },\n      dest: {\n        value: rightBoost\n      },\n      xform: xforms.copy\n    },\n    {\n      src: {\n        value: leftButton(\"thumbStick\").pressed\n      },\n      dest: {\n        value: paths.actions.nextCameraMode\n      },\n      xform: xforms.rising\n    },\n    {\n      src: {\n        value: rightButton(\"thumbStick\").pressed\n      },\n      dest: {\n        value: paths.actions.toggleFly\n      },\n      xform: xforms.rising\n    },\n    {\n      src: [keyboardBoost, leftBoost, rightBoost],\n      dest: { value: paths.actions.boost },\n      xform: xforms.any\n    },\n    {\n      src: {\n        value: paths.device.keyboard.key(\"t\")\n      },\n      dest: {\n        value: paths.actions.focusChat\n      },\n      xform: xforms.rising\n    },\n    {\n      src: {\n        value: paths.device.keyboard.key(\"/\")\n      },\n      dest: {\n        value: paths.actions.focusChatCommand\n      },\n      xform: xforms.rising\n    },\n    {\n      src: { value: paths.device.keyboard.key(\"Escape\") },\n      dest: { value: paths.actions.mediaExit },\n      xform: xforms.rising\n    },\n    {\n      src: { value: paths.device.keyboard.key(\"p\") },\n      dest: { value: paths.actions.spawnPen },\n      xform: xforms.rising\n    },\n    {\n      src: { value: paths.device.keyboard.key(\"c\") },\n      dest: { value: paths.actions.toggleCamera },\n      xform: xforms.rising\n    },\n    {\n      src: { value: paths.device.keyboard.key(\"x\") },\n      dest: { value: paths.actions.takeSnapshot },\n      xform: xforms.copy\n    },\n    {\n      src: {\n        bool: paths.device.keyboard.key(\"control\"),\n        value: paths.device.keyboard.key(\"1\")\n      },\n      dest: { value: \"/var/shift+1\" },\n      priority: 1001,\n      xform: xforms.copyIfTrue\n    },\n    {\n      src: { value: \"/var/shift+1\" },\n      dest: { value: paths.actions.mediaSearch1 },\n      xform: xforms.rising\n    },\n    {\n      src: {\n        bool: paths.device.keyboard.key(\"control\"),\n        value: paths.device.keyboard.key(\"2\")\n      },\n      dest: { value: \"/var/shift+2\" },\n      priority: 1001,\n      xform: xforms.copyIfTrue\n    },\n    {\n      src: { value: \"/var/shift+2\" },\n      dest: { value: paths.actions.mediaSearch2 },\n      xform: xforms.rising\n    },\n    {\n      src: {\n        bool: paths.device.keyboard.key(\"control\"),\n        value: paths.device.keyboard.key(\"3\")\n      },\n      dest: { value: \"/var/shift+3\" },\n      priority: 1001,\n      xform: xforms.copyIfTrue\n    },\n    {\n      src: { value: \"/var/shift+3\" },\n      dest: { value: paths.actions.mediaSearch3 },\n      xform: xforms.rising\n    },\n    {\n      src: {\n        bool: paths.device.keyboard.key(\"control\"),\n        value: paths.device.keyboard.key(\"4\")\n      },\n      dest: { value: \"/var/shift+4\" },\n      priority: 1001,\n      xform: xforms.copyIfTrue\n    },\n    {\n      src: { value: \"/var/shift+4\" },\n      dest: { value: paths.actions.mediaSearch4 },\n      xform: xforms.rising\n    },\n    {\n      src: {\n        bool: paths.device.keyboard.key(\"control\"),\n        value: paths.device.keyboard.key(\"5\")\n      },\n      dest: { value: \"/var/shift+5\" },\n      priority: 1001,\n      xform: xforms.copyIfTrue\n    },\n    {\n      src: { value: \"/var/shift+5\" },\n      dest: { value: paths.actions.mediaSearch5 },\n      xform: xforms.rising\n    },\n    {\n      src: {\n        bool: paths.device.keyboard.key(\"control\"),\n        value: paths.device.keyboard.key(\"6\")\n      },\n      dest: { value: \"/var/shift+6\" },\n      priority: 1001,\n      xform: xforms.copyIfTrue\n    },\n    {\n      src: { value: \"/var/shift+6\" },\n      dest: { value: paths.actions.mediaSearch6 },\n      xform: xforms.rising\n    },\n    {\n      src: {\n        bool: paths.device.keyboard.key(\"control\"),\n        value: paths.device.keyboard.key(\"7\")\n      },\n      dest: { value: \"/var/shift+7\" },\n      priority: 1001,\n      xform: xforms.copyIfTrue\n    },\n    {\n      src: { value: \"/var/shift+7\" },\n      dest: { value: paths.actions.mediaSearch7 },\n      xform: xforms.rising\n    },\n    {\n      src: {\n        bool: paths.device.keyboard.key(\"control\"),\n        value: paths.device.keyboard.key(\"8\")\n      },\n      dest: { value: \"/var/shift+8\" },\n      priority: 1001,\n      xform: xforms.copyIfTrue\n    },\n    {\n      src: { value: \"/var/shift+8\" },\n      dest: { value: paths.actions.mediaSearch8 },\n      xform: xforms.rising\n    },\n    {\n      src: {\n        value: paths.device.keyboard.key(\"l\")\n      },\n      dest: {\n        value: paths.actions.logDebugFrame\n      },\n      xform: xforms.rising\n    },\n    {\n      src: {\n        value: paths.device.keyboard.key(\"k\")\n      },\n      dest: {\n        value: paths.actions.logInteractionState\n      },\n      xform: xforms.rising\n    },\n    {\n      src: {\n        value: paths.device.keyboard.key(\"m\")\n      },\n      dest: {\n        value: paths.actions.muteMic\n      },\n      xform: xforms.rising\n    },\n    {\n      src: { value: leftPose },\n      dest: { value: paths.actions.cursor.left.pose },\n      xform: xforms.copy\n    },\n    {\n      src: { value: rightPose },\n      dest: { value: paths.actions.cursor.right.pose },\n      xform: xforms.copy\n    },\n    {\n      src: { value: rightPose },\n      dest: { value: paths.actions.rightHand.pose },\n      xform: xforms.copy\n    },\n    {\n      src: { value: leftPose },\n      dest: { value: paths.actions.leftHand.pose },\n      xform: xforms.copy\n    },\n    {\n      src: { value: rightTriggerPressed2 },\n      dest: { value: paths.actions.rightHand.stopTeleport },\n      xform: xforms.falling,\n      priority: 1\n    },\n    {\n      src: { value: leftTriggerPressed2 },\n      dest: { value: paths.actions.leftHand.stopTeleport },\n      xform: xforms.falling,\n      priority: 1\n    },\n    {\n      src: [\n        leftButton(\"y\").pressed,\n        leftButton(\"x\").pressed,\n        leftButton(\"trigger\").pressed,\n        leftButton(\"grip\").pressed\n      ],\n      dest: { value: wakeLeft },\n      xform: xforms.any\n    },\n    {\n      src: { value: wakeLeft },\n      dest: { value: paths.actions.cursor.left.wake },\n      xform: xforms.rising\n    },\n    {\n      src: [\n        rightButton(\"b\").pressed,\n        rightButton(\"a\").pressed,\n        rightButton(\"trigger\").pressed,\n        rightButton(\"grip\").pressed\n      ],\n      dest: { value: wakeRight },\n      xform: xforms.any\n    },\n    {\n      src: { value: wakeRight },\n      dest: { value: paths.actions.cursor.right.wake },\n      xform: xforms.rising\n    }\n  ],\n\n  [sets.leftHandHoveringOnNothing]: [\n    {\n      src: { value: leftTriggerPressed2 },\n      dest: { value: paths.actions.leftHand.startTeleport },\n      xform: xforms.rising,\n      priority: 1\n    }\n  ],\n\n  [sets.rightCursorHoveringOnUI]: [\n    {\n      src: { value: rightTriggerPressed2 },\n      dest: { value: paths.actions.cursor.right.grab },\n      xform: xforms.rising,\n      priority: 2\n    }\n  ],\n\n  [sets.leftCursorHoveringOnUI]: [\n    {\n      src: { value: leftTriggerPressed2 },\n      dest: { value: paths.actions.cursor.left.grab },\n      xform: xforms.rising,\n      priority: 2\n    }\n  ],\n\n  [sets.rightCursorHoveringOnVideo]: [\n    {\n      src: { value: rightAxis(\"joyY\") },\n      dest: { value: paths.actions.cursor.right.mediaVolumeMod },\n      xform: xforms.scale(-0.01)\n    }\n  ],\n\n  [sets.leftCursorHoveringOnVideo]: [\n    {\n      src: { value: leftAxis(\"joyY\") },\n      dest: { value: paths.actions.cursor.left.mediaVolumeMod },\n      xform: xforms.scale(-0.01)\n    }\n  ],\n\n  [sets.rightCursorHoveringOnNothing]: [\n    {\n      src: { value: rightTriggerPressed2 },\n      dest: { value: paths.actions.rightHand.startTeleport },\n      xform: xforms.rising,\n      priority: 1\n    }\n  ],\n\n  [sets.leftCursorHoveringOnNothing]: [\n    {\n      src: { value: leftTriggerPressed2 },\n      dest: { value: paths.actions.leftHand.startTeleport },\n      xform: xforms.rising,\n      priority: 1\n    }\n  ],\n\n  [sets.leftHandHoveringOnInteractable]: [\n    {\n      src: { value: leftGripPressed2 },\n      dest: { value: leftGripRisingGrab },\n      xform: xforms.rising\n    },\n    {\n      src: { value: leftTriggerPressed2 },\n      dest: { value: leftTriggerRisingGrab },\n      xform: xforms.rising,\n      priority: 2\n    },\n    {\n      src: [leftGripRisingGrab],\n      dest: { value: paths.actions.leftHand.grab },\n      xform: xforms.any,\n      priority: 2\n    }\n  ],\n\n  [sets.inspecting]: [\n    {\n      src: { value: upperButtons },\n      dest: { value: paths.actions.stopInspecting },\n      xform: xforms.falling\n    }\n  ],\n\n  [sets.leftHandHoldingInteractable]: [\n    {\n      src: { value: leftGripPressed2 },\n      dest: { value: paths.actions.leftHand.drop },\n      xform: xforms.falling\n    }\n  ],\n\n  [sets.leftHandHoveringOnPen]: [],\n  [sets.leftHandHoldingPen]: [\n    {\n      src: { value: leftTriggerPressed2 },\n      dest: { value: paths.actions.leftHand.startDrawing },\n      xform: xforms.rising,\n      priority: 3\n    },\n    {\n      src: { value: leftTriggerPressed2 },\n      dest: { value: paths.actions.leftHand.stopDrawing },\n      xform: xforms.falling,\n      priority: 3\n    },\n    {\n      src: {\n        value: leftDpadEast,\n        override: \"/device/overrides/foo\"\n      },\n      dest: {\n        value: paths.actions.leftHand.penNextColor\n      },\n      xform: xforms.rising,\n      priority: 2\n    },\n    {\n      src: {\n        value: leftDpadWest,\n        override: \"/device/overrides/foo\"\n      },\n      dest: {\n        value: paths.actions.leftHand.penPrevColor\n      },\n      xform: xforms.rising,\n      priority: 2\n    },\n    {\n      src: { value: leftJoyYDeadzoned },\n      dest: { value: paths.actions.leftHand.scalePenTip },\n      xform: xforms.scaleExp(-0.005, 5),\n      priority: 1\n    },\n    {\n      src: { value: leftButton(\"y\").pressed },\n      dest: { value: paths.actions.leftHand.switchDrawMode },\n      xform: xforms.rising,\n      priority: 1\n    },\n    {\n      src: { value: leftButton(\"x\").pressed },\n      dest: { value: paths.actions.leftHand.undoDrawing },\n      xform: xforms.rising,\n      priority: 1\n    }\n  ],\n\n  [sets.rightCursorHoveringOnInteractable]: [\n    {\n      src: { value: rightGripPressed2 },\n      dest: { value: rightGripRisingGrab },\n      xform: xforms.rising,\n      priority: 2\n    },\n    {\n      src: { value: rightTriggerPressed2 },\n      dest: { value: rightTriggerRisingGrab },\n      xform: xforms.rising,\n      priority: 2\n    },\n    {\n      src: [rightGripRisingGrab],\n      dest: { value: paths.actions.cursor.right.grab },\n      xform: xforms.any,\n      priority: 2\n    },\n    {\n      src: { value: upperButtons },\n      dest: { value: paths.actions.startInspecting },\n      xform: xforms.rising\n    }\n  ],\n\n  [sets.leftCursorHoveringOnInteractable]: [\n    {\n      src: { value: leftGripPressed2 },\n      dest: { value: leftGripRisingGrab },\n      xform: xforms.rising,\n      priority: 2\n    },\n    {\n      src: { value: leftTriggerPressed2 },\n      dest: { value: leftTriggerRisingGrab },\n      xform: xforms.rising,\n      priority: 2\n    },\n    {\n      src: [leftGripRisingGrab],\n      dest: { value: paths.actions.cursor.left.grab },\n      xform: xforms.any,\n      priority: 2\n    },\n    {\n      src: { value: upperButtons },\n      dest: { value: paths.actions.startInspecting },\n      xform: xforms.rising\n    }\n  ],\n\n  [sets.rightCursorHoldingUI]: [\n    {\n      src: { value: rightTriggerPressed2 },\n      dest: { value: cursorDrop2 },\n      xform: xforms.falling,\n      priority: 5\n    }\n  ],\n  [sets.leftCursorHoldingUI]: [\n    {\n      src: { value: leftTriggerPressed2 },\n      dest: { value: leftCursorDrop2 },\n      xform: xforms.falling,\n      priority: 5\n    }\n  ],\n\n  [sets.rightCursorHoldingInteractable]: [\n    {\n      src: { value: rightAxis(\"joyY\") },\n      dest: { value: paths.actions.cursor.right.modDelta },\n      xform: xforms.scale(0.1)\n    },\n    {\n      src: { value: rightGripPressed2 },\n      dest: { value: cursorDrop1 },\n      xform: xforms.falling,\n      priority: 3\n    },\n    {\n      src: [cursorDrop1, cursorDrop2],\n      dest: { value: paths.actions.cursor.right.drop },\n      xform: xforms.any,\n      priority: 2\n    }\n  ],\n\n  [sets.leftCursorHoldingInteractable]: [\n    {\n      src: { value: leftAxis(\"joyY\") },\n      dest: { value: paths.actions.cursor.left.modDelta },\n      xform: xforms.scale(0.1)\n    },\n    {\n      src: { value: leftGripPressed2 },\n      dest: { value: leftCursorDrop1 },\n      xform: xforms.falling,\n      priority: 3\n    },\n    {\n      src: [leftCursorDrop1, leftCursorDrop2],\n      dest: { value: paths.actions.cursor.left.drop },\n      xform: xforms.any,\n      priority: 2\n    }\n  ],\n\n  [sets.rightCursorHoveringOnPen]: [],\n\n  [sets.rightCursorHoldingPen]: [\n    {\n      src: { value: rightTriggerPressed2 },\n      dest: { value: paths.actions.cursor.right.startDrawing },\n      xform: xforms.rising,\n      priority: 3\n    },\n    {\n      src: { value: rightTriggerPressed2 },\n      dest: { value: paths.actions.cursor.right.stopDrawing },\n      xform: xforms.falling,\n      priority: 3\n    },\n    {\n      src: { value: rightButton(\"b\").pressed },\n      dest: { value: paths.actions.cursor.right.undoDrawing },\n      xform: xforms.rising,\n      priority: 1\n    }\n  ],\n  [sets.leftCursorHoldingPen]: [\n    {\n      src: { value: leftTriggerPressed2 },\n      dest: { value: paths.actions.cursor.left.startDrawing },\n      xform: xforms.rising,\n      priority: 3\n    },\n    {\n      src: { value: leftTriggerPressed2 },\n      dest: { value: paths.actions.cursor.left.stopDrawing },\n      xform: xforms.falling,\n      priority: 3\n    },\n    {\n      src: { value: leftButton(\"y\").pressed },\n      dest: { value: paths.actions.cursor.left.undoDrawing },\n      xform: xforms.rising,\n      priority: 1\n    }\n  ],\n\n  [sets.rightHandHoveringOnInteractable]: [\n    {\n      src: { value: rightGripPressed2 },\n      dest: { value: rightGripRisingGrab },\n      xform: xforms.rising,\n      priority: 2\n    },\n    {\n      src: { value: rightTriggerPressed2 },\n      dest: { value: rightTriggerRisingGrab },\n      xform: xforms.rising,\n      priority: 2\n    },\n    {\n      src: [rightGripRisingGrab],\n      dest: { value: paths.actions.rightHand.grab },\n      xform: xforms.any,\n      priority: 2\n    }\n  ],\n\n  [sets.rightHandHoldingInteractable]: [\n    {\n      src: { value: rightGripPressed2 },\n      dest: {\n        value: rightHandDrop2\n      },\n      xform: xforms.falling,\n      priority: 3\n    },\n    {\n      src: [rightHandDrop2],\n      dest: { value: paths.actions.rightHand.drop },\n      xform: xforms.any,\n      priority: 2\n    }\n  ],\n  [sets.rightHandHoveringOnPen]: [],\n  [sets.rightHandHoldingPen]: [\n    {\n      src: { value: rightTriggerPressed2 },\n      dest: { value: paths.actions.rightHand.startDrawing },\n      xform: xforms.rising,\n      priority: 3\n    },\n    {\n      src: { value: rightTriggerPressed2 },\n      dest: { value: paths.actions.rightHand.stopDrawing },\n      xform: xforms.falling,\n      priority: 3\n    },\n    {\n      src: {\n        value: rightDpadEast\n      },\n      dest: {\n        value: paths.actions.rightHand.penNextColor\n      },\n      xform: xforms.rising,\n      priority: 2\n    },\n    {\n      src: {\n        value: rightDpadWest\n      },\n      dest: {\n        value: paths.actions.rightHand.penPrevColor\n      },\n      xform: xforms.rising,\n      priority: 2\n    },\n    {\n      src: {\n        value: rightAxis(\"joyY\")\n      },\n      dest: {\n        value: rightJoyYDeadzoned\n      },\n      xform: xforms.deadzone(0.1)\n    },\n    {\n      src: { value: rightJoyYDeadzoned },\n      dest: { value: paths.actions.rightHand.scalePenTip },\n      xform: xforms.scaleExp(-0.005, 5),\n      priority: 2\n    },\n    {\n      src: { value: rightGripPressed2 },\n      dest: { value: paths.actions.rightHand.drop },\n      xform: xforms.falling,\n      priority: 3\n    },\n    {\n      src: { value: rightButton(\"b\").pressed },\n      dest: { value: paths.actions.rightHand.switchDrawMode },\n      xform: xforms.rising,\n      priority: 1\n    },\n    {\n      src: { value: rightButton(\"a\").pressed },\n      dest: { value: paths.actions.rightHand.undoDrawing },\n      xform: xforms.rising,\n      priority: 1\n    }\n  ],\n\n  [sets.rightCursorHoveringOnCamera]: [],\n  [sets.rightHandHoveringOnCamera]: [],\n  [sets.leftHandHoveringOnCamera]: [],\n\n  [sets.rightHandHoldingCamera]: [\n    {\n      src: { value: rightTriggerPressed2 },\n      dest: { value: paths.actions.rightHand.takeSnapshot },\n      xform: xforms.copy,\n      priority: 4\n    }\n  ],\n  [sets.leftHandHoldingCamera]: [\n    {\n      src: { value: leftTriggerPressed2 },\n      dest: { value: paths.actions.leftHand.takeSnapshot },\n      xform: xforms.copy,\n      priority: 4\n    }\n  ],\n  [sets.rightCursorHoldingCamera]: [\n    {\n      src: { value: rightTriggerPressed2 },\n      dest: { value: paths.actions.cursor.right.takeSnapshot },\n      xform: xforms.copy,\n      priority: 4\n    }\n  ],\n  [sets.leftCursorHoldingCamera]: [\n    {\n      src: { value: leftTriggerPressed2 },\n      dest: { value: paths.actions.cursor.left.takeSnapshot },\n      xform: xforms.copy,\n      priority: 4\n    }\n  ],\n\n  [sets.rightHandHoveringOnNothing]: [],\n  [sets.inputFocused]: [\n    {\n      src: { value: \"/device/keyboard\" },\n      dest: { value: paths.noop },\n      xform: xforms.noop,\n      priority: 1000\n    }\n  ]\n});\n","import { paths } from \"../paths\";\nimport { sets } from \"../sets\";\nimport { xforms } from \"./xforms\";\nimport { addSetsToBindings } from \"./utils\";\n\nconst v = name => {\n  return `/vive-user/vive-var/${name}`;\n};\n\nconst wakeLeft = `${name}left/wake`;\nconst wakeRight = `${name}right/wake`;\n\nconst lButton = paths.device.vive.left.button;\nconst lAxis = paths.device.vive.left.axis;\nconst lPose = paths.device.vive.left.pose;\nconst lJoy = v(\"left/joy\");\nconst lJoyScaled = v(\"left/joy/scaled\");\nconst lJoyXScaled = v(\"left/joyX/scaled\");\nconst lJoyYScaled = v(\"left/joyY/scaled\");\nconst lJoyYDeadzoned = v(\"left/joyY/deadzoned\");\nconst lTouch = v(\"left/touch\");\nconst lTouchScaled = v(\"left/touch/scaled\");\nconst lTouchXScaled = v(\"left/touchX/scaled\");\nconst lTouchY = v(\"left/touchY\");\nconst lTouchYScaled = v(\"left/touchY/scaled\");\nconst lDpadNorth1 = v(\"left/dpad/north1\");\nconst lDpadSouth1 = v(\"left/dpad/south1\");\nconst lDpadEast1 = v(\"left/dpad/east1\");\nconst lDpadWest1 = v(\"left/dpad/west1\");\nconst lDpadCenter1 = v(\"left/dpad/center1\");\nconst lDpadNorth2 = v(\"left/dpad/north2\");\nconst lDpadSouth2 = v(\"left/dpad/south2\");\nconst lDpadEast2 = v(\"left/dpad/east2\");\nconst lDpadWest2 = v(\"left/dpad/west2\");\nconst lDpadCenter2 = v(\"left/dpad/center2\");\nconst lTriggerFallingStopDrawing = v(\"left/trigger/falling/stopDrawing\");\nconst lGripFallingStopDrawing = v(\"left/grip/falling/stopDrawing\");\nconst lTriggerRisingGrab = v(\"left/trigger/rising/grab\");\nconst lGripRisingGrab = v(\"left/grab/rising/grab\");\nconst lTouchpadRising2 = v(\"left/touchpad/rising2\");\nconst lTouchpadRising1 = v(\"left/touchpad/rising1\");\nconst touchCharacterAcceleration = v(\"left/touch/characterAcceleration\");\nconst lCharacterAcceleration = v(\"left/characterAcceleration\");\nconst characterAcceleration = v(\"nonNormalizedCharacterAcceleration\");\nconst leftBoost = v(\"left/boost\");\nconst leftUndoDrawing = v(\"left/drawing/undo\");\n\nconst rButton = paths.device.vive.right.button;\nconst rAxis = paths.device.vive.right.axis;\nconst rPose = paths.device.vive.right.pose;\nconst rTouch = v(\"right/touch\");\nconst rJoy = v(\"right/joy\");\nconst rJoyYDeadzoned = v(\"right/joyY/deadzoned\");\nconst rDpadNorth1 = v(\"right/dpad/north1\");\nconst rDpadSouth1 = v(\"right/dpad/south1\");\nconst rDpadEast1 = v(\"right/dpad/east1\");\nconst rDpadWest1 = v(\"right/dpad/west1\");\nconst rDpadCenter1 = v(\"right/dpad/center\");\nconst rDpadNorth2 = v(\"right/dpad/north2\");\nconst rDpadSouth2 = v(\"right/dpad/south2\");\nconst rDpadEast2 = v(\"right/dpad/east2\");\nconst rDpadWest2 = v(\"right/dpad/west2\");\nconst rDpadCenter2 = v(\"right/dpad/center2\");\nconst rDpadCenterStrip = v(\"right/dpad/centerStrip\");\nconst rTouchpadRising = v(\"right/touchpad/rising\");\nconst rTouchpadFalling = v(\"right/touchpad/falling\");\nconst rightBoost = v(\"right/boost\");\nconst rTriggerRisingGrab = v(\"right/trigger/rising/grab\");\nconst rGripRisingGrab = v(\"right/grab/rising/grab\");\nconst rightCursorDrop1 = v(\"right/cursorDrop1\");\nconst rightCursorDrop2 = v(\"right/cursorDrop2\");\nconst leftCursorDrop1 = v(\"left/cursorDrop1\");\nconst leftCursorDrop2 = v(\"left/cursorDrop2\");\nconst rTriggerStopTeleport = v(\"right/trigger/stopTeleport\");\nconst rTouchpadStopTeleport = v(\"right/touchpad/stopTeleport\");\nconst rootForFrozenOverrideWhenHolding = \"rootForFrozenOverrideWhenHolding\";\nconst rightUndoDrawing = v(\"right/drawing/undo\");\n\nconst ensureFrozenViaDpad = v(\"dpad/ensureFrozen\");\nconst ensureFrozenViaKeyboard = v(\"keyboard/ensureFrozen\");\nconst ensureFrozenViaButtons = v(\"buttons/ensureFrozen\");\n\nconst thawViaDpad = v(\"dpad/thaw\");\nconst thawViaKeyboard = v(\"keyboard/thaw\");\nconst thawViaButtons = v(\"buttons/thaw\");\n\nconst freezeButtons = v(\"buttons/freeze\");\nconst inspectButtons = v(\"buttons/inspect\");\n\nconst rSnapRight1 = v(\"right/snap-right\");\nconst rSnapLeft1 = v(\"right/snap-left\");\nconst rSnapRight2 = v(\"right/snap-right2\");\nconst rSnapLeft2 = v(\"right/snap-left2\");\n\nconst k = name => {\n  return `/vive-user/keyboard-var/${name}`;\n};\nconst keyboardSnapRight = k(\"snap-right\");\nconst keyboardSnapLeft = k(\"snap-left\");\nconst keyboardCharacterAcceleration = k(\"characterAcceleration\");\nconst wasd_vec2 = k(\"wasd_vec2\");\nconst arrows_vec2 = k(\"arrows_vec2\");\nconst keyboardBoost = k(\"boost\");\n\nconst leftGripPressed1 = v(\"leftGripPressed1\");\nconst leftGripPressed2 = v(\"leftGripPressed2\");\nconst rightGripPressed1 = v(\"rightGripPressed1\");\nconst rightGripPressed2 = v(\"rightGripPressed2\");\nconst leftTriggerPressed1 = v(\"leftTriggerPressed1\");\nconst leftTriggerPressed2 = v(\"leftTriggerPressed2\");\nconst leftTouchpadPressed1 = v(\"leftTouchpadPressed1\");\nconst leftTouchpadPressed2 = v(\"leftTouchpadPressed2\");\nconst rightTriggerPressed1 = v(\"rightTriggerPressed1\");\nconst rightTriggerPressed2 = v(\"rightTriggerPressed2\");\nconst leftTouchpadFallingStopTeleport = v(\"leftTouchpadFallingStopTeleport\");\nconst leftTriggerFallingStopTeleport = v(\"leftTriggerFallingStopTeleport\");\nconst leftGripFallingWhileHoldingPen = v(\"leftGripFallingWhileHoldingPen\");\n\nexport const viveUserBindings = addSetsToBindings({\n  [sets.global]: [\n    {\n      src: {\n        value: paths.device.vive.left.matrix\n      },\n      dest: {\n        value: paths.actions.leftHand.matrix\n      },\n      xform: xforms.copy\n    },\n    {\n      src: {\n        value: paths.device.vive.right.matrix\n      },\n      dest: {\n        value: paths.actions.rightHand.matrix\n      },\n      xform: xforms.copy\n    },\n    {\n      src: [ensureFrozenViaDpad, ensureFrozenViaKeyboard, ensureFrozenViaButtons],\n      dest: { value: paths.actions.ensureFrozen },\n      xform: xforms.any\n    },\n    {\n      src: [thawViaDpad, thawViaKeyboard, thawViaButtons],\n      dest: { value: paths.actions.thaw },\n      xform: xforms.any\n    },\n    {\n      src: {\n        value: lButton(\"grip\").pressed\n      },\n      dest: {\n        value: leftGripPressed1\n      },\n      xform: xforms.copy\n    },\n    {\n      src: {\n        value: leftGripPressed1\n      },\n      dest: {\n        value: paths.actions.leftHand.middleRingPinky\n      },\n      xform: xforms.copy\n    },\n    {\n      src: {\n        value: lButton(\"grip\").pressed\n      },\n      dest: {\n        value: leftGripPressed2\n      },\n      xform: xforms.copy\n    },\n    {\n      src: [lButton(\"touchpad\").touched, lButton(\"primary\").touched],\n      dest: {\n        value: paths.actions.leftHand.thumb\n      },\n      xform: xforms.any\n    },\n    {\n      src: { value: leftTriggerPressed1 },\n      dest: {\n        value: paths.actions.leftHand.index\n      },\n      xform: xforms.copy\n    },\n    {\n      src: { value: lButton(\"trigger\").pressed },\n      dest: {\n        value: leftTriggerPressed1\n      },\n      xform: xforms.copy\n    },\n    {\n      src: { value: lButton(\"trigger\").pressed },\n      dest: {\n        value: leftTriggerPressed2\n      },\n      xform: xforms.copy\n    },\n    {\n      src: {\n        value: rButton(\"grip\").pressed\n      },\n      dest: {\n        value: rightGripPressed1\n      },\n      xform: xforms.copy\n    },\n    {\n      src: {\n        value: rButton(\"grip\").pressed\n      },\n      dest: {\n        value: rightGripPressed2\n      },\n      xform: xforms.copy\n    },\n    {\n      src: {\n        value: rightGripPressed1\n      },\n      dest: {\n        value: paths.actions.rightHand.middleRingPinky\n      },\n      xform: xforms.copy\n    },\n    {\n      src: [rButton(\"touchpad\").touched, rButton(\"primary\").touched],\n      dest: {\n        value: paths.actions.rightHand.thumb\n      },\n      xform: xforms.any\n    },\n    {\n      src: {\n        value: rButton(\"trigger\").pressed\n      },\n      dest: { value: rightTriggerPressed1 },\n      xform: xforms.copy\n    },\n    {\n      src: {\n        value: rButton(\"trigger\").pressed\n      },\n      dest: { value: rightTriggerPressed2 },\n      xform: xforms.copy\n    },\n    {\n      src: { value: rightTriggerPressed1 },\n      dest: {\n        value: paths.actions.rightHand.index\n      },\n      xform: xforms.copy\n    },\n    {\n      src: {\n        x: lAxis(\"touchX\"),\n        y: lAxis(\"touchY\")\n      },\n      dest: {\n        value: lTouch\n      },\n      xform: xforms.compose_vec2\n    },\n    {\n      src: {\n        value: lTouch\n      },\n      dest: {\n        north: lDpadNorth1,\n        south: lDpadSouth1,\n        east: lDpadEast1,\n        west: lDpadWest1,\n        center: lDpadCenter1\n      },\n      xform: xforms.vec2dpad(0.35)\n    },\n    {\n      src: {\n        value: lButton(\"touchpad\").pressed\n      },\n      dest: {\n        value: leftTouchpadPressed1\n      },\n      xform: xforms.copy\n    },\n    {\n      src: {\n        value: lButton(\"touchpad\").pressed\n      },\n      dest: {\n        value: leftTouchpadPressed2\n      },\n      xform: xforms.copy\n    },\n    {\n      src: {\n        x: rAxis(\"touchX\"),\n        y: rAxis(\"touchY\")\n      },\n      dest: {\n        value: rTouch\n      },\n      xform: xforms.compose_vec2\n    },\n    {\n      src: {\n        value: rTouch\n      },\n      dest: {\n        north: rDpadNorth1,\n        south: rDpadSouth1,\n        east: rDpadEast1,\n        west: rDpadWest1,\n        center: rDpadCenter1\n      },\n      xform: xforms.vec2dpad(0.35, false, true)\n    },\n    {\n      src: {\n        x: rAxis(\"joyX\"),\n        y: rAxis(\"joyY\")\n      },\n      dest: {\n        value: rJoy\n      },\n      xform: xforms.compose_vec2\n    },\n    {\n      src: {\n        value: rJoy\n      },\n      dest: {\n        north: rDpadNorth2,\n        south: rDpadSouth2,\n        east: rDpadEast2,\n        west: rDpadWest2,\n        center: rDpadCenter2\n      },\n      xform: xforms.vec2dpad(0.35, false, true)\n    },\n    {\n      src: [rDpadNorth1, rDpadSouth1, rDpadCenter1],\n      dest: { value: rDpadCenterStrip },\n      xform: xforms.any\n    },\n    {\n      src: {\n        value: rButton(\"touchpad\").pressed\n      },\n      dest: {\n        value: rTouchpadRising\n      },\n      xform: xforms.rising\n    },\n    {\n      src: {\n        value: rButton(\"touchpad\").pressed\n      },\n      dest: {\n        value: rTouchpadFalling\n      },\n      xform: xforms.falling\n    },\n    {\n      src: {\n        bool: rTouchpadRising,\n        value: rDpadEast1\n      },\n      dest: {\n        value: rSnapRight1\n      },\n      xform: xforms.copyIfTrue,\n      priority: 1\n    },\n    {\n      src: {\n        value: rDpadEast2\n      },\n      dest: {\n        value: rSnapRight2\n      },\n      xform: xforms.rising,\n      priority: 1\n    },\n    {\n      src: { value: paths.device.keyboard.key(\"e\") },\n      dest: { value: keyboardSnapRight },\n      xform: xforms.rising\n    },\n    {\n      src: [rSnapRight1, rSnapRight2, keyboardSnapRight],\n      dest: { value: paths.actions.snapRotateRight },\n      xform: xforms.any\n    },\n    {\n      src: { value: paths.device.keyboard.key(\"Tab\") },\n      dest: { value: paths.actions.toggleFreeze },\n      xform: xforms.rising\n    },\n    {\n      src: { value: paths.device.keyboard.key(\" \") },\n      dest: { value: ensureFrozenViaKeyboard },\n      xform: xforms.copy\n    },\n    {\n      src: { value: paths.device.keyboard.key(\" \") },\n      dest: { value: thawViaKeyboard },\n      xform: xforms.falling\n    },\n    {\n      src: { value: paths.device.keyboard.key(\"p\") },\n      dest: { value: paths.actions.spawnPen },\n      xform: xforms.rising\n    },\n    {\n      src: { value: paths.device.keyboard.key(\"c\") },\n      dest: { value: paths.actions.toggleCamera },\n      xform: xforms.rising\n    },\n    {\n      src: { value: paths.device.keyboard.key(\"x\") },\n      dest: { value: paths.actions.takeSnapshot },\n      xform: xforms.copy\n    },\n    {\n      src: { value: rButton(\"touchpad\").pressed, bool: rDpadCenterStrip },\n      dest: { value: ensureFrozenViaDpad },\n      root: rootForFrozenOverrideWhenHolding,\n      xform: xforms.copyIfTrue\n    },\n    {\n      src: { value: rTouchpadFalling },\n      dest: { value: thawViaDpad },\n      xform: xforms.copy\n    },\n    {\n      src: {\n        bool: rTouchpadRising,\n        value: rDpadWest1\n      },\n      dest: {\n        value: rSnapLeft1\n      },\n      xform: xforms.copyIfTrue,\n      priority: 1\n    },\n    {\n      src: {\n        value: rDpadWest2\n      },\n      dest: {\n        value: rSnapLeft2\n      },\n      xform: xforms.rising,\n      priority: 1\n    },\n    {\n      src: { value: paths.device.keyboard.key(\"q\") },\n      dest: { value: keyboardSnapLeft },\n      xform: xforms.rising\n    },\n    {\n      src: [rSnapLeft1, rSnapLeft2, keyboardSnapLeft],\n      dest: { value: paths.actions.snapRotateLeft },\n      xform: xforms.any\n    },\n    {\n      src: {\n        value: lAxis(\"touchX\")\n      },\n      dest: {\n        value: lTouchXScaled\n      },\n      xform: xforms.scale(1.5) // horizontal character speed modifier\n    },\n    {\n      src: {\n        value: lTouchY\n      },\n      dest: { value: lTouchYScaled },\n      xform: xforms.scale(1.5) // vertical character speed modifier\n    },\n    {\n      src: {\n        x: lTouchXScaled,\n        y: lTouchYScaled\n      },\n      dest: { value: lTouchScaled },\n      xform: xforms.compose_vec2\n    },\n    {\n      src: {\n        bool: leftTouchpadPressed2,\n        value: lTouchScaled\n      },\n      dest: { value: touchCharacterAcceleration },\n      xform: xforms.copyIfTrue\n    },\n    {\n      src: {\n        value: lAxis(\"joyX\")\n      },\n      dest: {\n        value: lJoyXScaled\n      },\n      xform: xforms.scale(1.5) // horizontal character speed modifier\n    },\n    {\n      src: {\n        value: lAxis(\"joyY\")\n      },\n      dest: { value: lJoyYScaled },\n      xform: xforms.scale(1.5) // vertical character speed modifier\n    },\n    {\n      src: {\n        x: lJoyXScaled,\n        y: lJoyYScaled\n      },\n      dest: { value: lJoyScaled },\n      xform: xforms.compose_vec2\n    },\n    {\n      src: {\n        first: lJoyScaled,\n        second: touchCharacterAcceleration\n      },\n      dest: { value: lCharacterAcceleration },\n      xform: xforms.max_vec2\n    },\n    {\n      src: {\n        w: paths.device.keyboard.key(\"arrowup\"),\n        a: paths.device.keyboard.key(\"arrowleft\"),\n        s: paths.device.keyboard.key(\"arrowdown\"),\n        d: paths.device.keyboard.key(\"arrowright\")\n      },\n      dest: { vec2: arrows_vec2 },\n      xform: xforms.wasd_to_vec2\n    },\n    {\n      src: {\n        w: paths.device.keyboard.key(\"w\"),\n        a: paths.device.keyboard.key(\"a\"),\n        s: paths.device.keyboard.key(\"s\"),\n        d: paths.device.keyboard.key(\"d\")\n      },\n      dest: { vec2: wasd_vec2 },\n      xform: xforms.wasd_to_vec2\n    },\n    {\n      src: {\n        value: paths.device.keyboard.key(\"t\")\n      },\n      dest: {\n        value: paths.actions.focusChat\n      },\n      xform: xforms.rising\n    },\n    {\n      src: {\n        value: paths.device.keyboard.key(\"/\")\n      },\n      dest: {\n        value: paths.actions.focusChatCommand\n      },\n      xform: xforms.rising\n    },\n    {\n      src: { value: paths.device.keyboard.key(\"Escape\") },\n      dest: { value: paths.actions.mediaExit },\n      xform: xforms.rising\n    },\n    {\n      src: {\n        bool: paths.device.keyboard.key(\"control\"),\n        value: paths.device.keyboard.key(\"1\")\n      },\n      dest: { value: \"/var/shift+1\" },\n      priority: 1001,\n      xform: xforms.copyIfTrue\n    },\n    {\n      src: { value: \"/var/shift+1\" },\n      dest: { value: paths.actions.mediaSearch1 },\n      xform: xforms.rising\n    },\n    {\n      src: {\n        bool: paths.device.keyboard.key(\"control\"),\n        value: paths.device.keyboard.key(\"2\")\n      },\n      dest: { value: \"/var/shift+2\" },\n      priority: 1001,\n      xform: xforms.copyIfTrue\n    },\n    {\n      src: { value: \"/var/shift+2\" },\n      dest: { value: paths.actions.mediaSearch2 },\n      xform: xforms.rising\n    },\n    {\n      src: {\n        bool: paths.device.keyboard.key(\"control\"),\n        value: paths.device.keyboard.key(\"3\")\n      },\n      dest: { value: \"/var/shift+3\" },\n      priority: 1001,\n      xform: xforms.copyIfTrue\n    },\n    {\n      src: { value: \"/var/shift+3\" },\n      dest: { value: paths.actions.mediaSearch3 },\n      xform: xforms.rising\n    },\n    {\n      src: {\n        bool: paths.device.keyboard.key(\"control\"),\n        value: paths.device.keyboard.key(\"4\")\n      },\n      dest: { value: \"/var/shift+4\" },\n      priority: 1001,\n      xform: xforms.copyIfTrue\n    },\n    {\n      src: { value: \"/var/shift+4\" },\n      dest: { value: paths.actions.mediaSearch4 },\n      xform: xforms.rising\n    },\n    {\n      src: {\n        bool: paths.device.keyboard.key(\"control\"),\n        value: paths.device.keyboard.key(\"5\")\n      },\n      dest: { value: \"/var/shift+5\" },\n      priority: 1001,\n      xform: xforms.copyIfTrue\n    },\n    {\n      src: { value: \"/var/shift+5\" },\n      dest: { value: paths.actions.mediaSearch5 },\n      xform: xforms.rising\n    },\n    {\n      src: {\n        bool: paths.device.keyboard.key(\"control\"),\n        value: paths.device.keyboard.key(\"6\")\n      },\n      dest: { value: \"/var/shift+6\" },\n      priority: 1001,\n      xform: xforms.copyIfTrue\n    },\n    {\n      src: { value: \"/var/shift+6\" },\n      dest: { value: paths.actions.mediaSearch6 },\n      xform: xforms.rising\n    },\n    {\n      src: {\n        bool: paths.device.keyboard.key(\"control\"),\n        value: paths.device.keyboard.key(\"7\")\n      },\n      dest: { value: \"/var/shift+7\" },\n      priority: 1001,\n      xform: xforms.copyIfTrue\n    },\n    {\n      src: { value: \"/var/shift+7\" },\n      dest: { value: paths.actions.mediaSearch7 },\n      xform: xforms.rising\n    },\n    {\n      src: {\n        bool: paths.device.keyboard.key(\"control\"),\n        value: paths.device.keyboard.key(\"8\")\n      },\n      dest: { value: \"/var/shift+8\" },\n      priority: 1001,\n      xform: xforms.copyIfTrue\n    },\n    {\n      src: { value: \"/var/shift+8\" },\n      dest: { value: paths.actions.mediaSearch8 },\n      xform: xforms.rising\n    },\n    {\n      src: {\n        value: paths.device.keyboard.key(\"l\")\n      },\n      dest: {\n        value: paths.actions.logDebugFrame\n      },\n      xform: xforms.rising\n    },\n    {\n      src: {\n        value: paths.device.keyboard.key(\"k\")\n      },\n      dest: {\n        value: paths.actions.logInteractionState\n      },\n      xform: xforms.rising\n    },\n    {\n      src: {\n        value: paths.device.keyboard.key(\"m\")\n      },\n      dest: {\n        value: paths.actions.muteMic\n      },\n      xform: xforms.rising\n    },\n    {\n      src: {\n        first: wasd_vec2,\n        second: arrows_vec2\n      },\n      dest: { value: keyboardCharacterAcceleration },\n      xform: xforms.max_vec2\n    },\n    {\n      src: {\n        first: lCharacterAcceleration,\n        second: keyboardCharacterAcceleration\n      },\n      dest: {\n        value: characterAcceleration\n      },\n      xform: xforms.max_vec2\n    },\n    {\n      src: { value: characterAcceleration },\n      dest: { value: paths.actions.characterAcceleration },\n      xform: xforms.normalize_vec2\n    },\n    {\n      src: { value: paths.device.keyboard.key(\"shift\") },\n      dest: { value: keyboardBoost },\n      xform: xforms.copy\n    },\n    {\n      src: {\n        value: lButton(\"primary\").pressed\n      },\n      dest: {\n        value: leftBoost\n      },\n      xform: xforms.copy\n    },\n    {\n      src: {\n        value: rButton(\"primary\").pressed\n      },\n      dest: {\n        value: rightBoost\n      },\n      xform: xforms.copy\n    },\n    {\n      src: [keyboardBoost, leftBoost, rightBoost],\n      dest: { value: paths.actions.boost },\n      xform: xforms.any\n    },\n    {\n      src: { value: lPose },\n      dest: { value: paths.actions.cursor.left.pose },\n      xform: xforms.copy\n    },\n    {\n      src: { value: rPose },\n      dest: { value: paths.actions.cursor.right.pose },\n      xform: xforms.copy\n    },\n    {\n      src: { value: rPose },\n      dest: { value: paths.actions.rightHand.pose },\n      xform: xforms.copy\n    },\n    {\n      src: { value: lPose },\n      dest: { value: paths.actions.leftHand.pose },\n      xform: xforms.copy\n    },\n    {\n      src: [\n        lButton(\"primary\").pressed,\n        lButton(\"trigger\").pressed,\n        lButton(\"grip\").pressed,\n        lButton(\"touchpad\").pressed\n      ],\n      dest: { value: wakeLeft },\n      xform: xforms.any\n    },\n    {\n      src: { value: wakeLeft },\n      dest: { value: paths.actions.cursor.left.wake },\n      xform: xforms.rising\n    },\n    {\n      src: [\n        rButton(\"primary\").pressed,\n        rButton(\"trigger\").pressed,\n        rButton(\"grip\").pressed,\n        rButton(\"touchpad\").pressed\n      ],\n      dest: { value: wakeRight },\n      xform: xforms.any\n    },\n    {\n      src: { value: wakeRight },\n      dest: { value: paths.actions.cursor.right.wake },\n      xform: xforms.rising\n    },\n    {\n      src: [\n        rButton(\"secondary\").pressed,\n        lButton(\"secondary\").pressed,\n        rButton(\"bumper\").pressed,\n        lButton(\"bumper\").pressed\n      ],\n      dest: { value: freezeButtons },\n      xform: xforms.any\n    },\n    {\n      src: [rButton(\"primary\").pressed, lButton(\"primary\").pressed],\n      dest: { value: inspectButtons },\n      xform: xforms.any\n    },\n    {\n      src: { value: freezeButtons },\n      dest: { value: ensureFrozenViaButtons },\n      xform: xforms.copy\n    },\n    {\n      src: { value: freezeButtons },\n      dest: { value: thawViaButtons },\n      xform: xforms.falling\n    }\n  ],\n  [sets.rightHandTeleporting]: [\n    {\n      src: { value: rightTriggerPressed2 },\n      dest: { value: rTriggerStopTeleport },\n      xform: xforms.falling,\n      priority: 1\n    },\n    {\n      src: { value: rButton(\"touchpad\").pressed },\n      dest: { value: rTouchpadStopTeleport },\n      xform: xforms.falling\n    },\n    {\n      src: [rTriggerStopTeleport, rTouchpadStopTeleport],\n      dest: { value: paths.actions.rightHand.stopTeleport },\n      xform: xforms.any\n    }\n  ],\n  [sets.leftHandHoveringOnNothing]: [\n    {\n      src: { value: leftTriggerPressed2 },\n      dest: { value: paths.actions.leftHand.startTeleport },\n      xform: xforms.rising\n    }\n  ],\n\n  [sets.leftHandTeleporting]: [\n    {\n      src: { value: leftTriggerPressed2 },\n      dest: { value: leftTriggerFallingStopTeleport },\n      xform: xforms.falling,\n      priority: 1\n    },\n    {\n      src: [leftTriggerFallingStopTeleport, leftTouchpadFallingStopTeleport, leftGripFallingWhileHoldingPen],\n      dest: { value: paths.actions.leftHand.stopTeleport },\n      xform: xforms.any\n    }\n  ],\n\n  [sets.rightHandHoveringOnNothing]: [\n    {\n      src: { value: rightTriggerPressed2 },\n      dest: { value: paths.actions.rightHand.startTeleport },\n      xform: xforms.rising,\n      priority: 1\n    }\n  ],\n\n  [sets.rightCursorHoveringOnNothing]: [],\n\n  [sets.leftCursorHoveringOnNothing]: [],\n\n  [sets.rightCursorHoveringOnUI]: [\n    {\n      src: { value: rightTriggerPressed2 },\n      dest: { value: paths.actions.cursor.right.grab },\n      xform: xforms.rising,\n      priority: 1\n    }\n  ],\n\n  [sets.leftCursorHoveringOnUI]: [\n    {\n      src: { value: leftTriggerPressed2 },\n      dest: { value: paths.actions.cursor.left.grab },\n      xform: xforms.rising,\n      priority: 1\n    }\n  ],\n\n  [sets.rightCursorHoveringOnVideo]: [\n    {\n      src: {\n        value: rAxis(\"touchY\"),\n        touching: rButton(\"touchpad\").touched\n      },\n      dest: { value: paths.actions.cursor.right.mediaVolumeMod },\n      xform: xforms.touch_axis_scroll(0.1)\n    },\n    {\n      src: {\n        value: rAxis(\"joyY\")\n      },\n      dest: { value: paths.actions.cursor.right.mediaVolumeMod },\n      xform: xforms.scale(0.02)\n    }\n  ],\n\n  [sets.leftCursorHoveringOnVideo]: [\n    {\n      src: {\n        value: lAxis(\"touchY\"),\n        touching: lButton(\"touchpad\").touched\n      },\n      dest: { value: paths.actions.cursor.left.mediaVolumeMod },\n      xform: xforms.touch_axis_scroll(0.1)\n    },\n    {\n      src: {\n        value: lAxis(\"joyY\")\n      },\n      dest: { value: paths.actions.cursor.left.mediaVolumeMod },\n      xform: xforms.scale(0.02)\n    }\n  ],\n\n  [sets.leftHandHoveringOnInteractable]: [\n    {\n      src: { value: leftGripPressed2 },\n      dest: { value: lGripRisingGrab },\n      xform: xforms.rising\n    },\n    {\n      src: { value: leftTriggerPressed2 },\n      dest: { value: lTriggerRisingGrab },\n      xform: xforms.rising,\n      priority: 1\n    },\n    {\n      src: [lGripRisingGrab],\n      dest: { value: paths.actions.leftHand.grab },\n      xform: xforms.any\n    }\n  ],\n\n  [sets.leftHandHoldingInteractable]: [\n    {\n      src: { value: leftGripPressed2 },\n      dest: { value: paths.actions.leftHand.drop },\n      xform: xforms.falling,\n      priority: 1\n    }\n  ],\n\n  [sets.leftHandHoveringOnPen]: [],\n  [sets.leftHandHoldingPen]: [\n    {\n      src: { value: leftTouchpadPressed2 },\n      dest: { value: leftTouchpadFallingStopTeleport },\n      xform: xforms.falling,\n      priority: 1\n    },\n    {\n      src: {\n        value: leftTouchpadPressed2\n      },\n      dest: {\n        value: lTouchpadRising1\n      },\n      xform: xforms.rising,\n      priority: 1\n    },\n    {\n      src: {\n        bool: lTouchpadRising1,\n        value: lDpadCenter1\n      },\n      dest: { value: paths.actions.leftHand.startTeleport },\n      xform: xforms.copyIfTrue,\n      priority: 1\n    },\n    {\n      src: { value: leftTriggerPressed2 },\n      dest: { value: paths.actions.leftHand.startDrawing },\n      xform: xforms.rising,\n      priority: 2\n    },\n    {\n      src: { value: leftTriggerPressed2 },\n      dest: { value: lTriggerFallingStopDrawing },\n      xform: xforms.falling,\n      priority: 2\n    },\n    {\n      src: { value: leftGripPressed2 },\n      dest: { value: lGripFallingStopDrawing },\n      xform: xforms.falling,\n      priority: 1\n    },\n    {\n      src: { value: leftGripPressed2 },\n      dest: { value: leftGripFallingWhileHoldingPen },\n      xform: xforms.falling,\n      priority: 1\n    },\n    {\n      src: [lTriggerFallingStopDrawing, lGripFallingStopDrawing],\n      dest: { value: paths.actions.leftHand.stopDrawing },\n      xform: xforms.any\n    },\n    {\n      src: {\n        value: leftTouchpadPressed2\n      },\n      dest: {\n        value: lTouchpadRising2\n      },\n      xform: xforms.rising,\n      priority: 1\n    },\n    {\n      src: {\n        bool: lTouchpadRising2,\n        value: lDpadNorth1\n      },\n      dest: {\n        value: paths.actions.leftHand.penNextColor\n      },\n      xform: xforms.copyIfTrue,\n      priority: 2\n    },\n    {\n      src: {\n        bool: lTouchpadRising2,\n        value: lDpadSouth1\n      },\n      dest: {\n        value: paths.actions.leftHand.penPrevColor\n      },\n      xform: xforms.copyIfTrue,\n      priority: 2\n    },\n    {\n      src: {\n        value: lAxis(\"touchX\"),\n        touching: lButton(\"touchpad\").touched\n      },\n      dest: { value: paths.actions.leftHand.scalePenTip },\n      xform: xforms.touch_axis_scroll(0.05)\n    },\n    {\n      src: [rButton(\"primary\").pressed, lButton(\"secondary\").pressed],\n      dest: { value: leftUndoDrawing },\n      xform: xforms.any,\n      priority: 1\n    },\n    {\n      src: { value: leftUndoDrawing },\n      dest: { value: paths.actions.leftHand.undoDrawing },\n      xform: xforms.rising\n    },\n    {\n      src: { value: lButton(\"primary\").pressed },\n      dest: { value: paths.actions.leftHand.switchDrawMode },\n      xform: xforms.rising,\n      priority: 2\n    }\n  ],\n\n  [sets.rightCursorHoveringOnInteractable]: [\n    {\n      src: { value: rightGripPressed2 },\n      dest: { value: rGripRisingGrab },\n      xform: xforms.rising\n    },\n    {\n      src: { value: rightTriggerPressed2 },\n      dest: { value: rTriggerRisingGrab },\n      xform: xforms.rising,\n      priority: 1\n    },\n    {\n      src: [rGripRisingGrab],\n      dest: { value: paths.actions.cursor.right.grab },\n      xform: xforms.any\n    },\n    {\n      src: { value: inspectButtons },\n      dest: { value: paths.actions.startInspecting },\n      xform: xforms.rising\n    }\n  ],\n\n  [sets.leftCursorHoveringOnInteractable]: [\n    {\n      src: { value: leftGripPressed2 },\n      dest: { value: lGripRisingGrab },\n      xform: xforms.rising\n    },\n    {\n      src: { value: leftTriggerPressed2 },\n      dest: { value: lTriggerRisingGrab },\n      xform: xforms.rising,\n      priority: 1\n    },\n    {\n      src: [lGripRisingGrab],\n      dest: { value: paths.actions.cursor.left.grab },\n      xform: xforms.any\n    },\n    {\n      src: { value: inspectButtons },\n      dest: { value: paths.actions.startInspecting },\n      xform: xforms.rising\n    }\n  ],\n\n  [sets.rightCursorHoldingUI]: [\n    {\n      src: { value: rightTriggerPressed2 },\n      dest: {\n        value: rightCursorDrop2\n      },\n      xform: xforms.falling,\n      priority: 4\n    }\n  ],\n\n  [sets.leftCursorHoldingUI]: [\n    {\n      src: { value: leftTriggerPressed2 },\n      dest: {\n        value: leftCursorDrop2\n      },\n      xform: xforms.falling,\n      priority: 4\n    }\n  ],\n\n  [sets.rightCursorHoldingInteractable]: [\n    {\n      src: {\n        value: rAxis(\"touchY\"),\n        touching: rButton(\"touchpad\").touched\n      },\n      dest: { value: paths.actions.cursor.right.modDelta },\n      xform: xforms.touch_axis_scroll(-1)\n    },\n    {\n      src: {\n        value: rAxis(\"joyY\")\n      },\n      dest: { value: paths.actions.cursor.right.modDelta },\n      xform: xforms.scale(-0.02)\n    },\n    {\n      src: { value: rightGripPressed2 },\n      dest: { value: rightCursorDrop1 },\n      xform: xforms.falling,\n      priority: 1\n    },\n    {\n      src: [rightCursorDrop1, rightCursorDrop2],\n      dest: { value: paths.actions.cursor.right.drop },\n      xform: xforms.any\n    },\n    {\n      src: {},\n      dest: { value: ensureFrozenViaDpad },\n      root: rootForFrozenOverrideWhenHolding,\n      xform: xforms.always(false)\n    }\n  ],\n\n  [sets.leftCursorHoldingInteractable]: [\n    {\n      src: {\n        value: lAxis(\"touchY\"),\n        touching: lButton(\"touchpad\").touched\n      },\n      dest: { value: paths.actions.cursor.left.modDelta },\n      xform: xforms.touch_axis_scroll(-1)\n    },\n    {\n      src: {\n        value: lAxis(\"joyY\")\n      },\n      dest: { value: paths.actions.cursor.left.modDelta },\n      xform: xforms.scale(-0.02),\n      priority: 1\n    },\n    {\n      src: { value: leftGripPressed2 },\n      dest: { value: leftCursorDrop1 },\n      xform: xforms.falling,\n      priority: 1\n    },\n    {\n      src: [leftCursorDrop1, leftCursorDrop2],\n      dest: { value: paths.actions.cursor.left.drop },\n      xform: xforms.any\n    },\n    {\n      src: {},\n      dest: { value: ensureFrozenViaDpad },\n      root: rootForFrozenOverrideWhenHolding,\n      xform: xforms.always(false)\n    }\n  ],\n\n  [sets.rightCursorHoveringOnPen]: [],\n\n  [sets.leftCursorHoveringOnPen]: [],\n\n  [sets.rightCursorHoldingPen]: [\n    {\n      src: [rightCursorDrop1],\n      dest: { value: paths.actions.cursor.right.drop },\n      xform: xforms.noop,\n      priority: 1\n    },\n    {\n      src: [rightCursorDrop2],\n      dest: { value: paths.actions.cursor.right.drop },\n      xform: xforms.noop,\n      priority: 1\n    },\n    {\n      src: { value: rightGripPressed2 },\n      dest: { value: paths.actions.cursor.right.drop },\n      xform: xforms.rising,\n      priority: 1\n    },\n    {\n      src: {\n        bool: rTouchpadRising,\n        value: rDpadCenter1\n      },\n      dest: { value: paths.actions.rightHand.startTeleport },\n      xform: xforms.copyIfTrue,\n      priority: 2\n    },\n    {\n      src: { value: rightTriggerPressed2 },\n      dest: { value: paths.actions.cursor.right.startDrawing },\n      xform: xforms.rising,\n      priority: 3\n    },\n    {\n      src: { value: rightTriggerPressed2 },\n      dest: { value: paths.actions.cursor.right.stopDrawing },\n      xform: xforms.falling,\n      priority: 3\n    },\n    {\n      src: {\n        value: rAxis(\"touchX\"),\n        touching: rButton(\"touchpad\").touched\n      },\n      dest: { value: paths.actions.cursor.right.scalePenTip },\n      xform: xforms.touch_axis_scroll(0.1)\n    },\n    {\n      src: {\n        bool: rTouchpadRising,\n        value: rDpadNorth1\n      },\n      dest: {\n        value: paths.actions.cursor.right.penNextColor\n      },\n      xform: xforms.copyIfTrue,\n      priority: 2\n    },\n    {\n      src: {\n        bool: rTouchpadRising,\n        value: rDpadSouth1\n      },\n      dest: {\n        value: paths.actions.cursor.right.penPrevColor\n      },\n      xform: xforms.copyIfTrue,\n      priority: 2\n    },\n    {\n      src: { value: rButton(\"primary\").pressed },\n      dest: { value: paths.actions.cursor.right.undoDrawing },\n      xform: xforms.rising,\n      priority: 2\n    }\n  ],\n\n  [sets.leftCursorHoldingPen]: [\n    {\n      src: [leftCursorDrop1],\n      dest: { value: paths.actions.cursor.left.drop },\n      xform: xforms.noop,\n      priority: 1\n    },\n    {\n      src: [leftCursorDrop2],\n      dest: { value: paths.actions.cursor.left.drop },\n      xform: xforms.noop,\n      priority: 1\n    },\n    {\n      src: { value: leftGripPressed2 },\n      dest: { value: paths.actions.cursor.left.drop },\n      xform: xforms.rising,\n      priority: 1\n    },\n    {\n      src: { value: leftTriggerPressed2 },\n      dest: { value: paths.actions.cursor.left.startDrawing },\n      xform: xforms.rising,\n      priority: 3\n    },\n    {\n      src: { value: leftTriggerPressed2 },\n      dest: { value: paths.actions.cursor.left.stopDrawing },\n      xform: xforms.falling,\n      priority: 3\n    },\n    {\n      src: {\n        value: lAxis(\"touchX\"),\n        touching: lButton(\"touchpad\").touched\n      },\n      dest: { value: paths.actions.cursor.left.scalePenTip },\n      xform: xforms.touch_axis_scroll(0.1)\n    },\n    {\n      src: {\n        value: leftTouchpadPressed2\n      },\n      dest: {\n        value: lTouchpadRising1\n      },\n      xform: xforms.rising,\n      priority: 1\n    },\n    {\n      src: {\n        bool: lTouchpadRising1,\n        value: lDpadNorth1\n      },\n      dest: {\n        value: paths.actions.cursor.left.penNextColor\n      },\n      xform: xforms.copyIfTrue,\n      priority: 2\n    },\n    {\n      src: {\n        bool: lTouchpadRising1,\n        value: lDpadSouth1\n      },\n      dest: {\n        value: paths.actions.cursor.left.penPrevColor\n      },\n      xform: xforms.copyIfTrue,\n      priority: 2\n    },\n    {\n      src: { value: lButton(\"primary\").pressed },\n      dest: { value: paths.actions.cursor.left.undoDrawing },\n      xform: xforms.rising,\n      priority: 2\n    }\n  ],\n\n  [sets.rightHandHoveringOnInteractable]: [\n    {\n      src: { value: rightGripPressed2 },\n      dest: { value: rGripRisingGrab },\n      xform: xforms.rising\n    },\n    {\n      src: { value: rightTriggerPressed2 },\n      dest: { value: rTriggerRisingGrab },\n      xform: xforms.rising,\n      priority: 2\n    },\n    {\n      src: [rGripRisingGrab],\n      dest: { value: paths.actions.rightHand.grab },\n      xform: xforms.any\n    }\n  ],\n\n  [sets.rightHandHoldingInteractable]: [\n    {\n      src: { value: rightGripPressed2 },\n      dest: { value: paths.actions.rightHand.drop },\n      xform: xforms.falling,\n      priority: 1\n    },\n    {\n      src: {},\n      dest: { value: ensureFrozenViaDpad },\n      root: rootForFrozenOverrideWhenHolding,\n      xform: xforms.always(false)\n    }\n  ],\n  [sets.rightHandHoveringOnPen]: [],\n  [sets.rightHandHoldingPen]: [\n    {\n      src: {\n        bool: rTouchpadRising,\n        value: rDpadCenter1\n      },\n      dest: { value: paths.actions.rightHand.startTeleport },\n      xform: xforms.copyIfTrue\n    },\n    {\n      src: { value: rightTriggerPressed2 },\n      dest: { value: paths.actions.rightHand.startDrawing },\n      xform: xforms.rising,\n      priority: 3\n    },\n    {\n      src: { value: rightTriggerPressed2 },\n      dest: { value: paths.actions.rightHand.stopDrawing },\n      xform: xforms.falling,\n      priority: 3\n    },\n    {\n      src: {\n        bool: rTouchpadRising,\n        value: rDpadNorth1\n      },\n      dest: {\n        value: paths.actions.rightHand.penNextColor\n      },\n      xform: xforms.copyIfTrue,\n      priority: 2\n    },\n    {\n      src: {\n        bool: rTouchpadRising,\n        value: rDpadSouth1\n      },\n      dest: {\n        value: paths.actions.rightHand.penPrevColor\n      },\n      xform: xforms.copyIfTrue,\n      priority: 2\n    },\n    {\n      src: {\n        value: rAxis(\"touchX\"),\n        touching: rButton(\"touchpad\").touched\n      },\n      dest: { value: paths.actions.rightHand.scalePenTip },\n      xform: xforms.touch_axis_scroll(0.05)\n    },\n    {\n      src: [lButton(\"primary\").pressed, rButton(\"secondary\").pressed],\n      dest: { value: rightUndoDrawing },\n      xform: xforms.any,\n      priority: 1\n    },\n    {\n      src: { value: rightUndoDrawing },\n      dest: { value: paths.actions.rightHand.undoDrawing },\n      xform: xforms.rising\n    },\n    {\n      src: { value: rButton(\"primary\").pressed },\n      dest: { value: paths.actions.rightHand.switchDrawMode },\n      xform: xforms.rising,\n      priority: 2\n    }\n  ],\n\n  [sets.rightCursorHoveringOnCamera]: [],\n  [sets.leftCursorHoveringOnCamera]: [],\n  [sets.rightHandHoveringOnCamera]: [],\n  [sets.leftHandHoveringOnCamera]: [],\n\n  [sets.rightHandHoldingCamera]: [\n    {\n      src: { value: rightTriggerPressed2 },\n      dest: { value: paths.actions.rightHand.takeSnapshot },\n      xform: xforms.copy,\n      priority: 3\n    },\n    {\n      src: { value: rightTriggerPressed2 },\n      dest: { value: paths.noop },\n      xform: xforms.falling,\n      priority: 3\n    }\n  ],\n  [sets.leftHandHoldingCamera]: [\n    {\n      src: { value: lButton(\"trigger\").pressed },\n      dest: { value: paths.actions.leftHand.takeSnapshot },\n      xform: xforms.copy\n    }\n  ],\n  [sets.rightCursorHoldingCamera]: [\n    {\n      src: { value: rightTriggerPressed2 },\n      dest: { value: paths.actions.cursor.right.takeSnapshot },\n      xform: xforms.copy,\n      priority: 3\n    },\n    {\n      src: { value: rightTriggerPressed2 },\n      dest: { value: paths.noop },\n      xform: xforms.falling,\n      priority: 3\n    }\n  ],\n  [sets.leftCursorHoldingCamera]: [\n    {\n      src: { value: leftTriggerPressed2 },\n      dest: { value: paths.actions.cursor.left.takeSnapshot },\n      xform: xforms.copy,\n      priority: 3\n    },\n    {\n      src: { value: leftTriggerPressed2 },\n      dest: { value: paths.noop },\n      xform: xforms.falling,\n      priority: 3\n    }\n  ],\n  [sets.inputFocused]: [\n    {\n      src: { value: \"/device/keyboard\" },\n      dest: { value: paths.noop },\n      xform: xforms.noop,\n      priority: 1000\n    }\n  ]\n});\n\nexport const viveWandUserBindings = addSetsToBindings({\n  [sets.global]: [\n    {\n      src: {\n        value: lAxis(\"touchY\")\n      },\n      dest: { value: lTouchY },\n      xform: xforms.copy\n    }\n  ],\n  [sets.leftHandHoldingPen]: [\n    {\n      src: { value: leftGripPressed2 },\n      dest: { value: paths.actions.leftHand.drop },\n      xform: xforms.rising,\n      priority: 2\n    }\n  ],\n  [sets.rightHandHoldingPen]: [\n    {\n      src: { value: rightGripPressed2 },\n      dest: { value: paths.actions.rightHand.drop },\n      xform: xforms.rising,\n      priority: 2\n    }\n  ]\n});\n\nexport const indexUserBindings = addSetsToBindings({\n  [sets.global]: [\n    {\n      src: {\n        value: lAxis(\"touchY\")\n      },\n      dest: { value: lTouchY },\n      xform: xforms.copy\n    }\n  ]\n});\n\nexport const viveFocusPlusUserBindings = addSetsToBindings({\n  [sets.global]: [\n    {\n      src: {\n        value: lAxis(\"touchY\")\n      },\n      dest: { value: lTouchY },\n      xform: xforms.negate\n    }\n  ],\n  [sets.leftHandHoldingPen]: [\n    {\n      src: { value: leftGripPressed2 },\n      dest: { value: paths.actions.leftHand.drop },\n      xform: xforms.rising,\n      priority: 2\n    }\n  ],\n  [sets.rightHandHoldingPen]: [\n    {\n      src: { value: rightGripPressed2 },\n      dest: { value: paths.actions.rightHand.drop },\n      xform: xforms.rising,\n      priority: 2\n    }\n  ]\n});\n\nexport const viveCosmosUserBindings = addSetsToBindings({\n  [sets.global]: [\n    {\n      src: {\n        value: lAxis(\"touchY\")\n      },\n      dest: { value: lTouchY },\n      xform: xforms.copy\n    }\n  ],\n  [sets.leftHandHoldingPen]: [\n    {\n      src: {\n        x: lAxis(\"joyX\"),\n        y: lAxis(\"joyY\")\n      },\n      dest: {\n        value: lJoy\n      },\n      xform: xforms.compose_vec2,\n      priority: 1\n    },\n    {\n      src: {\n        value: lJoy\n      },\n      dest: {\n        north: lDpadNorth2,\n        south: lDpadSouth2,\n        east: lDpadEast2,\n        west: lDpadWest2,\n        center: lDpadCenter2\n      },\n      xform: xforms.vec2dpad(0.35, false, true)\n    },\n    {\n      src: { value: leftGripPressed2 },\n      dest: { value: paths.actions.leftHand.drop },\n      xform: xforms.rising,\n      priority: 2\n    },\n    {\n      src: {\n        value: lDpadEast2,\n        override: \"/device/overrides/foo\"\n      },\n      dest: { value: paths.actions.leftHand.penNextColor },\n      xform: xforms.rising,\n      priority: 2\n    },\n    {\n      src: {\n        value: lDpadWest2,\n        override: \"/device/overrides/foo\"\n      },\n      dest: { value: paths.actions.leftHand.penPrevColor },\n      xform: xforms.rising,\n      priority: 2\n    },\n    {\n      src: {\n        value: lAxis(\"joyY\")\n      },\n      dest: {\n        value: lJoyYDeadzoned\n      },\n      xform: xforms.deadzone(0.1),\n      priority: 1\n    },\n    {\n      src: { value: lJoyYDeadzoned },\n      dest: { value: paths.actions.leftHand.scalePenTip },\n      xform: xforms.scaleExp(-0.005, 5),\n      priority: 1\n    }\n  ],\n  [sets.rightHandHoldingPen]: [\n    {\n      src: { value: rightGripPressed2 },\n      dest: { value: paths.actions.rightHand.drop },\n      xform: xforms.rising,\n      priority: 2\n    },\n    {\n      src: { value: rDpadEast2 },\n      dest: { value: paths.actions.rightHand.penNextColor },\n      xform: xforms.rising,\n      priority: 2\n    },\n    {\n      src: { value: rDpadWest2 },\n      dest: { value: paths.actions.rightHand.penPrevColor },\n      xform: xforms.rising,\n      priority: 2\n    },\n    {\n      src: {\n        value: rAxis(\"joyY\")\n      },\n      dest: {\n        value: rJoyYDeadzoned\n      },\n      xform: xforms.deadzone(0.1)\n    },\n    {\n      src: { value: rJoyYDeadzoned },\n      dest: { value: paths.actions.rightHand.scalePenTip },\n      xform: xforms.scaleExp(-0.005, 5),\n      priority: 1\n    }\n  ],\n  [sets.inspecting]: [\n    {\n      src: { value: inspectButtons },\n      dest: { value: paths.actions.stopInspecting },\n      xform: xforms.falling\n    }\n  ]\n});\n","import { paths } from \"../paths\";\nimport { sets } from \"../sets\";\nimport { xforms } from \"./xforms\";\nimport { addSetsToBindings } from \"./utils\";\n\nconst lGripPressed = paths.device.wmr.left.grip.pressed;\nconst rGripPressed = paths.device.wmr.right.grip.pressed;\nconst rTriggerPressed = paths.device.wmr.right.trigger.pressed;\n\nconst rJoyNorth = paths.device.wmr.v(\"right/joy/north\");\nconst rGripRising = paths.device.wmr.v(\"right/grip/rising\");\nconst rTriggerRising = paths.device.wmr.v(\"right/trigger/rising\");\nconst rGripFalling = paths.device.wmr.v(\"right/grip/falling\");\nconst rTriggerFalling = paths.device.wmr.v(\"right/trigger/falling\");\n\nfunction dpadVariables(hand) {\n  return {\n    padWest: paths.device.wmr.v(hand + \"/pad/west\"),\n    padEast: paths.device.wmr.v(hand + \"/pad/east\"),\n    padNorth: paths.device.wmr.v(hand + \"/pad/north\"),\n    padSouth: paths.device.wmr.v(hand + \"/pad/south\"),\n    padCenter: paths.device.wmr.v(hand + \"/pad/center\"),\n    padCenterStrip: paths.device.wmr.v(hand + \"/pad/centerStrip\")\n  };\n}\n\nfunction dpadBindings(hand) {\n  const { padWest, padEast, padNorth, padSouth, padCenter, padCenterStrip } = dpadVariables(hand);\n  const pad = paths.device.wmr.v(hand + \"/pad\");\n  return [\n    {\n      src: {\n        x: paths.device.wmr[hand].touchpad.axisX,\n        y: paths.device.wmr[hand].touchpad.axisY\n      },\n      dest: { value: pad },\n      xform: xforms.compose_vec2\n    },\n    {\n      src: { value: pad },\n      dest: {\n        west: padWest,\n        east: padEast,\n        north: padNorth,\n        south: padSouth,\n        center: padCenter\n      },\n      xform: xforms.vec2dpad(0.5, false, false)\n    },\n    {\n      src: [padNorth, padCenter, padSouth],\n      dest: { value: padCenterStrip },\n      xform: xforms.any\n    }\n  ];\n}\n\nconst neverFrozenBinding = {\n  src: {},\n  dest: { value: paths.actions.ensureFrozen },\n  xform: xforms.always(false)\n};\n\nfunction penBindings(hand, forCursor) {\n  const padY = paths.device.wmr[hand].touchpad.axisY;\n  const triggerPressed = paths.device.wmr[hand].trigger.pressed;\n  const padPressed = paths.device.wmr[hand].touchpad.pressed;\n  const padTouched = paths.device.wmr[hand].touchpad.touched;\n\n  const padRising = paths.device.wmr.v(hand + \"/pad/rising\");\n  const padCenterStripTouched = paths.device.wmr.v(hand + \"/pad/centerStrip/touched\");\n  const { padWest, padEast, padCenter, padCenterStrip } = dpadVariables(hand);\n\n  const actions = forCursor ? paths.actions.cursor[hand] : paths.actions[hand + \"Hand\"];\n\n  return [\n    neverFrozenBinding,\n    ...dpadBindings(hand),\n    {\n      src: { value: triggerPressed },\n      dest: { value: actions.startDrawing },\n      xform: xforms.rising\n    },\n    {\n      src: { value: triggerPressed },\n      dest: { value: actions.stopDrawing },\n      xform: xforms.falling\n    },\n    {\n      src: { value: padPressed },\n      dest: { value: padRising },\n      xform: xforms.rising\n    },\n    {\n      src: { bool: padRising, value: padWest },\n      dest: { value: actions.penPrevColor },\n      xform: xforms.copyIfTrue\n    },\n    {\n      src: { bool: padRising, value: padEast },\n      dest: { value: actions.penNextColor },\n      xform: xforms.copyIfTrue\n    },\n    {\n      src: [padCenterStrip, padTouched],\n      dest: { value: padCenterStripTouched },\n      xform: xforms.all\n    },\n    {\n      src: { value: padY, touching: padCenterStripTouched },\n      dest: { value: actions.scalePenTip },\n      xform: xforms.touch_axis_scroll(-0.05)\n    },\n    {\n      src: [padRising, padCenter],\n      dest: { value: actions.undoDrawing },\n      xform: xforms.all\n    }\n  ];\n}\n\nfunction handPoseBindings(hand) {\n  const padTouched = paths.device.wmr[hand].touchpad.touched;\n  const triggerPressed = paths.device.wmr[hand].trigger.pressed;\n  const gripPressed = paths.device.wmr[hand].grip.pressed;\n  const actions = paths.actions[hand + \"Hand\"];\n  return [\n    {\n      src: { value: padTouched },\n      dest: { value: actions.thumb },\n      xform: xforms.copy\n    },\n    {\n      src: { value: triggerPressed },\n      dest: { value: actions.index },\n      xform: xforms.copy\n    },\n    {\n      src: { value: gripPressed },\n      dest: { value: actions.middleRingPinky },\n      xform: xforms.copy\n    }\n  ];\n}\n\nfunction freezeBindings() {\n  const leftPadPressed = paths.device.wmr.left.touchpad.pressed;\n  const rightPadPressed = paths.device.wmr.right.touchpad.pressed;\n  const leftPadFalling = paths.device.wmr.v(\"left/touchpad/falling\");\n  const rightPadFalling = paths.device.wmr.v(\"right/touchpad/falling\");\n  const keyboardSaceFalling = paths.device.wmr.k(\"space/falling\");\n  return [\n    {\n      src: [paths.device.keyboard.key(\" \"), leftPadPressed, rightPadPressed],\n      dest: { value: paths.actions.ensureFrozen },\n      xform: xforms.any\n    },\n    {\n      src: { value: paths.device.keyboard.key(\" \") },\n      dest: { value: keyboardSaceFalling },\n      xform: xforms.falling\n    },\n    {\n      src: { value: paths.device.keyboard.key(\"Tab\") },\n      dest: { value: paths.actions.toggleFreeze },\n      xform: xforms.rising\n    },\n    {\n      src: { value: leftPadPressed },\n      dest: { value: leftPadFalling },\n      xform: xforms.falling\n    },\n    {\n      src: { value: rightPadPressed },\n      dest: { value: rightPadFalling },\n      xform: xforms.falling\n    },\n    {\n      src: [keyboardSaceFalling, leftPadFalling, rightPadFalling],\n      dest: { value: paths.actions.thaw },\n      xform: xforms.any\n    }\n  ];\n}\n\nfunction characterAccelerationBindings() {\n  const wasd_vec2 = paths.device.wmr.k(\"wasd_vec2\");\n  const arrows_vec2 = paths.device.wmr.k(\"arrows_vec2\");\n  const keyboardCharacterAcceleration = paths.device.wmr.k(\"characterAcceleration\");\n  const lJoyXDeadzoned = paths.device.wmr.v(\"left/joy/x/deadzoned\");\n  const lJoyYDeadzoned = paths.device.wmr.v(\"left/joy/y/deadzoned\");\n  const lJoyXScaled = paths.device.wmr.v(\"left/joy/x/scaled\");\n  const lJoyYScaled = paths.device.wmr.v(\"left/joy/y/scaled\");\n  const lCharacterAcceleration = paths.device.wmr.v(\"left/characterAcceleration\");\n  return [\n    {\n      src: {\n        w: paths.device.keyboard.key(\"arrowup\"),\n        a: paths.device.keyboard.key(\"arrowleft\"),\n        s: paths.device.keyboard.key(\"arrowdown\"),\n        d: paths.device.keyboard.key(\"arrowright\")\n      },\n      dest: { vec2: arrows_vec2 },\n      xform: xforms.wasd_to_vec2\n    },\n    {\n      src: {\n        w: paths.device.keyboard.key(\"w\"),\n        a: paths.device.keyboard.key(\"a\"),\n        s: paths.device.keyboard.key(\"s\"),\n        d: paths.device.keyboard.key(\"d\")\n      },\n      dest: { vec2: wasd_vec2 },\n      xform: xforms.wasd_to_vec2\n    },\n    {\n      src: {\n        first: wasd_vec2,\n        second: arrows_vec2\n      },\n      dest: { value: keyboardCharacterAcceleration },\n      xform: xforms.max_vec2\n    },\n    {\n      src: { value: paths.device.wmr.left.joystick.axisX },\n      dest: { value: lJoyXDeadzoned },\n      xform: xforms.deadzone(0.1)\n    },\n    {\n      src: { value: lJoyXDeadzoned },\n      dest: { value: lJoyXScaled },\n      xform: xforms.scale(1.5) // horizontal character speed modifier\n    },\n    {\n      src: { value: paths.device.wmr.left.joystick.axisY },\n      dest: { value: lJoyYDeadzoned },\n      xform: xforms.deadzone(0.1)\n    },\n    {\n      src: { value: lJoyYDeadzoned },\n      dest: { value: lJoyYScaled },\n      xform: xforms.scale(-1.5) // vertical character speed modifier\n    },\n    {\n      src: { x: lJoyXScaled, y: lJoyYScaled },\n      dest: { value: lCharacterAcceleration },\n      xform: xforms.compose_vec2\n    },\n    {\n      src: {\n        first: lCharacterAcceleration,\n        second: keyboardCharacterAcceleration\n      },\n      dest: { value: paths.actions.characterAcceleration },\n      xform: xforms.max_vec2\n    },\n    {\n      src: [\n        paths.device.wmr.left.trigger.pressed,\n        paths.device.wmr.right.trigger.pressed,\n        paths.device.keyboard.key(\"shift\")\n      ],\n      dest: { value: paths.actions.boost },\n      xform: xforms.any\n    }\n  ];\n}\n\nfunction cursorModDeltaBindings() {\n  const { padNorth, padSouth } = dpadVariables(\"right\");\n  const rPadNorthOrSouth = paths.device.wmr.v(\"right/pad/northOrSouth\");\n  const rPadNorthOrSouthPressed = paths.device.wmr.v(\"right/pad/northOrSouth/pressed\");\n  const rPadNorthOrSouthPressedY = paths.device.wmr.v(\"right/pad/northOrSouthpressed/y\");\n  return [\n    ...dpadBindings(\"right\"),\n    {\n      src: [padNorth, padSouth],\n      dest: { value: rPadNorthOrSouth },\n      xform: xforms.any\n    },\n    {\n      src: [rPadNorthOrSouth, paths.device.wmr.right.touchpad.pressed],\n      dest: { value: rPadNorthOrSouthPressed },\n      xform: xforms.all\n    },\n    {\n      src: {\n        bool: rPadNorthOrSouthPressed,\n        value: paths.device.wmr.right.touchpad.axisY\n      },\n      dest: { value: rPadNorthOrSouthPressedY },\n      xform: xforms.copyIfTrue\n    },\n    {\n      src: { value: rPadNorthOrSouthPressedY },\n      dest: { value: paths.actions.cursor.right.modDelta },\n      xform: xforms.scale(0.1)\n    }\n  ];\n}\n\nfunction cursorMediaVolumeModBindings() {\n  const hand = \"right\";\n  const padY = paths.device.wmr[hand].touchpad.axisY;\n  const padTouched = paths.device.wmr[hand].touchpad.touched;\n\n  const padCenterStripTouched = paths.device.wmr.v(hand + \"/pad/centerStrip/touched\");\n  const { padCenterStrip } = dpadVariables(hand);\n\n  return [\n    ...dpadBindings(hand),\n    {\n      src: [padCenterStrip, padTouched],\n      dest: { value: padCenterStripTouched },\n      xform: xforms.all\n    },\n    {\n      src: { value: padY, touching: padCenterStripTouched },\n      dest: { value: paths.actions.cursor[hand].mediaVolumeMod },\n      xform: xforms.touch_axis_scroll(-0.1)\n    }\n  ];\n}\n\nfunction holdingCameraBindings(hand, forCursor) {\n  const actions = forCursor ? paths.actions.cursor[hand] : paths.actions[hand + \"Hand\"];\n  return [\n    neverFrozenBinding,\n    {\n      src: { value: paths.device.wmr[hand].trigger.pressed },\n      dest: { value: actions.takeSnapshot },\n      xform: xforms.copy\n    }\n  ];\n}\n\nfunction teleportationAndRotationBindings() {\n  const rJoy = paths.device.wmr.v(\"right/joy\");\n  const rJoyWest = paths.device.wmr.v(\"right/joy/west\");\n  const rJoyEast = paths.device.wmr.v(\"right/joy/East\");\n  const rJoyWestRising = paths.device.wmr.v(\"right/joy/west/rising\");\n  const rJoyEastRising = paths.device.wmr.v(\"right/joy/east/rising\");\n  const keyboardQRising = paths.device.wmr.k(\"q/rising\");\n  const keyboardERising = paths.device.wmr.k(\"e/rising\");\n  return [\n    {\n      src: {\n        x: paths.device.wmr.right.joystick.axisX,\n        y: paths.device.wmr.right.joystick.axisY\n      },\n      dest: { value: rJoy },\n      xform: xforms.compose_vec2\n    },\n    {\n      src: { value: rJoy },\n      dest: {\n        north: rJoyNorth,\n        west: rJoyWest,\n        east: rJoyEast\n      },\n      xform: xforms.vec2dpad(0.2, false, false)\n    },\n    {\n      src: { value: rJoyNorth },\n      dest: { value: paths.actions.rightHand.startTeleport },\n      xform: xforms.rising\n    },\n    {\n      src: { value: rJoyWest },\n      dest: { value: rJoyWestRising },\n      xform: xforms.rising\n    },\n    {\n      src: { value: rJoyEast },\n      dest: { value: rJoyEastRising },\n      xform: xforms.rising\n    },\n    {\n      src: { value: paths.device.keyboard.key(\"q\") },\n      dest: { value: keyboardQRising },\n      xform: xforms.rising\n    },\n    {\n      src: { value: paths.device.keyboard.key(\"e\") },\n      dest: { value: keyboardERising },\n      xform: xforms.rising\n    },\n    {\n      src: [rJoyWestRising, keyboardQRising],\n      dest: { value: paths.actions.snapRotateLeft },\n      xform: xforms.any\n    },\n    {\n      src: [rJoyEastRising, keyboardERising],\n      dest: { value: paths.actions.snapRotateRight },\n      xform: xforms.any\n    }\n  ];\n}\n\nexport const wmrUserBindings = addSetsToBindings({\n  [sets.global]: [\n    {\n      src: { value: paths.device.wmr.left.matrix },\n      dest: { value: paths.actions.leftHand.matrix },\n      xform: xforms.copy\n    },\n    {\n      src: { value: paths.device.wmr.right.matrix },\n      dest: { value: paths.actions.rightHand.matrix },\n      xform: xforms.copy\n    },\n    {\n      src: { value: paths.device.wmr.left.pose },\n      dest: { value: paths.actions.leftHand.pose },\n      xform: xforms.copy\n    },\n    {\n      src: { value: paths.device.wmr.right.pose },\n      dest: { value: paths.actions.cursor.right.pose },\n      xform: xforms.copy\n    },\n    {\n      src: { value: paths.device.wmr.right.pose },\n      dest: { value: paths.actions.rightHand.pose },\n      xform: xforms.copy\n    },\n    ...handPoseBindings(\"left\"),\n    ...handPoseBindings(\"right\"),\n    ...freezeBindings(),\n    ...teleportationAndRotationBindings(),\n    ...characterAccelerationBindings(),\n    {\n      src: {\n        value: paths.device.keyboard.key(\"m\")\n      },\n      dest: {\n        value: paths.actions.muteMic\n      },\n      xform: xforms.rising\n    },\n    {\n      src: {\n        value: paths.device.keyboard.key(\"t\")\n      },\n      dest: {\n        value: paths.actions.focusChat\n      },\n      xform: xforms.rising\n    },\n    {\n      src: {\n        value: paths.device.keyboard.key(\"/\")\n      },\n      dest: {\n        value: paths.actions.focusChatCommand\n      },\n      xform: xforms.rising\n    },\n    {\n      src: { value: paths.device.keyboard.key(\"Escape\") },\n      dest: { value: paths.actions.mediaExit },\n      xform: xforms.rising\n    },\n    {\n      src: {\n        bool: paths.device.keyboard.key(\"control\"),\n        value: paths.device.keyboard.key(\"1\")\n      },\n      dest: { value: \"/var/shift+1\" },\n      priority: 1001,\n      xform: xforms.copyIfTrue\n    },\n    {\n      src: { value: \"/var/shift+1\" },\n      dest: { value: paths.actions.mediaSearch1 },\n      xform: xforms.rising\n    },\n    {\n      src: {\n        bool: paths.device.keyboard.key(\"control\"),\n        value: paths.device.keyboard.key(\"2\")\n      },\n      dest: { value: \"/var/shift+2\" },\n      priority: 1001,\n      xform: xforms.copyIfTrue\n    },\n    {\n      src: { value: \"/var/shift+2\" },\n      dest: { value: paths.actions.mediaSearch2 },\n      xform: xforms.rising\n    },\n    {\n      src: {\n        bool: paths.device.keyboard.key(\"control\"),\n        value: paths.device.keyboard.key(\"3\")\n      },\n      dest: { value: \"/var/shift+3\" },\n      priority: 1001,\n      xform: xforms.copyIfTrue\n    },\n    {\n      src: { value: \"/var/shift+3\" },\n      dest: { value: paths.actions.mediaSearch3 },\n      xform: xforms.rising\n    },\n    {\n      src: {\n        bool: paths.device.keyboard.key(\"control\"),\n        value: paths.device.keyboard.key(\"4\")\n      },\n      dest: { value: \"/var/shift+4\" },\n      priority: 1001,\n      xform: xforms.copyIfTrue\n    },\n    {\n      src: { value: \"/var/shift+4\" },\n      dest: { value: paths.actions.mediaSearch4 },\n      xform: xforms.rising\n    },\n    {\n      src: {\n        bool: paths.device.keyboard.key(\"control\"),\n        value: paths.device.keyboard.key(\"5\")\n      },\n      dest: { value: \"/var/shift+5\" },\n      priority: 1001,\n      xform: xforms.copyIfTrue\n    },\n    {\n      src: { value: \"/var/shift+5\" },\n      dest: { value: paths.actions.mediaSearch5 },\n      xform: xforms.rising\n    },\n    {\n      src: {\n        bool: paths.device.keyboard.key(\"control\"),\n        value: paths.device.keyboard.key(\"6\")\n      },\n      dest: { value: \"/var/shift+6\" },\n      priority: 1001,\n      xform: xforms.copyIfTrue\n    },\n    {\n      src: { value: \"/var/shift+6\" },\n      dest: { value: paths.actions.mediaSearch6 },\n      xform: xforms.rising\n    },\n    {\n      src: {\n        bool: paths.device.keyboard.key(\"control\"),\n        value: paths.device.keyboard.key(\"7\")\n      },\n      dest: { value: \"/var/shift+7\" },\n      priority: 1001,\n      xform: xforms.copyIfTrue\n    },\n    {\n      src: { value: \"/var/shift+7\" },\n      dest: { value: paths.actions.mediaSearch7 },\n      xform: xforms.rising\n    },\n    {\n      src: {\n        bool: paths.device.keyboard.key(\"control\"),\n        value: paths.device.keyboard.key(\"8\")\n      },\n      dest: { value: \"/var/shift+8\" },\n      priority: 1001,\n      xform: xforms.copyIfTrue\n    },\n    {\n      src: { value: \"/var/shift+8\" },\n      dest: { value: paths.actions.mediaSearch8 },\n      xform: xforms.rising\n    }\n  ],\n\n  [sets.leftHandHoveringOnNothing]: [],\n  [sets.rightCursorHoveringOnNothing]: [],\n  [sets.rightHandHoveringOnNothing]: [],\n\n  [sets.rightHandTeleporting]: [\n    {\n      src: { value: rJoyNorth },\n      dest: { value: paths.actions.rightHand.stopTeleport },\n      xform: xforms.falling\n    }\n  ],\n\n  [sets.rightCursorHoveringOnUI]: [\n    {\n      src: { value: rTriggerPressed },\n      dest: { value: paths.actions.cursor.right.grab },\n      xform: xforms.rising\n    }\n  ],\n\n  [sets.rightCursorHoveringOnVideo]: [...cursorMediaVolumeModBindings()],\n\n  [sets.leftHandHoveringOnInteractable]: [\n    {\n      src: { value: lGripPressed },\n      dest: { value: paths.actions.leftHand.grab },\n      xform: xforms.rising\n    }\n  ],\n  [sets.rightCursorHoveringOnInteractable]: [\n    {\n      src: { value: rGripPressed },\n      dest: { value: rGripRising },\n      xform: xforms.rising\n    },\n    {\n      src: { value: rTriggerPressed },\n      dest: { value: rTriggerRising },\n      xform: xforms.rising\n    },\n    {\n      src: [rGripRising, rTriggerRising],\n      dest: { value: paths.actions.cursor.right.grab },\n      xform: xforms.any\n    }\n  ],\n  [sets.rightHandHoveringOnInteractable]: [\n    {\n      src: { value: rGripPressed },\n      dest: { value: paths.actions.rightHand.grab },\n      xform: xforms.rising\n    }\n  ],\n\n  [sets.leftHandHoldingInteractable]: [\n    neverFrozenBinding,\n    {\n      src: { value: lGripPressed },\n      dest: { value: paths.actions.leftHand.drop },\n      xform: xforms.falling\n    }\n  ],\n  [sets.rightCursorHoldingInteractable]: [\n    neverFrozenBinding,\n    ...cursorModDeltaBindings(),\n    {\n      src: { value: rGripPressed },\n      dest: { value: rGripFalling },\n      xform: xforms.falling\n    },\n    {\n      src: { value: rTriggerPressed },\n      dest: { value: rTriggerFalling },\n      xform: xforms.falling\n    },\n    {\n      src: [rGripFalling, rTriggerFalling],\n      dest: { value: paths.actions.cursor.right.drop },\n      xform: xforms.any\n    }\n  ],\n  [sets.rightHandHoldingInteractable]: [\n    neverFrozenBinding,\n    {\n      src: { value: rGripPressed },\n      dest: { value: paths.actions.rightHand.drop },\n      xform: xforms.falling\n    }\n  ],\n\n  [sets.leftHandHoveringOnPen]: [],\n  [sets.rightCursorHoveringOnPen]: [],\n  [sets.rightHandHoveringOnPen]: [],\n\n  [sets.leftHandHoldingPen]: penBindings(\"left\"),\n  [sets.rightCursorHoldingPen]: penBindings(\"right\", true),\n  [sets.rightHandHoldingPen]: penBindings(\"right\"),\n\n  [sets.leftHandHoveringOnCamera]: [],\n  [sets.rightCursorHoveringOnCamera]: [],\n  [sets.rightHandHoveringOnCamera]: [],\n\n  [sets.leftHandHoldingCamera]: holdingCameraBindings(\"left\"),\n  [sets.rightCursorHoldingCamera]: holdingCameraBindings(\"right\", true),\n  [sets.rightHandHoldingCamera]: holdingCameraBindings(\"right\"),\n\n  [sets.inputFocused]: [\n    {\n      src: { value: \"/device/keyboard\" },\n      dest: { value: paths.noop },\n      xform: xforms.noop,\n      priority: 1000\n    }\n  ]\n});\n","import { paths } from \"../paths\";\nimport { sets } from \"../sets\";\nimport { xforms } from \"./xforms\";\nimport { addSetsToBindings } from \"./utils\";\n\nconst button = paths.device.xbox.button;\nconst axis = paths.device.xbox.axis;\nconst scaledRightJoystickVertical = paths.device.xbox.v(\"scaledRightJoystickVertical\");\nconst scaledLeftJoystickCursorDelta = paths.device.xbox.v(\"scaledLeftJoystickCursorDelta\");\nconst deadzonedRightJoystickHorizontal = paths.device.xbox.v(\"deadzonedRightJoystickHorizontal\");\nconst deadzonedRightJoystickVertical = paths.device.xbox.v(\"deadzonedRightJoystickVertical\");\nconst deadzonedLeftJoystickHorizontal = paths.device.xbox.v(\"deadzonedLeftJoystickHorizontal\");\nconst deadzonedLeftJoystickVertical = paths.device.xbox.v(\"deadzonedLeftJoystickVertical\");\nconst vec2Zero = paths.device.xbox.v(\"vec2Zero\");\nconst zero = paths.device.xbox.v(\"zero\");\n\nfunction characterAccelerationBindings(disableForwardOnTrigger) {\n  const scaledLeftJoystickHorizontal = paths.device.xbox.v(\"scaledLeftJoystickHorizontal\");\n  const scaledLeftJoystickVertical = paths.device.xbox.v(\"scaledLeftJoystickVertical\");\n  const scaledLeftJoystickForwardAcceleration = paths.device.xbox.v(\"scaledLeftJoystickForwardAcceleration\");\n  return [\n    {\n      src: { value: deadzonedLeftJoystickHorizontal },\n      dest: { value: scaledLeftJoystickHorizontal },\n      xform: xforms.scale(1.5) // horizontal move speed modifier\n    },\n    {\n      src: { value: deadzonedLeftJoystickVertical },\n      dest: { value: scaledLeftJoystickVertical },\n      xform: xforms.scale(-1.25) // vertical move speed modifier\n    },\n    {\n      src: {\n        bool: button(\"leftTrigger\").pressed,\n        value: scaledLeftJoystickVertical\n      },\n      dest: { value: scaledLeftJoystickForwardAcceleration },\n      xform: disableForwardOnTrigger ? xforms.copyIfFalse : xforms.copy\n    },\n    {\n      src: {\n        x: scaledLeftJoystickHorizontal,\n        y: scaledLeftJoystickForwardAcceleration\n      },\n      dest: { value: paths.actions.characterAcceleration },\n      xform: xforms.compose_vec2\n    }\n  ];\n}\n\nexport const xboxControllerUserBindings = addSetsToBindings({\n  [sets.rightCursorHoldingPen]: [\n    {\n      src: { value: button(\"rightTrigger\").pressed },\n      dest: { value: paths.actions.cursor.right.startDrawing },\n      xform: xforms.rising,\n      priority: 200\n    },\n    {\n      src: { value: button(\"rightTrigger\").pressed },\n      dest: { value: paths.actions.cursor.right.stopDrawing },\n      xform: xforms.falling,\n      priority: 200\n    },\n    {\n      src: { value: button(\"b\").pressed },\n      dest: { value: paths.actions.cursor.right.drop },\n      xform: xforms.rising\n    },\n    {\n      src: { value: button(\"y\").pressed },\n      dest: { value: paths.actions.cursor.right.undoDrawing },\n      xform: xforms.rising,\n      priority: 200\n    },\n    {\n      src: { value: button(\"a\").pressed },\n      dest: { value: paths.actions.cursor.right.penNextColor },\n      xform: xforms.rising\n    },\n    {\n      src: { value: button(\"x\").pressed },\n      dest: { value: paths.actions.cursor.right.penPrevColor },\n      xform: xforms.rising\n    }\n  ],\n  [sets.global]: [\n    {\n      src: {},\n      dest: { value: paths.actions.cursor.right.hideLine },\n      xform: xforms.always(true)\n    },\n    {\n      src: { value: axis(\"rightJoystickHorizontal\") },\n      dest: { value: deadzonedRightJoystickHorizontal },\n      xform: xforms.deadzone(0.1)\n    },\n    {\n      src: { value: deadzonedRightJoystickHorizontal },\n      dest: { value: paths.actions.angularVelocity },\n      xform: xforms.scale(0.6) // horizontal look speed modifier\n    },\n    {\n      src: { value: axis(\"rightJoystickVertical\") },\n      dest: { value: deadzonedRightJoystickVertical },\n      xform: xforms.deadzone(0.1)\n    },\n    {\n      src: { value: deadzonedRightJoystickVertical },\n      dest: { value: scaledRightJoystickVertical },\n      xform: xforms.scale(-0.125) // vertical look speed modifier\n    },\n    {\n      src: {},\n      dest: { value: zero },\n      xform: xforms.always(0)\n    },\n    {\n      src: {\n        x: zero,\n        y: scaledRightJoystickVertical\n      },\n      dest: { value: paths.actions.cameraDelta },\n      xform: xforms.compose_vec2\n    },\n    {\n      src: { value: paths.actions.cameraDelta },\n      dest: { value: paths.actions.lobbyCameraDelta },\n      xform: xforms.copy\n    },\n    {\n      src: { value: axis(\"leftJoystickHorizontal\") },\n      dest: { value: deadzonedLeftJoystickHorizontal },\n      xform: xforms.deadzone(0.1)\n    },\n    {\n      src: { value: axis(\"leftJoystickVertical\") },\n      dest: { value: deadzonedLeftJoystickVertical },\n      xform: xforms.deadzone(0.1)\n    },\n    {\n      src: { value: button(\"leftTrigger\").pressed },\n      dest: { value: paths.actions.boost },\n      xform: xforms.copy\n    },\n    {\n      src: { value: button(\"leftBumper\").pressed },\n      dest: { value: paths.actions.snapRotateLeft },\n      xform: xforms.rising\n    },\n    {\n      src: { value: button(\"rightBumper\").pressed },\n      dest: { value: paths.actions.snapRotateRight },\n      xform: xforms.rising\n    },\n    {\n      src: {},\n      dest: { value: vec2Zero },\n      xform: xforms.vec2Zero\n    },\n    {\n      src: { value: vec2Zero },\n      dest: { value: paths.actions.cursor.right.pose },\n      xform: xforms.poseFromCameraProjection()\n    },\n    {\n      src: { value: button(\"y\").pressed },\n      dest: { value: paths.actions.spawnPen },\n      xform: xforms.rising,\n      priority: 100\n    },\n    {\n      src: { value: button(\"dpadUp\").pressed },\n      dest: { value: paths.actions.ensureFrozen },\n      xform: xforms.copy\n    },\n    {\n      src: { value: button(\"dpadUp\").pressed },\n      dest: { value: paths.actions.thaw },\n      xform: xforms.falling\n    },\n    {\n      src: { value: button(\"start\").pressed },\n      dest: { value: paths.actions.toggleFreeze },\n      xform: xforms.rising\n    },\n    {\n      src: { value: button(\"a\").pressed },\n      dest: { value: paths.actions.startGazeTeleport },\n      xform: xforms.rising\n    },\n    {\n      src: { value: button(\"a\").pressed },\n      dest: { value: paths.actions.stopGazeTeleport },\n      xform: xforms.falling\n    }\n  ],\n  [sets.rightCursorHoldingNothing]: [...characterAccelerationBindings()],\n  [sets.rightCursorHoldingInteractable]: [\n    ...characterAccelerationBindings(true),\n    {\n      src: { value: button(\"rightTrigger\").pressed },\n      dest: { value: paths.actions.cursor.right.drop },\n      xform: xforms.falling,\n      priority: 100\n    },\n    {\n      src: { value: deadzonedLeftJoystickVertical },\n      dest: { value: scaledLeftJoystickCursorDelta },\n      xform: xforms.scale(0.25)\n    },\n    {\n      src: {\n        bool: button(\"leftTrigger\").pressed,\n        value: scaledLeftJoystickCursorDelta\n      },\n      dest: { value: paths.actions.cursor.right.modDelta },\n      xform: xforms.copyIfTrue\n    }\n  ],\n  [sets.rightCursorHoveringOnUI]: [\n    {\n      src: { value: button(\"rightTrigger\").pressed },\n      dest: { value: paths.actions.cursor.right.grab },\n      xform: xforms.rising\n    }\n  ],\n  [sets.rightCursorHoveringOnInteractable]: [\n    ...characterAccelerationBindings(),\n    {\n      src: { value: button(\"rightTrigger\").pressed },\n      dest: { value: paths.actions.cursor.right.grab },\n      xform: xforms.rising,\n      priority: 100\n    }\n  ]\n});\n","import { paths } from \"../paths\";\nimport { sets } from \"../sets\";\nimport { xforms } from \"./xforms\";\nimport { addSetsToBindings } from \"./utils\";\n\n// vars\nconst v = s => `/vars/daydream/${s}`;\nconst touchpad = v(\"touchpad/axis\");\nconst touchpadRising = v(\"touchpad/rising\");\nconst touchpadFalling = v(\"touchpad/falling\");\nconst touchpadPressed = v(\"touchpad/pressed\");\nconst dpadNorth = v(\"dpad/north\");\nconst dpadSouth = v(\"dpad/south\");\nconst dpadEast = v(\"dpad/east\");\nconst dpadWest = v(\"dpad/west\");\nconst dpadCenter = v(\"dpad/center\");\nconst brushSizeDelta = v(\"brushSizeDelta\");\nconst cursorModDelta = v(\"cursorModDelta\");\nconst dpadSouthDrop = v(\"dropSouth\");\nconst dpadCenterDrop = v(\"dropCenter\");\n\nconst grabBinding = [\n  {\n    src: { value: dpadCenter, bool: touchpadRising },\n    dest: { value: paths.actions.cursor.right.grab },\n    xform: xforms.copyIfTrue,\n    priority: 100\n  }\n];\n\nconst dropOnCenterOrSouth = [\n  {\n    src: { value: dpadCenter, bool: touchpadRising },\n    dest: { value: dpadCenterDrop },\n    xform: xforms.copyIfTrue,\n    priority: 100\n  },\n  {\n    src: { value: dpadSouth, bool: touchpadRising },\n    dest: { value: dpadSouthDrop },\n    xform: xforms.copyIfTrue,\n    priority: 100\n  },\n  {\n    src: [dpadCenterDrop, dpadSouthDrop],\n    dest: { value: paths.actions.cursor.right.drop },\n    xform: xforms.any\n  }\n];\n\nexport const daydreamUserBindings = addSetsToBindings({\n  [sets.global]: [\n    {\n      src: { value: paths.device.daydream.matrix },\n      dest: { value: paths.actions.rightHand.matrix },\n      xform: xforms.copy\n    },\n    {\n      src: {\n        x: paths.device.daydream.axis(\"touchpadX\"),\n        y: paths.device.daydream.axis(\"touchpadY\")\n      },\n      dest: { value: touchpad },\n      xform: xforms.compose_vec2\n    },\n    {\n      src: {\n        value: paths.device.daydream.button(\"touchpad\").pressed\n      },\n      dest: { value: touchpadRising },\n      xform: xforms.rising\n    },\n    {\n      src: {\n        value: paths.device.daydream.button(\"touchpad\").pressed\n      },\n      dest: { value: touchpadFalling },\n      xform: xforms.falling\n    },\n    {\n      src: {\n        value: paths.device.daydream.button(\"touchpad\").pressed\n      },\n      dest: { value: touchpadPressed },\n      xform: xforms.copy\n    },\n    {\n      src: {\n        value: touchpad\n      },\n      dest: {\n        north: dpadNorth,\n        south: dpadSouth,\n        east: dpadEast,\n        west: dpadWest,\n        center: dpadCenter\n      },\n      xform: xforms.vec2dpad(0.5)\n    },\n    {\n      src: {\n        value: dpadEast,\n        bool: touchpadRising\n      },\n      dest: {\n        value: paths.actions.snapRotateRight\n      },\n      xform: xforms.copyIfTrue\n    },\n    {\n      src: {\n        value: dpadWest,\n        bool: touchpadRising\n      },\n      dest: {\n        value: paths.actions.snapRotateLeft\n      },\n      xform: xforms.copyIfTrue\n    },\n    {\n      src: {\n        value: dpadCenter,\n        bool: touchpadRising\n      },\n      dest: { value: paths.actions.rightHand.startTeleport },\n      xform: xforms.copyIfTrue\n    },\n    {\n      src: { value: paths.device.daydream.pose },\n      dest: { value: paths.actions.cursor.right.pose },\n      xform: xforms.copy\n    },\n    {\n      src: { value: paths.device.daydream.pose },\n      dest: { value: paths.actions.rightHand.pose },\n      xform: xforms.copy\n    }\n  ],\n\n  [sets.rightCursorHoveringOnInteractable]: grabBinding,\n  [sets.rightCursorHoveringOnUI]: grabBinding,\n\n  [sets.rightCursorHoveringOnVideo]: [\n    {\n      src: {\n        value: paths.device.daydream.axis(\"touchpadY\"),\n        touching: paths.device.daydream.button(\"touchpad\").touched\n      },\n      dest: { value: paths.actions.cursor.right.mediaVolumeMod },\n      xform: xforms.touch_axis_scroll(-0.1)\n    }\n  ],\n\n  [sets.rightCursorHoldingInteractable]: [\n    {\n      src: { value: touchpadFalling },\n      dest: { value: paths.actions.cursor.right.drop },\n      xform: xforms.copy\n    },\n    {\n      src: {\n        value: paths.device.daydream.axis(\"touchpadY\"),\n        touching: paths.device.daydream.button(\"touchpad\").touched\n      },\n      dest: { value: cursorModDelta },\n      xform: xforms.touch_axis_scroll()\n    },\n    {\n      src: { value: cursorModDelta },\n      dest: { value: paths.actions.cursor.right.modDelta },\n      xform: xforms.copy\n    }\n  ],\n\n  [sets.rightHandTeleporting]: [\n    {\n      src: { value: touchpadFalling },\n      dest: { value: paths.actions.rightHand.stopTeleport },\n      xform: xforms.copy\n    }\n  ],\n\n  [sets.rightCursorHoldingPen]: [\n    {\n      src: { value: dpadNorth, bool: touchpadRising },\n      dest: { value: paths.actions.cursor.right.startDrawing },\n      xform: xforms.copyIfTrue,\n      priority: 100\n    },\n    {\n      src: { value: touchpadFalling },\n      dest: { value: paths.actions.cursor.right.stopDrawing },\n      xform: xforms.copy,\n      priority: 100\n    },\n    {\n      src: {\n        value: paths.device.daydream.axis(\"touchpadX\"),\n        touching: paths.device.daydream.button(\"touchpad\").touched\n      },\n      dest: { value: brushSizeDelta },\n      xform: xforms.touch_axis_scroll(-0.1)\n    },\n    {\n      src: {\n        value: brushSizeDelta,\n        bool: touchpadPressed\n      },\n      dest: { value: paths.actions.cursor.right.scalePenTip },\n      xform: xforms.copyIfFalse,\n      priority: 100\n    },\n    {\n      src: { value: dpadEast, bool: touchpadRising },\n      dest: {\n        value: paths.actions.cursor.right.penPrevColor\n      },\n      xform: xforms.copyIfTrue,\n      priority: 100\n    },\n    {\n      src: { value: dpadWest, bool: touchpadRising },\n      dest: {\n        value: paths.actions.cursor.right.penNextColor\n      },\n      xform: xforms.copyIfTrue,\n      priority: 100\n    },\n    {\n      src: {\n        value: cursorModDelta,\n        bool: touchpadPressed\n      },\n      dest: { value: paths.actions.cursor.right.modDelta },\n      xform: xforms.copyIfFalse,\n      priority: 100\n    },\n    ...dropOnCenterOrSouth\n  ],\n\n  [sets.rightCursorHoldingCamera]: [\n    // Don't drop on touchpad release\n    {\n      src: {\n        value: touchpadFalling\n      },\n      xform: xforms.noop,\n      priority: 100\n    },\n    {\n      src: {\n        value: dpadNorth,\n        bool: touchpadRising\n      },\n      dest: { value: paths.actions.cursor.right.takeSnapshot },\n      xform: xforms.copy,\n      priority: 100\n    },\n    ...dropOnCenterOrSouth\n  ]\n});\n","import { paths } from \"../paths\";\nimport { sets } from \"../sets\";\nimport { xforms } from \"./xforms\";\nimport { addSetsToBindings } from \"./utils\";\n\nexport const cardboardUserBindings = addSetsToBindings({\n  [sets.global]: [\n    {\n      src: { value: paths.device.touchscreen.isTouching },\n      dest: {\n        value: paths.actions.startGazeTeleport\n      },\n      xform: xforms.rising\n    },\n    {\n      src: { value: paths.device.touchscreen.isTouching },\n      dest: {\n        value: paths.actions.stopGazeTeleport\n      },\n      xform: xforms.falling\n    }\n  ]\n});\n","import { paths } from \"../paths\";\nimport { sets } from \"../sets\";\nimport { xforms } from \"./xforms\";\nimport { addSetsToBindings } from \"./utils\";\n\nexport default function generate3DOFTriggerBindings(device) {\n  const touchpad = device.v(\"touchpad\");\n  const touchpadButton = device.button(\"touchpad\");\n  const triggerButton = device.button(\"trigger\");\n  const touchpadX = device.axis(\"touchpadX\");\n  const touchpadXForPen = device.axis(\"touchpadXForPen\");\n  const touchpadY = device.axis(\"touchpadY\");\n  const touchpadYForPen = device.axis(\"touchpadYForPen\");\n  const touchpadRising = device.v(\"touchpad/rising\");\n  const touchpadFalling = device.v(\"touchpad/falling\");\n  const triggerRising = device.v(\"trigger/rising\");\n  const triggerFalling = device.v(\"trigger/falling\");\n  const dpadNorth = device.v(\"dpad/north\");\n  const dpadSouth = device.v(\"dpad/south\");\n  const dpadEast = device.v(\"dpad/east\");\n  const dpadWest = device.v(\"dpad/west\");\n  const dpadCenter = device.v(\"dpad/center\");\n  const dpadCenterStrip = device.v(\"dpad/centerStrip\");\n  const dpadBottomCenterStrip = device.v(\"dpad/bottomCenterStrip\");\n  const togglePen = \"/vars/oculus-go/togglePen\";\n\n  const grabBinding = {\n    src: {\n      value: triggerRising\n    },\n    dest: { value: paths.actions.cursor.right.grab },\n    xform: xforms.copy,\n    priority: 200\n  };\n  const dropBinding = {\n    src: {\n      value: triggerFalling\n    },\n    dest: { value: paths.actions.cursor.right.drop },\n    xform: xforms.copy,\n    priority: 200\n  };\n\n  return addSetsToBindings({\n    [sets.global]: [\n      {\n        src: { value: device.matrix },\n        dest: { value: paths.actions.rightHand.matrix },\n        xform: xforms.copy\n      },\n      {\n        src: {\n          value: triggerButton.pressed\n        },\n        dest: { value: triggerRising },\n        xform: xforms.rising\n      },\n      {\n        src: {\n          value: triggerButton.pressed\n        },\n        dest: { value: triggerFalling },\n        xform: xforms.falling\n      },\n      {\n        src: {\n          value: touchpadButton.pressed\n        },\n        dest: { value: touchpadRising },\n        xform: xforms.rising,\n        priority: 100\n      },\n      {\n        src: {\n          value: touchpadButton.pressed\n        },\n        dest: { value: touchpadFalling },\n        xform: xforms.falling,\n        priority: 100\n      },\n      {\n        src: {\n          x: touchpadX,\n          y: touchpadY\n        },\n        dest: { value: touchpad },\n        xform: xforms.compose_vec2\n      },\n      {\n        src: { value: touchpadX },\n        dest: { value: touchpadXForPen },\n        xform: xforms.copy\n      },\n      {\n        src: { value: touchpadY },\n        dest: { value: touchpadYForPen },\n        xform: xforms.copy\n      },\n      {\n        src: {\n          value: touchpad\n        },\n        dest: {\n          north: dpadNorth,\n          south: dpadSouth,\n          east: dpadEast,\n          west: dpadWest,\n          center: dpadCenter\n        },\n        xform: xforms.vec2dpad(0.3)\n      },\n      {\n        src: [dpadCenter, dpadSouth],\n        dest: { value: dpadBottomCenterStrip },\n        xform: xforms.any\n      },\n      {\n        src: [dpadNorth, dpadBottomCenterStrip],\n        dest: { value: dpadCenterStrip },\n        xform: xforms.any\n      },\n      {\n        src: {\n          value: dpadCenterStrip,\n          bool: touchpadButton.pressed\n        },\n        dest: {\n          value: paths.actions.ensureFrozen\n        },\n        priority: 100,\n        xform: xforms.copyIfTrue\n      },\n      {\n        src: { value: touchpadFalling },\n        dest: {\n          value: paths.actions.thaw\n        },\n        xform: xforms.copy\n      },\n      {\n        src: {\n          value: dpadEast,\n          bool: touchpadRising\n        },\n        dest: {\n          value: paths.actions.snapRotateRight\n        },\n        xform: xforms.copyIfTrue,\n        priority: 100\n      },\n      {\n        src: {\n          value: dpadWest,\n          bool: touchpadRising\n        },\n        dest: {\n          value: paths.actions.snapRotateLeft\n        },\n        xform: xforms.copyIfTrue,\n        priority: 100\n      },\n      {\n        src: {\n          value: triggerRising\n        },\n        dest: { value: paths.actions.rightHand.startTeleport },\n        xform: xforms.copy,\n        priority: 100\n      },\n      {\n        src: { value: device.pose },\n        dest: { value: paths.actions.cursor.right.pose },\n        xform: xforms.copy\n      },\n      {\n        src: { value: device.pose },\n        dest: { value: paths.actions.rightHand.pose },\n        xform: xforms.copy\n      },\n      {\n        src: { value: touchpadButton.touched },\n        dest: { value: paths.actions.rightHand.thumb },\n        xform: xforms.copy\n      },\n      {\n        src: { value: triggerButton.pressed },\n        dest: { value: paths.actions.rightHand.index },\n        xform: xforms.copy\n      },\n      {\n        src: { value: triggerButton.pressed },\n        dest: { value: paths.actions.rightHand.middleRingPinky },\n        xform: xforms.copy\n      }\n    ],\n\n    [sets.rightCursorHoveringOnInteractable]: [grabBinding],\n    [sets.rightCursorHoveringOnUI]: [grabBinding],\n    [sets.rightCursorHoldingUI]: [dropBinding],\n    [sets.rightCursorHoveringOnVideo]: [\n      {\n        src: {\n          value: touchpadY,\n          touching: touchpadButton.touched\n        },\n        dest: { value: paths.actions.cursor.right.mediaVolumeMod },\n        xform: xforms.touch_axis_scroll(-0.1)\n      }\n    ],\n\n    [sets.rightCursorHoldingInteractable]: [\n      {\n        src: {\n          value: triggerFalling\n        },\n        dest: { value: paths.actions.cursor.right.drop },\n        xform: xforms.copy,\n        priority: 200\n      },\n      {\n        src: {\n          value: touchpadY,\n          touching: touchpadButton.touched\n        },\n        dest: { value: paths.actions.cursor.right.modDelta },\n        xform: xforms.touch_axis_scroll()\n      },\n      {\n        src: { value: dpadCenterStrip },\n        priority: 200,\n        xform: xforms.noop\n      }\n    ],\n\n    [sets.rightHandTeleporting]: [\n      {\n        src: {\n          value: triggerFalling\n        },\n        dest: { value: paths.actions.rightHand.stopTeleport },\n        xform: xforms.copy,\n        priority: 100\n      }\n    ],\n\n    [sets.rightCursorHoldingPen]: [\n      {\n        src: {\n          value: triggerRising\n        },\n        dest: { value: paths.actions.cursor.right.startDrawing },\n        xform: xforms.copy,\n        priority: 300\n      },\n      {\n        src: {\n          value: triggerFalling\n        },\n        dest: { value: paths.actions.cursor.right.stopDrawing },\n        xform: xforms.copy,\n        priority: 300\n      },\n      {\n        src: {\n          value: touchpadXForPen,\n          touching: touchpadButton.touched\n        },\n        dest: { value: paths.actions.cursor.right.scalePenTip },\n        xform: xforms.touch_axis_scroll(0.1, 0.1),\n        priority: 200\n      },\n      {\n        src: {\n          value: touchpadYForPen,\n          touching: touchpadButton.touched\n        },\n        dest: { value: paths.actions.cursor.right.modDelta },\n        xform: xforms.touch_axis_scroll(1, 0.1),\n        priority: 200\n      },\n      {\n        src: {\n          value: dpadBottomCenterStrip,\n          bool: touchpadFalling\n        },\n        dest: { value: togglePen },\n        xform: xforms.copyIfTrue,\n        priority: 300\n      },\n      {\n        src: { value: togglePen },\n        dest: { value: paths.actions.cursor.right.drop },\n        xform: xforms.rising,\n        priority: 200\n      },\n      {\n        src: { value: togglePen },\n        dest: { value: paths.actions.pen.remove },\n        xform: xforms.rising,\n        priority: 200\n      },\n      {\n        src: {\n          value: dpadEast,\n          bool: touchpadRising\n        },\n        dest: {\n          value: paths.actions.cursor.right.penPrevColor\n        },\n        xform: xforms.copyIfTrue,\n        priority: 200\n      },\n      {\n        src: {\n          value: dpadWest,\n          bool: touchpadRising\n        },\n        dest: {\n          value: paths.actions.cursor.right.penNextColor\n        },\n        xform: xforms.copyIfTrue,\n        priority: 200\n      },\n      {\n        src: {\n          value: dpadNorth,\n          bool: touchpadRising\n        },\n        dest: {\n          value: paths.actions.cursor.right.undoDrawing\n        },\n        xform: xforms.copyIfTrue,\n        priority: 200\n      }\n    ],\n\n    [sets.rightCursorHoldingCamera]: [\n      {\n        src: {\n          value: triggerRising\n        },\n        dest: { value: paths.actions.cursor.right.takeSnapshot },\n        xform: xforms.copy,\n        priority: 300\n      }\n    ]\n  });\n}\n","import { sets } from \"./sets\";\nimport { isUI } from \"./../interactions\";\nimport { CAMERA_MODE_INSPECT } from \"../camera-system\";\nimport qsTruthy from \"../../utils/qs_truthy\";\nconst debugUserInput = qsTruthy(\"dui\");\n\nlet leftTeleporter, rightTeleporter;\n\nexport function resolveActionSets() {\n  leftTeleporter =\n    leftTeleporter ||\n    (document.getElementById(\"player-left-controller\") &&\n      document.getElementById(\"player-left-controller\").components.teleporter);\n  rightTeleporter =\n    rightTeleporter ||\n    (document.getElementById(\"player-right-controller\") &&\n      document.getElementById(\"player-right-controller\").components.teleporter);\n  if (!leftTeleporter || !rightTeleporter) return;\n  const userinput = AFRAME.scenes[0].systems.userinput;\n  const { leftHand, rightHand, rightRemote, leftRemote } = AFRAME.scenes[0].systems.interaction.state;\n\n  userinput.toggleSet(sets.leftHandHoldingInteractable, leftHand.held);\n  userinput.toggleSet(sets.rightHandHoldingInteractable, rightHand.held);\n  userinput.toggleSet(sets.leftCursorHoldingInteractable, leftRemote.held);\n  userinput.toggleSet(sets.rightCursorHoldingInteractable, rightRemote.held);\n\n  userinput.toggleSet(\n    sets.leftHandHoveringOnNothing,\n    !leftRemote.held && !leftRemote.hovered && !leftHand.held && !leftHand.hovered\n  );\n  userinput.toggleSet(\n    sets.rightHandHoveringOnNothing,\n    !rightRemote.held && !rightRemote.hovered && !rightHand.held && !rightHand.hovered\n  );\n  userinput.toggleSet(\n    sets.leftCursorHoveringOnNothing,\n    !leftHand.held && !leftHand.hovered && !leftRemote.held && !leftRemote.hovered\n  );\n  userinput.toggleSet(\n    sets.rightCursorHoveringOnNothing,\n    !rightHand.held && !rightHand.hovered && !rightRemote.held && !rightRemote.hovered\n  );\n\n  userinput.toggleSet(\n    sets.leftHandHoveringOnPen,\n    !leftHand.held &&\n      leftHand.hovered &&\n      leftHand.hovered.components.tags &&\n      leftHand.hovered.components.tags.data.isPen\n  );\n  userinput.toggleSet(\n    sets.rightHandHoveringOnPen,\n    !rightHand.held &&\n      rightHand.hovered &&\n      rightHand.hovered.components.tags &&\n      rightHand.hovered.components.tags.data.isPen\n  );\n  userinput.toggleSet(\n    sets.leftCursorHoveringOnPen,\n    !leftHand.held &&\n      !leftHand.hovered &&\n      !leftRemote.held &&\n      leftRemote.hovered &&\n      leftRemote.hovered.components.tags &&\n      leftRemote.hovered.components.tags.data.isPen\n  );\n  userinput.toggleSet(\n    sets.rightCursorHoveringOnPen,\n    !rightHand.held &&\n      !rightHand.hovered &&\n      !rightRemote.held &&\n      rightRemote.hovered &&\n      rightRemote.hovered.components.tags &&\n      rightRemote.hovered.components.tags.data.isPen\n  );\n\n  userinput.toggleSet(\n    sets.leftHandHoveringOnCamera,\n    !leftHand.held && leftHand.hovered && leftHand.hovered.components[\"camera-tool\"]\n  );\n  userinput.toggleSet(\n    sets.rightHandHoveringOnCamera,\n    !rightHand.held && rightHand.hovered && rightHand.hovered.components[\"camera-tool\"]\n  );\n  userinput.toggleSet(\n    sets.leftCursorHoveringOnCamera,\n    !leftHand.held &&\n      !leftHand.hovered &&\n      !leftRemote.held &&\n      leftRemote.hovered &&\n      leftRemote.hovered.components[\"camera-tool\"]\n  );\n  userinput.toggleSet(\n    sets.rightCursorHoveringOnCamera,\n    !rightHand.held &&\n      !rightHand.hovered &&\n      !rightRemote.held &&\n      rightRemote.hovered &&\n      rightRemote.hovered.components[\"camera-tool\"]\n  );\n\n  userinput.toggleSet(\n    sets.leftHandHoveringOnInteractable,\n    !leftHand.held &&\n      leftHand.hovered &&\n      ((leftHand.hovered.components.tags && leftHand.hovered.components.tags.data.offersHandConstraint) ||\n        leftHand.hovered.components[\"super-spawner\"])\n  );\n  userinput.toggleSet(\n    sets.rightHandHoveringOnInteractable,\n    !rightHand.held &&\n      rightHand.hovered &&\n      ((rightHand.hovered.components.tags && rightHand.hovered.components.tags.data.offersHandConstraint) ||\n        rightHand.hovered.components[\"super-spawner\"])\n  );\n  userinput.toggleSet(\n    sets.leftCursorHoveringOnInteractable,\n    !leftHand.held &&\n      !leftHand.hovered &&\n      !leftRemote.held &&\n      leftRemote.hovered &&\n      ((leftRemote.hovered.components.tags && leftRemote.hovered.components.tags.data.offersRemoteConstraint) ||\n        (leftRemote.hovered.components.tags && leftRemote.hovered.components.tags.data.togglesHoveredActionSet) ||\n        leftRemote.hovered.components[\"super-spawner\"])\n  );\n  userinput.toggleSet(\n    sets.rightCursorHoveringOnInteractable,\n    !rightHand.held &&\n      !rightHand.hovered &&\n      !rightRemote.held &&\n      rightRemote.hovered &&\n      ((rightRemote.hovered.components.tags && rightRemote.hovered.components.tags.data.offersRemoteConstraint) ||\n        (rightRemote.hovered.components.tags && rightRemote.hovered.components.tags.data.togglesHoveredActionSet) ||\n        rightRemote.hovered.components[\"super-spawner\"])\n  );\n\n  userinput.toggleSet(\n    sets.leftHandHoveringOnVideo,\n    !leftHand.held && leftHand.hovered && leftHand.hovered.components[\"media-video\"]\n  );\n  userinput.toggleSet(\n    sets.rightHandHoveringOnVideo,\n    !rightHand.held && rightHand.hovered && rightHand.hovered.components[\"media-video\"]\n  );\n  userinput.toggleSet(\n    sets.leftCursorHoveringOnVideo,\n    !leftHand.held &&\n      !leftHand.hovered &&\n      !leftRemote.held &&\n      leftRemote.hovered &&\n      leftRemote.hovered.components[\"media-video\"]\n  );\n  userinput.toggleSet(\n    sets.rightCursorHoveringOnVideo,\n    !rightHand.held &&\n      !rightHand.hovered &&\n      !rightRemote.held &&\n      rightRemote.hovered &&\n      rightRemote.hovered.components[\"media-video\"]\n  );\n\n  userinput.toggleSet(\n    sets.leftHandHoldingPen,\n    leftHand.held && leftHand.held.components.tags && leftHand.held.components.tags.data.isPen\n  );\n  userinput.toggleSet(\n    sets.rightHandHoldingPen,\n    rightHand.held && rightHand.held.components.tags && rightHand.held.components.tags.data.isPen\n  );\n  userinput.toggleSet(\n    sets.rightCursorHoldingPen,\n    !rightHand.held &&\n      !rightHand.hovered &&\n      rightRemote.held &&\n      rightRemote.held.components.tags &&\n      rightRemote.held.components.tags.data.isPen\n  );\n  userinput.toggleSet(\n    sets.leftCursorHoldingPen,\n    !leftHand.held &&\n      !leftHand.hovered &&\n      leftRemote.held &&\n      leftRemote.held.components.tags &&\n      leftRemote.held.components.tags.data.isPen\n  );\n  userinput.toggleSet(sets.leftHandHoldingCamera, leftHand.held && leftHand.held.components[\"camera-tool\"]);\n  userinput.toggleSet(sets.rightHandHoldingCamera, rightHand.held && rightHand.held.components[\"camera-tool\"]);\n  userinput.toggleSet(\n    sets.leftCursorHoldingCamera,\n    !leftHand.held && !leftHand.hovered && leftRemote.held && leftRemote.held.components[\"camera-tool\"]\n  );\n  userinput.toggleSet(\n    sets.rightCursorHoldingCamera,\n    !rightHand.held && !rightHand.hovered && rightRemote.held && rightRemote.held.components[\"camera-tool\"]\n  );\n\n  userinput.toggleSet(\n    sets.leftCursorHoveringOnUI,\n    !leftHand.held && !leftHand.hovered && !leftRemote.held && isUI(leftRemote.hovered)\n  );\n  userinput.toggleSet(\n    sets.rightCursorHoveringOnUI,\n    !rightHand.held && !rightHand.hovered && !rightRemote.held && isUI(rightRemote.hovered)\n  );\n\n  userinput.toggleSet(sets.leftCursorHoldingNothing, !leftHand.held && !leftRemote.held);\n  userinput.toggleSet(sets.rightCursorHoldingNothing, !rightHand.held && !rightRemote.held);\n\n  userinput.toggleSet(\n    sets.leftCursorHoldingUI,\n    !leftHand.held &&\n      !leftHand.hovered &&\n      leftRemote.held &&\n      leftRemote.held.components.tags &&\n      leftRemote.held.components.tags.data.holdableButton\n  );\n  userinput.toggleSet(\n    sets.rightCursorHoldingUI,\n    !rightHand.held &&\n      !rightHand.hovered &&\n      rightRemote.held &&\n      rightRemote.held.components.tags &&\n      rightRemote.held.components.tags.data.holdableButton\n  );\n\n  userinput.toggleSet(sets.leftHandTeleporting, leftTeleporter.isTeleporting);\n  userinput.toggleSet(sets.rightHandTeleporting, rightTeleporter.isTeleporting);\n\n  userinput.toggleSet(\n    sets.inputFocused,\n    document.activeElement.nodeName === \"INPUT\" ||\n      document.activeElement.nodeName === \"TEXTAREA\" ||\n      document.activeElement.contentEditable === \"true\"\n  );\n\n  userinput.toggleSet(sets.debugUserInput, debugUserInput);\n\n  if (AFRAME.scenes[0] && AFRAME.scenes[0].systems[\"hubs-systems\"]) {\n    userinput.toggleSet(\n      sets.inspecting,\n      AFRAME.scenes[0].systems[\"hubs-systems\"].cameraSystem.mode === CAMERA_MODE_INSPECT\n    );\n  }\n}\n","import { paths } from \"../paths\";\n\nexport class GamepadDevice {\n  constructor(gamepad) {\n    this.gamepad = gamepad;\n  }\n\n  write(frame) {\n    if (this.gamepad.connected) {\n      this.gamepad.buttons.forEach((button, i) => {\n        const buttonPath = paths.device.gamepad(this.gamepad.index).button(i);\n        frame.setValueType(buttonPath.pressed, !!button.pressed);\n        frame.setValueType(buttonPath.touched, !!button.touched);\n        frame.setValueType(buttonPath.value, button.value);\n      });\n      this.gamepad.axes.forEach((axis, i) => {\n        frame.setValueType(paths.device.gamepad(this.gamepad.index).axis(i), axis);\n      });\n    }\n  }\n}\n","export const gamepadBindings = {};\n","import { sets } from \"./sets\";\nimport { paths } from \"./paths\";\n\nimport { MouseDevice } from \"./devices/mouse\";\nimport { KeyboardDevice } from \"./devices/keyboard\";\nimport { HudDevice } from \"./devices/hud\";\nimport { XboxControllerDevice } from \"./devices/xbox-controller\";\nimport { OculusGoControllerDevice } from \"./devices/oculus-go-controller\";\nimport { GearVRControllerDevice } from \"./devices/gear-vr-controller\";\nimport { OculusTouchControllerDevice } from \"./devices/oculus-touch-controller\";\nimport { DaydreamControllerDevice } from \"./devices/daydream-controller\";\nimport { ViveControllerDevice } from \"./devices/vive-controller\";\nimport { WindowsMixedRealityControllerDevice } from \"./devices/windows-mixed-reality-controller\";\nimport { GyroDevice } from \"./devices/gyro\";\n\nimport { AppAwareMouseDevice } from \"./devices/app-aware-mouse\";\nimport { AppAwareTouchscreenDevice } from \"./devices/app-aware-touchscreen\";\n\nimport { keyboardMouseUserBindings } from \"./bindings/keyboard-mouse-user\";\nimport { touchscreenUserBindings } from \"./bindings/touchscreen-user\";\nimport { keyboardDebuggingBindings } from \"./bindings/keyboard-debugging\";\nimport { oculusTouchUserBindings } from \"./bindings/oculus-touch-user\";\nimport {\n  viveUserBindings,\n  viveWandUserBindings,\n  indexUserBindings,\n  viveFocusPlusUserBindings,\n  viveCosmosUserBindings\n} from \"./bindings/vive-user\";\nimport { wmrUserBindings } from \"./bindings/windows-mixed-reality-user\";\nimport { xboxControllerUserBindings } from \"./bindings/xbox-controller-user\";\nimport { daydreamUserBindings } from \"./bindings/daydream-user\";\nimport { cardboardUserBindings } from \"./bindings/cardboard-user\";\n\nimport generate3DOFTriggerBindings from \"./bindings/oculus-go-user\";\nconst oculusGoUserBindings = generate3DOFTriggerBindings(paths.device.oculusgo);\nconst gearVRControllerUserBindings = generate3DOFTriggerBindings(paths.device.gearVRController);\n\nimport { resolveActionSets } from \"./resolve-action-sets\";\nimport { GamepadDevice } from \"./devices/gamepad\";\nimport { gamepadBindings } from \"./bindings/generic-gamepad\";\nimport { getAvailableVREntryTypes, VR_DEVICE_AVAILABILITY } from \"../../utils/vr-caps-detect\";\nimport { hackyMobileSafariTest } from \"../../utils/detect-touchscreen\";\nimport { ArrayBackedSet } from \"./array-backed-set\";\n\nfunction arrayContentsDiffer(a, b) {\n  if (a.length !== b.length) return true;\n\n  for (let i = 0, il = a.length; i < il; i++) {\n    const elem = a[i];\n    let found = false;\n\n    for (let j = 0, jl = b.length; j < jl; j++) {\n      if (elem === b[j]) {\n        found = true;\n        break;\n      }\n    }\n\n    if (!found) return true;\n  }\n\n  return false;\n}\n\nconst satisfiesPath = (binding, path) => {\n  for (const key in binding.dest) {\n    if (binding.dest[key].indexOf(path) !== -1) {\n      return true;\n    }\n  }\n  return false;\n};\n\nconst satisfyPath = (bindings, path) => {\n  for (const binding of bindings) {\n    if (satisfiesPath(binding, path)) {\n      return true;\n    }\n  }\n  return false;\n};\n\nconst satisfiedBy = (binding, bindings) => {\n  for (const path of Object.values(binding.src)) {\n    if (path.startsWith(\"/device/\")) continue;\n    if (!satisfyPath(bindings, path)) return false;\n  }\n  return true;\n};\n\nfunction dependencySort(mappings) {\n  const unsorted = [];\n  for (const mapping of mappings) {\n    for (const setName in mapping) {\n      for (const binding of mapping[setName]) {\n        unsorted.push(binding);\n      }\n    }\n  }\n\n  const sorted = [];\n  while (unsorted.length > 0) {\n    const binding = unsorted.shift();\n    if (satisfiedBy(binding, sorted)) {\n      sorted.push(binding);\n    } else {\n      unsorted.push(binding);\n    }\n  }\n\n  return sorted;\n}\n\nfunction notEmpty(s) {\n  return s !== \"\";\n}\n\nfunction isSubpath(subpath, path) {\n  const a = subpath.split(\"/\").filter(notEmpty);\n  const b = path.split(\"/\").filter(notEmpty);\n  if (a.length > b.length) return false;\n  for (let i = 0; i < a.length; i++) {\n    if (a[i] !== b[i]) return false;\n  }\n  return true;\n}\n\nfunction canMask(masker, masked) {\n  if (masker.priority === undefined) {\n    masker.priority = 0;\n  }\n  if (masked.priority === undefined) {\n    masked.priority = 0;\n  }\n  if (masked.priority >= masker.priority) return false;\n  for (const maskerKey in masker.src) {\n    const maskerPath = masker.src[maskerKey];\n    for (const maskedKey in masked.src) {\n      const maskedPath = masked.src[maskedKey];\n      if (maskedPath.indexOf(maskerPath) !== -1 && isSubpath(maskerPath, maskedPath)) {\n        return true;\n      }\n    }\n  }\n  return false;\n}\n\nfunction computeMasks(bindings) {\n  const masks = new Array(bindings.length);\n  for (let row = 0; row < bindings.length; row++) {\n    const masksRow = (masks[row] = []);\n    const bindingsRow = bindings[row];\n    for (let col = 0; col < bindings.length; col++) {\n      if (canMask(bindings[col], bindingsRow)) {\n        masksRow.push(col);\n      }\n    }\n  }\n  return masks;\n}\n\nfunction isActive(binding, sets) {\n  for (let i = 0; i < binding.sets.length; i++) {\n    if (sets.includes(binding.sets[i])) {\n      return true;\n    }\n  }\n  return false;\n}\n\nfunction computeExecutionStrategy(sortedBindings, masks, activeSets) {\n  const actives = new Array(sortedBindings.length);\n  for (let row = 0; row < sortedBindings.length; row++) {\n    actives[row] = isActive(sortedBindings[row], activeSets);\n  }\n\n  const masked = new Array(sortedBindings.length);\n  for (let row = 0; row < sortedBindings.length; row++) {\n    const maskedRow = (masked[row] = []);\n    const masksRow = masks[row];\n    for (let col = 0; col < sortedBindings.length; col++) {\n      if (actives[col] && masksRow.indexOf(col) !== -1) {\n        maskedRow.push(col);\n      }\n    }\n  }\n\n  return { actives, masked };\n}\n\nAFRAME.registerSystem(\"userinput\", {\n  get(path) {\n    if (!this.frame) return;\n    return this.frame.get(path);\n  },\n\n  toggleSet(set, value) {\n    this.pendingSetChanges.push(set);\n    this.pendingSetChanges.push(!!value);\n  },\n\n  init() {\n    this.frame = {\n      generation: 0,\n      values: {},\n      generations: {},\n      get: function(path) {\n        if (this.generations[path] !== this.generation) return undefined;\n        return this.values[path];\n      },\n      setValueType: function(path, value) {\n        this.values[path] = value;\n        this.generations[path] = this.generation;\n      },\n      setVector2: function(path, a, b) {\n        const value = this.values[path] || [];\n        value[0] = a;\n        value[1] = b;\n        this.values[path] = value;\n        this.generations[path] = this.generation;\n      },\n      setPose: function(path, pose) {\n        this.setValueType(path, pose);\n      },\n      setMatrix4: function(path, mat4) {\n        // Should we assume the incoming mat4 is safe to store instead of copying values?\n        const value = this.values[path] || new THREE.Matrix4();\n        value.copy(mat4);\n        this.values[path] = value;\n        this.generations[path] = this.generation;\n      }\n    };\n\n    this.prevActiveSets = [];\n    this.activeSets = [sets.global];\n    this.pendingSetChanges = [];\n    this.xformStates = new Map();\n    this.activeDevices = new ArrayBackedSet([new HudDevice()]);\n\n    const isMobile = AFRAME.utils.device.isMobile();\n    const isMobileVR = AFRAME.utils.device.isMobileVR();\n    const forceEnableTouchscreen = hackyMobileSafariTest();\n\n    if (!(isMobile || isMobileVR || forceEnableTouchscreen)) {\n      this.activeDevices.add(new MouseDevice());\n      this.activeDevices.add(new AppAwareMouseDevice());\n      this.activeDevices.add(new KeyboardDevice());\n    } else if (!isMobileVR || forceEnableTouchscreen) {\n      this.activeDevices.add(new AppAwareTouchscreenDevice());\n      this.activeDevices.add(new KeyboardDevice());\n      this.activeDevices.add(new GyroDevice());\n    }\n\n    this.isMobile = isMobile;\n    this.isMobileVR = isMobileVR;\n\n    this.registeredMappings = new Set([keyboardDebuggingBindings]);\n    this.registeredMappingsChanged = true;\n\n    const vrGamepadMappings = new Map();\n    vrGamepadMappings.set(WindowsMixedRealityControllerDevice, wmrUserBindings);\n    vrGamepadMappings.set(ViveControllerDevice, viveUserBindings);\n    vrGamepadMappings.set(OculusTouchControllerDevice, oculusTouchUserBindings);\n    vrGamepadMappings.set(OculusGoControllerDevice, oculusGoUserBindings);\n    vrGamepadMappings.set(GearVRControllerDevice, gearVRControllerUserBindings);\n    vrGamepadMappings.set(DaydreamControllerDevice, daydreamUserBindings);\n\n    const nonVRGamepadMappings = new Map();\n    nonVRGamepadMappings.set(XboxControllerDevice, xboxControllerUserBindings);\n    nonVRGamepadMappings.set(GamepadDevice, gamepadBindings);\n\n    const addExtraMappings = activeDevice => {\n      if (activeDevice instanceof ViveControllerDevice && activeDevice.gamepad) {\n        if (activeDevice.gamepad.id === \"OpenVR Cosmos\") {\n          //HTC Vive Cosmos Controller\n          this.registeredMappings.add(viveCosmosUserBindings);\n        } else if (activeDevice.gamepad.id === \"HTC Vive Focus Plus Controller\") {\n          //HTC Vive Focus Plus Controller\n          this.registeredMappings.add(viveFocusPlusUserBindings);\n        } else if (activeDevice.gamepad.axes.length === 4) {\n          //Valve Index Controller\n          this.registeredMappings.add(indexUserBindings);\n        } else {\n          //HTC Vive Controller (wands)\n          this.registeredMappings.add(viveWandUserBindings);\n        }\n      }\n    };\n\n    const deleteExtraMappings = activeDevice => {\n      if (activeDevice instanceof ViveControllerDevice && activeDevice.gamepad) {\n        this.registeredMappings.delete(viveCosmosUserBindings);\n        this.registeredMappings.delete(viveFocusPlusUserBindings);\n        this.registeredMappings.delete(indexUserBindings);\n        this.registeredMappings.delete(viveWandUserBindings);\n      }\n    };\n\n    const updateBindingsForVRMode = () => {\n      const inVRMode = this.el.sceneEl.is(\"vr-mode\");\n      const isMobile = AFRAME.utils.device.isMobile();\n      const forceEnableTouchscreen = hackyMobileSafariTest();\n\n      if (inVRMode) {\n        console.log(\"Using VR bindings.\");\n        this.registeredMappings.delete(\n          isMobile || forceEnableTouchscreen ? touchscreenUserBindings : keyboardMouseUserBindings\n        );\n        // add mappings for all active VR input devices\n        for (let i = 0; i < this.activeDevices.items.length; i++) {\n          const activeDevice = this.activeDevices.items[i];\n          const mapping = vrGamepadMappings.get(activeDevice.constructor);\n          mapping && this.registeredMappings.add(mapping);\n          addExtraMappings(activeDevice);\n        }\n\n        // Handle cardboard by looking of VR device caps\n        if (isMobile) {\n          getAvailableVREntryTypes().then(availableVREntryTypes => {\n            if (availableVREntryTypes.cardboard === VR_DEVICE_AVAILABILITY.yes) {\n              this.registeredMappings.add(cardboardUserBindings);\n              this.registeredMappingsChanged = true;\n            }\n          });\n        }\n      } else {\n        console.log(\"Using Non-VR bindings.\");\n        // remove mappings for all active VR input devices\n        for (let i = 0; i < this.activeDevices.items.length; i++) {\n          const activeDevice = this.activeDevices.items[i];\n          deleteExtraMappings(activeDevice);\n          this.registeredMappings.delete(vrGamepadMappings.get(activeDevice.constructor));\n        }\n        this.registeredMappings.add(\n          isMobile || forceEnableTouchscreen ? touchscreenUserBindings : keyboardMouseUserBindings\n        );\n      }\n\n      for (let i = 0; i < this.activeDevices.items.length; i++) {\n        const activeDevice = this.activeDevices.items[i];\n        const mapping = nonVRGamepadMappings.get(activeDevice.constructor);\n        mapping && this.registeredMappings.add(mapping);\n      }\n\n      this.registeredMappingsChanged = true;\n    };\n\n    const gamepadConnected = e => {\n      let gamepadDevice;\n      for (let i = 0; i < this.activeDevices.items.length; i++) {\n        const activeDevice = this.activeDevices.items[i];\n        if (activeDevice.gamepad && activeDevice.gamepad.index === e.gamepad.index) {\n          console.warn(\"connected already fired for gamepad\", e.gamepad);\n          return; // multiple connect events without a disconnect event\n        }\n      }\n      // HACK Firefox Nightly bug causes corrupt gamepad names for OpenVR, so do startsWith\n      if (\n        e.gamepad.id.startsWith(\"OpenVR Gamepad\") ||\n        e.gamepad.id === \"HTC Vive Focus Plus Controller\" ||\n        e.gamepad.id === \"OpenVR Cosmos\"\n      ) {\n        gamepadDevice = new ViveControllerDevice(e.gamepad);\n      } else if (e.gamepad.id.startsWith(\"Oculus Touch\") || e.gamepad.id.startsWith(\"Pico Neo 2\")) {\n        gamepadDevice = new OculusTouchControllerDevice(e.gamepad);\n      } else if (e.gamepad.id.startsWith(\"Spatial Controller\")) {\n        gamepadDevice = new WindowsMixedRealityControllerDevice(e.gamepad);\n      } else if (e.gamepad.id === \"Oculus Go Controller\" || e.gamepad.id === \"Pico G2 Controller\") {\n        gamepadDevice = new OculusGoControllerDevice(e.gamepad);\n      } else if (e.gamepad.id === \"Gear VR Controller\" || e.gamepad.id === \"HTC Vive Focus Controller\") {\n        gamepadDevice = new GearVRControllerDevice(e.gamepad);\n      } else if (e.gamepad.id === \"Daydream Controller\") {\n        gamepadDevice = new DaydreamControllerDevice(e.gamepad);\n      } else if (e.gamepad.mapping === \"standard\") {\n        // Our XboxController device and bindings should be generic enough for most gamepads.\n        gamepadDevice = new XboxControllerDevice(e.gamepad);\n      } else {\n        // This device doesn't actually have any bindings, but we need to fallback to something.\n        gamepadDevice = new GamepadDevice(e.gamepad);\n      }\n\n      this.activeDevices.add(gamepadDevice);\n\n      updateBindingsForVRMode();\n    };\n\n    const gamepadDisconnected = e => {\n      for (let i = 0; i < this.activeDevices.items.length; i++) {\n        const device = this.activeDevices.items[i];\n        if (device.gamepad && device.gamepad.index === e.gamepad.index) {\n          this.registeredMappings.delete(\n            vrGamepadMappings.get(device.constructor) || nonVRGamepadMappings.get(device.constructor)\n          );\n          this.activeDevices.delete(device);\n          return;\n        }\n      }\n\n      updateBindingsForVRMode();\n    };\n\n    window.addEventListener(\"gamepadconnected\", gamepadConnected, false);\n    window.addEventListener(\"gamepaddisconnected\", gamepadDisconnected, false);\n    for (const gamepad of navigator.getGamepads()) {\n      gamepad && gamepadConnected({ gamepad });\n    }\n\n    this.el.sceneEl.addEventListener(\"enter-vr\", updateBindingsForVRMode);\n    this.el.sceneEl.addEventListener(\"exit-vr\", updateBindingsForVRMode);\n\n    updateBindingsForVRMode();\n  },\n\n  maybeToggleXboxMapping() {\n    if (hackyMobileSafariTest() || this.isMobile || this.isMobileVR) return;\n\n    const vrAxesSum =\n      (this.get(paths.device.vive.left.axesSum) || 0) +\n      (this.get(paths.device.vive.right.axesSum) || 0) +\n      (this.get(paths.device.leftOculusTouch.axesSum) || 0) +\n      (this.get(paths.device.rightOculusTouch.axesSum) || 0);\n    const mouseMovement = this.get(paths.device.mouse.movementXY);\n    const nonXboxActivity = (mouseMovement && (mouseMovement[0] || mouseMovement[1])) > 2 || vrAxesSum > 0.5;\n\n    const hasXboxMapping = this.registeredMappings.has(xboxControllerUserBindings);\n\n    if (nonXboxActivity && hasXboxMapping) {\n      this.registeredMappings.delete(xboxControllerUserBindings);\n      this.registeredMappingsChanged = true;\n    } else if (this.get(paths.device.xbox.axesSum) > 0.5 && !hasXboxMapping) {\n      this.registeredMappings.add(xboxControllerUserBindings);\n      this.registeredMappingsChanged = true;\n    }\n  },\n\n  tick2() {\n    this.frame.generation += 1;\n    const registeredMappingsChanged = this.registeredMappingsChanged;\n    if (registeredMappingsChanged) {\n      this.registeredMappingsChanged = false;\n      this.prevSortedBindings = this.sortedBindings;\n      this.sortedBindings = dependencySort(this.registeredMappings);\n      if (!this.prevSortedBindings) {\n        this.prevSortedBindings = this.sortedBindings;\n      }\n      this.masks = computeMasks(this.sortedBindings);\n    }\n\n    this.prevActiveSets.length = 0;\n    for (let i = 0; i < this.activeSets.length; i++) {\n      const item = this.activeSets[i];\n      this.prevActiveSets.push(item);\n    }\n    resolveActionSets();\n    for (let i = 0, l = this.pendingSetChanges.length; i < l; i += 2) {\n      const set = this.pendingSetChanges[i];\n      const value = this.pendingSetChanges[i + 1];\n\n      if (value) {\n        if (!this.activeSets.includes(set)) {\n          this.activeSets.push(set);\n        }\n      } else {\n        const idx = this.activeSets.indexOf(set);\n\n        if (idx > -1) {\n          this.activeSets.splice(idx, 1);\n        }\n      }\n    }\n    const activeSetsChanged = arrayContentsDiffer(this.prevActiveSets, this.activeSets);\n    this.pendingSetChanges.length = 0;\n    if (registeredMappingsChanged || activeSetsChanged || (!this.actives && !this.masked)) {\n      this.prevActives = this.actives;\n      this.prevMasked = this.masked;\n      const { actives, masked } = computeExecutionStrategy(this.sortedBindings, this.masks, this.activeSets);\n      this.actives = actives;\n      this.masked = masked;\n    }\n\n    for (let i = 0; i < this.activeDevices.items.length; i++) {\n      this.activeDevices.items[i].write(this.frame);\n    }\n\n    for (let i = 0; i < this.sortedBindings.length; i++) {\n      if (!this.actives[i] || this.masked[i].length > 0) continue;\n\n      const binding = this.sortedBindings[i];\n\n      let bindingExistedLastFrame = true;\n      if (!registeredMappingsChanged && activeSetsChanged && this.prevSortedBindings) {\n        const j = this.prevSortedBindings.indexOf(binding);\n        bindingExistedLastFrame = j > -1 && this.prevActives[j] && this.prevMasked[j].length === 0;\n      }\n      if (!bindingExistedLastFrame) {\n        this.xformStates.delete(binding);\n      }\n\n      const { src, dest, xform, debug } = binding;\n\n      let oldValue;\n\n      if (debug) {\n        oldValue = this.frame.get(dest.value);\n      }\n\n      const newState = xform(this.frame, src, dest, this.xformStates.get(binding));\n\n      if (debug) {\n        // Note for now this only works with bindings that have { value: } sources and dests\n        console.log(\n          `${JSON.stringify(src.value)} (${src.value && JSON.stringify(this.frame.get(src.value))}) to ${JSON.stringify(\n            dest\n          )}: ${oldValue} -> ${this.frame.get(dest.value)}`\n        );\n      }\n\n      if (newState !== undefined) {\n        this.xformStates.set(binding, newState);\n      }\n    }\n\n    this.prevSortedBindings = this.sortedBindings;\n\n    this.maybeToggleXboxMapping();\n  }\n});\n","import { paths } from \"./paths\";\nimport qsTruthy from \"../../utils/qs_truthy\";\n\nconst PATHS_TO_SHOW = [\"/actions/\", \"/device/\", \"/var/\"];\nconst DELIMITER = \"-----------------------------------\";\n\nconst replacer = (k, v) => {\n  if (typeof v === \"number\") {\n    return `${v >= 0 ? \"+\" : \"\"}${v.toFixed(3)}`;\n  }\n  return v;\n};\nfunction describeCurrentMasks(userinput) {\n  const strings = [];\n  userinput.masked.forEach((maskers, i) => {\n    let val;\n    if (!userinput.actives[i]) return;\n    if (maskers.length) {\n      val = JSON.stringify(userinput.sortedBindings[i], replacer);\n      strings.push(DELIMITER);\n      strings.push(`Binding #${i}:`);\n      if (val) val = val.replace(/{\"(\\w{3,})\":/g, '{\\n  \"$1\":').replace(/,\"(\\w{3,})\":/g, ',\\n  \"$1\":');\n      strings.push(`${val}\\n`);\n    }\n    maskers.forEach(masker => {\n      val = JSON.stringify(userinput.sortedBindings[masker], replacer);\n      if (val) val = val.replace(/{\"(\\w{3,})\":/g, '{\\n  \"$1\":').replace(/,\"(\\w{3,})\":/g, ',\\n  \"$1\":');\n      strings.push(`- Masked by #${masker}:\\n${val}`);\n    });\n    if (maskers.length) {\n      strings.push(`\\n`);\n    }\n  });\n  return strings.join(\"\\n\");\n}\n\nAFRAME.registerSystem(\"userinput-debug\", {\n  active: true,\n\n  tick() {\n    if (!this.active) return;\n\n    const userinput = AFRAME.scenes[0].systems.userinput;\n\n    if (this.userinputFrameStatus) {\n      const pathsOutput = [];\n      const { frame } = userinput;\n      for (const key in frame.values) {\n        if (!frame.get(key)) continue;\n        if (!PATHS_TO_SHOW.some(x => key.startsWith(x))) continue;\n        let val = JSON.stringify(frame.get(key), replacer);\n        if (val) val = val.replace(/{\"(\\w{3,})\":/g, '{\\n  \"$1\":').replace(/,\"(\\w{3,})\":/g, ',\\n  \"$1\":');\n        pathsOutput.push(`${key} -> ${val}`);\n      }\n      this.userinputFrameStatus.textContent = pathsOutput.join(\"\\n\");\n    }\n\n    if (userinput.get(paths.actions.debugUserInput.describeCurrentMasks)) {\n      console.log(describeCurrentMasks(userinput));\n    }\n\n    if (userinput.get(paths.actions.logDebugFrame)) {\n      if (qsTruthy(\"userinput_debug\") && !this.userinputFrameStatus) {\n        this.userinputFrameStatus = document.createElement(\"div\");\n        this.userinputFrameStatus.id = \"userinput-frame-status\";\n        this.userinputFrameStatus.style = `\n          position: absolute;\n          z-index: 2;\n          left: 0; bottom: 0;\n          background: white;\n          white-space: pre;\n          font-family: monospace;\n          font-size: 8pt;\n        `;\n        document.body.append(this.userinputFrameStatus);\n      }\n\n      console.log(userinput);\n      console.log(\"sorted\", userinput.sortedBindings);\n      console.log(\"actives\", userinput.actives);\n      console.log(\"masks\", userinput.masks);\n      console.log(\"masked\", userinput.masked);\n      console.log(\"devices\", userinput.activeDevices);\n      console.log(\"activeSets\", userinput.activeSets);\n      console.log(\"frame\", userinput.frame);\n      console.log(\"xformStates\", userinput.xformStates);\n      const { sortedBindings, actives, masked } = userinput;\n      for (const i in sortedBindings) {\n        const strings = [];\n        if (masked[i].length > 0) {\n          for (const j of masked[i]) {\n            strings.push(JSON.stringify(sortedBindings[j]));\n          }\n        }\n\n        if (this.logBindings) {\n          console.log(\n            \"binding: \",\n            i,\n            \"\\n\",\n            sortedBindings[i],\n            \"\\n\",\n            \"dest: \",\n            sortedBindings[i].dest && Object.values(sortedBindings[i].dest),\n            \"\\n\",\n            \"active: \",\n            actives[i],\n            \"\\n\",\n            \"maskedBy: \",\n            masked[i],\n            \"\\n\",\n            strings.join(\"\\n\"),\n            \"\\n\"\n          );\n        }\n      }\n    }\n  }\n});\n","import { paths } from \"./userinput/paths\";\nimport { SOURCES } from \"../storage/media-search-store\";\n\nconst MEDIA_SEARCH_PATHS = [\n  paths.actions.mediaSearch1,\n  paths.actions.mediaSearch2,\n  paths.actions.mediaSearch3,\n  paths.actions.mediaSearch4,\n  paths.actions.mediaSearch5,\n  paths.actions.mediaSearch6,\n  paths.actions.mediaSearch7,\n  paths.actions.mediaSearch8\n];\n\n// Every frame, looks for input paths that trigger UI-relevant events and handles them.\nAFRAME.registerSystem(\"ui-hotkeys\", {\n  init() {\n    this.mediaSearchStore = window.APP.mediaSearchStore;\n  },\n\n  tick: function() {\n    if (!this.userinput) {\n      this.userinput = this.el.systems.userinput;\n    }\n\n    if (this.userinput.get(paths.actions.focusChat)) {\n      this.focusChat();\n    }\n\n    if (this.userinput.get(paths.actions.focusChatCommand)) {\n      this.focusChat(\"/\");\n    }\n\n    if (this.userinput.get(paths.actions.mediaExit)) {\n      if (\n        window.APP.history.location.state &&\n        window.APP.history.location.state.value !== \"avatar-editor\" &&\n        window.APP.history.location.state.value !== \"link\"\n      ) {\n        this.mediaSearchStore.pushExitMediaBrowserHistory();\n      }\n\n      this.el.emit(\"action_exit_watch\");\n    }\n\n    for (let i = 0; i < MEDIA_SEARCH_PATHS.length; i++) {\n      if (this.userinput.get(MEDIA_SEARCH_PATHS[i]) && window.APP.hubChannel.can(\"spawn_and_move_media\")) {\n        this.mediaSearchStore.sourceNavigate(SOURCES[i]);\n      }\n    }\n\n    if (this.userinput.get(paths.actions.toggleCamera)) {\n      this.el.emit(\"action_toggle_camera\");\n    }\n\n    if (this.userinput.get(paths.actions.toggleUI)) {\n      if (this.el.sceneEl.is(\"entered\")) {\n        this.el.emit(\"action_toggle_ui\");\n      }\n    }\n  },\n\n  focusChat: function(prefix) {\n    const target = document.querySelector(\".chat-focus-target\");\n    if (!target) return;\n\n    target.focus();\n\n    if (prefix) {\n      target.value = prefix;\n    }\n  }\n});\n","import { waitForDOMContentLoaded } from \"../utils/async-utils\";\n\nconst noop = function() {};\nAFRAME.registerComponent(\"overwrite-raycast-as-noop\", {\n  init() {\n    this.el.object3D.raycast = noop;\n    this.mesh = this.el.getObject3D(\"mesh\");\n    if (this.mesh) {\n      this.mesh.raycast = noop;\n    } else {\n      this.el.addEventListener(\"model-loaded\", () => {\n        this.mesh = this.el.getObject3D(\"mesh\");\n        if (this.mesh) {\n          this.mesh.raycast = noop;\n        }\n      });\n    }\n  }\n});\n\nexport class CursorTargettingSystem {\n  constructor() {\n    this.targets = [];\n    this.setDirty = this.setDirty.bind(this);\n    this.dirty = true;\n\n    // TODO: Use the MutationRecords passed into the callback function to determine added/removed nodes!\n    this.observer = new MutationObserver(this.setDirty);\n\n    waitForDOMContentLoaded().then(() => {\n      const scene = document.querySelector(\"a-scene\");\n      this.rightRemote = document.getElementById(\"right-cursor-controller\");\n      this.leftRemote = document.getElementById(\"left-cursor-controller\");\n      this.observer.observe(scene, { childList: true, attributes: true, subtree: true });\n      scene.addEventListener(\"object3dset\", this.setDirty);\n      scene.addEventListener(\"object3dremove\", this.setDirty);\n    });\n  }\n\n  setDirty() {\n    this.dirty = true;\n  }\n\n  tick(t) {\n    if (this.dirty) {\n      this.populateEntities(this.targets);\n      this.dirty = false;\n    }\n\n    if (this.rightRemote) {\n      this.rightRemote.components[\"cursor-controller\"].tick2(t);\n    }\n\n    if (this.leftRemote) {\n      this.leftRemote.components[\"cursor-controller\"].tick2(t, true);\n    }\n  }\n\n  populateEntities(targets) {\n    targets.length = 0;\n    // TODO: Do not querySelectorAll on the entire scene every time anything changes!\n    const els = AFRAME.scenes[0].querySelectorAll(\n      \".collidable, .interactable, .ui, .drawing, .occupiable-waypoint-icon, .teleport-waypoint-icon\"\n    );\n    for (let i = 0; i < els.length; i++) {\n      if (els[i].object3D) {\n        targets.push(els[i].object3D);\n      }\n    }\n  }\n\n  remove() {\n    this.observer.disconnect();\n    AFRAME.scenes[0].removeEventListener(\"object3dset\", this.setDirty);\n    AFRAME.scenes[0].removeEventListener(\"object3dremove\", this.setDirty);\n  }\n}\n","import { paths } from \"./userinput/paths\";\nimport { waitForDOMContentLoaded } from \"../utils/async-utils\";\nimport { isTagged } from \"../components/tags\";\nimport { hackyMobileSafariTest } from \"../utils/detect-touchscreen\";\n\nfunction shouldEnableRemote(scene, hand, remote, teleporting, woke) {\n  const vrRemotePenIntersection =\n    scene.is(\"vr-mode\") && isTagged(remote.held, \"isPen\") && remote.held.children[0].components.pen.intersection;\n  return scene.is(\"entered\") && !hand.hovered && !hand.held && !teleporting && !vrRemotePenIntersection && woke;\n}\n\nexport class CursorTogglingSystem {\n  constructor() {\n    this.wakeLeft = false;\n    this.wakeRight = false;\n\n    waitForDOMContentLoaded().then(() => {\n      this.domContentLoadedButComponentsMayNotHave = true;\n    });\n  }\n\n  tick(interaction, userinput, scene) {\n    if (!this.domContentLoadedButComponentsMayNotHave) return;\n    if (!this.gotComponentReferences) {\n      this.gotComponentReferences = true;\n      this.rightCursorController = document.getElementById(\"right-cursor-controller\").components[\"cursor-controller\"];\n      this.leftCursorController = document.getElementById(\"left-cursor-controller\").components[\"cursor-controller\"];\n      this.rightHandTeleporter = document.getElementById(\"player-right-controller\").components[\"teleporter\"];\n      this.leftHandTeleporter = document.getElementById(\"player-left-controller\").components[\"teleporter\"];\n      this.gazeTeleporter = document.getElementById(\"gaze-teleport\").components[\"teleporter\"];\n    }\n\n    const rightRemote = interaction.state.rightRemote;\n    const leftRemote = interaction.state.leftRemote;\n    const leftHand = interaction.state.leftHand;\n    const rightHand = interaction.state.rightHand;\n\n    if (userinput.get(paths.actions.cursor.right.wake)) {\n      this.wakeRight = true;\n      if (!leftRemote.held) {\n        this.wakeLeft = false;\n      }\n    }\n\n    if (userinput.get(paths.actions.cursor.left.wake)) {\n      this.wakeLeft = true;\n      if (!rightRemote.held) {\n        this.wakeRight = false;\n      }\n    }\n\n    const inspectingInVR = interaction.el.systems[\"hubs-systems\"].cameraSystem.inspected; // && this.el.sceneEl.is(\"vr-mode\");\n    const shouldEnableLeftRemote =\n      !inspectingInVR &&\n      shouldEnableRemote(\n        scene,\n        leftHand,\n        leftRemote,\n        this.leftHandTeleporter.isTeleporting || this.gazeTeleporter.isTeleporting,\n        this.wakeLeft\n      );\n    const isMobile = AFRAME.utils.device.isMobile();\n    const shouldEnableRightRemote =\n      isMobile ||\n      hackyMobileSafariTest() ||\n      (!inspectingInVR &&\n        shouldEnableRemote(\n          scene,\n          rightHand,\n          rightRemote,\n          this.rightHandTeleporter.isTeleporting || this.gazeTeleporter.isTeleporting,\n          this.wakeRight\n        ));\n\n    if (!shouldEnableLeftRemote) {\n      leftRemote.hovered = null;\n    }\n    if (!shouldEnableRightRemote) {\n      rightRemote.hovered = null;\n    }\n    this.leftCursorController.enabled = shouldEnableLeftRemote;\n    this.rightCursorController.enabled = shouldEnableRightRemote;\n  }\n}\n","import { World } from \"three-ammo\";\nimport { TYPE } from \"three-ammo/constants\";\n\nconst WORLD_CONFIG = {\n  debugDrawMode: THREE.AmmoDebugConstants.DrawWireframe,\n  gravity: { x: 0, y: -9.8, z: 0 }\n};\n\nexport class PhysicsSystem {\n  constructor(scene) {\n    const Ammo = require(\"ammo.js/builds/ammo.wasm.js\");\n    const AmmoWasm = require(\"ammo.js/builds/ammo.wasm.wasm\");\n    const AmmoModule = Ammo.bind(undefined, {\n      locateFile(path) {\n        if (path.endsWith(\".wasm\")) {\n          return AmmoWasm;\n        }\n        return path;\n      }\n    });\n\n    this.bodies = [];\n    this.bodyHelpers = [];\n    this.shapeHelpers = [];\n\n    this.debugRequested = false;\n    this.debugEnabled = false;\n    this.scene = scene;\n    this.stepDuration = 0;\n\n    AmmoModule().then(() => {\n      this.world = new World(WORLD_CONFIG);\n\n      for (const bodyHelper of this.bodyHelpers) {\n        if (bodyHelper.alive) bodyHelper.init2();\n      }\n      for (const shapeHelper of this.shapeHelpers) {\n        if (shapeHelper.alive) shapeHelper.init2();\n      }\n      this.shapeHelpers.length = 0;\n      this.bodyHelpers.length = 0;\n    });\n  }\n\n  setDebug(debug) {\n    this.debugRequested = debug;\n  }\n\n  tick(dt) {\n    if (this.world) {\n      if (this.debugRequested !== this.debugEnabled) {\n        this.debugEnabled = this.debugRequested;\n        if (this.debugEnabled) {\n          this.world.getDebugDrawer(this.scene).enable();\n        } else {\n          this.world.getDebugDrawer(this.scene).disable();\n        }\n      }\n\n      for (let i = 0; i < this.bodies.length; i++) {\n        this.bodies[i].updateShapes();\n        if (this.bodies[i].type !== TYPE.DYNAMIC) {\n          this.bodies[i].syncToPhysics();\n        }\n      }\n      const time = performance.now();\n      this.world.step(dt / 1000);\n      this.stepDuration = performance.now() - time;\n      for (let i = 0; i < this.bodies.length; i++) {\n        if (this.bodies[i].type === TYPE.DYNAMIC) {\n          this.bodies[i].syncFromPhysics();\n        }\n      }\n    }\n  }\n\n  addBody(body) {\n    this.bodies.push(body);\n  }\n\n  removeBody(body) {\n    const idx = this.bodies.indexOf(body);\n    if (idx !== -1) {\n      this.bodies.splice(idx, 1);\n    }\n  }\n\n  registerBodyHelper(bodyHelper) {\n    if (this.world) {\n      bodyHelper.init2();\n    } else {\n      this.bodyHelpers.push(bodyHelper);\n    }\n  }\n\n  registerShapeHelper(shapeHelper) {\n    if (this.world) {\n      shapeHelper.init2();\n    } else {\n      this.shapeHelpers.push(shapeHelper);\n    }\n  }\n}\n","/* global NAF AFRAME */\nimport { Constraint } from \"three-ammo\";\nimport { ACTIVATION_STATE } from \"three-ammo/constants.js\";\n\nconst CONSTRAINT_CONFIG = {};\n\nexport class ConstraintsSystem {\n  constructor(physicsSystem) {\n    this.prevLeftHand = {\n      held: null,\n      spawning: false\n    };\n    this.prevRightHand = {\n      held: null,\n      spawning: false\n    };\n    this.prevRightRemote = {\n      held: null,\n      spawning: false\n    };\n    this.prevLeftRemote = {\n      held: null,\n      spawning: false\n    };\n\n    this.physicsSystem = physicsSystem;\n    this.constraints = {};\n    this.constraintPairs = {};\n  }\n\n  tickInteractor(constraintTag, entityId, state, prevState) {\n    if (!this.physicsSystem.world) return;\n\n    if (prevState.held === state.held) {\n      if (\n        !state.spawning &&\n        prevState.spawning &&\n        state.held &&\n        state.held.components.tags &&\n        state.held.components.tags.data[constraintTag]\n      ) {\n        state.held.setAttribute(\"body-helper\", {\n          type: \"dynamic\",\n          activationState: ACTIVATION_STATE.DISABLE_DEACTIVATION\n        });\n        const heldEntityId = state.held.id;\n        const body = state.held.components[\"body-helper\"].body;\n        const targetEl = document.querySelector(`#${entityId}`);\n        const targetBody = targetEl.components[\"body-helper\"].body;\n        if (targetBody && targetBody.physicsBody) {\n          this.constraints[entityId] = new Constraint({}, body, targetBody, this.physicsSystem.world);\n          if (!this.constraintPairs[heldEntityId]) {\n            this.constraintPairs[heldEntityId] = [];\n          }\n          this.constraintPairs[heldEntityId].push(entityId);\n        }\n      }\n      return;\n    }\n    if (prevState.held && prevState.held.components.tags && prevState.held.components.tags.data[constraintTag]) {\n      const heldEntityId = prevState.held.id;\n      if (this.constraintPairs[heldEntityId] && this.constraintPairs[heldEntityId].indexOf(entityId) !== -1) {\n        this.constraintPairs[heldEntityId].splice(this.constraintPairs[heldEntityId].indexOf(entityId), 1);\n        if (this.constraintPairs[heldEntityId].length === 0) {\n          delete this.constraintPairs[heldEntityId];\n        }\n        this.constraints[entityId].destroy();\n        delete this.constraints[entityId];\n      }\n\n      if (!this.constraintPairs[heldEntityId] || this.constraintPairs[heldEntityId].length < 1) {\n        prevState.held.setAttribute(\"body-helper\", { activationState: ACTIVATION_STATE.ACTIVE_TAG });\n      }\n    }\n    if (!state.spawning && state.held && state.held.components.tags.data[constraintTag]) {\n      if (!state.held.components[\"networked\"] || NAF.utils.isMine(state.held) || NAF.utils.takeOwnership(state.held)) {\n        state.held.setAttribute(\"body-helper\", {\n          type: \"dynamic\",\n          activationState: ACTIVATION_STATE.DISABLE_DEACTIVATION\n        });\n        const heldEntityId = state.held.id;\n        const body = state.held.components[\"body-helper\"].body;\n        const targetEl = document.querySelector(`#${entityId}`);\n        const targetBody = targetEl.components[\"body-helper\"].body;\n        if (targetBody && targetBody.physicsBody) {\n          this.constraints[entityId] = new Constraint(CONSTRAINT_CONFIG, body, targetBody, this.physicsSystem.world);\n          if (!this.constraintPairs[heldEntityId]) {\n            this.constraintPairs[heldEntityId] = [];\n          }\n          this.constraintPairs[heldEntityId].push(entityId);\n        }\n      } else {\n        console.log(\"Failed to obtain ownership while trying to create constraint on networked object.\");\n      }\n    }\n  }\n\n  tick() {\n    const interaction = AFRAME.scenes[0].systems.interaction;\n    if (!interaction.ready) return; //DOMContentReady workaround\n\n    this.tickInteractor(\n      \"offersHandConstraint\",\n      interaction.options.leftHand.entity.id,\n      interaction.state.leftHand,\n      this.prevLeftHand\n    );\n    this.tickInteractor(\n      \"offersHandConstraint\",\n      interaction.options.rightHand.entity.id,\n      interaction.state.rightHand,\n      this.prevRightHand\n    );\n    this.tickInteractor(\n      \"offersRemoteConstraint\",\n      interaction.options.rightRemote.entity.id,\n      interaction.state.rightRemote,\n      this.prevRightRemote\n    );\n    this.tickInteractor(\n      \"offersRemoteConstraint\",\n      interaction.options.leftRemote.entity.id,\n      interaction.state.leftRemote,\n      this.prevLeftRemote\n    );\n\n    Object.assign(this.prevLeftHand, interaction.state.leftHand);\n    Object.assign(this.prevRightHand, interaction.state.rightHand);\n    Object.assign(this.prevRightRemote, interaction.state.rightRemote);\n    Object.assign(this.prevLeftRemote, interaction.state.leftRemote);\n  }\n\n  // for held objects deleted during the component tick\n  release(el) {\n    if (this.prevLeftHand.held === el) {\n      this.prevLeftHand.held = null;\n      this.prevLeftHand.spawning = false;\n    }\n    if (this.prevLeftHand.held === el) {\n      this.prevLeftHand.held = null;\n      this.prevLeftHand.spawning = false;\n    }\n    if (this.prevRightRemote.held === el) {\n      this.prevRightRemote.held = null;\n      this.prevRightRemote.spawning = false;\n    }\n    if (this.prevLeftRemote.held === el) {\n      this.prevLeftRemote.held = null;\n      this.prevLeftRemote.spawning = false;\n    }\n  }\n}\n","/* global THREE AFRAME */\nconst COLLISION_LAYERS = require(\"../constants\").COLLISION_LAYERS;\nconst COLLISION_FILTER_MASK_HANDS = { collisionFilterMask: COLLISION_LAYERS.HANDS };\nexport const distanceBetweenStretchers = (() => {\n  const a = new THREE.Vector3();\n  const b = new THREE.Vector3();\n  return function distanceBetweenStretchers(obj1, obj2) {\n    obj1.getWorldPosition(a);\n    obj2.getWorldPosition(b);\n    return a.distanceTo(b);\n  };\n})();\n\nfunction existsAndHeldInEither(object, holderA, holderB) {\n  return object && (object === holderA.held || object === holderB.held);\n}\n\nexport class TwoPointStretchingSystem {\n  constructor() {\n    this.initialScale = new THREE.Vector3();\n  }\n\n  tick() {\n    const interaction = AFRAME.scenes[0].systems.interaction;\n    if (!interaction.ready) return; //DOMContentReady workaround\n    const { leftHand, rightHand, rightRemote, leftRemote } = interaction.state;\n\n    const stretching =\n      existsAndHeldInEither(leftHand.held, rightHand, rightRemote) ||\n      existsAndHeldInEither(leftRemote.held, rightHand, rightRemote);\n    const stretched = leftHand.held || leftRemote.held;\n    let leftStretcher, rightStretcher;\n    if (stretching) {\n      leftStretcher = leftHand.held\n        ? interaction.options.leftHand.entity.object3D\n        : interaction.options.leftRemote.entity.object3D;\n      rightStretcher = rightHand.held\n        ? interaction.options.rightHand.entity.object3D\n        : interaction.options.rightRemote.entity.object3D;\n      if (\n        leftStretcher !== this.previousLeftStretcher ||\n        rightStretcher !== this.previousRightStretcher ||\n        stretched !== this.stretched\n      ) {\n        this.initialStretchDistance = distanceBetweenStretchers(leftStretcher, rightStretcher);\n        this.stretched = stretched;\n        this.initialScale.copy(this.stretched.object3D.scale);\n        if (this.stretched.components[\"ammo-body\"]) {\n          this.stretched.setAttribute(\"ammo-body\", COLLISION_FILTER_MASK_HANDS);\n        }\n      }\n\n      this.stretched.object3D.scale\n        .copy(this.initialScale)\n        .multiplyScalar(distanceBetweenStretchers(leftStretcher, rightStretcher) / this.initialStretchDistance);\n      this.stretched.object3D.matrixNeedsUpdate = true;\n    }\n\n    this.previousLeftStretcher = leftStretcher;\n    this.previousRightStretcher = rightStretcher;\n  }\n}\n","import { CAMERA_MODE_INSPECT } from \"./camera-system\";\n\nexport class SingleActionButtonSystem {\n  tick() {\n    this.didInteractThisFrame = false;\n    const interaction = AFRAME.scenes[0].systems.interaction;\n    const userinput = AFRAME.scenes[0].systems.userinput;\n    if (AFRAME.scenes[0].systems[\"hubs-systems\"].cameraSystem.mode === CAMERA_MODE_INSPECT) {\n      // TODO: Fix issue where button objects are \"visible\" but not on the inspect layer,\n      // which makes it so we can interact with them but cannot see them.\n      return;\n    }\n    const hovered = interaction.state.rightRemote.hovered;\n    if (\n      hovered &&\n      userinput.get(interaction.options.rightRemote.grabPath) &&\n      hovered.components.tags &&\n      hovered.components.tags.data.singleActionButton\n    ) {\n      this.didInteractThisFrame = true;\n      hovered.object3D.dispatchEvent({\n        type: \"interact\",\n        object3D: interaction.options.rightRemote.entity.object3D\n      });\n    }\n    const hovered2 = interaction.state.leftRemote.hovered;\n    if (\n      hovered2 &&\n      userinput.get(interaction.options.leftRemote.grabPath) &&\n      hovered2.components.tags &&\n      hovered2.components.tags.data.singleActionButton\n    ) {\n      this.didInteractThisFrame = true;\n      hovered2.object3D.dispatchEvent({\n        type: \"interact\",\n        object3D: interaction.options.leftRemote.entity.object3D\n      });\n    }\n  }\n}\n\nexport class HoldableButtonSystem {\n  tick() {\n    const interaction = AFRAME.scenes[0].systems.interaction;\n    const held = interaction.state.rightRemote.held;\n\n    if (this.prevHeld && this.prevHeld !== held) {\n      this.prevHeld.object3D.dispatchEvent({\n        type: \"holdable-button-up\",\n        object3D: interaction.options.rightRemote.entity.object3D\n      });\n    }\n    if (held && this.prevHeld !== held) {\n      held.object3D.dispatchEvent({\n        type: \"holdable-button-down\",\n        object3D: interaction.options.rightRemote.entity.object3D\n      });\n    }\n\n    this.prevHeld = held;\n\n    const heldLeft = interaction.state.leftRemote.held;\n\n    if (this.prevHeldLeft && this.prevHeldLeft !== heldLeft) {\n      this.prevHeldLeft.object3D.dispatchEvent({\n        type: \"holdable-button-up\",\n        object3D: interaction.options.leftRemote.entity.object3D\n      });\n    }\n    if (heldLeft && this.prevHeldLeft !== heldLeft) {\n      heldLeft.object3D.dispatchEvent({\n        type: \"holdable-button-down\",\n        object3D: interaction.options.leftRemote.entity.object3D\n      });\n    }\n\n    this.prevHeldLeft = heldLeft;\n  }\n}\n\nconst hasButtonComponent = (function() {\n  const BUTTON_COMPONENT_NAMES = [\n    \"icon-button\",\n    \"text-button\",\n    \"pin-networked-object-button\",\n    \"mic-button\",\n    \"inspect-button\"\n  ];\n  return function hasButtonComponent(components) {\n    for (let i = 0; i < BUTTON_COMPONENT_NAMES.length; i++) {\n      if (components[BUTTON_COMPONENT_NAMES[i]]) {\n        return true;\n      }\n    }\n    return false;\n  };\n})();\n\nfunction getHoverableButton(hovered) {\n  if (!hovered) return null;\n  if (\n    hasButtonComponent(hovered.components) ||\n    hovered.classList.contains(\"teleport-waypoint-icon\") ||\n    hovered.classList.contains(\"occupiable-waypoint-icon\")\n  ) {\n    return hovered;\n  }\n  if (hovered.children) {\n    // TODO: not sure if looping thru children here is desireable, but we did this to accomodate the rounded-button mixins\n    for (let i = 0; i < hovered.children.length; i++) {\n      if (\n        hasButtonComponent(hovered.children[i].components) ||\n        hovered.children[i].classList.contains(\"teleport-waypoint-icon\") ||\n        hovered.children[i].classList.contains(\"occupiable-waypoint-icon\")\n      ) {\n        return hovered.children[i];\n      }\n    }\n  }\n  return null;\n}\n\nfunction dispatch(el, event) {\n  el.object3D.dispatchEvent(event);\n  if (el.children) {\n    for (let i = 0; i < el.children.length; i++) {\n      if (\n        hasButtonComponent(el.children[i].components) ||\n        el.children[i].classList.contains(\"teleport-waypoint-icon\") ||\n        el.children[i].classList.contains(\"occupiable-waypoint-icon\")\n      ) {\n        el.children[i].object3D.dispatchEvent(event);\n      }\n    }\n  }\n}\n\nconst HOVERED = { type: \"hovered\" };\nconst UNHOVERED = { type: \"unhovered\" };\nexport class HoverButtonSystem {\n  tick() {\n    const interaction = AFRAME.scenes[0].systems.interaction;\n    const button = getHoverableButton(interaction.state.rightRemote.hovered);\n    const button2 = getHoverableButton(interaction.state.leftRemote.hovered);\n\n    if (this.prevButton && this.prevButton !== button) {\n      dispatch(this.prevButton, UNHOVERED);\n    }\n\n    if (button && this.prevButton !== button) {\n      dispatch(button, HOVERED);\n    }\n\n    this.prevButton = button;\n\n    // TODO: hover should respect both remotes\n    if (this.prevButtonLeft && this.prevButtonLeft !== button2) {\n      dispatch(this.prevButtonLeft, UNHOVERED);\n    }\n\n    if (button2 && this.prevButtonLeft !== button2) {\n      dispatch(button2, HOVERED);\n    }\n\n    this.prevButtonLeft = button2;\n  }\n}\n","import { waitForDOMContentLoaded } from \"../utils/async-utils\";\nimport { SOUND_PEN_UNDO_DRAW } from \"./sound-effects-system\";\n\n/**\n * Drawing Menu System\n * A system for showing menus for drawings.\n */\n\nfunction almostEquals(epsilon, u, v) {\n  return Math.abs(u.x - v.x) < epsilon && Math.abs(u.y - v.y) < epsilon && Math.abs(u.z - v.z) < epsilon;\n}\n\nexport class DrawingMenuSystem {\n  constructor(sceneEl) {\n    this.sceneEl = sceneEl;\n\n    this.sceneEl.addEventListener(\"stateremoved\", this.hideMenus.bind(this));\n\n    this.lastIntersection = new THREE.Vector3();\n\n    this.drawingMenus = [];\n    this.buttonMap = {};\n\n    waitForDOMContentLoaded().then(() => {\n      this.cursorControllers = document.querySelectorAll(\"[cursor-controller]\");\n      this.camera = this.sceneEl.querySelector(\"#avatar-pov-node\");\n    });\n  }\n\n  tick() {\n    if (!this.cursorControllers || this.cursorControllers.length === 0 || !this.camera) return;\n\n    if (this.sceneEl.is(\"frozen\") && window.APP.hubChannel.can(\"spawn_drawing\")) {\n      const hovered = this.getHovered();\n      if (hovered) {\n        for (let i = 0; i < this.cursorControllers.length; i++) {\n          if (this.cursorControllers[i].components[\"cursor-controller\"].intersection) {\n            const intersectionPoint = this.cursorControllers[i].components[\"cursor-controller\"].intersection.point;\n            this.showMenu(hovered, intersectionPoint);\n          }\n        }\n      }\n      this.handleButtons();\n      this.scaleMenus();\n    }\n  }\n\n  getMenuScale(distance) {\n    if (distance <= 1.5) {\n      return 0.5;\n    }\n    return Math.min(3, distance - 1);\n  }\n\n  scaleMenus = (() => {\n    const cameraWorldPos = new THREE.Vector3();\n    return function() {\n      if (!this.drawingMenus || this.drawingMenus.length === 0) return;\n\n      this.camera.object3D.getWorldPosition(cameraWorldPos);\n\n      for (let i = 0; i < this.drawingMenus.length; i++) {\n        const menu = this.drawingMenus[i];\n        if (menu.object3D.visible && !menu.getAttribute(\"animation__show\")) {\n          const dist = cameraWorldPos.distanceTo(menu.object3D.position);\n          menu.object3D.scale.setScalar(this.getMenuScale(dist));\n          menu.object3D.matrixNeedsUpdate = true;\n        }\n      }\n    };\n  })();\n\n  handleButtons = (() => {\n    const remotes = [\"rightRemote\", \"leftRemote\"];\n    return function() {\n      const interaction = AFRAME.scenes[0].systems.interaction;\n      const userinput = AFRAME.scenes[0].systems.userinput;\n\n      for (let i = 0; i < remotes.length; i++) {\n        const remote = remotes[i];\n        if (interaction.state[remote]) {\n          const hovered = interaction.state[remote].hovered;\n          if (\n            hovered &&\n            userinput.get(interaction.options[remote].grabPath) &&\n            hovered.components.tags &&\n            hovered.components.tags.data.singleActionButton\n          ) {\n            if (this.buttonMap[hovered.object3D.uuid]) {\n              const networkedEntity = this.buttonMap[hovered.object3D.uuid];\n              if (hovered.classList.contains(\"undo-drawing\")) {\n                networkedEntity.components[\"networked-drawing\"].undoDraw();\n                this.sceneEl.systems[\"hubs-systems\"].soundEffectsSystem.playSoundOneShot(SOUND_PEN_UNDO_DRAW);\n              } else if (hovered.classList.contains(\"delete-drawing\")) {\n                NAF.utils.takeOwnership(networkedEntity);\n                this.sceneEl.removeChild(networkedEntity);\n              } else if (hovered.classList.contains(\"serialize-drawing\")) {\n                networkedEntity.components[\"networked-drawing\"].serializeDrawing().then(() => {\n                  const networkedEntity = this.buttonMap[hovered.object3D.uuid];\n                  NAF.utils.takeOwnership(networkedEntity);\n                  this.sceneEl.removeChild(networkedEntity);\n                });\n              }\n            }\n          }\n        }\n      }\n    };\n  })();\n\n  getHovered() {\n    const interaction = AFRAME.scenes[0].systems.interaction;\n    let hovered = null;\n    if (\n      interaction.state.leftRemote &&\n      interaction.state.leftRemote.hovered &&\n      interaction.state.leftRemote.hovered.classList.contains(\"drawing\")\n    ) {\n      hovered = interaction.state.leftRemote.hovered;\n    } else if (\n      interaction.state.rightRemote &&\n      interaction.state.rightRemote.hovered &&\n      interaction.state.rightRemote.hovered.classList.contains(\"drawing\")\n    ) {\n      hovered = interaction.state.rightRemote.hovered;\n    }\n    return hovered;\n  }\n\n  showMenu = (() => {\n    const position = new THREE.Vector3();\n    const cameraWorldPos = new THREE.Vector3();\n    return function(hovered, intersectionPoint) {\n      const menu = hovered.children[0];\n\n      if (!menu.object3D.visible || !almostEquals(0.25, intersectionPoint, this.lastIntersection)) {\n        this.camera.object3D.getWorldPosition(cameraWorldPos);\n        position\n          .subVectors(cameraWorldPos, intersectionPoint)\n          .normalize()\n          .multiplyScalar(0.1);\n        menu.object3D.position.copy(intersectionPoint).add(position);\n        menu.object3D.lookAt(cameraWorldPos);\n        menu.object3D.matrixNeedsUpdate = true;\n        menu.object3D.visible = true;\n        this.lastIntersection.copy(intersectionPoint);\n\n        const isMine = hovered.components.networked.isMine();\n        menu.querySelector(\".undo-drawing\").object3D.visible = isMine;\n        menu.querySelector(\".serialize-drawing\").object3D.visible =\n          isMine && window.APP.hubChannel.can(\"spawn_and_move_media\");\n\n        const dist = cameraWorldPos.distanceTo(menu.object3D.position);\n        const finalScale = this.getMenuScale(dist);\n\n        menu.removeAttribute(\"animation__show\");\n\n        menu.setAttribute(\"animation__show\", {\n          property: \"scale\",\n          dur: 300,\n          from: { x: finalScale * 0.8, y: finalScale * 0.8, z: finalScale * 0.8 },\n          to: { x: finalScale, y: finalScale, z: finalScale },\n          easing: \"easeOutElastic\"\n        });\n\n        menu.addEventListener(\n          \"animationcomplete\",\n          () => {\n            menu.removeAttribute(\"animation__show\");\n          },\n          { once: true }\n        );\n      }\n    };\n  })();\n\n  hideMenus() {\n    if (!this.drawingMenus) return;\n\n    for (let i = 0; i < this.drawingMenus.length; i++) {\n      this.drawingMenus[i].object3D.visible = false;\n    }\n  }\n\n  registerDrawingMenu(networkedDrawingEl) {\n    const menuEl = networkedDrawingEl.querySelector(\".drawing-menu\");\n    this.drawingMenus.push(menuEl);\n    const undoButton = menuEl.querySelector(\".undo-drawing\");\n    this.buttonMap[undoButton.object3D.uuid] = networkedDrawingEl;\n    const deleteButton = menuEl.querySelector(\".delete-drawing\");\n    this.buttonMap[deleteButton.object3D.uuid] = networkedDrawingEl;\n    const serializeButton = menuEl.querySelector(\".serialize-drawing\");\n    this.buttonMap[serializeButton.object3D.uuid] = networkedDrawingEl;\n  }\n\n  unregisterDrawingMenu(networkedDrawingEl) {\n    const menuEl = networkedDrawingEl.querySelector(\".drawing-menu\");\n    const idx = this.drawingMenus.indexOf(menuEl);\n    if (idx !== -1) {\n      this.drawingMenus.splice(idx, 1);\n    }\n    const undoButton = menuEl.querySelector(\".undo-drawing\");\n    delete this.buttonMap[undoButton.object3D.uuid];\n    const deleteButton = menuEl.querySelector(\".delete-drawing\");\n    delete this.buttonMap[deleteButton.object3D.uuid];\n    const serializeButton = menuEl.querySelector(\".serialize-drawing\");\n    delete this.buttonMap[serializeButton.object3D.uuid];\n  }\n}\n","function getSpecificHoverMenu(el) {\n  return (\n    el.components[\"hover-menu\"] ||\n    el.components[\"hover-menu__video\"] ||\n    el.components[\"hover-menu__pager\"] ||\n    el.components[\"hover-menu__hubs-item\"] ||\n    el.components[\"hover-menu__link\"] ||\n    el.components[\"hover-menu__photo\"]\n  );\n}\n\nfunction findHoverMenu(hovered) {\n  if (!hovered) return null;\n  const hoverMenu = getSpecificHoverMenu(hovered);\n  if (hoverMenu) {\n    return hoverMenu;\n  }\n  if (!(hovered.components.tags && hovered.components.tags.data.isHoverMenuChild)) {\n    return null;\n  }\n  let el = hovered.parentNode;\n  while (!getSpecificHoverMenu(el)) {\n    el = el.parentNode;\n  }\n  return getSpecificHoverMenu(el);\n}\n\nexport class HoverMenuSystem {\n  tick() {\n    const interaction = AFRAME.scenes[0].systems.interaction;\n    const hoverMenu = findHoverMenu(interaction.state.rightRemote.hovered);\n\n    if (this.prevHoverMenu && this.prevHoverMenu !== hoverMenu) {\n      this.prevHoverMenu.hovering = false;\n      this.prevHoverMenu.applyHoverState();\n    }\n\n    if (hoverMenu && this.prevHoverMenu !== hoverMenu) {\n      hoverMenu.hovering = true;\n      hoverMenu.applyHoverState();\n    }\n\n    this.prevHoverMenu = hoverMenu;\n\n    //TODO: Menu be visible if either remote is hovering.\n    const hoverMenu2 = findHoverMenu(interaction.state.leftRemote.hovered);\n\n    if (this.prevHoverMenu2 && this.prevHoverMenu2 !== hoverMenu2) {\n      this.prevHoverMenu2.hovering = false;\n      this.prevHoverMenu2.applyHoverState();\n    }\n\n    if (hoverMenu2 && this.prevHoverMenu2 !== hoverMenu2) {\n      hoverMenu2.hovering = true;\n      hoverMenu2.applyHoverState();\n    }\n\n    this.prevHoverMenu2 = hoverMenu2;\n  }\n}\n","import { addMedia } from \"../utils/media-utils\";\nimport { ObjectContentOrigins } from \"../object-types\";\n\n// WARNING: This system mutates interaction system state!\nexport class SuperSpawnerSystem {\n  maybeSpawn(state, entity, grabPath) {\n    const userinput = AFRAME.scenes[0].systems.userinput;\n    const superSpawner = state.hovered && state.hovered.components[\"super-spawner\"];\n    if (\n      superSpawner &&\n      superSpawner.spawnedMediaScale &&\n      !superSpawner.cooldownTimeout &&\n      userinput.get(grabPath) &&\n      window.APP.hubChannel.can(\"spawn_and_move_media\")\n    ) {\n      this.performSpawn(state, entity, grabPath, userinput, superSpawner);\n    }\n  }\n\n  performSpawn(state, entity, grabPath, userinput, superSpawner) {\n    entity.object3D.updateMatrices();\n    entity.object3D.matrix.decompose(entity.object3D.position, entity.object3D.quaternion, entity.object3D.scale);\n    const data = superSpawner.data;\n\n    const spawnedEntity = addMedia(\n      data.src,\n      data.template,\n      ObjectContentOrigins.SPAWNER,\n      null,\n      data.resolve,\n      true,\n      false,\n      data.mediaOptions\n    ).entity;\n\n    superSpawner.el.object3D.getWorldPosition(spawnedEntity.object3D.position);\n    superSpawner.el.object3D.getWorldQuaternion(spawnedEntity.object3D.quaternion);\n    spawnedEntity.object3D.matrixNeedsUpdate = true;\n\n    superSpawner.el.emit(\"spawned-entity-created\", { target: spawnedEntity });\n\n    state.held = spawnedEntity;\n\n    superSpawner.activateCooldown();\n    state.spawning = true;\n\n    spawnedEntity.addEventListener(\n      \"media-loaded\",\n      () => {\n        spawnedEntity.object3D.scale.copy(superSpawner.spawnedMediaScale);\n        spawnedEntity.object3D.matrixNeedsUpdate = true;\n        state.spawning = false;\n        superSpawner.el.emit(\"spawned-entity-loaded\", { target: spawnedEntity });\n      },\n      { once: true }\n    );\n  }\n\n  tick() {\n    const interaction = AFRAME.scenes[0].systems.interaction;\n    if (!interaction.ready) return; //DOMContentReady workaround\n    this.maybeSpawn(\n      interaction.state.leftHand,\n      interaction.options.leftHand.entity,\n      interaction.options.leftHand.grabPath\n    );\n    this.maybeSpawn(\n      interaction.state.rightHand,\n      interaction.options.rightHand.entity,\n      interaction.options.rightHand.grabPath\n    );\n    this.maybeSpawn(\n      interaction.state.rightRemote,\n      interaction.options.rightRemote.entity,\n      interaction.options.rightRemote.grabPath\n    );\n    this.maybeSpawn(\n      interaction.state.leftRemote,\n      interaction.options.leftRemote.entity,\n      interaction.options.leftRemote.grabPath\n    );\n  }\n}\n","import { paths } from \"./userinput/paths\";\nimport { distanceBetweenStretchers } from \"./two-point-stretching-system\";\n\nfunction copyState(previous, current, isTeleporting) {\n  previous.held = current.held;\n  previous.hovered = current.hovered;\n  previous.isTeleporting = isTeleporting;\n}\n\n// TODO: These strengths should be written into bindings, since vibration strength varies across devices.\nconst STRENGTH = {\n  DROP: 0.1,\n  PICKUP: 0.2,\n  BUTTON_PRESSED: 0.2,\n  HOVER: 0.08,\n  STRETCH_BASE: 0.05,\n  STRETCH_DISTANCE: 0.2,\n  TELEPORTING: 0.08,\n  TELEPORTED: 0.2\n};\n\nfunction determineStrength(previous, current, isTeleporting) {\n  if (previous.held && !current.held) {\n    return STRENGTH.DROP;\n  } else if (!previous.held && current.held) {\n    return STRENGTH.PICKUP;\n  } else if (!previous.hovered && current.hovered) {\n    return STRENGTH.HOVER;\n  } else if (isTeleporting) {\n    return STRENGTH.TELEPORTING;\n  } else if (previous.isTeleporting && !isTeleporting) {\n    return STRENGTH.TELEPORTED;\n  } else {\n    return 0;\n  }\n}\n\nfunction determineStretchStrength(stretchSystem) {\n  if (!stretchSystem.stretcherLeft || !stretchSystem.stretcherRight) {\n    return 0;\n  }\n\n  return THREE.Math.clamp(\n    STRENGTH.STRETCH_BASE +\n      STRENGTH.STRETCH_DISTANCE *\n        Math.abs(\n          distanceBetweenStretchers(stretchSystem.stretcherLeft, stretchSystem.stretcherRight) -\n            stretchSystem.initialStretchDistance\n        ),\n    0,\n    0.5\n  );\n}\n\nexport class HapticFeedbackSystem {\n  constructor() {\n    this.state = {\n      rightHand: {\n        held: null,\n        hovered: null,\n        isTeleporting: false\n      },\n      rightRemote: {\n        held: null,\n        hovered: null,\n        isTeleporting: false\n      },\n      leftHand: {\n        held: null,\n        hovered: null,\n        isTeleporting: false\n      },\n      leftRemote: {\n        held: null,\n        hovered: null,\n        isTeleporting: false\n      }\n    };\n  }\n\n  tick(twoPointStretchingSystem, interactLeft, interactRight) {\n    const userinput = AFRAME.scenes[0].systems.userinput;\n    const leftActuator = userinput.get(paths.haptics.actuators.left);\n    const rightActuator = userinput.get(paths.haptics.actuators.right);\n    if (!leftActuator && !rightActuator) {\n      return;\n    }\n\n    const interaction = AFRAME.scenes[0].systems.interaction;\n    const { leftHand, rightHand, rightRemote, leftRemote } = interaction.state;\n    this.leftTeleporter =\n      this.leftTeleporter || document.querySelector(\"#player-left-controller\").components.teleporter;\n    this.rightTeleporter =\n      this.rightTeleporter || document.querySelector(\"#player-right-controller\").components.teleporter;\n\n    const leftHandStrength = determineStrength(this.state.leftHand, leftHand, this.leftTeleporter.isTeleporting);\n    const rightHandStrength = determineStrength(this.state.rightHand, rightHand, this.rightTeleporter.isTeleporting);\n    const rightRemoteStrength = determineStrength(this.state.rightRemote, rightRemote, false);\n    const leftRemoteStrength = determineStrength(this.state.leftRemote, leftRemote, false);\n    const buttonLeftStrength = interactLeft ? STRENGTH.BUTTON_PRESSED : 0;\n    const buttonRightStrength = interactRight ? STRENGTH.BUTTON_PRESSED : 0;\n    const stretchingStrength = determineStretchStrength(twoPointStretchingSystem);\n\n    const leftStrength = Math.max(leftHandStrength, leftRemoteStrength, stretchingStrength, buttonLeftStrength);\n    const rightStrength = Math.max(rightHandStrength, rightRemoteStrength, stretchingStrength, buttonRightStrength);\n\n    if (leftStrength && leftActuator) {\n      leftActuator.pulse(leftStrength, 15);\n    }\n\n    if (rightStrength && rightActuator) {\n      rightActuator.pulse(rightStrength, 15);\n    }\n\n    copyState(this.state.rightHand, rightHand, this.rightTeleporter.isTeleporting);\n    copyState(this.state.leftHand, leftHand, this.leftTeleporter.isTeleporting);\n    copyState(this.state.rightRemote, rightRemote, false);\n    copyState(this.state.leftRemote, leftRemote, false);\n  }\n}\n","import { BatchRawUniformGroup } from \"@mozillareality/three-batch-manager\";\nimport { CAMERA_MODE_INSPECT, CAMERA_LAYER_BATCH_INSPECT } from \"../camera-system\";\n\nconst tempVec3 = new Array(3);\nconst tempVec4 = new Array(4);\n\nexport const INSTANCE_DATA_BYTE_LENGTH = 112;\nconst DEFAULT_COLOR = new THREE.Color(1, 1, 1);\nconst HIDE_MATRIX = new THREE.Matrix4().makeScale(0, 0, 0);\n\nexport function sizeofInstances(instanceCount) {\n  const hubsDataSize =\n    instanceCount * 4 * 4 + // sweepParams\n    4 *\n      (3 + // interactorOnePos\n      1 + // isFrozen\n      3 + // interactorTwoPos\n        1); // time\n  return instanceCount * INSTANCE_DATA_BYTE_LENGTH + hubsDataSize;\n}\n\nconst inspectLayer = new THREE.Layers();\ninspectLayer.set(CAMERA_LAYER_BATCH_INSPECT);\n\nexport default class HubsBatchRawUniformGroup extends BatchRawUniformGroup {\n  constructor(maxInstances, meshToEl) {\n    const data = new ArrayBuffer(sizeofInstances(maxInstances));\n    super(maxInstances, \"InstanceData\", data);\n\n    let offset = this.offset;\n    this.hubs_sweepParams = new Float32Array(this.data, offset, 4 * maxInstances);\n    offset += this.hubs_sweepParams.byteLength;\n\n    this.hubs_interactorOnePos = new Float32Array(this.data, offset, 3);\n    offset += this.hubs_interactorOnePos.byteLength;\n\n    this.hubs_isFrozen = new Uint32Array(this.data, offset, 1);\n    offset += this.hubs_isFrozen.byteLength;\n\n    this.hubs_interactorTwoPos = new Float32Array(this.data, offset, 3);\n    offset += this.hubs_interactorTwoPos.byteLength;\n\n    this.hubs_time = new Float32Array(this.data, offset, 1);\n    offset += this.hubs_time.byteLength;\n\n    this.offset = offset;\n\n    this.meshToEl = meshToEl;\n    const isMobile = AFRAME.utils.device.isMobile();\n    const isMobileVR = AFRAME.utils.device.isMobileVR();\n    this.isTouchscreen = isMobile && !isMobileVR;\n  }\n\n  update(time) {\n    const interaction = AFRAME.scenes[0].systems.interaction;\n    if (!interaction.ready) return; //DOMContentReady workaround\n    const cameraSystem = AFRAME.scenes[0].systems[\"hubs-systems\"].cameraSystem;\n    const inspecting = cameraSystem.mode === CAMERA_MODE_INSPECT && !cameraSystem.enableLights;\n    let interactorOne, interactorTwo;\n\n    for (let instanceId = 0; instanceId < this.meshes.length; instanceId++) {\n      const mesh = this.meshes[instanceId];\n      if (!mesh) continue;\n\n      mesh.updateMatrices();\n\n      // TODO need to account for nested visibility deeper than 1 level\n      const isVisible =\n        mesh.visible &&\n        (mesh.parent && mesh.parent.visible) &&\n        mesh.el.object3D.visible &&\n        (mesh.el.object3D.parent && mesh.el.object3D.parent.visible);\n      this.setInstanceTransform(\n        instanceId,\n        isVisible && (!inspecting || mesh.layers.test(inspectLayer)) ? mesh.matrixWorld : HIDE_MATRIX\n      );\n      this.setInstanceColor(instanceId, mesh.material.color || DEFAULT_COLOR, mesh.material.opacity || 1);\n\n      const el = this.meshToEl.get(mesh);\n      if (el) {\n        const obj = el.object3D;\n        const hoverableVisuals = el.components[\"hoverable-visuals\"];\n        if (hoverableVisuals) {\n          const worldY = obj.matrixWorld.elements[13];\n          const ms1 = obj.matrixWorld.elements[4];\n          const ms2 = obj.matrixWorld.elements[5];\n          const ms3 = obj.matrixWorld.elements[6];\n          const worldScale = Math.sqrt(ms1 * ms1 + ms2 * ms2 + ms3 * ms3);\n          const scaledRadius = worldScale * hoverableVisuals.geometryRadius;\n\n          const isPinned = el.components.pinnable && el.components.pinnable.data.pinned;\n          const isSpawner = !!el.components[\"super-spawner\"];\n          const isFrozen = el.sceneEl.is(\"frozen\");\n          const hideDueToPinning = !isSpawner && isPinned && !isFrozen;\n\n          let highlightInteractorOne, highlightInteractorTwo;\n          if (interaction.state.leftRemote.hovered === el && !interaction.state.leftRemote.held) {\n            interactorOne = interaction.options.leftRemote.entity.object3D;\n            highlightInteractorOne = true;\n          } else if (interaction.state.leftHand.hovered === el && !interaction.state.leftHand.held) {\n            interactorOne = interaction.options.leftHand.entity.object3D;\n            highlightInteractorOne = true;\n          }\n\n          if (interaction.state.rightRemote.hovered === el && !interaction.state.rightRemote.held) {\n            interactorTwo = interaction.options.rightRemote.entity.object3D;\n            highlightInteractorTwo = true;\n          } else if (interaction.state.rightHand.hovered === el && !interaction.state.rightHand.held) {\n            interactorTwo = interaction.options.rightHand.entity.object3D;\n            highlightInteractorTwo = true;\n          }\n\n          tempVec4[0] = worldY - scaledRadius;\n          tempVec4[1] = worldY + scaledRadius;\n          tempVec4[2] = !!highlightInteractorOne && !hideDueToPinning && !this.isTouchscreen;\n          tempVec4[3] = !!highlightInteractorTwo && !hideDueToPinning && !this.isTouchscreen;\n          this.hubs_sweepParams.set(tempVec4, instanceId * 4);\n        }\n      }\n    }\n\n    if (interactorOne) {\n      tempVec3[0] = interactorOne.matrixWorld.elements[12];\n      tempVec3[1] = interactorOne.matrixWorld.elements[13];\n      tempVec3[2] = interactorOne.matrixWorld.elements[14];\n      this.hubs_interactorOnePos.set(tempVec3);\n    }\n\n    if (interactorTwo) {\n      tempVec3[0] = interactorTwo.matrixWorld.elements[12];\n      tempVec3[1] = interactorTwo.matrixWorld.elements[13];\n      tempVec3[2] = interactorTwo.matrixWorld.elements[14];\n      this.hubs_interactorTwoPos.set(tempVec3);\n    }\n\n    this.hubs_time[0] = time;\n    this.hubs_isFrozen[0] = AFRAME.scenes[0].is(\"frozen\") ? 1 : 0;\n  }\n}\n","import { BatchManager } from \"@mozillareality/three-batch-manager\";\n\nimport HubsBatchRawUniformGroup from \"./render-manager/hubs-batch-raw-uniform-group\";\nimport { sizeofInstances } from \"./render-manager/hubs-batch-raw-uniform-group\";\nimport unlitBatchVert from \"./render-manager/unlit-batch.vert\";\nimport unlitBatchFrag from \"./render-manager/unlit-batch.frag\";\nimport qsTruthy from \"../utils/qs_truthy\";\n\nconst MAX_INSTANCES = 500;\nconst UBO_BYTE_LENGTH = sizeofInstances(MAX_INSTANCES);\n\nexport class BatchManagerSystem {\n  constructor(scene, renderer) {\n    this.meshToEl = new WeakMap();\n    const gl = renderer.context;\n\n    if (qsTruthy(\"disableBatching\")) {\n      console.warn(\"Batching disabled by user via disableBatching. Disabling batching.\");\n      return;\n    }\n\n    if (!(window.WebGL2RenderingContext && gl instanceof WebGL2RenderingContext)) {\n      console.warn(\"Batching requires WebGL 2. Disabling batching.\");\n      return;\n    }\n\n    if (UBO_BYTE_LENGTH > gl.getParameter(gl.MAX_UNIFORM_BLOCK_SIZE)) {\n      console.warn(\"Insufficient MAX_UNIFORM_BLOCK_SIZE, Disabling batching\");\n      return;\n    }\n\n    this.batchingEnabled = true;\n\n    this.ubo = new HubsBatchRawUniformGroup(MAX_INSTANCES, this.meshToEl);\n    this.batchManager = new BatchManager(scene, renderer, {\n      maxInstances: MAX_INSTANCES,\n      ubo: this.ubo,\n      shaders: {\n        unlit: {\n          vertexShader: unlitBatchVert,\n          fragmentShader: unlitBatchFrag\n        }\n      }\n    });\n  }\n\n  addObject(rootObject) {\n    if (!this.batchingEnabled) return 0;\n\n    let batchedCount = 0;\n    rootObject.traverse(object => {\n      if (object.isMesh) {\n        if (this.batchManager.addMesh(object)) batchedCount++;\n      }\n    });\n    return batchedCount;\n  }\n\n  removeObject(rootObject) {\n    if (!this.batchingEnabled) return;\n\n    rootObject.traverse(object => {\n      if (object.isMesh) {\n        this.batchManager.removeMesh(object);\n      }\n    });\n  }\n\n  tick(time) {\n    if (!this.batchingEnabled) return;\n\n    this.batchManager.update(time);\n  }\n}\n","import { paths } from \"./userinput/paths\";\nimport { SOUND_HOVER_OR_GRAB } from \"./sound-effects-system\";\nimport { isUI } from \"./interactions\";\n\nexport class InteractionSfxSystem {\n  constructor() {}\n\n  tick(interaction, userinput, sfx) {\n    const state = interaction.state;\n    const previousState = interaction.previousState;\n\n    if (\n      state.leftHand.held !== previousState.leftHand.held ||\n      state.rightHand.held !== previousState.rightHand.held ||\n      state.rightRemote.held !== previousState.rightRemote.held ||\n      (isUI(state.rightRemote.hovered) && state.rightRemote.hovered !== previousState.rightRemote.hovered) ||\n      state.leftRemote.held !== previousState.leftRemote.held ||\n      (isUI(state.leftRemote.hovered) && state.leftRemote.hovered !== previousState.leftRemote.hovered)\n    ) {\n      sfx.playSoundOneShot(SOUND_HOVER_OR_GRAB);\n    }\n\n    if (userinput.get(paths.actions.logInteractionState)) {\n      console.log(\n        \"Interaction System State\\nleftHand held\",\n        state.leftHand.held,\n        \"\\nleftHand hovered\",\n        state.leftHand.hovered,\n        \"\\nrightHand held\",\n        state.rightHand.held,\n        \"\\nrightHand hovered\",\n        state.rightHand.hovered,\n        \"\\nrightRemote held\",\n        state.rightRemote.held,\n        \"\\nrightRemote hovered\",\n        state.rightRemote.hovered,\n        \"\\nleftRemote held\",\n        state.leftRemote.held,\n        \"\\nleftRemote hovered\",\n        state.leftRemote.hovered\n      );\n    }\n  }\n}\n","import \"./configs\";\nimport { getThemeColor } from \"./theme\";\nimport ColorShiftWorker from \"../workers/color-shift.worker.js\";\nimport { promisifyWorker } from \"./promisify-worker.js\";\nconst colorShift = promisifyWorker(new ColorShiftWorker());\n\nfunction getThemeColorShifter(type) {\n  // Goal of this algorithm is to take a ctx pointing to a spritesheet\n  // that has a single saturated color, and convert it to another.\n  return async (ctx, w, h) => {\n    const data = ctx.getImageData(0, 0, w, h);\n    const color = type === \"action\" ? getThemeColor(\"action-color\") : getThemeColor(\"notice-background-color\");\n    const res = await colorShift(data.data.buffer, [data.data.buffer], { type, color });\n    ctx.putImageData(new ImageData(res, w, h), 0, 0);\n  };\n}\n\nexport { getThemeColorShifter };\n","/* global AFRAME THREE */\n\n// See doc/spritesheet-generation.md for information about this spritesheet\nimport spritesheetAction from \"../assets/images/spritesheets/sprite-system-action-spritesheet.json\";\nimport spritesheetNotice from \"../assets/images/spritesheets/sprite-system-notice-spritesheet.json\";\nimport { createImageTexture } from \"../utils/media-utils\";\nimport spritesheetActionPng from \"../assets/images/spritesheets/sprite-system-action-spritesheet.png\";\nimport spritesheetNoticePng from \"../assets/images/spritesheets/sprite-system-notice-spritesheet.png\";\nimport { waitForDOMContentLoaded } from \"../utils/async-utils\";\nimport vert from \"./sprites/sprite.vert\";\nimport frag from \"./sprites/sprite.frag\";\nimport { getThemeColorShifter } from \"../utils/theme-sprites\";\n\nconst multiviewVertPrefix = [\n  // GLSL 3.0 conversion\n  \"#version 300 es\",\n  \"#define attribute in\",\n  \"#define varying out\",\n  \"#define texture2D texture\",\n  \"#extension GL_OVR_multiview : require\",\n  \"layout(num_views = 2) in;\",\n  \"uniform mat4 modelViewMatrix;\",\n  \"uniform mat4 modelViewMatrix2;\",\n  \"#define modelViewMatrix (gl_ViewID_OVR==0u?modelViewMatrix:modelViewMatrix2)\",\n  \"uniform mat4 projectionMatrix;\",\n  \"uniform mat4 projectionMatrix2;\",\n  \"#define projectionMatrix (gl_ViewID_OVR==0u?projectionMatrix:projectionMatrix2)\",\n  \"\"\n].join(\"\\n\");\nconst nonmultiviewVertPrefix = [\"uniform mat4 modelViewMatrix;\", \"uniform mat4 projectionMatrix;\", \"\"].join(\"\\n\");\n\nconst multiviewFragPrefix = [\n  \"#version 300 es\",\n  \"#define varying in\",\n  \"out highp vec4 pc_fragColor;\",\n  \"#define gl_FragColor pc_fragColor\",\n  \"#define texture2D texture\",\n  \"\"\n].join(\"\\n\");\n\nconst nonmultiviewFragPrefix = \"\";\n\nfunction isVisible(o) {\n  if (!o.visible) return false;\n  if (!o.parent) return true;\n  return isVisible(o.parent);\n}\n\nAFRAME.registerComponent(\"sprite\", {\n  schema: { name: { type: \"string\" } },\n  tick() {\n    // TODO when we run out of sprites we currently just stop rendering them. We need to do something better.\n    if (!(this.didRegisterWithSystem || this.didFailToRegister) && this.el.sceneEl.systems[\"hubs-systems\"]) {\n      const registered = this.el.sceneEl.systems[\"hubs-systems\"].spriteSystem.add(this);\n      this.didRegisterWithSystem = registered > 0;\n      this.didFailToRegister = registered < 0;\n    }\n  },\n\n  update() {\n    if (this.didRegisterWithSystem) {\n      this.el.sceneEl.systems[\"hubs-systems\"].spriteSystem.updateUVs(this);\n    }\n  },\n\n  remove() {\n    if (this.didRegisterWithSystem) {\n      this.el.sceneEl.systems[\"hubs-systems\"].spriteSystem.remove(this);\n    }\n  }\n});\n\nconst normalizedFrame = (function() {\n  const memo = new Map();\n  return function normalizedFrame(name, spritesheet, missingSprites) {\n    let ret = memo.get(name);\n    if (ret) {\n      return ret;\n    } else {\n      if (!spritesheet.frames[name]) {\n        if (missingSprites.indexOf(name) === -1) {\n          missingSprites.push(name);\n        }\n        ret = { x: 0, y: 0, w: 0, h: 0 };\n        memo.set(name, ret);\n        return ret;\n      }\n      const size = spritesheet.meta.size;\n      const frame = spritesheet.frames[name].frame;\n      ret = {\n        x: frame.x / size.w,\n        y: frame.y / size.h,\n        w: frame.w / size.w,\n        h: frame.h / size.h\n      };\n      memo.set(name, ret);\n      return ret;\n    }\n  };\n})();\n\nconst getSheetType = sprite => (spritesheetAction.frames[sprite.data.name] ? \"action\" : \"notice\");\nconst SHEET_TYPES = [\"action\", \"notice\"];\n\nconst raycastOnSprite = (function() {\n  const vA = new THREE.Vector3();\n  const vB = new THREE.Vector3();\n  const vC = new THREE.Vector3();\n  const vD = new THREE.Vector3();\n  const point = new THREE.Vector3();\n  const intersectionInfo = { distance: 0, point, object: null };\n\n  return function raycast(raycaster, intersects) {\n    this.updateMatrices();\n    vA.set(-0.5, 0.5, 0).applyMatrix4(this.matrixWorld);\n    vB.set(0.5, 0.5, 0).applyMatrix4(this.matrixWorld);\n    vC.set(-0.5, -0.5, 0).applyMatrix4(this.matrixWorld);\n    let intersect = raycaster.ray.intersectTriangle(vA, vC, vB, false, point);\n    if (intersect === null) {\n      vD.set(0.5, -0.5, 0).applyMatrix4(this.matrixWorld);\n      intersect = raycaster.ray.intersectTriangle(vB, vC, vD, false, point);\n      if (intersect === null) {\n        return;\n      }\n    }\n\n    const distance = raycaster.ray.origin.distanceTo(point);\n    if (distance < raycaster.near || distance > raycaster.far) return;\n\n    intersectionInfo.distance = distance;\n    intersectionInfo.point = point;\n    intersectionInfo.object = this;\n    intersects.push(intersectionInfo);\n  };\n})();\n\nfunction getHoverableVisuals(el) {\n  if (!el || !el.components) return null;\n  if (el.components[\"hoverable-visuals\"]) {\n    return el.components[\"hoverable-visuals\"];\n  }\n  return getHoverableVisuals(el.parentEl);\n}\n\nfunction enableSweepingEffect(comp) {\n  const hoverableVisuals = getHoverableVisuals(comp.el);\n  if (!hoverableVisuals) {\n    return false;\n  }\n\n  const isPinned = hoverableVisuals.el.components.pinnable && hoverableVisuals.el.components.pinnable.data.pinned;\n  const isSpawner = !!hoverableVisuals.el.components[\"super-spawner\"];\n  const isFrozen = hoverableVisuals.el.sceneEl.is(\"frozen\");\n  const hideDueToPinning = !isSpawner && isPinned && !isFrozen;\n  return hoverableVisuals.data.enableSweepingEffect && !hideDueToPinning;\n}\n\nfunction createGeometry(maxSprites) {\n  const geometry = new THREE.BufferGeometry();\n  geometry.addAttribute(\"a_vertices\", new THREE.BufferAttribute(new Float32Array(maxSprites * 3 * 4), 3, false));\n  geometry.addAttribute(\n    \"a_hubs_EnableSweepingEffect\",\n    new THREE.BufferAttribute(new Float32Array(maxSprites * 4), 1, false)\n  );\n  geometry.addAttribute(\n    \"a_hubs_SweepParams\",\n    new THREE.BufferAttribute(new Float32Array(maxSprites * 4 * 2), 2, false)\n  );\n  geometry.addAttribute(\"a_uvs\", new THREE.BufferAttribute(new Float32Array(maxSprites * 2 * 4), 2, false));\n  const mvCols = new THREE.InterleavedBuffer(new Float32Array(maxSprites * 16 * 4), 16);\n  geometry.addAttribute(\"mvCol0\", new THREE.InterleavedBufferAttribute(mvCols, 4, 0, false));\n  geometry.addAttribute(\"mvCol1\", new THREE.InterleavedBufferAttribute(mvCols, 4, 4, false));\n  geometry.addAttribute(\"mvCol2\", new THREE.InterleavedBufferAttribute(mvCols, 4, 8, false));\n  geometry.addAttribute(\"mvCol3\", new THREE.InterleavedBufferAttribute(mvCols, 4, 12, false));\n  const indices = new Array(3 * 2 * maxSprites);\n  for (let i = 0; i < maxSprites; i++) {\n    indices[i * 3 * 2 + 0] = i * 4 + 0;\n    indices[i * 3 * 2 + 1] = i * 4 + 2;\n    indices[i * 3 * 2 + 2] = i * 4 + 1;\n    indices[i * 3 * 2 + 3] = i * 4 + 1;\n    indices[i * 3 * 2 + 4] = i * 4 + 2;\n    indices[i * 3 * 2 + 5] = i * 4 + 3;\n  }\n  geometry.setIndex(indices);\n  return geometry;\n}\n\nconst ZEROS = [0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0, 0];\n\nexport class SpriteSystem {\n  raycast(raycaster, intersects) {\n    for (let i = 0; i < SHEET_TYPES.length; i++) {\n      const sheetType = SHEET_TYPES[i];\n      const slots = this.slots[sheetType];\n\n      for (let i = 0, l = slots.length; i < l; i++) {\n        if (!slots[i]) continue;\n\n        const o = this.indexWithSprite[sheetType].get(i).el.object3D;\n        if (isVisible(o)) {\n          raycastOnSprite.call(o, raycaster, intersects);\n        }\n      }\n    }\n\n    return intersects;\n  }\n  constructor(scene) {\n    this.missingSprites = [];\n    this.maxSprites = 1024;\n    this.slots = { action: new Array(this.maxSprites), notice: new Array(this.maxSprites) };\n    this.spriteWithIndex = { action: new Map(), notice: new Map() };\n    this.indexWithSprite = { action: new Map(), notice: new Map() };\n    this.stack = { action: new Array(this.maxSprites), notice: new Array(this.maxSprites) };\n    this.meshes = {};\n\n    for (const stack of Object.values(this.stack)) {\n      for (let i = 0; i < this.maxSprites; i++) {\n        stack[i] = this.maxSprites - 1 - i;\n      }\n    }\n\n    const vertexShader = String.prototype.concat(\n      scene.renderer.vr.multiview ? multiviewVertPrefix : nonmultiviewVertPrefix,\n      vert\n    );\n    const fragmentShader = String.prototype.concat(\n      scene.renderer.vr.multiview ? multiviewFragPrefix : nonmultiviewFragPrefix,\n      frag\n    );\n\n    const domReady = waitForDOMContentLoaded();\n\n    Promise.all([domReady]).then(() => {\n      for (const [spritesheetPng, type] of [[spritesheetActionPng, \"action\"], [spritesheetNoticePng, \"notice\"]]) {\n        Promise.all([createImageTexture(spritesheetPng, getThemeColorShifter(type)), waitForDOMContentLoaded()]).then(\n          ([spritesheetTexture]) => {\n            const material = new THREE.RawShaderMaterial({\n              uniforms: {\n                u_spritesheet: { value: spritesheetTexture },\n                hubs_Time: { value: 0 }\n              },\n              vertexShader,\n              fragmentShader,\n              side: THREE.DoubleSide,\n              transparent: true\n            });\n            const mesh = (this.meshes[type] = new THREE.Mesh(createGeometry(this.maxSprites), material));\n            const el = document.createElement(\"a-entity\");\n            el.classList.add(\"ui\");\n            scene.appendChild(el);\n            el.setObject3D(\"mesh\", mesh);\n            mesh.frustumCulled = false;\n            mesh.renderOrder = window.APP.RENDER_ORDER.HUD_ICONS;\n            mesh.raycast = this.raycast.bind(this);\n          }\n        );\n      }\n    });\n  }\n\n  tick(t) {\n    if (!this.meshes.action || !this.meshes.notice) return;\n\n    for (let i = 0; i < SHEET_TYPES.length; i++) {\n      const sheetType = SHEET_TYPES[i];\n      const mesh = this.meshes[sheetType];\n      mesh.material.uniforms.hubs_Time.value = t;\n      mesh.material.uniformsNeedUpdate = true;\n\n      const mvCols = mesh.geometry.attributes[\"mvCol0\"].data; // interleaved\n      const aEnableSweepingEffect = mesh.geometry.attributes[\"a_hubs_EnableSweepingEffect\"];\n      const aSweepParams = mesh.geometry.attributes[\"a_hubs_SweepParams\"];\n      for (let i = 0, l = this.slots[sheetType].length; i < l; i++) {\n        const slots = this.slots[sheetType];\n        if (!slots[i]) continue;\n\n        const indexWithSprite = this.indexWithSprite[sheetType];\n\n        const sprite = indexWithSprite.get(i);\n\n        if (isVisible(sprite.el.object3D)) {\n          const enableSweepingEffectValue = enableSweepingEffect(sprite) ? 1 : 0;\n          aEnableSweepingEffect.array[i * 4 + 0] = enableSweepingEffectValue;\n          aEnableSweepingEffect.array[i * 4 + 1] = enableSweepingEffectValue;\n          aEnableSweepingEffect.array[i * 4 + 2] = enableSweepingEffectValue;\n          aEnableSweepingEffect.array[i * 4 + 3] = enableSweepingEffectValue;\n          aEnableSweepingEffect.needsUpdate = true;\n          if (enableSweepingEffectValue) {\n            const hoverableVisuals = getHoverableVisuals(sprite.el);\n            const s = hoverableVisuals.sweepParams[0];\n            const t = hoverableVisuals.sweepParams[1];\n            aSweepParams.setXY(4 * i + 0, s, t);\n            aSweepParams.setXY(4 * i + 1, s, t);\n            aSweepParams.setXY(4 * i + 2, s, t);\n            aSweepParams.setXY(4 * i + 3, s, t);\n            aSweepParams.needsUpdate = true;\n          }\n\n          sprite.el.object3D.updateMatrices();\n          const mat4 = sprite.el.object3D.matrixWorld;\n          mvCols.array.set(mat4.elements, i * 4 * 16 + 0);\n          mvCols.array.set(mat4.elements, i * 4 * 16 + 1 * 16);\n          mvCols.array.set(mat4.elements, i * 4 * 16 + 2 * 16);\n          mvCols.array.set(mat4.elements, i * 4 * 16 + 3 * 16);\n          mvCols.needsUpdate = true;\n        } else {\n          mvCols.array.set(ZEROS, i * 4 * 16 + 0);\n          mvCols.array.set(ZEROS, i * 4 * 16 + 1 * 16);\n          mvCols.array.set(ZEROS, i * 4 * 16 + 2 * 16);\n          mvCols.array.set(ZEROS, i * 4 * 16 + 3 * 16);\n          mvCols.needsUpdate = true;\n        }\n      }\n    }\n  }\n\n  updateUVs(sprite) {\n    const sheetType = getSheetType(sprite);\n    const mesh = this.meshes[sheetType];\n    const spriteWithIndex = this.spriteWithIndex[sheetType];\n\n    const flipY = mesh.material.uniforms.u_spritesheet.value.flipY;\n    const i = spriteWithIndex.get(sprite);\n    const frame = normalizedFrame(\n      sprite.data.name,\n      sheetType === \"action\" ? spritesheetAction : spritesheetNotice,\n      this.missingSprites\n    );\n    const aUvs = mesh.geometry.attributes[\"a_uvs\"];\n\n    aUvs.setXY(i * 4 + 0, frame.x, flipY ? 1 - frame.y : frame.y);\n    aUvs.setXY(i * 4 + 1, frame.x + frame.w, flipY ? 1 - frame.y : frame.y);\n    aUvs.setXY(i * 4 + 2, frame.x, flipY ? 1 - frame.y - frame.h : frame.y + frame.h);\n    aUvs.setXY(i * 4 + 3, frame.x + frame.w, flipY ? 1 - frame.y - frame.h : frame.y + frame.h);\n    aUvs.needsUpdate = true;\n  }\n\n  add(sprite) {\n    if (!this.meshes.action || !this.meshes.notice) {\n      return 0;\n    }\n    const sheetType = getSheetType(sprite);\n    const stack = this.stack[sheetType];\n    const i = stack.pop();\n    if (i === undefined) {\n      console.error(\"Too many sprites\");\n      return -1;\n    }\n    const slots = this.slots[sheetType];\n    const spriteWithIndex = this.spriteWithIndex[sheetType];\n    const indexWithSprite = this.indexWithSprite[sheetType];\n    const mesh = this.meshes[sheetType];\n    slots[i] = true;\n    spriteWithIndex.set(sprite, i);\n    indexWithSprite.set(i, sprite);\n\n    this.updateUVs(sprite);\n\n    const aVertices = mesh.geometry.attributes[\"a_vertices\"];\n    aVertices.setXYZ(i * 4 + 0, -0.5, 0.5, 0);\n    aVertices.setXYZ(i * 4 + 1, 0.5, 0.5, 0);\n    aVertices.setXYZ(i * 4 + 2, -0.5, -0.5, 0);\n    aVertices.setXYZ(i * 4 + 3, 0.5, -0.5, 0);\n    aVertices.needsUpdate = true;\n    return 1;\n  }\n\n  remove(sprite) {\n    const sheetType = getSheetType(sprite);\n    const slots = this.slots[sheetType];\n    const spriteWithIndex = this.spriteWithIndex[sheetType];\n    const indexWithSprite = this.indexWithSprite[sheetType];\n    const stack = this.stack[sheetType];\n    const mesh = this.meshes[sheetType];\n\n    const i = spriteWithIndex.get(sprite);\n    spriteWithIndex.delete(sprite);\n    indexWithSprite.delete(i);\n    slots[i] = false;\n    stack.push(i);\n\n    const mvCols = mesh.geometry.attributes[\"mvCol0\"].data; // interleaved\n    mvCols.array.set(ZEROS, i * 4 * 16 + 0);\n    mvCols.array.set(ZEROS, i * 4 * 16 + 1 * 16);\n    mvCols.array.set(ZEROS, i * 4 * 16 + 2 * 16);\n    mvCols.array.set(ZEROS, i * 4 * 16 + 3 * 16);\n    mvCols.needsUpdate = true;\n  }\n}\n","import { setMatrixWorld, affixToWorldUp } from \"../utils/three-utils\";\nimport { isTagged } from \"../components/tags\";\nimport { applyPersistentSync } from \"../utils/permissions-utils\";\nimport { waitForDOMContentLoaded } from \"../utils/async-utils\";\nconst calculateIconTransform = (function() {\n  const up = new THREE.Vector3();\n  const backward = new THREE.Vector3();\n  const forward = new THREE.Vector3();\n  const camToWaypoint = new THREE.Vector3();\n  const v1 = new THREE.Vector3();\n  const m1 = new THREE.Matrix4();\n  const position = new THREE.Vector3();\n  let scale = 1;\n\n  return function calculateIconTransform(waypoint, viewingCamera, outMat4) {\n    waypoint.updateMatrices();\n    viewingCamera.updateMatrices();\n    affixToWorldUp(m1.copy(waypoint.matrixWorld), m1).extractBasis(v1, up, backward);\n    position\n      .setFromMatrixPosition(waypoint.matrixWorld)\n      .add(v1.addVectors(up.multiplyScalar(1.6), backward.multiplyScalar(0.15)));\n    camToWaypoint.subVectors(position, v1.setFromMatrixPosition(viewingCamera.matrixWorld));\n    const distance = camToWaypoint.length();\n    const minDistance = distance < 0.2 * v1.setFromMatrixColumn(viewingCamera.matrixWorld, 0).length();\n    if (distance < minDistance) {\n      scale = 0.00001;\n      camToWaypoint.set(0, 0, -1);\n    } else {\n      scale = 0.1 + 0.05 * distance;\n    }\n    forward\n      .copy(camToWaypoint)\n      .projectOnPlane(up.set(0, 1, 0))\n      .normalize();\n\n    return outMat4\n      .makeBasis(\n        v1.crossVectors(forward, up).multiplyScalar(scale),\n        up.multiplyScalar(scale),\n        forward.multiplyScalar(scale * -1)\n      )\n      .setPosition(position);\n  };\n})();\nfunction isMineOrTakeOwnership(el) {\n  return NAF.utils.isMine(el) || NAF.utils.takeOwnership(el);\n}\nfunction isOccupiableSpawnPoint(waypointData) {\n  return waypointData.canBeOccupied && waypointData.canBeSpawnPoint;\n}\nfunction isUnoccupiableSpawnPoint(waypointData) {\n  return !waypointData.canBeOccupied && waypointData.canBeSpawnPoint;\n}\nfunction loadTemplateAndAddToScene(scene, templateId) {\n  return new Promise(resolve => {\n    const content = document.importNode(document.getElementById(templateId).content.children[0]);\n    scene.appendChild(content, true);\n    setTimeout(() => {\n      // Without this timeout, this resolves too early in Firefox for Android\n      // we have to wait a tick for the attach callbacks to get fired for the elements in a template\n      resolve(content);\n    }, 0);\n  });\n}\nfunction templatesToLoadForWaypointData(data) {\n  const templateIds = [];\n  if (data.canBeClicked && data.canBeOccupied) {\n    templateIds.push(\"occupiable-waypoint-icon\");\n  } else if (data.canBeClicked && !data.canBeOccupied) {\n    templateIds.push(\"teleport-waypoint-icon\");\n  } else if (isUnoccupiableSpawnPoint(data)) {\n    //    templateIds.push(\"teleport-waypoint-icon\");\n  } else if (isOccupiableSpawnPoint(data)) {\n    //    templateIds.push(\"occupiable-waypoint-icon\");\n  } else {\n    //templateIds.push(\"teleport-waypoint-icon\");\n  }\n  return templateIds;\n}\nfunction loadTemplatesForWaypointData(scene, data) {\n  return templatesToLoadForWaypointData(data).map(templateId => loadTemplateAndAddToScene(scene, templateId));\n}\n\nfunction shouldTryToOccupy(waypointComponent) {\n  return (\n    waypointComponent.data.canBeOccupied &&\n    (NAF.utils.isMine(waypointComponent.el) ||\n      !(\n        waypointComponent.data.isOccupied &&\n        NAF.utils.getNetworkOwner(waypointComponent.el) &&\n        NAF.connection.connectedClients[NAF.utils.getNetworkOwner(waypointComponent.el)]\n      ))\n  );\n}\n\nfunction isOccupiedByMe(waypointComponent) {\n  return (\n    waypointComponent.data.canBeOccupied &&\n    waypointComponent.data.isOccupied &&\n    waypointComponent.el.components.networked &&\n    NAF.utils.isMine(waypointComponent.el)\n  );\n}\nfunction unoccupyWaypoint(waypointComponent) {\n  waypointComponent.el.setAttribute(\"waypoint\", { isOccupied: false });\n}\nfunction unoccupyWaypoints(waypointComponents) {\n  waypointComponents.filter(isOccupiedByMe).forEach(unoccupyWaypoint);\n}\nfunction occupyWaypoint(waypointComponent) {\n  waypointComponent.el.setAttribute(\"waypoint\", { isOccupied: true });\n}\n\nfunction uuid(el) {\n  return el.object3D.uuid;\n}\n\nexport class WaypointSystem {\n  constructor(scene, characterController) {\n    this.helperMat4 = new THREE.Matrix4();\n    this.scene = scene;\n    this.loading = [];\n    this.ready = [];\n    this.waypointForTemplateEl = {};\n    this.elementsFromTemplatesFor = {};\n    this.eventHandlers = [];\n    this.lostOwnershipOfWaypoint = this.lostOwnershipOfWaypoint.bind(this);\n    waitForDOMContentLoaded().then(() => {\n      loadTemplateAndAddToScene(scene, \"waypoint-preview-avatar-template\").then(el => {\n        this.waypointPreviewAvatar = el;\n        this.waypointPreviewAvatar.object3D.visible = false;\n      });\n    });\n    this.characterController = characterController;\n  }\n\n  releaseAnyOccupiedWaypoints() {\n    unoccupyWaypoints(this.ready);\n    if (this.currentWaypoint) {\n      this.currentWaypoint.el.removeEventListener(\"ownership-lost\", this.lostOwnershipOfWaypoint);\n    }\n  }\n\n  teleportToWaypoint(iconEl, waypointComponent) {\n    return function onInteract() {\n      this.releaseAnyOccupiedWaypoints();\n      waypointComponent.el.object3D.updateMatrices();\n      this.characterController.enqueueWaypointTravelTo(\n        waypointComponent.el.object3D.matrixWorld,\n        false,\n        waypointComponent.data\n      );\n    }.bind(this);\n  }\n  tryTeleportToOccupiableWaypoint(iconEl, waypointComponent) {\n    return function onInteract() {\n      const previouslyOccupiedWaypoints = this.ready.filter(isOccupiedByMe);\n      this.tryToOccupy(waypointComponent).then(didOccupy => {\n        if (didOccupy) {\n          waypointComponent.el.object3D.updateMatrices();\n          this.characterController.enqueueWaypointTravelTo(\n            waypointComponent.el.object3D.matrixWorld,\n            false,\n            waypointComponent.data\n          );\n          unoccupyWaypoints(previouslyOccupiedWaypoints.filter(wp => wp !== waypointComponent));\n        }\n      });\n    }.bind(this);\n  }\n  setupEventHandlersFor(component) {\n    return function setupEventHandlers(el) {\n      const id = uuid(el);\n      this.eventHandlers[id] = this.eventHandlers[id] || {};\n      if (\n        component.data.canBeClicked &&\n        (el.classList.contains(\"teleport-waypoint-icon\") || el.classList.contains(\"occupiable-waypoint-icon\"))\n      ) {\n        const onHover = () => {\n          component.el.object3D.updateMatrices();\n          if (this.waypointPreviewAvatar && !this.waypointForTemplateEl[id].data.willMaintainInitialOrientation) {\n            this.waypointPreviewAvatar.object3D.visible = true;\n            component.el.object3D.updateMatrices();\n            setMatrixWorld(this.waypointPreviewAvatar.object3D, component.el.object3D.matrixWorld);\n          }\n        };\n        const onUnhover = () => {\n          if (this.waypointPreviewAvatar) {\n            this.waypointPreviewAvatar.object3D.visible = false;\n          }\n        };\n        el.object3D.addEventListener(\"hovered\", onHover);\n        el.object3D.addEventListener(\"unhovered\", onUnhover);\n        this.eventHandlers[id][\"hovered\"] = onHover;\n        this.eventHandlers[id][\"unhovered\"] = onUnhover;\n      }\n      if (isTagged(el, \"singleActionButton\") && component.data.canBeClicked) {\n        let onInteract = () => {\n          console.log(\"interacted with\", el, \"associated with waypoint\", component);\n        };\n        if (el.classList.contains(\"teleport-waypoint-icon\")) {\n          onInteract = this.teleportToWaypoint(el, component);\n        } else if (el.classList.contains(\"occupiable-waypoint-icon\")) {\n          onInteract = this.tryTeleportToOccupiableWaypoint(el, component);\n        }\n        el.object3D.addEventListener(\"interact\", onInteract);\n        this.eventHandlers[id][\"interact\"] = onInteract;\n      }\n    }.bind(this);\n  }\n  registerComponent(component) {\n    this.loading.push(component);\n    const setupEventHandlers = this.setupEventHandlersFor(component);\n    const waypointId = uuid(component.el);\n    this.elementsFromTemplatesFor[waypointId] = this.elementsFromTemplatesFor[waypointId] || [];\n    Promise.all(loadTemplatesForWaypointData(this.scene, component.data)).then(elementsFromTemplates => {\n      const li = this.loading.indexOf(component);\n      if (li === -1) {\n        return null;\n      }\n      this.loading.splice(li, 1);\n      this.ready.push(component);\n      this.elementsFromTemplatesFor[waypointId].push(...elementsFromTemplates);\n      elementsFromTemplates.forEach(el => {\n        this.waypointForTemplateEl[uuid(el)] = component;\n      });\n      elementsFromTemplates.forEach(setupEventHandlers);\n    });\n  }\n  unregisterComponent(component) {\n    const li = this.loading.indexOf(component);\n    if (li !== -1) {\n      this.loading.splice(li, 1);\n    }\n    const ri = this.ready.indexOf(component);\n    if (ri !== -1) {\n      this.ready.splice(ri, 1);\n      const waypointId = uuid(component.el);\n      const elementsFromTemplates = this.elementsFromTemplatesFor[waypointId];\n      for (let i = 0; i < elementsFromTemplates.length; i++) {\n        const el = elementsFromTemplates[i];\n        const id = uuid(el);\n        if (this.eventHandlers[id]) {\n          const removeEventListener = eventName => {\n            if (this.eventHandlers[id][eventName]) {\n              el.object3D.removeEventListener(eventName, this.eventHandlers[id][eventName]);\n              delete this.eventHandlers[id][eventName];\n            }\n          };\n          [\"interact\", \"hovered\", \"unhovered\"].map(removeEventListener);\n        }\n        el.parentNode.removeChild(el);\n      }\n      this.elementsFromTemplatesFor[waypointId].length = 0;\n    }\n  }\n  getUnoccupiableSpawnPoint() {\n    const candidates = this.ready.filter(component => isUnoccupiableSpawnPoint(component.data));\n    return candidates.length && candidates.splice(Math.floor(Math.random() * candidates.length), 1)[0];\n  }\n  lostOwnershipOfWaypoint(e) {\n    if (this.currentWaypoint && this.currentWaypoint.el === e.detail.el) {\n      this.mightNeedRespawn = true;\n      this.ownershipLostTime = performance.now();\n    }\n  }\n  tryToOccupy(waypointComponent) {\n    return new Promise(resolve => {\n      if (shouldTryToOccupy(waypointComponent) && isMineOrTakeOwnership(waypointComponent.el)) {\n        occupyWaypoint(waypointComponent);\n        if (this.currentWaypoint) {\n          this.currentWaypoint.el.removeEventListener(\"ownership-lost\", this.lostOwnershipOfWaypoint);\n        }\n        this.currentWaypoint = waypointComponent;\n        waypointComponent.el.addEventListener(\"ownership-lost\", this.lostOwnershipOfWaypoint);\n        resolve(true);\n      } else {\n        resolve(false);\n      }\n    });\n  }\n  tryToOccupyAnyOf(waypoints) {\n    if (!waypoints.length) return Promise.resolve(null);\n    const candidate = waypoints.splice(Math.floor(Math.random() * waypoints.length), 1)[0];\n    return this.tryToOccupy(candidate).then(didOccupy => {\n      if (didOccupy) {\n        return Promise.resolve(candidate);\n      } else {\n        return this.tryToOccupyAnyOf(waypoints);\n      }\n    });\n  }\n  moveToSpawnPoint() {\n    if (this.currentMoveToSpawn) {\n      return this.currentMoveToSpawn;\n    }\n    if (!this.nextMoveToSpawn) {\n      this.waitOneTick = true;\n      this.nextMoveToSpawn = new Promise(resolve => {\n        this.nextMoveToSpawnResolve = resolve;\n      });\n    }\n    return this.nextMoveToSpawn;\n  }\n  moveToUnoccupiableSpawnPoint() {\n    const waypointComponent = this.getUnoccupiableSpawnPoint();\n    if (waypointComponent) {\n      this.releaseAnyOccupiedWaypoints();\n      waypointComponent.el.object3D.updateMatrices();\n      this.characterController.enqueueWaypointTravelTo(\n        waypointComponent.el.object3D.matrixWorld,\n        true,\n        waypointComponent.data\n      );\n    }\n    return waypointComponent;\n  }\n  tick() {\n    if (this.waitOneTick) {\n      this.waitOneTick = false;\n      return;\n    }\n    if (!this.currentMoveToSpawn && this.nextMoveToSpawn) {\n      this.mightNeedRespawn = false;\n      this.currentMoveToSpawn = this.nextMoveToSpawn;\n      this.currentMoveToSpawnResolve = this.nextMoveToSpawnResolve;\n      this.nextMoveToSpawn = null;\n      this.nextMoveToSpawnResolve = null;\n\n      let resolvedWaypointOrNull;\n\n      const previouslyOccupiedWaypoints = this.ready.filter(isOccupiedByMe);\n      this.tryToOccupyAnyOf(this.ready.filter(component => isOccupiableSpawnPoint(component.data))).then(\n        waypointComponentOrNull => {\n          if (waypointComponentOrNull) {\n            const waypointComponent = waypointComponentOrNull;\n            unoccupyWaypoints(previouslyOccupiedWaypoints.filter(wp => wp !== waypointComponent));\n            waypointComponent.el.object3D.updateMatrices();\n            this.characterController.enqueueWaypointTravelTo(\n              waypointComponent.el.object3D.matrixWorld,\n              true,\n              waypointComponent.data\n            );\n            resolvedWaypointOrNull = waypointComponent;\n          } else if (waypointComponentOrNull === null) {\n            resolvedWaypointOrNull = this.moveToUnoccupiableSpawnPoint();\n          }\n          this.currentMoveToSpawnResolve(resolvedWaypointOrNull);\n          this.currentMoveToSpawn = null;\n          this.currentMoveToSpawnResolve = null;\n        }\n      );\n    } else if (this.mightNeedRespawn && performance.now() - this.ownershipLostTime < 8000) {\n      this.mightNeedRespawn = false;\n      this.moveToSpawnPoint();\n    }\n    const tickTemplateEl = (elementFromTemplate, waypointComponent) => {\n      if (\n        elementFromTemplate.classList.contains(\"teleport-waypoint-icon\") ||\n        elementFromTemplate.classList.contains(\"occupiable-waypoint-icon\")\n      ) {\n        elementFromTemplate.object3D.visible = this.scene.is(\"frozen\");\n        if (elementFromTemplate.object3D.visible) {\n          this.viewingCamera = this.viewingCamera || document.getElementById(\"viewing-camera\").object3D;\n          setMatrixWorld(\n            elementFromTemplate.object3D,\n            calculateIconTransform(waypointComponent.el.object3D, this.viewingCamera, this.helperMat4)\n          );\n        }\n      }\n    };\n    function tickWaypoint(waypointComponent) {\n      const elementsFromTemplates = this.elementsFromTemplatesFor[uuid(waypointComponent.el)];\n      elementsFromTemplates.forEach(el => tickTemplateEl(el, waypointComponent));\n    }\n    this.ready.forEach(tickWaypoint.bind(this));\n  }\n}\n\nAFRAME.registerComponent(\"waypoint\", {\n  schema: {\n    canBeSpawnPoint: { default: false },\n    canBeOccupied: { default: false },\n    canBeClicked: { default: false },\n    willDisableMotion: { default: false },\n    willDisableTeleporting: { default: false },\n    snapToNavMesh: { default: false },\n    willMaintainInitialOrientation: { default: false },\n    willMaintainWorldUp: { default: true },\n    isOccupied: { default: false }\n  },\n  init() {\n    this.system = this.el.sceneEl.systems[\"hubs-systems\"].waypointSystem;\n    this.didRegisterWithSystem = false;\n  },\n  play() {\n    if (!this.didRegisterWithSystem) {\n      if (this.el.components.networked) {\n        applyPersistentSync(this.el.components.networked.data.networkId);\n      }\n      this.system.registerComponent(this, this.el.sceneEl);\n      this.didRegisterWithSystem = true;\n    }\n  },\n  remove() {\n    if (!this.didRegisterWithSystem) {\n      console.warn(\"Waypoint removed without ever having registered with the system.\");\n    } else {\n      this.system.unregisterComponent(this);\n    }\n  }\n});\n","const mat4Pool = [];\nexport function getPooledMatrix4() {\n  return mat4Pool.shift() || new THREE.Matrix4();\n}\nexport function freePooledMatrix4(mat4) {\n  mat4Pool.push(mat4);\n}\n","export const getCurrentPlayerHeight = (function() {\n  let avatarPOV;\n  let avatarRig;\n  return function getCurrentPlayerHeight(world) {\n    avatarPOV = avatarPOV || document.getElementById(\"avatar-pov-node\");\n    avatarRig = avatarRig || document.getElementById(\"avatar-rig\");\n    avatarPOV.object3D.updateMatrices();\n    avatarRig.object3D.updateMatrices();\n    if (world) {\n      return avatarPOV.object3D.matrixWorld.elements[13] - avatarRig.object3D.matrixWorld.elements[13];\n    }\n    return avatarPOV.object3D.matrix.elements[13];\n  };\n})();\n","import { paths } from \"./userinput/paths\";\nimport { SOUND_SNAP_ROTATE, SOUND_WAYPOINT_START, SOUND_WAYPOINT_END } from \"./sound-effects-system\";\nimport { easeOutQuadratic } from \"../utils/easing\";\nimport { getPooledMatrix4, freePooledMatrix4 } from \"../utils/mat4-pool\";\nimport { waitForDOMContentLoaded } from \"../utils/async-utils\";\nimport {\n  childMatch,\n  rotateInPlaceAroundWorldUp,\n  calculateCameraTransformForWaypoint,\n  interpolateAffine,\n  affixToWorldUp\n} from \"../utils/three-utils\";\nimport { getCurrentPlayerHeight } from \"../utils/get-current-player-height\";\nimport qsTruthy from \"../utils/qs_truthy\";\n//import { m4String } from \"../utils/pretty-print\";\nconst NAV_ZONE = \"character\";\nconst qsAllowWaypointLerp = qsTruthy(\"waypointLerp\");\n\nconst calculateDisplacementToDesiredPOV = (function() {\n  const translationCoordinateSpace = new THREE.Matrix4();\n  const translated = new THREE.Matrix4();\n  const localTranslation = new THREE.Matrix4();\n  return function calculateDisplacementToDesiredPOV(povMat4, fly, localDisplacement, displacementToDesiredPOV) {\n    localTranslation.makeTranslation(localDisplacement.x, localDisplacement.y, localDisplacement.z);\n    translationCoordinateSpace.extractRotation(povMat4);\n    if (!fly) {\n      affixToWorldUp(translationCoordinateSpace, translationCoordinateSpace);\n    }\n    translated.copy(translationCoordinateSpace).multiply(localTranslation);\n    return displacementToDesiredPOV.setFromMatrixPosition(translated);\n  };\n})();\n\n/**\n * A character controller that moves the avatar.\n * The controller accounts for playspace offset and orientation and depends on the nav mesh system for translation.\n * @namespace avatar\n */\nconst SNAP_ROTATION_RADIAN = THREE.Math.DEG2RAD * 45;\nconst BASE_SPEED = 3.2; //TODO: in what units?\nexport class CharacterControllerSystem {\n  constructor(scene) {\n    this.scene = scene;\n    this.fly = false;\n    this.shouldLandWhenPossible = false;\n    this.waypoints = [];\n    this.waypointTravelStartTime = 0;\n    this.waypointTravelTime = 0;\n    this.navGroup = null;\n    this.navNode = null;\n    this.relativeMotion = new THREE.Vector3(0, 0, 0);\n    this.nextRelativeMotion = new THREE.Vector3(0, 0, 0);\n    this.dXZ = 0;\n    this.scene.addEventListener(\"nav-mesh-loaded\", () => {\n      this.navGroup = null;\n      this.navNode = null;\n    });\n    waitForDOMContentLoaded().then(() => {\n      this.avatarPOV = document.getElementById(\"avatar-pov-node\");\n      this.avatarRig = document.getElementById(\"avatar-rig\");\n    });\n  }\n  // Use this API for waypoint travel so that your matrix doesn't end up in the pool\n  enqueueWaypointTravelTo(inTransform, isInstant, waypointComponentData) {\n    this.waypoints.push({ transform: getPooledMatrix4().copy(inTransform), isInstant, waypointComponentData }); //TODO: don't create new object\n  }\n  enqueueRelativeMotion(motion) {\n    motion.z *= -1;\n    this.relativeMotion.add(motion);\n  }\n  enqueueInPlaceRotationAroundWorldUp(dXZ) {\n    this.dXZ += dXZ;\n  }\n  // We assume the rig is at the root, and its local position === its world position.\n  teleportTo = (function() {\n    const rig = new THREE.Vector3();\n    const head = new THREE.Vector3();\n    const deltaFromHeadToTargetForHead = new THREE.Vector3();\n    const targetForHead = new THREE.Vector3();\n    const targetForRig = new THREE.Vector3();\n    //TODO: Use enqueue waypoint\n    return function teleportTo(targetWorldPosition) {\n      this.isMotionDisabled = false;\n      this.avatarRig.object3D.getWorldPosition(rig);\n      this.avatarPOV.object3D.getWorldPosition(head);\n      targetForHead.copy(targetWorldPosition);\n      targetForHead.y += this.avatarPOV.object3D.position.y;\n      deltaFromHeadToTargetForHead.copy(targetForHead).sub(head);\n      targetForRig.copy(rig).add(deltaFromHeadToTargetForHead);\n      this.findPositionOnNavMesh(targetForRig, targetForRig, this.avatarRig.object3D.position, true);\n      this.avatarRig.object3D.matrixNeedsUpdate = true;\n    };\n  })();\n\n  travelByWaypoint = (function() {\n    const inMat4Copy = new THREE.Matrix4();\n    const inPosition = new THREE.Vector3();\n    const outPosition = new THREE.Vector3();\n    const translation = new THREE.Matrix4();\n    const initialOrientation = new THREE.Matrix4();\n    const finalScale = new THREE.Vector3();\n    const finalPosition = new THREE.Vector3();\n    const finalPOV = new THREE.Matrix4();\n    return function travelByWaypoint(inMat4, snapToNavMesh, willMaintainInitialOrientation) {\n      this.avatarPOV.object3D.updateMatrices();\n      if (!this.fly && !snapToNavMesh) {\n        this.fly = true;\n        this.shouldLandWhenPossible = true;\n        this.shouldUnoccupyWaypointsOnceMoving = true;\n      }\n      inMat4Copy.copy(inMat4);\n      rotateInPlaceAroundWorldUp(inMat4Copy, Math.PI, finalPOV);\n      if (snapToNavMesh) {\n        inPosition.setFromMatrixPosition(inMat4Copy);\n        this.findPositionOnNavMesh(inPosition, inPosition, outPosition, true);\n        finalPOV.setPosition(outPosition);\n        translation.makeTranslation(0, getCurrentPlayerHeight(), -0.15);\n      } else {\n        translation.makeTranslation(0, 1.6, -0.15);\n      }\n      finalPOV.multiply(translation);\n      if (willMaintainInitialOrientation) {\n        initialOrientation.extractRotation(this.avatarPOV.object3D.matrixWorld);\n        finalScale.setFromMatrixScale(finalPOV);\n        finalPosition.setFromMatrixPosition(finalPOV);\n        finalPOV\n          .copy(initialOrientation)\n          .scale(finalScale)\n          .setPosition(finalPosition);\n      }\n      calculateCameraTransformForWaypoint(this.avatarPOV.object3D.matrixWorld, finalPOV, finalPOV);\n      childMatch(this.avatarRig.object3D, this.avatarPOV.object3D, finalPOV);\n    };\n  })();\n\n  tick = (function() {\n    const snapRotatedPOV = new THREE.Matrix4();\n    const newPOV = new THREE.Matrix4();\n    const displacementToDesiredPOV = new THREE.Vector3();\n\n    const startPOVPosition = new THREE.Vector3();\n    const desiredPOVPosition = new THREE.Vector3();\n    const navMeshSnappedPOVPosition = new THREE.Vector3();\n    const AVERAGE_WAYPOINT_TRAVEL_SPEED_METERS_PER_SECOND = 50;\n    const startTransform = new THREE.Matrix4();\n    const interpolatedWaypoint = new THREE.Matrix4();\n    const startTranslation = new THREE.Matrix4();\n    const waypointPosition = new THREE.Vector3();\n    const v = new THREE.Vector3();\n\n    return function tick(t, dt) {\n      if (!this.scene.is(\"entered\")) return;\n      const vrMode = this.scene.is(\"vr-mode\");\n      this.sfx = this.sfx || this.scene.systems[\"hubs-systems\"].soundEffectsSystem;\n      this.waypointSystem = this.waypointSystem || this.scene.systems[\"hubs-systems\"].waypointSystem;\n\n      if (!this.activeWaypoint && this.waypoints.length) {\n        this.activeWaypoint = this.waypoints.splice(0, 1)[0];\n        this.isMotionDisabled = this.activeWaypoint.waypointComponentData.willDisableMotion;\n        this.isTeleportingDisabled = this.activeWaypoint.waypointComponentData.willDisableTeleporting;\n        this.avatarPOV.object3D.updateMatrices();\n        this.waypointTravelTime =\n          (vrMode && !qsAllowWaypointLerp) || this.activeWaypoint.isInstant\n            ? 0\n            : 1000 *\n              (new THREE.Vector3()\n                .setFromMatrixPosition(this.avatarPOV.object3D.matrixWorld)\n                .distanceTo(waypointPosition.setFromMatrixPosition(this.activeWaypoint.transform)) /\n                AVERAGE_WAYPOINT_TRAVEL_SPEED_METERS_PER_SECOND);\n        rotateInPlaceAroundWorldUp(this.avatarPOV.object3D.matrixWorld, Math.PI, startTransform);\n        startTransform.multiply(startTranslation.makeTranslation(0, -1 * getCurrentPlayerHeight(), -0.15));\n        this.waypointTravelStartTime = t;\n        if (!vrMode && this.waypointTravelTime > 100) {\n          this.sfx.playSoundOneShot(SOUND_WAYPOINT_START);\n        }\n      }\n\n      const animationIsOver =\n        this.waypointTravelTime === 0 || t >= this.waypointTravelStartTime + this.waypointTravelTime;\n      if (this.activeWaypoint && !animationIsOver) {\n        const progress = THREE.Math.clamp((t - this.waypointTravelStartTime) / this.waypointTravelTime, 0, 1);\n        interpolateAffine(\n          startTransform,\n          this.activeWaypoint.transform,\n          easeOutQuadratic(progress),\n          interpolatedWaypoint\n        );\n        this.travelByWaypoint(\n          interpolatedWaypoint,\n          false,\n          this.activeWaypoint.waypointComponentData.willMaintainInitialOrientation\n        );\n      }\n      if (this.activeWaypoint && (this.waypoints.length || animationIsOver)) {\n        this.travelByWaypoint(\n          this.activeWaypoint.transform,\n          this.activeWaypoint.waypointComponentData.snapToNavMesh,\n          this.activeWaypoint.waypointComponentData.willMaintainInitialOrientation\n        );\n        freePooledMatrix4(this.activeWaypoint.transform);\n        this.activeWaypoint = null;\n        if (vrMode || this.waypointTravelTime > 0) {\n          this.sfx.playSoundOneShot(SOUND_WAYPOINT_END);\n        }\n      }\n\n      const userinput = AFRAME.scenes[0].systems.userinput;\n      const wasFlying = this.fly;\n      if (userinput.get(paths.actions.toggleFly)) {\n        this.shouldLandWhenPossible = false;\n        this.avatarRig.messageDispatch.dispatch(\"/fly\"); // TODO: Separate the logic about displaying the message from toggling the fly state in such a way that it is clear that this.fly will be toggled here\n      }\n      const didStopFlying = wasFlying && !this.fly;\n      if (!this.fly && this.shouldLandWhenPossible) {\n        this.shouldLandWhenPossible = false;\n      }\n      if (this.fly) {\n        this.navNode = null;\n      }\n      const preferences = window.APP.store.state.preferences;\n      const snapRotateLeft = userinput.get(paths.actions.snapRotateLeft);\n      const snapRotateRight = userinput.get(paths.actions.snapRotateRight);\n      if (snapRotateLeft) {\n        this.dXZ +=\n          preferences.snapRotationDegrees === undefined\n            ? SNAP_ROTATION_RADIAN\n            : (preferences.snapRotationDegrees * Math.PI) / 180;\n      }\n      if (snapRotateRight) {\n        this.dXZ -=\n          preferences.snapRotationDegrees === undefined\n            ? SNAP_ROTATION_RADIAN\n            : (preferences.snapRotationDegrees * Math.PI) / 180;\n      }\n      if (snapRotateLeft || snapRotateRight) {\n        this.scene.systems[\"hubs-systems\"].soundEffectsSystem.playSoundOneShot(SOUND_SNAP_ROTATE);\n      }\n      const characterAcceleration = userinput.get(paths.actions.characterAcceleration);\n      if (characterAcceleration) {\n        const zCharacterAcceleration = -1 * characterAcceleration[1];\n        this.relativeMotion.set(\n          this.relativeMotion.x +\n            (preferences.disableMovement || preferences.disableStrafing ? 0 : characterAcceleration[0]),\n          this.relativeMotion.y,\n          this.relativeMotion.z +\n            (preferences.disableMovement\n              ? 0\n              : preferences.disableBackwardsMovement\n                ? Math.min(0, zCharacterAcceleration)\n                : zCharacterAcceleration)\n        );\n      }\n      const lerpC = vrMode ? 0 : 0.85; // TODO: To support drifting (\"ice skating\"), motion needs to keep initial direction\n      this.nextRelativeMotion.copy(this.relativeMotion).multiplyScalar(lerpC);\n      this.relativeMotion.multiplyScalar(1 - lerpC);\n\n      this.avatarPOV.object3D.updateMatrices();\n      rotateInPlaceAroundWorldUp(this.avatarPOV.object3D.matrixWorld, this.dXZ, snapRotatedPOV);\n\n      newPOV.copy(snapRotatedPOV);\n\n      if (!this.isMotionDisabled) {\n        const playerScale = v.setFromMatrixColumn(this.avatarPOV.object3D.matrixWorld, 1).length();\n        const triedToMove = this.relativeMotion.lengthSq() > 0.000001;\n\n        if (triedToMove) {\n          calculateDisplacementToDesiredPOV(\n            snapRotatedPOV,\n            this.fly,\n            this.relativeMotion.multiplyScalar(\n              ((userinput.get(paths.actions.boost) ? 2 : 1) * BASE_SPEED * Math.sqrt(playerScale) * dt) / 1000\n            ),\n            displacementToDesiredPOV\n          );\n\n          newPOV\n            .makeTranslation(displacementToDesiredPOV.x, displacementToDesiredPOV.y, displacementToDesiredPOV.z)\n            .multiply(snapRotatedPOV);\n        }\n\n        const shouldRecomputeNavGroupAndNavNode = didStopFlying || this.shouldLandWhenPossible;\n        const shouldResnapToNavMesh = shouldRecomputeNavGroupAndNavNode || triedToMove;\n\n        let squareDistNavMeshCorrection = 0;\n\n        if (shouldResnapToNavMesh) {\n          this.findPOVPositionAboveNavMesh(\n            startPOVPosition.setFromMatrixPosition(this.avatarPOV.object3D.matrixWorld),\n            desiredPOVPosition.setFromMatrixPosition(newPOV),\n            navMeshSnappedPOVPosition,\n            shouldRecomputeNavGroupAndNavNode\n          );\n\n          squareDistNavMeshCorrection = desiredPOVPosition.distanceToSquared(navMeshSnappedPOVPosition);\n\n          if (this.fly && this.shouldLandWhenPossible && squareDistNavMeshCorrection < 0.5 && !this.activeWaypoint) {\n            this.shouldLandWhenPossible = false;\n            this.fly = false;\n            newPOV.setPosition(navMeshSnappedPOVPosition);\n          } else if (!this.fly) {\n            newPOV.setPosition(navMeshSnappedPOVPosition);\n          }\n        }\n\n        if (!this.activeWaypoint && this.shouldUnoccupyWaypointsOnceMoving && triedToMove) {\n          this.shouldUnoccupyWaypointsOnceMoving = false;\n          this.waypointSystem.releaseAnyOccupiedWaypoints();\n          if (this.fly && this.shouldLandWhenPossible && (shouldResnapToNavMesh && squareDistNavMeshCorrection < 3)) {\n            newPOV.setPosition(navMeshSnappedPOVPosition);\n            this.shouldLandWhenPossible = false;\n            this.fly = false;\n          }\n        }\n      }\n\n      childMatch(this.avatarRig.object3D, this.avatarPOV.object3D, newPOV);\n      this.relativeMotion.copy(this.nextRelativeMotion);\n      this.dXZ = 0;\n    };\n  })();\n\n  getClosestNode(pos) {\n    const pathfinder = this.scene.systems.nav.pathfinder;\n    if (!pathfinder.zones[NAV_ZONE].groups[this.navGroup]) {\n      return null;\n    }\n    return (\n      pathfinder.getClosestNode(pos, NAV_ZONE, this.navGroup, true) ||\n      pathfinder.getClosestNode(pos, NAV_ZONE, this.navGroup)\n    );\n  }\n\n  findPOVPositionAboveNavMesh = (function() {\n    const startingFeetPosition = new THREE.Vector3();\n    const desiredFeetPosition = new THREE.Vector3();\n    // TODO: Here we assume the player is standing straight up, but in VR it is often the case\n    // that you want to lean over the edge of a balcony/table that does not have nav mesh below.\n    // We should find way to allow leaning over the edge of a balcony and maybe disallow putting\n    // your head through a wall.\n    return function findPOVPositionAboveNavMesh(\n      startPOVPosition,\n      desiredPOVPosition,\n      outPOVPosition,\n      shouldRecomputeGroupAndNode\n    ) {\n      const playerHeight = getCurrentPlayerHeight(true);\n      startingFeetPosition.copy(startPOVPosition);\n      startingFeetPosition.y -= playerHeight;\n      desiredFeetPosition.copy(desiredPOVPosition);\n      desiredFeetPosition.y -= playerHeight;\n      this.findPositionOnNavMesh(\n        startingFeetPosition,\n        desiredFeetPosition,\n        outPOVPosition,\n        shouldRecomputeGroupAndNode\n      );\n      outPOVPosition.y += playerHeight;\n      return outPOVPosition;\n    };\n  })();\n\n  findPositionOnNavMesh(start, end, outPos, shouldRecomputeGroupAndNode) {\n    const pathfinder = this.scene.systems.nav.pathfinder;\n    if (!(NAV_ZONE in pathfinder.zones)) return;\n    this.navGroup =\n      shouldRecomputeGroupAndNode || this.navGroup === null\n        ? pathfinder.getGroup(NAV_ZONE, end, true, true)\n        : this.navGroup;\n    this.navNode =\n      shouldRecomputeGroupAndNode || this.navNode === null || this.navNode === undefined\n        ? this.getClosestNode(end)\n        : this.navNode;\n    if (this.navNode === null || this.navNode === undefined) {\n      // this.navNode can be null if it has never been set or if getClosestNode fails,\n      // and it can be undefined if clampStep fails, so we have to check both. We do not\n      // simply check if it is falsey (!this.navNode), because 0 (zero) is a valid value,\n      // and 0 is falsey.\n      outPos.copy(end);\n    } else {\n      this.navNode = pathfinder.clampStep(start, end, this.navNode, NAV_ZONE, this.navGroup, outPos);\n    }\n    return outPos;\n  }\n}\n","export class CursorPoseTrackingSystem {\n  constructor() {\n    this.pairs = [];\n  }\n  register(object3D, path) {\n    this.pairs.push({ object3D, path });\n  }\n  unregister(object3D) {\n    this.pairs = this.pairs.filter(p => p.object3D !== object3D);\n  }\n  tick() {\n    for (let i = 0; i < this.pairs.length; i++) {\n      const matrix = AFRAME.scenes[0].systems.userinput.get(this.pairs[i].path);\n      if (matrix) {\n        const o = this.pairs[i].object3D;\n        o.matrix.copy(matrix);\n        o.matrix.decompose(o.position, o.quaternion, o.scale);\n        o.matrixIsModified = true;\n        o.matrixWorldNeedsUpdate = true;\n      }\n    }\n  }\n}\n","import { squareDistanceBetween } from \"../utils/three-utils\";\nconst MIN_DISTANCE = 0.2;\nexport class ScaleInScreenSpaceSystem {\n  constructor() {\n    this.components = [];\n  }\n  register(c) {\n    this.components.push(c);\n  }\n  unregister(c) {\n    this.components = this.components.filter(comp => comp !== c);\n  }\n\n  tick = (function() {\n    const parentScale = new THREE.Vector3();\n    return function tick() {\n      this.viewingCamera = this.viewingCamera || document.getElementById(\"viewing-camera\");\n      for (let i = 0; i < this.components.length; i++) {\n        const component = this.components[i];\n        // TODO: This calculates the distance to the viewing camera, the correct distance might be to the viewing plane.\n        // This seemed accurate enough in my testing.\n        const distance = Math.sqrt(squareDistanceBetween(component.el.object3D, this.viewingCamera.object3D));\n        if (distance < MIN_DISTANCE) {\n          component.el.object3D.scale.set(0.00001, 0.000001, 0.00001);\n        } else {\n          const parent = component.el.object3D.parent;\n          parent.updateMatrices();\n          parentScale.setFromMatrixScale(parent.matrixWorld);\n          component.el.object3D.scale.set(\n            (1 / parentScale.x) * (component.data.baseScale.x + distance * component.data.addedScale.x),\n            (1 / parentScale.y) * (component.data.baseScale.y + distance * component.data.addedScale.y),\n            (1 / parentScale.z) * (component.data.baseScale.z + distance * component.data.addedScale.z)\n          );\n        }\n        component.el.object3D.matrixNeedsUpdate = true;\n      }\n    };\n  })();\n}\n","function updateMediaAudioSettings(audio, settings) {\n  audio.setDistanceModel(settings.mediaDistanceModel);\n  audio.setRolloffFactor(settings.mediaRolloffFactor);\n  audio.setRefDistance(settings.mediaRefDistance);\n  audio.setMaxDistance(settings.mediaMaxDistance);\n  audio.panner.coneInnerAngle = settings.mediaConeInnerAngle;\n  audio.panner.coneOuterAngle = settings.mediaConeOuterAngle;\n  audio.panner.coneOuterGain = settings.mediaConeOuterGain;\n}\n\nfunction updateAvatarAudioSettings(audio, settings) {\n  audio.setDistanceModel(settings.avatarDistanceModel);\n  audio.setRolloffFactor(settings.avatarRolloffFactor);\n  audio.setRefDistance(settings.avatarRefDistance);\n  audio.setMaxDistance(settings.avatarMaxDistance);\n}\n\nexport class AudioSettingsSystem {\n  constructor(sceneEl) {\n    this.sceneEl = sceneEl;\n    this.defaultSettings = {\n      avatarDistanceModel: \"inverse\",\n      avatarRolloffFactor: 2,\n      avatarRefDistance: 1,\n      avatarMaxDistance: 10000,\n      mediaVolume: 0.5,\n      mediaDistanceModel: \"inverse\",\n      mediaRolloffFactor: 1,\n      mediaRefDistance: 1,\n      mediaMaxDistance: 10000,\n      mediaConeInnerAngle: 360,\n      mediaConeOuterAngle: 0,\n      mediaConeOuterGain: 0\n    };\n    this.audioSettings = this.defaultSettings;\n    this.mediaAudioSources = [];\n    this.avatarAudioSources = [];\n\n    this.sceneEl.addEventListener(\"reset_scene\", this.onSceneReset);\n  }\n\n  registerMediaAudioSource(audioSource) {\n    this.mediaAudioSources.push(audioSource);\n    updateMediaAudioSettings(audioSource, this.audioSettings);\n  }\n\n  unregisterMediaAudioSource(audioSource) {\n    this.mediaAudioSources.splice(this.mediaAudioSources.indexOf(audioSource, 1));\n  }\n\n  registerAvatarAudioSource(audioSource) {\n    this.avatarAudioSources.push(audioSource);\n    updateAvatarAudioSettings(audioSource, this.audioSettings);\n  }\n\n  unregisterAvatarAudioSource(audioSource) {\n    this.avatarAudioSources.splice(this.avatarAudioSources.indexOf(audioSource, 1));\n  }\n\n  updateAudioSettings(settings) {\n    this.audioSettings = Object.assign({}, this.defaultSettings, settings);\n\n    for (const mediaAudioSource of this.mediaAudioSources) {\n      updateMediaAudioSettings(mediaAudioSource, settings);\n    }\n\n    for (const avatarAudioSource of this.avatarAudioSources) {\n      updateAvatarAudioSettings(avatarAudioSource, settings);\n    }\n  }\n\n  onSceneReset = () => {\n    this.updateAudioSettings(this.defaultSettings);\n  };\n}\n\nAFRAME.registerComponent(\"audio-source\", {\n  schema: {\n    type: { type: \"string\" } // avatar, media\n  },\n\n  init() {\n    this.audioSource = null;\n\n    if (this.data.type === \"avatar\") {\n      this.onSoundSourceSet = this.onSoundSourceSet.bind(this);\n      this.el.addEventListener(\"sound-source-set\", this.onSoundSourceSet);\n    } else if (this.data.type === \"media\") {\n      this.onVideoLoaded = this.onVideoLoaded.bind(this);\n      this.el.addEventListener(\"video-loaded\", this.onVideoLoaded);\n    }\n  },\n\n  onSoundSourceSet() {\n    const audioSettingsSystem = this.el.sceneEl.systems[\"hubs-systems\"].audioSettingsSystem;\n    const networkedAudioSource = this.el.components[\"networked-audio-source\"];\n\n    if (this.audioSource) {\n      audioSettingsSystem.unregisterAvatarAudioSource(this.audioSource);\n    }\n\n    if (networkedAudioSource) {\n      this.audioSource = networkedAudioSource.sound;\n      audioSettingsSystem.registerAvatarAudioSource(this.audioSource);\n    }\n  },\n\n  onVideoLoaded() {\n    const audioSettingsSystem = this.el.sceneEl.systems[\"hubs-systems\"].audioSettingsSystem;\n    const mediaVideo = this.el.components[\"media-video\"];\n\n    if (this.audioSource) {\n      audioSettingsSystem.unregisterMediaAudioSource(this.audioSource);\n    }\n\n    if (mediaVideo) {\n      this.audioSource = mediaVideo.audio;\n      audioSettingsSystem.registerMediaAudioSource(this.audioSource);\n    }\n  },\n\n  remove() {\n    if (!this.audioSource) {\n      return;\n    }\n\n    const audioSettingsSystem = this.el.sceneEl.systems[\"hubs-systems\"].audioSettingsSystem;\n\n    if (this.data.type === \"avatar\") {\n      audioSettingsSystem.unregisterAvatarAudioSource(this.audioSource);\n      this.el.removeEventListener(\"sound-source-set\", this.onSoundSourceSet);\n    } else if (this.data.type === \"media\") {\n      audioSettingsSystem.unregisterMediaAudioSource(this.audioSource);\n      this.el.removeEventListener(\"video-loaded\", this.onVideoLoaded);\n    }\n  }\n});\n","import { CursorTargettingSystem } from \"./cursor-targetting-system\";\nimport { CursorTogglingSystem } from \"./cursor-toggling-system\";\nimport { PhysicsSystem } from \"./physics-system\";\nimport { ConstraintsSystem } from \"./constraints-system\";\nimport { TwoPointStretchingSystem } from \"./two-point-stretching-system\";\nimport { SingleActionButtonSystem, HoldableButtonSystem, HoverButtonSystem } from \"./button-systems\";\nimport { DrawingMenuSystem } from \"./drawing-menu-system\";\nimport { HoverMenuSystem } from \"./hover-menu-system\";\nimport { SuperSpawnerSystem } from \"./super-spawner-system\";\nimport { HapticFeedbackSystem } from \"./haptic-feedback-system\";\nimport { SoundEffectsSystem } from \"./sound-effects-system\";\nimport { BatchManagerSystem } from \"./render-manager-system\";\nimport { ScenePreviewCameraSystem } from \"./scene-preview-camera-system\";\nimport { InteractionSfxSystem } from \"./interaction-sfx-system\";\nimport { SpriteSystem } from \"./sprites\";\nimport { CameraSystem } from \"./camera-system\";\nimport { WaypointSystem } from \"./waypoint-system\";\nimport { CharacterControllerSystem } from \"./character-controller-system\";\nimport { waitForDOMContentLoaded } from \"../utils/async-utils\";\nimport { CursorPoseTrackingSystem } from \"./cursor-pose-tracking\";\nimport { ScaleInScreenSpaceSystem } from \"./scale-in-screen-space\";\nimport { AudioSettingsSystem } from \"./audio-settings-system\";\n\nAFRAME.registerSystem(\"hubs-systems\", {\n  init() {\n    waitForDOMContentLoaded().then(() => {\n      this.DOMContentDidLoad = true;\n    });\n    this.cursorTogglingSystem = new CursorTogglingSystem();\n    this.interactionSfxSystem = new InteractionSfxSystem();\n    this.superSpawnerSystem = new SuperSpawnerSystem();\n    this.cursorTargettingSystem = new CursorTargettingSystem();\n    this.physicsSystem = new PhysicsSystem(this.el.object3D);\n    this.constraintsSystem = new ConstraintsSystem(this.physicsSystem);\n    this.twoPointStretchingSystem = new TwoPointStretchingSystem();\n    this.singleActionButtonSystem = new SingleActionButtonSystem();\n    this.holdableButtonSystem = new HoldableButtonSystem();\n    this.hoverButtonSystem = new HoverButtonSystem();\n    this.hoverMenuSystem = new HoverMenuSystem();\n    this.hapticFeedbackSystem = new HapticFeedbackSystem();\n    this.soundEffectsSystem = new SoundEffectsSystem(this.el);\n    this.scenePreviewCameraSystem = new ScenePreviewCameraSystem();\n    this.spriteSystem = new SpriteSystem(this.el);\n    this.batchManagerSystem = new BatchManagerSystem(this.el.object3D, this.el.renderer);\n    this.cameraSystem = new CameraSystem(this.batchManagerSystem);\n    this.drawingMenuSystem = new DrawingMenuSystem(this.el);\n    this.characterController = new CharacterControllerSystem(this.el);\n    this.waypointSystem = new WaypointSystem(this.el, this.characterController);\n    this.cursorPoseTrackingSystem = new CursorPoseTrackingSystem();\n    this.scaleInScreenSpaceSystem = new ScaleInScreenSpaceSystem();\n    this.audioSettingsSystem = new AudioSettingsSystem(this.el);\n  },\n\n  tick(t, dt) {\n    if (!this.DOMContentDidLoad) return;\n    const systems = AFRAME.scenes[0].systems;\n    systems.userinput.tick2();\n    systems.interaction.tick2();\n    this.characterController.tick(t, dt);\n    this.cursorTogglingSystem.tick(systems.interaction, systems.userinput, this.el);\n    this.interactionSfxSystem.tick(systems.interaction, systems.userinput, this.soundEffectsSystem);\n    this.superSpawnerSystem.tick();\n    this.cursorPoseTrackingSystem.tick();\n    this.cursorTargettingSystem.tick(t);\n    this.scaleInScreenSpaceSystem.tick();\n    this.constraintsSystem.tick();\n    this.twoPointStretchingSystem.tick();\n    this.singleActionButtonSystem.tick();\n    this.holdableButtonSystem.tick();\n    this.hoverButtonSystem.tick();\n    this.drawingMenuSystem.tick();\n    this.hoverMenuSystem.tick();\n    this.hapticFeedbackSystem.tick(\n      this.twoPointStretchingSystem,\n      this.singleActionButtonSystem.didInteractLeftThisFrame,\n      this.singleActionButtonSystem.didInteractRightThisFrame\n    );\n    this.soundEffectsSystem.tick();\n    this.scenePreviewCameraSystem.tick();\n    this.physicsSystem.tick(dt);\n    this.spriteSystem.tick(t, dt);\n    this.batchManagerSystem.tick(t);\n    this.cameraSystem.tick(this.el, dt);\n    this.waypointSystem.tick(t, dt);\n  },\n\n  remove() {\n    this.cursorTargettingSystem.remove();\n  }\n});\n","import qsTruthy from \"../utils/qs_truthy\";\n\nAFRAME.registerSystem(\"capture-system\", {\n  init() {\n    this._gotAudioTrack = false;\n    this._recorderTimeout = null;\n  },\n\n  _initRecorder() {\n    if (!this.available()) return;\n\n    this._stream = new MediaStream();\n\n    const video = this.el.canvas.captureStream().getVideoTracks()[0];\n    this._stream.addTrack(video);\n\n    this._recorder = new MediaRecorder(this._stream, { mimeType: \"video/webm; codecs=vp8\" });\n\n    const chunks = [];\n\n    this._recorder.ondataavailable = e => {\n      chunks.push(e.data);\n    };\n    this._recorder.onstop = () => {\n      if (chunks.length === 0) return;\n      const mimeType = chunks[0].type;\n      const blob = new Blob(chunks, { type: mimeType });\n      chunks.length = 0;\n      this.el.emit(\"add_media\", new File([blob], \"capture\", { type: mimeType }));\n    };\n  },\n\n  available() {\n    return qsTruthy(\"video_capture\") && window.MediaRecorder && MediaRecorder.isTypeSupported(\"video/webm; codecs=vp8\");\n  },\n\n  started() {\n    return this._recorder && this._recorder.state !== \"inactive\";\n  },\n\n  _tryAddingAudioTrack() {\n    if (this._gotAudioTrack || !this.el.audioListener) return;\n\n    const listener = this.el.audioListener;\n    const destination = listener.context.createMediaStreamDestination();\n    listener.getInput().connect(destination);\n    const audio = destination.stream.getAudioTracks()[0];\n\n    this._stream.addTrack(audio);\n    this._gotAudioTrack = true;\n  },\n\n  start() {\n    if (!this._recorder) {\n      this._initRecorder();\n    }\n\n    // The scene doesn't get an audioListener until something in the scene is playing audio.\n    // So we have to get the audio track lazily.\n    this._tryAddingAudioTrack();\n\n    if (!this.started()) {\n      this._recorder.start();\n      this._recorderTimeout = setTimeout(() => {\n        if (this.started()) {\n          this._recorder.stop();\n        }\n      }, 15000);\n    }\n  },\n\n  stop() {\n    if (this.started()) {\n      clearTimeout(this._recorderTimeout);\n      this._recorder.stop();\n    }\n  }\n});\n","import { paths } from \"../systems/userinput/paths\";\n\nAFRAME.registerComponent(\"scalable-when-grabbed\", {\n  tick: function() {\n    const userinput = AFRAME.scenes[0].systems.userinput;\n    const interaction = AFRAME.scenes[0].systems.interaction;\n    let deltaScale;\n    if (interaction.state.rightRemote.held === this.el) {\n      deltaScale = userinput.get(paths.actions.cursor.right.scaleGrabbedGrabbable);\n    }\n    if (interaction.state.leftRemote.held === this.el) {\n      deltaScale = userinput.get(paths.actions.cursor.left.scaleGrabbedGrabbable);\n    }\n    if (!deltaScale) return;\n\n    this.el.object3D.scale.addScalar(deltaScale).clampScalar(0.1, 100);\n    this.el.object3D.matrixNeedsUpdate = true;\n  }\n});\n","import { paths } from \"../systems/userinput/paths\";\nimport { sets } from \"../systems/userinput/sets\";\nimport { getLastWorldPosition } from \"../utils/three-utils\";\n\nconst HIGHLIGHT = new THREE.Color(23 / 255, 64 / 255, 118 / 255);\nconst NO_HIGHLIGHT = new THREE.Color(190 / 255, 190 / 255, 190 / 255);\nconst TRANSFORM_COLOR_1 = new THREE.Color(150 / 255, 80 / 255, 150 / 255);\nconst TRANSFORM_COLOR_2 = new THREE.Color(23 / 255, 64 / 255, 118 / 255);\nAFRAME.registerComponent(\"cursor-controller\", {\n  schema: {\n    cursor: { type: \"selector\" },\n    camera: { type: \"selector\" },\n    far: { default: 100 },\n    near: { default: 0.01 },\n    defaultDistance: { default: 4 },\n    minDistance: { default: 0.18 }\n  },\n\n  init: function() {\n    this.enabled = false;\n\n    this.data.cursor.addEventListener(\n      \"loaded\",\n      () => {\n        this.data.cursor.object3DMap.mesh.renderOrder = window.APP.RENDER_ORDER.CURSOR;\n      },\n      { once: true }\n    );\n\n    this.intersection = null;\n    this.raycaster = new THREE.Raycaster();\n    this.raycaster.firstHitOnly = true; // flag specific to three-mesh-bvh\n    this.distance = this.data.far;\n    this.color = new THREE.Color(0, 0, 0);\n\n    const lineGeometry = new THREE.BufferGeometry();\n    lineGeometry.addAttribute(\"position\", new THREE.BufferAttribute(new Float32Array(2 * 3), 3));\n\n    this.line = new THREE.Line(\n      lineGeometry,\n      new THREE.LineBasicMaterial({\n        color: \"white\",\n        opacity: 0.2,\n        transparent: true,\n        visible: false\n      })\n    );\n    this.el.setObject3D(\"line\", this.line);\n  },\n\n  update: function() {\n    this.raycaster.far = this.data.far;\n    this.raycaster.near = this.data.near;\n  },\n\n  tick2: (() => {\n    const rawIntersections = [];\n    const cameraPos = new THREE.Vector3();\n    const v = new THREE.Vector3();\n\n    return function(t, left) {\n      const userinput = AFRAME.scenes[0].systems.userinput;\n      const cursorPose = userinput.get(left ? paths.actions.cursor.left.pose : paths.actions.cursor.right.pose);\n      const hideLine = userinput.get(left ? paths.actions.cursor.left.hideLine : paths.actions.cursor.right.hideLine);\n\n      this.data.cursor.object3D.visible = this.enabled && !!cursorPose;\n      this.line.material.visible = !!(this.enabled && !hideLine);\n\n      this.intersection = null;\n\n      if (!this.enabled || !cursorPose) {\n        return;\n      }\n\n      this.el.sceneEl.systems[\"hubs-systems\"].characterController.avatarPOV.object3D.updateMatrices();\n      const playerScale = v\n        .setFromMatrixColumn(\n          this.el.sceneEl.systems[\"hubs-systems\"].characterController.avatarPOV.object3D.matrixWorld,\n          1\n        )\n        .length();\n      this.raycaster.far = this.data.far * playerScale;\n      this.raycaster.near = this.data.near * playerScale;\n\n      const interaction = AFRAME.scenes[0].systems.interaction;\n      const isGrabbing = left ? !!interaction.state.leftRemote.held : !!interaction.state.rightRemote.held;\n      if (!isGrabbing) {\n        rawIntersections.length = 0;\n        this.raycaster.ray.origin = cursorPose.position;\n        this.raycaster.ray.direction = cursorPose.direction;\n        this.raycaster.intersectObjects(\n          AFRAME.scenes[0].systems[\"hubs-systems\"].cursorTargettingSystem.targets,\n          true,\n          rawIntersections\n        );\n        this.intersection = rawIntersections[0];\n        this.intersectionIsValid = !!interaction.updateCursorIntersection(this.intersection, left);\n        this.distance = this.intersectionIsValid ? this.intersection.distance : this.data.defaultDistance * playerScale;\n      }\n\n      const { cursor, minDistance, far, camera } = this.data;\n\n      const cursorModDelta =\n        userinput.get(left ? paths.actions.cursor.left.modDelta : paths.actions.cursor.right.modDelta) || 0;\n      if (isGrabbing && !userinput.activeSets.includes(left ? sets.leftCursorHoldingUI : sets.rightCursorHoldingUI)) {\n        this.distance = THREE.Math.clamp(this.distance - cursorModDelta, minDistance, far * playerScale);\n      }\n      cursor.object3D.position.copy(cursorPose.position).addScaledVector(cursorPose.direction, this.distance);\n      // The cursor will always be oriented towards the player about its Y axis, so objects held by the cursor will rotate towards the player.\n      getLastWorldPosition(camera.object3D, cameraPos);\n      cameraPos.y = cursor.object3D.position.y;\n      cursor.object3D.lookAt(cameraPos);\n      cursor.object3D.matrixNeedsUpdate = true;\n\n      // TODO : Check if the selected object being transformed is for this cursor!\n      const transformObjectSystem = AFRAME.scenes[0].systems[\"transform-selected-object\"];\n      if (\n        transformObjectSystem.transforming &&\n        ((left && transformObjectSystem.hand.el.id === \"player-left-controller\") ||\n          (!left && transformObjectSystem.hand.el.id === \"player-right-controller\"))\n      ) {\n        this.color.copy(TRANSFORM_COLOR_1).lerpHSL(TRANSFORM_COLOR_2, 0.5 + 0.5 * Math.sin(t / 1000.0));\n      } else if (this.intersectionIsValid || isGrabbing) {\n        this.color.copy(HIGHLIGHT);\n      } else {\n        this.color.copy(NO_HIGHLIGHT);\n      }\n\n      if (!this.data.cursor.object3DMap.mesh.material.color.equals(this.color)) {\n        this.data.cursor.object3DMap.mesh.material.color.copy(this.color);\n        this.data.cursor.object3DMap.mesh.material.needsUpdate = true;\n      }\n\n      if (this.line.material.visible) {\n        const posePosition = cursorPose.position;\n        const cursorPosition = cursor.object3D.position;\n        const positionArray = this.line.geometry.attributes.position.array;\n\n        positionArray[0] = posePosition.x;\n        positionArray[1] = posePosition.y;\n        positionArray[2] = posePosition.z;\n        positionArray[3] = cursorPosition.x;\n        positionArray[4] = cursorPosition.y;\n        positionArray[5] = cursorPosition.z;\n\n        this.line.geometry.attributes.position.needsUpdate = true;\n        this.line.geometry.computeBoundingSphere();\n      }\n    };\n  })()\n});\n","import { paths } from \"../../systems/userinput/paths\";\nimport { getLastWorldPosition, getLastWorldQuaternion } from \"../../utils/three-utils\";\nimport {\n  SOUND_PEN_START_DRAW,\n  SOUND_PEN_STOP_DRAW,\n  SOUND_PEN_UNDO_DRAW,\n  SOUND_PEN_CHANGE_COLOR\n} from \"../../systems/sound-effects-system\";\nimport { waitForDOMContentLoaded } from \"../../utils/async-utils\";\nimport MobileStandardMaterial from \"../../materials/MobileStandardMaterial\";\n\nconst pathsMap = {\n  \"player-right-controller\": {\n    startDrawing: paths.actions.rightHand.startDrawing,\n    stopDrawing: paths.actions.rightHand.stopDrawing,\n    undoDrawing: paths.actions.rightHand.undoDrawing,\n    switchDrawMode: paths.actions.rightHand.switchDrawMode,\n    penNextColor: paths.actions.rightHand.penNextColor,\n    penPrevColor: paths.actions.rightHand.penPrevColor,\n    scalePenTip: paths.actions.rightHand.scalePenTip\n  },\n  \"player-left-controller\": {\n    startDrawing: paths.actions.leftHand.startDrawing,\n    stopDrawing: paths.actions.leftHand.stopDrawing,\n    undoDrawing: paths.actions.leftHand.undoDrawing,\n    switchDrawMode: paths.actions.leftHand.switchDrawMode,\n    penNextColor: paths.actions.leftHand.penNextColor,\n    penPrevColor: paths.actions.leftHand.penPrevColor,\n    scalePenTip: paths.actions.leftHand.scalePenTip\n  },\n  \"right-cursor\": {\n    pose: paths.actions.cursor.right.pose,\n    startDrawing: paths.actions.cursor.right.startDrawing,\n    stopDrawing: paths.actions.cursor.right.stopDrawing,\n    undoDrawing: paths.actions.cursor.right.undoDrawing,\n    penNextColor: paths.actions.cursor.right.penNextColor,\n    penPrevColor: paths.actions.cursor.right.penPrevColor,\n    scalePenTip: paths.actions.cursor.right.scalePenTip\n  },\n  \"left-cursor\": {\n    pose: paths.actions.cursor.left.pose,\n    startDrawing: paths.actions.cursor.left.startDrawing,\n    stopDrawing: paths.actions.cursor.left.stopDrawing,\n    undoDrawing: paths.actions.cursor.left.undoDrawing,\n    penNextColor: paths.actions.cursor.left.penNextColor,\n    penPrevColor: paths.actions.cursor.left.penPrevColor,\n    scalePenTip: paths.actions.cursor.left.scalePenTip\n  }\n};\n\nconst DRAW_MODE = {\n  DEFAULT_3D: 0,\n  PROJECTION: 1\n};\n\nconst MAX_DISTANCE_BETWEEN_SURFACES = 1;\n\n/**\n * Pen tool\n * A tool that allows drawing on networked-drawing components.\n * @namespace drawing\n * @component pen\n */\n\nfunction almostEquals(epsilon, u, v) {\n  return Math.abs(u.x - v.x) < epsilon && Math.abs(u.y - v.y) < epsilon && Math.abs(u.z - v.z) < epsilon;\n}\n\nAFRAME.registerComponent(\"pen\", {\n  schema: {\n    drawFrequency: { default: 5 }, //frequency of polling for drawing points\n    minDistanceBetweenPoints: { default: 0.01 }, //minimum distance to register new drawing point\n    camera: { type: \"selector\" },\n    drawingManager: { type: \"string\" },\n    color: { type: \"color\", default: \"#FF0033\" },\n    availableColors: {\n      default: [\n        \"#FF0033\",\n        \"#FFFF00\",\n        \"#0099FF\",\n        \"#00FF33\",\n        \"#9900FF\",\n        \"#FF6600\",\n        \"#8D5524\",\n        \"#C68642\",\n        \"#E0AC69\",\n        \"#F1C27D\",\n        \"#FFDBAC\",\n        \"#FFFFFF\",\n        \"#222222\",\n        \"#111111\",\n        \"#000000\"\n      ]\n    },\n    radius: { default: 0.01 }, //drawing geometry radius\n    minRadius: { default: 0.005 },\n    maxRadius: { default: 0.2 },\n    far: { default: 100 },\n    near: { default: 0.01 },\n    drawMode: { default: DRAW_MODE.DEFAULT_3D, oneOf: [DRAW_MODE.DEFAULT_3D, DRAW_MODE.PROJECTION] },\n    penVisible: { default: true },\n    penTipPosition: { default: { x: 0, y: 0, z: 0 } }\n  },\n\n  init() {\n    this.timeSinceLastDraw = 0;\n\n    this.lastPosition = new THREE.Vector3();\n    this.lastPosition.copy(this.el.object3D.position);\n\n    this.direction = new THREE.Vector3(1, 0, 0);\n\n    this.currentDrawing = null;\n\n    this.normal = new THREE.Vector3();\n\n    this.worldPosition = new THREE.Vector3();\n\n    this.colorIndex = 0;\n\n    this.grabbed = false;\n\n    this.raycaster = new THREE.Raycaster();\n    this.raycaster.firstHitOnly = true; // flag specific to three-mesh-bvh\n\n    this.originalPosition = this.el.object3D.position.clone();\n    this.lastIntersectionDistance = 0;\n\n    this.targets = [];\n    this.setDirty = this.setDirty.bind(this);\n    this.dirty = true;\n\n    let material = new THREE.MeshStandardMaterial();\n    if (window.APP && window.APP.quality === \"low\") {\n      material = MobileStandardMaterial.fromStandardMaterial(material);\n    }\n    this.penTip = new THREE.Mesh(new THREE.SphereBufferGeometry(1, 16, 12), material);\n    this.penTip.scale.setScalar(this.data.radius / this.el.parentEl.object3D.scale.x);\n    this.penTip.matrixNeedsUpdate = true;\n\n    this.el.setObject3D(\"mesh\", this.penTip);\n\n    const environmentMapComponent = this.el.sceneEl.components[\"environment-map\"];\n    if (environmentMapComponent) {\n      environmentMapComponent.applyEnvironmentMap(this.el.parentEl.object3D);\n    }\n\n    this.penLaserAttributesUpdated = false;\n    this.penLaserAttributes = {\n      color: \"#FF0033\",\n      laserVisible: false,\n      laserInHand: false,\n      laserOrigin: { x: 0, y: 0, z: 0 },\n      remoteLaserOrigin: { x: 0, y: 0, z: 0 },\n      laserTarget: { x: 0, y: 0, z: 0 }\n    };\n\n    // TODO: Use the MutationRecords passed into the callback function to determine added/removed nodes!\n    this.observer = new MutationObserver(this.setDirty);\n\n    waitForDOMContentLoaded().then(() => {\n      const scene = document.querySelector(\"a-scene\");\n      this.observer.observe(scene, { childList: true, attributes: true, subtree: true });\n      scene.addEventListener(\"object3dset\", this.setDirty);\n      scene.addEventListener(\"object3dremove\", this.setDirty);\n    });\n  },\n\n  play() {\n    this.drawingManager = document.querySelector(this.data.drawingManager).components[\"drawing-manager\"];\n  },\n\n  update(prevData) {\n    if (prevData.color != this.data.color) {\n      this.penTip.material.color.set(this.data.color);\n      this.penLaserAttributes.color = this.data.color;\n      this.el.setAttribute(\"pen-laser\", { color: this.data.color });\n    }\n    if (prevData.radius != this.data.radius) {\n      this.el.setAttribute(\"radius\", this.data.radius);\n    }\n\n    this.raycaster.far = this.data.far;\n    this.raycaster.near = this.data.near;\n  },\n\n  tick(t, dt) {\n    const isMine = this.el.parentEl.components.networked.initialized && this.el.parentEl.components.networked.isMine();\n\n    if (this.penTip.material.visible !== isMine) {\n      this.penTip.material.visible = isMine;\n    }\n\n    if (isMine) {\n      this._handleInput();\n\n      const cursorPose =\n        this.data.drawMode === DRAW_MODE.PROJECTION &&\n        (this.grabberId === \"right-cursor\" || this.grabberId === \"left-cursor\")\n          ? AFRAME.scenes[0].systems.userinput.get(pathsMap[this.grabberId].pose)\n          : null;\n\n      const intersection = this._getIntersection(cursorPose);\n\n      this._updatePenTip(intersection);\n\n      const laserVisible = this.data.drawMode === DRAW_MODE.PROJECTION && !!intersection;\n      const laserInHand = this.el.sceneEl.is(\"vr-mode\") && laserVisible;\n\n      if (this.penLaserAttributes.laserVisible !== laserVisible) {\n        this.penLaserAttributes.laserVisible = laserVisible;\n        this.penLaserAttributesUpdated = true;\n      }\n\n      if (this.penLaserAttributes.laserInHand !== laserInHand) {\n        this.penLaserAttributes.laserInHand = laserInHand;\n        this.penLaserAttributesUpdated = true;\n      }\n\n      if (laserVisible) {\n        this._updateLaser(cursorPose, intersection);\n      }\n\n      const penVisible = (this.grabberId !== \"left-cursor\" && this.grabberId !== \"right-cursor\") || !intersection;\n      this._setPenVisible(penVisible);\n      this.el.setAttribute(\"pen\", { penVisible: penVisible });\n\n      this._doDraw(intersection, dt);\n\n      if (this.penLaserAttributesUpdated) {\n        this.penLaserAttributesUpdated = false;\n        this.el.setAttribute(\"pen-laser\", this.penLaserAttributes, true);\n      }\n    } else {\n      this._setPenVisible(this.data.penVisible);\n    }\n  },\n\n  _handleInput() {\n    const userinput = AFRAME.scenes[0].systems.userinput;\n    const interaction = AFRAME.scenes[0].systems.interaction;\n\n    if (interaction.state.rightHand.held === this.el.parentNode) {\n      this.grabberId = \"player-right-controller\";\n    } else if (interaction.state.leftHand.held === this.el.parentNode) {\n      this.grabberId = \"player-left-controller\";\n    } else if (interaction.state.rightRemote.held === this.el.parentNode) {\n      this.grabberId = \"right-cursor\";\n      this.data.drawMode = DRAW_MODE.PROJECTION;\n    } else if (interaction.state.leftRemote.held === this.el.parentNode) {\n      this.grabberId = \"left-cursor\";\n      this.data.drawMode = DRAW_MODE.PROJECTION;\n    } else {\n      this.grabberId = null;\n    }\n\n    if (this.grabberId && pathsMap[this.grabberId]) {\n      const sfx = this.el.sceneEl.systems[\"hubs-systems\"].soundEffectsSystem;\n      const paths = pathsMap[this.grabberId];\n      if (userinput.get(paths.startDrawing)) {\n        this._startDraw();\n        sfx.playSoundOneShot(SOUND_PEN_START_DRAW);\n      }\n      if (userinput.get(paths.stopDrawing)) {\n        this._endDraw();\n        sfx.playSoundOneShot(SOUND_PEN_STOP_DRAW);\n      }\n      const penScaleMod = userinput.get(paths.scalePenTip);\n      if (penScaleMod) {\n        this._changeRadius(penScaleMod);\n      }\n      if (userinput.get(paths.penNextColor)) {\n        this._changeColor(1);\n        sfx.playSoundOneShot(SOUND_PEN_CHANGE_COLOR);\n      }\n      if (userinput.get(paths.penPrevColor)) {\n        this._changeColor(-1);\n        sfx.playSoundOneShot(SOUND_PEN_CHANGE_COLOR);\n      }\n      if (userinput.get(paths.undoDrawing)) {\n        this._undoDraw();\n        sfx.playSoundOneShot(SOUND_PEN_UNDO_DRAW);\n      }\n      if (paths.switchDrawMode && userinput.get(paths.switchDrawMode)) {\n        this.data.drawMode = this.data.drawMode === DRAW_MODE.DEFAULT_3D ? DRAW_MODE.PROJECTION : DRAW_MODE.DEFAULT_3D;\n      }\n    }\n  },\n\n  _getIntersection: (() => {\n    const rawIntersections = [];\n    const worldQuaternion = new THREE.Quaternion();\n    return function(cursorPose) {\n      rawIntersections.length = 0;\n\n      if (this.data.drawMode === DRAW_MODE.PROJECTION) {\n        if (cursorPose) {\n          this.raycaster.ray.origin.copy(cursorPose.position);\n          this.raycaster.ray.direction.copy(cursorPose.direction);\n        } else if (this.grabberId !== null) {\n          getLastWorldPosition(this.el.parentEl.object3D, this.raycaster.ray.origin);\n          getLastWorldQuaternion(this.el.parentEl.object3D, worldQuaternion);\n          this.raycaster.ray.direction.set(0, -1, 0);\n          this.raycaster.ray.direction.applyQuaternion(worldQuaternion);\n        }\n\n        if (this.grabberId !== null) {\n          this.raycaster.intersectObjects(this.targets, true, rawIntersections);\n          return rawIntersections[0];\n        }\n      }\n\n      return null;\n    };\n  })(),\n\n  _updatePenTip(intersection) {\n    if (this.data.drawMode === DRAW_MODE.PROJECTION) {\n      if (intersection) {\n        this.el.object3D.position.copy(intersection.point);\n\n        this.el.parentEl.object3D.worldToLocal(this.el.object3D.position);\n\n        this.el.object3D.matrixNeedsUpdate = true;\n        this.worldPosition.copy(intersection.point);\n      } else {\n        this.el.object3D.position.copy(this.originalPosition);\n        this.el.object3D.matrixNeedsUpdate = true;\n        getLastWorldPosition(this.el.object3D, this.worldPosition);\n      }\n    } else {\n      this.el.object3D.position.copy(this.originalPosition);\n      this.el.object3D.matrixNeedsUpdate = true;\n      getLastWorldPosition(this.el.object3D, this.worldPosition);\n    }\n  },\n\n  _updateLaser: (() => {\n    const laserStartPosition = new THREE.Vector3();\n    const laserEndPosition = new THREE.Vector3();\n    const camerWorldPosition = new THREE.Vector3();\n    const remoteLaserOrigin = new THREE.Vector3();\n    return function(cursorPose, intersection) {\n      if (cursorPose) {\n        laserStartPosition.copy(cursorPose.position);\n      } else {\n        this.el.parentEl.object3D.getWorldPosition(laserStartPosition);\n      }\n\n      laserEndPosition.copy(intersection.point);\n\n      if (this.el.sceneEl.is(\"vr-mode\")) {\n        remoteLaserOrigin.copy(laserStartPosition);\n      } else {\n        this.data.camera.object3D.getWorldPosition(camerWorldPosition);\n        remoteLaserOrigin\n          .subVectors(laserEndPosition, camerWorldPosition)\n          .normalize()\n          .multiplyScalar(0.5);\n        remoteLaserOrigin.add(camerWorldPosition);\n      }\n\n      if (!almostEquals(0.001, this.penLaserAttributes.laserOrigin, laserStartPosition)) {\n        this.penLaserAttributes.laserOrigin.x = laserStartPosition.x;\n        this.penLaserAttributes.laserOrigin.y = laserStartPosition.y;\n        this.penLaserAttributes.laserOrigin.z = laserStartPosition.z;\n        this.penLaserAttributesUpdated = true;\n      }\n\n      if (!almostEquals(0.001, this.penLaserAttributes.remoteLaserOrigin, remoteLaserOrigin)) {\n        this.penLaserAttributes.remoteLaserOrigin.x = remoteLaserOrigin.x;\n        this.penLaserAttributes.remoteLaserOrigin.y = remoteLaserOrigin.y;\n        this.penLaserAttributes.remoteLaserOrigin.z = remoteLaserOrigin.z;\n        this.penLaserAttributesUpdated = true;\n      }\n\n      if (!almostEquals(0.001, this.penLaserAttributes.laserTarget, laserEndPosition)) {\n        this.penLaserAttributes.laserTarget.x = laserEndPosition.x;\n        this.penLaserAttributes.laserTarget.y = laserEndPosition.y;\n        this.penLaserAttributes.laserTarget.z = laserEndPosition.z;\n        this.penLaserAttributesUpdated = true;\n      }\n    };\n  })(),\n\n  _doDraw(intersection, dt) {\n    //Prevent drawings from \"jumping\" large distances\n    if (\n      this.currentDrawing &&\n      (this.lastIntersectedObject !== (intersection ? intersection.object : null) &&\n        (!intersection ||\n          Math.abs(intersection.distance - this.lastIntersectionDistance) > MAX_DISTANCE_BETWEEN_SURFACES))\n    ) {\n      this.worldPosition.copy(this.lastPosition);\n      this._endDraw();\n    }\n    this.lastIntersectionDistance = intersection ? intersection.distance : 0;\n    this.lastIntersectedObject = intersection ? intersection.object : null;\n\n    if (!almostEquals(0.005, this.worldPosition, this.lastPosition)) {\n      this.direction.subVectors(this.worldPosition, this.lastPosition).normalize();\n      this.lastPosition.copy(this.worldPosition);\n    }\n\n    if (this.currentDrawing) {\n      const time = this.timeSinceLastDraw + dt;\n      if (\n        time >= this.data.drawFrequency &&\n        this.currentDrawing.getLastPoint().distanceTo(this.worldPosition) >= this.data.minDistanceBetweenPoints\n      ) {\n        this._getNormal(this.normal, this.worldPosition, this.direction);\n        this.currentDrawing.draw(this.worldPosition, this.direction, this.normal, this.data.color, this.data.radius);\n      }\n\n      this.timeSinceLastDraw = time % this.data.drawFrequency;\n    }\n\n    if (this.currentDrawing && !this.grabberId) {\n      this._endDraw();\n    }\n\n    if (this.dirty) {\n      this.populateEntities(this.targets);\n      this.dirty = false;\n    }\n  },\n\n  _setPenVisible(visible) {\n    if (this.el.parentEl.object3DMap.mesh && this.el.parentEl.object3DMap.mesh.visible !== visible) {\n      this.el.parentEl.object3DMap.mesh.visible = visible;\n    }\n  },\n\n  //helper function to get normal of direction of drawing cross direction to camera\n  _getNormal: (() => {\n    const directionToCamera = new THREE.Vector3();\n    return function(normal, position, direction) {\n      directionToCamera.subVectors(position, this.data.camera.object3D.position).normalize();\n      normal.crossVectors(direction, directionToCamera);\n    };\n  })(),\n\n  _startDraw() {\n    this.drawingManager.getDrawing(this).then(drawing => {\n      this.currentDrawing = drawing;\n      this._getNormal(this.normal, this.worldPosition, this.direction);\n      this.currentDrawing.startDraw(this.worldPosition, this.direction, this.normal, this.data.color, this.data.radius);\n    });\n  },\n\n  _endDraw() {\n    if (this.currentDrawing) {\n      this.timeSinceLastDraw = 0;\n      this._getNormal(this.normal, this.worldPosition, this.direction);\n      this.currentDrawing.endDraw(this.worldPosition, this.direction, this.normal);\n      this.drawingManager.returnDrawing(this);\n      this.currentDrawing = null;\n    }\n  },\n\n  _undoDraw() {\n    this.drawingManager.getDrawing(this).then(drawing => {\n      drawing.undoDraw();\n      this.drawingManager.returnDrawing(this);\n    });\n  },\n\n  _changeColor(mod) {\n    this.colorIndex = (this.colorIndex + mod + this.data.availableColors.length) % this.data.availableColors.length;\n    this.data.color = this.data.availableColors[this.colorIndex];\n    this.penTip.material.color.set(this.data.color);\n    this.penLaserAttributes.color = this.data.color;\n    this.penLaserAttributesUpdated = true;\n  },\n\n  _changeRadius(mod) {\n    this.data.radius = Math.max(this.data.minRadius, Math.min(this.data.radius + mod, this.data.maxRadius));\n    this.penTip.scale.setScalar(this.data.radius / this.el.parentEl.object3D.scale.x);\n    this.penTip.matrixNeedsUpdate = true;\n  },\n\n  setDirty() {\n    this.dirty = true;\n  },\n\n  populateEntities(targets) {\n    targets.length = 0;\n    // TODO: Do not querySelectorAll on the entire scene every time anything changes!\n    const els = AFRAME.scenes[0].querySelectorAll(\".collidable, .interactable, #environment-root\");\n    for (let i = 0; i < els.length; i++) {\n      if (!els[i].classList.contains(\"pen\") && els[i].object3D) {\n        targets.push(els[i].object3D);\n      }\n    }\n  },\n\n  remove() {\n    this.observer.disconnect();\n    AFRAME.scenes[0].removeEventListener(\"object3dset\", this.setDirty);\n    AFRAME.scenes[0].removeEventListener(\"object3dremove\", this.setDirty);\n  }\n});\n","const InterpolationBuffer = require(\"buffered-interpolation\");\nimport MobileStandardMaterial from \"../../materials/MobileStandardMaterial\";\n\nfunction almostEquals(epsilon, u, v) {\n  return Math.abs(u.x - v.x) < epsilon && Math.abs(u.y - v.y) < epsilon && Math.abs(u.z - v.z) < epsilon;\n}\n\nAFRAME.registerComponent(\"pen-laser\", {\n  schema: {\n    color: { type: \"color\", default: \"#FF0033\" },\n    laserVisible: { default: false },\n    laserInHand: { default: false },\n    laserOrigin: { default: { x: 0, y: 0, z: 0 } },\n    remoteLaserOrigin: { default: { x: 0, y: 0, z: 0 } },\n    laserTarget: { default: { x: 0, y: 0, z: 0 } }\n  },\n\n  init() {\n    let material = new THREE.MeshStandardMaterial({ color: \"red\", opacity: 0.5, transparent: true, visible: true });\n    if (window.APP && window.APP.quality === \"low\") {\n      material = MobileStandardMaterial.fromStandardMaterial(material);\n    }\n\n    const tipMaterial = material.clone();\n\n    const lineCurve = new THREE.LineCurve3(new THREE.Vector3(0, 0, 0), new THREE.Vector3(0, 0, 2));\n    const geometry = new THREE.TubeBufferGeometry(lineCurve, 2, 0.003, 8, true);\n    this.laser = new THREE.Mesh(geometry, material);\n\n    this.laserTip = new THREE.Mesh(new THREE.SphereBufferGeometry(1, 8, 6), tipMaterial);\n    this.laserTip.scale.setScalar(0.01);\n    this.laserTip.matrixNeedsUpdate = true;\n\n    const environmentMapComponent = this.el.sceneEl.components[\"environment-map\"];\n    if (environmentMapComponent) {\n      environmentMapComponent.applyEnvironmentMap(this.laser);\n      environmentMapComponent.applyEnvironmentMap(this.laserTip);\n    }\n\n    //prevents the line from being a raycast target for the cursor\n    this.laser.raycast = function() {};\n\n    this.el.sceneEl.setObject3D(`pen-laser-${this.laser.uuid}`, this.laser);\n    this.el.sceneEl.setObject3D(`pen-laser-tip-${this.laser.uuid}`, this.laserTip);\n\n    this.originBuffer = new InterpolationBuffer(InterpolationBuffer.MODE_LERP, 0.1);\n    this.targetBuffer = new InterpolationBuffer(InterpolationBuffer.MODE_LERP, 0.1);\n  },\n\n  update: (() => {\n    const originBufferPosition = new THREE.Vector3();\n    const targetBufferPosition = new THREE.Vector3();\n\n    return function(prevData) {\n      if (prevData.color != this.data.color) {\n        this.laser.material.color.set(this.data.color);\n        this.laserTip.material.color.set(this.data.color);\n      }\n\n      if (prevData.remoteLaserOrigin && !almostEquals(0.001, prevData.remoteLaserOrigin, this.data.remoteLaserOrigin)) {\n        this.originBuffer.setPosition(\n          originBufferPosition.set(\n            this.data.remoteLaserOrigin.x,\n            this.data.remoteLaserOrigin.y,\n            this.data.remoteLaserOrigin.z\n          )\n        );\n      }\n\n      if (prevData.laserTarget && !almostEquals(0.001, prevData.laserTarget, this.data.laserTarget)) {\n        this.targetBuffer.setPosition(\n          targetBufferPosition.set(this.data.laserTarget.x, this.data.laserTarget.y, this.data.laserTarget.z)\n        );\n      }\n    };\n  })(),\n\n  tick: (() => {\n    const origin = new THREE.Vector3();\n    const target = new THREE.Vector3();\n    return function(t, dt) {\n      const isMine =\n        this.el.parentEl.components.networked.initialized && this.el.parentEl.components.networked.isMine();\n      let laserVisible = false;\n\n      if (isMine && this.data.laserVisible) {\n        origin.copy(this.data.laserOrigin);\n\n        if (!this.data.laserInHand) {\n          // On 2d mode, shift downards\n          origin.y = origin.y - 0.4;\n        }\n\n        target.copy(this.data.laserTarget);\n        laserVisible = true;\n      } else if (!isMine && this.data.laserVisible) {\n        this.originBuffer.update(dt);\n        this.targetBuffer.update(dt);\n        origin.copy(this.originBuffer.getPosition());\n        target.copy(this.targetBuffer.getPosition());\n        laserVisible = true;\n      }\n\n      if (laserVisible) {\n        this.laser.position.copy(origin);\n        this.laser.lookAt(target);\n        this.laser.scale.set(1, 1, origin.distanceTo(target));\n        this.laser.matrixNeedsUpdate = true;\n        this.laserTip.position.copy(target);\n        this.laserTip.matrixNeedsUpdate = true;\n      }\n\n      if (this.laser.material.visible !== laserVisible) {\n        this.laser.material.visible = laserVisible;\n      }\n\n      const laserTipVisible = laserVisible ? !(isMine && this.data.laserVisible) : false;\n      if (this.laserTip.material.visible !== laserTipVisible) {\n        this.laserTip.material.visible = laserTipVisible;\n      }\n    };\n  })(),\n\n  remove() {\n    this.el.sceneEl.removeObject3D(`pen-laser-${this.laser.uuid}`);\n    this.el.sceneEl.removeObject3D(`pen-laser-tip-${this.laser.uuid}`);\n  }\n});\n","export default class SharedBufferGeometry {\n  constructor(material, primitiveMode, maxBufferSize) {\n    this.material = material;\n    this.primitiveMode = primitiveMode;\n\n    this.maxBufferSize = maxBufferSize;\n    this.geometries = [];\n    this.current = null;\n    this.drawing = new THREE.Object3D();\n    this.addBuffer();\n  }\n\n  restartPrimitive() {\n    if (this.idx.position >= this.current.attributes.position.count) {\n      console.error(\"maxBufferSize limit exceeded\");\n    } else if (this.idx.position !== 0) {\n      let prev = (this.idx.position - 1) * 3;\n      const position = this.current.attributes.position.array;\n      this.addVertex(position[prev++], position[prev++], position[prev++]);\n\n      this.idx.color++;\n      this.idx.normal++;\n    }\n  }\n\n  remove(prevIdx, idx) {\n    // Loop through all the attributes: position, color, normal,...\n    if (this.idx.position > idx.position) {\n      for (const key in this.idx) {\n        const componentSize = 3;\n        let pos = prevIdx[key] * componentSize;\n        const start = (idx[key] + 1) * componentSize;\n        const end = this.idx[key] * componentSize;\n        for (let i = start; i < end; i++) {\n          this.current.attributes[key].array[pos++] = this.current.attributes[key].array[i];\n        }\n        const diff = idx[key] - prevIdx[key] + 1;\n        this.idx[key] -= diff;\n      }\n    } else {\n      for (const key in this.idx) {\n        const diff = idx[key] - prevIdx[key];\n        this.idx[key] -= diff;\n      }\n    }\n\n    this.update();\n  }\n\n  undo(prevIdx) {\n    this.idx = prevIdx;\n    this.update();\n  }\n\n  addBuffer() {\n    const geometry = new THREE.BufferGeometry();\n\n    const vertices = new Float32Array(this.maxBufferSize * 3);\n    const normals = new Float32Array(this.maxBufferSize * 3);\n    const colors = new Float32Array(this.maxBufferSize * 3);\n\n    const mesh = new THREE.Mesh(geometry, this.material);\n\n    mesh.drawMode = this.primitiveMode;\n\n    mesh.frustumCulled = false;\n    mesh.vertices = vertices;\n\n    const object3D = new THREE.Object3D();\n    this.drawing.add(object3D);\n    object3D.add(mesh);\n\n    geometry.setDrawRange(0, 0);\n    geometry.addAttribute(\"position\", new THREE.BufferAttribute(vertices, 3).setDynamic(true));\n    geometry.addAttribute(\"normal\", new THREE.BufferAttribute(normals, 3).setDynamic(true));\n    geometry.addAttribute(\"color\", new THREE.BufferAttribute(colors, 3).setDynamic(true));\n\n    this.previous = null;\n    if (this.geometries.length > 0) {\n      this.previous = this.current;\n    }\n\n    this.idx = {\n      position: 0,\n      normal: 0,\n      color: 0\n    };\n\n    this.geometries.push(geometry);\n    this.current = geometry;\n  }\n\n  addColor(r, g, b) {\n    this.current.attributes.color.setXYZ(this.idx.color++, r, g, b);\n  }\n\n  addNormal(x, y, z) {\n    this.current.attributes.normal.setXYZ(this.idx.normal++, x, y, z);\n  }\n\n  addVertex(x, y, z) {\n    const buffer = this.current.attributes.position;\n    if (this.idx.position === buffer.count) {\n      console.error(\"maxBufferSize limit exceeded\");\n    }\n    buffer.setXYZ(this.idx.position++, x, y, z);\n  }\n\n  update() {\n    this.current.setDrawRange(0, this.idx.position);\n\n    this.current.attributes.color.needsUpdate = true;\n    this.current.attributes.normal.needsUpdate = true;\n    this.current.attributes.position.needsUpdate = true;\n  }\n\n  computeBoundingSpheres() {\n    for (let i = 0; i < this.geometries.length; i++) {\n      this.geometries[i].computeBoundingSphere();\n    }\n  }\n}\n","import SharedBufferGeometry from \"./sharedbuffergeometry\";\n\nexport default class SharedBufferGeometryManager {\n  constructor() {\n    this.sharedBuffers = {};\n  }\n\n  addSharedBuffer(name, material, primitiveMode, maxBufferSize) {\n    this.sharedBuffers[name] = new SharedBufferGeometry(material, primitiveMode, maxBufferSize);\n  }\n\n  getSharedBuffer(name) {\n    return this.sharedBuffers[name];\n  }\n}\n","/* global THREE */\n/**\n * Networked Drawing\n * Creates procedurally generated 'lines' (or tubes) that are networked.\n * @namespace drawing\n * @component networked-drawing\n */\n\nimport SharedBufferGeometryManager from \"../../utils/sharedbuffergeometrymanager\";\nimport MobileStandardMaterial from \"../../materials/MobileStandardMaterial\";\nimport { GLTFExporter } from \"three/examples/jsm/exporters/GLTFExporter\";\nimport { addMedia, addMeshScaleAnimation } from \"../../utils/media-utils\";\nimport { ObjectContentOrigins } from \"../../object-types\";\nimport { SOUND_PEN_START_DRAW } from \"../../systems/sound-effects-system\";\n\nconst MSG_CONFIRM_CONNECT = 0;\nconst MSG_BUFFER_DATA = 1;\nconst MSG_BUFFER_DATA_FULL = 2;\n\nfunction copyData(fromArray, toArray, fromIndex, toIndex) {\n  let i = fromIndex - 1;\n  let j = -1;\n  while (i + 1 <= toIndex) {\n    toArray[++j] = fromArray[++i];\n  }\n}\n\nAFRAME.registerComponent(\"networked-drawing\", {\n  schema: {\n    segments: { default: 8 }, //the number of \"sides\" the procedural tube should have\n    defaultRadius: { default: 0.01 }, //the radius of the procedural tube\n    maxDrawTimeout: { default: 600000 }, //the maximum time a drawn line will live\n    maxLines: { default: 50 }, //how many lines can persist before lines older than minDrawTime are removed\n    maxPointsPerLine: { default: 250 } //the max number of points a single line can have\n  },\n\n  init() {\n    this._receiveData = this._receiveData.bind(this);\n\n    this.networkBuffer = [];\n\n    this.sendNetworkBufferQueue = [];\n\n    this.drawStarted = false;\n    this.lineStarted = false;\n    this.remoteLineStarted = false;\n\n    this.receivedBufferParts = 0;\n    this.bufferIndex = 0;\n    this.connectedToOwner = false;\n    this.networkBufferInitialized = false;\n\n    const options = {\n      vertexColors: THREE.VertexColors\n    };\n\n    this.color = new THREE.Color();\n    this.radius = this.data.defaultRadius;\n    this.segments = this.data.segments;\n\n    let material = new THREE.MeshStandardMaterial(options);\n    if (window.APP && window.APP.quality === \"low\") {\n      material = MobileStandardMaterial.fromStandardMaterial(material);\n    }\n\n    this.sharedBufferGeometryManager = new SharedBufferGeometryManager();\n    // NOTE: 20 is approximate for how many floats per point are added.\n    // maxLines + 1 because a line can be currently drawing while at maxLines.\n    // Multiply by 1/3 (0.333) because 3 floats per vertex (x, y, z).\n    const maxBufferSize = Math.round(this.data.maxPointsPerLine * 20 * (this.data.maxLines + 1) * 0.333);\n    this.sharedBufferGeometryManager.addSharedBuffer(0, material, THREE.TriangleStripDrawMode, maxBufferSize);\n\n    this.lastPoint = new THREE.Vector3();\n\n    this.lastSegments = [];\n    this.currentSegments = [];\n    for (let x = 0; x < this.segments; x++) {\n      this.lastSegments[x] = {\n        position: new THREE.Vector3(),\n        normal: new THREE.Vector3()\n      };\n      this.currentSegments[x] = {\n        position: new THREE.Vector3(),\n        normal: new THREE.Vector3()\n      };\n    }\n\n    this.sharedBuffer = this.sharedBufferGeometryManager.getSharedBuffer(0);\n    this.drawing = this.sharedBuffer.drawing;\n\n    this.el.setObject3D(\"mesh\", this.drawing);\n\n    const environmentMapComponent = this.el.sceneEl.components[\"environment-map\"];\n    if (environmentMapComponent) {\n      environmentMapComponent.applyEnvironmentMap(this.drawing);\n    }\n\n    this.prevIdx = Object.assign({}, this.sharedBuffer.idx);\n    this.idx = Object.assign({}, this.sharedBuffer.idx);\n    this.vertexCount = 0; //number of vertices added for current line (used for line deletion).\n    this.networkBufferCount = 0; //number of items added to networkBuffer for current line (used for line deletion).\n    this.currentPointCount = 0; //number of points added for current line (used for maxPointsPerLine).\n    this.invalidPointRead = false; //flag flipped if we read a bad point anywhere during this line\n    this.lastReadPointCount = 0; //last read point count read off of the network, used for sanity checking\n    this.networkBufferHistory = []; //tracks vertexCount and networkBufferCount so that lines can be deleted.\n\n    NAF.connection.onConnect(() => {\n      NAF.utils.getNetworkedEntity(this.el).then(networkedEl => {\n        this.networkedEl = networkedEl;\n        this.networkId = NAF.utils.getNetworkId(this.networkedEl);\n        this.drawingId = \"drawing-\" + this.networkId;\n        NAF.connection.subscribeToDataChannel(this.drawingId, this._receiveData);\n      });\n    });\n  },\n\n  play() {\n    AFRAME.scenes[0].systems[\"hubs-systems\"].drawingMenuSystem.registerDrawingMenu(this.el);\n  },\n\n  remove() {\n    NAF.connection.unsubscribeToDataChannel(this.drawingId, this._receiveData);\n\n    this.drawStarted = false;\n\n    this.el.removeObject3D(\"mesh\");\n\n    const drawingManager = this.el.sceneEl.querySelector(\"#drawing-manager\").components[\"drawing-manager\"];\n    drawingManager.destroyDrawing(this);\n\n    AFRAME.scenes[0].systems[\"hubs-systems\"].drawingMenuSystem.unregisterDrawingMenu(this.el);\n  },\n\n  tick(t) {\n    const connected = NAF.connection.isConnected() && this.networkedEl;\n    const isMine = connected && NAF.utils.isMine(this.networkedEl);\n\n    if (!this.connectedToOwner && connected) {\n      const owner = NAF.utils.getNetworkOwner(this.networkedEl);\n      if (!isMine && NAF.connection.hasActiveDataChannel(owner)) {\n        NAF.connection.sendDataGuaranteed(owner, this.drawingId, {\n          type: MSG_CONFIRM_CONNECT,\n          clientId: NAF.clientId\n        });\n        this.connectedToOwner = true;\n      }\n    }\n\n    if (this.networkBuffer.length > 0 && connected) {\n      if (!isMine) {\n        this._drawFromNetwork();\n      } else if (this.bufferIndex < this.networkBuffer.length) {\n        this._broadcastDrawing();\n      }\n    }\n\n    //TODO: handle possibility that a clientId gets stuck in sendNetworkBufferQueue\n    //if that client disconnects before this executes and an activeDataChannel is opened.\n    if (isMine && this.sendNetworkBufferQueue.length > 0) {\n      const connected = [];\n      for (let i = 0; i < this.sendNetworkBufferQueue.length; i++) {\n        if (NAF.connection.hasActiveDataChannel(this.sendNetworkBufferQueue[i])) {\n          connected.push(this.sendNetworkBufferQueue[i]);\n        }\n      }\n      for (let j = 0; j < connected.length; j++) {\n        const pos = this.sendNetworkBufferQueue.indexOf(connected[j]);\n        this._sendNetworkBuffer(connected[j]);\n        this.sendNetworkBufferQueue.splice(pos, 1);\n      }\n    }\n\n    this._deleteExpiredLines(t);\n  },\n\n  async serializeDrawing() {\n    const exporter = new GLTFExporter();\n\n    const material = new THREE.MeshStandardMaterial({\n      vertexColors: THREE.VertexColors\n    });\n    const geometry = this.convertToTriangles(this.sharedBuffer.current);\n    const mesh = new THREE.Mesh(geometry, material);\n\n    mesh.userData.gltfExtensions = {\n      MOZ_hubs_components: { \"networked-drawing-buffer\": { buffer: this.networkBuffer } }\n    };\n\n    const chunks = await new Promise(resolve => {\n      exporter.parseChunks(\n        mesh,\n        resolve,\n        e => {\n          new Error(`Error serializing drawing. ${e}`);\n        },\n        {\n          mode: \"glb\",\n          includeCustomExtensions: true\n        }\n      );\n    });\n\n    const json = chunks.json;\n    if (!json.extensions) {\n      json.extensions = {};\n    }\n    json.extensions.MOZ_hubs_components = { version: 4 };\n    json.asset.generator = `Mozilla Hubs Serialize Drawing`;\n\n    const glb = await new Promise((resolve, reject) => {\n      exporter.createGLBBlob(chunks, resolve, e => {\n        reject(new Error(`Error creating glb blob. ${e}`));\n      });\n    });\n\n    const file = new File([glb], \"drawing.glb\", {\n      type: \"model/gltf-binary\"\n    });\n\n    const { entity } = addMedia(file, \"#interactable-media\", ObjectContentOrigins.FILE, \"drawing\", false, false);\n\n    const min = new THREE.Vector3(Number.POSITIVE_INFINITY, Number.POSITIVE_INFINITY, Number.POSITIVE_INFINITY);\n    const max = new THREE.Vector3(Number.NEGATIVE_INFINITY, Number.NEGATIVE_INFINITY, Number.NEGATIVE_INFINITY);\n    const temp = new THREE.Vector3();\n\n    const { start, count } = this.sharedBuffer.current.drawRange;\n    const attribute = this.sharedBuffer.current.attributes.position;\n    for (let i = start; i < count; i++) {\n      temp.set(attribute.getX(i), attribute.getY(i), attribute.getZ(i));\n      min.min(temp);\n      max.max(temp);\n    }\n\n    entity.object3D.position.addVectors(min, max).multiplyScalar(0.5);\n    entity.object3D.matrixNeedsUpdate = true;\n  },\n\n  convertToTriangles(originalGeometry) {\n    const geometry = new THREE.BufferGeometry();\n\n    const { start, count } = originalGeometry.drawRange;\n\n    const originalPositions = originalGeometry.getAttribute(\"position\");\n    const originalColors = originalGeometry.getAttribute(\"color\");\n    const originalNormals = originalGeometry.getAttribute(\"normal\");\n\n    const length = count * 3;\n    const positions = new Float32Array(length);\n    const colors = new Float32Array(length);\n    const normals = new Float32Array(length);\n    const indices = [];\n\n    let index = 0;\n    let order = 0;\n\n    const copy = i => {\n      colors[index] = originalColors.getX(i);\n      normals[index] = originalNormals.getX(i);\n      positions[index] = originalPositions.getX(i);\n      index++;\n      colors[index] = originalColors.getY(i);\n      normals[index] = originalNormals.getY(i);\n      positions[index] = originalPositions.getY(i);\n      index++;\n      colors[index] = originalColors.getZ(i);\n      normals[index] = originalNormals.getZ(i);\n      positions[index] = originalPositions.getZ(i);\n      index++;\n    };\n\n    for (let i = start; i < count - 2; i++) {\n      const i2 = i + 1 + order;\n      const i3 = i + 2 - order;\n\n      if (i === 0) {\n        copy(i);\n        copy(i2);\n        copy(i3);\n      } else if (i2 > i3) {\n        copy(i2);\n      } else {\n        copy(i3);\n      }\n\n      indices.push(i, i2, i3);\n      order = (order + 1) % 2;\n    }\n\n    geometry.addAttribute(\"position\", new THREE.BufferAttribute(positions, 3));\n    geometry.addAttribute(\"color\", new THREE.BufferAttribute(colors, 3));\n    geometry.addAttribute(\"normal\", new THREE.BufferAttribute(normals, 3));\n    geometry.setIndex(indices);\n\n    return geometry;\n  },\n\n  deserializeDrawing: (() => {\n    const position = new THREE.Vector3();\n    const direction = new THREE.Vector3();\n    const normal = new THREE.Vector3();\n    return function(buffer) {\n      let head = buffer[0];\n      if (head === \"-\") {\n        this._undoDraw();\n        buffer.shift();\n        head = buffer[0];\n      }\n\n      while (head != null && buffer.length >= 11) {\n        position.set(buffer[1], buffer[2], buffer[3]);\n        direction.set(buffer[4], buffer[5], buffer[6]);\n        this.radius = Math.round(direction.length() * 1000) / 1000; //radius is encoded as length of direction vector\n        direction.normalize();\n        normal.set(buffer[7], buffer[8], buffer[9]);\n        this.color.setHex(Math.round(normal.length()) - 1); //color is encoded as length of normal vector\n        normal.normalize();\n\n        buffer.splice(0, 10);\n\n        if (!this.drawStarted) {\n          this.startDraw(position, direction, normal);\n        } else if (buffer[0] !== null) {\n          this.draw(position, direction, normal);\n        }\n\n        if (buffer[0] === null) {\n          this.endDraw(position, direction, normal);\n          buffer.shift();\n        }\n      }\n    };\n  })(),\n\n  _broadcastDrawing: (() => {\n    const copyArray = [];\n    return function() {\n      copyArray.length = 0;\n      copyData(this.networkBuffer, copyArray, this.bufferIndex, this.networkBuffer.length - 1);\n\n      //remove undo's from networkBuffer after they've been sent so that\n      //newly joining clients don't get them\n      let index = -1;\n      while ((index = this.networkBuffer.indexOf(\"-\")) != -1) {\n        this.networkBuffer.splice(index, 1);\n      }\n      this.bufferIndex = this.networkBuffer.length;\n      NAF.connection.broadcastDataGuaranteed(this.drawingId, { type: MSG_BUFFER_DATA, buffer: copyArray });\n    };\n  })(),\n\n  _drawFromNetwork: (() => {\n    const position = new THREE.Vector3();\n    const direction = new THREE.Vector3();\n    const normal = new THREE.Vector3();\n    return function() {\n      let head = this.networkBuffer[0];\n      if (head === \"-\") {\n        this._undoDraw();\n        this.networkBuffer.shift();\n        head = this.networkBuffer[0];\n      }\n      let didWork = false;\n      while (head != null && this.networkBuffer.length >= 11) {\n        const pointCount = this.networkBuffer[0];\n\n        // This is a sanity check against the sequence number to help uncover remaining bugs.\n        // If the point is out-of-order, report the error and stop drawing this line.\n        if (pointCount !== this.lastReadPointCount + 1) {\n          this.invalidPointRead = true;\n\n          console.error(\n            `Draw networking error: ID ${this.drawingId} expected point ${this.lastReadPointCount +\n              1} but received ${pointCount}`\n          );\n        }\n\n        this.lastReadPointCount = pointCount;\n        position.set(this.networkBuffer[1], this.networkBuffer[2], this.networkBuffer[3]);\n        direction.set(this.networkBuffer[4], this.networkBuffer[5], this.networkBuffer[6]);\n        this.radius = Math.round(direction.length() * 1000) / 1000; //radius is encoded as length of direction vector\n        direction.normalize();\n        normal.set(this.networkBuffer[7], this.networkBuffer[8], this.networkBuffer[9]);\n        this.color.setHex(Math.round(normal.length()) - 1); //color is encoded as length of normal vector\n        normal.normalize();\n\n        this.networkBuffer.splice(0, 10);\n\n        if (!this.remoteLineStarted) {\n          this.startDraw(position, direction, normal);\n          this.remoteLineStarted = true;\n        }\n\n        if (this.networkBuffer[0] === null) {\n          if (!this.invalidPointRead) {\n            this._endDraw(position, direction, normal);\n          }\n\n          this.remoteLineStarted = false;\n          this.networkBuffer.shift();\n          this.lastReadPointCount = 0;\n          this.invalidPointRead = false;\n        } else {\n          if (!this.invalidPointRead) {\n            this._draw(position, direction, normal);\n            didWork = true;\n          }\n        }\n      }\n      if (didWork) this._updateBuffer();\n    };\n  })(),\n\n  _deleteExpiredLines(time) {\n    const length = this.networkBufferHistory.length;\n    if (length > 0) {\n      const drawTime = this.networkBufferHistory[0].time;\n      if (length > this.data.maxLines || drawTime + this.data.maxDrawTimeout <= time) {\n        const datum = this.networkBufferHistory[0];\n        if (length > 1) {\n          datum.idxLength += 2 - (this.segments % 2); //account for extra verts added for degenerate triangles\n          this.networkBufferHistory[1].idxLength -= 2 - (this.segments % 2);\n        }\n        this.idx.position = datum.idxLength;\n        this.idx.uv = datum.idxLength;\n        this.idx.normal = datum.idxLength;\n        this.idx.color = datum.idxLength;\n        this.sharedBuffer.remove(this.prevIdx, this.idx);\n        this.networkBufferHistory.shift();\n        if (this.networkedEl && NAF.utils.isMine(this.networkedEl)) {\n          this.networkBuffer.splice(0, datum.networkBufferCount);\n          this.bufferIndex -= datum.networkBufferCount;\n        }\n      }\n    }\n  },\n\n  _sendNetworkBuffer: (() => {\n    const copyArray = [];\n    //This number needs to be approx. < ~6000 based on napkin math\n    //see: https://github.com/webrtc/adapter/blob/682e0f2439e139da6c0c406370eae820637b8sc1a/src/js/common_shim.js#L157\n    const chunkAmount = 3000;\n    return function(clientId) {\n      if (NAF.utils.isMine(this.networkedEl)) {\n        if (this.networkBuffer.length <= chunkAmount) {\n          NAF.connection.sendDataGuaranteed(clientId, this.drawingId, {\n            type: MSG_BUFFER_DATA_FULL,\n            parts: 1,\n            buffer: this.networkBuffer\n          });\n        } else {\n          let start = 0;\n          let end = 0;\n          while (end < this.networkBuffer.length) {\n            end = Math.min(end + chunkAmount, this.networkBuffer.length);\n            copyArray.length = 0;\n            copyData(this.networkBuffer, copyArray, start, end - 1);\n            start = end;\n            NAF.connection.sendDataGuaranteed(clientId, this.drawingId, {\n              type: MSG_BUFFER_DATA_FULL,\n              parts: Math.ceil(this.networkBuffer.length / chunkAmount),\n              buffer: copyArray\n            });\n          }\n        }\n      }\n    };\n  })(),\n\n  _receiveData(_, dataType, data) {\n    switch (data.type) {\n      case MSG_CONFIRM_CONNECT:\n        this.sendNetworkBufferQueue.push(data.clientId);\n        break;\n      case MSG_BUFFER_DATA:\n        if (this.networkBufferInitialized) {\n          this.networkBuffer.push.apply(this.networkBuffer, data.buffer);\n        }\n        break;\n      case MSG_BUFFER_DATA_FULL:\n        this.networkBuffer.push.apply(this.networkBuffer, data.buffer);\n        if (++this.receivedBufferParts >= data.parts) {\n          this.networkBufferInitialized = true;\n        }\n        break;\n    }\n  },\n\n  getLastPoint() {\n    return this.lastPoint;\n  },\n\n  startDraw(position, direction, normal, color, radius) {\n    if (!NAF.connection.isConnected()) {\n      return;\n    }\n\n    this.drawStarted = true;\n\n    if (color) {\n      this.color.set(color);\n    }\n    if (radius) this.radius = radius;\n\n    this.lastPoint.copy(position);\n    this._addToNetworkBuffer(position, direction, normal);\n  },\n\n  draw(position, direction, normal, color, radius) {\n    if (!NAF.connection.isConnected() || !this.drawStarted) {\n      return;\n    }\n\n    if (color && color != \"#\" + this.color.getHexString().toUpperCase()) {\n      this.color.set(color);\n    }\n    if (radius) this.radius = radius;\n\n    this._addToNetworkBuffer(position, direction, normal);\n    this._draw(position, direction, normal);\n\n    this._updateBuffer();\n  },\n\n  _draw: (() => {\n    const capNormal = new THREE.Vector3();\n    return function(position, direction, normal, radiusMultiplier = 1.0) {\n      if (!this.lineStarted) {\n        this._generateSegments(this.lastSegments, position, direction, normal, this.radius * radiusMultiplier);\n\n        if (this.networkBufferHistory.length === 0) {\n          //start with CW faceculling order\n          this._addDegenerateTriangle();\n        } else {\n          //only do the following if the sharedBuffer is not empty\n          this._restartPrimitive();\n          this._addDegenerateTriangle();\n          if (this.segments % 2 === 0) {\n            //flip faceculling order if even numbered segments\n            this._addDegenerateTriangle();\n          }\n        }\n\n        //get normal for tip of cap\n        capNormal.copy(direction).negate();\n        //get normals for rim of cap\n        for (let i = 0; i < this.segments; i++) {\n          this.lastSegments[i].normal.add(capNormal).multiplyScalar(0.5);\n        }\n\n        this._drawCap(this.lastPoint, this.lastSegments, capNormal);\n        if (this.segments % 2 !== 0) {\n          //flip faceculling order if odd numbered segments\n          this._addDegenerateTriangle();\n        }\n\n        this.lineStarted = true;\n      } else {\n        this._generateSegments(this.currentSegments, position, direction, normal, this.radius * radiusMultiplier);\n        this._drawCylinder();\n\n        if (this.currentPointCount > this.data.maxPointsPerLine) {\n          this._drawEndCap(position, direction);\n          this._endLine();\n        }\n      }\n      this.lastPoint.copy(position);\n    };\n  })(),\n\n  undoDraw() {\n    if (!NAF.connection.isConnected() || this.drawStarted) {\n      return;\n    }\n    this._undoDraw();\n    this._pushToNetworkBuffer(\"-\");\n  },\n\n  _undoDraw() {\n    const length = this.networkBufferHistory.length;\n    if (length > 0) {\n      const datum = this.networkBufferHistory.pop();\n      this.idx.position = 0;\n      this.idx.uv = 0;\n      this.idx.normal = 0;\n      this.idx.color = 0;\n      if (length > 1) {\n        datum.idxLength += 1 - (this.segments % 2); //account for extra verts added for degenerate triangles\n        this.idx.position = this.sharedBuffer.idx.position - datum.idxLength;\n        this.idx.uv = this.sharedBuffer.idx.uv - datum.idxLength;\n        this.idx.normal = this.sharedBuffer.idx.normal - datum.idxLength;\n        this.idx.color = this.sharedBuffer.idx.color - datum.idxLength;\n      }\n      this.sharedBuffer.remove(this.idx, this.sharedBuffer.idx);\n      if (this.networkedEl && NAF.utils.isMine(this.networkedEl)) {\n        this.networkBuffer.splice(this.networkBuffer.length - datum.networkBufferCount, datum.networkBufferCount);\n        this.bufferIndex -= datum.networkBufferCount;\n      }\n    }\n  },\n\n  endDraw(position, direction, normal) {\n    this._endDraw(position, direction, normal);\n    this._updateBuffer();\n  },\n\n  _endDraw(position, direction, normal) {\n    if (!this.lineStarted && this.drawStarted) {\n      this._drawPoint(position);\n    } else if (this.lineStarted && this.drawStarted) {\n      this._addToNetworkBuffer(position, direction, normal);\n      this._draw(position, direction, normal);\n      this._drawEndCap(position, direction);\n    }\n    this._endLine();\n  },\n\n  _drawEndCap: (() => {\n    const projectedDirection = new THREE.Vector3();\n    const projectedPoint = new THREE.Vector3();\n    return function(position, direction) {\n      if (this.lineStarted && this.drawStarted) {\n        projectedDirection.copy(direction).multiplyScalar(this.radius);\n        projectedPoint.copy(position).add(projectedDirection);\n        this._addDegenerateTriangle(); //flip faceculling order before drawing end-cap\n        this._drawCap(projectedPoint, this.lastSegments, direction);\n      }\n    };\n  })(),\n\n  _endLine() {\n    if (!this.drawStarted) return;\n\n    if (this.networkedEl && NAF.utils.isMine(this.networkedEl)) this._pushToNetworkBuffer(null);\n\n    const datum = {\n      networkBufferCount: this.networkBufferCount,\n      idxLength: this.vertexCount - 1,\n      time: this.el.sceneEl.clock.elapsedTime * 1000\n    };\n    this.networkBufferHistory.push(datum);\n    this.vertexCount = 0;\n    this.networkBufferCount = 0;\n    this.currentPointCount = 0;\n    this.lineStarted = false;\n    this.drawStarted = false;\n\n    this.sharedBuffer.computeBoundingSpheres();\n  },\n\n  _addToNetworkBuffer: (() => {\n    const copyDirection = new THREE.Vector3();\n    const copyNormal = new THREE.Vector3();\n    return function(position, direction, normal) {\n      if (this.networkedEl && NAF.utils.isMine(this.networkedEl)) {\n        ++this.currentPointCount;\n        this._pushToNetworkBuffer(this.currentPointCount);\n        this._pushToNetworkBuffer(position.x);\n        this._pushToNetworkBuffer(position.y);\n        this._pushToNetworkBuffer(position.z);\n        copyDirection.copy(direction);\n        copyDirection.setLength(this.radius); //encode radius as length of direction vector\n        this._pushToNetworkBuffer(copyDirection.x);\n        this._pushToNetworkBuffer(copyDirection.y);\n        this._pushToNetworkBuffer(copyDirection.z);\n        copyNormal.copy(normal);\n        copyNormal.setLength(this.color.getHex() + 1); //encode color as length, add one in case color is black\n        this._pushToNetworkBuffer(copyNormal.x);\n        this._pushToNetworkBuffer(copyNormal.y);\n        this._pushToNetworkBuffer(copyNormal.z);\n      }\n    };\n  })(),\n\n  _pushToNetworkBuffer(val) {\n    //don't increment networkBufferCount if undo, because the undo character\n    //will be removed in tick() on the next frame\n    if (val !== \"-\") {\n      ++this.networkBufferCount;\n    }\n    this.networkBuffer.push(val);\n  },\n\n  //draw a cylinder from last to current segments\n  _drawCylinder() {\n    //average the normals with the normals from the lastSegment\n    //not a perfect normal calculation, but works well enough\n    for (let i = 0; i < this.segments; i++) {\n      this.currentSegments[i].normal.add(this.lastSegments[i].normal).multiplyScalar(0.5);\n    }\n\n    for (let i = 0; i != this.segments + 1; i++) {\n      this._addVertex(this.lastSegments[i % this.segments]);\n      this._addVertex(this.currentSegments[i % this.segments]);\n    }\n\n    for (let i = 0; i < this.segments; i++) {\n      this.lastSegments[i].position.copy(this.currentSegments[i].position);\n      this.lastSegments[i].normal.copy(this.currentSegments[i].normal);\n    }\n  },\n\n  //draw a standalone point in space\n  _drawPoint: (() => {\n    const up = new THREE.Vector3(0, 1, 0);\n    const down = new THREE.Vector3(0, -1, 0);\n    const left = new THREE.Vector3(1, 0, 0);\n    const projectedDirection = new THREE.Vector3();\n    const projectedPoint = new THREE.Vector3();\n    return function(position) {\n      projectedDirection.copy(up).multiplyScalar(this.radius * 0.75);\n      projectedPoint.copy(position).add(projectedDirection);\n      this.lastPoint.copy(projectedPoint);\n\n      projectedDirection.copy(up).multiplyScalar(this.radius * 0.5);\n      projectedPoint.copy(position).add(projectedDirection);\n      this._draw(projectedPoint, down, left, 0.75);\n\n      this._draw(position, down, left);\n\n      projectedDirection.copy(down).multiplyScalar(this.radius * 0.5);\n      projectedPoint.copy(position).add(projectedDirection);\n      this._draw(projectedPoint, down, left, 0.75);\n\n      projectedDirection.copy(down).multiplyScalar(this.radius * 0.75);\n      projectedPoint.copy(position).add(projectedDirection);\n\n      this._addDegenerateTriangle(); //discarded\n      this._drawCap(projectedPoint, this.lastSegments, down);\n    };\n  })(),\n\n  //draw a cap to start/end a line\n  _drawCap(point, segments, normal) {\n    let segmentIndex = 0;\n    for (let i = 0; i < this.segments * 2 - (this.segments % 2); i++) {\n      if ((i - 2) % 4 === 0) {\n        this._addVertex({ position: point, normal: normal });\n      } else {\n        this._addVertex(segments[segmentIndex % this.segments]);\n        if ((i + 1) % 5 !== 0) {\n          ++segmentIndex;\n        }\n      }\n    }\n  },\n\n  _restartPrimitive() {\n    this.sharedBuffer.restartPrimitive();\n    ++this.vertexCount;\n  },\n\n  _updateBuffer() {\n    this.sharedBuffer.update();\n  },\n\n  _addVertex(segment) {\n    const point = segment.position;\n    const normal = segment.normal;\n    this.sharedBuffer.addVertex(point.x, point.y, point.z);\n    this.sharedBuffer.addColor(this.color.r, this.color.g, this.color.b);\n\n    if (normal) {\n      this.sharedBuffer.addNormal(normal.x, normal.y, normal.z);\n    } else {\n      ++this.sharedBuffer.idx.normal;\n    }\n\n    ++this.sharedBuffer.idx.uv;\n    ++this.vertexCount;\n  },\n\n  _addDegenerateTriangle() {\n    this._addVertex(this.lastSegments[0]);\n  },\n\n  //calculate the segments for a given point\n  _generateSegments(segmentsList, point, forward, up, radius) {\n    const angleIncrement = (Math.PI * 2) / this.segments;\n    for (let i = 0; i < this.segments; i++) {\n      const segment = segmentsList[i].position;\n      this._rotatePointAroundAxis(segment, point, forward, up, angleIncrement * i, radius);\n      segmentsList[i].normal.subVectors(segment, point).normalize();\n    }\n  },\n\n  _rotatePointAroundAxis: (() => {\n    const calculatedDirection = new THREE.Vector3();\n    return function(out, point, axis, up, angle, radius) {\n      calculatedDirection.copy(up);\n      calculatedDirection.applyAxisAngle(axis, angle);\n      out.copy(point).add(calculatedDirection.normalize().multiplyScalar(radius));\n    };\n  })()\n});\n\nAFRAME.registerComponent(\"networked-drawing-buffer\", {\n  schema: {\n    buffer: { default: [] }\n  },\n\n  play() {\n    const button = this._getDeserializeButton(this.el.parentEl);\n    if (button) {\n      button.object3D.visible = true;\n      button.components[\"deserialize-drawing-button\"].networkedDrawingBuffer = this;\n    }\n  },\n\n  _getDeserializeButton(entity) {\n    if (entity.classList.contains(\"interactable\")) {\n      return entity.querySelector(\".deserialize-drawing\");\n    } else if (entity.parentEl) {\n      return this._getDeserializeButton(entity.parentEl);\n    } else {\n      return null;\n    }\n  }\n});\n\nAFRAME.registerComponent(\"deserialize-drawing-button\", {\n  init() {\n    const drawingManager = this.el.sceneEl.querySelector(\"#drawing-manager\").components[\"drawing-manager\"];\n    this.networkedDrawingBuffer = null;\n\n    this.onClick = () => {\n      if (!NAF.utils.isMine(this.targetEl) && !NAF.utils.takeOwnership(this.targetEl)) return;\n\n      const finishDrawing = () => {\n        drawingManager.drawing.deserializeDrawing(this.networkedDrawingBuffer.data.buffer);\n        addMeshScaleAnimation(drawingManager.drawing.el.object3DMap.mesh, { x: 0.001, y: 0.001, z: 0.001 });\n\n        if (this.targetEl.components.pinnable && this.targetEl.components.pinnable.data.pinned) {\n          this.targetEl.setAttribute(\"pinnable\", \"pinned\", false);\n        }\n        this.targetEl.parentEl.removeChild(this.targetEl);\n        this.el.sceneEl.systems[\"hubs-systems\"].soundEffectsSystem.playSoundOneShot(SOUND_PEN_START_DRAW);\n      };\n\n      //serialize any existing drawing and clear the drawing.\n      if (drawingManager.drawing) {\n        drawingManager.drawing.serializeDrawing().then(() => {\n          drawingManager.drawing.el.parentEl.removeChild(drawingManager.drawing.el);\n          drawingManager.destroyDrawing();\n\n          drawingManager.createDrawing().then(finishDrawing);\n        });\n      } else {\n        drawingManager.createDrawing().then(finishDrawing);\n      }\n    };\n\n    this._updateUI = this._updateUI.bind(this);\n    this._updateUIOnStateChange = this._updateUIOnStateChange.bind(this);\n    this.el.sceneEl.addEventListener(\"stateadded\", this._updateUIOnStateChange);\n    this.el.sceneEl.addEventListener(\"stateremoved\", this._updateUIOnStateChange);\n\n    NAF.utils.getNetworkedEntity(this.el).then(networkedEl => {\n      this.targetEl = networkedEl;\n      this._updateUI();\n      this.targetEl.addEventListener(\"pinned\", this._updateUI);\n      this.targetEl.addEventListener(\"unpinned\", this._updateUI);\n    });\n  },\n\n  play() {\n    this.el.object3D.addEventListener(\"interact\", this.onClick);\n  },\n\n  pause() {\n    this.el.object3D.removeEventListener(\"interact\", this.onClick);\n  },\n\n  remove() {\n    this.el.sceneEl.removeEventListener(\"stateadded\", this._updateUIOnStateChange);\n    this.el.sceneEl.removeEventListener(\"stateremoved\", this._updateUIOnStateChange);\n\n    if (this.targetEl) {\n      this.targetEl.removeEventListener(\"pinned\", this._updateUI);\n      this.targetEl.removeEventListener(\"unpinned\", this._updateUI);\n    }\n  },\n\n  _updateUIOnStateChange(e) {\n    if (e.detail !== \"frozen\") return;\n    this._updateUI();\n  },\n\n  _updateUI() {\n    if (this.networkedDrawingBuffer) {\n      const isPinned = this.targetEl.components.pinnable && this.targetEl.components.pinnable.data.pinned;\n      const canPin = window.APP.hubChannel.can(\"pin_objects\") && window.APP.hubChannel.signedIn;\n      this.el.object3D.visible = (!isPinned || canPin) && window.APP.hubChannel.can(\"spawn_drawing\");\n    } else {\n      this.el.object3D.visible = false;\n    }\n  }\n});\n","import { Body } from \"three-ammo\";\nimport { ACTIVATION_STATE, TYPE } from \"three-ammo/constants\";\n\nconst ACTIVATION_STATES = [\n  ACTIVATION_STATE.ACTIVE_TAG,\n  ACTIVATION_STATE.ISLAND_SLEEPING,\n  ACTIVATION_STATE.WANTS_DEACTIVATION,\n  ACTIVATION_STATE.DISABLE_DEACTIVATION,\n  ACTIVATION_STATE.DISABLE_SIMULATION\n];\n\nAFRAME.registerComponent(\"body-helper\", {\n  schema: {\n    loadedEvent: { default: \"\" },\n    mass: { default: 1 },\n    gravity: { type: \"vec3\", default: { x: 0, y: -9.8, z: 0 } },\n    linearDamping: { default: 0.01 },\n    angularDamping: { default: 0.01 },\n    linearSleepingThreshold: { default: 1.6 },\n    angularSleepingThreshold: { default: 2.5 },\n    angularFactor: { type: \"vec3\", default: { x: 1, y: 1, z: 1 } },\n    activationState: {\n      default: ACTIVATION_STATE.ACTIVE_TAG,\n      oneOf: ACTIVATION_STATES\n    },\n    type: { default: \"dynamic\", oneOf: [TYPE.STATIC, TYPE.DYNAMIC, TYPE.KINEMATIC] },\n    emitCollisionEvents: { default: false },\n    disableCollision: { default: false },\n    collisionFilterGroup: { default: 1 }, //32-bit mask,\n    collisionFilterMask: { default: 1 }, //32-bit mask\n    scaleAutoUpdate: { default: true }\n  },\n\n  init: function() {\n    this.system = this.el.sceneEl.systems[\"hubs-systems\"].physicsSystem;\n    this.alive = true;\n    this.system.registerBodyHelper(this);\n  },\n\n  init2: function() {\n    this.body = new Body(this.data, this.el.object3D, this.system.world);\n    this.system.addBody(this.body);\n  },\n\n  update: function(prevData) {\n    if (prevData !== null && this.body) {\n      this.body.update(this.data);\n    }\n  },\n\n  remove: function() {\n    if (this.body) {\n      this.system.removeBody(this.body);\n      this.body.destroy();\n      this.body = null;\n    }\n    this.alive = false;\n  }\n});\n","/* global Ammo */\nimport * as threeToAmmo from \"three-to-ammo\";\nimport { SHAPE, FIT } from \"three-ammo/constants\";\n\nAFRAME.registerComponent(\"shape-helper\", {\n  schema: {\n    type: {\n      default: SHAPE.HULL,\n      oneOf: [\n        SHAPE.BOX,\n        SHAPE.CYLINDER,\n        SHAPE.SPHERE,\n        SHAPE.CAPSULE,\n        SHAPE.CONE,\n        SHAPE.HULL,\n        SHAPE.HACD,\n        SHAPE.VHACD,\n        SHAPE.MESH,\n        SHAPE.HEIGHTFIELD\n      ]\n    },\n    fit: { default: FIT.ALL, oneOf: [FIT.ALL, FIT.MANUAL] },\n    halfExtents: { type: \"vec3\", default: { x: 1, y: 1, z: 1 } },\n    minHalfExtent: { default: 0 },\n    maxHalfExtent: { default: Number.POSITIVE_INFINITY },\n    sphereRadius: { default: NaN },\n    cylinderAxis: { default: \"y\", oneOf: [\"x\", \"y\", \"z\"] },\n    margin: { default: 0.01 },\n    offset: { type: \"vec3\", default: { x: 0, y: 0, z: 0 } },\n    orientation: { type: \"vec4\", default: { x: 0, y: 0, z: 0, w: 1 } },\n    heightfieldData: { default: [] },\n    heightfieldDistance: { default: 1 },\n    includeInvisible: { default: false }\n  },\n\n  multiple: true,\n\n  init: function() {\n    this.system = this.el.sceneEl.systems[\"hubs-systems\"].physicsSystem;\n    this.alive = true;\n    this.system.registerShapeHelper(this);\n  },\n\n  init2: function() {\n    this.mesh = null;\n\n    let bodyEl = this.el;\n    this.bodyHelper = bodyEl.components[\"body-helper\"] || null;\n    while (!this.bodyHelper && bodyEl.parentNode != this.el.sceneEl) {\n      bodyEl = bodyEl.parentNode;\n      if (bodyEl.components[\"body-helper\"]) {\n        this.bodyHelper = bodyEl.components[\"body-helper\"];\n      }\n    }\n    if (!this.bodyHelper || !this.bodyHelper.body) {\n      console.warn(\"body not found\");\n      return;\n    }\n    if (this.data.fit !== FIT.MANUAL) {\n      if (!this.el.object3DMap.mesh) {\n        console.error(\"Cannot use FIT.ALL without object3DMap.mesh\");\n        return;\n      }\n      this.mesh = this.el.object3DMap.mesh;\n      this.mesh.updateMatrices();\n    }\n\n    this.shapes = threeToAmmo.createCollisionShapes(this.mesh, this.data);\n    for (let i = 0; i < this.shapes.length; i++) {\n      this.bodyHelper.body.addShape(this.shapes[i]);\n    }\n  },\n\n  remove: function() {\n    if (this.shapes) {\n      for (let i = 0; i < this.shapes.length; i++) {\n        if (this.bodyHelper.body) {\n          this.bodyHelper.body.removeShape(this.shapes[i]);\n        }\n        this.shapes[i].destroy();\n        Ammo.destroy(this.shapes[i].localTransform);\n      }\n    }\n    this.shapes = null;\n    this.alive = false;\n  }\n});\n","function registerNetworkSchemas() {\n  const vectorRequiresUpdate = epsilon => {\n    return () => {\n      let prev = null;\n\n      return curr => {\n        if (prev === null) {\n          prev = new THREE.Vector3(curr.x, curr.y, curr.z);\n          return true;\n        } else if (!NAF.utils.almostEqualVec3(prev, curr, epsilon)) {\n          prev.copy(curr);\n          return true;\n        }\n\n        return false;\n      };\n    };\n  };\n\n  // Note: networked template ids are semantically important. We use the template suffix as a filter\n  // for allowing and authorizing messages in reticulum.\n  // See `spawn_permitted?` in https://github.com/mozilla/reticulum/blob/master/lib/ret_web/channels/hub_channel.ex\n\n  // NAF schemas have been extended with a custom nonAuthorizedComponents property that is used to skip authorization\n  // on certain components and properties regardless of hub or user permissions. See permissions-utils.js.\n\n  NAF.schemas.add({\n    template: \"#remote-avatar\",\n    components: [\n      {\n        component: \"position\",\n        requiresNetworkUpdate: vectorRequiresUpdate(0.001)\n      },\n      {\n        component: \"rotation\",\n        requiresNetworkUpdate: vectorRequiresUpdate(0.5)\n      },\n      {\n        component: \"scale\",\n        requiresNetworkUpdate: vectorRequiresUpdate(0.001)\n      },\n      \"player-info\",\n      \"networked-avatar\",\n      {\n        selector: \".camera\",\n        component: \"position\",\n        requiresNetworkUpdate: vectorRequiresUpdate(0.001)\n      },\n      {\n        selector: \".camera\",\n        component: \"rotation\",\n        requiresNetworkUpdate: vectorRequiresUpdate(0.5)\n      },\n      {\n        selector: \".left-controller\",\n        component: \"position\",\n        requiresNetworkUpdate: vectorRequiresUpdate(0.001)\n      },\n      {\n        selector: \".left-controller\",\n        component: \"rotation\",\n        requiresNetworkUpdate: vectorRequiresUpdate(0.5)\n      },\n      {\n        selector: \".left-controller\",\n        component: \"visible\"\n      },\n      {\n        selector: \".right-controller\",\n        component: \"position\",\n        requiresNetworkUpdate: vectorRequiresUpdate(0.001)\n      },\n      {\n        selector: \".right-controller\",\n        component: \"rotation\",\n        requiresNetworkUpdate: vectorRequiresUpdate(0.5)\n      },\n      {\n        selector: \".right-controller\",\n        component: \"visible\"\n      }\n    ]\n  });\n\n  NAF.schemas.add({\n    template: \"#interactable-media\",\n    components: [\n      {\n        component: \"position\",\n        requiresNetworkUpdate: vectorRequiresUpdate(0.001)\n      },\n      {\n        component: \"rotation\",\n        requiresNetworkUpdate: vectorRequiresUpdate(0.5)\n      },\n      {\n        component: \"scale\",\n        requiresNetworkUpdate: vectorRequiresUpdate(0.001)\n      },\n      // TODO: Optimize checking mediaOptions with requiresNetworkUpdate.\n      \"media-loader\",\n      {\n        component: \"media-video\",\n        property: \"time\"\n      },\n      {\n        component: \"media-video\",\n        property: \"videoPaused\"\n      },\n      {\n        component: \"media-pdf\",\n        property: \"index\"\n      },\n      \"pinnable\"\n    ],\n    nonAuthorizedComponents: [\n      {\n        component: \"media-video\",\n        property: \"time\"\n      },\n      {\n        component: \"media-video\",\n        property: \"videoPaused\"\n      },\n      {\n        component: \"media-pager\",\n        property: \"index\"\n      }\n    ]\n  });\n\n  NAF.schemas.add({\n    template: \"#interactable-emoji-media\",\n    components: [\n      {\n        component: \"position\",\n        requiresNetworkUpdate: vectorRequiresUpdate(0.001)\n      },\n      {\n        component: \"rotation\",\n        requiresNetworkUpdate: vectorRequiresUpdate(0.5)\n      },\n      {\n        component: \"emoji\",\n        property: \"emitEndTime\"\n      },\n      {\n        component: \"emoji\",\n        property: \"particleEmitterConfig\"\n      },\n      {\n        component: \"scale\",\n        requiresNetworkUpdate: vectorRequiresUpdate(0.001)\n      },\n      \"media-loader\",\n      \"pinnable\",\n      {\n        selector: \".particle-emitter\",\n        component: \"particle-emitter\"\n      }\n    ]\n  });\n\n  NAF.schemas.add({\n    template: \"#static-media\",\n    components: [\n      // TODO: Optimize checking mediaOptions with requiresNetworkUpdate.\n      \"media-loader\",\n      {\n        component: \"media-video\",\n        property: \"time\"\n      }\n    ],\n    nonAuthorizedComponents: [\n      {\n        component: \"media-video\",\n        property: \"time\"\n      }\n    ]\n  });\n\n  NAF.schemas.add({\n    template: \"#static-controlled-media\",\n    components: [\n      // TODO: Optimize checking mediaOptions with requiresNetworkUpdate.\n      \"media-loader\",\n      {\n        component: \"media-video\",\n        property: \"time\"\n      },\n      {\n        component: \"media-video\",\n        property: \"videoPaused\"\n      },\n      {\n        component: \"media-pdf\",\n        property: \"index\"\n      }\n    ],\n    nonAuthorizedComponents: [\n      {\n        component: \"media-video\",\n        property: \"time\"\n      },\n      {\n        component: \"media-video\",\n        property: \"videoPaused\"\n      },\n      {\n        component: \"media-pager\",\n        property: \"index\"\n      }\n    ]\n  });\n\n  NAF.schemas.add({\n    template: \"#interactable-drawing\",\n    components: [\n      {\n        component: \"position\",\n        requiresNetworkUpdate: vectorRequiresUpdate(0.001)\n      },\n      {\n        component: \"rotation\",\n        requiresNetworkUpdate: vectorRequiresUpdate(0.5)\n      },\n      {\n        component: \"scale\",\n        requiresNetworkUpdate: vectorRequiresUpdate(0.001)\n      },\n      \"networked-drawing\"\n    ]\n  });\n\n  NAF.schemas.add({\n    template: \"#interactable-camera\",\n    components: [\n      \"position\",\n      \"rotation\",\n      {\n        component: \"camera-tool\",\n        property: \"isSnapping\"\n      },\n      {\n        component: \"camera-tool\",\n        property: \"isRecording\"\n      },\n      {\n        component: \"camera-tool\",\n        property: \"label\"\n      }\n    ]\n  });\n\n  NAF.schemas.add({\n    template: \"#template-waypoint-avatar\",\n    components: [\n      {\n        component: \"position\",\n        requiresNetworkUpdate: vectorRequiresUpdate(0.001)\n      },\n      {\n        component: \"rotation\",\n        requiresNetworkUpdate: vectorRequiresUpdate(0.5)\n      },\n      {\n        component: \"scale\",\n        requiresNetworkUpdate: vectorRequiresUpdate(0.001)\n      },\n      \"waypoint\"\n    ],\n    nonAuthorizedComponents: [\n      {\n        component: \"position\",\n        requiresNetworkUpdate: vectorRequiresUpdate(0.001)\n      },\n      {\n        component: \"rotation\",\n        requiresNetworkUpdate: vectorRequiresUpdate(0.5)\n      },\n      {\n        component: \"scale\",\n        requiresNetworkUpdate: vectorRequiresUpdate(0.001)\n      },\n      \"waypoint\"\n    ]\n  });\n\n  NAF.schemas.add({\n    template: \"#interactable-pen\",\n    components: [\n      {\n        component: \"position\",\n        requiresNetworkUpdate: vectorRequiresUpdate(0.001)\n      },\n      {\n        component: \"rotation\",\n        requiresNetworkUpdate: vectorRequiresUpdate(0.5)\n      },\n      {\n        component: \"scale\",\n        requiresNetworkUpdate: vectorRequiresUpdate(0.001)\n      },\n      {\n        selector: \"#pen\",\n        component: \"pen\",\n        property: \"radius\"\n      },\n      {\n        selector: \"#pen\",\n        component: \"pen\",\n        property: \"color\"\n      },\n      {\n        selector: \"#pen\",\n        component: \"pen\",\n        property: \"drawMode\"\n      },\n      {\n        selector: \"#pen\",\n        component: \"pen\",\n        property: \"penVisible\"\n      },\n      {\n        selector: \"#pen\",\n        component: \"pen-laser\",\n        property: \"laserVisible\"\n      },\n      {\n        selector: \"#pen\",\n        component: \"pen-laser\",\n        property: \"remoteLaserOrigin\",\n        requiresNetworkUpdate: vectorRequiresUpdate(0.001)\n      },\n      {\n        selector: \"#pen\",\n        component: \"pen-laser\",\n        property: \"laserTarget\",\n        requiresNetworkUpdate: vectorRequiresUpdate(0.001)\n      }\n    ]\n  });\n}\n\nexport default registerNetworkSchemas;\n","import \"./webxr-bypass-hacks\";\nimport configs from \"./utils/configs\";\nimport \"./utils/theme\";\nimport \"@babel/polyfill\";\nimport \"./utils/debug-log\";\n\nconsole.log(`App version: ${process.env.BUILD_VERSION || \"?\"}`);\n\nimport \"./assets/stylesheets/hub.scss\";\nimport initialBatchImage from \"./assets/images/warning_icon.png\";\nimport loadingEnvironment from \"./assets/models/LoadingEnvironment.glb\";\n\nimport \"aframe\";\nimport \"../../hub.inject.js\";\nimport \"./utils/logging\";\nimport { patchWebGLRenderingContext } from \"./utils/webgl\";\npatchWebGLRenderingContext();\n\nimport \"three/examples/js/loaders/GLTFLoader\";\nimport \"networked-aframe/src/index\";\nimport \"naf-janus-adapter\";\nimport \"aframe-rounded\";\nimport \"webrtc-adapter\";\nimport \"aframe-slice9-component\";\nimport \"./utils/audio-context-fix\";\nimport \"./utils/threejs-positional-audio-updatematrixworld\";\nimport \"./utils/threejs-world-update\";\nimport patchThreeAllocations from \"./utils/threejs-allocation-patches\";\nimport { detectOS } from \"detect-browser\";\nimport {\n  getReticulumFetchUrl,\n  getReticulumMeta,\n  invalidateReticulumMeta,\n  migrateChannelToSocket\n} from \"./utils/phoenix-utils\";\n\nimport nextTick from \"./utils/next-tick\";\nimport { addAnimationComponents } from \"./utils/animation\";\nimport { authorizeOrSanitizeMessage } from \"./utils/permissions-utils\";\nimport Cookies from \"js-cookie\";\n\nimport \"./components/scene-components\";\nimport \"./components/scale-in-screen-space\";\nimport \"./components/mute-mic\";\nimport \"./components/bone-mute-state-indicator\";\nimport \"./components/bone-visibility\";\nimport \"./components/fader\";\nimport \"./components/in-world-hud\";\nimport \"./components/emoji\";\nimport \"./components/emoji-hud\";\nimport \"./components/virtual-gamepad-controls\";\nimport \"./components/ik-controller\";\nimport \"./components/hand-controls2\";\nimport \"./components/hoverable-visuals\";\nimport \"./components/hover-visuals\";\nimport \"./components/offset-relative-to\";\nimport \"./components/player-info\";\nimport \"./components/debug\";\nimport \"./components/hand-poses\";\nimport \"./components/hud-controller\";\nimport \"./components/freeze-controller\";\nimport \"./components/icon-button\";\nimport \"./components/text-button\";\nimport \"./components/block-button\";\nimport \"./components/mute-button\";\nimport \"./components/kick-button\";\nimport \"./components/close-vr-notice-button\";\nimport \"./components/leave-room-button\";\nimport \"./components/visible-if-permitted\";\nimport \"./components/visibility-on-content-types\";\nimport \"./components/hide-when-pinned-and-forbidden\";\nimport \"./components/visibility-while-frozen\";\nimport \"./components/stats-plus\";\nimport \"./components/networked-avatar\";\nimport \"./components/media-views\";\nimport \"./components/avatar-volume-controls\";\nimport \"./components/pinch-to-move\";\nimport \"./components/pitch-yaw-rotator\";\nimport \"./components/position-at-box-shape-border\";\nimport \"./components/pinnable\";\nimport \"./components/pin-networked-object-button\";\nimport \"./components/mirror-media-button\";\nimport \"./components/close-mirrored-media-button\";\nimport \"./components/drop-object-button\";\nimport \"./components/remove-networked-object-button\";\nimport \"./components/camera-focus-button\";\nimport \"./components/unmute-video-button\";\nimport \"./components/destroy-at-extreme-distances\";\nimport \"./components/visible-to-owner\";\nimport \"./components/camera-tool\";\nimport \"./components/emit-state-change\";\nimport \"./components/action-to-event\";\nimport \"./components/action-to-remove\";\nimport \"./components/emit-scene-event-on-remove\";\nimport \"./components/follow-in-fov\";\nimport \"./components/matrix-auto-update\";\nimport \"./components/clone-media-button\";\nimport \"./components/open-media-button\";\nimport \"./components/refresh-media-button\";\nimport \"./components/tweet-media-button\";\nimport \"./components/remix-avatar-button\";\nimport \"./components/transform-object-button\";\nimport \"./components/scale-button\";\nimport \"./components/hover-menu\";\nimport \"./components/disable-frustum-culling\";\nimport \"./components/teleporter\";\nimport \"./components/set-active-camera\";\nimport \"./components/track-pose\";\nimport \"./components/replay\";\nimport \"./components/visibility-by-path\";\nimport \"./components/tags\";\nimport \"./components/hubs-text\";\nimport \"./components/billboard\";\nimport \"./components/periodic-full-syncs\";\nimport \"./components/inspect-button\";\nimport \"./components/set-max-resolution\";\nimport { sets as userinputSets } from \"./systems/userinput/sets\";\n\nimport ReactDOM from \"react-dom\";\nimport React from \"react\";\nimport { Router, Route } from \"react-router-dom\";\nimport { createBrowserHistory, createMemoryHistory } from \"history\";\nimport { pushHistoryState } from \"./utils/history\";\nimport UIRoot from \"./react-components/ui-root\";\nimport AuthChannel from \"./utils/auth-channel\";\nimport HubChannel from \"./utils/hub-channel\";\nimport LinkChannel from \"./utils/link-channel\";\nimport { connectToReticulum } from \"./utils/phoenix-utils\";\nimport { disableiOSZoom } from \"./utils/disable-ios-zoom\";\nimport { proxiedUrlFor } from \"./utils/media-url-utils\";\nimport { traverseMeshesAndAddShapes } from \"./utils/physics-utils\";\nimport { handleExitTo2DInterstitial, exit2DInterstitialAndEnterVR } from \"./utils/vr-interstitial\";\nimport { getAvatarSrc } from \"./utils/avatar-utils.js\";\nimport MessageDispatch from \"./message-dispatch\";\nimport SceneEntryManager from \"./scene-entry-manager\";\nimport Subscriptions from \"./subscriptions\";\nimport { createInWorldLogMessage } from \"./react-components/chat-message\";\n\nimport \"./systems/nav\";\nimport \"./systems/frame-scheduler\";\nimport \"./systems/personal-space-bubble\";\nimport \"./systems/app-mode\";\nimport \"./systems/permissions\";\nimport \"./systems/exit-on-blur\";\nimport \"./systems/auto-pixel-ratio\";\nimport \"./systems/idle-detector\";\nimport \"./systems/camera-tools\";\nimport \"./systems/userinput/userinput\";\nimport \"./systems/userinput/userinput-debug\";\nimport \"./systems/ui-hotkeys\";\nimport \"./systems/tips\";\nimport \"./systems/interactions\";\nimport \"./systems/hubs-systems\";\nimport \"./systems/capture-system\";\nimport \"./systems/listed-media\";\nimport \"./systems/linked-media\";\nimport { SOUND_CHAT_MESSAGE } from \"./systems/sound-effects-system\";\n\nimport \"./gltf-component-mappings\";\n\nimport { App } from \"./App\";\n\nwindow.APP = new App();\nwindow.APP.RENDER_ORDER = {\n  HUD_BACKGROUND: 1,\n  HUD_ICONS: 2,\n  CURSOR: 3\n};\nconst store = window.APP.store;\nconst mediaSearchStore = window.APP.mediaSearchStore;\nconst OAUTH_FLOW_PERMS_TOKEN_KEY = \"ret-oauth-flow-perms-token\";\nconst NOISY_OCCUPANT_COUNT = 12; // Above this # of occupants, we stop posting join/leaves/renames\n\n// Maximum number of people in the room/entering before users are forced to observer mode.\n// Eventually this should be moved to a room setting.\nconst MAX_OCCUPIED_ROOM_ENTRY_SLOTS = 24;\n\nconst qs = new URLSearchParams(location.search);\nconst isMobile = AFRAME.utils.device.isMobile();\nconst isMobileVR = AFRAME.utils.device.isMobileVR();\nconst isEmbed = window.self !== window.top;\nif (isEmbed && !qs.get(\"embed_token\")) {\n  // Should be covered by X-Frame-Options, but just in case.\n  throw new Error(\"no embed token\");\n}\n\nTHREE.Object3D.DefaultMatrixAutoUpdate = false;\nwindow.APP.quality =\n  window.APP.store.state.preferences.materialQualitySetting === \"low\"\n    ? \"low\"\n    : window.APP.store.state.preferences.materialQualitySetting === \"high\"\n      ? \"high\"\n      : isMobile || isMobileVR\n        ? \"low\"\n        : \"high\";\n\nimport \"./components/owned-object-limiter\";\nimport \"./components/owned-object-cleanup-timeout\";\nimport \"./components/set-unowned-body-kinematic\";\nimport \"./components/scalable-when-grabbed\";\nimport \"./components/networked-counter\";\nimport \"./components/event-repeater\";\nimport \"./components/set-yxz-order\";\n\nimport \"./components/cursor-controller\";\n\nimport \"./components/nav-mesh-helper\";\n\nimport \"./components/tools/pen\";\nimport \"./components/tools/pen-laser\";\nimport \"./components/tools/networked-drawing\";\nimport \"./components/tools/drawing-manager\";\n\nimport \"./components/body-helper\";\nimport \"./components/shape-helper\";\n\nimport registerNetworkSchemas from \"./network-schemas\";\nimport registerTelemetry from \"./telemetry\";\nimport { warmSerializeElement } from \"./utils/serialize-element\";\n\nimport { getAvailableVREntryTypes, VR_DEVICE_AVAILABILITY } from \"./utils/vr-caps-detect\";\nimport detectConcurrentLoad from \"./utils/concurrent-load-detector\";\n\nimport qsTruthy from \"./utils/qs_truthy\";\n\nconst PHOENIX_RELIABLE_NAF = \"phx-reliable\";\nNAF.options.firstSyncSource = PHOENIX_RELIABLE_NAF;\nNAF.options.syncSource = PHOENIX_RELIABLE_NAF;\n\nconst isBotMode = qsTruthy(\"bot\");\nconst isTelemetryDisabled = qsTruthy(\"disable_telemetry\");\nconst isDebug = qsTruthy(\"debug\");\n\nif (!isBotMode && !isTelemetryDisabled) {\n  registerTelemetry(\"/hub\", \"Room Landing Page\");\n}\n\ndisableiOSZoom();\ndetectConcurrentLoad();\n\nfunction getPlatformUnsupportedReason() {\n  if (typeof RTCDataChannelEvent === \"undefined\") return \"no_data_channels\";\n  return null;\n}\n\nfunction setupLobbyCamera() {\n  const camera = document.getElementById(\"viewing-camera\");\n  const previewCamera = document.getElementById(\"environment-scene\").object3D.getObjectByName(\"scene-preview-camera\");\n\n  if (previewCamera) {\n    camera.object3D.position.copy(previewCamera.position);\n    camera.object3D.rotation.copy(previewCamera.rotation);\n    camera.object3D.rotation.reorder(\"YXZ\");\n  } else {\n    const cameraPos = camera.object3D.position;\n    camera.object3D.position.set(cameraPos.x, 2.5, cameraPos.z);\n  }\n\n  camera.object3D.matrixNeedsUpdate = true;\n\n  camera.removeAttribute(\"scene-preview-camera\");\n  camera.setAttribute(\"scene-preview-camera\", \"positionOnly: true; duration: 60\");\n}\n\nlet uiProps = {};\n\n// Hub ID and slug are the basename\nlet routerBaseName = document.location.pathname\n  .split(\"/\")\n  .slice(0, 2)\n  .join(\"/\");\n\nif (document.location.pathname.includes(\"hub.html\")) {\n  routerBaseName = \"/\";\n}\n\n// when loading the client as a \"default room\" on the homepage, use MemoryHistory since exposing all the client paths at the root is undesirable\nconst history = routerBaseName === \"/\" ? createMemoryHistory() : createBrowserHistory({ basename: routerBaseName });\nwindow.APP.history = history;\n\nconst qsVREntryType = qs.get(\"vr_entry_type\");\n\nfunction mountUI(props = {}) {\n  const scene = document.querySelector(\"a-scene\");\n  const disableAutoExitOnIdle =\n    qsTruthy(\"allow_idle\") || (process.env.NODE_ENV === \"development\" && !qs.get(\"idle_timeout\"));\n  const isCursorHoldingPen =\n    scene &&\n    (scene.systems.userinput.activeSets.includes(userinputSets.rightCursorHoldingPen) ||\n      scene.systems.userinput.activeSets.includes(userinputSets.leftCursorHoldingPen));\n  const hasActiveCamera = scene && !!scene.systems[\"camera-tools\"].getMyCamera();\n  const forcedVREntryType = qsVREntryType;\n\n  ReactDOM.render(\n    <Router history={history}>\n      <Route\n        render={routeProps => (\n          <UIRoot\n            {...{\n              scene,\n              isBotMode,\n              disableAutoExitOnIdle,\n              forcedVREntryType,\n              store,\n              mediaSearchStore,\n              isCursorHoldingPen,\n              hasActiveCamera,\n              ...props,\n              ...routeProps\n            }}\n          />\n        )}\n      />\n    </Router>,\n    document.getElementById(\"ui-root\")\n  );\n}\n\nfunction remountUI(props) {\n  uiProps = { ...uiProps, ...props };\n  mountUI(uiProps);\n}\n\nasync function updateUIForHub(hub) {\n  remountUI({\n    hubId: hub.hub_id,\n    hubName: hub.name,\n    hubDescription: hub.description,\n    hubMemberPermissions: hub.member_permissions,\n    hubAllowPromotion: hub.allow_promotion,\n    hubScene: hub.scene,\n    hubEntryCode: hub.entry_code\n  });\n}\n\nasync function updateEnvironmentForHub(hub, entryManager) {\n  let sceneUrl;\n  let isLegacyBundle; // Deprecated\n\n  const sceneErrorHandler = () => {\n    remountUI({ roomUnavailableReason: \"scene_error\" });\n    entryManager.exitScene();\n  };\n\n  const environmentScene = document.querySelector(\"#environment-scene\");\n  const sceneEl = document.querySelector(\"a-scene\");\n\n  if (hub.scene) {\n    isLegacyBundle = false;\n    sceneUrl = hub.scene.model_url;\n  } else if (hub.scene === null) {\n    // delisted/removed scene\n    sceneUrl = loadingEnvironment;\n  } else {\n    const defaultSpaceTopic = hub.topics[0];\n    const glbAsset = defaultSpaceTopic.assets.find(a => a.asset_type === \"glb\");\n    const bundleAsset = defaultSpaceTopic.assets.find(a => a.asset_type === \"gltf_bundle\");\n    sceneUrl = (glbAsset || bundleAsset).src || loadingEnvironment;\n    const hasExtension = /\\.gltf/i.test(sceneUrl) || /\\.glb/i.test(sceneUrl);\n    isLegacyBundle = !(glbAsset || hasExtension);\n  }\n\n  if (isLegacyBundle) {\n    // Deprecated\n    const res = await fetch(sceneUrl);\n    const data = await res.json();\n    const baseURL = new URL(THREE.LoaderUtils.extractUrlBase(sceneUrl), window.location.href);\n    sceneUrl = new URL(data.assets[0].src, baseURL).href;\n  } else {\n    sceneUrl = proxiedUrlFor(sceneUrl);\n  }\n\n  console.log(`Scene URL: ${sceneUrl}`);\n\n  let environmentEl = null;\n\n  if (environmentScene.childNodes.length === 0) {\n    const environmentEl = document.createElement(\"a-entity\");\n\n    environmentEl.addEventListener(\n      \"model-loaded\",\n      () => {\n        environmentEl.removeEventListener(\"model-error\", sceneErrorHandler);\n\n        // Show the canvas once the model has loaded\n        document.querySelector(\".a-canvas\").classList.remove(\"a-hidden\");\n\n        sceneEl.addState(\"visible\");\n\n        //TODO: check if the environment was made with spoke to determine if a shape should be added\n        traverseMeshesAndAddShapes(environmentEl);\n      },\n      { once: true }\n    );\n\n    environmentEl.addEventListener(\"model-error\", sceneErrorHandler, { once: true });\n\n    environmentEl.setAttribute(\"gltf-model-plus\", { src: sceneUrl, useCache: false, inflate: true });\n    environmentScene.appendChild(environmentEl);\n  } else {\n    // Change environment\n    environmentEl = environmentScene.childNodes[0];\n\n    // Clear the three.js image cache and load the loading environment before switching to the new one.\n    THREE.Cache.clear();\n    const waypointSystem = sceneEl.systems[\"hubs-systems\"].waypointSystem;\n    waypointSystem.releaseAnyOccupiedWaypoints();\n\n    environmentEl.addEventListener(\n      \"model-loaded\",\n      () => {\n        environmentEl.addEventListener(\n          \"model-loaded\",\n          () => {\n            environmentEl.removeEventListener(\"model-error\", sceneErrorHandler);\n            traverseMeshesAndAddShapes(environmentEl);\n\n            // We've already entered, so move to new spawn point once new environment is loaded\n            if (sceneEl.is(\"entered\")) {\n              waypointSystem.moveToSpawnPoint();\n            }\n\n            const fader = document.getElementById(\"viewing-camera\").components[\"fader\"];\n\n            // Add a slight delay before de-in to reduce hitching.\n            setTimeout(() => fader.fadeIn(), 2000);\n          },\n          { once: true }\n        );\n\n        environmentEl.setAttribute(\"gltf-model-plus\", { src: sceneUrl });\n      },\n      { once: true }\n    );\n\n    if (!sceneEl.is(\"entered\")) {\n      environmentEl.addEventListener(\"model-error\", sceneErrorHandler, { once: true });\n    }\n\n    environmentEl.setAttribute(\"gltf-model-plus\", { src: loadingEnvironment });\n  }\n}\n\nfunction handleHubChannelJoined(entryManager, hubChannel, messageDispatch, data) {\n  const scene = document.querySelector(\"a-scene\");\n  const isRejoin = NAF.connection.isConnected();\n\n  if (isRejoin) {\n    // Slight hack, to ensure correct presence state we need to re-send the entry event\n    // on re-join. Ideally this would be updated into the channel socket state but this\n    // would require significant changes to the hub channel events and socket management.\n    if (scene.is(\"entered\")) {\n      hubChannel.sendEnteredEvent();\n    }\n\n    // Send complete sync on phoenix re-join.\n    NAF.connection.entities.completeSync(null, true);\n    return;\n  }\n\n  // Turn off NAF for embeds as an optimization, so the user's browser isn't getting slammed\n  // with NAF traffic on load.\n  if (isEmbed) {\n    hubChannel.allowNAFTraffic(false);\n  }\n\n  const hub = data.hubs[0];\n\n  let embedToken = hub.embed_token;\n\n  if (!embedToken) {\n    const embedTokenEntry = store.state.embedTokens && store.state.embedTokens.find(t => t.hubId === hub.hub_id);\n\n    if (embedTokenEntry) {\n      embedToken = embedTokenEntry.embedToken;\n    }\n  }\n\n  console.log(`Janus host: ${hub.host}:${hub.port}`);\n\n  remountUI({\n    onSendMessage: messageDispatch.dispatch,\n    onLoaded: () => store.executeOnLoadActions(scene),\n    onMediaSearchResultEntrySelected: (entry, selectAction) =>\n      scene.emit(\"action_selected_media_result_entry\", { entry, selectAction }),\n    onMediaSearchCancelled: entry => scene.emit(\"action_media_search_cancelled\", entry),\n    onAvatarSaved: entry => scene.emit(\"action_avatar_saved\", entry),\n    embedToken: embedToken\n  });\n\n  scene.addEventListener(\"action_selected_media_result_entry\", e => {\n    const { entry, selectAction } = e.detail;\n    if ((entry.type !== \"scene_listing\" && entry.type !== \"scene\") || selectAction !== \"use\") return;\n    if (!hubChannel.can(\"update_hub\")) return;\n\n    hubChannel.updateScene(entry.url);\n  });\n\n  // Handle request for user gesture\n  scene.addEventListener(\"2d-interstitial-gesture-required\", () => {\n    remountUI({\n      showInterstitialPrompt: true,\n      onInterstitialPromptClicked: () => {\n        remountUI({ showInterstitialPrompt: false, onInterstitialPromptClicked: null });\n        scene.emit(\"2d-interstitial-gesture-complete\");\n      }\n    });\n  });\n\n  const objectsScene = document.querySelector(\"#objects-scene\");\n  const objectsUrl = getReticulumFetchUrl(`/${hub.hub_id}/objects.gltf`);\n  const objectsEl = document.createElement(\"a-entity\");\n  objectsEl.setAttribute(\"gltf-model-plus\", { src: objectsUrl, useCache: false, inflate: true });\n\n  if (!isBotMode) {\n    objectsScene.appendChild(objectsEl);\n  }\n\n  // Wait for scene objects to load before connecting, so there is no race condition on network state.\n  const connectToScene = async () => {\n    scene.setAttribute(\"networked-scene\", {\n      room: hub.hub_id,\n      serverURL: `wss://${hub.host}:${hub.port}`,\n      debug: !!isDebug\n    });\n\n    while (!scene.components[\"networked-scene\"] || !scene.components[\"networked-scene\"].data) await nextTick();\n\n    scene.addEventListener(\"adapter-ready\", ({ detail: adapter }) => {\n      let newHostPollInterval = null;\n\n      // When reconnecting, update the server URL if necessary\n      adapter.setReconnectionListeners(\n        () => {\n          if (newHostPollInterval) return;\n\n          newHostPollInterval = setInterval(async () => {\n            const currentServerURL = NAF.connection.adapter.serverUrl;\n            const newHubHost = await hubChannel.getHost();\n            const newServerURL = `wss://${newHubHost}`;\n\n            if (currentServerURL !== newServerURL) {\n              console.log(\"Connecting to new Janus server \" + newServerURL);\n              scene.setAttribute(\"networked-scene\", { serverURL: newServerURL });\n              adapter.serverUrl = newServerURL;\n            }\n          }, 1000);\n        },\n        () => {\n          clearInterval(newHostPollInterval);\n          newHostPollInterval = null;\n        },\n        null\n      );\n\n      const sendViaPhoenix = reliable => (clientId, dataType, data) => {\n        const payload = { dataType, data };\n\n        if (clientId) {\n          payload.clientId = clientId;\n        }\n\n        const isOpen = hubChannel.channel.socket.connectionState() === \"open\";\n\n        if (isOpen || reliable) {\n          if (isOpen) {\n            hubChannel.channel.push(\"naf\", payload);\n          } else {\n            // Memory is re-used, so make a copy\n            hubChannel.channel.push(\"naf\", AFRAME.utils.clone(payload));\n          }\n        }\n      };\n\n      adapter.reliableTransport = sendViaPhoenix(true);\n      adapter.unreliableTransport = sendViaPhoenix(false);\n    });\n\n    const loadEnvironmentAndConnect = () => {\n      updateEnvironmentForHub(hub, entryManager);\n      function onConnectionError() {\n        console.error(\"Unknown error occurred while attempting to connect to networked scene.\");\n        remountUI({ roomUnavailableReason: \"connect_error\" });\n        entryManager.exitScene();\n      }\n\n      const connectionErrorTimeout = setTimeout(onConnectionError, 90000);\n      scene.components[\"networked-scene\"]\n        .connect()\n        .then(() => {\n          clearTimeout(connectionErrorTimeout);\n          scene.emit(\"didConnectToNetworkedScene\");\n        })\n        .catch(connectError => {\n          clearTimeout(connectionErrorTimeout);\n          // hacky until we get return codes\n          const isFull = connectError.error && connectError.error.msg.match(/\\bfull\\b/i);\n          console.error(connectError);\n          remountUI({ roomUnavailableReason: isFull ? \"full\" : \"connect_error\" });\n          entryManager.exitScene();\n\n          return;\n        });\n    };\n\n    updateUIForHub(hub);\n\n    if (!isEmbed) {\n      loadEnvironmentAndConnect();\n    } else {\n      remountUI({\n        onPreloadLoadClicked: () => {\n          hubChannel.allowNAFTraffic(true);\n          remountUI({ showPreload: false });\n          loadEnvironmentAndConnect();\n        }\n      });\n    }\n  };\n\n  if (!isBotMode) {\n    objectsEl.addEventListener(\"model-loaded\", async el => {\n      if (el.target !== objectsEl) return;\n      connectToScene();\n    });\n  } else {\n    connectToScene();\n  }\n}\n\nasync function runBotMode(scene, entryManager) {\n  const noop = () => {};\n  scene.renderer = { setAnimationLoop: noop, render: noop };\n\n  while (!NAF.connection.isConnected()) await nextTick();\n  entryManager.enterSceneWhenLoaded(new MediaStream(), false);\n}\n\nfunction checkForAccountRequired() {\n  // If the app requires an account to join a room, redirect to the sign in page.\n  if (!configs.feature(\"require_account_for_join\")) return;\n  if (store.state.credentials && store.state.credentials.token) return;\n  document.location = `/?sign_in&sign_in_destination=hub&sign_in_destination_url=${encodeURIComponent(\n    document.location.toString()\n  )}`;\n}\n\ndocument.addEventListener(\"DOMContentLoaded\", async () => {\n  await store.initProfile();\n\n  const canvas = document.querySelector(\".a-canvas\");\n  canvas.classList.add(\"a-hidden\");\n\n  warmSerializeElement();\n\n  if (!window.WebAssembly) {\n    remountUI({ showWebAssemblyDialog: true });\n    return;\n  }\n\n  // If we are on iOS but we don't have the mediaDevices API, then we are likely in a Firefox or Chrome WebView,\n  // or a WebView preview used in apps like Twitter and Discord. So we show the dialog that tells users to open\n  // the room in the real Safari.\n  const detectedOS = detectOS(navigator.userAgent);\n  if (detectedOS === \"iOS\" && !navigator.mediaDevices) {\n    remountUI({ showSafariDialog: true });\n    return;\n  }\n\n  const defaultRoomId = configs.feature(\"default_room_id\");\n\n  const hubId =\n    qs.get(\"hub_id\") ||\n    (document.location.pathname === \"/\" && defaultRoomId\n      ? defaultRoomId\n      : document.location.pathname.substring(1).split(\"/\")[0]);\n  console.log(`Hub ID: ${hubId}`);\n\n  if (!defaultRoomId) {\n    // Default room won't work if account is required to access\n    checkForAccountRequired();\n  }\n\n  const subscriptions = new Subscriptions(hubId);\n\n  if (navigator.serviceWorker) {\n    try {\n      navigator.serviceWorker\n        .register(\"/hub.service.js\")\n        .then(() => {\n          navigator.serviceWorker.ready\n            .then(registration => subscriptions.setRegistration(registration))\n            .catch(() => subscriptions.setRegistrationFailed());\n        })\n        .catch(() => subscriptions.setRegistrationFailed());\n    } catch (e) {\n      subscriptions.setRegistrationFailed();\n    }\n  } else {\n    subscriptions.setRegistrationFailed();\n  }\n\n  const scene = document.querySelector(\"a-scene\");\n  scene.setAttribute(\"shadow\", { enabled: window.APP.quality !== \"low\" }); // Disable shadows on low quality\n\n  // HACK - Trigger initial batch preparation with an invisible object\n  scene\n    .querySelector(\"#batch-prep\")\n    .setAttribute(\"media-image\", { batch: true, src: initialBatchImage, contentType: \"image/png\" });\n\n  const onSceneLoaded = () => {\n    const physicsSystem = scene.systems[\"hubs-systems\"].physicsSystem;\n    physicsSystem.setDebug(isDebug || physicsSystem.debug);\n    patchThreeAllocations();\n  };\n\n  if (scene.hasLoaded) {\n    onSceneLoaded();\n  } else {\n    scene.addEventListener(\"loaded\", onSceneLoaded, { once: true });\n  }\n\n  // If the stored avatar doesn't have a valid src, reset to a legacy avatar.\n  const avatarSrc = await getAvatarSrc(store.state.profile.avatarId);\n  if (!avatarSrc) {\n    await store.resetToRandomDefaultAvatar();\n  }\n\n  const authChannel = new AuthChannel(store);\n  const hubChannel = new HubChannel(store, hubId);\n  const availableVREntryTypes = await getAvailableVREntryTypes();\n  const entryManager = new SceneEntryManager(hubChannel, authChannel, availableVREntryTypes, history);\n  const performConditionalSignIn = async (predicate, action, messageId, onFailure) => {\n    if (predicate()) return action();\n\n    const signInContinueTextId = scene.is(\"vr-mode\") ? \"entry.return-to-vr\" : \"dialog.close\";\n\n    await handleExitTo2DInterstitial(true, () => remountUI({ showSignInDialog: false }));\n\n    remountUI({\n      showSignInDialog: true,\n      signInMessageId: `sign-in.${messageId}`,\n      signInCompleteMessageId: `sign-in.${messageId}-complete`,\n      signInContinueTextId,\n      onContinueAfterSignIn: async () => {\n        remountUI({ showSignInDialog: false });\n        let actionError = null;\n        if (predicate()) {\n          try {\n            await action();\n          } catch (e) {\n            actionError = e;\n          }\n        } else {\n          actionError = new Error(\"Predicate failed post sign-in\");\n        }\n\n        if (actionError && onFailure) onFailure(actionError);\n        exit2DInterstitialAndEnterVR();\n      }\n    });\n  };\n\n  window.addEventListener(\"action_create_avatar\", () => {\n    performConditionalSignIn(\n      () => hubChannel.signedIn,\n      () => pushHistoryState(history, \"overlay\", \"avatar-editor\"),\n      \"create-avatar\"\n    );\n  });\n\n  scene.addEventListener(\"scene_media_selected\", e => {\n    const sceneInfo = e.detail;\n\n    performConditionalSignIn(\n      () => hubChannel.can(\"update_hub\"),\n      () => hubChannel.updateScene(sceneInfo),\n      \"change-scene\"\n    );\n  });\n\n  scene.addEventListener(\"action_media_tweet\", async e => {\n    let isInModal = false;\n    let isInOAuth = false;\n\n    const exitOAuth = () => {\n      isInOAuth = false;\n      store.clearOnLoadActions();\n      remountUI({ showOAuthDialog: false, oauthInfo: null });\n    };\n\n    await handleExitTo2DInterstitial(true, () => {\n      if (isInModal) history.goBack();\n      if (isInOAuth) exitOAuth();\n    });\n\n    performConditionalSignIn(\n      () => hubChannel.signedIn,\n      async () => {\n        // Strip el from stored payload because it won't serialize into the store.\n        const serializableDetail = {};\n        Object.assign(serializableDetail, e.detail);\n        delete serializableDetail.el;\n\n        if (hubChannel.can(\"tweet\")) {\n          isInModal = true;\n          pushHistoryState(history, \"modal\", \"tweet\", serializableDetail);\n        } else {\n          if (e.detail.el) {\n            // Pin the object if we have to go through OAuth, since the page will refresh and\n            // the object will otherwise be removed\n            e.detail.el.setAttribute(\"pinnable\", \"pinned\", true);\n          }\n\n          const url = await hubChannel.getTwitterOAuthURL();\n\n          isInOAuth = true;\n          store.enqueueOnLoadAction(\"emit_scene_event\", { event: \"action_media_tweet\", detail: serializableDetail });\n          remountUI({\n            showOAuthDialog: true,\n            oauthInfo: [{ type: \"twitter\", url: url }],\n            onCloseOAuthDialog: () => exitOAuth()\n          });\n        }\n      },\n      \"tweet\"\n    );\n  });\n\n  remountUI({ performConditionalSignIn, embed: isEmbed, showPreload: isEmbed });\n  entryManager.performConditionalSignIn = performConditionalSignIn;\n  entryManager.init();\n\n  const linkChannel = new LinkChannel(store);\n\n  window.APP.scene = scene;\n  window.APP.hubChannel = hubChannel;\n  window.dispatchEvent(new CustomEvent(\"hub_channel_ready\"));\n\n  const handleEarlyVRMode = () => {\n    // If VR headset is activated, refreshing page will fire vrdisplayactivate\n    // which puts A-Frame in VR mode, so exit VR mode whenever it is attempted\n    // to be entered and we haven't entered the room yet.\n    if (scene.is(\"vr-mode\") && !scene.is(\"vr-entered\") && !isMobileVR) {\n      console.log(\"Pre-emptively exiting VR mode.\");\n      scene.exitVR();\n      return true;\n    }\n\n    return false;\n  };\n\n  scene.addEventListener(\"enter-vr\", () => {\n    if (handleEarlyVRMode()) return true;\n\n    if (isMobileVR) {\n      // Optimization, stop drawing UI if not visible\n      remountUI({ hide: true });\n    }\n\n    document.body.classList.add(\"vr-mode\");\n\n    // Don't stretch canvas on cardboard, since that's drawing the actual VR view :)\n    if ((!isMobile && !isMobileVR) || availableVREntryTypes.cardboard !== VR_DEVICE_AVAILABILITY.yes) {\n      document.body.classList.add(\"vr-mode-stretch\");\n    }\n  });\n\n  handleEarlyVRMode();\n\n  // HACK A-Frame 0.9.0 seems to fail to wire up vrdisplaypresentchange early enough\n  // to catch presentation state changes and recognize that an HMD is presenting on startup.\n  window.addEventListener(\n    \"vrdisplaypresentchange\",\n    () => {\n      if (scene.is(\"vr-entered\")) return;\n      if (scene.is(\"vr-mode\")) return;\n\n      const device = AFRAME.utils.device.getVRDisplay();\n\n      if (device && device.isPresenting) {\n        if (!scene.is(\"vr-mode\")) {\n          console.warn(\"Hit A-Frame bug where VR display is presenting but A-Frame has not entered VR mode.\");\n          scene.enterVR();\n        }\n      }\n    },\n    { once: true }\n  );\n\n  scene.addEventListener(\"exit-vr\", () => {\n    document.body.classList.remove(\"vr-mode\");\n    document.body.classList.remove(\"vr-mode-stretch\");\n\n    remountUI({ hide: false });\n\n    // HACK: Oculus browser pauses videos when exiting VR mode, so we need to resume them after a timeout.\n    if (/OculusBrowser/i.test(window.navigator.userAgent)) {\n      document.querySelectorAll(\"[media-video]\").forEach(m => {\n        const videoComponent = m.components[\"media-video\"];\n\n        if (videoComponent) {\n          videoComponent._ignorePauseStateChanges = true;\n\n          setTimeout(() => {\n            const video = videoComponent.video;\n\n            if (video && video.paused && !videoComponent.data.videoPaused) {\n              video.play();\n            }\n\n            videoComponent._ignorePauseStateChanges = false;\n          }, 1000);\n        }\n      });\n    }\n  });\n\n  registerNetworkSchemas();\n\n  remountUI({\n    authChannel,\n    hubChannel,\n    linkChannel,\n    subscriptions,\n    enterScene: entryManager.enterScene,\n    exitScene: reason => {\n      entryManager.exitScene();\n\n      if (reason) {\n        remountUI({ roomUnavailableReason: reason });\n      }\n    },\n    initialIsSubscribed: subscriptions.isSubscribed(),\n    activeTips: scene.systems.tips.activeTips\n  });\n\n  scene.addEventListener(\"action_focus_chat\", () => {\n    const chatFocusTarget = document.querySelector(\".chat-focus-target\");\n    chatFocusTarget && chatFocusTarget.focus();\n  });\n\n  scene.addEventListener(\"tips_changed\", e => {\n    remountUI({ activeTips: e.detail });\n  });\n\n  scene.addEventListener(\"leave_room_requested\", () => {\n    entryManager.exitScene(\"left\");\n    remountUI({ roomUnavailableReason: \"left\" });\n  });\n\n  scene.addEventListener(\"camera_toggled\", () => remountUI({}));\n\n  scene.addEventListener(\"camera_removed\", () => remountUI({}));\n\n  scene.addEventListener(\"hub_closed\", () => {\n    scene.exitVR();\n    entryManager.exitScene(\"closed\");\n    remountUI({ roomUnavailableReason: \"closed\" });\n  });\n\n  scene.addEventListener(\"action_camera_recording_started\", () => hubChannel.beginRecording());\n  scene.addEventListener(\"action_camera_recording_ended\", () => hubChannel.endRecording());\n\n  const platformUnsupportedReason = getPlatformUnsupportedReason();\n\n  if (platformUnsupportedReason) {\n    remountUI({ platformUnsupportedReason });\n    entryManager.exitScene();\n    return;\n  }\n\n  if (qs.get(\"required_version\") && process.env.BUILD_VERSION) {\n    const buildNumber = process.env.BUILD_VERSION.split(\" \", 1)[0]; // e.g. \"123 (abcd5678)\"\n\n    if (qs.get(\"required_version\") !== buildNumber) {\n      remountUI({ roomUnavailableReason: \"version_mismatch\" });\n      setTimeout(() => document.location.reload(), 5000);\n      entryManager.exitScene();\n      return;\n    }\n  }\n\n  getReticulumMeta().then(reticulumMeta => {\n    console.log(`Reticulum @ ${reticulumMeta.phx_host}: v${reticulumMeta.version} on ${reticulumMeta.pool}`);\n\n    if (\n      qs.get(\"required_ret_version\") &&\n      (qs.get(\"required_ret_version\") !== reticulumMeta.version || qs.get(\"required_ret_pool\") !== reticulumMeta.pool)\n    ) {\n      remountUI({ roomUnavailableReason: \"version_mismatch\" });\n      setTimeout(() => document.location.reload(), 5000);\n      entryManager.exitScene();\n      return;\n    }\n  });\n\n  if (isMobileVR) {\n    remountUI({ availableVREntryTypes, forcedVREntryType: \"vr\" });\n\n    if (/Oculus/.test(navigator.userAgent)) {\n      // HACK - The polyfill reports Cardboard as the primary VR display on startup out ahead of\n      // Oculus Go on Oculus Browser 5.5.0 beta. This display is cached by A-Frame,\n      // so we need to resolve that and get the real VRDisplay before entering as well.\n      const displays = await navigator.getVRDisplays();\n      const vrDisplay = displays.length && displays[0];\n      AFRAME.utils.device.getVRDisplay = () => vrDisplay;\n    }\n  } else {\n    const hasVREntryDevice =\n      availableVREntryTypes.cardboard !== VR_DEVICE_AVAILABILITY.no ||\n      availableVREntryTypes.generic !== VR_DEVICE_AVAILABILITY.no ||\n      availableVREntryTypes.daydream !== VR_DEVICE_AVAILABILITY.no;\n\n    remountUI({ availableVREntryTypes, forcedVREntryType: qsVREntryType || (!hasVREntryDevice ? \"2d\" : null) });\n  }\n\n  const environmentScene = document.querySelector(\"#environment-scene\");\n\n  const onFirstEnvironmentLoad = () => {\n    // Replace renderer with a noop renderer to reduce bot resource usage.\n    if (isBotMode) {\n      runBotMode(scene, entryManager);\n    }\n\n    environmentScene.removeEventListener(\"model-loaded\", onFirstEnvironmentLoad);\n  };\n\n  environmentScene.addEventListener(\"model-loaded\", onFirstEnvironmentLoad);\n\n  environmentScene.addEventListener(\"model-loaded\", () => {\n    if (!scene.is(\"entered\")) {\n      setupLobbyCamera();\n    }\n\n    // This will be run every time the environment is changed (including the first load.)\n    remountUI({ environmentSceneLoaded: true });\n    scene.emit(\"environment-scene-loaded\");\n\n    // Re-bind the teleporter controls collision meshes in case the scene changed.\n    document.querySelectorAll(\"a-entity[teleporter]\").forEach(x => x.components[\"teleporter\"].queryCollisionEntities());\n\n    for (const modelEl of environmentScene.children) {\n      addAnimationComponents(modelEl);\n    }\n  });\n\n  // Socket disconnects on refresh but we don't want to show exit scene in that scenario.\n  let isReloading = false;\n  window.addEventListener(\"beforeunload\", () => (isReloading = true));\n\n  const socket = await connectToReticulum(isDebug);\n\n  socket.onClose(e => {\n    // We don't currently have an easy way to distinguish between being kicked (server closes socket)\n    // and a variety of other network issues that seem to produce the 1000 closure code, but the\n    // latter are probably more common. Either way, we just tell the user they got disconnected.\n    const NORMAL_CLOSURE = 1000;\n\n    if (e.code === NORMAL_CLOSURE && !isReloading) {\n      entryManager.exitScene();\n      remountUI({ roomUnavailableReason: \"disconnected\" });\n    }\n  });\n\n  let retDeployReconnectInterval;\n  const retReconnectMaxDelayMs = 15000;\n\n  // Reticulum global channel\n  let retPhxChannel = socket.channel(`ret`, { hub_id: hubId });\n  retPhxChannel\n    .join()\n    .receive(\"ok\", async data => subscriptions.setVapidPublicKey(data.vapid_public_key))\n    .receive(\"error\", res => {\n      subscriptions.setVapidPublicKey(null);\n      console.error(res);\n    });\n\n  const pushSubscriptionEndpoint = await subscriptions.getCurrentEndpoint();\n\n  const oauthFlowPermsToken = Cookies.get(OAUTH_FLOW_PERMS_TOKEN_KEY);\n\n  if (oauthFlowPermsToken) {\n    Cookies.remove(OAUTH_FLOW_PERMS_TOKEN_KEY);\n  }\n\n  const createHubChannelParams = permsToken => {\n    const params = {\n      profile: store.state.profile,\n      push_subscription_endpoint: pushSubscriptionEndpoint,\n      auth_token: null,\n      perms_token: null,\n      context: {\n        mobile: isMobile || isMobileVR,\n        embed: isEmbed\n      }\n    };\n\n    if (isMobileVR) {\n      params.context.hmd = true;\n    }\n\n    if (permsToken) {\n      params.perms_token = permsToken;\n    }\n\n    const { token } = store.state.credentials;\n    if (token) {\n      console.log(`Logged into account ${store.credentialsAccountId}`);\n      params.auth_token = token;\n    }\n\n    return params;\n  };\n\n  const migrateToNewReticulumServer = async deployNotification => {\n    // On Reticulum deploys, reconnect after a random delay until pool + version match deployed version/pool\n    console.log(`Reticulum deploy detected v${deployNotification.ret_version} on ${deployNotification.ret_pool}`);\n    clearInterval(retDeployReconnectInterval);\n\n    setTimeout(() => {\n      const tryReconnect = async () => {\n        invalidateReticulumMeta();\n        const reticulumMeta = await getReticulumMeta();\n\n        if (\n          reticulumMeta.pool === deployNotification.ret_pool &&\n          reticulumMeta.version === deployNotification.ret_version\n        ) {\n          console.log(\"Reticulum reconnecting.\");\n          clearInterval(retDeployReconnectInterval);\n          const oldSocket = retPhxChannel.socket;\n          const socket = await connectToReticulum(isDebug, oldSocket.params());\n          retPhxChannel = await migrateChannelToSocket(retPhxChannel, socket);\n          await hubChannel.migrateToSocket(socket, createHubChannelParams());\n          authChannel.setSocket(socket);\n          linkChannel.setSocket(socket);\n\n          // Disconnect old socket after a delay to ensure this user is always registered in presence.\n          setTimeout(() => {\n            console.log(\"Reconnection complete. Disconnecting old reticulum socket.\");\n            oldSocket.teardown();\n          }, 10000);\n        }\n      };\n\n      retDeployReconnectInterval = setInterval(tryReconnect, 5000);\n      tryReconnect();\n    }, Math.floor(Math.random() * retReconnectMaxDelayMs));\n  };\n\n  retPhxChannel.on(\"notice\", async data => {\n    // On Reticulum deploys, reconnect after a random delay until pool + version match deployed version/pool\n    if (data.event === \"ret-deploy\") {\n      await migrateToNewReticulumServer(data);\n    }\n  });\n\n  const hubPhxChannel = socket.channel(`hub:${hubId}`, createHubChannelParams(oauthFlowPermsToken));\n\n  const presenceLogEntries = [];\n  const addToPresenceLog = entry => {\n    entry.key = Date.now().toString();\n\n    presenceLogEntries.push(entry);\n    remountUI({ presenceLogEntries });\n    if (entry.type === \"chat\" && scene.is(\"loaded\")) {\n      scene.systems[\"hubs-systems\"].soundEffectsSystem.playSoundOneShot(SOUND_CHAT_MESSAGE);\n    }\n\n    // Fade out and then remove\n    setTimeout(() => {\n      entry.expired = true;\n      remountUI({ presenceLogEntries });\n\n      setTimeout(() => {\n        presenceLogEntries.splice(presenceLogEntries.indexOf(entry), 1);\n        remountUI({ presenceLogEntries });\n      }, 5000);\n    }, 20000);\n  };\n\n  const messageDispatch = new MessageDispatch(\n    scene,\n    entryManager,\n    hubChannel,\n    addToPresenceLog,\n    remountUI,\n    mediaSearchStore\n  );\n  document.getElementById(\"avatar-rig\").messageDispatch = messageDispatch;\n\n  let isInitialJoin = true;\n\n  // state used to ensure we only remountUI when entry allowed changes, since otherwise we'd re-render\n  // on every presence sync.\n  let entryDisallowed = false;\n\n  // We need to be able to wait for initial presence syncs across reconnects and socket migrations,\n  // so we create this object in the outer scope and assign it a new promise on channel join.\n  const presenceSync = {\n    promise: null,\n    resolve: null\n  };\n\n  hubChannel.setPhoenixChannel(hubPhxChannel);\n\n  hubPhxChannel\n    .join()\n    .receive(\"ok\", async data => {\n      socket.params().session_id = data.session_id;\n      socket.params().session_token = data.session_token;\n\n      const vrHudPresenceCount = document.querySelector(\"#hud-presence-count\");\n\n      presenceSync.promise = new Promise(resolve => {\n        presenceSync.resolve = resolve;\n      });\n\n      if (isInitialJoin) {\n        store.addEventListener(\"profilechanged\", hubChannel.sendProfileUpdate.bind(hubChannel));\n\n        hubChannel.presence.onSync(() => {\n          const presence = hubChannel.presence;\n\n          remountUI({\n            sessionId: socket.params().session_id,\n            presences: presence.state\n          });\n\n          const occupantCount = Object.entries(presence.state).length;\n          vrHudPresenceCount.setAttribute(\"text\", \"value\", occupantCount.toString());\n\n          // A room entry slot is used by people in the room, or those going through the\n          // entry flow.\n          const roomEntrySlotCount = Object.values(presence.state).reduce((acc, { metas }) => {\n            const meta = metas[metas.length - 1];\n            const usingSlot = meta.presence === \"room\" || (meta.context && meta.context.entering);\n            return acc + (usingSlot ? 1 : 0);\n          }, 0);\n\n          if (occupantCount > 1) {\n            scene.addState(\"copresent\");\n          } else {\n            scene.removeState(\"copresent\");\n          }\n\n          const entryNowDisallowed =\n            roomEntrySlotCount >= MAX_OCCUPIED_ROOM_ENTRY_SLOTS && !hubChannel.canOrWillIfCreator(\"update_hub\");\n\n          if (entryDisallowed !== entryNowDisallowed) {\n            // Optimization to prevent re-render unless entry allowed state changes.\n            entryDisallowed = entryNowDisallowed;\n            remountUI({ entryDisallowed });\n          }\n\n          // HACK - Set a flag on the presence object indicating if the initial sync has completed,\n          // which is used to determine if we should fire join/leave messages into the presence log.\n          // This flag is required since we reuse these onJoin and onLeave handler functions on\n          // socket migrations.\n          presence.__hadInitialSync = true;\n\n          presenceSync.resolve();\n\n          presence.onJoin((sessionId, current, info) => {\n            // Ignore presence join/leaves if this Presence has not yet had its initial sync (o/w the user\n            // will see join messages for every user.)\n            if (!hubChannel.presence.__hadInitialSync) return;\n\n            const meta = info.metas[info.metas.length - 1];\n            const occupantCount = Object.entries(hubChannel.presence.state).length;\n\n            if (occupantCount <= NOISY_OCCUPANT_COUNT) {\n              if (current) {\n                // Change to existing presence\n                const isSelf = sessionId === socket.params().session_id;\n                const currentMeta = current.metas[0];\n\n                if (\n                  !isSelf &&\n                  currentMeta.presence !== meta.presence &&\n                  meta.presence === \"room\" &&\n                  meta.profile.displayName\n                ) {\n                  addToPresenceLog({\n                    type: \"entered\",\n                    presence: meta.presence,\n                    name: meta.profile.displayName\n                  });\n                }\n\n                if (\n                  currentMeta.profile &&\n                  meta.profile &&\n                  currentMeta.profile.displayName !== meta.profile.displayName\n                ) {\n                  addToPresenceLog({\n                    type: \"display_name_changed\",\n                    oldName: currentMeta.profile.displayName,\n                    newName: meta.profile.displayName\n                  });\n                }\n              } else if (info.metas.length === 1) {\n                // New presence\n                const meta = info.metas[0];\n\n                if (meta.presence && meta.profile.displayName) {\n                  addToPresenceLog({\n                    type: \"join\",\n                    presence: meta.presence,\n                    name: meta.profile.displayName\n                  });\n                }\n              }\n            }\n\n            scene.emit(\"presence_updated\", {\n              sessionId,\n              profile: meta.profile,\n              roles: meta.roles,\n              permissions: meta.permissions,\n              streaming: meta.streaming,\n              recording: meta.recording\n            });\n          });\n\n          presence.onLeave((sessionId, current, info) => {\n            // Ignore presence join/leaves if this Presence has not yet had its initial sync\n            if (!hubChannel.presence.__hadInitialSync) return;\n\n            if (current && current.metas.length > 0) return;\n            const occupantCount = Object.entries(hubChannel.presence.state).length;\n            if (occupantCount > NOISY_OCCUPANT_COUNT) return;\n\n            const meta = info.metas[0];\n\n            if (meta.profile.displayName) {\n              addToPresenceLog({\n                type: \"leave\",\n                name: meta.profile.displayName\n              });\n            }\n          });\n        });\n      }\n\n      isInitialJoin = false;\n\n      const permsToken = oauthFlowPermsToken || data.perms_token;\n      hubChannel.setPermissionsFromToken(permsToken);\n\n      scene.addEventListener(\"adapter-ready\", async ({ detail: adapter }) => {\n        // HUGE HACK Safari does not like it if the first peer seen does not immediately\n        // send audio over its media stream. Otherwise, the stream doesn't work and stays\n        // silent. (Though subsequent peers work fine.)\n        //\n        // This hooks up a simple audio pipeline to push a short tone over the WebRTC\n        // media stream as its created to mitigate this Safari bug.\n        //\n        // Users will never hear this tone -- the outgoing media track is overwritten\n        // before we spawn our avatar, which is when other users will begin hearing\n        // the audio.\n        //\n        // This only covers the case where a Safari user is in the room and the first\n        // other user joins. If a user is in the room and Safari user joins,\n        // then Safari can fail to receive audio from a single peer (it does not seem\n        // to be related to silence, but may be a factor.)\n        const ctx = THREE.AudioContext.getContext();\n        const oscillator = ctx.createOscillator();\n        const gain = ctx.createGain();\n        gain.gain.setValueAtTime(0.01, ctx.currentTime);\n        const dest = ctx.createMediaStreamDestination();\n        oscillator.connect(gain);\n        gain.connect(dest);\n        oscillator.start();\n        const stream = dest.stream;\n        const track = stream.getAudioTracks()[0];\n        adapter.setClientId(socket.params().session_id);\n        adapter.setJoinToken(data.perms_token);\n        hubChannel.addEventListener(\"permissions-refreshed\", e => adapter.setJoinToken(e.detail.permsToken));\n\n        // Stop the tone after we've connected, which seems to mitigate the issue without actually\n        // having to keep this playing and using bandwidth.\n        scene.addEventListener(\n          \"didConnectToNetworkedScene\",\n          () => {\n            oscillator.stop();\n            track.enabled = false;\n          },\n          { once: true }\n        );\n\n        await adapter.setLocalMediaStream(stream);\n      });\n      subscriptions.setHubChannel(hubChannel);\n\n      subscriptions.setSubscribed(data.subscriptions.web_push);\n\n      remountUI({\n        hubIsBound: data.hub_requires_oauth,\n        initialIsFavorited: data.subscriptions.favorites,\n        initialIsSubscribed: subscriptions.isSubscribed()\n      });\n\n      await presenceSync.promise;\n\n      handleHubChannelJoined(entryManager, hubChannel, messageDispatch, data);\n    })\n    .receive(\"error\", res => {\n      if (res.reason === \"closed\") {\n        entryManager.exitScene();\n        remountUI({ roomUnavailableReason: \"closed\" });\n      } else if (res.reason === \"oauth_required\") {\n        entryManager.exitScene();\n        remountUI({ oauthInfo: res.oauth_info, showOAuthDialog: true });\n      } else if (res.reason === \"join_denied\") {\n        entryManager.exitScene();\n        remountUI({ roomUnavailableReason: \"denied\" });\n      }\n\n      console.error(res);\n    });\n\n  hubPhxChannel.on(\"naf\", data => {\n    if (!NAF.connection.adapter) return;\n\n    NAF.connection.adapter.onData(authorizeOrSanitizeMessage(data), PHOENIX_RELIABLE_NAF);\n  });\n\n  hubPhxChannel.on(\"message\", ({ session_id, type, body, from }) => {\n    const getAuthor = () => {\n      const userInfo = hubChannel.presence.state[session_id];\n      if (from) {\n        return from;\n      } else if (userInfo) {\n        return userInfo.metas[0].profile.displayName;\n      } else {\n        return \"Mystery user\";\n      }\n    };\n\n    const name = getAuthor();\n    const maySpawn = scene.is(\"entered\");\n\n    const incomingMessage = { name, type, body, maySpawn, sessionId: session_id };\n\n    if (scene.is(\"vr-mode\")) {\n      createInWorldLogMessage(incomingMessage);\n    }\n\n    addToPresenceLog(incomingMessage);\n  });\n\n  hubPhxChannel.on(\"hub_refresh\", ({ session_id, hubs, stale_fields }) => {\n    const hub = hubs[0];\n    const userInfo = hubChannel.presence.state[session_id];\n\n    updateUIForHub(hub);\n\n    if (stale_fields.includes(\"scene\")) {\n      const fader = document.getElementById(\"viewing-camera\").components[\"fader\"];\n\n      fader.fadeOut().then(() => {\n        scene.emit(\"reset_scene\");\n        updateEnvironmentForHub(hub, entryManager);\n      });\n\n      addToPresenceLog({\n        type: \"scene_changed\",\n        name: userInfo.metas[0].profile.displayName,\n        sceneName: hub.scene ? hub.scene.name : \"a custom URL\"\n      });\n    }\n\n    if (stale_fields.includes(\"member_permissions\")) {\n      hubChannel.fetchPermissions();\n    }\n\n    if (stale_fields.includes(\"name\")) {\n      const titleParts = document.title.split(\" | \"); // Assumes title has | trailing site name\n      titleParts[0] = hub.name;\n      document.title = titleParts.join(\" | \");\n\n      // Re-write the slug in the browser history\n      const pathParts = history.location.pathname.split(\"/\");\n      const oldSlug = pathParts[1];\n      const { search, state } = history.location;\n      const pathname = history.location.pathname.replace(`/${oldSlug}`, `/${hub.slug}`);\n\n      history.replace({ pathname, search, state });\n\n      addToPresenceLog({\n        type: \"hub_name_changed\",\n        name: userInfo.metas[0].profile.displayName,\n        hubName: hub.name\n      });\n    }\n\n    if (hub.entry_mode === \"deny\") {\n      scene.emit(\"hub_closed\");\n    }\n  });\n\n  hubPhxChannel.on(\"permissions_updated\", () => hubChannel.fetchPermissions());\n\n  hubPhxChannel.on(\"mute\", ({ session_id }) => {\n    if (session_id === NAF.clientId && !scene.is(\"muted\")) {\n      scene.emit(\"action_mute\");\n    }\n  });\n\n  authChannel.setSocket(socket);\n  linkChannel.setSocket(socket);\n});\n","// Stores a key in localStorage and registeres a listener for the same key being set (by another tab).\n// When detected, fire a \"concurrentload\" event.\nexport default function detectConcurrentLoad(instanceKey = \"global\") {\n  const key = `___concurrent_load_detector_${instanceKey}`;\n  localStorage.setItem(key, JSON.stringify({ started_at: new Date() }));\n  const onStorageEvent = e => {\n    if (e.key !== key) return;\n    window.dispatchEvent(new CustomEvent(\"concurrentload\"));\n    window.removeEventListener(\"storage\", onStorageEvent);\n  };\n  window.addEventListener(\"storage\", onStorageEvent);\n}\n","export default function patchThreeAllocations() {\n  const renderer = AFRAME.scenes[0].renderer;\n  const gl = renderer.context;\n\n  // These functions in three.js uses the arguments object, which allocates.\n  renderer.state.texImage2D = function(a, b, c, d, e, f, g, h, i) {\n    try {\n      if (g === undefined) {\n        gl.texImage2D(a, b, c, d, e, f);\n      } else {\n        gl.texImage2D(a, b, c, d, e, f, g, h, i);\n      }\n    } catch (error) {\n      console.error(\"THREE.WebGLState:\", error);\n    }\n  };\n\n  renderer.state.compressedTexImage2D = function(a, b, c, d, e, f, g, h, i, j) {\n    try {\n      if (h === undefined) {\n        gl.compressedTexImage2D(a, b, c, d, e, f, g);\n      } else if (i === undefined) {\n        gl.compressedTexImage2D(a, b, c, d, e, f, g, h);\n      } else if (j === undefined) {\n        gl.compressedTexImage2D(a, b, c, d, e, f, g, h, i);\n      } else {\n        gl.compressedTexImage2D(a, b, c, d, e, f, g, h, i, j);\n      }\n    } catch (error) {\n      console.error(\"THREE.WebGLState:\", error);\n    }\n  };\n}\n"],"sourceRoot":""}